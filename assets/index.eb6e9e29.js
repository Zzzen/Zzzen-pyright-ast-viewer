const OA=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}};OA();var Te=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{};function xA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Id(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),e}var rn={exports:{}},dn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cd=Symbol.for("react.element"),LA=Symbol.for("react.portal"),zA=Symbol.for("react.fragment"),UA=Symbol.for("react.strict_mode"),VA=Symbol.for("react.profiler"),BA=Symbol.for("react.provider"),WA=Symbol.for("react.context"),$A=Symbol.for("react.forward_ref"),jA=Symbol.for("react.suspense"),qA=Symbol.for("react.memo"),GA=Symbol.for("react.lazy"),Ub=Symbol.iterator;function KA(t){return t===null||typeof t!="object"?null:(t=Ub&&t[Ub]||t["@@iterator"],typeof t=="function"?t:null)}var iC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rC=Object.assign,sC={};function zc(t,e,n){this.props=t,this.context=e,this.refs=sC,this.updater=n||iC}zc.prototype.isReactComponent={};zc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function aC(){}aC.prototype=zc.prototype;function VT(t,e,n){this.props=t,this.context=e,this.refs=sC,this.updater=n||iC}var BT=VT.prototype=new aC;BT.constructor=VT;rC(BT,zc.prototype);BT.isPureReactComponent=!0;var Vb=Array.isArray,oC=Object.prototype.hasOwnProperty,WT={current:null},lC={key:!0,ref:!0,__self:!0,__source:!0};function cC(t,e,n){var i,r={},a=null,s=null;if(e!=null)for(i in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)oC.call(e,i)&&!lC.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var o=Array(l),u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:Cd,type:t,key:a,ref:s,props:r,_owner:WT.current}}function HA(t,e){return{$$typeof:Cd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $T(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cd}function YA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Bb=/\/+/g;function Zm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?YA(""+t.key):e.toString(36)}function $f(t,e,n,i,r){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Cd:case LA:s=!0}}if(s)return s=t,r=r(s),t=i===""?"."+Zm(s,0):i,Vb(r)?(n="",t!=null&&(n=t.replace(Bb,"$&/")+"/"),$f(r,e,n,"",function(u){return u})):r!=null&&($T(r)&&(r=HA(r,n+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(Bb,"$&/")+"/")+t)),e.push(r)),1;if(s=0,i=i===""?".":i+":",Vb(t))for(var l=0;l<t.length;l++){a=t[l];var o=i+Zm(a,l);s+=$f(a,e,n,o,r)}else if(o=KA(t),typeof o=="function")for(t=o.call(t),l=0;!(a=t.next()).done;)a=a.value,o=i+Zm(a,l++),s+=$f(a,e,n,o,r);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function sf(t,e,n){if(t==null)return t;var i=[],r=0;return $f(t,i,"","",function(a){return e.call(n,a,r++)}),i}function QA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tr={current:null},jf={transition:null},JA={ReactCurrentDispatcher:tr,ReactCurrentBatchConfig:jf,ReactCurrentOwner:WT};dn.Children={map:sf,forEach:function(t,e,n){sf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sf(t,function(){e++}),e},toArray:function(t){return sf(t,function(e){return e})||[]},only:function(t){if(!$T(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};dn.Component=zc;dn.Fragment=zA;dn.Profiler=VA;dn.PureComponent=VT;dn.StrictMode=UA;dn.Suspense=jA;dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JA;dn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=rC({},t.props),r=t.key,a=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=WT.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(o in e)oC.call(e,o)&&!lC.hasOwnProperty(o)&&(i[o]=e[o]===void 0&&l!==void 0?l[o]:e[o])}var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){l=Array(o);for(var u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:Cd,type:t.type,key:r,ref:a,props:i,_owner:s}};dn.createContext=function(t){return t={$$typeof:WA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BA,_context:t},t.Consumer=t};dn.createElement=cC;dn.createFactory=function(t){var e=cC.bind(null,t);return e.type=t,e};dn.createRef=function(){return{current:null}};dn.forwardRef=function(t){return{$$typeof:$A,render:t}};dn.isValidElement=$T;dn.lazy=function(t){return{$$typeof:GA,_payload:{_status:-1,_result:t},_init:QA}};dn.memo=function(t,e){return{$$typeof:qA,type:t,compare:e===void 0?null:e}};dn.startTransition=function(t){var e=jf.transition;jf.transition={};try{t()}finally{jf.transition=e}};dn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};dn.useCallback=function(t,e){return tr.current.useCallback(t,e)};dn.useContext=function(t){return tr.current.useContext(t)};dn.useDebugValue=function(){};dn.useDeferredValue=function(t){return tr.current.useDeferredValue(t)};dn.useEffect=function(t,e){return tr.current.useEffect(t,e)};dn.useId=function(){return tr.current.useId()};dn.useImperativeHandle=function(t,e,n){return tr.current.useImperativeHandle(t,e,n)};dn.useInsertionEffect=function(t,e){return tr.current.useInsertionEffect(t,e)};dn.useLayoutEffect=function(t,e){return tr.current.useLayoutEffect(t,e)};dn.useMemo=function(t,e){return tr.current.useMemo(t,e)};dn.useReducer=function(t,e,n){return tr.current.useReducer(t,e,n)};dn.useRef=function(t){return tr.current.useRef(t)};dn.useState=function(t){return tr.current.useState(t)};dn.useSyncExternalStore=function(t,e,n){return tr.current.useSyncExternalStore(t,e,n)};dn.useTransition=function(){return tr.current.useTransition()};dn.version="18.2.0";rn.exports=dn;var Ut=rn.exports,gg={},uC={exports:{}},Rr={},dC={exports:{}},fC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,le){var R=H.length;H.push(le);e:for(;0<R;){var ae=R-1>>>1,re=H[ae];if(0<r(re,le))H[ae]=le,H[R]=re,R=ae;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var le=H[0],R=H.pop();if(R!==le){H[0]=R;e:for(var ae=0,re=H.length,d=re>>>1;ae<d;){var k=2*(ae+1)-1,oe=H[k],ye=k+1,E=H[ye];if(0>r(oe,R))ye<re&&0>r(E,oe)?(H[ae]=E,H[ye]=R,ae=ye):(H[ae]=oe,H[k]=R,ae=k);else if(ye<re&&0>r(E,R))H[ae]=E,H[ye]=R,ae=ye;else break e}}return le}function r(H,le){var R=H.sortIndex-le.sortIndex;return R!==0?R:H.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var o=[],u=[],f=1,y=null,p=3,b=!1,v=!1,m=!1,V=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(H){for(var le=n(u);le!==null;){if(le.callback===null)i(u);else if(le.startTime<=H)i(u),le.sortIndex=le.expirationTime,e(o,le);else break;le=n(u)}}function te(H){if(m=!1,G(H),!v)if(n(o)!==null)v=!0,Y(q);else{var le=n(u);le!==null&&ee(te,le.startTime-H)}}function q(H,le){v=!1,m&&(m=!1,F(M),M=-1),b=!0;var R=p;try{for(G(le),y=n(o);y!==null&&(!(y.expirationTime>le)||H&&!J());){var ae=y.callback;if(typeof ae=="function"){y.callback=null,p=y.priorityLevel;var re=ae(y.expirationTime<=le);le=t.unstable_now(),typeof re=="function"?y.callback=re:y===n(o)&&i(o),G(le)}else i(o);y=n(o)}if(y!==null)var d=!0;else{var k=n(u);k!==null&&ee(te,k.startTime-le),d=!1}return d}finally{y=null,p=R,b=!1}}var U=!1,D=null,M=-1,T=5,N=-1;function J(){return!(t.unstable_now()-N<T)}function L(){if(D!==null){var H=t.unstable_now();N=H;var le=!0;try{le=D(!0,H)}finally{le?ce():(U=!1,D=null)}}else U=!1}var ce;if(typeof P=="function")ce=function(){P(L)};else if(typeof MessageChannel!="undefined"){var ue=new MessageChannel,W=ue.port2;ue.port1.onmessage=L,ce=function(){W.postMessage(null)}}else ce=function(){V(L,0)};function Y(H){D=H,U||(U=!0,ce())}function ee(H,le){M=V(function(){H(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){v||b||(v=!0,Y(q))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(o)},t.unstable_next=function(H){switch(p){case 1:case 2:case 3:var le=3;break;default:le=p}var R=p;p=le;try{return H()}finally{p=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,le){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var R=p;p=H;try{return le()}finally{p=R}},t.unstable_scheduleCallback=function(H,le,R){var ae=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?ae+R:ae):R=ae,H){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=R+re,H={id:f++,callback:le,priorityLevel:H,startTime:R,expirationTime:re,sortIndex:-1},R>ae?(H.sortIndex=R,e(u,H),n(o)===null&&H===n(u)&&(m?(F(M),M=-1):m=!0,ee(te,R-ae))):(H.sortIndex=re,e(o,H),v||b||(v=!0,Y(q))),H},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(H){var le=p;return function(){var R=p;p=le;try{return H.apply(this,arguments)}finally{p=R}}}})(fC);dC.exports=fC;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pC=rn.exports,Nr=dC.exports;function ft(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hC=new Set,ju={};function dl(t,e){gc(t,e),gc(t+"Capture",e)}function gc(t,e){for(ju[t]=e,t=0;t<e.length;t++)hC.add(e[t])}var fa=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Tg=Object.prototype.hasOwnProperty,XA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wb={},$b={};function ZA(t){return Tg.call($b,t)?!0:Tg.call(Wb,t)?!1:XA.test(t)?$b[t]=!0:(Wb[t]=!0,!1)}function eM(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tM(t,e,n,i){if(e===null||typeof e=="undefined"||eM(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nr(t,e,n,i,r,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var xi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xi[t]=new nr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xi[e]=new nr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xi[t]=new nr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xi[t]=new nr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xi[t]=new nr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xi[t]=new nr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xi[t]=new nr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xi[t]=new nr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xi[t]=new nr(t,5,!1,t.toLowerCase(),null,!1,!1)});var jT=/[\-:]([a-z])/g;function qT(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jT,qT);xi[e]=new nr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jT,qT);xi[e]=new nr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jT,qT);xi[e]=new nr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xi[t]=new nr(t,1,!1,t.toLowerCase(),null,!1,!1)});xi.xlinkHref=new nr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xi[t]=new nr(t,1,!1,t.toLowerCase(),null,!0,!0)});function GT(t,e,n,i){var r=xi.hasOwnProperty(e)?xi[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tM(e,n,r,i)&&(n=null),i||r===null?ZA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var ga=pC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,af=Symbol.for("react.element"),Wl=Symbol.for("react.portal"),$l=Symbol.for("react.fragment"),KT=Symbol.for("react.strict_mode"),_g=Symbol.for("react.profiler"),mC=Symbol.for("react.provider"),yC=Symbol.for("react.context"),HT=Symbol.for("react.forward_ref"),vg=Symbol.for("react.suspense"),bg=Symbol.for("react.suspense_list"),YT=Symbol.for("react.memo"),Na=Symbol.for("react.lazy"),gC=Symbol.for("react.offscreen"),jb=Symbol.iterator;function Jc(t){return t===null||typeof t!="object"?null:(t=jb&&t[jb]||t["@@iterator"],typeof t=="function"?t:null)}var Kn=Object.assign,ey;function hu(t){if(ey===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ey=e&&e[1]||""}return`
`+ey+t}var ty=!1;function ny(t,e){if(!t||ty)return"";ty=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),a=i.stack.split(`
`),s=r.length-1,l=a.length-1;1<=s&&0<=l&&r[s]!==a[l];)l--;for(;1<=s&&0<=l;s--,l--)if(r[s]!==a[l]){if(s!==1||l!==1)do if(s--,l--,0>l||r[s]!==a[l]){var o=`
`+r[s].replace(" at new "," at ");return t.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",t.displayName)),o}while(1<=s&&0<=l);break}}}finally{ty=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?hu(t):""}function nM(t){switch(t.tag){case 5:return hu(t.type);case 16:return hu("Lazy");case 13:return hu("Suspense");case 19:return hu("SuspenseList");case 0:case 2:case 15:return t=ny(t.type,!1),t;case 11:return t=ny(t.type.render,!1),t;case 1:return t=ny(t.type,!0),t;default:return""}}function Sg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $l:return"Fragment";case Wl:return"Portal";case _g:return"Profiler";case KT:return"StrictMode";case vg:return"Suspense";case bg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yC:return(t.displayName||"Context")+".Consumer";case mC:return(t._context.displayName||"Context")+".Provider";case HT:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case YT:return e=t.displayName||null,e!==null?e:Sg(t.type)||"Memo";case Na:e=t._payload,t=t._init;try{return Sg(t(e))}catch{}}return null}function iM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sg(e);case 8:return e===KT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function so(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function TC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rM(t){var e=TC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){i=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(s){i=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function of(t){t._valueTracker||(t._valueTracker=rM(t))}function _C(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=TC(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function sp(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ig(t,e){var n=e.checked;return Kn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function qb(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=so(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vC(t,e){e=e.checked,e!=null&&GT(t,"checked",e,!1)}function Cg(t,e){vC(t,e);var n=so(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wg(t,e.type,n):e.hasOwnProperty("defaultValue")&&wg(t,e.type,so(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wg(t,e,n){(e!=="number"||sp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var mu=Array.isArray;function nc(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+so(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Eg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ft(91));return Kn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ft(92));if(mu(n)){if(1<n.length)throw Error(ft(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:so(n)}}function bC(t,e){var n=so(e.value),i=so(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Hb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function SC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?SC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lf,IC=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lf=lf||document.createElement("div"),lf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sM=["Webkit","ms","Moz","O"];Object.keys(Fu).forEach(function(t){sM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fu[e]=Fu[t]})});function CC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fu.hasOwnProperty(t)&&Fu[t]?(""+e).trim():e+"px"}function wC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=CC(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var aM=Kn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kg(t,e){if(e){if(aM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ft(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ft(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ft(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ft(62))}}function Dg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pg=null;function QT(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ag=null,ic=null,rc=null;function Yb(t){if(t=Fd(t)){if(typeof Ag!="function")throw Error(ft(280));var e=t.stateNode;e&&(e=ch(e),Ag(t.stateNode,t.type,e))}}function EC(t){ic?rc?rc.push(t):rc=[t]:ic=t}function FC(){if(ic){var t=ic,e=rc;if(rc=ic=null,Yb(t),e)for(t=0;t<e.length;t++)Yb(e[t])}}function kC(t,e){return t(e)}function DC(){}var iy=!1;function PC(t,e,n){if(iy)return t(e,n);iy=!0;try{return kC(t,e,n)}finally{iy=!1,(ic!==null||rc!==null)&&(DC(),FC())}}function Gu(t,e){var n=t.stateNode;if(n===null)return null;var i=ch(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ft(231,e,typeof n));return n}var Mg=!1;if(fa)try{var Xc={};Object.defineProperty(Xc,"passive",{get:function(){Mg=!0}}),window.addEventListener("test",Xc,Xc),window.removeEventListener("test",Xc,Xc)}catch{Mg=!1}function oM(t,e,n,i,r,a,s,l,o){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var ku=!1,ap=null,op=!1,Ng=null,lM={onError:function(t){ku=!0,ap=t}};function cM(t,e,n,i,r,a,s,l,o){ku=!1,ap=null,oM.apply(lM,arguments)}function uM(t,e,n,i,r,a,s,l,o){if(cM.apply(this,arguments),ku){if(ku){var u=ap;ku=!1,ap=null}else throw Error(ft(198));op||(op=!0,Ng=u)}}function fl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function AC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qb(t){if(fl(t)!==t)throw Error(ft(188))}function dM(t){var e=t.alternate;if(!e){if(e=fl(t),e===null)throw Error(ft(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var a=r.alternate;if(a===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return Qb(r),t;if(a===i)return Qb(r),e;a=a.sibling}throw Error(ft(188))}if(n.return!==i.return)n=r,i=a;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=a;break}if(l===i){s=!0,i=r,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,i=r;break}if(l===i){s=!0,i=a,n=r;break}l=l.sibling}if(!s)throw Error(ft(189))}}if(n.alternate!==i)throw Error(ft(190))}if(n.tag!==3)throw Error(ft(188));return n.stateNode.current===n?t:e}function MC(t){return t=dM(t),t!==null?NC(t):null}function NC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=NC(t);if(e!==null)return e;t=t.sibling}return null}var RC=Nr.unstable_scheduleCallback,Jb=Nr.unstable_cancelCallback,fM=Nr.unstable_shouldYield,pM=Nr.unstable_requestPaint,si=Nr.unstable_now,hM=Nr.unstable_getCurrentPriorityLevel,JT=Nr.unstable_ImmediatePriority,OC=Nr.unstable_UserBlockingPriority,lp=Nr.unstable_NormalPriority,mM=Nr.unstable_LowPriority,xC=Nr.unstable_IdlePriority,sh=null,Us=null;function yM(t){if(Us&&typeof Us.onCommitFiberRoot=="function")try{Us.onCommitFiberRoot(sh,t,void 0,(t.current.flags&128)===128)}catch{}}var vs=Math.clz32?Math.clz32:_M,gM=Math.log,TM=Math.LN2;function _M(t){return t>>>=0,t===0?32:31-(gM(t)/TM|0)|0}var cf=64,uf=4194304;function yu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function cp(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,a=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~r;l!==0?i=yu(l):(a&=s,a!==0&&(i=yu(a)))}else s=n&~r,s!==0?i=yu(s):a!==0&&(i=yu(a));if(i===0)return 0;if(e!==0&&e!==i&&(e&r)===0&&(r=i&-i,a=e&-e,r>=a||r===16&&(a&4194240)!==0))return e;if((i&4)!==0&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-vs(e),r=1<<n,i|=t[n],e&=~r;return i}function vM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bM(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-vs(a),l=1<<s,o=r[s];o===-1?((l&n)===0||(l&i)!==0)&&(r[s]=vM(l,e)):o<=e&&(t.expiredLanes|=l),a&=~l}}function Rg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function LC(){var t=cf;return cf<<=1,(cf&4194240)===0&&(cf=64),t}function ry(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vs(e),t[e]=n}function SM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-vs(n),a=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~a}}function XT(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-vs(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Cn=0;function zC(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var UC,ZT,VC,BC,WC,Og=!1,df=[],ja=null,qa=null,Ga=null,Ku=new Map,Hu=new Map,xa=[],IM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xb(t,e){switch(t){case"focusin":case"focusout":ja=null;break;case"dragenter":case"dragleave":qa=null;break;case"mouseover":case"mouseout":Ga=null;break;case"pointerover":case"pointerout":Ku.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hu.delete(e.pointerId)}}function Zc(t,e,n,i,r,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},e!==null&&(e=Fd(e),e!==null&&ZT(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function CM(t,e,n,i,r){switch(e){case"focusin":return ja=Zc(ja,t,e,n,i,r),!0;case"dragenter":return qa=Zc(qa,t,e,n,i,r),!0;case"mouseover":return Ga=Zc(Ga,t,e,n,i,r),!0;case"pointerover":var a=r.pointerId;return Ku.set(a,Zc(Ku.get(a)||null,t,e,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,Hu.set(a,Zc(Hu.get(a)||null,t,e,n,i,r)),!0}return!1}function $C(t){var e=Vo(t.target);if(e!==null){var n=fl(e);if(n!==null){if(e=n.tag,e===13){if(e=AC(n),e!==null){t.blockedOn=e,WC(t.priority,function(){VC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Pg=i,n.target.dispatchEvent(i),Pg=null}else return e=Fd(n),e!==null&&ZT(e),t.blockedOn=n,!1;e.shift()}return!0}function Zb(t,e,n){qf(t)&&n.delete(e)}function wM(){Og=!1,ja!==null&&qf(ja)&&(ja=null),qa!==null&&qf(qa)&&(qa=null),Ga!==null&&qf(Ga)&&(Ga=null),Ku.forEach(Zb),Hu.forEach(Zb)}function eu(t,e){t.blockedOn===e&&(t.blockedOn=null,Og||(Og=!0,Nr.unstable_scheduleCallback(Nr.unstable_NormalPriority,wM)))}function Yu(t){function e(r){return eu(r,t)}if(0<df.length){eu(df[0],t);for(var n=1;n<df.length;n++){var i=df[n];i.blockedOn===t&&(i.blockedOn=null)}}for(ja!==null&&eu(ja,t),qa!==null&&eu(qa,t),Ga!==null&&eu(Ga,t),Ku.forEach(e),Hu.forEach(e),n=0;n<xa.length;n++)i=xa[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<xa.length&&(n=xa[0],n.blockedOn===null);)$C(n),n.blockedOn===null&&xa.shift()}var sc=ga.ReactCurrentBatchConfig,up=!0;function EM(t,e,n,i){var r=Cn,a=sc.transition;sc.transition=null;try{Cn=1,e_(t,e,n,i)}finally{Cn=r,sc.transition=a}}function FM(t,e,n,i){var r=Cn,a=sc.transition;sc.transition=null;try{Cn=4,e_(t,e,n,i)}finally{Cn=r,sc.transition=a}}function e_(t,e,n,i){if(up){var r=xg(t,e,n,i);if(r===null)hy(t,e,i,dp,n),Xb(t,i);else if(CM(r,t,e,n,i))i.stopPropagation();else if(Xb(t,i),e&4&&-1<IM.indexOf(t)){for(;r!==null;){var a=Fd(r);if(a!==null&&UC(a),a=xg(t,e,n,i),a===null&&hy(t,e,i,dp,n),a===r)break;r=a}r!==null&&i.stopPropagation()}else hy(t,e,i,null,n)}}var dp=null;function xg(t,e,n,i){if(dp=null,t=QT(i),t=Vo(t),t!==null)if(e=fl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=AC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return dp=t,null}function jC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hM()){case JT:return 1;case OC:return 4;case lp:case mM:return 16;case xC:return 536870912;default:return 16}default:return 16}}var Ba=null,t_=null,Gf=null;function qC(){if(Gf)return Gf;var t,e=t_,n=e.length,i,r="value"in Ba?Ba.value:Ba.textContent,a=r.length;for(t=0;t<n&&e[t]===r[t];t++);var s=n-t;for(i=1;i<=s&&e[n-i]===r[a-i];i++);return Gf=r.slice(t,1<i?1-i:void 0)}function Kf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ff(){return!0}function e1(){return!1}function Or(t){function e(n,i,r,a,s){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ff:e1,this.isPropagationStopped=e1,this}return Kn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ff)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ff)},persist:function(){},isPersistent:ff}),e}var Uc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},n_=Or(Uc),Ed=Kn({},Uc,{view:0,detail:0}),kM=Or(Ed),sy,ay,tu,ah=Kn({},Ed,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:i_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==tu&&(tu&&t.type==="mousemove"?(sy=t.screenX-tu.screenX,ay=t.screenY-tu.screenY):ay=sy=0,tu=t),sy)},movementY:function(t){return"movementY"in t?t.movementY:ay}}),t1=Or(ah),DM=Kn({},ah,{dataTransfer:0}),PM=Or(DM),AM=Kn({},Ed,{relatedTarget:0}),oy=Or(AM),MM=Kn({},Uc,{animationName:0,elapsedTime:0,pseudoElement:0}),NM=Or(MM),RM=Kn({},Uc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),OM=Or(RM),xM=Kn({},Uc,{data:0}),n1=Or(xM),LM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=UM[t])?!!e[t]:!1}function i_(){return VM}var BM=Kn({},Ed,{key:function(t){if(t.key){var e=LM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Kf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:i_,charCode:function(t){return t.type==="keypress"?Kf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),WM=Or(BM),$M=Kn({},ah,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i1=Or($M),jM=Kn({},Ed,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:i_}),qM=Or(jM),GM=Kn({},Uc,{propertyName:0,elapsedTime:0,pseudoElement:0}),KM=Or(GM),HM=Kn({},ah,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YM=Or(HM),QM=[9,13,27,32],r_=fa&&"CompositionEvent"in window,Du=null;fa&&"documentMode"in document&&(Du=document.documentMode);var JM=fa&&"TextEvent"in window&&!Du,GC=fa&&(!r_||Du&&8<Du&&11>=Du),r1=String.fromCharCode(32),s1=!1;function KC(t,e){switch(t){case"keyup":return QM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jl=!1;function XM(t,e){switch(t){case"compositionend":return HC(e);case"keypress":return e.which!==32?null:(s1=!0,r1);case"textInput":return t=e.data,t===r1&&s1?null:t;default:return null}}function ZM(t,e){if(jl)return t==="compositionend"||!r_&&KC(t,e)?(t=qC(),Gf=t_=Ba=null,jl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return GC&&e.locale!=="ko"?null:e.data;default:return null}}var eN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eN[t.type]:e==="textarea"}function YC(t,e,n,i){EC(i),e=fp(e,"onChange"),0<e.length&&(n=new n_("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Pu=null,Qu=null;function tN(t){aw(t,0)}function oh(t){var e=Kl(t);if(_C(e))return t}function nN(t,e){if(t==="change")return e}var QC=!1;if(fa){var ly;if(fa){var cy="oninput"in document;if(!cy){var o1=document.createElement("div");o1.setAttribute("oninput","return;"),cy=typeof o1.oninput=="function"}ly=cy}else ly=!1;QC=ly&&(!document.documentMode||9<document.documentMode)}function l1(){Pu&&(Pu.detachEvent("onpropertychange",JC),Qu=Pu=null)}function JC(t){if(t.propertyName==="value"&&oh(Qu)){var e=[];YC(e,Qu,t,QT(t)),PC(tN,e)}}function iN(t,e,n){t==="focusin"?(l1(),Pu=e,Qu=n,Pu.attachEvent("onpropertychange",JC)):t==="focusout"&&l1()}function rN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return oh(Qu)}function sN(t,e){if(t==="click")return oh(e)}function aN(t,e){if(t==="input"||t==="change")return oh(e)}function oN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ss=typeof Object.is=="function"?Object.is:oN;function Ju(t,e){if(Ss(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Tg.call(e,r)||!Ss(t[r],e[r]))return!1}return!0}function c1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function u1(t,e){var n=c1(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=c1(n)}}function XC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?XC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZC(){for(var t=window,e=sp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sp(t.document)}return e}function s_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lN(t){var e=ZC(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&XC(n.ownerDocument.documentElement,n)){if(i!==null&&s_(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,a=Math.min(i.start,r);i=i.end===void 0?a:Math.min(i.end,r),!t.extend&&a>i&&(r=i,i=a,a=r),r=u1(n,a);var s=u1(n,i);r&&s&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),a>i?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cN=fa&&"documentMode"in document&&11>=document.documentMode,ql=null,Lg=null,Au=null,zg=!1;function d1(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zg||ql==null||ql!==sp(i)||(i=ql,"selectionStart"in i&&s_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Au&&Ju(Au,i)||(Au=i,i=fp(Lg,"onSelect"),0<i.length&&(e=new n_("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ql)))}function pf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Gl={animationend:pf("Animation","AnimationEnd"),animationiteration:pf("Animation","AnimationIteration"),animationstart:pf("Animation","AnimationStart"),transitionend:pf("Transition","TransitionEnd")},uy={},ew={};fa&&(ew=document.createElement("div").style,"AnimationEvent"in window||(delete Gl.animationend.animation,delete Gl.animationiteration.animation,delete Gl.animationstart.animation),"TransitionEvent"in window||delete Gl.transitionend.transition);function lh(t){if(uy[t])return uy[t];if(!Gl[t])return t;var e=Gl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ew)return uy[t]=e[n];return t}var tw=lh("animationend"),nw=lh("animationiteration"),iw=lh("animationstart"),rw=lh("transitionend"),sw=new Map,f1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ho(t,e){sw.set(t,e),dl(e,[t])}for(var dy=0;dy<f1.length;dy++){var fy=f1[dy],uN=fy.toLowerCase(),dN=fy[0].toUpperCase()+fy.slice(1);ho(uN,"on"+dN)}ho(tw,"onAnimationEnd");ho(nw,"onAnimationIteration");ho(iw,"onAnimationStart");ho("dblclick","onDoubleClick");ho("focusin","onFocus");ho("focusout","onBlur");ho(rw,"onTransitionEnd");gc("onMouseEnter",["mouseout","mouseover"]);gc("onMouseLeave",["mouseout","mouseover"]);gc("onPointerEnter",["pointerout","pointerover"]);gc("onPointerLeave",["pointerout","pointerover"]);dl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dl("onBeforeInput",["compositionend","keypress","textInput","paste"]);dl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fN=new Set("cancel close invalid load scroll toggle".split(" ").concat(gu));function p1(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,uM(i,e,void 0,t),t.currentTarget=null}function aw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var a=void 0;if(e)for(var s=i.length-1;0<=s;s--){var l=i[s],o=l.instance,u=l.currentTarget;if(l=l.listener,o!==a&&r.isPropagationStopped())break e;p1(r,l,u),a=o}else for(s=0;s<i.length;s++){if(l=i[s],o=l.instance,u=l.currentTarget,l=l.listener,o!==a&&r.isPropagationStopped())break e;p1(r,l,u),a=o}}}if(op)throw t=Ng,op=!1,Ng=null,t}function On(t,e){var n=e[$g];n===void 0&&(n=e[$g]=new Set);var i=t+"__bubble";n.has(i)||(ow(e,t,2,!1),n.add(i))}function py(t,e,n){var i=0;e&&(i|=4),ow(n,t,i,e)}var hf="_reactListening"+Math.random().toString(36).slice(2);function Xu(t){if(!t[hf]){t[hf]=!0,hC.forEach(function(n){n!=="selectionchange"&&(fN.has(n)||py(n,!1,t),py(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hf]||(e[hf]=!0,py("selectionchange",!1,e))}}function ow(t,e,n,i){switch(jC(e)){case 1:var r=EM;break;case 4:r=FM;break;default:r=e_}n=r.bind(null,e,n,t),r=void 0,!Mg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function hy(t,e,n,i,r){var a=i;if((e&1)===0&&(e&2)===0&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(s===4)for(s=i.return;s!==null;){var o=s.tag;if((o===3||o===4)&&(o=s.stateNode.containerInfo,o===r||o.nodeType===8&&o.parentNode===r))return;s=s.return}for(;l!==null;){if(s=Vo(l),s===null)return;if(o=s.tag,o===5||o===6){i=a=s;continue e}l=l.parentNode}}i=i.return}PC(function(){var u=a,f=QT(n),y=[];e:{var p=sw.get(t);if(p!==void 0){var b=n_,v=t;switch(t){case"keypress":if(Kf(n)===0)break e;case"keydown":case"keyup":b=WM;break;case"focusin":v="focus",b=oy;break;case"focusout":v="blur",b=oy;break;case"beforeblur":case"afterblur":b=oy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=t1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=PM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=qM;break;case tw:case nw:case iw:b=NM;break;case rw:b=KM;break;case"scroll":b=kM;break;case"wheel":b=YM;break;case"copy":case"cut":case"paste":b=OM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=i1}var m=(e&4)!==0,V=!m&&t==="scroll",F=m?p!==null?p+"Capture":null:p;m=[];for(var P=u,G;P!==null;){G=P;var te=G.stateNode;if(G.tag===5&&te!==null&&(G=te,F!==null&&(te=Gu(P,F),te!=null&&m.push(Zu(P,te,G)))),V)break;P=P.return}0<m.length&&(p=new b(p,v,null,n,f),y.push({event:p,listeners:m}))}}if((e&7)===0){e:{if(p=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",p&&n!==Pg&&(v=n.relatedTarget||n.fromElement)&&(Vo(v)||v[pa]))break e;if((b||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,b?(v=n.relatedTarget||n.toElement,b=u,v=v?Vo(v):null,v!==null&&(V=fl(v),v!==V||v.tag!==5&&v.tag!==6)&&(v=null)):(b=null,v=u),b!==v)){if(m=t1,te="onMouseLeave",F="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(m=i1,te="onPointerLeave",F="onPointerEnter",P="pointer"),V=b==null?p:Kl(b),G=v==null?p:Kl(v),p=new m(te,P+"leave",b,n,f),p.target=V,p.relatedTarget=G,te=null,Vo(f)===u&&(m=new m(F,P+"enter",v,n,f),m.target=G,m.relatedTarget=V,te=m),V=te,b&&v)t:{for(m=b,F=v,P=0,G=m;G;G=wl(G))P++;for(G=0,te=F;te;te=wl(te))G++;for(;0<P-G;)m=wl(m),P--;for(;0<G-P;)F=wl(F),G--;for(;P--;){if(m===F||F!==null&&m===F.alternate)break t;m=wl(m),F=wl(F)}m=null}else m=null;b!==null&&h1(y,p,b,m,!1),v!==null&&V!==null&&h1(y,V,v,m,!0)}}e:{if(p=u?Kl(u):window,b=p.nodeName&&p.nodeName.toLowerCase(),b==="select"||b==="input"&&p.type==="file")var q=nN;else if(a1(p))if(QC)q=aN;else{q=rN;var U=iN}else(b=p.nodeName)&&b.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(q=sN);if(q&&(q=q(t,u))){YC(y,q,n,f);break e}U&&U(t,p,u),t==="focusout"&&(U=p._wrapperState)&&U.controlled&&p.type==="number"&&wg(p,"number",p.value)}switch(U=u?Kl(u):window,t){case"focusin":(a1(U)||U.contentEditable==="true")&&(ql=U,Lg=u,Au=null);break;case"focusout":Au=Lg=ql=null;break;case"mousedown":zg=!0;break;case"contextmenu":case"mouseup":case"dragend":zg=!1,d1(y,n,f);break;case"selectionchange":if(cN)break;case"keydown":case"keyup":d1(y,n,f)}var D;if(r_)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else jl?KC(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(GC&&n.locale!=="ko"&&(jl||M!=="onCompositionStart"?M==="onCompositionEnd"&&jl&&(D=qC()):(Ba=f,t_="value"in Ba?Ba.value:Ba.textContent,jl=!0)),U=fp(u,M),0<U.length&&(M=new n1(M,t,null,n,f),y.push({event:M,listeners:U}),D?M.data=D:(D=HC(n),D!==null&&(M.data=D)))),(D=JM?XM(t,n):ZM(t,n))&&(u=fp(u,"onBeforeInput"),0<u.length&&(f=new n1("onBeforeInput","beforeinput",null,n,f),y.push({event:f,listeners:u}),f.data=D))}aw(y,e)})}function Zu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function fp(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,a=r.stateNode;r.tag===5&&a!==null&&(r=a,a=Gu(t,n),a!=null&&i.unshift(Zu(t,a,r)),a=Gu(t,e),a!=null&&i.push(Zu(t,a,r))),t=t.return}return i}function wl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function h1(t,e,n,i,r){for(var a=e._reactName,s=[];n!==null&&n!==i;){var l=n,o=l.alternate,u=l.stateNode;if(o!==null&&o===i)break;l.tag===5&&u!==null&&(l=u,r?(o=Gu(n,a),o!=null&&s.unshift(Zu(n,o,l))):r||(o=Gu(n,a),o!=null&&s.push(Zu(n,o,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var pN=/\r\n?/g,hN=/\u0000|\uFFFD/g;function m1(t){return(typeof t=="string"?t:""+t).replace(pN,`
`).replace(hN,"")}function mf(t,e,n){if(e=m1(e),m1(t)!==e&&n)throw Error(ft(425))}function pp(){}var Ug=null,Vg=null;function Bg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wg=typeof setTimeout=="function"?setTimeout:void 0,mN=typeof clearTimeout=="function"?clearTimeout:void 0,y1=typeof Promise=="function"?Promise:void 0,yN=typeof queueMicrotask=="function"?queueMicrotask:typeof y1!="undefined"?function(t){return y1.resolve(null).then(t).catch(gN)}:Wg;function gN(t){setTimeout(function(){throw t})}function my(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Yu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Yu(e)}function Ka(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function g1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Vc=Math.random().toString(36).slice(2),Ls="__reactFiber$"+Vc,ed="__reactProps$"+Vc,pa="__reactContainer$"+Vc,$g="__reactEvents$"+Vc,TN="__reactListeners$"+Vc,_N="__reactHandles$"+Vc;function Vo(t){var e=t[Ls];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pa]||n[Ls]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=g1(t);t!==null;){if(n=t[Ls])return n;t=g1(t)}return e}t=n,n=t.parentNode}return null}function Fd(t){return t=t[Ls]||t[pa],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Kl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ft(33))}function ch(t){return t[ed]||null}var jg=[],Hl=-1;function mo(t){return{current:t}}function xn(t){0>Hl||(t.current=jg[Hl],jg[Hl]=null,Hl--)}function Nn(t,e){Hl++,jg[Hl]=t.current,t.current=e}var ao={},Gi=mo(ao),yr=mo(!1),Jo=ao;function Tc(t,e){var n=t.type.contextTypes;if(!n)return ao;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},a;for(a in n)r[a]=e[a];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function gr(t){return t=t.childContextTypes,t!=null}function hp(){xn(yr),xn(Gi)}function T1(t,e,n){if(Gi.current!==ao)throw Error(ft(168));Nn(Gi,e),Nn(yr,n)}function lw(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ft(108,iM(t)||"Unknown",r));return Kn({},n,i)}function mp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ao,Jo=Gi.current,Nn(Gi,t),Nn(yr,yr.current),!0}function _1(t,e,n){var i=t.stateNode;if(!i)throw Error(ft(169));n?(t=lw(t,e,Jo),i.__reactInternalMemoizedMergedChildContext=t,xn(yr),xn(Gi),Nn(Gi,t)):xn(yr),Nn(yr,n)}var Xs=null,uh=!1,yy=!1;function cw(t){Xs===null?Xs=[t]:Xs.push(t)}function vN(t){uh=!0,cw(t)}function yo(){if(!yy&&Xs!==null){yy=!0;var t=0,e=Cn;try{var n=Xs;for(Cn=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Xs=null,uh=!1}catch(r){throw Xs!==null&&(Xs=Xs.slice(t+1)),RC(JT,yo),r}finally{Cn=e,yy=!1}}return null}var Yl=[],Ql=0,yp=null,gp=0,Yr=[],Qr=0,Xo=null,ta=1,na="";function No(t,e){Yl[Ql++]=gp,Yl[Ql++]=yp,yp=t,gp=e}function uw(t,e,n){Yr[Qr++]=ta,Yr[Qr++]=na,Yr[Qr++]=Xo,Xo=t;var i=ta;t=na;var r=32-vs(i)-1;i&=~(1<<r),n+=1;var a=32-vs(e)+r;if(30<a){var s=r-r%5;a=(i&(1<<s)-1).toString(32),i>>=s,r-=s,ta=1<<32-vs(e)+r|n<<r|i,na=a+t}else ta=1<<a|n<<r|i,na=t}function a_(t){t.return!==null&&(No(t,1),uw(t,1,0))}function o_(t){for(;t===yp;)yp=Yl[--Ql],Yl[Ql]=null,gp=Yl[--Ql],Yl[Ql]=null;for(;t===Xo;)Xo=Yr[--Qr],Yr[Qr]=null,na=Yr[--Qr],Yr[Qr]=null,ta=Yr[--Qr],Yr[Qr]=null}var Mr=null,Pr=null,Wn=!1,gs=null;function dw(t,e){var n=Zr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function v1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mr=t,Pr=Ka(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mr=t,Pr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xo!==null?{id:ta,overflow:na}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Zr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mr=t,Pr=null,!0):!1;default:return!1}}function qg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gg(t){if(Wn){var e=Pr;if(e){var n=e;if(!v1(t,e)){if(qg(t))throw Error(ft(418));e=Ka(n.nextSibling);var i=Mr;e&&v1(t,e)?dw(i,n):(t.flags=t.flags&-4097|2,Wn=!1,Mr=t)}}else{if(qg(t))throw Error(ft(418));t.flags=t.flags&-4097|2,Wn=!1,Mr=t}}}function b1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mr=t}function yf(t){if(t!==Mr)return!1;if(!Wn)return b1(t),Wn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bg(t.type,t.memoizedProps)),e&&(e=Pr)){if(qg(t))throw fw(),Error(ft(418));for(;e;)dw(t,e),e=Ka(e.nextSibling)}if(b1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ft(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pr=Ka(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pr=null}}else Pr=Mr?Ka(t.stateNode.nextSibling):null;return!0}function fw(){for(var t=Pr;t;)t=Ka(t.nextSibling)}function _c(){Pr=Mr=null,Wn=!1}function l_(t){gs===null?gs=[t]:gs.push(t)}var bN=ga.ReactCurrentBatchConfig;function hs(t,e){if(t&&t.defaultProps){e=Kn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Tp=mo(null),_p=null,Jl=null,c_=null;function u_(){c_=Jl=_p=null}function d_(t){var e=Tp.current;xn(Tp),t._currentValue=e}function Kg(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ac(t,e){_p=t,c_=Jl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(hr=!0),t.firstContext=null)}function ts(t){var e=t._currentValue;if(c_!==t)if(t={context:t,memoizedValue:e,next:null},Jl===null){if(_p===null)throw Error(ft(308));Jl=t,_p.dependencies={lanes:0,firstContext:t}}else Jl=Jl.next=t;return e}var Bo=null;function f_(t){Bo===null?Bo=[t]:Bo.push(t)}function pw(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,f_(e)):(n.next=r.next,r.next=n),e.interleaved=n,ha(t,i)}function ha(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ra=!1;function p_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ha(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,(Tn&2)!==0){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ha(t,n)}return r=i.interleaved,r===null?(e.next=e,f_(i)):(e.next=r.next,r.next=e),i.interleaved=e,ha(t,n)}function Hf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,XT(t,n)}}function S1(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?r=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?r=a=e:a=a.next=e}else r=a=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vp(t,e,n,i){var r=t.updateQueue;Ra=!1;var a=r.firstBaseUpdate,s=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var o=l,u=o.next;o.next=null,s===null?a=u:s.next=u,s=o;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=o))}if(a!==null){var y=r.baseState;s=0,f=u=o=null,l=a;do{var p=l.lane,b=l.eventTime;if((i&p)===p){f!==null&&(f=f.next={eventTime:b,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,m=l;switch(p=e,b=n,m.tag){case 1:if(v=m.payload,typeof v=="function"){y=v.call(b,y,p);break e}y=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=m.payload,p=typeof v=="function"?v.call(b,y,p):v,p==null)break e;y=Kn({},y,p);break e;case 2:Ra=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=r.effects,p===null?r.effects=[l]:p.push(l))}else b={eventTime:b,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=b,o=y):f=f.next=b,s|=p;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;p=l,l=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(1);if(f===null&&(o=y),r.baseState=o,r.firstBaseUpdate=u,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do s|=r.lane,r=r.next;while(r!==e)}else a===null&&(r.shared.lanes=0);el|=s,t.lanes=s,t.memoizedState=y}}function I1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ft(191,r));r.call(i)}}}var mw=new pC.Component().refs;function Hg(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Kn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var dh={isMounted:function(t){return(t=t._reactInternals)?fl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=er(),r=Qa(t),a=sa(i,r);a.payload=e,n!=null&&(a.callback=n),e=Ha(t,a,r),e!==null&&(bs(e,t,r,i),Hf(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=er(),r=Qa(t),a=sa(i,r);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Ha(t,a,r),e!==null&&(bs(e,t,r,i),Hf(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=er(),i=Qa(t),r=sa(n,i);r.tag=2,e!=null&&(r.callback=e),e=Ha(t,r,i),e!==null&&(bs(e,t,i,n),Hf(e,t,i))}};function C1(t,e,n,i,r,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,a,s):e.prototype&&e.prototype.isPureReactComponent?!Ju(n,i)||!Ju(r,a):!0}function yw(t,e,n){var i=!1,r=ao,a=e.contextType;return typeof a=="object"&&a!==null?a=ts(a):(r=gr(e)?Jo:Gi.current,i=e.contextTypes,a=(i=i!=null)?Tc(t,r):ao),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=a),e}function w1(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&dh.enqueueReplaceState(e,e.state,null)}function Yg(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=mw,p_(t);var a=e.contextType;typeof a=="object"&&a!==null?r.context=ts(a):(a=gr(e)?Jo:Gi.current,r.context=Tc(t,a)),r.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Hg(t,e,a,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&dh.enqueueReplaceState(r,r.state,null),vp(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function nu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ft(309));var i=n.stateNode}if(!i)throw Error(ft(147,t));var r=i,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var l=r.refs;l===mw&&(l=r.refs={}),s===null?delete l[a]:l[a]=s},e._stringRef=a,e)}if(typeof t!="string")throw Error(ft(284));if(!n._owner)throw Error(ft(290,t))}return t}function gf(t,e){throw t=Object.prototype.toString.call(e),Error(ft(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function E1(t){var e=t._init;return e(t._payload)}function gw(t){function e(F,P){if(t){var G=F.deletions;G===null?(F.deletions=[P],F.flags|=16):G.push(P)}}function n(F,P){if(!t)return null;for(;P!==null;)e(F,P),P=P.sibling;return null}function i(F,P){for(F=new Map;P!==null;)P.key!==null?F.set(P.key,P):F.set(P.index,P),P=P.sibling;return F}function r(F,P){return F=Ja(F,P),F.index=0,F.sibling=null,F}function a(F,P,G){return F.index=G,t?(G=F.alternate,G!==null?(G=G.index,G<P?(F.flags|=2,P):G):(F.flags|=2,P)):(F.flags|=1048576,P)}function s(F){return t&&F.alternate===null&&(F.flags|=2),F}function l(F,P,G,te){return P===null||P.tag!==6?(P=Iy(G,F.mode,te),P.return=F,P):(P=r(P,G),P.return=F,P)}function o(F,P,G,te){var q=G.type;return q===$l?f(F,P,G.props.children,te,G.key):P!==null&&(P.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Na&&E1(q)===P.type)?(te=r(P,G.props),te.ref=nu(F,P,G),te.return=F,te):(te=ep(G.type,G.key,G.props,null,F.mode,te),te.ref=nu(F,P,G),te.return=F,te)}function u(F,P,G,te){return P===null||P.tag!==4||P.stateNode.containerInfo!==G.containerInfo||P.stateNode.implementation!==G.implementation?(P=Cy(G,F.mode,te),P.return=F,P):(P=r(P,G.children||[]),P.return=F,P)}function f(F,P,G,te,q){return P===null||P.tag!==7?(P=Go(G,F.mode,te,q),P.return=F,P):(P=r(P,G),P.return=F,P)}function y(F,P,G){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Iy(""+P,F.mode,G),P.return=F,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case af:return G=ep(P.type,P.key,P.props,null,F.mode,G),G.ref=nu(F,null,P),G.return=F,G;case Wl:return P=Cy(P,F.mode,G),P.return=F,P;case Na:var te=P._init;return y(F,te(P._payload),G)}if(mu(P)||Jc(P))return P=Go(P,F.mode,G,null),P.return=F,P;gf(F,P)}return null}function p(F,P,G,te){var q=P!==null?P.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return q!==null?null:l(F,P,""+G,te);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case af:return G.key===q?o(F,P,G,te):null;case Wl:return G.key===q?u(F,P,G,te):null;case Na:return q=G._init,p(F,P,q(G._payload),te)}if(mu(G)||Jc(G))return q!==null?null:f(F,P,G,te,null);gf(F,G)}return null}function b(F,P,G,te,q){if(typeof te=="string"&&te!==""||typeof te=="number")return F=F.get(G)||null,l(P,F,""+te,q);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case af:return F=F.get(te.key===null?G:te.key)||null,o(P,F,te,q);case Wl:return F=F.get(te.key===null?G:te.key)||null,u(P,F,te,q);case Na:var U=te._init;return b(F,P,G,U(te._payload),q)}if(mu(te)||Jc(te))return F=F.get(G)||null,f(P,F,te,q,null);gf(P,te)}return null}function v(F,P,G,te){for(var q=null,U=null,D=P,M=P=0,T=null;D!==null&&M<G.length;M++){D.index>M?(T=D,D=null):T=D.sibling;var N=p(F,D,G[M],te);if(N===null){D===null&&(D=T);break}t&&D&&N.alternate===null&&e(F,D),P=a(N,P,M),U===null?q=N:U.sibling=N,U=N,D=T}if(M===G.length)return n(F,D),Wn&&No(F,M),q;if(D===null){for(;M<G.length;M++)D=y(F,G[M],te),D!==null&&(P=a(D,P,M),U===null?q=D:U.sibling=D,U=D);return Wn&&No(F,M),q}for(D=i(F,D);M<G.length;M++)T=b(D,F,M,G[M],te),T!==null&&(t&&T.alternate!==null&&D.delete(T.key===null?M:T.key),P=a(T,P,M),U===null?q=T:U.sibling=T,U=T);return t&&D.forEach(function(J){return e(F,J)}),Wn&&No(F,M),q}function m(F,P,G,te){var q=Jc(G);if(typeof q!="function")throw Error(ft(150));if(G=q.call(G),G==null)throw Error(ft(151));for(var U=q=null,D=P,M=P=0,T=null,N=G.next();D!==null&&!N.done;M++,N=G.next()){D.index>M?(T=D,D=null):T=D.sibling;var J=p(F,D,N.value,te);if(J===null){D===null&&(D=T);break}t&&D&&J.alternate===null&&e(F,D),P=a(J,P,M),U===null?q=J:U.sibling=J,U=J,D=T}if(N.done)return n(F,D),Wn&&No(F,M),q;if(D===null){for(;!N.done;M++,N=G.next())N=y(F,N.value,te),N!==null&&(P=a(N,P,M),U===null?q=N:U.sibling=N,U=N);return Wn&&No(F,M),q}for(D=i(F,D);!N.done;M++,N=G.next())N=b(D,F,M,N.value,te),N!==null&&(t&&N.alternate!==null&&D.delete(N.key===null?M:N.key),P=a(N,P,M),U===null?q=N:U.sibling=N,U=N);return t&&D.forEach(function(L){return e(F,L)}),Wn&&No(F,M),q}function V(F,P,G,te){if(typeof G=="object"&&G!==null&&G.type===$l&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case af:e:{for(var q=G.key,U=P;U!==null;){if(U.key===q){if(q=G.type,q===$l){if(U.tag===7){n(F,U.sibling),P=r(U,G.props.children),P.return=F,F=P;break e}}else if(U.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Na&&E1(q)===U.type){n(F,U.sibling),P=r(U,G.props),P.ref=nu(F,U,G),P.return=F,F=P;break e}n(F,U);break}else e(F,U);U=U.sibling}G.type===$l?(P=Go(G.props.children,F.mode,te,G.key),P.return=F,F=P):(te=ep(G.type,G.key,G.props,null,F.mode,te),te.ref=nu(F,P,G),te.return=F,F=te)}return s(F);case Wl:e:{for(U=G.key;P!==null;){if(P.key===U)if(P.tag===4&&P.stateNode.containerInfo===G.containerInfo&&P.stateNode.implementation===G.implementation){n(F,P.sibling),P=r(P,G.children||[]),P.return=F,F=P;break e}else{n(F,P);break}else e(F,P);P=P.sibling}P=Cy(G,F.mode,te),P.return=F,F=P}return s(F);case Na:return U=G._init,V(F,P,U(G._payload),te)}if(mu(G))return v(F,P,G,te);if(Jc(G))return m(F,P,G,te);gf(F,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,P!==null&&P.tag===6?(n(F,P.sibling),P=r(P,G),P.return=F,F=P):(n(F,P),P=Iy(G,F.mode,te),P.return=F,F=P),s(F)):n(F,P)}return V}var vc=gw(!0),Tw=gw(!1),kd={},Vs=mo(kd),td=mo(kd),nd=mo(kd);function Wo(t){if(t===kd)throw Error(ft(174));return t}function h_(t,e){switch(Nn(nd,e),Nn(td,t),Nn(Vs,kd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fg(e,t)}xn(Vs),Nn(Vs,e)}function bc(){xn(Vs),xn(td),xn(nd)}function _w(t){Wo(nd.current);var e=Wo(Vs.current),n=Fg(e,t.type);e!==n&&(Nn(td,t),Nn(Vs,n))}function m_(t){td.current===t&&(xn(Vs),xn(td))}var qn=mo(0);function bp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gy=[];function y_(){for(var t=0;t<gy.length;t++)gy[t]._workInProgressVersionPrimary=null;gy.length=0}var Yf=ga.ReactCurrentDispatcher,Ty=ga.ReactCurrentBatchConfig,Zo=0,Gn=null,hi=null,vi=null,Sp=!1,Mu=!1,id=0,SN=0;function zi(){throw Error(ft(321))}function g_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ss(t[n],e[n]))return!1;return!0}function T_(t,e,n,i,r,a){if(Zo=a,Gn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yf.current=t===null||t.memoizedState===null?EN:FN,t=n(i,r),Mu){a=0;do{if(Mu=!1,id=0,25<=a)throw Error(ft(301));a+=1,vi=hi=null,e.updateQueue=null,Yf.current=kN,t=n(i,r)}while(Mu)}if(Yf.current=Ip,e=hi!==null&&hi.next!==null,Zo=0,vi=hi=Gn=null,Sp=!1,e)throw Error(ft(300));return t}function __(){var t=id!==0;return id=0,t}function Ns(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vi===null?Gn.memoizedState=vi=t:vi=vi.next=t,vi}function ns(){if(hi===null){var t=Gn.alternate;t=t!==null?t.memoizedState:null}else t=hi.next;var e=vi===null?Gn.memoizedState:vi.next;if(e!==null)vi=e,hi=t;else{if(t===null)throw Error(ft(310));hi=t,t={memoizedState:hi.memoizedState,baseState:hi.baseState,baseQueue:hi.baseQueue,queue:hi.queue,next:null},vi===null?Gn.memoizedState=vi=t:vi=vi.next=t}return vi}function rd(t,e){return typeof e=="function"?e(t):e}function _y(t){var e=ns(),n=e.queue;if(n===null)throw Error(ft(311));n.lastRenderedReducer=t;var i=hi,r=i.baseQueue,a=n.pending;if(a!==null){if(r!==null){var s=r.next;r.next=a.next,a.next=s}i.baseQueue=r=a,n.pending=null}if(r!==null){a=r.next,i=i.baseState;var l=s=null,o=null,u=a;do{var f=u.lane;if((Zo&f)===f)o!==null&&(o=o.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var y={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};o===null?(l=o=y,s=i):o=o.next=y,Gn.lanes|=f,el|=f}u=u.next}while(u!==null&&u!==a);o===null?s=i:o.next=l,Ss(i,e.memoizedState)||(hr=!0),e.memoizedState=i,e.baseState=s,e.baseQueue=o,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do a=r.lane,Gn.lanes|=a,el|=a,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vy(t){var e=ns(),n=e.queue;if(n===null)throw Error(ft(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,a=e.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do a=t(a,s.action),s=s.next;while(s!==r);Ss(a,e.memoizedState)||(hr=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,i]}function vw(){}function bw(t,e){var n=Gn,i=ns(),r=e(),a=!Ss(i.memoizedState,r);if(a&&(i.memoizedState=r,hr=!0),i=i.queue,v_(Cw.bind(null,n,i,t),[t]),i.getSnapshot!==e||a||vi!==null&&vi.memoizedState.tag&1){if(n.flags|=2048,sd(9,Iw.bind(null,n,i,r,e),void 0,null),Ci===null)throw Error(ft(349));(Zo&30)!==0||Sw(n,e,r)}return r}function Sw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Gn.updateQueue,e===null?(e={lastEffect:null,stores:null},Gn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Iw(t,e,n,i){e.value=n,e.getSnapshot=i,ww(e)&&Ew(t)}function Cw(t,e,n){return n(function(){ww(e)&&Ew(t)})}function ww(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ss(t,n)}catch{return!0}}function Ew(t){var e=ha(t,1);e!==null&&bs(e,t,1,-1)}function F1(t){var e=Ns();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rd,lastRenderedState:t},e.queue=t,t=t.dispatch=wN.bind(null,Gn,t),[e.memoizedState,t]}function sd(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Gn.updateQueue,e===null?(e={lastEffect:null,stores:null},Gn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Fw(){return ns().memoizedState}function Qf(t,e,n,i){var r=Ns();Gn.flags|=t,r.memoizedState=sd(1|e,n,void 0,i===void 0?null:i)}function fh(t,e,n,i){var r=ns();i=i===void 0?null:i;var a=void 0;if(hi!==null){var s=hi.memoizedState;if(a=s.destroy,i!==null&&g_(i,s.deps)){r.memoizedState=sd(e,n,a,i);return}}Gn.flags|=t,r.memoizedState=sd(1|e,n,a,i)}function k1(t,e){return Qf(8390656,8,t,e)}function v_(t,e){return fh(2048,8,t,e)}function kw(t,e){return fh(4,2,t,e)}function Dw(t,e){return fh(4,4,t,e)}function Pw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Aw(t,e,n){return n=n!=null?n.concat([t]):null,fh(4,4,Pw.bind(null,e,t),n)}function b_(){}function Mw(t,e){var n=ns();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&g_(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Nw(t,e){var n=ns();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&g_(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Rw(t,e,n){return(Zo&21)===0?(t.baseState&&(t.baseState=!1,hr=!0),t.memoizedState=n):(Ss(n,e)||(n=LC(),Gn.lanes|=n,el|=n,t.baseState=!0),e)}function IN(t,e){var n=Cn;Cn=n!==0&&4>n?n:4,t(!0);var i=Ty.transition;Ty.transition={};try{t(!1),e()}finally{Cn=n,Ty.transition=i}}function Ow(){return ns().memoizedState}function CN(t,e,n){var i=Qa(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},xw(t))Lw(e,n);else if(n=pw(t,e,n,i),n!==null){var r=er();bs(n,t,i,r),zw(n,e,i)}}function wN(t,e,n){var i=Qa(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(xw(t))Lw(e,r);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,l=a(s,n);if(r.hasEagerState=!0,r.eagerState=l,Ss(l,s)){var o=e.interleaved;o===null?(r.next=r,f_(e)):(r.next=o.next,o.next=r),e.interleaved=r;return}}catch{}finally{}n=pw(t,e,r,i),n!==null&&(r=er(),bs(n,t,i,r),zw(n,e,i))}}function xw(t){var e=t.alternate;return t===Gn||e!==null&&e===Gn}function Lw(t,e){Mu=Sp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zw(t,e,n){if((n&4194240)!==0){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,XT(t,n)}}var Ip={readContext:ts,useCallback:zi,useContext:zi,useEffect:zi,useImperativeHandle:zi,useInsertionEffect:zi,useLayoutEffect:zi,useMemo:zi,useReducer:zi,useRef:zi,useState:zi,useDebugValue:zi,useDeferredValue:zi,useTransition:zi,useMutableSource:zi,useSyncExternalStore:zi,useId:zi,unstable_isNewReconciler:!1},EN={readContext:ts,useCallback:function(t,e){return Ns().memoizedState=[t,e===void 0?null:e],t},useContext:ts,useEffect:k1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Qf(4194308,4,Pw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Qf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qf(4,2,t,e)},useMemo:function(t,e){var n=Ns();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ns();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=CN.bind(null,Gn,t),[i.memoizedState,t]},useRef:function(t){var e=Ns();return t={current:t},e.memoizedState=t},useState:F1,useDebugValue:b_,useDeferredValue:function(t){return Ns().memoizedState=t},useTransition:function(){var t=F1(!1),e=t[0];return t=IN.bind(null,t[1]),Ns().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Gn,r=Ns();if(Wn){if(n===void 0)throw Error(ft(407));n=n()}else{if(n=e(),Ci===null)throw Error(ft(349));(Zo&30)!==0||Sw(i,e,n)}r.memoizedState=n;var a={value:n,getSnapshot:e};return r.queue=a,k1(Cw.bind(null,i,a,t),[t]),i.flags|=2048,sd(9,Iw.bind(null,i,a,n,e),void 0,null),n},useId:function(){var t=Ns(),e=Ci.identifierPrefix;if(Wn){var n=na,i=ta;n=(i&~(1<<32-vs(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=id++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FN={readContext:ts,useCallback:Mw,useContext:ts,useEffect:v_,useImperativeHandle:Aw,useInsertionEffect:kw,useLayoutEffect:Dw,useMemo:Nw,useReducer:_y,useRef:Fw,useState:function(){return _y(rd)},useDebugValue:b_,useDeferredValue:function(t){var e=ns();return Rw(e,hi.memoizedState,t)},useTransition:function(){var t=_y(rd)[0],e=ns().memoizedState;return[t,e]},useMutableSource:vw,useSyncExternalStore:bw,useId:Ow,unstable_isNewReconciler:!1},kN={readContext:ts,useCallback:Mw,useContext:ts,useEffect:v_,useImperativeHandle:Aw,useInsertionEffect:kw,useLayoutEffect:Dw,useMemo:Nw,useReducer:vy,useRef:Fw,useState:function(){return vy(rd)},useDebugValue:b_,useDeferredValue:function(t){var e=ns();return hi===null?e.memoizedState=t:Rw(e,hi.memoizedState,t)},useTransition:function(){var t=vy(rd)[0],e=ns().memoizedState;return[t,e]},useMutableSource:vw,useSyncExternalStore:bw,useId:Ow,unstable_isNewReconciler:!1};function Sc(t,e){try{var n="",i=e;do n+=nM(i),i=i.return;while(i);var r=n}catch(a){r=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:r,digest:null}}function by(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function Qg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var DN=typeof WeakMap=="function"?WeakMap:Map;function Uw(t,e,n){n=sa(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){wp||(wp=!0,a0=i),Qg(t,e)},n}function Vw(t,e,n){n=sa(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Qg(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Qg(t,e),typeof i!="function"&&(Ya===null?Ya=new Set([this]):Ya.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function D1(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new DN;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=$N.bind(null,t,e,n),e.then(t,t))}function P1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function A1(t,e,n,i,r){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=sa(-1,1),e.tag=2,Ha(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var PN=ga.ReactCurrentOwner,hr=!1;function Xi(t,e,n,i){e.child=t===null?Tw(e,null,n,i):vc(e,t.child,n,i)}function M1(t,e,n,i,r){n=n.render;var a=e.ref;return ac(e,r),i=T_(t,e,n,i,a,r),n=__(),t!==null&&!hr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ma(t,e,r)):(Wn&&n&&a_(e),e.flags|=1,Xi(t,e,i,r),e.child)}function N1(t,e,n,i,r){if(t===null){var a=n.type;return typeof a=="function"&&!D_(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,Bw(t,e,a,i,r)):(t=ep(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,(t.lanes&r)===0){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:Ju,n(s,i)&&t.ref===e.ref)return ma(t,e,r)}return e.flags|=1,t=Ja(a,i),t.ref=e.ref,t.return=e,e.child=t}function Bw(t,e,n,i,r){if(t!==null){var a=t.memoizedProps;if(Ju(a,i)&&t.ref===e.ref)if(hr=!1,e.pendingProps=i=a,(t.lanes&r)!==0)(t.flags&131072)!==0&&(hr=!0);else return e.lanes=t.lanes,ma(t,e,r)}return Jg(t,e,n,i,r)}function Ww(t,e,n){var i=e.pendingProps,r=i.children,a=t!==null?t.memoizedState:null;if(i.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nn(Zl,Er),Er|=n;else{if((n&1073741824)===0)return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Nn(Zl,Er),Er|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=a!==null?a.baseLanes:n,Nn(Zl,Er),Er|=i}else a!==null?(i=a.baseLanes|n,e.memoizedState=null):i=n,Nn(Zl,Er),Er|=i;return Xi(t,e,r,n),e.child}function $w(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Jg(t,e,n,i,r){var a=gr(n)?Jo:Gi.current;return a=Tc(e,a),ac(e,r),n=T_(t,e,n,i,a,r),i=__(),t!==null&&!hr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ma(t,e,r)):(Wn&&i&&a_(e),e.flags|=1,Xi(t,e,n,r),e.child)}function R1(t,e,n,i,r){if(gr(n)){var a=!0;mp(e)}else a=!1;if(ac(e,r),e.stateNode===null)Jf(t,e),yw(e,n,i),Yg(e,n,i,r),i=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var o=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=ts(u):(u=gr(n)?Jo:Gi.current,u=Tc(e,u));var f=n.getDerivedStateFromProps,y=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";y||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==i||o!==u)&&w1(e,s,i,u),Ra=!1;var p=e.memoizedState;s.state=p,vp(e,i,s,r),o=e.memoizedState,l!==i||p!==o||yr.current||Ra?(typeof f=="function"&&(Hg(e,n,f,i),o=e.memoizedState),(l=Ra||C1(e,n,l,i,p,o,u))?(y||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=o),s.props=i,s.state=o,s.context=u,i=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,hw(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:hs(e.type,l),s.props=u,y=e.pendingProps,p=s.context,o=n.contextType,typeof o=="object"&&o!==null?o=ts(o):(o=gr(n)?Jo:Gi.current,o=Tc(e,o));var b=n.getDerivedStateFromProps;(f=typeof b=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==y||p!==o)&&w1(e,s,i,o),Ra=!1,p=e.memoizedState,s.state=p,vp(e,i,s,r);var v=e.memoizedState;l!==y||p!==v||yr.current||Ra?(typeof b=="function"&&(Hg(e,n,b,i),v=e.memoizedState),(u=Ra||C1(e,n,u,i,p,v,o)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,v,o),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,v,o)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),s.props=i,s.state=v,s.context=o,i=u):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return Xg(t,e,n,i,a,r)}function Xg(t,e,n,i,r,a){$w(t,e);var s=(e.flags&128)!==0;if(!i&&!s)return r&&_1(e,n,!1),ma(t,e,a);i=e.stateNode,PN.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&s?(e.child=vc(e,t.child,null,a),e.child=vc(e,null,l,a)):Xi(t,e,l,a),e.memoizedState=i.state,r&&_1(e,n,!0),e.child}function jw(t){var e=t.stateNode;e.pendingContext?T1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&T1(t,e.context,!1),h_(t,e.containerInfo)}function O1(t,e,n,i,r){return _c(),l_(r),e.flags|=256,Xi(t,e,n,i),e.child}var Zg={dehydrated:null,treeContext:null,retryLane:0};function e0(t){return{baseLanes:t,cachePool:null,transitions:null}}function qw(t,e,n){var i=e.pendingProps,r=qn.current,a=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Nn(qn,r&1),t===null)return Gg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(s=i.children,t=i.fallback,a?(i=e.mode,a=e.child,s={mode:"hidden",children:s},(i&1)===0&&a!==null?(a.childLanes=0,a.pendingProps=s):a=mh(s,i,0,null),t=Go(t,i,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=e0(n),e.memoizedState=Zg,t):S_(e,s));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return AN(t,e,s,i,l,r,n);if(a){a=i.fallback,s=e.mode,r=t.child,l=r.sibling;var o={mode:"hidden",children:i.children};return(s&1)===0&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=o,e.deletions=null):(i=Ja(r,o),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?a=Ja(l,a):(a=Go(a,s,n,null),a.flags|=2),a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,s=t.child.memoizedState,s=s===null?e0(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=t.childLanes&~n,e.memoizedState=Zg,i}return a=t.child,t=a.sibling,i=Ja(a,{mode:"visible",children:i.children}),(e.mode&1)===0&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function S_(t,e){return e=mh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Tf(t,e,n,i){return i!==null&&l_(i),vc(e,t.child,null,n),t=S_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function AN(t,e,n,i,r,a,s){if(n)return e.flags&256?(e.flags&=-257,i=by(Error(ft(422))),Tf(t,e,s,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=i.fallback,r=e.mode,i=mh({mode:"visible",children:i.children},r,0,null),a=Go(a,r,s,null),a.flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,(e.mode&1)!==0&&vc(e,t.child,null,s),e.child.memoizedState=e0(s),e.memoizedState=Zg,a);if((e.mode&1)===0)return Tf(t,e,s,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,a=Error(ft(419)),i=by(a,i,void 0),Tf(t,e,s,i)}if(l=(s&t.childLanes)!==0,hr||l){if(i=Ci,i!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=(r&(i.suspendedLanes|s))!==0?0:r,r!==0&&r!==a.retryLane&&(a.retryLane=r,ha(t,r),bs(i,t,r,-1))}return k_(),i=by(Error(ft(421))),Tf(t,e,s,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=jN.bind(null,t),r._reactRetry=e,null):(t=a.treeContext,Pr=Ka(r.nextSibling),Mr=e,Wn=!0,gs=null,t!==null&&(Yr[Qr++]=ta,Yr[Qr++]=na,Yr[Qr++]=Xo,ta=t.id,na=t.overflow,Xo=e),e=S_(e,i.children),e.flags|=4096,e)}function x1(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Kg(t.return,e,n)}function Sy(t,e,n,i,r){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function Gw(t,e,n){var i=e.pendingProps,r=i.revealOrder,a=i.tail;if(Xi(t,e,i.children,n),i=qn.current,(i&2)!==0)i=i&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&x1(t,n,e);else if(t.tag===19)x1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Nn(qn,i),(e.mode&1)===0)e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&bp(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Sy(e,!1,r,n,a);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&bp(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Sy(e,!0,n,null,a);break;case"together":Sy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jf(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ma(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),el|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(ft(153));if(e.child!==null){for(t=e.child,n=Ja(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ja(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MN(t,e,n){switch(e.tag){case 3:jw(e),_c();break;case 5:_w(e);break;case 1:gr(e.type)&&mp(e);break;case 4:h_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Nn(Tp,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Nn(qn,qn.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?qw(t,e,n):(Nn(qn,qn.current&1),t=ma(t,e,n),t!==null?t.sibling:null);Nn(qn,qn.current&1);break;case 19:if(i=(n&e.childLanes)!==0,(t.flags&128)!==0){if(i)return Gw(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Nn(qn,qn.current),i)break;return null;case 22:case 23:return e.lanes=0,Ww(t,e,n)}return ma(t,e,n)}var Kw,t0,Hw,Yw;Kw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};t0=function(){};Hw=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Wo(Vs.current);var a=null;switch(n){case"input":r=Ig(t,r),i=Ig(t,i),a=[];break;case"select":r=Kn({},r,{value:void 0}),i=Kn({},i,{value:void 0}),a=[];break;case"textarea":r=Eg(t,r),i=Eg(t,i),a=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=pp)}kg(n,i);var s;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ju.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in i){var o=i[u];if(l=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&o!==l&&(o!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||o&&o.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in o)o.hasOwnProperty(s)&&l[s]!==o[s]&&(n||(n={}),n[s]=o[s])}else n||(a||(a=[]),a.push(u,n)),n=o;else u==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,l=l?l.__html:void 0,o!=null&&l!==o&&(a=a||[]).push(u,o)):u==="children"?typeof o!="string"&&typeof o!="number"||(a=a||[]).push(u,""+o):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ju.hasOwnProperty(u)?(o!=null&&u==="onScroll"&&On("scroll",t),a||l===o||(a=[])):(a=a||[]).push(u,o))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};Yw=function(t,e,n,i){n!==i&&(e.flags|=4)};function iu(t,e){if(!Wn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ui(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function NN(t,e,n){var i=e.pendingProps;switch(o_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ui(e),null;case 1:return gr(e.type)&&hp(),Ui(e),null;case 3:return i=e.stateNode,bc(),xn(yr),xn(Gi),y_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(yf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,gs!==null&&(c0(gs),gs=null))),t0(t,e),Ui(e),null;case 5:m_(e);var r=Wo(nd.current);if(n=e.type,t!==null&&e.stateNode!=null)Hw(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ft(166));return Ui(e),null}if(t=Wo(Vs.current),yf(e)){i=e.stateNode,n=e.type;var a=e.memoizedProps;switch(i[Ls]=e,i[ed]=a,t=(e.mode&1)!==0,n){case"dialog":On("cancel",i),On("close",i);break;case"iframe":case"object":case"embed":On("load",i);break;case"video":case"audio":for(r=0;r<gu.length;r++)On(gu[r],i);break;case"source":On("error",i);break;case"img":case"image":case"link":On("error",i),On("load",i);break;case"details":On("toggle",i);break;case"input":qb(i,a),On("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},On("invalid",i);break;case"textarea":Kb(i,a),On("invalid",i)}kg(n,a),r=null;for(var s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="children"?typeof l=="string"?i.textContent!==l&&(a.suppressHydrationWarning!==!0&&mf(i.textContent,l,t),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&mf(i.textContent,l,t),r=["children",""+l]):ju.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&On("scroll",i)}switch(n){case"input":of(i),Gb(i,a,!0);break;case"textarea":of(i),Hb(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=pp)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=SC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=s.createElement(n,{is:i.is}):(t=s.createElement(n),n==="select"&&(s=t,i.multiple?s.multiple=!0:i.size&&(s.size=i.size))):t=s.createElementNS(t,n),t[Ls]=e,t[ed]=i,Kw(t,e,!1,!1),e.stateNode=t;e:{switch(s=Dg(n,i),n){case"dialog":On("cancel",t),On("close",t),r=i;break;case"iframe":case"object":case"embed":On("load",t),r=i;break;case"video":case"audio":for(r=0;r<gu.length;r++)On(gu[r],t);r=i;break;case"source":On("error",t),r=i;break;case"img":case"image":case"link":On("error",t),On("load",t),r=i;break;case"details":On("toggle",t),r=i;break;case"input":qb(t,i),r=Ig(t,i),On("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Kn({},i,{value:void 0}),On("invalid",t);break;case"textarea":Kb(t,i),r=Eg(t,i),On("invalid",t);break;default:r=i}kg(n,r),l=r;for(a in l)if(l.hasOwnProperty(a)){var o=l[a];a==="style"?wC(t,o):a==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&IC(t,o)):a==="children"?typeof o=="string"?(n!=="textarea"||o!=="")&&qu(t,o):typeof o=="number"&&qu(t,""+o):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ju.hasOwnProperty(a)?o!=null&&a==="onScroll"&&On("scroll",t):o!=null&&GT(t,a,o,s))}switch(n){case"input":of(t),Gb(t,i,!1);break;case"textarea":of(t),Hb(t);break;case"option":i.value!=null&&t.setAttribute("value",""+so(i.value));break;case"select":t.multiple=!!i.multiple,a=i.value,a!=null?nc(t,!!i.multiple,a,!1):i.defaultValue!=null&&nc(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=pp)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ui(e),null;case 6:if(t&&e.stateNode!=null)Yw(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ft(166));if(n=Wo(nd.current),Wo(Vs.current),yf(e)){if(i=e.stateNode,n=e.memoizedProps,i[Ls]=e,(a=i.nodeValue!==n)&&(t=Mr,t!==null))switch(t.tag){case 3:mf(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&mf(i.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ls]=e,e.stateNode=i}return Ui(e),null;case 13:if(xn(qn),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Wn&&Pr!==null&&(e.mode&1)!==0&&(e.flags&128)===0)fw(),_c(),e.flags|=98560,a=!1;else if(a=yf(e),i!==null&&i.dehydrated!==null){if(t===null){if(!a)throw Error(ft(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ft(317));a[Ls]=e}else _c(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Ui(e),a=!1}else gs!==null&&(c0(gs),gs=null),a=!0;if(!a)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(qn.current&1)!==0?yi===0&&(yi=3):k_())),e.updateQueue!==null&&(e.flags|=4),Ui(e),null);case 4:return bc(),t0(t,e),t===null&&Xu(e.stateNode.containerInfo),Ui(e),null;case 10:return d_(e.type._context),Ui(e),null;case 17:return gr(e.type)&&hp(),Ui(e),null;case 19:if(xn(qn),a=e.memoizedState,a===null)return Ui(e),null;if(i=(e.flags&128)!==0,s=a.rendering,s===null)if(i)iu(a,!1);else{if(yi!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(s=bp(t),s!==null){for(e.flags|=128,iu(a,!1),i=s.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)a=n,t=i,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Nn(qn,qn.current&1|2),e.child}t=t.sibling}a.tail!==null&&si()>Ic&&(e.flags|=128,i=!0,iu(a,!1),e.lanes=4194304)}else{if(!i)if(t=bp(s),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),iu(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Wn)return Ui(e),null}else 2*si()-a.renderingStartTime>Ic&&n!==1073741824&&(e.flags|=128,i=!0,iu(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(n=a.last,n!==null?n.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=si(),e.sibling=null,n=qn.current,Nn(qn,i?n&1|2:n&1),e):(Ui(e),null);case 22:case 23:return F_(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&(e.mode&1)!==0?(Er&1073741824)!==0&&(Ui(e),e.subtreeFlags&6&&(e.flags|=8192)):Ui(e),null;case 24:return null;case 25:return null}throw Error(ft(156,e.tag))}function RN(t,e){switch(o_(e),e.tag){case 1:return gr(e.type)&&hp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bc(),xn(yr),xn(Gi),y_(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return m_(e),null;case 13:if(xn(qn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ft(340));_c()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xn(qn),null;case 4:return bc(),null;case 10:return d_(e.type._context),null;case 22:case 23:return F_(),null;case 24:return null;default:return null}}var _f=!1,$i=!1,ON=typeof WeakSet=="function"?WeakSet:Set,At=null;function Xl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Xn(t,e,i)}else n.current=null}function n0(t,e,n){try{n()}catch(i){Xn(t,e,i)}}var L1=!1;function xN(t,e){if(Ug=up,t=ZC(),s_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,l=-1,o=-1,u=0,f=0,y=t,p=null;t:for(;;){for(var b;y!==n||r!==0&&y.nodeType!==3||(l=s+r),y!==a||i!==0&&y.nodeType!==3||(o=s+i),y.nodeType===3&&(s+=y.nodeValue.length),(b=y.firstChild)!==null;)p=y,y=b;for(;;){if(y===t)break t;if(p===n&&++u===r&&(l=s),p===a&&++f===i&&(o=s),(b=y.nextSibling)!==null)break;y=p,p=y.parentNode}y=b}n=l===-1||o===-1?null:{start:l,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vg={focusedElem:t,selectionRange:n},up=!1,At=e;At!==null;)if(e=At,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,At=t;else for(;At!==null;){e=At;try{var v=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var m=v.memoizedProps,V=v.memoizedState,F=e.stateNode,P=F.getSnapshotBeforeUpdate(e.elementType===e.type?m:hs(e.type,m),V);F.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var G=e.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ft(163))}}catch(te){Xn(e,e.return,te)}if(t=e.sibling,t!==null){t.return=e.return,At=t;break}At=e.return}return v=L1,L1=!1,v}function Nu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var a=r.destroy;r.destroy=void 0,a!==void 0&&n0(e,n,a)}r=r.next}while(r!==i)}}function ph(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function i0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Qw(t){var e=t.alternate;e!==null&&(t.alternate=null,Qw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ls],delete e[ed],delete e[$g],delete e[TN],delete e[_N])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jw(t){return t.tag===5||t.tag===3||t.tag===4}function z1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function r0(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=pp));else if(i!==4&&(t=t.child,t!==null))for(r0(t,e,n),t=t.sibling;t!==null;)r0(t,e,n),t=t.sibling}function s0(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(s0(t,e,n),t=t.sibling;t!==null;)s0(t,e,n),t=t.sibling}var Di=null,ys=!1;function Ea(t,e,n){for(n=n.child;n!==null;)Xw(t,e,n),n=n.sibling}function Xw(t,e,n){if(Us&&typeof Us.onCommitFiberUnmount=="function")try{Us.onCommitFiberUnmount(sh,n)}catch{}switch(n.tag){case 5:$i||Xl(n,e);case 6:var i=Di,r=ys;Di=null,Ea(t,e,n),Di=i,ys=r,Di!==null&&(ys?(t=Di,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Di.removeChild(n.stateNode));break;case 18:Di!==null&&(ys?(t=Di,n=n.stateNode,t.nodeType===8?my(t.parentNode,n):t.nodeType===1&&my(t,n),Yu(t)):my(Di,n.stateNode));break;case 4:i=Di,r=ys,Di=n.stateNode.containerInfo,ys=!0,Ea(t,e,n),Di=i,ys=r;break;case 0:case 11:case 14:case 15:if(!$i&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var a=r,s=a.destroy;a=a.tag,s!==void 0&&((a&2)!==0||(a&4)!==0)&&n0(n,e,s),r=r.next}while(r!==i)}Ea(t,e,n);break;case 1:if(!$i&&(Xl(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){Xn(n,e,l)}Ea(t,e,n);break;case 21:Ea(t,e,n);break;case 22:n.mode&1?($i=(i=$i)||n.memoizedState!==null,Ea(t,e,n),$i=i):Ea(t,e,n);break;default:Ea(t,e,n)}}function U1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ON),e.forEach(function(i){var r=qN.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function cs(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var a=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:Di=l.stateNode,ys=!1;break e;case 3:Di=l.stateNode.containerInfo,ys=!0;break e;case 4:Di=l.stateNode.containerInfo,ys=!0;break e}l=l.return}if(Di===null)throw Error(ft(160));Xw(a,s,r),Di=null,ys=!1;var o=r.alternate;o!==null&&(o.return=null),r.return=null}catch(u){Xn(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Zw(e,t),e=e.sibling}function Zw(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cs(e,t),ks(t),i&4){try{Nu(3,t,t.return),ph(3,t)}catch(m){Xn(t,t.return,m)}try{Nu(5,t,t.return)}catch(m){Xn(t,t.return,m)}}break;case 1:cs(e,t),ks(t),i&512&&n!==null&&Xl(n,n.return);break;case 5:if(cs(e,t),ks(t),i&512&&n!==null&&Xl(n,n.return),t.flags&32){var r=t.stateNode;try{qu(r,"")}catch(m){Xn(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var a=t.memoizedProps,s=n!==null?n.memoizedProps:a,l=t.type,o=t.updateQueue;if(t.updateQueue=null,o!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&vC(r,a),Dg(l,s);var u=Dg(l,a);for(s=0;s<o.length;s+=2){var f=o[s],y=o[s+1];f==="style"?wC(r,y):f==="dangerouslySetInnerHTML"?IC(r,y):f==="children"?qu(r,y):GT(r,f,y,u)}switch(l){case"input":Cg(r,a);break;case"textarea":bC(r,a);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var b=a.value;b!=null?nc(r,!!a.multiple,b,!1):p!==!!a.multiple&&(a.defaultValue!=null?nc(r,!!a.multiple,a.defaultValue,!0):nc(r,!!a.multiple,a.multiple?[]:"",!1))}r[ed]=a}catch(m){Xn(t,t.return,m)}}break;case 6:if(cs(e,t),ks(t),i&4){if(t.stateNode===null)throw Error(ft(162));r=t.stateNode,a=t.memoizedProps;try{r.nodeValue=a}catch(m){Xn(t,t.return,m)}}break;case 3:if(cs(e,t),ks(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Yu(e.containerInfo)}catch(m){Xn(t,t.return,m)}break;case 4:cs(e,t),ks(t);break;case 13:cs(e,t),ks(t),r=t.child,r.flags&8192&&(a=r.memoizedState!==null,r.stateNode.isHidden=a,!a||r.alternate!==null&&r.alternate.memoizedState!==null||(w_=si())),i&4&&U1(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?($i=(u=$i)||f,cs(e,t),$i=u):cs(e,t),ks(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&(t.mode&1)!==0)for(At=t,f=t.child;f!==null;){for(y=At=f;At!==null;){switch(p=At,b=p.child,p.tag){case 0:case 11:case 14:case 15:Nu(4,p,p.return);break;case 1:Xl(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){i=p,n=p.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(m){Xn(i,n,m)}}break;case 5:Xl(p,p.return);break;case 22:if(p.memoizedState!==null){B1(y);continue}}b!==null?(b.return=p,At=b):B1(y)}f=f.sibling}e:for(f=null,y=t;;){if(y.tag===5){if(f===null){f=y;try{r=y.stateNode,u?(a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=y.stateNode,o=y.memoizedProps.style,s=o!=null&&o.hasOwnProperty("display")?o.display:null,l.style.display=CC("display",s))}catch(m){Xn(t,t.return,m)}}}else if(y.tag===6){if(f===null)try{y.stateNode.nodeValue=u?"":y.memoizedProps}catch(m){Xn(t,t.return,m)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;f===y&&(f=null),y=y.return}f===y&&(f=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:cs(e,t),ks(t),i&4&&U1(t);break;case 21:break;default:cs(e,t),ks(t)}}function ks(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Jw(n)){var i=n;break e}n=n.return}throw Error(ft(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(qu(r,""),i.flags&=-33);var a=z1(t);s0(t,a,r);break;case 3:case 4:var s=i.stateNode.containerInfo,l=z1(t);r0(t,l,s);break;default:throw Error(ft(161))}}catch(o){Xn(t,t.return,o)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function LN(t,e,n){At=t,eE(t)}function eE(t,e,n){for(var i=(t.mode&1)!==0;At!==null;){var r=At,a=r.child;if(r.tag===22&&i){var s=r.memoizedState!==null||_f;if(!s){var l=r.alternate,o=l!==null&&l.memoizedState!==null||$i;l=_f;var u=$i;if(_f=s,($i=o)&&!u)for(At=r;At!==null;)s=At,o=s.child,s.tag===22&&s.memoizedState!==null?W1(r):o!==null?(o.return=s,At=o):W1(r);for(;a!==null;)At=a,eE(a),a=a.sibling;At=r,_f=l,$i=u}V1(t)}else(r.subtreeFlags&8772)!==0&&a!==null?(a.return=r,At=a):V1(t)}}function V1(t){for(;At!==null;){var e=At;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:$i||ph(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!$i)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:hs(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&I1(e,a,i);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}I1(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var o=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&n.focus();break;case"img":o.src&&(n.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var y=f.dehydrated;y!==null&&Yu(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ft(163))}$i||e.flags&512&&i0(e)}catch(p){Xn(e,e.return,p)}}if(e===t){At=null;break}if(n=e.sibling,n!==null){n.return=e.return,At=n;break}At=e.return}}function B1(t){for(;At!==null;){var e=At;if(e===t){At=null;break}var n=e.sibling;if(n!==null){n.return=e.return,At=n;break}At=e.return}}function W1(t){for(;At!==null;){var e=At;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ph(4,e)}catch(o){Xn(e,n,o)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(o){Xn(e,r,o)}}var a=e.return;try{i0(e)}catch(o){Xn(e,a,o)}break;case 5:var s=e.return;try{i0(e)}catch(o){Xn(e,s,o)}}}catch(o){Xn(e,e.return,o)}if(e===t){At=null;break}var l=e.sibling;if(l!==null){l.return=e.return,At=l;break}At=e.return}}var zN=Math.ceil,Cp=ga.ReactCurrentDispatcher,I_=ga.ReactCurrentOwner,es=ga.ReactCurrentBatchConfig,Tn=0,Ci=null,ui=null,Ri=0,Er=0,Zl=mo(0),yi=0,ad=null,el=0,hh=0,C_=0,Ru=null,dr=null,w_=0,Ic=1/0,Qs=null,wp=!1,a0=null,Ya=null,vf=!1,Wa=null,Ep=0,Ou=0,o0=null,Xf=-1,Zf=0;function er(){return(Tn&6)!==0?si():Xf!==-1?Xf:Xf=si()}function Qa(t){return(t.mode&1)===0?1:(Tn&2)!==0&&Ri!==0?Ri&-Ri:bN.transition!==null?(Zf===0&&(Zf=LC()),Zf):(t=Cn,t!==0||(t=window.event,t=t===void 0?16:jC(t.type)),t)}function bs(t,e,n,i){if(50<Ou)throw Ou=0,o0=null,Error(ft(185));wd(t,n,i),((Tn&2)===0||t!==Ci)&&(t===Ci&&((Tn&2)===0&&(hh|=n),yi===4&&La(t,Ri)),Tr(t,i),n===1&&Tn===0&&(e.mode&1)===0&&(Ic=si()+500,uh&&yo()))}function Tr(t,e){var n=t.callbackNode;bM(t,e);var i=cp(t,t===Ci?Ri:0);if(i===0)n!==null&&Jb(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Jb(n),e===1)t.tag===0?vN($1.bind(null,t)):cw($1.bind(null,t)),yN(function(){(Tn&6)===0&&yo()}),n=null;else{switch(zC(i)){case 1:n=JT;break;case 4:n=OC;break;case 16:n=lp;break;case 536870912:n=xC;break;default:n=lp}n=lE(n,tE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tE(t,e){if(Xf=-1,Zf=0,(Tn&6)!==0)throw Error(ft(327));var n=t.callbackNode;if(oc()&&t.callbackNode!==n)return null;var i=cp(t,t===Ci?Ri:0);if(i===0)return null;if((i&30)!==0||(i&t.expiredLanes)!==0||e)e=Fp(t,i);else{e=i;var r=Tn;Tn|=2;var a=iE();(Ci!==t||Ri!==e)&&(Qs=null,Ic=si()+500,qo(t,e));do try{BN();break}catch(l){nE(t,l)}while(1);u_(),Cp.current=a,Tn=r,ui!==null?e=0:(Ci=null,Ri=0,e=yi)}if(e!==0){if(e===2&&(r=Rg(t),r!==0&&(i=r,e=l0(t,r))),e===1)throw n=ad,qo(t,0),La(t,i),Tr(t,si()),n;if(e===6)La(t,i);else{if(r=t.current.alternate,(i&30)===0&&!UN(r)&&(e=Fp(t,i),e===2&&(a=Rg(t),a!==0&&(i=a,e=l0(t,a))),e===1))throw n=ad,qo(t,0),La(t,i),Tr(t,si()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ft(345));case 2:Ro(t,dr,Qs);break;case 3:if(La(t,i),(i&130023424)===i&&(e=w_+500-si(),10<e)){if(cp(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){er(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Wg(Ro.bind(null,t,dr,Qs),e);break}Ro(t,dr,Qs);break;case 4:if(La(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var s=31-vs(i);a=1<<s,s=e[s],s>r&&(r=s),i&=~a}if(i=r,i=si()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*zN(i/1960))-i,10<i){t.timeoutHandle=Wg(Ro.bind(null,t,dr,Qs),i);break}Ro(t,dr,Qs);break;case 5:Ro(t,dr,Qs);break;default:throw Error(ft(329))}}}return Tr(t,si()),t.callbackNode===n?tE.bind(null,t):null}function l0(t,e){var n=Ru;return t.current.memoizedState.isDehydrated&&(qo(t,e).flags|=256),t=Fp(t,e),t!==2&&(e=dr,dr=n,e!==null&&c0(e)),t}function c0(t){dr===null?dr=t:dr.push.apply(dr,t)}function UN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!Ss(a(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function La(t,e){for(e&=~C_,e&=~hh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vs(e),i=1<<n;t[n]=-1,e&=~i}}function $1(t){if((Tn&6)!==0)throw Error(ft(327));oc();var e=cp(t,0);if((e&1)===0)return Tr(t,si()),null;var n=Fp(t,e);if(t.tag!==0&&n===2){var i=Rg(t);i!==0&&(e=i,n=l0(t,i))}if(n===1)throw n=ad,qo(t,0),La(t,e),Tr(t,si()),n;if(n===6)throw Error(ft(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ro(t,dr,Qs),Tr(t,si()),null}function E_(t,e){var n=Tn;Tn|=1;try{return t(e)}finally{Tn=n,Tn===0&&(Ic=si()+500,uh&&yo())}}function tl(t){Wa!==null&&Wa.tag===0&&(Tn&6)===0&&oc();var e=Tn;Tn|=1;var n=es.transition,i=Cn;try{if(es.transition=null,Cn=1,t)return t()}finally{Cn=i,es.transition=n,Tn=e,(Tn&6)===0&&yo()}}function F_(){Er=Zl.current,xn(Zl)}function qo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mN(n)),ui!==null)for(n=ui.return;n!==null;){var i=n;switch(o_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&hp();break;case 3:bc(),xn(yr),xn(Gi),y_();break;case 5:m_(i);break;case 4:bc();break;case 13:xn(qn);break;case 19:xn(qn);break;case 10:d_(i.type._context);break;case 22:case 23:F_()}n=n.return}if(Ci=t,ui=t=Ja(t.current,null),Ri=Er=e,yi=0,ad=null,C_=hh=el=0,dr=Ru=null,Bo!==null){for(e=0;e<Bo.length;e++)if(n=Bo[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,a=n.pending;if(a!==null){var s=a.next;a.next=r,i.next=s}n.pending=i}Bo=null}return t}function nE(t,e){do{var n=ui;try{if(u_(),Yf.current=Ip,Sp){for(var i=Gn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Sp=!1}if(Zo=0,vi=hi=Gn=null,Mu=!1,id=0,I_.current=null,n===null||n.return===null){yi=1,ad=e,ui=null;break}e:{var a=t,s=n.return,l=n,o=e;if(e=Ri,l.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var u=o,f=l,y=f.tag;if((f.mode&1)===0&&(y===0||y===11||y===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var b=P1(s);if(b!==null){b.flags&=-257,A1(b,s,l,a,e),b.mode&1&&D1(a,u,e),e=b,o=u;var v=e.updateQueue;if(v===null){var m=new Set;m.add(o),e.updateQueue=m}else v.add(o);break e}else{if((e&1)===0){D1(a,u,e),k_();break e}o=Error(ft(426))}}else if(Wn&&l.mode&1){var V=P1(s);if(V!==null){(V.flags&65536)===0&&(V.flags|=256),A1(V,s,l,a,e),l_(Sc(o,l));break e}}a=o=Sc(o,l),yi!==4&&(yi=2),Ru===null?Ru=[a]:Ru.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var F=Uw(a,o,e);S1(a,F);break e;case 1:l=o;var P=a.type,G=a.stateNode;if((a.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Ya===null||!Ya.has(G)))){a.flags|=65536,e&=-e,a.lanes|=e;var te=Vw(a,l,e);S1(a,te);break e}}a=a.return}while(a!==null)}sE(n)}catch(q){e=q,ui===n&&n!==null&&(ui=n=n.return);continue}break}while(1)}function iE(){var t=Cp.current;return Cp.current=Ip,t===null?Ip:t}function k_(){(yi===0||yi===3||yi===2)&&(yi=4),Ci===null||(el&268435455)===0&&(hh&268435455)===0||La(Ci,Ri)}function Fp(t,e){var n=Tn;Tn|=2;var i=iE();(Ci!==t||Ri!==e)&&(Qs=null,qo(t,e));do try{VN();break}catch(r){nE(t,r)}while(1);if(u_(),Tn=n,Cp.current=i,ui!==null)throw Error(ft(261));return Ci=null,Ri=0,yi}function VN(){for(;ui!==null;)rE(ui)}function BN(){for(;ui!==null&&!fM();)rE(ui)}function rE(t){var e=oE(t.alternate,t,Er);t.memoizedProps=t.pendingProps,e===null?sE(t):ui=e,I_.current=null}function sE(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=NN(n,e,Er),n!==null){ui=n;return}}else{if(n=RN(n,e),n!==null){n.flags&=32767,ui=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yi=6,ui=null;return}}if(e=e.sibling,e!==null){ui=e;return}ui=e=t}while(e!==null);yi===0&&(yi=5)}function Ro(t,e,n){var i=Cn,r=es.transition;try{es.transition=null,Cn=1,WN(t,e,n,i)}finally{es.transition=r,Cn=i}return null}function WN(t,e,n,i){do oc();while(Wa!==null);if((Tn&6)!==0)throw Error(ft(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ft(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(SM(t,a),t===Ci&&(ui=Ci=null,Ri=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||vf||(vf=!0,lE(lp,function(){return oc(),null})),a=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||a){a=es.transition,es.transition=null;var s=Cn;Cn=1;var l=Tn;Tn|=4,I_.current=null,xN(t,n),Zw(n,t),lN(Vg),up=!!Ug,Vg=Ug=null,t.current=n,LN(n),pM(),Tn=l,Cn=s,es.transition=a}else t.current=n;if(vf&&(vf=!1,Wa=t,Ep=r),a=t.pendingLanes,a===0&&(Ya=null),yM(n.stateNode),Tr(t,si()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(wp)throw wp=!1,t=a0,a0=null,t;return(Ep&1)!==0&&t.tag!==0&&oc(),a=t.pendingLanes,(a&1)!==0?t===o0?Ou++:(Ou=0,o0=t):Ou=0,yo(),null}function oc(){if(Wa!==null){var t=zC(Ep),e=es.transition,n=Cn;try{if(es.transition=null,Cn=16>t?16:t,Wa===null)var i=!1;else{if(t=Wa,Wa=null,Ep=0,(Tn&6)!==0)throw Error(ft(331));var r=Tn;for(Tn|=4,At=t.current;At!==null;){var a=At,s=a.child;if((At.flags&16)!==0){var l=a.deletions;if(l!==null){for(var o=0;o<l.length;o++){var u=l[o];for(At=u;At!==null;){var f=At;switch(f.tag){case 0:case 11:case 15:Nu(8,f,a)}var y=f.child;if(y!==null)y.return=f,At=y;else for(;At!==null;){f=At;var p=f.sibling,b=f.return;if(Qw(f),f===u){At=null;break}if(p!==null){p.return=b,At=p;break}At=b}}}var v=a.alternate;if(v!==null){var m=v.child;if(m!==null){v.child=null;do{var V=m.sibling;m.sibling=null,m=V}while(m!==null)}}At=a}}if((a.subtreeFlags&2064)!==0&&s!==null)s.return=a,At=s;else e:for(;At!==null;){if(a=At,(a.flags&2048)!==0)switch(a.tag){case 0:case 11:case 15:Nu(9,a,a.return)}var F=a.sibling;if(F!==null){F.return=a.return,At=F;break e}At=a.return}}var P=t.current;for(At=P;At!==null;){s=At;var G=s.child;if((s.subtreeFlags&2064)!==0&&G!==null)G.return=s,At=G;else e:for(s=P;At!==null;){if(l=At,(l.flags&2048)!==0)try{switch(l.tag){case 0:case 11:case 15:ph(9,l)}}catch(q){Xn(l,l.return,q)}if(l===s){At=null;break e}var te=l.sibling;if(te!==null){te.return=l.return,At=te;break e}At=l.return}}if(Tn=r,yo(),Us&&typeof Us.onPostCommitFiberRoot=="function")try{Us.onPostCommitFiberRoot(sh,t)}catch{}i=!0}return i}finally{Cn=n,es.transition=e}}return!1}function j1(t,e,n){e=Sc(n,e),e=Uw(t,e,1),t=Ha(t,e,1),e=er(),t!==null&&(wd(t,1,e),Tr(t,e))}function Xn(t,e,n){if(t.tag===3)j1(t,t,n);else for(;e!==null;){if(e.tag===3){j1(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ya===null||!Ya.has(i))){t=Sc(n,t),t=Vw(e,t,1),e=Ha(e,t,1),t=er(),e!==null&&(wd(e,1,t),Tr(e,t));break}}e=e.return}}function $N(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=er(),t.pingedLanes|=t.suspendedLanes&n,Ci===t&&(Ri&n)===n&&(yi===4||yi===3&&(Ri&130023424)===Ri&&500>si()-w_?qo(t,0):C_|=n),Tr(t,e)}function aE(t,e){e===0&&((t.mode&1)===0?e=1:(e=uf,uf<<=1,(uf&130023424)===0&&(uf=4194304)));var n=er();t=ha(t,e),t!==null&&(wd(t,e,n),Tr(t,n))}function jN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),aE(t,n)}function qN(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ft(314))}i!==null&&i.delete(e),aE(t,n)}var oE;oE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yr.current)hr=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return hr=!1,MN(t,e,n);hr=(t.flags&131072)!==0}else hr=!1,Wn&&(e.flags&1048576)!==0&&uw(e,gp,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Jf(t,e),t=e.pendingProps;var r=Tc(e,Gi.current);ac(e,n),r=T_(null,e,i,t,r,n);var a=__();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gr(i)?(a=!0,mp(e)):a=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,p_(e),r.updater=dh,e.stateNode=r,r._reactInternals=e,Yg(e,i,t,n),e=Xg(null,e,i,!0,a,n)):(e.tag=0,Wn&&a&&a_(e),Xi(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Jf(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=KN(i),t=hs(i,t),r){case 0:e=Jg(null,e,i,t,n);break e;case 1:e=R1(null,e,i,t,n);break e;case 11:e=M1(null,e,i,t,n);break e;case 14:e=N1(null,e,i,hs(i.type,t),n);break e}throw Error(ft(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hs(i,r),Jg(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hs(i,r),R1(t,e,i,r,n);case 3:e:{if(jw(e),t===null)throw Error(ft(387));i=e.pendingProps,a=e.memoizedState,r=a.element,hw(t,e),vp(e,i,null,n);var s=e.memoizedState;if(i=s.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){r=Sc(Error(ft(423)),e),e=O1(t,e,i,n,r);break e}else if(i!==r){r=Sc(Error(ft(424)),e),e=O1(t,e,i,n,r);break e}else for(Pr=Ka(e.stateNode.containerInfo.firstChild),Mr=e,Wn=!0,gs=null,n=Tw(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_c(),i===r){e=ma(t,e,n);break e}Xi(t,e,i,n)}e=e.child}return e;case 5:return _w(e),t===null&&Gg(e),i=e.type,r=e.pendingProps,a=t!==null?t.memoizedProps:null,s=r.children,Bg(i,r)?s=null:a!==null&&Bg(i,a)&&(e.flags|=32),$w(t,e),Xi(t,e,s,n),e.child;case 6:return t===null&&Gg(e),null;case 13:return qw(t,e,n);case 4:return h_(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=vc(e,null,i,n):Xi(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hs(i,r),M1(t,e,i,r,n);case 7:return Xi(t,e,e.pendingProps,n),e.child;case 8:return Xi(t,e,e.pendingProps.children,n),e.child;case 12:return Xi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,a=e.memoizedProps,s=r.value,Nn(Tp,i._currentValue),i._currentValue=s,a!==null)if(Ss(a.value,s)){if(a.children===r.children&&!yr.current){e=ma(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){s=a.child;for(var o=l.firstContext;o!==null;){if(o.context===i){if(a.tag===1){o=sa(-1,n&-n),o.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?o.next=o:(o.next=f.next,f.next=o),u.pending=o}}a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),Kg(a.return,n,e),l.lanes|=n;break}o=o.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(ft(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Kg(s,n,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Xi(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,ac(e,n),r=ts(r),i=i(r),e.flags|=1,Xi(t,e,i,n),e.child;case 14:return i=e.type,r=hs(i,e.pendingProps),r=hs(i.type,r),N1(t,e,i,r,n);case 15:return Bw(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hs(i,r),Jf(t,e),e.tag=1,gr(i)?(t=!0,mp(e)):t=!1,ac(e,n),yw(e,i,r),Yg(e,i,r,n),Xg(null,e,i,!0,t,n);case 19:return Gw(t,e,n);case 22:return Ww(t,e,n)}throw Error(ft(156,e.tag))};function lE(t,e){return RC(t,e)}function GN(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(t,e,n,i){return new GN(t,e,n,i)}function D_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KN(t){if(typeof t=="function")return D_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===HT)return 11;if(t===YT)return 14}return 2}function Ja(t,e){var n=t.alternate;return n===null?(n=Zr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ep(t,e,n,i,r,a){var s=2;if(i=t,typeof t=="function")D_(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case $l:return Go(n.children,r,a,e);case KT:s=8,r|=8;break;case _g:return t=Zr(12,n,e,r|2),t.elementType=_g,t.lanes=a,t;case vg:return t=Zr(13,n,e,r),t.elementType=vg,t.lanes=a,t;case bg:return t=Zr(19,n,e,r),t.elementType=bg,t.lanes=a,t;case gC:return mh(n,r,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mC:s=10;break e;case yC:s=9;break e;case HT:s=11;break e;case YT:s=14;break e;case Na:s=16,i=null;break e}throw Error(ft(130,t==null?t:typeof t,""))}return e=Zr(s,n,e,r),e.elementType=t,e.type=i,e.lanes=a,e}function Go(t,e,n,i){return t=Zr(7,t,i,e),t.lanes=n,t}function mh(t,e,n,i){return t=Zr(22,t,i,e),t.elementType=gC,t.lanes=n,t.stateNode={isHidden:!1},t}function Iy(t,e,n){return t=Zr(6,t,null,e),t.lanes=n,t}function Cy(t,e,n){return e=Zr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function HN(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ry(0),this.expirationTimes=ry(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ry(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function P_(t,e,n,i,r,a,s,l,o){return t=new HN(t,e,n,l,o),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Zr(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},p_(a),t}function YN(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wl,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function cE(t){if(!t)return ao;t=t._reactInternals;e:{if(fl(t)!==t||t.tag!==1)throw Error(ft(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ft(171))}if(t.tag===1){var n=t.type;if(gr(n))return lw(t,n,e)}return e}function uE(t,e,n,i,r,a,s,l,o){return t=P_(n,i,!0,t,r,a,s,l,o),t.context=cE(null),n=t.current,i=er(),r=Qa(n),a=sa(i,r),a.callback=e!=null?e:null,Ha(n,a,r),t.current.lanes=r,wd(t,r,i),Tr(t,i),t}function yh(t,e,n,i){var r=e.current,a=er(),s=Qa(r);return n=cE(n),e.context===null?e.context=n:e.pendingContext=n,e=sa(a,s),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ha(r,e,s),t!==null&&(bs(t,r,s,a),Hf(t,r,s)),s}function kp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function q1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function A_(t,e){q1(t,e),(t=t.alternate)&&q1(t,e)}function QN(){return null}var dE=typeof reportError=="function"?reportError:function(t){console.error(t)};function M_(t){this._internalRoot=t}gh.prototype.render=M_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ft(409));yh(t,e,null,null)};gh.prototype.unmount=M_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;tl(function(){yh(null,t,null,null)}),e[pa]=null}};function gh(t){this._internalRoot=t}gh.prototype.unstable_scheduleHydration=function(t){if(t){var e=BC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xa.length&&e!==0&&e<xa[n].priority;n++);xa.splice(n,0,t),n===0&&$C(t)}};function N_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Th(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function G1(){}function JN(t,e,n,i,r){if(r){if(typeof i=="function"){var a=i;i=function(){var u=kp(s);a.call(u)}}var s=uE(e,i,t,0,null,!1,!1,"",G1);return t._reactRootContainer=s,t[pa]=s.current,Xu(t.nodeType===8?t.parentNode:t),tl(),s}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var u=kp(o);l.call(u)}}var o=P_(t,0,!1,null,null,!1,!1,"",G1);return t._reactRootContainer=o,t[pa]=o.current,Xu(t.nodeType===8?t.parentNode:t),tl(function(){yh(e,o,n,i)}),o}function _h(t,e,n,i,r){var a=n._reactRootContainer;if(a){var s=a;if(typeof r=="function"){var l=r;r=function(){var o=kp(s);l.call(o)}}yh(e,s,t,r)}else s=JN(n,e,t,r,i);return kp(s)}UC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=yu(e.pendingLanes);n!==0&&(XT(e,n|1),Tr(e,si()),(Tn&6)===0&&(Ic=si()+500,yo()))}break;case 13:tl(function(){var i=ha(t,1);if(i!==null){var r=er();bs(i,t,1,r)}}),A_(t,1)}};ZT=function(t){if(t.tag===13){var e=ha(t,134217728);if(e!==null){var n=er();bs(e,t,134217728,n)}A_(t,134217728)}};VC=function(t){if(t.tag===13){var e=Qa(t),n=ha(t,e);if(n!==null){var i=er();bs(n,t,e,i)}A_(t,e)}};BC=function(){return Cn};WC=function(t,e){var n=Cn;try{return Cn=t,e()}finally{Cn=n}};Ag=function(t,e,n){switch(e){case"input":if(Cg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=ch(i);if(!r)throw Error(ft(90));_C(i),Cg(i,r)}}}break;case"textarea":bC(t,n);break;case"select":e=n.value,e!=null&&nc(t,!!n.multiple,e,!1)}};kC=E_;DC=tl;var XN={usingClientEntryPoint:!1,Events:[Fd,Kl,ch,EC,FC,E_]},ru={findFiberByHostInstance:Vo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ZN={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ga.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=MC(t),t===null?null:t.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||QN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var bf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bf.isDisabled&&bf.supportsFiber)try{sh=bf.inject(ZN),Us=bf}catch{}}Rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XN;Rr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!N_(e))throw Error(ft(200));return YN(t,e,null,n)};Rr.createRoot=function(t,e){if(!N_(t))throw Error(ft(299));var n=!1,i="",r=dE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=P_(t,1,!1,null,null,n,!1,i,r),t[pa]=e.current,Xu(t.nodeType===8?t.parentNode:t),new M_(e)};Rr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ft(188)):(t=Object.keys(t).join(","),Error(ft(268,t)));return t=MC(e),t=t===null?null:t.stateNode,t};Rr.flushSync=function(t){return tl(t)};Rr.hydrate=function(t,e,n){if(!Th(e))throw Error(ft(200));return _h(null,t,e,!0,n)};Rr.hydrateRoot=function(t,e,n){if(!N_(t))throw Error(ft(405));var i=n!=null&&n.hydratedSources||null,r=!1,a="",s=dE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=uE(e,null,t,1,n!=null?n:null,r,!1,a,s),t[pa]=e.current,Xu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new gh(e)};Rr.render=function(t,e,n){if(!Th(e))throw Error(ft(200));return _h(null,t,e,!1,n)};Rr.unmountComponentAtNode=function(t){if(!Th(t))throw Error(ft(40));return t._reactRootContainer?(tl(function(){_h(null,null,t,!1,function(){t._reactRootContainer=null,t[pa]=null})}),!0):!1};Rr.unstable_batchedUpdates=E_;Rr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Th(n))throw Error(ft(200));if(t==null||t._reactInternals===void 0)throw Error(ft(38));return _h(t,e,n,!1,i)};Rr.version="18.2.0-next-9e3b772b8-20220608";function fE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fE)}catch(t){console.error(t)}}fE(),uC.exports=Rr;var K1=uC.exports;gg.createRoot=K1.createRoot,gg.hydrateRoot=K1.hydrateRoot;var vh={exports:{}},eR="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",tR=eR,nR=tR;function pE(){}function hE(){}hE.resetWarningCache=pE;var iR=function(){function t(i,r,a,s,l,o){if(o!==nR){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:hE,resetWarningCache:pE};return n.PropTypes=n,n};vh.exports=iR();var Re=vh.exports,mE={exports:{}},rR=["alignContent","MozAlignContent","WebkitAlignContent","MSAlignContent","OAlignContent","alignItems","MozAlignItems","WebkitAlignItems","MSAlignItems","OAlignItems","alignSelf","MozAlignSelf","WebkitAlignSelf","MSAlignSelf","OAlignSelf","all","MozAll","WebkitAll","MSAll","OAll","animation","MozAnimation","WebkitAnimation","MSAnimation","OAnimation","animationDelay","MozAnimationDelay","WebkitAnimationDelay","MSAnimationDelay","OAnimationDelay","animationDirection","MozAnimationDirection","WebkitAnimationDirection","MSAnimationDirection","OAnimationDirection","animationDuration","MozAnimationDuration","WebkitAnimationDuration","MSAnimationDuration","OAnimationDuration","animationFillMode","MozAnimationFillMode","WebkitAnimationFillMode","MSAnimationFillMode","OAnimationFillMode","animationIterationCount","MozAnimationIterationCount","WebkitAnimationIterationCount","MSAnimationIterationCount","OAnimationIterationCount","animationName","MozAnimationName","WebkitAnimationName","MSAnimationName","OAnimationName","animationPlayState","MozAnimationPlayState","WebkitAnimationPlayState","MSAnimationPlayState","OAnimationPlayState","animationTimingFunction","MozAnimationTimingFunction","WebkitAnimationTimingFunction","MSAnimationTimingFunction","OAnimationTimingFunction","backfaceVisibility","MozBackfaceVisibility","WebkitBackfaceVisibility","MSBackfaceVisibility","OBackfaceVisibility","background","MozBackground","WebkitBackground","MSBackground","OBackground","backgroundAttachment","MozBackgroundAttachment","WebkitBackgroundAttachment","MSBackgroundAttachment","OBackgroundAttachment","backgroundBlendMode","MozBackgroundBlendMode","WebkitBackgroundBlendMode","MSBackgroundBlendMode","OBackgroundBlendMode","backgroundClip","MozBackgroundClip","WebkitBackgroundClip","MSBackgroundClip","OBackgroundClip","backgroundColor","MozBackgroundColor","WebkitBackgroundColor","MSBackgroundColor","OBackgroundColor","backgroundImage","MozBackgroundImage","WebkitBackgroundImage","MSBackgroundImage","OBackgroundImage","backgroundOrigin","MozBackgroundOrigin","WebkitBackgroundOrigin","MSBackgroundOrigin","OBackgroundOrigin","backgroundPosition","MozBackgroundPosition","WebkitBackgroundPosition","MSBackgroundPosition","OBackgroundPosition","backgroundRepeat","MozBackgroundRepeat","WebkitBackgroundRepeat","MSBackgroundRepeat","OBackgroundRepeat","backgroundSize","MozBackgroundSize","WebkitBackgroundSize","MSBackgroundSize","OBackgroundSize","blockSize","MozBlockSize","WebkitBlockSize","MSBlockSize","OBlockSize","border","MozBorder","WebkitBorder","MSBorder","OBorder","borderBlockEnd","MozBorderBlockEnd","WebkitBorderBlockEnd","MSBorderBlockEnd","OBorderBlockEnd","borderBlockEndColor","MozBorderBlockEndColor","WebkitBorderBlockEndColor","MSBorderBlockEndColor","OBorderBlockEndColor","borderBlockEndStyle","MozBorderBlockEndStyle","WebkitBorderBlockEndStyle","MSBorderBlockEndStyle","OBorderBlockEndStyle","borderBlockEndWidth","MozBorderBlockEndWidth","WebkitBorderBlockEndWidth","MSBorderBlockEndWidth","OBorderBlockEndWidth","borderBlockStart","MozBorderBlockStart","WebkitBorderBlockStart","MSBorderBlockStart","OBorderBlockStart","borderBlockStartColor","MozBorderBlockStartColor","WebkitBorderBlockStartColor","MSBorderBlockStartColor","OBorderBlockStartColor","borderBlockStartStyle","MozBorderBlockStartStyle","WebkitBorderBlockStartStyle","MSBorderBlockStartStyle","OBorderBlockStartStyle","borderBlockStartWidth","MozBorderBlockStartWidth","WebkitBorderBlockStartWidth","MSBorderBlockStartWidth","OBorderBlockStartWidth","borderBottom","MozBorderBottom","WebkitBorderBottom","MSBorderBottom","OBorderBottom","borderBottomColor","MozBorderBottomColor","WebkitBorderBottomColor","MSBorderBottomColor","OBorderBottomColor","borderBottomLeftRadius","MozBorderBottomLeftRadius","WebkitBorderBottomLeftRadius","MSBorderBottomLeftRadius","OBorderBottomLeftRadius","borderBottomRightRadius","MozBorderBottomRightRadius","WebkitBorderBottomRightRadius","MSBorderBottomRightRadius","OBorderBottomRightRadius","borderBottomStyle","MozBorderBottomStyle","WebkitBorderBottomStyle","MSBorderBottomStyle","OBorderBottomStyle","borderBottomWidth","MozBorderBottomWidth","WebkitBorderBottomWidth","MSBorderBottomWidth","OBorderBottomWidth","borderCollapse","MozBorderCollapse","WebkitBorderCollapse","MSBorderCollapse","OBorderCollapse","borderColor","MozBorderColor","WebkitBorderColor","MSBorderColor","OBorderColor","borderImage","MozBorderImage","WebkitBorderImage","MSBorderImage","OBorderImage","borderImageOutset","MozBorderImageOutset","WebkitBorderImageOutset","MSBorderImageOutset","OBorderImageOutset","borderImageRepeat","MozBorderImageRepeat","WebkitBorderImageRepeat","MSBorderImageRepeat","OBorderImageRepeat","borderImageSlice","MozBorderImageSlice","WebkitBorderImageSlice","MSBorderImageSlice","OBorderImageSlice","borderImageSource","MozBorderImageSource","WebkitBorderImageSource","MSBorderImageSource","OBorderImageSource","borderImageWidth","MozBorderImageWidth","WebkitBorderImageWidth","MSBorderImageWidth","OBorderImageWidth","borderInlineEnd","MozBorderInlineEnd","WebkitBorderInlineEnd","MSBorderInlineEnd","OBorderInlineEnd","borderInlineEndColor","MozBorderInlineEndColor","WebkitBorderInlineEndColor","MSBorderInlineEndColor","OBorderInlineEndColor","borderInlineEndStyle","MozBorderInlineEndStyle","WebkitBorderInlineEndStyle","MSBorderInlineEndStyle","OBorderInlineEndStyle","borderInlineEndWidth","MozBorderInlineEndWidth","WebkitBorderInlineEndWidth","MSBorderInlineEndWidth","OBorderInlineEndWidth","borderInlineStart","MozBorderInlineStart","WebkitBorderInlineStart","MSBorderInlineStart","OBorderInlineStart","borderInlineStartColor","MozBorderInlineStartColor","WebkitBorderInlineStartColor","MSBorderInlineStartColor","OBorderInlineStartColor","borderInlineStartStyle","MozBorderInlineStartStyle","WebkitBorderInlineStartStyle","MSBorderInlineStartStyle","OBorderInlineStartStyle","borderInlineStartWidth","MozBorderInlineStartWidth","WebkitBorderInlineStartWidth","MSBorderInlineStartWidth","OBorderInlineStartWidth","borderLeft","MozBorderLeft","WebkitBorderLeft","MSBorderLeft","OBorderLeft","borderLeftColor","MozBorderLeftColor","WebkitBorderLeftColor","MSBorderLeftColor","OBorderLeftColor","borderLeftStyle","MozBorderLeftStyle","WebkitBorderLeftStyle","MSBorderLeftStyle","OBorderLeftStyle","borderLeftWidth","MozBorderLeftWidth","WebkitBorderLeftWidth","MSBorderLeftWidth","OBorderLeftWidth","borderRadius","MozBorderRadius","WebkitBorderRadius","MSBorderRadius","OBorderRadius","borderRight","MozBorderRight","WebkitBorderRight","MSBorderRight","OBorderRight","borderRightColor","MozBorderRightColor","WebkitBorderRightColor","MSBorderRightColor","OBorderRightColor","borderRightStyle","MozBorderRightStyle","WebkitBorderRightStyle","MSBorderRightStyle","OBorderRightStyle","borderRightWidth","MozBorderRightWidth","WebkitBorderRightWidth","MSBorderRightWidth","OBorderRightWidth","borderSpacing","MozBorderSpacing","WebkitBorderSpacing","MSBorderSpacing","OBorderSpacing","borderStyle","MozBorderStyle","WebkitBorderStyle","MSBorderStyle","OBorderStyle","borderTop","MozBorderTop","WebkitBorderTop","MSBorderTop","OBorderTop","borderTopColor","MozBorderTopColor","WebkitBorderTopColor","MSBorderTopColor","OBorderTopColor","borderTopLeftRadius","MozBorderTopLeftRadius","WebkitBorderTopLeftRadius","MSBorderTopLeftRadius","OBorderTopLeftRadius","borderTopRightRadius","MozBorderTopRightRadius","WebkitBorderTopRightRadius","MSBorderTopRightRadius","OBorderTopRightRadius","borderTopStyle","MozBorderTopStyle","WebkitBorderTopStyle","MSBorderTopStyle","OBorderTopStyle","borderTopWidth","MozBorderTopWidth","WebkitBorderTopWidth","MSBorderTopWidth","OBorderTopWidth","borderWidth","MozBorderWidth","WebkitBorderWidth","MSBorderWidth","OBorderWidth","bottom","MozBottom","WebkitBottom","MSBottom","OBottom","boxDecorationBreak","MozBoxDecorationBreak","WebkitBoxDecorationBreak","MSBoxDecorationBreak","OBoxDecorationBreak","boxShadow","MozBoxShadow","WebkitBoxShadow","MSBoxShadow","OBoxShadow","boxSizing","MozBoxSizing","WebkitBoxSizing","MSBoxSizing","OBoxSizing","breakAfter","MozBreakAfter","WebkitBreakAfter","MSBreakAfter","OBreakAfter","breakBefore","MozBreakBefore","WebkitBreakBefore","MSBreakBefore","OBreakBefore","breakInside","MozBreakInside","WebkitBreakInside","MSBreakInside","OBreakInside","captionSide","MozCaptionSide","WebkitCaptionSide","MSCaptionSide","OCaptionSide","caretColor","MozCaretColor","WebkitCaretColor","MSCaretColor","OCaretColor","ch","MozCh","WebkitCh","MSCh","OCh","clear","MozClear","WebkitClear","MSClear","OClear","clip","MozClip","WebkitClip","MSClip","OClip","clipPath","MozClipPath","WebkitClipPath","MSClipPath","OClipPath","cm","MozCm","WebkitCm","MSCm","OCm","color","MozColor","WebkitColor","MSColor","OColor","columnCount","MozColumnCount","WebkitColumnCount","MSColumnCount","OColumnCount","columnFill","MozColumnFill","WebkitColumnFill","MSColumnFill","OColumnFill","columnGap","MozColumnGap","WebkitColumnGap","MSColumnGap","OColumnGap","columnRule","MozColumnRule","WebkitColumnRule","MSColumnRule","OColumnRule","columnRuleColor","MozColumnRuleColor","WebkitColumnRuleColor","MSColumnRuleColor","OColumnRuleColor","columnRuleStyle","MozColumnRuleStyle","WebkitColumnRuleStyle","MSColumnRuleStyle","OColumnRuleStyle","columnRuleWidth","MozColumnRuleWidth","WebkitColumnRuleWidth","MSColumnRuleWidth","OColumnRuleWidth","columnSpan","MozColumnSpan","WebkitColumnSpan","MSColumnSpan","OColumnSpan","columnWidth","MozColumnWidth","WebkitColumnWidth","MSColumnWidth","OColumnWidth","columns","MozColumns","WebkitColumns","MSColumns","OColumns","content","MozContent","WebkitContent","MSContent","OContent","counterIncrement","MozCounterIncrement","WebkitCounterIncrement","MSCounterIncrement","OCounterIncrement","counterReset","MozCounterReset","WebkitCounterReset","MSCounterReset","OCounterReset","cursor","MozCursor","WebkitCursor","MSCursor","OCursor","deg","MozDeg","WebkitDeg","MSDeg","ODeg","direction","MozDirection","WebkitDirection","MSDirection","ODirection","display","MozDisplay","WebkitDisplay","MSDisplay","ODisplay","dpcm","MozDpcm","WebkitDpcm","MSDpcm","ODpcm","dpi","MozDpi","WebkitDpi","MSDpi","ODpi","dppx","MozDppx","WebkitDppx","MSDppx","ODppx","em","MozEm","WebkitEm","MSEm","OEm","emptyCells","MozEmptyCells","WebkitEmptyCells","MSEmptyCells","OEmptyCells","ex","MozEx","WebkitEx","MSEx","OEx","filter","MozFilter","WebkitFilter","MSFilter","OFilter","flexBasis","MozFlexBasis","WebkitFlexBasis","MSFlexBasis","OFlexBasis","flexDirection","MozFlexDirection","WebkitFlexDirection","MSFlexDirection","OFlexDirection","flexFlow","MozFlexFlow","WebkitFlexFlow","MSFlexFlow","OFlexFlow","flexGrow","MozFlexGrow","WebkitFlexGrow","MSFlexGrow","OFlexGrow","flexShrink","MozFlexShrink","WebkitFlexShrink","MSFlexShrink","OFlexShrink","flexWrap","MozFlexWrap","WebkitFlexWrap","MSFlexWrap","OFlexWrap","float","MozFloat","WebkitFloat","MSFloat","OFloat","font","MozFont","WebkitFont","MSFont","OFont","fontFamily","MozFontFamily","WebkitFontFamily","MSFontFamily","OFontFamily","fontFeatureSettings","MozFontFeatureSettings","WebkitFontFeatureSettings","MSFontFeatureSettings","OFontFeatureSettings","fontKerning","MozFontKerning","WebkitFontKerning","MSFontKerning","OFontKerning","fontLanguageOverride","MozFontLanguageOverride","WebkitFontLanguageOverride","MSFontLanguageOverride","OFontLanguageOverride","fontSize","MozFontSize","WebkitFontSize","MSFontSize","OFontSize","fontSizeAdjust","MozFontSizeAdjust","WebkitFontSizeAdjust","MSFontSizeAdjust","OFontSizeAdjust","fontStretch","MozFontStretch","WebkitFontStretch","MSFontStretch","OFontStretch","fontStyle","MozFontStyle","WebkitFontStyle","MSFontStyle","OFontStyle","fontSynthesis","MozFontSynthesis","WebkitFontSynthesis","MSFontSynthesis","OFontSynthesis","fontVariant","MozFontVariant","WebkitFontVariant","MSFontVariant","OFontVariant","fontVariantAlternates","MozFontVariantAlternates","WebkitFontVariantAlternates","MSFontVariantAlternates","OFontVariantAlternates","fontVariantCaps","MozFontVariantCaps","WebkitFontVariantCaps","MSFontVariantCaps","OFontVariantCaps","fontVariantEastAsian","MozFontVariantEastAsian","WebkitFontVariantEastAsian","MSFontVariantEastAsian","OFontVariantEastAsian","fontVariantLigatures","MozFontVariantLigatures","WebkitFontVariantLigatures","MSFontVariantLigatures","OFontVariantLigatures","fontVariantNumeric","MozFontVariantNumeric","WebkitFontVariantNumeric","MSFontVariantNumeric","OFontVariantNumeric","fontVariantPosition","MozFontVariantPosition","WebkitFontVariantPosition","MSFontVariantPosition","OFontVariantPosition","fontWeight","MozFontWeight","WebkitFontWeight","MSFontWeight","OFontWeight","fr","MozFr","WebkitFr","MSFr","OFr","grad","MozGrad","WebkitGrad","MSGrad","OGrad","grid","MozGrid","WebkitGrid","MSGrid","OGrid","gridArea","MozGridArea","WebkitGridArea","MSGridArea","OGridArea","gridAutoColumns","MozGridAutoColumns","WebkitGridAutoColumns","MSGridAutoColumns","OGridAutoColumns","gridAutoFlow","MozGridAutoFlow","WebkitGridAutoFlow","MSGridAutoFlow","OGridAutoFlow","gridAutoRows","MozGridAutoRows","WebkitGridAutoRows","MSGridAutoRows","OGridAutoRows","gridColumn","MozGridColumn","WebkitGridColumn","MSGridColumn","OGridColumn","gridColumnEnd","MozGridColumnEnd","WebkitGridColumnEnd","MSGridColumnEnd","OGridColumnEnd","gridColumnGap","MozGridColumnGap","WebkitGridColumnGap","MSGridColumnGap","OGridColumnGap","gridColumnStart","MozGridColumnStart","WebkitGridColumnStart","MSGridColumnStart","OGridColumnStart","gridGap","MozGridGap","WebkitGridGap","MSGridGap","OGridGap","gridRow","MozGridRow","WebkitGridRow","MSGridRow","OGridRow","gridRowEnd","MozGridRowEnd","WebkitGridRowEnd","MSGridRowEnd","OGridRowEnd","gridRowGap","MozGridRowGap","WebkitGridRowGap","MSGridRowGap","OGridRowGap","gridRowStart","MozGridRowStart","WebkitGridRowStart","MSGridRowStart","OGridRowStart","gridTemplate","MozGridTemplate","WebkitGridTemplate","MSGridTemplate","OGridTemplate","gridTemplateAreas","MozGridTemplateAreas","WebkitGridTemplateAreas","MSGridTemplateAreas","OGridTemplateAreas","gridTemplateColumns","MozGridTemplateColumns","WebkitGridTemplateColumns","MSGridTemplateColumns","OGridTemplateColumns","gridTemplateRows","MozGridTemplateRows","WebkitGridTemplateRows","MSGridTemplateRows","OGridTemplateRows","height","MozHeight","WebkitHeight","MSHeight","OHeight","hyphens","MozHyphens","WebkitHyphens","MSHyphens","OHyphens","hz","MozHz","WebkitHz","MSHz","OHz","imageOrientation","MozImageOrientation","WebkitImageOrientation","MSImageOrientation","OImageOrientation","imageRendering","MozImageRendering","WebkitImageRendering","MSImageRendering","OImageRendering","imageResolution","MozImageResolution","WebkitImageResolution","MSImageResolution","OImageResolution","imeMode","MozImeMode","WebkitImeMode","MSImeMode","OImeMode","in","MozIn","WebkitIn","MSIn","OIn","inherit","MozInherit","WebkitInherit","MSInherit","OInherit","initial","MozInitial","WebkitInitial","MSInitial","OInitial","inlineSize","MozInlineSize","WebkitInlineSize","MSInlineSize","OInlineSize","isolation","MozIsolation","WebkitIsolation","MSIsolation","OIsolation","justifyContent","MozJustifyContent","WebkitJustifyContent","MSJustifyContent","OJustifyContent","khz","MozKhz","WebkitKhz","MSKhz","OKhz","left","MozLeft","WebkitLeft","MSLeft","OLeft","letterSpacing","MozLetterSpacing","WebkitLetterSpacing","MSLetterSpacing","OLetterSpacing","lineBreak","MozLineBreak","WebkitLineBreak","MSLineBreak","OLineBreak","lineHeight","MozLineHeight","WebkitLineHeight","MSLineHeight","OLineHeight","listStyle","MozListStyle","WebkitListStyle","MSListStyle","OListStyle","listStyleImage","MozListStyleImage","WebkitListStyleImage","MSListStyleImage","OListStyleImage","listStylePosition","MozListStylePosition","WebkitListStylePosition","MSListStylePosition","OListStylePosition","listStyleType","MozListStyleType","WebkitListStyleType","MSListStyleType","OListStyleType","margin","MozMargin","WebkitMargin","MSMargin","OMargin","marginBlockEnd","MozMarginBlockEnd","WebkitMarginBlockEnd","MSMarginBlockEnd","OMarginBlockEnd","marginBlockStart","MozMarginBlockStart","WebkitMarginBlockStart","MSMarginBlockStart","OMarginBlockStart","marginBottom","MozMarginBottom","WebkitMarginBottom","MSMarginBottom","OMarginBottom","marginInlineEnd","MozMarginInlineEnd","WebkitMarginInlineEnd","MSMarginInlineEnd","OMarginInlineEnd","marginInlineStart","MozMarginInlineStart","WebkitMarginInlineStart","MSMarginInlineStart","OMarginInlineStart","marginLeft","MozMarginLeft","WebkitMarginLeft","MSMarginLeft","OMarginLeft","marginRight","MozMarginRight","WebkitMarginRight","MSMarginRight","OMarginRight","marginTop","MozMarginTop","WebkitMarginTop","MSMarginTop","OMarginTop","mask","MozMask","WebkitMask","MSMask","OMask","maskClip","MozMaskClip","WebkitMaskClip","MSMaskClip","OMaskClip","maskComposite","MozMaskComposite","WebkitMaskComposite","MSMaskComposite","OMaskComposite","maskImage","MozMaskImage","WebkitMaskImage","MSMaskImage","OMaskImage","maskMode","MozMaskMode","WebkitMaskMode","MSMaskMode","OMaskMode","maskOrigin","MozMaskOrigin","WebkitMaskOrigin","MSMaskOrigin","OMaskOrigin","maskPosition","MozMaskPosition","WebkitMaskPosition","MSMaskPosition","OMaskPosition","maskRepeat","MozMaskRepeat","WebkitMaskRepeat","MSMaskRepeat","OMaskRepeat","maskSize","MozMaskSize","WebkitMaskSize","MSMaskSize","OMaskSize","maskType","MozMaskType","WebkitMaskType","MSMaskType","OMaskType","maxHeight","MozMaxHeight","WebkitMaxHeight","MSMaxHeight","OMaxHeight","maxWidth","MozMaxWidth","WebkitMaxWidth","MSMaxWidth","OMaxWidth","minBlockSize","MozMinBlockSize","WebkitMinBlockSize","MSMinBlockSize","OMinBlockSize","minHeight","MozMinHeight","WebkitMinHeight","MSMinHeight","OMinHeight","minInlineSize","MozMinInlineSize","WebkitMinInlineSize","MSMinInlineSize","OMinInlineSize","minWidth","MozMinWidth","WebkitMinWidth","MSMinWidth","OMinWidth","mixBlendMode","MozMixBlendMode","WebkitMixBlendMode","MSMixBlendMode","OMixBlendMode","mm","MozMm","WebkitMm","MSMm","OMm","ms","MozMs","WebkitMs","MSMs","OMs","objectFit","MozObjectFit","WebkitObjectFit","MSObjectFit","OObjectFit","objectPosition","MozObjectPosition","WebkitObjectPosition","MSObjectPosition","OObjectPosition","offsetBlockEnd","MozOffsetBlockEnd","WebkitOffsetBlockEnd","MSOffsetBlockEnd","OOffsetBlockEnd","offsetBlockStart","MozOffsetBlockStart","WebkitOffsetBlockStart","MSOffsetBlockStart","OOffsetBlockStart","offsetInlineEnd","MozOffsetInlineEnd","WebkitOffsetInlineEnd","MSOffsetInlineEnd","OOffsetInlineEnd","offsetInlineStart","MozOffsetInlineStart","WebkitOffsetInlineStart","MSOffsetInlineStart","OOffsetInlineStart","opacity","MozOpacity","WebkitOpacity","MSOpacity","OOpacity","order","MozOrder","WebkitOrder","MSOrder","OOrder","orphans","MozOrphans","WebkitOrphans","MSOrphans","OOrphans","outline","MozOutline","WebkitOutline","MSOutline","OOutline","outlineColor","MozOutlineColor","WebkitOutlineColor","MSOutlineColor","OOutlineColor","outlineOffset","MozOutlineOffset","WebkitOutlineOffset","MSOutlineOffset","OOutlineOffset","outlineStyle","MozOutlineStyle","WebkitOutlineStyle","MSOutlineStyle","OOutlineStyle","outlineWidth","MozOutlineWidth","WebkitOutlineWidth","MSOutlineWidth","OOutlineWidth","overflow","MozOverflow","WebkitOverflow","MSOverflow","OOverflow","overflowWrap","MozOverflowWrap","WebkitOverflowWrap","MSOverflowWrap","OOverflowWrap","overflowX","MozOverflowX","WebkitOverflowX","MSOverflowX","OOverflowX","overflowY","MozOverflowY","WebkitOverflowY","MSOverflowY","OOverflowY","padding","MozPadding","WebkitPadding","MSPadding","OPadding","paddingBlockEnd","MozPaddingBlockEnd","WebkitPaddingBlockEnd","MSPaddingBlockEnd","OPaddingBlockEnd","paddingBlockStart","MozPaddingBlockStart","WebkitPaddingBlockStart","MSPaddingBlockStart","OPaddingBlockStart","paddingBottom","MozPaddingBottom","WebkitPaddingBottom","MSPaddingBottom","OPaddingBottom","paddingInlineEnd","MozPaddingInlineEnd","WebkitPaddingInlineEnd","MSPaddingInlineEnd","OPaddingInlineEnd","paddingInlineStart","MozPaddingInlineStart","WebkitPaddingInlineStart","MSPaddingInlineStart","OPaddingInlineStart","paddingLeft","MozPaddingLeft","WebkitPaddingLeft","MSPaddingLeft","OPaddingLeft","paddingRight","MozPaddingRight","WebkitPaddingRight","MSPaddingRight","OPaddingRight","paddingTop","MozPaddingTop","WebkitPaddingTop","MSPaddingTop","OPaddingTop","pageBreakAfter","MozPageBreakAfter","WebkitPageBreakAfter","MSPageBreakAfter","OPageBreakAfter","pageBreakBefore","MozPageBreakBefore","WebkitPageBreakBefore","MSPageBreakBefore","OPageBreakBefore","pageBreakInside","MozPageBreakInside","WebkitPageBreakInside","MSPageBreakInside","OPageBreakInside","pc","MozPc","WebkitPc","MSPc","OPc","perspective","MozPerspective","WebkitPerspective","MSPerspective","OPerspective","perspectiveOrigin","MozPerspectiveOrigin","WebkitPerspectiveOrigin","MSPerspectiveOrigin","OPerspectiveOrigin","pointerEvents","MozPointerEvents","WebkitPointerEvents","MSPointerEvents","OPointerEvents","position","MozPosition","WebkitPosition","MSPosition","OPosition","pt","MozPt","WebkitPt","MSPt","OPt","px","MozPx","WebkitPx","MSPx","OPx","q","MozQ","WebkitQ","MSQ","OQ","quotes","MozQuotes","WebkitQuotes","MSQuotes","OQuotes","rad","MozRad","WebkitRad","MSRad","ORad","rem","MozRem","WebkitRem","MSRem","ORem","resize","MozResize","WebkitResize","MSResize","OResize","revert","MozRevert","WebkitRevert","MSRevert","ORevert","right","MozRight","WebkitRight","MSRight","ORight","rubyAlign","MozRubyAlign","WebkitRubyAlign","MSRubyAlign","ORubyAlign","rubyMerge","MozRubyMerge","WebkitRubyMerge","MSRubyMerge","ORubyMerge","rubyPosition","MozRubyPosition","WebkitRubyPosition","MSRubyPosition","ORubyPosition","s","MozS","WebkitS","MSS","OS","scrollBehavior","MozScrollBehavior","WebkitScrollBehavior","MSScrollBehavior","OScrollBehavior","scrollSnapCoordinate","MozScrollSnapCoordinate","WebkitScrollSnapCoordinate","MSScrollSnapCoordinate","OScrollSnapCoordinate","scrollSnapDestination","MozScrollSnapDestination","WebkitScrollSnapDestination","MSScrollSnapDestination","OScrollSnapDestination","scrollSnapType","MozScrollSnapType","WebkitScrollSnapType","MSScrollSnapType","OScrollSnapType","shapeImageThreshold","MozShapeImageThreshold","WebkitShapeImageThreshold","MSShapeImageThreshold","OShapeImageThreshold","shapeMargin","MozShapeMargin","WebkitShapeMargin","MSShapeMargin","OShapeMargin","shapeOutside","MozShapeOutside","WebkitShapeOutside","MSShapeOutside","OShapeOutside","tabSize","MozTabSize","WebkitTabSize","MSTabSize","OTabSize","tableLayout","MozTableLayout","WebkitTableLayout","MSTableLayout","OTableLayout","textAlign","MozTextAlign","WebkitTextAlign","MSTextAlign","OTextAlign","textAlignLast","MozTextAlignLast","WebkitTextAlignLast","MSTextAlignLast","OTextAlignLast","textCombineUpright","MozTextCombineUpright","WebkitTextCombineUpright","MSTextCombineUpright","OTextCombineUpright","textDecoration","MozTextDecoration","WebkitTextDecoration","MSTextDecoration","OTextDecoration","textDecorationColor","MozTextDecorationColor","WebkitTextDecorationColor","MSTextDecorationColor","OTextDecorationColor","textDecorationLine","MozTextDecorationLine","WebkitTextDecorationLine","MSTextDecorationLine","OTextDecorationLine","textDecorationStyle","MozTextDecorationStyle","WebkitTextDecorationStyle","MSTextDecorationStyle","OTextDecorationStyle","textEmphasis","MozTextEmphasis","WebkitTextEmphasis","MSTextEmphasis","OTextEmphasis","textEmphasisColor","MozTextEmphasisColor","WebkitTextEmphasisColor","MSTextEmphasisColor","OTextEmphasisColor","textEmphasisPosition","MozTextEmphasisPosition","WebkitTextEmphasisPosition","MSTextEmphasisPosition","OTextEmphasisPosition","textEmphasisStyle","MozTextEmphasisStyle","WebkitTextEmphasisStyle","MSTextEmphasisStyle","OTextEmphasisStyle","textIndent","MozTextIndent","WebkitTextIndent","MSTextIndent","OTextIndent","textOrientation","MozTextOrientation","WebkitTextOrientation","MSTextOrientation","OTextOrientation","textOverflow","MozTextOverflow","WebkitTextOverflow","MSTextOverflow","OTextOverflow","textRendering","MozTextRendering","WebkitTextRendering","MSTextRendering","OTextRendering","textShadow","MozTextShadow","WebkitTextShadow","MSTextShadow","OTextShadow","textTransform","MozTextTransform","WebkitTextTransform","MSTextTransform","OTextTransform","textUnderlinePosition","MozTextUnderlinePosition","WebkitTextUnderlinePosition","MSTextUnderlinePosition","OTextUnderlinePosition","top","MozTop","WebkitTop","MSTop","OTop","touchAction","MozTouchAction","WebkitTouchAction","MSTouchAction","OTouchAction","transform","MozTransform","WebkitTransform","msTransform","OTransform","transformBox","MozTransformBox","WebkitTransformBox","MSTransformBox","OTransformBox","transformOrigin","MozTransformOrigin","WebkitTransformOrigin","MSTransformOrigin","OTransformOrigin","transformStyle","MozTransformStyle","WebkitTransformStyle","MSTransformStyle","OTransformStyle","transition","MozTransition","WebkitTransition","MSTransition","OTransition","transitionDelay","MozTransitionDelay","WebkitTransitionDelay","MSTransitionDelay","OTransitionDelay","transitionDuration","MozTransitionDuration","WebkitTransitionDuration","MSTransitionDuration","OTransitionDuration","transitionProperty","MozTransitionProperty","WebkitTransitionProperty","MSTransitionProperty","OTransitionProperty","transitionTimingFunction","MozTransitionTimingFunction","WebkitTransitionTimingFunction","MSTransitionTimingFunction","OTransitionTimingFunction","turn","MozTurn","WebkitTurn","MSTurn","OTurn","unicodeBidi","MozUnicodeBidi","WebkitUnicodeBidi","MSUnicodeBidi","OUnicodeBidi","unset","MozUnset","WebkitUnset","MSUnset","OUnset","verticalAlign","MozVerticalAlign","WebkitVerticalAlign","MSVerticalAlign","OVerticalAlign","vh","MozVh","WebkitVh","MSVh","OVh","visibility","MozVisibility","WebkitVisibility","MSVisibility","OVisibility","vmax","MozVmax","WebkitVmax","MSVmax","OVmax","vmin","MozVmin","WebkitVmin","MSVmin","OVmin","vw","MozVw","WebkitVw","MSVw","OVw","whiteSpace","MozWhiteSpace","WebkitWhiteSpace","MSWhiteSpace","OWhiteSpace","widows","MozWidows","WebkitWidows","MSWidows","OWidows","width","MozWidth","WebkitWidth","MSWidth","OWidth","willChange","MozWillChange","WebkitWillChange","MSWillChange","OWillChange","wordBreak","MozWordBreak","WebkitWordBreak","MSWordBreak","OWordBreak","wordSpacing","MozWordSpacing","WebkitWordSpacing","MSWordSpacing","OWordSpacing","wordWrap","MozWordWrap","WebkitWordWrap","MSWordWrap","OWordWrap","writingMode","MozWritingMode","WebkitWritingMode","MSWritingMode","OWritingMode","zIndex","MozZIndex","WebkitZIndex","MSZIndex","OZIndex","fontSize","MozFontSize","WebkitFontSize","MSFontSize","OFontSize","flex","MozFlex","WebkitFlex","MSFlex","OFlex","fr","MozFr","WebkitFr","MSFr","OFr","overflowScrolling","MozOverflowScrolling","WebkitOverflowScrolling","MSOverflowScrolling","OOverflowScrolling","userSelect","MozUserSelect","WebkitUserSelect","MSUserSelect","OUserSelect"];(function(t){var e=rR,n=vh.exports;t.exports=function(i,r,a){var s=i[r];if(!!s){var l=[];if(Object.keys(s).forEach(function(o){e.indexOf(o)===-1&&l.push(o)}),l.length)throw new Error("Prop "+r+" passed to "+a+". Has invalid keys "+l.join(", "))}},t.exports.isRequired=function(i,r,a){if(!i[r])throw new Error("Prop "+r+" passed to "+a+" is required");return t.exports(i,r,a)},t.exports.supportingArrays=n.oneOfType([n.arrayOf(t.exports),t.exports])})(mE);var Lo=mE.exports;function yE(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);t!=null&&this.setState(t)}function gE(t){function e(n){var i=this.constructor.getDerivedStateFromProps(t,n);return i!=null?i:null}this.setState(e.bind(this))}function TE(t,e){try{var n=this.props,i=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,i)}finally{this.props=n,this.state=i}}yE.__suppressDeprecationWarning=!0;gE.__suppressDeprecationWarning=!0;TE.__suppressDeprecationWarning=!0;function sR(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return t;var n=null,i=null,r=null;if(typeof e.componentWillMount=="function"?n="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(n="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?i="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(i="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?r="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(r="UNSAFE_componentWillUpdate"),n!==null||i!==null||r!==null){var a=t.displayName||t.name,s=typeof t.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+a+" uses "+s+" but also contains the following legacy lifecycles:"+(n!==null?`
  `+n:"")+(i!==null?`
  `+i:"")+(r!==null?`
  `+r:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof t.getDerivedStateFromProps=="function"&&(e.componentWillMount=yE,e.componentWillReceiveProps=gE),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=TE;var l=e.componentDidUpdate;e.componentDidUpdate=function(u,f,y){var p=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:y;l.call(this,u,f,p)}}return t}function R_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H1(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function O_(t,e,n){return e&&H1(t.prototype,e),n&&H1(t,n),t}function _E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function wy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y1(Object(n),!0).forEach(function(i){_E(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y1(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function x_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u0(t,e)}function Dp(t){return Dp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Dp(t)}function u0(t,e){return u0=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},u0(t,e)}function aR(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function zl(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oR(t,e){return e&&(typeof e=="object"||typeof e=="function")?e:zl(t)}function L_(t){return function(){var e=Dp(t),n;if(aR()){var i=Dp(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return oR(this,n)}}var Pp=function(t){x_(n,t);var e=L_(n);function n(){return R_(this,n),e.apply(this,arguments)}return O_(n,[{key:"render",value:function(){var r=this.props,a=r.children,s=r.className,l=r.split,o=r.style,u=r.size,f=r.eleRef,y=["Pane",l,s],p={flex:1,position:"relative",outline:"none"};return u!==void 0&&(l==="vertical"?p.width=u:(p.height=u,p.display="flex"),p.flex="none"),p=Object.assign({},p,o||{}),Ut.createElement("div",{ref:f,className:y.join(" "),style:p},a)}}]),n}(Ut.PureComponent);Pp.propTypes={className:Re.string.isRequired,children:Re.node.isRequired,size:Re.oneOfType([Re.string,Re.number]),split:Re.oneOf(["vertical","horizontal"]),style:Lo,eleRef:Re.func};Pp.defaultProps={};var vE="Resizer",z_=function(t){x_(n,t);var e=L_(n);function n(){return R_(this,n),e.apply(this,arguments)}return O_(n,[{key:"render",value:function(){var r=this.props,a=r.className,s=r.onClick,l=r.onDoubleClick,o=r.onMouseDown,u=r.onTouchEnd,f=r.onTouchStart,y=r.resizerClassName,p=r.split,b=r.style,v=[y,p,a];return Ut.createElement("span",{role:"presentation",className:v.join(" "),style:b,onMouseDown:function(V){return o(V)},onTouchStart:function(V){V.preventDefault(),f(V)},onTouchEnd:function(V){V.preventDefault(),u(V)},onClick:function(V){s&&(V.preventDefault(),s(V))},onDoubleClick:function(V){l&&(V.preventDefault(),l(V))}})}}]),n}(Ut.Component);z_.propTypes={className:Re.string.isRequired,onClick:Re.func,onDoubleClick:Re.func,onMouseDown:Re.func.isRequired,onTouchStart:Re.func.isRequired,onTouchEnd:Re.func.isRequired,split:Re.oneOf(["vertical","horizontal"]),style:Lo,resizerClassName:Re.string.isRequired};z_.defaultProps={resizerClassName:vE};function Q1(t,e){if(t.selection)t.selection.empty();else try{e.getSelection().removeAllRanges()}catch{}}function J1(t,e,n,i){if(typeof i=="number"){var r=typeof e=="number"?e:0,a=typeof n=="number"&&n>=0?n:1/0;return Math.max(r,Math.min(a,i))}return t!==void 0?t:e}function lR(t){return Ut.Children.toArray(t).filter(function(e){return e})}var lc=function(t){x_(n,t);var e=L_(n);function n(i){var r;R_(this,n),r=e.call(this,i),r.onMouseDown=r.onMouseDown.bind(zl(r)),r.onTouchStart=r.onTouchStart.bind(zl(r)),r.onMouseMove=r.onMouseMove.bind(zl(r)),r.onTouchMove=r.onTouchMove.bind(zl(r)),r.onMouseUp=r.onMouseUp.bind(zl(r));var a=i.size,s=i.defaultSize,l=i.minSize,o=i.maxSize,u=i.primary,f=a!==void 0?a:J1(s,l,o,null);return r.state={active:!1,resized:!1,pane1Size:u==="first"?f:void 0,pane2Size:u==="second"?f:void 0,instanceProps:{size:a}},r}return O_(n,[{key:"componentDidMount",value:function(){document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("touchmove",this.onTouchMove),this.setState(n.getSizeUpdate(this.props,this.state))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("touchmove",this.onTouchMove)}},{key:"onMouseDown",value:function(r){var a=Object.assign({},r,{touches:[{clientX:r.clientX,clientY:r.clientY}]});this.onTouchStart(a)}},{key:"onTouchStart",value:function(r){var a=this.props,s=a.allowResize,l=a.onDragStarted,o=a.split;if(s){Q1(document,window);var u=o==="vertical"?r.touches[0].clientX:r.touches[0].clientY;typeof l=="function"&&l(),this.setState({active:!0,position:u})}}},{key:"onMouseMove",value:function(r){var a=Object.assign({},r,{touches:[{clientX:r.clientX,clientY:r.clientY}]});this.onTouchMove(a)}},{key:"onTouchMove",value:function(r){var a=this.props,s=a.allowResize,l=a.maxSize,o=a.minSize,u=a.onChange,f=a.split,y=a.step,p=this.state,b=p.active,v=p.position;if(s&&b){Q1(document,window);var m=this.props.primary==="first",V=m?this.pane1:this.pane2,F=m?this.pane2:this.pane1;if(V){var P=V,G=F;if(P.getBoundingClientRect){var te=P.getBoundingClientRect().width,q=P.getBoundingClientRect().height,U=f==="vertical"?r.touches[0].clientX:r.touches[0].clientY,D=f==="vertical"?te:q,M=v-U;if(y){if(Math.abs(M)<y)return;M=~~(M/y)*y}var T=m?M:-M,N=parseInt(window.getComputedStyle(P).order),J=parseInt(window.getComputedStyle(G).order);N>J&&(T=-T);var L=l;if(l!==void 0&&l<=0){var ce=this.splitPane;f==="vertical"?L=ce.getBoundingClientRect().width+l:L=ce.getBoundingClientRect().height+l}var ue=D-T,W=v-M;ue<o?ue=o:l!==void 0&&ue>L?ue=L:this.setState({position:W,resized:!0}),u&&u(ue),this.setState(_E({draggedSize:ue},m?"pane1Size":"pane2Size",ue))}}}}},{key:"onMouseUp",value:function(){var r=this.props,a=r.allowResize,s=r.onDragFinished,l=this.state,o=l.active,u=l.draggedSize;a&&o&&(typeof s=="function"&&s(u),this.setState({active:!1}))}},{key:"render",value:function(){var r=this,a=this.props,s=a.allowResize,l=a.children,o=a.className,u=a.onResizerClick,f=a.onResizerDoubleClick,y=a.paneClassName,p=a.pane1ClassName,b=a.pane2ClassName,v=a.paneStyle,m=a.pane1Style,V=a.pane2Style,F=a.resizerClassName,P=a.resizerStyle,G=a.split,te=a.style,q=this.state,U=q.pane1Size,D=q.pane2Size,M=s?"":"disabled",T=F&&"".concat(F," ").concat(vE),N=lR(l),J=wy({display:"flex",flex:1,height:"100%",position:"absolute",outline:"none",overflow:"hidden",MozUserSelect:"text",WebkitUserSelect:"text",msUserSelect:"text",userSelect:"text"},te);G==="vertical"?Object.assign(J,{flexDirection:"row",left:0,right:0}):Object.assign(J,{bottom:0,flexDirection:"column",minHeight:"100%",top:0,width:"100%"});var L=["SplitPane",o,G,M],ce=wy({},v,{},m),ue=wy({},v,{},V),W=["Pane1",y,p].join(" "),Y=["Pane2",y,b].join(" ");return Ut.createElement("div",{className:L.join(" "),ref:function(H){r.splitPane=H},style:J},Ut.createElement(Pp,{className:W,key:"pane1",eleRef:function(H){r.pane1=H},size:U,split:G,style:ce},N[0]),Ut.createElement(z_,{className:M,onClick:u,onDoubleClick:f,onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onTouchEnd:this.onMouseUp,key:"resizer",resizerClassName:T,split:G,style:P||{}}),Ut.createElement(Pp,{className:Y,key:"pane2",eleRef:function(H){r.pane2=H},size:D,split:G,style:ue},N[1]))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return n.getSizeUpdate(r,a)}},{key:"getSizeUpdate",value:function(r,a){var s={},l=a.instanceProps;if(l.size===r.size&&r.size!==void 0)return{};var o=r.size!==void 0?r.size:J1(r.defaultSize,r.minSize,r.maxSize,a.draggedSize);r.size!==void 0&&(s.draggedSize=o);var u=r.primary==="first";return s[u?"pane1Size":"pane2Size"]=o,s[u?"pane2Size":"pane1Size"]=void 0,s.instanceProps={size:r.size},s}}]),n}(Ut.Component);lc.propTypes={allowResize:Re.bool,children:Re.arrayOf(Re.node).isRequired,className:Re.string,primary:Re.oneOf(["first","second"]),minSize:Re.oneOfType([Re.string,Re.number]),maxSize:Re.oneOfType([Re.string,Re.number]),defaultSize:Re.oneOfType([Re.string,Re.number]),size:Re.oneOfType([Re.string,Re.number]),split:Re.oneOf(["vertical","horizontal"]),onDragStarted:Re.func,onDragFinished:Re.func,onChange:Re.func,onResizerClick:Re.func,onResizerDoubleClick:Re.func,style:Lo,resizerStyle:Lo,paneClassName:Re.string,pane1ClassName:Re.string,pane2ClassName:Re.string,paneStyle:Lo,pane1Style:Lo,pane2Style:Lo,resizerClassName:Re.string,step:Re.number};lc.defaultProps={allowResize:!0,minSize:50,primary:"first",split:"vertical",paneClassName:"",pane1ClassName:"",pane2ClassName:""};sR(lc);var d0={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(b){for(var v=1;v<arguments.length;v++){var m=arguments[v];for(var V in m)Object.prototype.hasOwnProperty.call(m,V)&&(b[V]=m[V])}return b},i=function(){function b(v,m){for(var V=0;V<m.length;V++){var F=m[V];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(v,F.key,F)}}return function(v,m,V){return m&&b(v.prototype,m),V&&b(v,V),v}}(),r=function(v,m,V){var F=!0;e:for(;F;){var P=v,G=m,te=V;F=!1,P===null&&(P=Function.prototype);var q=Object.getOwnPropertyDescriptor(P,G);if(q===void 0){var U=Object.getPrototypeOf(P);if(U===null)return;v=U,m=G,V=te,F=!0,q=U=void 0;continue e}else{if("value"in q)return q.value;var D=q.get;return D===void 0?void 0:D.call(te)}}};function a(b){return b&&b.__esModule?b:{default:b}}function s(b,v){var m={};for(var V in b)v.indexOf(V)>=0||!Object.prototype.hasOwnProperty.call(b,V)||(m[V]=b[V]);return m}function l(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function o(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var u=rn.exports,f=a(u),y=vh.exports;a(y);var p=function(b){o(v,b);function v(m){l(this,v),r(Object.getPrototypeOf(v.prototype),"constructor",this).call(this,m),this.state={collapsed:m.defaultCollapsed},this.handleClick=this.handleClick.bind(this)}return i(v,[{key:"handleClick",value:function(){if(this.setState({collapsed:!this.state.collapsed}),this.props.onClick){var V;(V=this.props).onClick.apply(V,arguments)}}},{key:"render",value:function(){var V=this.props,F=V.collapsed,P=F===void 0?this.state.collapsed:F,G=V.className,te=G===void 0?"":G,q=V.itemClassName,U=q===void 0?"":q,D=V.treeViewClassName,M=D===void 0?"":D,T=V.childrenClassName,N=T===void 0?"":T,J=V.nodeLabel,L=V.children;V.defaultCollapsed;var ce=s(V,["collapsed","className","itemClassName","treeViewClassName","childrenClassName","nodeLabel","children","defaultCollapsed"]),ue="tree-view_arrow",W="tree-view_children";P&&(ue+=" tree-view_arrow-collapsed",W+=" tree-view_children-collapsed");var Y=f.default.createElement("div",n({},ce,{className:te+" "+ue,onClick:this.handleClick}));return f.default.createElement("div",{className:"tree-view "+M},f.default.createElement("div",{className:"tree-view_item "+U},Y,J),f.default.createElement("div",{className:W+" "+N},P?null:L))}}]),v}(f.default.PureComponent);e.default=p,t.exports=e.default})(d0,d0.exports);var cR=xA(d0.exports),X1=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:{},zs=[],Hr=[],uR=typeof Uint8Array!="undefined"?Uint8Array:Array,U_=!1;function bE(){U_=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)zs[e]=t[e],Hr[t.charCodeAt(e)]=e;Hr["-".charCodeAt(0)]=62,Hr["_".charCodeAt(0)]=63}function dR(t){U_||bE();var e,n,i,r,a,s,l=t.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a=t[l-2]==="="?2:t[l-1]==="="?1:0,s=new uR(l*3/4-a),i=a>0?l-4:l;var o=0;for(e=0,n=0;e<i;e+=4,n+=3)r=Hr[t.charCodeAt(e)]<<18|Hr[t.charCodeAt(e+1)]<<12|Hr[t.charCodeAt(e+2)]<<6|Hr[t.charCodeAt(e+3)],s[o++]=r>>16&255,s[o++]=r>>8&255,s[o++]=r&255;return a===2?(r=Hr[t.charCodeAt(e)]<<2|Hr[t.charCodeAt(e+1)]>>4,s[o++]=r&255):a===1&&(r=Hr[t.charCodeAt(e)]<<10|Hr[t.charCodeAt(e+1)]<<4|Hr[t.charCodeAt(e+2)]>>2,s[o++]=r>>8&255,s[o++]=r&255),s}function fR(t){return zs[t>>18&63]+zs[t>>12&63]+zs[t>>6&63]+zs[t&63]}function pR(t,e,n){for(var i,r=[],a=e;a<n;a+=3)i=(t[a]<<16)+(t[a+1]<<8)+t[a+2],r.push(fR(i));return r.join("")}function Z1(t){U_||bE();for(var e,n=t.length,i=n%3,r="",a=[],s=16383,l=0,o=n-i;l<o;l+=s)a.push(pR(t,l,l+s>o?o:l+s));return i===1?(e=t[n-1],r+=zs[e>>2],r+=zs[e<<4&63],r+="=="):i===2&&(e=(t[n-2]<<8)+t[n-1],r+=zs[e>>10],r+=zs[e>>4&63],r+=zs[e<<2&63],r+="="),a.push(r),a.join("")}function bh(t,e,n,i,r){var a,s,l=r*8-i-1,o=(1<<l)-1,u=o>>1,f=-7,y=n?r-1:0,p=n?-1:1,b=t[e+y];for(y+=p,a=b&(1<<-f)-1,b>>=-f,f+=l;f>0;a=a*256+t[e+y],y+=p,f-=8);for(s=a&(1<<-f)-1,a>>=-f,f+=i;f>0;s=s*256+t[e+y],y+=p,f-=8);if(a===0)a=1-u;else{if(a===o)return s?NaN:(b?-1:1)*(1/0);s=s+Math.pow(2,i),a=a-u}return(b?-1:1)*s*Math.pow(2,a-i)}function SE(t,e,n,i,r,a){var s,l,o,u=a*8-r-1,f=(1<<u)-1,y=f>>1,p=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=i?0:a-1,v=i?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(o=Math.pow(2,-s))<1&&(s--,o*=2),s+y>=1?e+=p/o:e+=p*Math.pow(2,1-y),e*o>=2&&(s++,o/=2),s+y>=f?(l=0,s=f):s+y>=1?(l=(e*o-1)*Math.pow(2,r),s=s+y):(l=e*Math.pow(2,y-1)*Math.pow(2,r),s=0));r>=8;t[n+b]=l&255,b+=v,l/=256,r-=8);for(s=s<<r|l,u+=r;u>0;t[n+b]=s&255,b+=v,s/=256,u-=8);t[n+b-v]|=m*128}var hR={}.toString,IE=Array.isArray||function(t){return hR.call(t)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var mR=50;ot.TYPED_ARRAY_SUPPORT=X1.TYPED_ARRAY_SUPPORT!==void 0?X1.TYPED_ARRAY_SUPPORT:!0;Ap();function Ap(){return ot.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ia(t,e){if(Ap()<e)throw new RangeError("Invalid typed array length");return ot.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=ot.prototype):(t===null&&(t=new ot(e)),t.length=e),t}function ot(t,e,n){if(!ot.TYPED_ARRAY_SUPPORT&&!(this instanceof ot))return new ot(t,e,n);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return V_(this,t)}return CE(this,t,e,n)}ot.poolSize=8192;ot._augment=function(t){return t.__proto__=ot.prototype,t};function CE(t,e,n,i){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&e instanceof ArrayBuffer?TR(t,e,n,i):typeof e=="string"?gR(t,e,n):_R(t,e)}ot.from=function(t,e,n){return CE(null,t,e,n)};ot.TYPED_ARRAY_SUPPORT&&(ot.prototype.__proto__=Uint8Array.prototype,ot.__proto__=Uint8Array);function wE(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function yR(t,e,n,i){return wE(e),e<=0?ia(t,e):n!==void 0?typeof i=="string"?ia(t,e).fill(n,i):ia(t,e).fill(n):ia(t,e)}ot.alloc=function(t,e,n){return yR(null,t,e,n)};function V_(t,e){if(wE(e),t=ia(t,e<0?0:B_(e)|0),!ot.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}ot.allocUnsafe=function(t){return V_(null,t)};ot.allocUnsafeSlow=function(t){return V_(null,t)};function gR(t,e,n){if((typeof n!="string"||n==="")&&(n="utf8"),!ot.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=EE(e,n)|0;t=ia(t,i);var r=t.write(e,n);return r!==i&&(t=t.slice(0,r)),t}function f0(t,e){var n=e.length<0?0:B_(e.length)|0;t=ia(t,n);for(var i=0;i<n;i+=1)t[i]=e[i]&255;return t}function TR(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return n===void 0&&i===void 0?e=new Uint8Array(e):i===void 0?e=new Uint8Array(e,n):e=new Uint8Array(e,n,i),ot.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=ot.prototype):t=f0(t,e),t}function _R(t,e){if(js(e)){var n=B_(e.length)|0;return t=ia(t,n),t.length===0||e.copy(t,0,0,n),t}if(e){if(typeof ArrayBuffer!="undefined"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||zR(e.length)?ia(t,0):f0(t,e);if(e.type==="Buffer"&&IE(e.data))return f0(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function B_(t){if(t>=Ap())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ap().toString(16)+" bytes");return t|0}ot.isBuffer=UR;function js(t){return!!(t!=null&&t._isBuffer)}ot.compare=function(e,n){if(!js(e)||!js(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var i=e.length,r=n.length,a=0,s=Math.min(i,r);a<s;++a)if(e[a]!==n[a]){i=e[a],r=n[a];break}return i<r?-1:r<i?1:0};ot.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};ot.concat=function(e,n){if(!IE(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return ot.alloc(0);var i;if(n===void 0)for(n=0,i=0;i<e.length;++i)n+=e[i].length;var r=ot.allocUnsafe(n),a=0;for(i=0;i<e.length;++i){var s=e[i];if(!js(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,a),a+=s.length}return r};function EE(t,e){if(js(t))return t.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var n=t.length;if(n===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Mp(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return NE(t).length;default:if(i)return Mp(t).length;e=(""+e).toLowerCase(),i=!0}}ot.byteLength=EE;function vR(t,e,n){var i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,e>>>=0,n<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return PR(this,e,n);case"utf8":case"utf-8":return DE(this,e,n);case"ascii":return kR(this,e,n);case"latin1":case"binary":return DR(this,e,n);case"base64":return ER(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return AR(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}ot.prototype._isBuffer=!0;function $o(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}ot.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<e;n+=2)$o(this,n,n+1);return this};ot.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<e;n+=4)$o(this,n,n+3),$o(this,n+1,n+2);return this};ot.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<e;n+=8)$o(this,n,n+7),$o(this,n+1,n+6),$o(this,n+2,n+5),$o(this,n+3,n+4);return this};ot.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?DE(this,0,e):vR.apply(this,arguments)};ot.prototype.equals=function(e){if(!js(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:ot.compare(this,e)===0};ot.prototype.inspect=function(){var e="",n=mR;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"};ot.prototype.compare=function(e,n,i,r,a){if(!js(e))throw new TypeError("Argument must be a Buffer");if(n===void 0&&(n=0),i===void 0&&(i=e?e.length:0),r===void 0&&(r=0),a===void 0&&(a=this.length),n<0||i>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&n>=i)return 0;if(r>=a)return-1;if(n>=i)return 1;if(n>>>=0,i>>>=0,r>>>=0,a>>>=0,this===e)return 0;for(var s=a-r,l=i-n,o=Math.min(s,l),u=this.slice(r,a),f=e.slice(n,i),y=0;y<o;++y)if(u[y]!==f[y]){s=u[y],l=f[y];break}return s<l?-1:l<s?1:0};function FE(t,e,n,i,r){if(t.length===0)return-1;if(typeof n=="string"?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0)if(r)n=0;else return-1;if(typeof e=="string"&&(e=ot.from(e,i)),js(e))return e.length===0?-1:eS(t,e,n,i,r);if(typeof e=="number")return e=e&255,ot.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):eS(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function eS(t,e,n,i,r){var a=1,s=t.length,l=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,n/=2}function o(b,v){return a===1?b[v]:b.readUInt16BE(v*a)}var u;if(r){var f=-1;for(u=n;u<s;u++)if(o(t,u)===o(e,f===-1?0:u-f)){if(f===-1&&(f=u),u-f+1===l)return f*a}else f!==-1&&(u-=u-f),f=-1}else for(n+l>s&&(n=s-l),u=n;u>=0;u--){for(var y=!0,p=0;p<l;p++)if(o(t,u+p)!==o(e,p)){y=!1;break}if(y)return u}return-1}ot.prototype.includes=function(e,n,i){return this.indexOf(e,n,i)!==-1};ot.prototype.indexOf=function(e,n,i){return FE(this,e,n,i,!0)};ot.prototype.lastIndexOf=function(e,n,i){return FE(this,e,n,i,!1)};function bR(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var a=e.length;if(a%2!==0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var s=0;s<i;++s){var l=parseInt(e.substr(s*2,2),16);if(isNaN(l))return s;t[n+s]=l}return s}function SR(t,e,n,i){return Ch(Mp(e,t.length-n),t,n,i)}function kE(t,e,n,i){return Ch(xR(e),t,n,i)}function IR(t,e,n,i){return kE(t,e,n,i)}function CR(t,e,n,i){return Ch(NE(e),t,n,i)}function wR(t,e,n,i){return Ch(LR(e,t.length-n),t,n,i)}ot.prototype.write=function(e,n,i,r){if(n===void 0)r="utf8",i=this.length,n=0;else if(i===void 0&&typeof n=="string")r=n,i=this.length,n=0;else if(isFinite(n))n=n|0,isFinite(i)?(i=i|0,r===void 0&&(r="utf8")):(r=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var a=this.length-n;if((i===void 0||i>a)&&(i=a),e.length>0&&(i<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return bR(this,e,n,i);case"utf8":case"utf-8":return SR(this,e,n,i);case"ascii":return kE(this,e,n,i);case"latin1":case"binary":return IR(this,e,n,i);case"base64":return CR(this,e,n,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return wR(this,e,n,i);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}};ot.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ER(t,e,n){return e===0&&n===t.length?Z1(t):Z1(t.slice(e,n))}function DE(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var a=t[r],s=null,l=a>239?4:a>223?3:a>191?2:1;if(r+l<=n){var o,u,f,y;switch(l){case 1:a<128&&(s=a);break;case 2:o=t[r+1],(o&192)===128&&(y=(a&31)<<6|o&63,y>127&&(s=y));break;case 3:o=t[r+1],u=t[r+2],(o&192)===128&&(u&192)===128&&(y=(a&15)<<12|(o&63)<<6|u&63,y>2047&&(y<55296||y>57343)&&(s=y));break;case 4:o=t[r+1],u=t[r+2],f=t[r+3],(o&192)===128&&(u&192)===128&&(f&192)===128&&(y=(a&15)<<18|(o&63)<<12|(u&63)<<6|f&63,y>65535&&y<1114112&&(s=y))}}s===null?(s=65533,l=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|s&1023),i.push(s),r+=l}return FR(i)}var tS=4096;function FR(t){var e=t.length;if(e<=tS)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=tS));return n}function kR(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]&127);return i}function DR(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function PR(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",a=e;a<n;++a)r+=OR(t[a]);return r}function AR(t,e,n){for(var i=t.slice(e,n),r="",a=0;a<i.length;a+=2)r+=String.fromCharCode(i[a]+i[a+1]*256);return r}ot.prototype.slice=function(e,n){var i=this.length;e=~~e,n=n===void 0?i:~~n,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),n<0?(n+=i,n<0&&(n=0)):n>i&&(n=i),n<e&&(n=e);var r;if(ot.TYPED_ARRAY_SUPPORT)r=this.subarray(e,n),r.__proto__=ot.prototype;else{var a=n-e;r=new ot(a,void 0);for(var s=0;s<a;++s)r[s]=this[s+e]}return r};function wi(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}ot.prototype.readUIntLE=function(e,n,i){e=e|0,n=n|0,i||wi(e,n,this.length);for(var r=this[e],a=1,s=0;++s<n&&(a*=256);)r+=this[e+s]*a;return r};ot.prototype.readUIntBE=function(e,n,i){e=e|0,n=n|0,i||wi(e,n,this.length);for(var r=this[e+--n],a=1;n>0&&(a*=256);)r+=this[e+--n]*a;return r};ot.prototype.readUInt8=function(e,n){return n||wi(e,1,this.length),this[e]};ot.prototype.readUInt16LE=function(e,n){return n||wi(e,2,this.length),this[e]|this[e+1]<<8};ot.prototype.readUInt16BE=function(e,n){return n||wi(e,2,this.length),this[e]<<8|this[e+1]};ot.prototype.readUInt32LE=function(e,n){return n||wi(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};ot.prototype.readUInt32BE=function(e,n){return n||wi(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};ot.prototype.readIntLE=function(e,n,i){e=e|0,n=n|0,i||wi(e,n,this.length);for(var r=this[e],a=1,s=0;++s<n&&(a*=256);)r+=this[e+s]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*n)),r};ot.prototype.readIntBE=function(e,n,i){e=e|0,n=n|0,i||wi(e,n,this.length);for(var r=n,a=1,s=this[e+--r];r>0&&(a*=256);)s+=this[e+--r]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*n)),s};ot.prototype.readInt8=function(e,n){return n||wi(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};ot.prototype.readInt16LE=function(e,n){n||wi(e,2,this.length);var i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};ot.prototype.readInt16BE=function(e,n){n||wi(e,2,this.length);var i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};ot.prototype.readInt32LE=function(e,n){return n||wi(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};ot.prototype.readInt32BE=function(e,n){return n||wi(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};ot.prototype.readFloatLE=function(e,n){return n||wi(e,4,this.length),bh(this,e,!0,23,4)};ot.prototype.readFloatBE=function(e,n){return n||wi(e,4,this.length),bh(this,e,!1,23,4)};ot.prototype.readDoubleLE=function(e,n){return n||wi(e,8,this.length),bh(this,e,!0,52,8)};ot.prototype.readDoubleBE=function(e,n){return n||wi(e,8,this.length),bh(this,e,!1,52,8)};function _r(t,e,n,i,r,a){if(!js(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<a)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}ot.prototype.writeUIntLE=function(e,n,i,r){if(e=+e,n=n|0,i=i|0,!r){var a=Math.pow(2,8*i)-1;_r(this,e,n,i,a,0)}var s=1,l=0;for(this[n]=e&255;++l<i&&(s*=256);)this[n+l]=e/s&255;return n+i};ot.prototype.writeUIntBE=function(e,n,i,r){if(e=+e,n=n|0,i=i|0,!r){var a=Math.pow(2,8*i)-1;_r(this,e,n,i,a,0)}var s=i-1,l=1;for(this[n+s]=e&255;--s>=0&&(l*=256);)this[n+s]=e/l&255;return n+i};ot.prototype.writeUInt8=function(e,n,i){return e=+e,n=n|0,i||_r(this,e,n,1,255,0),ot.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=e&255,n+1};function Sh(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,a=Math.min(t.length-n,2);r<a;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>(i?r:1-r)*8}ot.prototype.writeUInt16LE=function(e,n,i){return e=+e,n=n|0,i||_r(this,e,n,2,65535,0),ot.TYPED_ARRAY_SUPPORT?(this[n]=e&255,this[n+1]=e>>>8):Sh(this,e,n,!0),n+2};ot.prototype.writeUInt16BE=function(e,n,i){return e=+e,n=n|0,i||_r(this,e,n,2,65535,0),ot.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=e&255):Sh(this,e,n,!1),n+2};function Ih(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,a=Math.min(t.length-n,4);r<a;++r)t[n+r]=e>>>(i?r:3-r)*8&255}ot.prototype.writeUInt32LE=function(e,n,i){return e=+e,n=n|0,i||_r(this,e,n,4,4294967295,0),ot.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=e&255):Ih(this,e,n,!0),n+4};ot.prototype.writeUInt32BE=function(e,n,i){return e=+e,n=n|0,i||_r(this,e,n,4,4294967295,0),ot.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e&255):Ih(this,e,n,!1),n+4};ot.prototype.writeIntLE=function(e,n,i,r){if(e=+e,n=n|0,!r){var a=Math.pow(2,8*i-1);_r(this,e,n,i,a-1,-a)}var s=0,l=1,o=0;for(this[n]=e&255;++s<i&&(l*=256);)e<0&&o===0&&this[n+s-1]!==0&&(o=1),this[n+s]=(e/l>>0)-o&255;return n+i};ot.prototype.writeIntBE=function(e,n,i,r){if(e=+e,n=n|0,!r){var a=Math.pow(2,8*i-1);_r(this,e,n,i,a-1,-a)}var s=i-1,l=1,o=0;for(this[n+s]=e&255;--s>=0&&(l*=256);)e<0&&o===0&&this[n+s+1]!==0&&(o=1),this[n+s]=(e/l>>0)-o&255;return n+i};ot.prototype.writeInt8=function(e,n,i){return e=+e,n=n|0,i||_r(this,e,n,1,127,-128),ot.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[n]=e&255,n+1};ot.prototype.writeInt16LE=function(e,n,i){return e=+e,n=n|0,i||_r(this,e,n,2,32767,-32768),ot.TYPED_ARRAY_SUPPORT?(this[n]=e&255,this[n+1]=e>>>8):Sh(this,e,n,!0),n+2};ot.prototype.writeInt16BE=function(e,n,i){return e=+e,n=n|0,i||_r(this,e,n,2,32767,-32768),ot.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=e&255):Sh(this,e,n,!1),n+2};ot.prototype.writeInt32LE=function(e,n,i){return e=+e,n=n|0,i||_r(this,e,n,4,2147483647,-2147483648),ot.TYPED_ARRAY_SUPPORT?(this[n]=e&255,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):Ih(this,e,n,!0),n+4};ot.prototype.writeInt32BE=function(e,n,i){return e=+e,n=n|0,i||_r(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),ot.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e&255):Ih(this,e,n,!1),n+4};function PE(t,e,n,i,r,a){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function AE(t,e,n,i,r){return r||PE(t,e,n,4),SE(t,e,n,i,23,4),n+4}ot.prototype.writeFloatLE=function(e,n,i){return AE(this,e,n,!0,i)};ot.prototype.writeFloatBE=function(e,n,i){return AE(this,e,n,!1,i)};function ME(t,e,n,i,r){return r||PE(t,e,n,8),SE(t,e,n,i,52,8),n+8}ot.prototype.writeDoubleLE=function(e,n,i){return ME(this,e,n,!0,i)};ot.prototype.writeDoubleBE=function(e,n,i){return ME(this,e,n,!1,i)};ot.prototype.copy=function(e,n,i,r){if(i||(i=0),!r&&r!==0&&(r=this.length),n>=e.length&&(n=e.length),n||(n=0),r>0&&r<i&&(r=i),r===i||e.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-n<r-i&&(r=e.length-n+i);var a=r-i,s;if(this===e&&i<n&&n<r)for(s=a-1;s>=0;--s)e[s+n]=this[s+i];else if(a<1e3||!ot.TYPED_ARRAY_SUPPORT)for(s=0;s<a;++s)e[s+n]=this[s+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+a),n);return a};ot.prototype.fill=function(e,n,i,r){if(typeof e=="string"){if(typeof n=="string"?(r=n,n=0,i=this.length):typeof i=="string"&&(r=i,i=this.length),e.length===1){var a=e.charCodeAt(0);a<256&&(e=a)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!ot.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof e=="number"&&(e=e&255);if(n<0||this.length<n||this.length<i)throw new RangeError("Out of range index");if(i<=n)return this;n=n>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);var s;if(typeof e=="number")for(s=n;s<i;++s)this[s]=e;else{var l=js(e)?e:Mp(new ot(e,r).toString()),o=l.length;for(s=0;s<i-n;++s)this[s+n]=l[s%o]}return this};var MR=/[^+\/0-9A-Za-z-_]/g;function NR(t){if(t=RR(t).replace(MR,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function RR(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function OR(t){return t<16?"0"+t.toString(16):t.toString(16)}function Mp(t,e){e=e||1/0;for(var n,i=t.length,r=null,a=[],s=0;s<i;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(s+1===i){(e-=3)>-1&&a.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(e-=3)>-1&&a.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,n&63|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return a}function xR(t){for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n)&255);return e}function LR(t,e){for(var n,i,r,a=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),i=n>>8,r=n%256,a.push(r),a.push(i);return a}function NE(t){return dR(NR(t))}function Ch(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function zR(t){return t!==t}function UR(t){return t!=null&&(!!t._isBuffer||RE(t)||VR(t))}function RE(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function VR(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&RE(t.slice(0,0))}var OE={};function xE(){throw new Error("setTimeout has not been defined")}function LE(){throw new Error("clearTimeout has not been defined")}var Aa=xE,Ma=LE;typeof global.setTimeout=="function"&&(Aa=setTimeout);typeof global.clearTimeout=="function"&&(Ma=clearTimeout);function zE(t){if(Aa===setTimeout)return setTimeout(t,0);if((Aa===xE||!Aa)&&setTimeout)return Aa=setTimeout,setTimeout(t,0);try{return Aa(t,0)}catch{try{return Aa.call(null,t,0)}catch{return Aa.call(this,t,0)}}}function BR(t){if(Ma===clearTimeout)return clearTimeout(t);if((Ma===LE||!Ma)&&clearTimeout)return Ma=clearTimeout,clearTimeout(t);try{return Ma(t)}catch{try{return Ma.call(null,t)}catch{return Ma.call(this,t)}}}var ra=[],cc=!1,jo,tp=-1;function WR(){!cc||!jo||(cc=!1,jo.length?ra=jo.concat(ra):tp=-1,ra.length&&UE())}function UE(){if(!cc){var t=zE(WR);cc=!0;for(var e=ra.length;e;){for(jo=ra,ra=[];++tp<e;)jo&&jo[tp].run();tp=-1,e=ra.length}jo=null,cc=!1,BR(t)}}function $R(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];ra.push(new VE(t,e)),ra.length===1&&!cc&&zE(UE)}function VE(t,e){this.fun=t,this.array=e}VE.prototype.run=function(){this.fun.apply(null,this.array)};var jR="browser",qR="browser",GR=!0,KR={},HR=[],YR=[],QR="",JR={},XR={},ZR={};function pl(){}var e5=pl,t5=pl,n5=pl,i5=pl,r5=pl,s5=pl,a5=pl;function o5(t){throw new Error("process.binding is not supported")}function l5(){return"/"}function c5(t){throw new Error("process.chdir is not supported")}function u5(){return 0}var Ul=global.performance||{},d5=Ul.now||Ul.mozNow||Ul.msNow||Ul.oNow||Ul.webkitNow||function(){return new Date().getTime()};function f5(t){var e=d5.call(Ul)*.001,n=Math.floor(e),i=Math.floor(e%1*1e9);return t&&(n=n-t[0],i=i-t[1],i<0&&(n--,i+=1e9)),[n,i]}var p5=new Date;function h5(){var t=new Date,e=t-p5;return e/1e3}var xu={nextTick:$R,title:jR,browser:GR,env:KR,argv:HR,execArgv:YR,version:QR,versions:JR,on:e5,addListener:t5,once:n5,off:i5,removeListener:r5,removeAllListeners:s5,emit:a5,binding:o5,cwd:l5,chdir:c5,umask:u5,hrtime:f5,platform:qR,release:XR,config:ZR,uptime:h5},BE;BE=(()=>{var t={470:i=>{function r(l){if(typeof l!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(l))}function a(l,o){for(var u,f="",y=0,p=-1,b=0,v=0;v<=l.length;++v){if(v<l.length)u=l.charCodeAt(v);else{if(u===47)break;u=47}if(u===47){if(!(p===v-1||b===1))if(p!==v-1&&b===2){if(f.length<2||y!==2||f.charCodeAt(f.length-1)!==46||f.charCodeAt(f.length-2)!==46){if(f.length>2){var m=f.lastIndexOf("/");if(m!==f.length-1){m===-1?(f="",y=0):y=(f=f.slice(0,m)).length-1-f.lastIndexOf("/"),p=v,b=0;continue}}else if(f.length===2||f.length===1){f="",y=0,p=v,b=0;continue}}o&&(f.length>0?f+="/..":f="..",y=2)}else f.length>0?f+="/"+l.slice(p+1,v):f=l.slice(p+1,v),y=v-p-1;p=v,b=0}else u===46&&b!==-1?++b:b=-1}return f}var s={resolve:function(){for(var l,o="",u=!1,f=arguments.length-1;f>=-1&&!u;f--){var y;f>=0?y=arguments[f]:(l===void 0&&(l=xu.cwd()),y=l),r(y),y.length!==0&&(o=y+"/"+o,u=y.charCodeAt(0)===47)}return o=a(o,!u),u?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(l){if(r(l),l.length===0)return".";var o=l.charCodeAt(0)===47,u=l.charCodeAt(l.length-1)===47;return(l=a(l,!o)).length!==0||o||(l="."),l.length>0&&u&&(l+="/"),o?"/"+l:l},isAbsolute:function(l){return r(l),l.length>0&&l.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var l,o=0;o<arguments.length;++o){var u=arguments[o];r(u),u.length>0&&(l===void 0?l=u:l+="/"+u)}return l===void 0?".":s.normalize(l)},relative:function(l,o){if(r(l),r(o),l===o||(l=s.resolve(l))===(o=s.resolve(o)))return"";for(var u=1;u<l.length&&l.charCodeAt(u)===47;++u);for(var f=l.length,y=f-u,p=1;p<o.length&&o.charCodeAt(p)===47;++p);for(var b=o.length-p,v=y<b?y:b,m=-1,V=0;V<=v;++V){if(V===v){if(b>v){if(o.charCodeAt(p+V)===47)return o.slice(p+V+1);if(V===0)return o.slice(p+V)}else y>v&&(l.charCodeAt(u+V)===47?m=V:V===0&&(m=0));break}var F=l.charCodeAt(u+V);if(F!==o.charCodeAt(p+V))break;F===47&&(m=V)}var P="";for(V=u+m+1;V<=f;++V)V!==f&&l.charCodeAt(V)!==47||(P.length===0?P+="..":P+="/..");return P.length>0?P+o.slice(p+m):(p+=m,o.charCodeAt(p)===47&&++p,o.slice(p))},_makeLong:function(l){return l},dirname:function(l){if(r(l),l.length===0)return".";for(var o=l.charCodeAt(0),u=o===47,f=-1,y=!0,p=l.length-1;p>=1;--p)if((o=l.charCodeAt(p))===47){if(!y){f=p;break}}else y=!1;return f===-1?u?"/":".":u&&f===1?"//":l.slice(0,f)},basename:function(l,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');r(l);var u,f=0,y=-1,p=!0;if(o!==void 0&&o.length>0&&o.length<=l.length){if(o.length===l.length&&o===l)return"";var b=o.length-1,v=-1;for(u=l.length-1;u>=0;--u){var m=l.charCodeAt(u);if(m===47){if(!p){f=u+1;break}}else v===-1&&(p=!1,v=u+1),b>=0&&(m===o.charCodeAt(b)?--b==-1&&(y=u):(b=-1,y=v))}return f===y?y=v:y===-1&&(y=l.length),l.slice(f,y)}for(u=l.length-1;u>=0;--u)if(l.charCodeAt(u)===47){if(!p){f=u+1;break}}else y===-1&&(p=!1,y=u+1);return y===-1?"":l.slice(f,y)},extname:function(l){r(l);for(var o=-1,u=0,f=-1,y=!0,p=0,b=l.length-1;b>=0;--b){var v=l.charCodeAt(b);if(v!==47)f===-1&&(y=!1,f=b+1),v===46?o===-1?o=b:p!==1&&(p=1):o!==-1&&(p=-1);else if(!y){u=b+1;break}}return o===-1||f===-1||p===0||p===1&&o===f-1&&o===u+1?"":l.slice(o,f)},format:function(l){if(l===null||typeof l!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof l);return function(o,u){var f=u.dir||u.root,y=u.base||(u.name||"")+(u.ext||"");return f?f===u.root?f+y:f+"/"+y:y}(0,l)},parse:function(l){r(l);var o={root:"",dir:"",base:"",ext:"",name:""};if(l.length===0)return o;var u,f=l.charCodeAt(0),y=f===47;y?(o.root="/",u=1):u=0;for(var p=-1,b=0,v=-1,m=!0,V=l.length-1,F=0;V>=u;--V)if((f=l.charCodeAt(V))!==47)v===-1&&(m=!1,v=V+1),f===46?p===-1?p=V:F!==1&&(F=1):p!==-1&&(F=-1);else if(!m){b=V+1;break}return p===-1||v===-1||F===0||F===1&&p===v-1&&p===b+1?v!==-1&&(o.base=o.name=b===0&&y?l.slice(1,v):l.slice(b,v)):(b===0&&y?(o.name=l.slice(1,p),o.base=l.slice(1,v)):(o.name=l.slice(b,p),o.base=l.slice(b,v)),o.ext=l.slice(p,v)),b>0?o.dir=l.slice(0,b-1):y&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,i.exports=s},447:(i,r,a)=>{var s;if(a.r(r),a.d(r,{URI:()=>P,Utils:()=>ce}),typeof xu=="object")s=xu.platform==="win32";else if(typeof navigator=="object"){var l=navigator.userAgent;s=l.indexOf("Windows")>=0}var o,u,f=(o=function(ee,H){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(le,R){le.__proto__=R}||function(le,R){for(var ae in R)Object.prototype.hasOwnProperty.call(R,ae)&&(le[ae]=R[ae])})(ee,H)},function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function le(){this.constructor=ee}o(ee,H),ee.prototype=H===null?Object.create(H):(le.prototype=H.prototype,new le)}),y=/^\w[\w\d+.-]*$/,p=/^\//,b=/^\/\//;function v(ee,H){if(!ee.scheme&&H)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(ee.authority,'", path: "').concat(ee.path,'", query: "').concat(ee.query,'", fragment: "').concat(ee.fragment,'"}'));if(ee.scheme&&!y.test(ee.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(ee.path){if(ee.authority){if(!p.test(ee.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(b.test(ee.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var m="",V="/",F=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,P=function(){function ee(H,le,R,ae,re,d){d===void 0&&(d=!1),typeof H=="object"?(this.scheme=H.scheme||m,this.authority=H.authority||m,this.path=H.path||m,this.query=H.query||m,this.fragment=H.fragment||m):(this.scheme=function(k,oe){return k||oe?k:"file"}(H,d),this.authority=le||m,this.path=function(k,oe){switch(k){case"https":case"http":case"file":oe?oe[0]!==V&&(oe=V+oe):oe=V}return oe}(this.scheme,R||m),this.query=ae||m,this.fragment=re||m,v(this,d))}return ee.isUri=function(H){return H instanceof ee||!!H&&typeof H.authority=="string"&&typeof H.fragment=="string"&&typeof H.path=="string"&&typeof H.query=="string"&&typeof H.scheme=="string"&&typeof H.fsPath=="string"&&typeof H.with=="function"&&typeof H.toString=="function"},Object.defineProperty(ee.prototype,"fsPath",{get:function(){return M(this,!1)},enumerable:!1,configurable:!0}),ee.prototype.with=function(H){if(!H)return this;var le=H.scheme,R=H.authority,ae=H.path,re=H.query,d=H.fragment;return le===void 0?le=this.scheme:le===null&&(le=m),R===void 0?R=this.authority:R===null&&(R=m),ae===void 0?ae=this.path:ae===null&&(ae=m),re===void 0?re=this.query:re===null&&(re=m),d===void 0?d=this.fragment:d===null&&(d=m),le===this.scheme&&R===this.authority&&ae===this.path&&re===this.query&&d===this.fragment?this:new te(le,R,ae,re,d)},ee.parse=function(H,le){le===void 0&&(le=!1);var R=F.exec(H);return R?new te(R[2]||m,L(R[4]||m),L(R[5]||m),L(R[7]||m),L(R[9]||m),le):new te(m,m,m,m,m)},ee.file=function(H){var le=m;if(s&&(H=H.replace(/\\/g,V)),H[0]===V&&H[1]===V){var R=H.indexOf(V,2);R===-1?(le=H.substring(2),H=V):(le=H.substring(2,R),H=H.substring(R)||V)}return new te("file",le,H,m,m)},ee.from=function(H){var le=new te(H.scheme,H.authority,H.path,H.query,H.fragment);return v(le,!0),le},ee.prototype.toString=function(H){return H===void 0&&(H=!1),T(this,H)},ee.prototype.toJSON=function(){return this},ee.revive=function(H){if(H){if(H instanceof ee)return H;var le=new te(H);return le._formatted=H.external,le._fsPath=H._sep===G?H.fsPath:null,le}return H},ee}(),G=s?1:void 0,te=function(ee){function H(){var le=ee!==null&&ee.apply(this,arguments)||this;return le._formatted=null,le._fsPath=null,le}return f(H,ee),Object.defineProperty(H.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=M(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),H.prototype.toString=function(le){return le===void 0&&(le=!1),le?T(this,!0):(this._formatted||(this._formatted=T(this,!1)),this._formatted)},H.prototype.toJSON=function(){var le={$mid:1};return this._fsPath&&(le.fsPath=this._fsPath,le._sep=G),this._formatted&&(le.external=this._formatted),this.path&&(le.path=this.path),this.scheme&&(le.scheme=this.scheme),this.authority&&(le.authority=this.authority),this.query&&(le.query=this.query),this.fragment&&(le.fragment=this.fragment),le},H}(P),q=((u={})[58]="%3A",u[47]="%2F",u[63]="%3F",u[35]="%23",u[91]="%5B",u[93]="%5D",u[64]="%40",u[33]="%21",u[36]="%24",u[38]="%26",u[39]="%27",u[40]="%28",u[41]="%29",u[42]="%2A",u[43]="%2B",u[44]="%2C",u[59]="%3B",u[61]="%3D",u[32]="%20",u);function U(ee,H){for(var le=void 0,R=-1,ae=0;ae<ee.length;ae++){var re=ee.charCodeAt(ae);if(re>=97&&re<=122||re>=65&&re<=90||re>=48&&re<=57||re===45||re===46||re===95||re===126||H&&re===47)R!==-1&&(le+=encodeURIComponent(ee.substring(R,ae)),R=-1),le!==void 0&&(le+=ee.charAt(ae));else{le===void 0&&(le=ee.substr(0,ae));var d=q[re];d!==void 0?(R!==-1&&(le+=encodeURIComponent(ee.substring(R,ae)),R=-1),le+=d):R===-1&&(R=ae)}}return R!==-1&&(le+=encodeURIComponent(ee.substring(R))),le!==void 0?le:ee}function D(ee){for(var H=void 0,le=0;le<ee.length;le++){var R=ee.charCodeAt(le);R===35||R===63?(H===void 0&&(H=ee.substr(0,le)),H+=q[R]):H!==void 0&&(H+=ee[le])}return H!==void 0?H:ee}function M(ee,H){var le;return le=ee.authority&&ee.path.length>1&&ee.scheme==="file"?"//".concat(ee.authority).concat(ee.path):ee.path.charCodeAt(0)===47&&(ee.path.charCodeAt(1)>=65&&ee.path.charCodeAt(1)<=90||ee.path.charCodeAt(1)>=97&&ee.path.charCodeAt(1)<=122)&&ee.path.charCodeAt(2)===58?H?ee.path.substr(1):ee.path[1].toLowerCase()+ee.path.substr(2):ee.path,s&&(le=le.replace(/\//g,"\\")),le}function T(ee,H){var le=H?D:U,R="",ae=ee.scheme,re=ee.authority,d=ee.path,k=ee.query,oe=ee.fragment;if(ae&&(R+=ae,R+=":"),(re||ae==="file")&&(R+=V,R+=V),re){var ye=re.indexOf("@");if(ye!==-1){var E=re.substr(0,ye);re=re.substr(ye+1),(ye=E.indexOf(":"))===-1?R+=le(E,!1):(R+=le(E.substr(0,ye),!1),R+=":",R+=le(E.substr(ye+1),!1)),R+="@"}(ye=(re=re.toLowerCase()).indexOf(":"))===-1?R+=le(re,!1):(R+=le(re.substr(0,ye),!1),R+=re.substr(ye))}if(d){if(d.length>=3&&d.charCodeAt(0)===47&&d.charCodeAt(2)===58)($=d.charCodeAt(1))>=65&&$<=90&&(d="/".concat(String.fromCharCode($+32),":").concat(d.substr(3)));else if(d.length>=2&&d.charCodeAt(1)===58){var $;($=d.charCodeAt(0))>=65&&$<=90&&(d="".concat(String.fromCharCode($+32),":").concat(d.substr(2)))}R+=le(d,!0)}return k&&(R+="?",R+=le(k,!1)),oe&&(R+="#",R+=H?oe:U(oe,!1)),R}function N(ee){try{return decodeURIComponent(ee)}catch{return ee.length>3?ee.substr(0,3)+N(ee.substr(3)):ee}}var J=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function L(ee){return ee.match(J)?ee.replace(J,function(H){return N(H)}):ee}var ce,ue=a(470),W=function(ee,H,le){if(le||arguments.length===2)for(var R,ae=0,re=H.length;ae<re;ae++)!R&&ae in H||(R||(R=Array.prototype.slice.call(H,0,ae)),R[ae]=H[ae]);return ee.concat(R||Array.prototype.slice.call(H))},Y=ue.posix||ue;(function(ee){ee.joinPath=function(H){for(var le=[],R=1;R<arguments.length;R++)le[R-1]=arguments[R];return H.with({path:Y.join.apply(Y,W([H.path],le,!1))})},ee.resolvePath=function(H){for(var le=[],R=1;R<arguments.length;R++)le[R-1]=arguments[R];var ae=H.path||"/";return H.with({path:Y.resolve.apply(Y,W([ae],le,!1))})},ee.dirname=function(H){var le=Y.dirname(H.path);return le.length===1&&le.charCodeAt(0)===46?H:H.with({path:le})},ee.basename=function(H){return Y.basename(H.path)},ee.extname=function(H){return Y.extname(H.path)}})(ce||(ce={}))}},e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{}};return t[i](r,r.exports,n),r.exports}return n.d=(i,r)=>{for(var a in r)n.o(r,a)&&!n.o(i,a)&&Object.defineProperty(i,a,{enumerable:!0,get:r[a]})},n.o=(i,r)=>Object.prototype.hasOwnProperty.call(i,r),n.r=i=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},n(447)})();const{URI:m5,Utils:y5}=BE;var g5=Object.freeze(Object.defineProperty({__proto__:null,URI:m5,Utils:y5},Symbol.toStringTag,{value:"Module"})),W_=Id(g5),Hn={};function WE(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];r==="."?t.splice(i,1):r===".."?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var T5=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,$_=function(t){return T5.exec(t).slice(1)};function Np(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var i=n>=0?arguments[n]:"/";if(typeof i!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!i)continue;t=i+"/"+t,e=i.charAt(0)==="/"}return t=WE(G_(t.split("/"),function(r){return!!r}),!e).join("/"),(e?"/":"")+t||"."}function j_(t){var e=q_(t),n=v5(t,-1)==="/";return t=WE(G_(t.split("/"),function(i){return!!i}),!e).join("/"),!t&&!e&&(t="."),t&&n&&(t+="/"),(e?"/":"")+t}function q_(t){return t.charAt(0)==="/"}function $E(){var t=Array.prototype.slice.call(arguments,0);return j_(G_(t,function(e,n){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function jE(t,e){t=Np(t).substr(1),e=Np(e).substr(1);function n(u){for(var f=0;f<u.length&&u[f]==="";f++);for(var y=u.length-1;y>=0&&u[y]==="";y--);return f>y?[]:u.slice(f,y-f+1)}for(var i=n(t.split("/")),r=n(e.split("/")),a=Math.min(i.length,r.length),s=a,l=0;l<a;l++)if(i[l]!==r[l]){s=l;break}for(var o=[],l=s;l<i.length;l++)o.push("..");return o=o.concat(r.slice(s)),o.join("/")}var qE="/",GE=":";function KE(t){var e=$_(t),n=e[0],i=e[1];return!n&&!i?".":(i&&(i=i.substr(0,i.length-1)),n+i)}function HE(t,e){var n=$_(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n}function YE(t){return $_(t)[3]}var _5={extname:YE,basename:HE,dirname:KE,sep:qE,delimiter:GE,relative:jE,join:$E,isAbsolute:q_,normalize:j_,resolve:Np};function G_(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}var v5="ab".substr(-1)==="b"?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)},b5=Object.freeze(Object.defineProperty({__proto__:null,resolve:Np,normalize:j_,isAbsolute:q_,join:$E,relative:jE,sep:qE,delimiter:GE,dirname:KE,basename:HE,extname:YE,default:_5},Symbol.toStringTag,{value:"Module"})),K_=Id(b5),Dt={},Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.isDefined=Ht.isThenable=Ht.isDebugMode=Ht.toBoolean=Ht.hasProperty=Ht.isBoolean=Ht.isNumber=Ht.isString=Ht.isArray=Ht.compareValues=Ht.compareComparableValues=Ht.equateValues=Ht.toLowerCase=Ht.identity=Ht.returnUndefined=Ht.returnTrue=Ht.returnFalse=void 0;function S5(){return!1}Ht.returnFalse=S5;function I5(){return!0}Ht.returnTrue=I5;function C5(){}Ht.returnUndefined=C5;function w5(t){return t}Ht.identity=w5;function E5(t){return t.toLowerCase()}Ht.toLowerCase=E5;function F5(t,e){return t===e}Ht.equateValues=F5;function QE(t,e){return t===e?0:t===void 0?-1:e===void 0?1:t<e?-1:1}Ht.compareComparableValues=QE;function k5(t,e){return QE(t,e)}Ht.compareValues=k5;function D5(t){return Array.isArray?Array.isArray(t):t instanceof Array}Ht.isArray=D5;function P5(t){return typeof t=="string"}Ht.isString=P5;function A5(t){return typeof t=="number"}Ht.isNumber=A5;function M5(t){return typeof t=="boolean"}Ht.isBoolean=M5;const N5=Object.prototype.hasOwnProperty;function R5(t,e){return N5.call(t,e)}Ht.hasProperty=R5;function O5(t){return(t==null?void 0:t.trim().toUpperCase())==="TRUE"}Ht.toBoolean=O5;function x5(){const t=xu.execArgv.join();return t.includes("inspect")||t.includes("debug")}Ht.isDebugMode=x5;function L5(t){return typeof(t==null?void 0:t.then)=="function"}Ht.isThenable=L5;function z5(t){return t!==void 0}Ht.isDefined=z5;Object.defineProperty(Dt,"__esModule",{value:!0});Dt.getMapValues=Dt.addIfUnique=Dt.createMapFromItems=Dt.removeArrayElements=Dt.getOrAdd=Dt.getNestedProperty=Dt.flatten=Dt.binarySearchKey=Dt.binarySearch=Dt.every=Dt.some=Dt.map=Dt.stableSort=Dt.cloneAndSort=Dt.insertAt=Dt.addRange=Dt.find=Dt.appendArray=Dt.append=Dt.contains=Dt.emptyArray=void 0;const wh=Ht;Dt.emptyArray=[];function JE(t,e,n=wh.equateValues){if(t){for(const i of t)if(n(i,e))return!0}return!1}Dt.contains=JE;function U5(t,e){return e===void 0?t:t===void 0?[e]:(t.push(e),t)}Dt.append=U5;function V5(t,e){if(e.length<256){t.push(...e);return}for(const n of e)t.push(n)}Dt.appendArray=V5;function B5(t,e){for(let n=0;n<t.length;n++){const i=t[n];if(e(i,n))return i}}Dt.find=B5;function nS(t,e){return e<0?t.length+e:e}function XE(t,e,n,i){if(e===void 0||e.length===0)return t;if(t===void 0)return e.slice(n,i);n=n===void 0?0:nS(e,n),i=i===void 0?e.length:nS(e,i);for(let r=n;r<i&&r<e.length;r++)e[r]!==void 0&&t.push(e[r]);return t}Dt.addRange=XE;function W5(t,e,n){if(e===0)t.unshift(n);else if(e===t.length)t.push(n);else{for(let i=t.length;i>e;i--)t[i]=t[i-1];t[e]=n}return t}Dt.insertAt=W5;function $5(t,e){return t.length===0?t:t.slice().sort(e)}Dt.cloneAndSort=$5;function j5(t,e){return e}function q5(t){return t.map(j5)}function G5(t,e){const n=q5(t);return K5(t,n,e),n.map(i=>t[i])}Dt.stableSort=G5;function K5(t,e,n){e.sort((i,r)=>n(t[i],t[r])||(0,wh.compareValues)(i,r))}function H5(t,e){if(t)return t.map(e)}Dt.map=H5;function ZE(t,e){return t?e?t.some(e):t.length>0:!1}Dt.some=ZE;function Y5(t,e){return t?t.every(e):!0}Dt.every=Y5;function Q5(t,e,n,i,r){return eF(t,n(e),n,i,r)}Dt.binarySearch=Q5;function eF(t,e,n,i,r){if(!ZE(t))return-1;let a=r||0,s=t.length-1;for(;a<=s;){const l=a+(s-a>>1),o=n(t[l]);switch(i(o,e)){case-1:a=l+1;break;case 0:return l;case 1:s=l-1;break}}return~a}Dt.binarySearchKey=eF;function J5(t){const e=[];for(const n of t)n&&((0,wh.isArray)(n)?XE(e,n):e.push(n));return e}Dt.flatten=J5;function X5(t,e){return e.split(".").reduce((i,r)=>i&&i[r],t)}Dt.getNestedProperty=X5;function Z5(t,e,n){const i=t.get(e);if(i!==void 0)return i;const r=n();return t.set(e,r),r}Dt.getOrAdd=Z5;function eO(t,e){for(let n=0;n<t.length;n++)e(t[n])&&(t.splice(n,1),n--);return t}Dt.removeArrayElements=eO;function tO(t,e){return t.map(n=>e(n)).reduce((n,i,r)=>(n.set(i,(n.get(i)||[]).concat(t[r])),n),new Map)}Dt.createMapFromItems=tO;function nO(t,e,n=wh.equateValues){return JE(t,e,n)||t.push(e),t}Dt.addIfUnique=nO;function iO(t,e){const n=[];return t.forEach((i,r)=>{e(r,i)&&n.push(i)}),n}Dt.getMapValues=iO;var Eh={},qt={};Object.defineProperty(qt,"__esModule",{value:!0});qt.getSerializableError=qt.getErrorString=qt.formatEnum=qt.getFunctionName=qt.assertNever=qt.assertEachDefined=qt.assertDefined=qt.fail=qt.assert=void 0;const rO=Dt,Lu=Ht;function tF(t,e,n,i){t||(n&&(e+=`\r
Verbose Debug Information: `+(typeof n=="string"?n:n())),Dd(e?"False expression: "+e:"False expression.",i||tF))}qt.assert=tF;function Dd(t,e){const n=new Error(t?`Debug Failure. ${t}`:"Debug Failure.");throw Error.captureStackTrace&&Error.captureStackTrace(n,e||Dd),n}qt.fail=Dd;function H_(t,e,n){t==null&&Dd(e,n||H_)}qt.assertDefined=H_;function nF(t,e,n){for(const i of t)H_(i,e,n||nF)}qt.assertEachDefined=nF;function iF(t,e="Illegal value:",n){const i=JSON.stringify(t);Dd(`${e} ${i}`,n||iF)}qt.assertNever=iF;function sO(t){if(typeof t!="function")return"";if((0,Lu.hasProperty)(t,"name"))return t.name;{const e=Function.prototype.toString.call(t),n=/^function\s+([\w$]+)\s*\(/.exec(e);return n?n[1]:""}}qt.getFunctionName=sO;function aO(t=0,e,n){const i=cO(e);if(t===0)return i.length>0&&i[0][0]===0?i[0][1]:"0";if(n){let r="",a=t;for(const[s,l]of i){if(s>t)break;s!==0&&s&t&&(r=`${r}${r?"|":""}${l}`,a&=~s)}if(a===0)return r}else for(const[r,a]of i)if(r===t)return a;return t.toString()}qt.formatEnum=aO;function oO(t){return(t.stack?t.stack.toString():void 0)||(typeof t.message=="string"?t.message:void 0)||JSON.stringify(t)}qt.getErrorString=oO;function lO(t){if(!t)return;if(JSON.stringify(t).length>2)return t;const n=t.name&&(0,Lu.isString)(t.name)?t.name:"noname",i=t.message&&(0,Lu.isString)(t.message)?t.message:"nomessage",r=t.stack&&(0,Lu.isString)(t.stack)?t.stack:void 0;return{name:n,message:i,stack:r}}qt.getSerializableError=lO;function cO(t){const e=[];for(const n of Object.keys(t)){const i=t[n];typeof i=="number"&&e.push([i,n])}return(0,rO.stableSort)(e,(n,i)=>(0,Lu.compareValues)(n[0],i[0]))}Object.defineProperty(Eh,"__esModule",{value:!0});Eh.randomBytesHex=void 0;const uO=qt;let zo;try{zo=require("crypto"),zo!=null&&zo.randomBytes||(zo=void 0)}catch{}function dO(t){return[...t].map(e=>e.toString(16).padStart(2,"0")).join("")}function fO(t){if(zo)return zo.randomBytes(t).toString("hex");if(crypto){const e=crypto.getRandomValues(new Uint8Array(t));return dO(e)}(0,uO.fail)("crypto library not found")}Eh.randomBytesHex=fO;var bn={},Y_={exports:{}};const Ey=[],iS=[],rF=(t,e)=>{if(t===e)return 0;const n=t;t.length>e.length&&(t=e,e=n);let i=t.length,r=e.length;for(;i>0&&t.charCodeAt(~-i)===e.charCodeAt(~-r);)i--,r--;let a=0;for(;a<i&&t.charCodeAt(a)===e.charCodeAt(a);)a++;if(i-=a,r-=a,i===0)return r;let s,l,o,u,f=0,y=0;for(;f<i;)iS[f]=t.charCodeAt(a+f),Ey[f]=++f;for(;y<r;)for(s=e.charCodeAt(a+y),o=y++,l=y,f=0;f<i;f++)u=s===iS[f]?o:o+1,o=Ey[f],l=Ey[f]=o>l?u>l?l+1:u:u>o?o+1:u;return l};Y_.exports=rF;Y_.exports.default=rF;var pO=Te&&Te.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bn,"__esModule",{value:!0});bn.getLastDottedString=bn.getCharacterCount=bn.equateStringsCaseSensitive=bn.equateStringsCaseInsensitive=bn.getStringComparer=bn.compareStringsCaseSensitive=bn.compareStringsCaseInsensitive=bn.hashString=bn.isPatternInSymbol=bn.computeCompletionSimilarity=void 0;const hO=pO(Y_.exports),sF=Ht;function mO(t,e){if(e.startsWith(t))return 1;const n=e.toLocaleLowerCase(),i=t.toLocaleLowerCase();if(n.startsWith(i))return .75;let r=n.length,a=Number.MAX_VALUE;for(;r>0;){const l=(0,hO.default)(n.substr(0,r),i);l<a&&(a=l),r--}if(a>=t.length)return 0;const s=(t.length-a)/t.length;return .5*s}bn.computeCompletionSimilarity=mO;function yO(t,e){const n=t.toLocaleLowerCase(),i=e.toLocaleLowerCase(),r=n.length,a=i.length;let s=0,l=0;for(;s<r&&l<a;)n[s]===i[l]&&(s+=1),l+=1;return s===r}bn.isPatternInSymbol=yO;function gO(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n)|0;return e}bn.hashString=gO;function Q_(t,e){return t===e?0:t===void 0?-1:e===void 0?1:(0,sF.compareComparableValues)(t.toUpperCase(),e.toUpperCase())}bn.compareStringsCaseInsensitive=Q_;function J_(t,e){return(0,sF.compareComparableValues)(t,e)}bn.compareStringsCaseSensitive=J_;function TO(t){return t?Q_:J_}bn.getStringComparer=TO;function _O(t,e){return Q_(t,e)===0}bn.equateStringsCaseInsensitive=_O;function vO(t,e){return J_(t,e)===0}bn.equateStringsCaseSensitive=vO;function bO(t,e){let n=0;for(let i=0;i<t.length;i++)t[i]===e&&n++;return n}bn.getCharacterCount=bO;function SO(t){const e=t.lastIndexOf(".");return e>0?t.substring(e+1):t}bn.getLastDottedString=SO;(function(t){var e=Te&&Te.__createBinding||(Object.create?function(Se,Me,je,ct){ct===void 0&&(ct=je),Object.defineProperty(Se,ct,{enumerable:!0,get:function(){return Me[je]}})}:function(Se,Me,je,ct){ct===void 0&&(ct=je),Se[ct]=Me[je]}),n=Te&&Te.__setModuleDefault||(Object.create?function(Se,Me){Object.defineProperty(Se,"default",{enumerable:!0,value:Me})}:function(Se,Me){Se.default=Me}),i=Te&&Te.__importStar||function(Se){if(Se&&Se.__esModule)return Se;var Me={};if(Se!=null)for(var je in Se)je!=="default"&&Object.prototype.hasOwnProperty.call(Se,je)&&e(Me,Se,je);return n(Me,Se),Me};Object.defineProperty(t,"__esModule",{value:!0}),t.isFileSystemCaseSensitiveInternal=t.isFileSystemCaseSensitive=t.normalizePathCase=t.convertPathToUri=t.extractPathFromUri=t.convertUriToPath=t.isDiskPathRoot=t.isRootedDiskPath=t.getRegexEscapedSeparator=t.getFileSpec=t.hasPythonExtension=t.getWildcardRoot=t.getWildcardRegexPattern=t.getFileSystemEntriesFromDirEntries=t.getFileSystemEntries=t.tryRealpath=t.tryStat=t.isFile=t.isDirectory=t.normalizePath=t.stripFileExtension=t.getFileName=t.getFileExtension=t.stripTrailingDirectorySeparator=t.hasTrailingDirectorySeparator=t.ensureTrailingDirectorySeparator=t.comparePathsCaseInsensitive=t.comparePathsCaseSensitive=t.getRelativePathComponentsFromDirectory=t.getRelativePathFromDirectory=t.getBaseFileName=t.getAnyExtensionFromPath=t.changeAnyExtension=t.containsPath=t.comparePaths=t.combinePaths=t.resolvePaths=t.normalizeSlashes=t.directoryExists=t.fileExists=t.getFileSize=t.makeDirectories=t.getRelativePath=t.combinePathComponents=t.reducePathComponents=t.getPathComponents=t.getRootLength=t.getDirectoryPath=t.forEachAncestorDirectory=t.FileSpec=void 0,t.getDirectoryChangeKind=t.getLibraryPathWithoutExtension=void 0;const r=i(K_),a=W_,s=Dt,l=Ht,o=Eh,u=i(qt),f=bn;let y;(function(Se){function Me(je){const ct=je;return ct&&!!ct.wildcardRoot&&!!ct.regExp}Se.is=Me})(t.FileSpec||(t.FileSpec={}));function p(Se,Me){for(;;){const je=Me(Se);if(je!==void 0)return je;const ct=b(Se);if(ct===Se)return;Se=ct}}t.forEachAncestorDirectory=p;function b(Se){return Se.substr(0,Math.max(v(Se),Se.lastIndexOf(r.sep)))}t.getDirectoryPath=b;function v(Se){if(Se.charAt(0)===r.sep){if(Se.charAt(1)!==r.sep)return 1;const Me=Se.indexOf(r.sep,2);if(Me<0)return 2;const je=Se.indexOf(r.sep,Me+1);return je<0?Me+1:je+1}return Se.charAt(1)===":"&&Se.charAt(2)===r.sep?3:0}t.getRootLength=v;function m(Se){const Me=M(Se),je=v(Me),ct=Me.substring(0,je),pt=Me.substring(je).split(r.sep);return pt.length>0&&!pt[pt.length-1]&&pt.pop(),V([ct,...pt])}t.getPathComponents=m;function V(Se){if(!(0,s.some)(Se))return[];const Me=[Se[0]];for(let je=1;je<Se.length;je++){const ct=Se[je];if(!(!ct||ct===".")){if(ct===".."){if(Me.length>1){if(Me[Me.length-1]!==".."){Me.pop();continue}}else if(Me[0])continue}Me.push(ct)}}return Me}t.reducePathComponents=V;function F(Se){if(Se.length===0)return"";const Me=Se[0]&&R(Se[0]);return M(Me+Se.slice(1).join(r.sep))}t.combinePathComponents=F;function P(Se,Me){if(!Se.startsWith(R(Me)))return;const je=m(Se),ct=m(Me);let pt=".";for(let vt=ct.length;vt<je.length;vt++)pt+=r.sep+je[vt];return pt}t.getRelativePath=P;function G(Se,Me,je){if(!Me.startsWith(je))return;const ct=m(Me),pt=m(je);let vt=je;for(let Vt=pt.length;Vt<ct.length;Vt++)vt=N(vt,ct[Vt]),Se.existsSync(vt)||Se.mkdirSync(vt)}t.makeDirectories=G;function te(Se,Me){const je=B(Se,Me);return je!=null&&je.isFile()?je.size:0}t.getFileSize=te;function q(Se,Me){return ht(Se,Me,0)}t.fileExists=q;function U(Se,Me){return ht(Se,Me,1)}t.directoryExists=U;const D=Se=>Se==="/"?"\\":"/";function M(Se,Me=r.sep){if(Se.includes(D(Me))){const je=/[\\/]/g;return Se.replace(je,Me)}return Se}t.normalizeSlashes=M;function T(Se,...Me){return ye((0,s.some)(Me)?N(Se,...Me):M(Se))}t.resolvePaths=T;function N(Se,...Me){Se&&(Se=M(Se));for(let je of Me)!je||(je=M(je),!Se||v(je)!==0?Se=je:Se=R(Se)+je);return Se}t.combinePaths=N;function J(Se,Me,je,ct){return Se=ye(Se),Me=ye(Me),typeof je=="string"?(Se=N(je,Se),Me=N(je,Me)):typeof je=="boolean"&&(ct=je),tt(Se,Me,(0,f.getStringComparer)(ct))}t.comparePaths=J;function L(Se,Me,je,ct){if(typeof je=="string"?(Se=N(je,Se),Me=N(je,Me)):typeof je=="boolean"&&(ct=je),Se===void 0||Me===void 0)return!1;if(Se===Me)return!0;const pt=m(Se),vt=m(Me);if(vt.length<pt.length)return!1;const Vt=ct?f.equateStringsCaseInsensitive:f.equateStringsCaseSensitive;for(let Tt=0;Tt<pt.length;Tt++)if(!(Tt===0?f.equateStringsCaseInsensitive:Vt)(pt[Tt],vt[Tt]))return!1;return!0}t.containsPath=L;function ce(Se,Me,je,ct){const pt=je!==void 0&&ct!==void 0?ue(Se,je,ct):ue(Se);return pt?Se.slice(0,Se.length-pt.length)+(Me.startsWith(".")?Me:"."+Me):Se}t.changeAnyExtension=ce;function ue(Se,Me,je){if(Me)return Ue(re(Se),Me,je?f.equateStringsCaseInsensitive:f.equateStringsCaseSensitive);const ct=W(Se),pt=ct.lastIndexOf(".");return pt>=0?ct.substring(pt):""}t.getAnyExtensionFromPath=ue;function W(Se,Me,je){if(Se=M(Se),v(Se)===Se.length)return"";Se=re(Se);const pt=Se.slice(Math.max(v(Se),Se.lastIndexOf(r.sep)+1)),vt=Me!==void 0&&je!==void 0?ue(pt,Me,je):void 0;return vt?pt.slice(0,pt.length-vt.length):pt}t.getBaseFileName=W;function Y(Se,Me,je){const ct=ee(Se,Me,je);return F(ct)}t.getRelativePathFromDirectory=Y;function ee(Se,Me,je){u.assert(v(Se)>0==v(Me)>0,"Paths must either both be absolute or both be relative");const ct=typeof je=="function"?je:l.identity;return it(Se,Me,(typeof je=="boolean"?je:!1)?f.equateStringsCaseInsensitive:f.equateStringsCaseSensitive,ct)}t.getRelativePathComponentsFromDirectory=ee;function H(Se,Me){return tt(Se,Me,f.compareStringsCaseSensitive)}t.comparePathsCaseSensitive=H;function le(Se,Me){return tt(Se,Me,f.compareStringsCaseInsensitive)}t.comparePathsCaseInsensitive=le;function R(Se){return ae(Se)?Se:Se+r.sep}t.ensureTrailingDirectorySeparator=R;function ae(Se){if(Se.length===0)return!1;const Me=Se.charCodeAt(Se.length-1);return Me===47||Me===92}t.hasTrailingDirectorySeparator=ae;function re(Se){return ae(Se)?Se.substr(0,Se.length-1):Se}t.stripTrailingDirectorySeparator=re;function d(Se,Me=!1){if(!Me)return r.extname(Se);Se=k(Se);const je=Se.indexOf(".");return Se.substr(je)}t.getFileExtension=d;function k(Se){return r.basename(Se)}t.getFileName=k;function oe(Se,Me=!1){const je=d(Se,Me);return Se.substr(0,Se.length-je.length)}t.stripFileExtension=oe;function ye(Se){return M(r.normalize(Se))}t.normalizePath=ye;function E(Se,Me){var je,ct;return(ct=(je=B(Se,Me))===null||je===void 0?void 0:je.isDirectory())!==null&&ct!==void 0?ct:!1}t.isDirectory=E;function $(Se,Me,je=!1){var ct,pt;const vt=B(Se,Me);return vt!=null&&vt.isFile()?!0:je&&(pt=(ct=vt==null?void 0:vt.isZipDirectory)===null||ct===void 0?void 0:ct.call(vt))!==null&&pt!==void 0?pt:!1}t.isFile=$;function B(Se,Me){try{return Se.statSync(Me)}catch{return}}t.tryStat=B;function X(Se,Me){try{return Se.realpathSync(Me)}catch{return}}t.tryRealpath=X;function Z(Se,Me){try{return se(Se.readdirEntriesSync(Me||"."),Se,Me)}catch{return{files:[],directories:[]}}}t.getFileSystemEntries=Z;function se(Se,Me,je){const ct=Se.sort((Vt,Tt)=>Vt.name<Tt.name?-1:Vt.name>Tt.name?1:0),pt=[],vt=[];for(const Vt of ct)if(!(Vt.name==="."||Vt.name==="..")){if(Vt.isFile())pt.push(Vt.name);else if(Vt.isDirectory())vt.push(Vt.name);else if(Vt.isSymbolicLink()){const Tt=N(je,Vt.name),hn=B(Me,Tt);hn!=null&&hn.isFile()?pt.push(Vt.name):hn!=null&&hn.isDirectory()&&vt.push(Vt.name)}}return{files:pt,directories:vt}}t.getFileSystemEntriesFromDirEntries=se;function _e(Se,Me){let je=ye(N(Se,Me));ve(je)||(je=R(je));const ct=m(je),pt=Oe(),vt=`(${pt}[^${pt}.][^${pt}]*)*?`,Vt=new RegExp(`[^\\w\\s${pt}]`,"g");ct.length>0&&(ct[0]=re(ct[0]));let Tt="",hn=!0;for(let sn of ct)sn==="**"?Tt+=vt:(hn||(sn=pt+sn),Tt+=sn.replace(Vt,Pn=>Pn==="*"?`[^${pt}]*`:Pn==="?"?`[^${pt}]`:"\\"+Pn),hn=!1);return Tt}t.getWildcardRegexPattern=_e;function be(Se,Me){let je=ye(N(Se,Me));ve(je)||(je=R(je));const ct=m(je);if(ct.length>0&&(ct[0]=re(ct[0])),ct.length===1&&!ct[0])return r.sep;let pt="",vt=!0;for(let Vt of ct){if(Vt==="**")break;if(Vt.match(/[*?]/))break;vt||(Vt=r.sep+Vt),pt+=Vt,vt=!1}return pt}t.getWildcardRoot=be;function ve(Se){return Se.endsWith(".py")||Se.endsWith(".pyi")}t.hasPythonExtension=ve;function De(Se,Me,je){let ct=_e(Me,je);const pt=Oe();ct=`^(${ct})($|${pt})`;const vt=new RegExp(ct,Xt(Se)?void 0:"i");return{wildcardRoot:be(Me,je),regExp:vt}}t.getFileSpec=De;function Oe(){return r.sep==="/"?"/":"\\\\"}t.getRegexEscapedSeparator=Oe;function Je(Se){return v(Se)>0}t.isRootedDiskPath=Je;function $e(Se){const Me=v(Se);return Me>0&&Me===Se.length}t.isDiskPathRoot=$e;function tt(Se,Me,je){if(Se===Me)return 0;if(Se===void 0)return-1;if(Me===void 0)return 1;const ct=Se.substring(0,v(Se)),pt=Me.substring(0,v(Me)),vt=(0,f.compareStringsCaseInsensitive)(ct,pt);if(vt!==0)return vt;const Vt=Oe(),Tt=new RegExp(`(^|${Vt}).{0,2}($|${Vt})`),hn=Se.substring(ct.length),sn=Me.substring(pt.length);if(!Tt.test(hn)&&!Tt.test(sn))return je(hn,sn);const Pn=m(Se),Hi=m(Me),Yn=Math.min(Pn.length,Hi.length);for(let z=1;z<Yn;z++){const Q=je(Pn[z],Hi[z]);if(Q!==0)return Q}return(0,l.compareValues)(Pn.length,Hi.length)}function Ue(Se,Me,je){if(typeof Me=="string")return Ye(Se,Me,je)||"";for(const ct of Me){const pt=Ye(Se,ct,je);if(pt)return pt}return""}function Ye(Se,Me,je){if(Me.startsWith(".")||(Me="."+Me),Se.length>=Me.length&&Se.charCodeAt(Se.length-Me.length)===46){const ct=Se.slice(Se.length-Me.length);if(je(ct,Me))return ct}}function it(Se,Me,je,ct){const pt=m(Se),vt=m(Me);let Vt;for(Vt=0;Vt<pt.length&&Vt<vt.length;Vt++){const sn=ct(pt[Vt]),Pn=ct(vt[Vt]);if(!(Vt===0?f.equateStringsCaseInsensitive:je)(sn,Pn))break}if(Vt===0)return vt;const Tt=vt.slice(Vt),hn=[];for(;Vt<pt.length;Vt++)hn.push("..");return["",...hn,...Tt]}function ht(Se,Me,je){try{const ct=Se.statSync(Me);switch(je){case 0:return ct.isFile();case 1:return ct.isDirectory();default:return!1}}catch{return!1}}function mt(Se,Me){return Se.getMappedFilePath(Be(Me))}t.convertUriToPath=mt;function Be(Se){const Me=a.URI.parse(Se);let je=ye(Me.path);return je.match(/^\\[a-zA-Z]:\\/)&&(je=je.substr(1)),je}t.extractPathFromUri=Be;function qe(Se,Me){return Se.getUri(Se.getOriginalFilePath(Me))}t.convertPathToUri=qe;function dt(Se,Me){return Xt(Se)?Me:Me.toLowerCase()}t.normalizePathCase=dt;function Xt(Se){return y!==void 0||(y=En(Se)),y}t.isFileSystemCaseSensitive=Xt;function En(Se){let Me;try{let je,ct;do je=`${(0,o.randomBytesHex)(21)}-a`,Me=r.join(Se.tmpdir(),je),ct=r.join(Se.tmpdir(),je.toUpperCase());while(Se.existsSync(Me)||Se.existsSync(ct));return Se.writeFileSync(Me,"","utf8"),!Se.existsSync(ct)}catch{return!1}finally{Me&&Se.unlinkSync(Me)}}t.isFileSystemCaseSensitiveInternal=En;function Ti(Se){let Me=oe(Se);return Me.endsWith("__init__")&&(Me=Me.substr(0,Me.length-9)),Me}t.getLibraryPathWithoutExtension=Ti;function Ki(Se,Me,je){if(Se.realCasePath(Me)===Se.realCasePath(je))return"Same";const ct=ee(Me,je,pt=>Se.realCasePath(pt));return ct.length===3&&ct[1]===".."&&ct[2]!==".."?"Renamed":"Moved"}t.getDirectoryChangeKind=Ki})(Hn);var Rp={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=t.createIOError=t.IO_ERROR_MESSAGE=t.bufferFrom=t.Metadata=t.closeIterator=t.nextResult=t.getIterator=t.SortedMap=void 0;const e=Dt,n=Ht;class i{constructor(p,b){if(this._keys=[],this._values=[],this._version=0,this._copyOnWrite=!1,this._comparer=typeof p=="object"?p.comparer:p,this._order=typeof p=="object"&&p.sort==="insertion"?[]:void 0,b){const v=r(b);try{for(let m=a(v);m;m=a(v)){const[V,F]=m.value;this.set(V,F)}}finally{s(v)}}}get size(){return this._keys.length}get comparer(){return this._comparer}get[Symbol.toStringTag](){return"SortedMap"}has(p){return(0,e.binarySearch)(this._keys,p,n.identity,this._comparer)>=0}get(p){const b=(0,e.binarySearch)(this._keys,p,n.identity,this._comparer);return b>=0?this._values[b]:void 0}set(p,b){const v=(0,e.binarySearch)(this._keys,p,n.identity,this._comparer);return v>=0?this._values[v]=b:(this._writePreamble(),(0,e.insertAt)(this._keys,~v,p),(0,e.insertAt)(this._values,~v,b),this._order&&(0,e.insertAt)(this._order,~v,this._version),this._writePostScript()),this}delete(p){const b=(0,e.binarySearch)(this._keys,p,n.identity,this._comparer);return b>=0?(this._writePreamble(),this._orderedRemoveItemAt(this._keys,b),this._orderedRemoveItemAt(this._values,b),this._order&&this._orderedRemoveItemAt(this._order,b),this._writePostScript(),!0):!1}clear(){this.size>0&&(this._writePreamble(),this._keys.length=0,this._values.length=0,this._order&&(this._order.length=0),this._writePostScript())}forEach(p,b){const v=this._keys,m=this._values,V=this._getIterationOrder(),F=this._version;this._copyOnWrite=!0;try{if(V)for(const P of V)p.call(b,m[P],v[P],this);else for(let P=0;P<v.length;P++)p.call(b,m[P],v[P],this)}finally{F===this._version&&(this._copyOnWrite=!1)}}*keys(){const p=this._keys,b=this._getIterationOrder(),v=this._version;this._copyOnWrite=!0;try{if(b)for(const m of b)yield p[m];else yield*p}finally{v===this._version&&(this._copyOnWrite=!1)}}*values(){const p=this._values,b=this._getIterationOrder(),v=this._version;this._copyOnWrite=!0;try{if(b)for(const m of b)yield p[m];else yield*p}finally{v===this._version&&(this._copyOnWrite=!1)}}*entries(){const p=this._keys,b=this._values,v=this._getIterationOrder(),m=this._version;this._copyOnWrite=!0;try{if(v)for(const V of v)yield[p[V],b[V]];else for(let V=0;V<p.length;V++)yield[p[V],b[V]]}finally{m===this._version&&(this._copyOnWrite=!1)}}[Symbol.iterator](){return this.entries()}_writePreamble(){this._copyOnWrite&&(this._keys=this._keys.slice(),this._values=this._values.slice(),this._order&&(this._order=this._order.slice()),this._copyOnWrite=!1)}_writePostScript(){this._version++}_getIterationOrder(){if(this._order){const p=this._order;return this._order.map((b,v)=>v).sort((b,v)=>p[b]-p[v])}}_orderedRemoveItemAt(p,b){for(let v=b;v<p.length-1;v++)p[v]=p[v+1];p.pop()}}t.SortedMap=i;function r(y){return y[Symbol.iterator]()}t.getIterator=r;function a(y){const p=y.next();return p.done?void 0:p}t.nextResult=a;function s(y){const p=y.return;typeof p=="function"&&p.call(y)}t.closeIterator=s;class l{constructor(p){this._version=0,this._size=-1,this._parent=p,this._map=Object.create(p?p._map:null)}get size(){return(this._size===-1||this._parent&&this._parent._version!==this._parentVersion)&&(this._size=Object.keys(this._map).length,this._parent&&(this._parentVersion=this._parent._version)),this._size}get parent(){return this._parent}has(p){return this._map[l._escapeKey(p)]!==void 0}get(p){const b=this._map[l._escapeKey(p)];return b===l._undefinedValue?void 0:b}set(p,b){return this._map[l._escapeKey(p)]=b===void 0?l._undefinedValue:b,this._size=-1,this._version++,this}delete(p){const b=l._escapeKey(p);return this._map[b]!==void 0?(delete this._map[b],this._size=-1,this._version++,!0):!1}clear(){this._map=Object.create(this._parent?this._parent._map:null),this._size=-1,this._version++}forEach(p){for(const b of Object.keys(this._map))p(this._map[b],l._unescapeKey(b),this)}static _escapeKey(p){return p.length>=2&&p.charAt(0)==="_"&&p.charAt(1)==="_"?"_"+p:p}static _unescapeKey(p){return p.length>=3&&p.charAt(0)==="_"&&p.charAt(1)==="_"&&p.charAt(2)==="_"?p.slice(1):p}}t.Metadata=l,l._undefinedValue={};function o(y,p){return ot.from&&ot.from!==Int8Array.from?ot.from(y,p):new ot(y,p)}t.bufferFrom=o,t.IO_ERROR_MESSAGE=Object.freeze({EACCES:"access denied",EIO:"an I/O error occurred",ENOENT:"no such file or directory",EEXIST:"file already exists",ELOOP:"too many symbolic links encountered",ENOTDIR:"no such directory",EISDIR:"path is a directory",EBADF:"invalid file descriptor",EINVAL:"invalid value",ENOTEMPTY:"directory not empty",EPERM:"operation not permitted",EROFS:"file system is read-only"});function u(y,p=""){const b=new Error(`${y}: ${t.IO_ERROR_MESSAGE[y]} ${p}`);return b.code=y,Error.captureStackTrace&&Error.captureStackTrace(b,u),b}t.createIOError=u;function f(y,p){return JSON.stringify(y,p,2)}t.stringify=f})(Rp);var Fh={},IO=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),CO=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),wO=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&IO(e,t,n);return CO(e,t),e};Object.defineProperty(Fh,"__esModule",{value:!0});Fh.validate=void 0;const EO=K_,Oo=wO(Hn),FO=Rp,kO=xO(),DO=/[:*?"<>|]/,PO=/[:"<>|]/,AO=/^\.{1,2}$|[:*?"<>|]/,MO=/^\.{1,2}$|[:"<>|]/,NO=/\.\w+$/;function RO(t,e,n){const i=!!t[0],r=t.length>2,a=t.length>1,s=a&&NO.test(t[t.length-1]),l=e&1024?e&2048?PO:DO:e&2048?MO:AO;if(e&1&&!i||e&2&&!r||e&4&&!a||e&8&&!s||e&16&&!n||(e&1&&(e|=32),e&2&&(e|=64),e&4&&(e|=128),e&8&&(e|=256),e&16&&(e|=512),~e&32&&i)||~e&64&&r||~e&128&&a||~e&256&&s||~e&512&&n||kO.test(t[0]))return!1;for(let o=1;o<t.length;o++)if(l.test(t[o]))return!1;return!0}function OO(t,e=2016){const n=Oo.getPathComponents(t),i=Oo.hasTrailingDirectorySeparator(t);if(!RO(n,e,i))throw(0,FO.createIOError)("ENOENT");return n.length>1&&i?Oo.combinePathComponents(Oo.reducePathComponents(n))+EO.sep:Oo.combinePathComponents(Oo.reducePathComponents(n))}Fh.validate=OO;function xO(){const t=Oo.getRegexEscapedSeparator();return new RegExp(`^(?!(${t}|${t}${t}w+${t}|[a-zA-Z]:${t}?|)$)`)}(function(t){var e=Te&&Te.__createBinding||(Object.create?function(ue,W,Y,ee){ee===void 0&&(ee=Y),Object.defineProperty(ue,ee,{enumerable:!0,get:function(){return W[Y]}})}:function(ue,W,Y,ee){ee===void 0&&(ee=Y),ue[ee]=W[Y]}),n=Te&&Te.__setModuleDefault||(Object.create?function(ue,W){Object.defineProperty(ue,"default",{enumerable:!0,value:W})}:function(ue,W){ue.default=W}),i=Te&&Te.__importStar||function(ue){if(ue&&ue.__esModule)return ue;var W={};if(ue!=null)for(var Y in ue)Y!=="default"&&Object.prototype.hasOwnProperty.call(ue,Y)&&e(W,ue,Y);return n(W,ue),W};Object.defineProperty(t,"__esModule",{value:!0}),t.formatPatch=t.Mount=t.S_IFIFO=t.S_IFCHR=t.S_IFDIR=t.S_IFBLK=t.S_IFREG=t.S_IFLNK=t.S_IFSOCK=t.S_IFMT=t.Symlink=t.Unlink=t.Rmdir=t.Link=t.SameFileContentFile=t.File=t.Directory=t.TestFileSystem=t.MODULE_PATH=void 0;const r=W_,a=i(Hn),s=Rp,l=Rp,o=Fh;t.MODULE_PATH=a.normalizeSlashes("/");let u=0,f=0;class y{constructor(W,Y={}){this._lazy={},this._tmpfileCounter=0;const{time:ee=-1,files:H,meta:le}=Y;if(this.ignoreCase=W,this.stringComparer=this.ignoreCase?a.comparePathsCaseInsensitive:a.comparePathsCaseSensitive,this._time=ee,le)for(const ae of Object.keys(le))this.meta.set(ae,le[ae]);H&&this._applyFiles(H,"");let R=Y.cwd;if((!R||!a.isDiskPathRoot(R))&&this._lazy.links){const ae=(0,l.getIterator)(this._lazy.links.keys());try{for(let re=(0,l.nextResult)(ae);re;re=(0,l.nextResult)(ae)){const d=re.value;R=R?a.resolvePaths(d,R):d;break}}finally{(0,l.closeIterator)(ae)}}R&&((0,o.validate)(R,2017),this.mkdirpSync(R)),this._cwd=R||""}get meta(){return this._lazy.meta||(this._lazy.meta=new l.Metadata(this._shadowRoot?this._shadowRoot.meta:void 0)),this._lazy.meta}get isReadonly(){return Object.isFrozen(this)}makeReadonly(){return Object.freeze(this),this}get shadowRoot(){return this._shadowRoot}snapshot(){if(this.isReadonly)return;const W=new y(this.ignoreCase,{time:this._time});W._lazy=this._lazy,W._cwd=this._cwd,W._time=this._time,W._shadowRoot=this._shadowRoot,W._dirStack=this._dirStack,W.makeReadonly(),this._lazy={},this._shadowRoot=W}shadow(W=this.ignoreCase){if(!this.isReadonly)throw new Error("Cannot shadow a mutable file system.");if(W&&!this.ignoreCase)throw new Error("Cannot create a case-insensitive file system from a case-sensitive one.");const Y=new y(W,{time:this._time});return Y._shadowRoot=this,Y._cwd=this._cwd,Y}time(W){if(W!==void 0&&this.isReadonly)throw(0,s.createIOError)("EPERM");let Y=this._time;return typeof Y=="function"&&(Y=Y()),typeof Y=="object"&&(Y=Y.getTime()),Y===-1&&(Y=Date.now()),W!==void 0&&(this._time=W),Y}filemeta(W){const{node:Y}=this._walk(this._resolve(W));if(!Y)throw(0,s.createIOError)("ENOENT");return this._filemeta(Y)}_filemeta(W){if(!W.meta){const Y=W.shadowRoot&&this._shadowRoot&&this._shadowRoot._filemeta(W.shadowRoot);W.meta=new l.Metadata(Y)}return W.meta}cwd(){if(!this._cwd)throw new Error("The current working directory has not been set.");const{node:W}=this._walk(this._cwd);if(!W)throw(0,s.createIOError)("ENOENT");if(!D(W))throw(0,s.createIOError)("ENOTDIR");return this._cwd}chdir(W){if(this.isReadonly)throw(0,s.createIOError)("EPERM");W=this._resolve(W);const{node:Y}=this._walk(W);if(!Y)throw(0,s.createIOError)("ENOENT");if(!D(Y))throw(0,s.createIOError)("ENOTDIR");this._cwd=W}pushd(W){if(this.isReadonly)throw(0,s.createIOError)("EPERM");W&&(W=this._resolve(W)),this._cwd&&(this._dirStack||(this._dirStack=[]),this._dirStack.push(this._cwd)),W&&W!==this._cwd&&this.chdir(W)}popd(){if(this.isReadonly)throw(0,s.createIOError)("EPERM");const W=this._dirStack&&this._dirStack.pop();W&&this.chdir(W)}apply(W){this._applyFiles(W,this._cwd)}scanSync(W,Y,ee){W=this._resolve(W);const H=[];return this._scan(W,this._stat(this._walk(W)),Y,ee,!1,H),H}lscanSync(W,Y,ee){W=this._resolve(W);const H=[];return this._scan(W,this._stat(this._walk(W,!0)),Y,ee,!0,H),H}createFileSystemWatcher(W,Y){return{close:()=>{}}}getModulePath(){return t.MODULE_PATH}tmpdir(){return this.mkdirpSync("/tmp"),a.normalizeSlashes("/tmp")}tmpfile(W){const Y=(W==null?void 0:W.prefix)||"tmp",ee=W!=null&&W.prefix?"-"+W.prefix:"",H=`${Y}-${this._tmpfileCounter++}${ee}`,le=a.combinePaths(this.tmpdir(),H);return this.writeFileSync(le,""),le}realCasePath(W){return W}isMappedFilePath(W){return!1}getOriginalFilePath(W){return W}getMappedFilePath(W){return W}getUri(W){return r.URI.file(W).toString()}_scan(W,Y,ee,H,le,R){if((ee==="ancestors-or-self"||ee==="self"||ee==="descendants-or-self")&&(!H.accept||H.accept(W,Y))&&R.push(W),ee==="ancestors-or-self"||ee==="ancestors"){const ae=a.getDirectoryPath(W);if(ae!==W)try{const re=this._stat(this._walk(ae,le));(!H.traverse||H.traverse(ae,re))&&this._scan(ae,re,"ancestors-or-self",H,le,R)}catch{}}if((ee==="descendants-or-self"||ee==="descendants")&&Y.isDirectory()&&(!H.traverse||H.traverse(W,Y)))for(const ae of this.readdirSync(W))try{const re=a.combinePaths(W,ae),d=this._stat(this._walk(re,le));this._scan(re,d,"descendants-or-self",H,le,R)}catch{}}mountSync(W,Y,ee){if(this.isReadonly)throw(0,s.createIOError)("EROFS");W=(0,o.validate)(W,2017);const{parent:H,links:le,node:R,basename:ae}=this._walk(this._resolve(Y),!0);if(R)throw(0,s.createIOError)("EEXIST");const re=this.time(),d=this._mknod(H?H.dev:++u,t.S_IFDIR,511,re);d.source=W,d.resolver=ee,this._addLink(H,le,ae,d,re)}rimrafSync(W){try{const Y=this.lstatSync(W);if(Y.isFile()||Y.isSymbolicLink())this.unlinkSync(W);else if(Y.isDirectory()){for(const ee of this.readdirSync(W))this.rimrafSync(a.combinePaths(W,ee));this.rmdirSync(W)}}catch(Y){if(Y.code==="ENOENT")return;throw Y}}mkdirpSync(W){W=this._resolve(W);const Y=this._walk(W,!0,(ee,H)=>ee.code==="ENOENT"?(this._mkdir(H),"retry"):"throw");Y.node||this._mkdir(Y)}getFileListing(){let W="";const Y=(ee,H)=>{const le=(0,l.getIterator)(H);try{for(let R=(0,l.nextResult)(le);R;R=(0,l.nextResult)(le)){const[ae,re]=R.value,d=ee?a.combinePaths(ee,ae):ae,k=a.comparePaths(this._cwd,d,this.ignoreCase)===0?"*":" ";W&&(W+=`
`),W+=k,D(re)?(W+=a.ensureTrailingDirectorySeparator(d),Y(d,this._getLinks(re))):U(re)?W+=d:M(re)&&(W+=`${d} -> ${re.symlink}`)}}finally{(0,l.closeIterator)(le)}};return Y(void 0,this._getRootLinks()),W}debugPrint(){console.log(this.getFileListing())}existsSync(W){const Y=this._walk(this._resolve(W),!0,()=>"stop");return Y!==void 0&&Y.node!==void 0}statSync(W){return this._stat(this._walk(this._resolve(W)))}utimesSync(W,Y,ee){if(this.isReadonly)throw(0,s.createIOError)("EROFS");if(!isFinite(+Y)||!isFinite(+ee))throw(0,s.createIOError)("EINVAL");const H=this._walk(this._resolve(W));if(!H||!H.node)throw(0,s.createIOError)("ENOENT");H.node.atimeMs=+Y,H.node.mtimeMs=+ee,H.node.ctimeMs=this.time()}lstatSync(W){return this._stat(this._walk(this._resolve(W),!0))}_stat(W){const Y=W.node;if(!Y)throw(0,s.createIOError)("ENOENT",W.realpath);return new ce(Y.dev,Y.ino,Y.mode,Y.nlink,0,U(Y)?this._getSize(Y):M(Y)?Y.symlink.length:0,4096,0,Y.atimeMs,Y.mtimeMs,Y.ctimeMs,Y.birthtimeMs)}readdirSync(W){const{node:Y}=this._walk(this._resolve(W));if(!Y)throw(0,s.createIOError)("ENOENT");if(!D(Y))throw(0,s.createIOError)("ENOTDIR");return Array.from(this._getLinks(Y).keys())}readdirEntriesSync(W){const{node:Y}=this._walk(this._resolve(W));if(!Y)throw(0,s.createIOError)("ENOENT");if(!D(Y))throw(0,s.createIOError)("ENOTDIR");return Array.from(this._getLinks(Y).entries()).map(([H,le])=>L(H,le))}mkdirSync(W){if(this.isReadonly)throw(0,s.createIOError)("EROFS");this._mkdir(this._walk(this._resolve(W),!0))}_mkdir({parent:W,links:Y,node:ee,basename:H}){if(ee)throw(0,s.createIOError)("EEXIST");const le=this.time(),R=this._mknod(W?W.dev:++u,t.S_IFDIR,511,le);this._addLink(W,Y,H,R,le)}rmdirSync(W){if(this.isReadonly)throw(0,s.createIOError)("EROFS");W=this._resolve(W);const{parent:Y,links:ee,node:H,basename:le}=this._walk(W,!0);if(!Y)throw(0,s.createIOError)("EPERM");if(!D(H))throw(0,s.createIOError)("ENOTDIR");if(this._getLinks(H).size!==0)throw(0,s.createIOError)("ENOTEMPTY");this._removeLink(Y,ee,le,H)}linkSync(W,Y){if(this.isReadonly)throw(0,s.createIOError)("EROFS");const{node:ee}=this._walk(this._resolve(W));if(!ee)throw(0,s.createIOError)("ENOENT");if(D(ee))throw(0,s.createIOError)("EPERM");const{parent:H,links:le,basename:R,node:ae}=this._walk(this._resolve(Y),!0);if(!H)throw(0,s.createIOError)("EPERM");if(ae)throw(0,s.createIOError)("EEXIST");this._addLink(H,le,R,ee)}unlinkSync(W){if(this.isReadonly)throw(0,s.createIOError)("EROFS");const{parent:Y,links:ee,node:H,basename:le}=this._walk(this._resolve(W),!0);if(!Y)throw(0,s.createIOError)("EPERM");if(!H)throw(0,s.createIOError)("ENOENT");if(D(H))throw(0,s.createIOError)("EISDIR");this._removeLink(Y,ee,le,H)}renameSync(W,Y){if(this.isReadonly)throw(0,s.createIOError)("EROFS");const{parent:ee,links:H,node:le,basename:R}=this._walk(this._resolve(W),!0);if(!ee)throw(0,s.createIOError)("EPERM");if(!le)throw(0,s.createIOError)("ENOENT");const{parent:ae,links:re,node:d,basename:k}=this._walk(this._resolve(Y),!0);if(!ae)throw(0,s.createIOError)("EPERM");const oe=this.time();if(d){if(D(le)){if(!D(d))throw(0,s.createIOError)("ENOTDIR");if(this._getLinks(d).size>0)throw(0,s.createIOError)("ENOTEMPTY")}else if(D(d))throw(0,s.createIOError)("EISDIR");this._removeLink(ae,re,k,d,oe)}this._replaceLink(ee,H,R,ae,re,k,le,oe)}symlinkSync(W,Y){if(this.isReadonly)throw(0,s.createIOError)("EROFS");const{parent:ee,links:H,node:le,basename:R}=this._walk(this._resolve(Y),!0);if(!ee)throw(0,s.createIOError)("EPERM");if(le)throw(0,s.createIOError)("EEXIST");const ae=this.time(),re=this._mknod(ee.dev,t.S_IFLNK,438,ae);re.symlink=(0,o.validate)(W,2016),this._addLink(ee,H,R,re,ae)}realpathSync(W){const{realpath:Y}=this._walk(this._resolve(W));return Y}readFileSync(W,Y=null){const{node:ee}=this._walk(this._resolve(W));if(!ee)throw(0,s.createIOError)("ENOENT");if(D(ee))throw(0,s.createIOError)("EISDIR");if(!U(ee))throw(0,s.createIOError)("EBADF");const H=this._getBuffer(ee).slice();return Y?H.toString(Y):H}writeFileSync(W,Y,ee=null){if(this.isReadonly)throw(0,s.createIOError)("EROFS");const{parent:H,links:le,node:R,basename:ae}=this._walk(this._resolve(W),!1);if(!H)throw(0,s.createIOError)("EPERM");const re=this.time();let d=R;if(d||(d=this._mknod(H.dev,t.S_IFREG,438,re),this._addLink(H,le,ae,d,re)),D(d))throw(0,s.createIOError)("EISDIR");if(!U(d))throw(0,s.createIOError)("EBADF");d.buffer=ot.isBuffer(Y)?Y.slice():(0,s.bufferFrom)(""+Y,ee||"utf8"),d.size=d.buffer.byteLength,d.mtimeMs=re,d.ctimeMs=re}readFile(W){return Promise.resolve(this.readFileSync(W))}readFileText(W,Y){return Promise.resolve(this.readFileSync(W,Y||"utf8"))}createReadStream(W){throw new Error("Not implemented in test file system.")}createWriteStream(W){throw new Error("Not implemented in test file system.")}copyFileSync(W,Y){throw new Error("Not implemented in test file system.")}diff(W=this.shadowRoot,Y={}){const ee={};return(W?y._rootDiff(ee,this,W,Y):y._trackCreatedInodes(ee,this,this._getRootLinks()))?ee:void 0}static diff(W,Y,ee={}){const H={};return y._rootDiff(H,W,Y,ee)?H:void 0}isInZipOrEgg(W){return!1}static _diffWorker(W,Y,ee,H,le,R){if(ee&&!le)return y._trackCreatedInodes(W,Y,ee);if(le&&!ee)return y._trackDeletedInodes(W,le);if(ee&&le){let ae=!1;return le.forEach((re,d)=>{ee.has(d)||(W[d]=D(re)?new V:new F,ae=!0)}),ee.forEach((re,d)=>{const k=le.get(d);if(k){if(D(re)&&D(k))return ae=y._directoryDiff(W,d,Y,re,H,k,R)||ae;if(U(re)&&U(k))return ae=y._fileDiff(W,d,Y,re,H,k,R)||ae;if(M(re)&&M(k))return ae=y._symlinkDiff(W,d,re,k)||ae}return ae=y._trackCreatedInode(W,d,Y,re)||ae}),ae}return!1}static _rootDiff(W,Y,ee,H){for(;!Y._lazy.links&&Y._shadowRoot;)Y=Y._shadowRoot;for(;!ee._lazy.links&&ee._shadowRoot;)ee=ee._shadowRoot;return Y===ee||!Y._lazy.links&&!Y._shadowRoot&&!ee._lazy.links&&!ee._shadowRoot?!1:y._diffWorker(W,Y,Y._getRootLinks(),ee,ee._getRootLinks(),H)}static _directoryDiff(W,Y,ee,H,le,R,ae){for(;!H.links&&H.shadowRoot;)H=H.shadowRoot;for(;!R.links&&R.shadowRoot;)R=R.shadowRoot;if(H===R||te(H)&&te(R)||!H.links&&!R.links&&H.resolver&&H.source!==void 0&&R.resolver===H.resolver&&R.source===H.source)return!1;const re={};return y._diffWorker(re,ee,ee._getLinks(H),le,le._getLinks(R),ae)?(W[Y]=new p(re),!0):!1}static _fileDiff(W,Y,ee,H,le,R,ae){for(;!H.buffer&&H.shadowRoot;)H=H.shadowRoot;for(;!R.buffer&&R.shadowRoot;)R=R.shadowRoot;if(H===R||q(H)&&q(R)||!H.buffer&&!R.buffer&&H.resolver&&H.source!==void 0&&R.resolver===H.resolver&&R.source===H.source)return!1;const re=ee._getBuffer(H),d=le._getBuffer(R);return re===d?!1:ot.compare(re,d)===0?ae.includeChangedFileWithSameContent?(W[Y]=new v(re),!0):!1:(W[Y]=new b(re),!0)}static _symlinkDiff(W,Y,ee,H){return ee.symlink===H.symlink?!1:(W[Y]=new P(ee.symlink),!0)}static _trackCreatedInode(W,Y,ee,H){if(D(H)){const le={};y._trackCreatedInodes(le,ee,ee._getLinks(H)),W[Y]=new p(le)}else M(H)?W[Y]=new P(H.symlink):W[Y]=new b(H.buffer||"");return!0}static _trackCreatedInodes(W,Y,ee){return ee.size?(ee.forEach((H,le)=>{y._trackCreatedInode(W,le,Y,H)}),!0):!1}static _trackDeletedInodes(W,Y){return Y.size?(Y.forEach((ee,H)=>{W[H]=D(ee)?new V:new F}),!0):!1}_mknod(W,Y,ee,H=this.time()){return{dev:W,ino:++f,mode:ee&~t.S_IFMT&-19&4095|Y&t.S_IFMT,atimeMs:H,mtimeMs:H,ctimeMs:H,birthtimeMs:H,nlink:0}}_addLink(W,Y,ee,H,le=this.time()){Y.set(ee,H),H.nlink++,H.ctimeMs=le,W&&(W.mtimeMs=le),!W&&!this._cwd&&(this._cwd=ee)}_removeLink(W,Y,ee,H,le=this.time()){Y.delete(ee),H.nlink--,H.ctimeMs=le,W&&(W.mtimeMs=le)}_replaceLink(W,Y,ee,H,le,R,ae,re){W!==H?(this._removeLink(W,Y,ee,ae,re),this._addLink(H,le,R,ae,re)):(Y.delete(ee),Y.set(R,ae),W.mtimeMs=re,H.mtimeMs=re)}_getRootLinks(){if(!this._lazy.links){const W=new l.SortedMap(this.stringComparer);this._shadowRoot&&this._copyShadowLinks(this._shadowRoot._getRootLinks(),W),this._lazy.links=W}return this._lazy.links}_getLinks(W){if(!W.links){const Y=new l.SortedMap(this.stringComparer),{source:ee,resolver:H}=W;if(ee&&H){W.source=void 0,W.resolver=void 0;for(const le of H.readdirSync(ee)){const R=a.combinePaths(ee,le),ae=H.statSync(R);switch(ae.mode&t.S_IFMT){case t.S_IFDIR:{const re=this._mknod(W.dev,t.S_IFDIR,511);re.source=a.combinePaths(ee,le),re.resolver=H,this._addLink(W,Y,le,re);break}case t.S_IFREG:{const re=this._mknod(W.dev,t.S_IFREG,438);re.source=a.combinePaths(ee,le),re.resolver=H,re.size=ae.size,this._addLink(W,Y,le,re);break}}}}else this._shadowRoot&&W.shadowRoot&&this._copyShadowLinks(this._shadowRoot._getLinks(W.shadowRoot),Y);W.links=Y}return W.links}_getShadow(W){const Y=this._lazy.shadows||(this._lazy.shadows=new Map);let ee=Y.get(W.ino);return ee||(ee={dev:W.dev,ino:W.ino,mode:W.mode,atimeMs:W.atimeMs,mtimeMs:W.mtimeMs,ctimeMs:W.ctimeMs,birthtimeMs:W.birthtimeMs,nlink:W.nlink,shadowRoot:W},M(W)&&(ee.symlink=W.symlink),Y.set(ee.ino,ee)),ee}_copyShadowLinks(W,Y){const ee=(0,l.getIterator)(W);try{for(let H=(0,l.nextResult)(ee);H;H=(0,l.nextResult)(ee)){const[le,R]=H.value;Y.set(le,this._getShadow(R))}}finally{(0,l.closeIterator)(ee)}}_getSize(W){return W.buffer?W.buffer.byteLength:W.size!==void 0?W.size:W.source&&W.resolver?W.size=W.resolver.statSync(W.source).size:this._shadowRoot&&W.shadowRoot?W.size=this._shadowRoot._getSize(W.shadowRoot):0}_getBuffer(W){if(!W.buffer){const{source:Y,resolver:ee}=W;Y&&ee?(W.source=void 0,W.resolver=void 0,W.size=void 0,W.buffer=ee.readFileSync(Y)):this._shadowRoot&&W.shadowRoot?W.buffer=this._shadowRoot._getBuffer(W.shadowRoot):W.buffer=ot.allocUnsafe(0)}return W.buffer}_walk(W,Y,ee){let H=this._getRootLinks(),le,R=a.getPathComponents(W),ae=0,re=0,d=!1;for(;;){if(re>=40)throw(0,s.createIOError)("ELOOP");const oe=ae===R.length-1,ye=R[ae],E=H.get(ye);if(oe&&(Y||!M(E)))return{realpath:a.combinePathComponents(R),basename:ye,parent:le,links:H,node:E};if(E===void 0){if(k((0,s.createIOError)("ENOENT"),E))continue;return}if(M(E)){const $=a.combinePathComponents(R.slice(0,ae)),B=a.resolvePaths($,E.symlink);H=this._getRootLinks(),le=void 0,R=a.getPathComponents(B).concat(R.slice(ae+1)),ae=0,re++,d=!1;continue}if(D(E)){H=this._getLinks(E),le=E,ae++,d=!1;continue}if(!k((0,s.createIOError)("ENOTDIR"),E))return}function k(oe,ye){const E=a.combinePathComponents(R.slice(0,ae+1)),$=R[ae],B=!d&&ee?ee(oe,{realpath:E,basename:$,parent:le,links:H,node:ye}):"throw";if(B==="stop")return!1;if(B==="retry")return d=!0,!0;throw oe}}_resolve(W){return this._cwd?a.resolvePaths(this._cwd,(0,o.validate)(W,4064)):(0,o.validate)(W,4065)}_applyFiles(W,Y){const ee=[];this._applyFilesWorker(W,Y,ee);for(const[H,le]of ee){if(this.mkdirpSync(a.getDirectoryPath(le)),this.pushd(a.getDirectoryPath(le)),H instanceof P){if(this.stringComparer(a.getDirectoryPath(le),le)===0)throw new TypeError("Roots cannot be symbolic links.");this.symlinkSync(a.resolvePaths(Y,H.symlink),le),this._applyFileExtendedOptions(le,H)}else if(H instanceof m){if(this.stringComparer(a.getDirectoryPath(le),le)===0)throw new TypeError("Roots cannot be hard links.");this.linkSync(H.path,le)}else this.mountSync(H.source,le,H.resolver),this._applyFileExtendedOptions(le,H);this.popd()}}_applyFileExtendedOptions(W,Y){const{meta:ee}=Y;if(ee!==void 0){const H=this.filemeta(W);for(const le of Object.keys(ee))H.set(le,ee[le])}}_applyFilesWorker(W,Y,ee){for(const H of Object.keys(W)){const le=T(W[H]),R=Y?a.resolvePaths(Y,H):H;if((0,o.validate)(R,2017),le==null||le instanceof V||le instanceof F){if(this.stringComparer(a.getDirectoryPath(R),R)===0)throw new TypeError("Roots cannot be deleted.");this.rimrafSync(R)}else if(le instanceof b){if(this.stringComparer(a.getDirectoryPath(R),R)===0)throw new TypeError("Roots cannot be files.");this.mkdirpSync(a.getDirectoryPath(R)),this.writeFileSync(R,le.data,le.encoding),this._applyFileExtendedOptions(R,le)}else le instanceof p?(this.mkdirpSync(R),this._applyFileExtendedOptions(R,le),this._applyFilesWorker(le.files,R,ee)):ee.push([le,R])}}}t.TestFileSystem=y;class p{constructor(W,{meta:Y}={}){this.files=W,this.meta=Y}}t.Directory=p;class b{constructor(W,{meta:Y,encoding:ee}={}){this.data=W,this.encoding=ee,this.meta=Y}}t.File=b;class v extends b{constructor(W,Y){super(W,Y)}}t.SameFileContentFile=v;class m{constructor(W){this.path=W}}t.Link=m;class V{}t.Rmdir=V;class F{}t.Unlink=F;class P{constructor(W,{meta:Y}={}){this.symlink=W,this.meta=Y}}t.Symlink=P,t.S_IFMT=61440,t.S_IFSOCK=49152,t.S_IFLNK=40960,t.S_IFREG=32768,t.S_IFBLK=24576,t.S_IFDIR=16384,t.S_IFCHR=8192,t.S_IFIFO=4096;class G{constructor(W,Y,{meta:ee}={}){this.source=W,this.resolver=Y,this.meta=ee}}t.Mount=G;function te(ue){return!ue.links&&!ue.shadowRoot&&!ue.resolver&&!ue.source}function q(ue){return!ue.buffer&&!ue.shadowRoot&&!ue.resolver&&!ue.source}function U(ue){return ue!==void 0&&(ue.mode&t.S_IFMT)===t.S_IFREG}function D(ue){return ue!==void 0&&(ue.mode&t.S_IFMT)===t.S_IFDIR}function M(ue){return ue!==void 0&&(ue.mode&t.S_IFMT)===t.S_IFLNK}function T(ue){return ue==null||ue instanceof p||ue instanceof b||ue instanceof m||ue instanceof P||ue instanceof G||ue instanceof V||ue instanceof F?ue:typeof ue=="string"||ot.isBuffer(ue)?new b(ue):new p(ue)}function N(ue){return ue?J("",ue):null}t.formatPatch=N;function J(ue,W){let Y="";for(const ee of Object.keys(W)){const H=T(W[ee]),le=ue?a.combinePaths(ue,ee):ee;if(H==null||H instanceof F)Y+=`//// [${le}] unlink\r
`;else if(H instanceof V)Y+=`//// [${a.ensureTrailingDirectorySeparator(le)}] rmdir\r
`;else if(H instanceof p)Y+=J(le,H.files);else if(H instanceof v)Y+=`//// [${le}] file written with same contents\r
`;else if(H instanceof b){const R=typeof H.data=="string"?H.data:H.data.toString("utf8");Y+=`//// [${le}]\r
${R}\r
\r
`}else H instanceof m?Y+=`//// [${le}] link(${H.path})\r
`:H instanceof P?Y+=`//// [${le}] symlink(${H.symlink})\r
`:H instanceof G&&(Y+=`//// [${le}] mount(${H.source})\r
`)}return Y}function L(ue,W){return{isFile:()=>U(W),isDirectory:()=>D(W),isBlockDevice:()=>!1,isCharacterDevice:()=>!1,isFIFO:()=>!1,isSocket:()=>!1,isSymbolicLink:()=>M(W),name:ue}}class ce{constructor(W=0,Y=0,ee=0,H=0,le=0,R=0,ae=0,re=0,d=0,k=0,oe=0,ye=0){this.dev=W,this.ino=Y,this.mode=ee,this.nlink=H,this.uid=0,this.gid=0,this.rdev=le,this.size=R,this.blksize=ae,this.blocks=re,this.atimeMs=d,this.mtimeMs=k,this.ctimeMs=oe,this.birthtimeMs=ye,this.atime=new Date(this.atimeMs),this.mtime=new Date(this.mtimeMs),this.ctime=new Date(this.ctimeMs),this.birthtime=new Date(this.birthtimeMs)}isFile(){return(this.mode&t.S_IFMT)===t.S_IFREG}isDirectory(){return(this.mode&t.S_IFMT)===t.S_IFDIR}isSymbolicLink(){return(this.mode&t.S_IFMT)===t.S_IFLNK}isBlockDevice(){return(this.mode&t.S_IFMT)===t.S_IFBLK}isCharacterDevice(){return(this.mode&t.S_IFMT)===t.S_IFCHR}isFIFO(){return(this.mode&t.S_IFMT)===t.S_IFIFO}isSocket(){return(this.mode&t.S_IFMT)===t.S_IFSOCK}}})(OE);var X_={},kh={};Object.defineProperty(kh,"__esModule",{value:!0});kh.NoAccessHost=void 0;class LO{get kind(){return 2}getPythonSearchPaths(e,n){return n==null||n.push("No access to python executable."),{paths:[],prefix:""}}getPythonVersion(e,n){}getPythonPlatform(e){}}kh.NoAccessHost=LO;Object.defineProperty(X_,"__esModule",{value:!0});var aF=X_.TestAccessHost=void 0;const zO=kh;class UO extends zO.NoAccessHost{constructor(e="",n=[]){super(),this._modulePath=e,this._searchPaths=n}getPythonSearchPaths(e,n){return{paths:this._searchPaths,prefix:this._modulePath}}}aF=X_.TestAccessHost=UO;var Dh={},Pd={};Object.defineProperty(Pd,"__esModule",{value:!0});Pd.getPyTypedInfo=void 0;const Fy=Hn,VO="py.typed";function BO(t,e){if(!t.existsSync(e)||!(0,Fy.isDirectory)(t,e))return;let n=!1;const i=(0,Fy.combinePaths)(e,VO);if(!t.existsSync(e)||!(0,Fy.isFile)(t,i))return;const r=t.statSync(i);if(r.size>0&&r.size<64*1024){const a=t.readFileSync(i,"utf8");(a.match(/partial\n/)||a.match(/partial\r\n/))&&(n=!0)}return{pyTypedPath:i,isPartiallyTyped:n}}Pd.getPyTypedInfo=BO;var ri={};Object.defineProperty(ri,"__esModule",{value:!0});ri.stubsSuffix=ri.src=ri.distPackages=lF=ri.sitePackages=ri.lib64=ri.libAlternate=oF=ri.lib=ri.typeshedFallback=void 0;ri.typeshedFallback="typeshed-fallback";var oF=ri.lib="lib";ri.libAlternate="Lib";ri.lib64="lib64";var lF=ri.sitePackages="site-packages";ri.distPackages="dist-packages";ri.src="src";ri.stubsSuffix="-stubs";var Ph={},Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});Xa.VirtualDirent=Xa.nullFileWatcherProvider=Xa.ignoredWatchEventFunction=void 0;function WO(t){const e=t.map(n=>n.toLowerCase());return n=>{if(!n||n.indexOf("__pycache__")>=0)return!0;const i=n.toLowerCase();return e.every(r=>i.indexOf(r)<0)}}Xa.ignoredWatchEventFunction=WO;const $O={close(){}};Xa.nullFileWatcherProvider={createFileWatcher(t,e){return $O},onFileChange(t,e){}};class jO{constructor(e,n){this.name=e,this._file=n}isFile(){return this._file}isDirectory(){return!this._file}isBlockDevice(){return!1}isCharacterDevice(){return!1}isSymbolicLink(){return!1}isFIFO(){return!1}isSocket(){return!1}}Xa.VirtualDirent=jO;Object.defineProperty(Ph,"__esModule",{value:!0});Ph.ReadOnlyAugmentedFileSystem=void 0;const qO=Dt,GO=Xa,su=Hn;class KO{constructor(e){this._realFS=e,this._entryMap=new Map,this._reverseEntryMap=new Map,this._folderMap=new Map}existsSync(e){return this._isMovedEntry(e)?!1:this._realFS.existsSync(this._getOriginalPath(e))}mkdirSync(e,n){throw new Error("Operation is not allowed.")}chdir(e){throw new Error("Operation is not allowed.")}readdirEntriesSync(e){const n=(0,su.ensureTrailingDirectorySeparator)(e),i=[],r=this._folderMap.get(n);return(!r||this._realFS.existsSync(e))&&i.push(...this._realFS.readdirEntriesSync(e).filter(a=>!this._isMovedEntry((0,su.combinePaths)(e,a.name))&&!(r!=null&&r.some(s=>s.name===a.name)))),r?i.concat(r.map(a=>new GO.VirtualDirent(a.name,a.isFile))):i}readdirSync(e){return this.readdirEntriesSync(e).map(n=>n.name)}readFileSync(e,n){return this._realFS.readFileSync(this._getOriginalPath(e),n)}writeFileSync(e,n,i){throw new Error("Operation is not allowed.")}statSync(e){return this._realFS.statSync(this._getOriginalPath(e))}unlinkSync(e){throw new Error("Operation is not allowed.")}realpathSync(e){return this._entryMap.has(e)?e:this._realFS.realpathSync(e)}getModulePath(){return this._realFS.getModulePath()}createFileSystemWatcher(e,n){return this._realFS.createFileSystemWatcher(e,n)}createReadStream(e){return this._realFS.createReadStream(this._getOriginalPath(e))}createWriteStream(e){throw new Error("Operation is not allowed.")}copyFileSync(e,n){throw new Error("Operation is not allowed.")}readFile(e){return this._realFS.readFile(this._getOriginalPath(e))}readFileText(e,n){return this._realFS.readFileText(this._getOriginalPath(e),n)}tmpdir(){return this._realFS.tmpdir()}tmpfile(e){return this._realFS.tmpfile(e)}realCasePath(e){return this._realFS.realCasePath(e)}getUri(e){return this._realFS.getUri(e)}isMappedFilePath(e){return this._entryMap.has(e)||this._realFS.isMappedFilePath(e)}getOriginalFilePath(e){return this._realFS.getOriginalFilePath(this._getOriginalPath(e))}getMappedFilePath(e){var n;const i=this._realFS.getMappedFilePath(e);return(n=this._reverseEntryMap.get(i))!==null&&n!==void 0?n:i}isInZipOrEgg(e){return this._realFS.isInZipOrEgg(e)}_recordMovedEntry(e,n,i=!0,r=!0){this._entryMap.set(e,n),i&&this._reverseEntryMap.set(n,e);const a=(0,su.ensureTrailingDirectorySeparator)((0,su.getDirectoryPath)(e)),s=(0,qO.getOrAdd)(this._folderMap,a,()=>[]),l=(0,su.getFileName)(e);s.some(o=>o.name===l)||s.push({name:l,isFile:r})}_getOriginalPath(e){var n;return(n=this._entryMap.get(e))!==null&&n!==void 0?n:e}_isMovedEntry(e){return this._reverseEntryMap.has(e)}_clear(){this._entryMap.clear(),this._reverseEntryMap.clear(),this._folderMap.clear()}}Ph.ReadOnlyAugmentedFileSystem=KO;Object.defineProperty(Dh,"__esModule",{value:!0});var cF=Dh.PyrightFileSystem=void 0;const HO=Pd,rS=ri,Ds=Hn,YO=Ph;class QO extends YO.ReadOnlyAugmentedFileSystem{constructor(e){super(e),this._rootSearched=new Set,this._partialStubPackagePaths=new Set,this._customUriMap=new Map}mkdirSync(e,n){this._realFS.mkdirSync(e,n)}chdir(e){this._realFS.chdir(e)}writeFileSync(e,n,i){this._realFS.writeFileSync(this._getOriginalPath(e),n,i)}unlinkSync(e){this._realFS.unlinkSync(this._getOriginalPath(e))}createWriteStream(e){return this._realFS.createWriteStream(this._getOriginalPath(e))}copyFileSync(e,n){this._realFS.copyFileSync(this._getOriginalPath(e),this._getOriginalPath(n))}getUri(e){const n=this._customUriMap.get(this.getMappedFilePath(e));return n?n.uri:this._realFS.getUri(e)}hasUriMapEntry(e,n){const i=this._customUriMap.get(n);return!(!i||i.uri!==e)}addUriMap(e,n){const i=this._customUriMap.get(n);return i?i.uri!==e?!1:(i.closed=!1,!0):(this._customUriMap.set(n,{uri:e,closed:!1,hasPendingRequest:!1}),!0)}removeUriMap(e,n){const i=this._customUriMap.get(n);return!i||i.uri!==e?!1:i.hasPendingRequest?(i.closed=!0,!0):(this._customUriMap.delete(n),!0)}pendingRequest(e,n){const i=this._customUriMap.get(e);if(!!i){if(!n&&i.closed){this._customUriMap.delete(e);return}i.hasPendingRequest=n}}isPartialStubPackagesScanned(e){var n;return this.isPathScanned((n=e.root)!==null&&n!==void 0?n:"")}isPathScanned(e){return this._rootSearched.has(e)}processPartialStubPackages(e,n){var i;for(const r of e){if(this._rootSearched.add(r),!this._realFS.existsSync(r)||!(0,Ds.isDirectory)(this._realFS,r))continue;let a=[];try{a=this._realFS.readdirEntriesSync(r)}catch{}for(const s of a){const l=(0,Ds.combinePaths)(r,s.name);if(!(s.isSymbolicLink()?!!(!((i=(0,Ds.tryStat)(this._realFS,l))===null||i===void 0)&&i.isDirectory()):s.isDirectory())||!s.name.endsWith(rS.stubsSuffix))continue;const u=(0,HO.getPyTypedInfo)(this._realFS,l);if(!u||!u.isPartiallyTyped)continue;this._partialStubPackagePaths.add(l);let f;const y=s.name.substr(0,s.name.length-rS.stubsSuffix.length);for(const p of n){const b=(0,Ds.combinePaths)(p,y);try{const v=(0,Ds.tryStat)(this._realFS,b);if(!(v!=null&&v.isDirectory()))continue;f=f!=null?f:this._getRelativePathPartialStubs(l);for(const m of f){const V=(0,Ds.combinePaths)(l,m),F=(0,Ds.combinePaths)(b,m);this._recordMovedEntry(F,V)}}catch{}}}}}clearPartialStubs(){super._clear(),this._rootSearched.clear(),this._partialStubPackagePaths.clear()}_getRelativePathPartialStubs(e){const n=[],i=(0,Ds.ensureTrailingDirectorySeparator)(e).length,r=a=>{for(const s of this._realFS.readdirEntriesSync(a)){const l=(0,Ds.combinePaths)(a,s.name);let o=s.isDirectory(),u=s.isFile();if(s.isSymbolicLink()){const f=(0,Ds.tryStat)(this._realFS,l);f&&(o=f.isDirectory(),u=f.isFile())}if(o&&r(l),u&&s.name.endsWith(".pyi")){const f=l.substring(i);f&&n.push(f)}}};return r(e),n}_isMovedEntry(e){return this._partialStubPackagePaths.has(e)||super._isMovedEntry(e)}}cF=Dh.PyrightFileSystem=QO;var Ad={},Z_={};(function(t){var e=Te&&Te.__createBinding||(Object.create?function(v,m,V,F){F===void 0&&(F=V),Object.defineProperty(v,F,{enumerable:!0,get:function(){return m[V]}})}:function(v,m,V,F){F===void 0&&(F=V),v[F]=m[V]}),n=Te&&Te.__setModuleDefault||(Object.create?function(v,m){Object.defineProperty(v,"default",{enumerable:!0,value:m})}:function(v,m){v.default=m}),i=Te&&Te.__importStar||function(v){if(v&&v.__esModule)return v;var m={};if(v!=null)for(var V in v)V!=="default"&&Object.prototype.hasOwnProperty.call(v,V)&&e(m,v,V);return n(m,v),m};Object.defineProperty(t,"__esModule",{value:!0}),t.getPathsFromPthFiles=t.isPythonBinary=t.findPythonSearchPaths=t.getTypeshedSubdirectory=t.getTypeShedFallbackPath=t.thirdPartyFolderName=t.stdLibFolderName=void 0;const r=Ht,a=i(ri),s=Hn;t.stdLibFolderName="stdlib",t.thirdPartyFolderName="stubs";function l(v){let m=v.getModulePath();if(!m)return;m=(0,s.getDirectoryPath)((0,s.ensureTrailingDirectorySeparator)((0,s.normalizePath)(m)));const V=(0,s.combinePaths)(m,a.typeshedFallback);if(v.existsSync(V))return V;const F=(0,s.combinePaths)((0,s.getDirectoryPath)(m),a.typeshedFallback);if(v.existsSync(F))return F}t.getTypeShedFallbackPath=l;function o(v,m){return(0,s.combinePaths)(v,m?t.stdLibFolderName:t.thirdPartyFolderName)}t.getTypeshedSubdirectory=o;function u(v,m,V,F,P,G){if(F.push("Finding python search paths"),m.venvPath!==void 0&&m.venv){const q=m.venv,U=(0,s.combinePaths)(m.venvPath,q),D=[],M=[];if([a.lib,a.lib64,a.libAlternate].forEach(T=>{const N=y(v,(0,s.combinePaths)(U,T),F);N&&(b(D,N),M.push(N))}),M.forEach(T=>{p(v,T).forEach(J=>{b(D,J)})}),D.length>0)return F.push(`Found the following '${a.sitePackages}' dirs`),D.forEach(T=>{F.push(`  ${T}`)}),D;F.push(`Did not find any '${a.sitePackages}' dirs. Falling back on python interpreter.`)}const te=V.getPythonSearchPaths(m.pythonPath,F);return P&&G?te.paths.filter(U=>!(0,s.containsPath)(G,U,!0)||(0,s.containsPath)(te.prefix,U,!0)):te.paths}t.findPythonSearchPaths=u;function f(v){return v=v.trim(),v==="python"||v==="python3"}t.isPythonBinary=f;function y(v,m,V){if(v.existsSync(m))V.push(`Found path '${m}'; looking for ${a.sitePackages}`);else{V.push(`Did not find '${m}'`);return}const F=(0,s.combinePaths)(m,a.sitePackages);if(v.existsSync(F))return V.push(`Found path '${F}'`),F;V.push(`Did not find '${F}', so looking for python subdirectory`);const P=(0,s.getFileSystemEntries)(v,m);for(let G=0;G<P.directories.length;G++){const te=P.directories[G];if(te.startsWith("python")){const q=(0,s.combinePaths)(m,te,a.sitePackages);if(v.existsSync(q))return V.push(`Found path '${q}'`),q;V.push(`Path '${q}' is not a valid directory`)}}}function p(v,m){const V=[];return v.readdirEntriesSync(m).filter(P=>(P.isFile()||P.isSymbolicLink())&&P.name.endsWith(".pth")).sort((P,G)=>(0,r.compareComparableValues)(P.name,G.name)).forEach(P=>{const G=(0,s.combinePaths)(m,P.name),te=(0,s.tryStat)(v,G);(te==null?void 0:te.isFile())&&te.size>0&&te.size<64*1024&&v.readFileSync(G,"utf8").split(/\r?\n/).forEach(D=>{const M=D.trim();if(M.length>0&&!M.startsWith("#")&&!M.match(/^import\s/)){const T=(0,s.combinePaths)(m,M);v.existsSync(T)&&(0,s.isDirectory)(v,T)&&V.push(T)}})}),V}t.getPathsFromPthFiles=p;function b(v,m){return v.some(V=>V===m)?!1:(v.push(m),!0)}})(Z_);var Is={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticRule=void 0,function(e){e.strictListInference="strictListInference",e.strictSetInference="strictSetInference",e.strictDictionaryInference="strictDictionaryInference",e.strictParameterNoneValue="strictParameterNoneValue",e.enableTypeIgnoreComments="enableTypeIgnoreComments",e.reportGeneralTypeIssues="reportGeneralTypeIssues",e.reportPropertyTypeMismatch="reportPropertyTypeMismatch",e.reportFunctionMemberAccess="reportFunctionMemberAccess",e.reportMissingImports="reportMissingImports",e.reportMissingModuleSource="reportMissingModuleSource",e.reportMissingTypeStubs="reportMissingTypeStubs",e.reportImportCycles="reportImportCycles",e.reportUnusedImport="reportUnusedImport",e.reportUnusedClass="reportUnusedClass",e.reportUnusedFunction="reportUnusedFunction",e.reportUnusedVariable="reportUnusedVariable",e.reportDuplicateImport="reportDuplicateImport",e.reportWildcardImportFromLibrary="reportWildcardImportFromLibrary",e.reportOptionalSubscript="reportOptionalSubscript",e.reportOptionalMemberAccess="reportOptionalMemberAccess",e.reportOptionalCall="reportOptionalCall",e.reportOptionalIterable="reportOptionalIterable",e.reportOptionalContextManager="reportOptionalContextManager",e.reportOptionalOperand="reportOptionalOperand",e.reportTypedDictNotRequiredAccess="reportTypedDictNotRequiredAccess",e.reportUntypedFunctionDecorator="reportUntypedFunctionDecorator",e.reportUntypedClassDecorator="reportUntypedClassDecorator",e.reportUntypedBaseClass="reportUntypedBaseClass",e.reportUntypedNamedTuple="reportUntypedNamedTuple",e.reportPrivateUsage="reportPrivateUsage",e.reportTypeCommentUsage="reportTypeCommentUsage",e.reportPrivateImportUsage="reportPrivateImportUsage",e.reportConstantRedefinition="reportConstantRedefinition",e.reportIncompatibleMethodOverride="reportIncompatibleMethodOverride",e.reportIncompatibleVariableOverride="reportIncompatibleVariableOverride",e.reportInconsistentConstructor="reportInconsistentConstructor",e.reportOverlappingOverload="reportOverlappingOverload",e.reportMissingSuperCall="reportMissingSuperCall",e.reportUninitializedInstanceVariable="reportUninitializedInstanceVariable",e.reportInvalidStringEscapeSequence="reportInvalidStringEscapeSequence",e.reportUnknownParameterType="reportUnknownParameterType",e.reportUnknownArgumentType="reportUnknownArgumentType",e.reportUnknownLambdaType="reportUnknownLambdaType",e.reportUnknownVariableType="reportUnknownVariableType",e.reportUnknownMemberType="reportUnknownMemberType",e.reportMissingParameterType="reportMissingParameterType",e.reportMissingTypeArgument="reportMissingTypeArgument",e.reportInvalidTypeVarUse="reportInvalidTypeVarUse",e.reportCallInDefaultInitializer="reportCallInDefaultInitializer",e.reportUnnecessaryIsInstance="reportUnnecessaryIsInstance",e.reportUnnecessaryCast="reportUnnecessaryCast",e.reportUnnecessaryComparison="reportUnnecessaryComparison",e.reportAssertAlwaysTrue="reportAssertAlwaysTrue",e.reportSelfClsParameterName="reportSelfClsParameterName",e.reportImplicitStringConcatenation="reportImplicitStringConcatenation",e.reportUndefinedVariable="reportUndefinedVariable",e.reportUnboundVariable="reportUnboundVariable",e.reportInvalidStubStatement="reportInvalidStubStatement",e.reportIncompleteStub="reportIncompleteStub",e.reportUnsupportedDunderAll="reportUnsupportedDunderAll",e.reportUnusedCallResult="reportUnusedCallResult",e.reportUnusedCoroutine="reportUnusedCoroutine",e.reportUnusedExpression="reportUnusedExpression",e.reportUnnecessaryTypeIgnoreComment="reportUnnecessaryTypeIgnoreComment",e.reportMatchNotExhaustive="reportMatchNotExhaustive"}(t.DiagnosticRule||(t.DiagnosticRule={}))})(Is);var hl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.is3x=t.versionFromMajorMinor=t.versionFromString=t.versionToString=t.latestStablePythonVersion=t.PythonVersion=void 0;var e;(function(s){s[s.V3_0=768]="V3_0",s[s.V3_1=769]="V3_1",s[s.V3_2=770]="V3_2",s[s.V3_3=771]="V3_3",s[s.V3_4=772]="V3_4",s[s.V3_5=773]="V3_5",s[s.V3_6=774]="V3_6",s[s.V3_7=775]="V3_7",s[s.V3_8=776]="V3_8",s[s.V3_9=777]="V3_9",s[s.V3_10=778]="V3_10",s[s.V3_11=779]="V3_11",s[s.V3_12=780]="V3_12"})(e=t.PythonVersion||(t.PythonVersion={})),t.latestStablePythonVersion=e.V3_10;function n(s){const l=s>>8&255,o=s&255;return`${l}.${o}`}t.versionToString=n;function i(s){const l=s.split(".");if(l.length<2)return;const o=parseInt(l[0],10),u=parseInt(l[1],10);return r(o,u)}t.versionFromString=i;function r(s,l){if(isNaN(s)||isNaN(l)||s>255||l>255)return;const o=s*256+l;if(e[o]!==void 0&&!!a(o))return o}t.versionFromMajorMinor=r;function a(s){return s>>8===3}t.is3x=a})(hl);(function(t){var e=Te&&Te.__createBinding||(Object.create?function(te,q,U,D){D===void 0&&(D=U),Object.defineProperty(te,D,{enumerable:!0,get:function(){return q[U]}})}:function(te,q,U,D){D===void 0&&(D=U),te[D]=q[U]}),n=Te&&Te.__setModuleDefault||(Object.create?function(te,q){Object.defineProperty(te,"default",{enumerable:!0,value:q})}:function(te,q){te.default=q}),i=Te&&Te.__importStar||function(te){if(te&&te.__esModule)return te;var q={};if(te!=null)for(var U in te)U!=="default"&&Object.prototype.hasOwnProperty.call(te,U)&&e(q,te,U);return n(q,te),q};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigOptions=t.getStrictDiagnosticRuleSet=t.getBasicDiagnosticRuleSet=t.getOffDiagnosticRuleSet=t.getStrictModeNotOverriddenRules=t.getDiagLevelDiagnosticRules=t.getBooleanDiagnosticRules=t.cloneDiagnosticRuleSet=t.ExecutionEnvironment=t.PythonPlatform=void 0;const r=K_,a=Z_,s=i(ri),l=Dt,o=Is,u=Hn,f=hl;(function(te){te.Darwin="Darwin",te.Windows="Windows",te.Linux="Linux"})(t.PythonPlatform||(t.PythonPlatform={}));class y{constructor(q,U,D,M){this.extraPaths=[],this.root=q||void 0,this.pythonVersion=U||f.latestStablePythonVersion,this.pythonPlatform=D,this.extraPaths=[...M!=null?M:[]]}}t.ExecutionEnvironment=y;function p(te){return Object.assign({},te)}t.cloneDiagnosticRuleSet=p;function b(te=!1){const q=[o.DiagnosticRule.strictListInference,o.DiagnosticRule.strictSetInference,o.DiagnosticRule.strictDictionaryInference,o.DiagnosticRule.strictParameterNoneValue];return te&&q.push(o.DiagnosticRule.enableTypeIgnoreComments),q}t.getBooleanDiagnosticRules=b;function v(){return[o.DiagnosticRule.reportGeneralTypeIssues,o.DiagnosticRule.reportPropertyTypeMismatch,o.DiagnosticRule.reportFunctionMemberAccess,o.DiagnosticRule.reportMissingImports,o.DiagnosticRule.reportMissingModuleSource,o.DiagnosticRule.reportMissingTypeStubs,o.DiagnosticRule.reportImportCycles,o.DiagnosticRule.reportUnusedImport,o.DiagnosticRule.reportUnusedClass,o.DiagnosticRule.reportUnusedFunction,o.DiagnosticRule.reportUnusedVariable,o.DiagnosticRule.reportDuplicateImport,o.DiagnosticRule.reportWildcardImportFromLibrary,o.DiagnosticRule.reportOptionalSubscript,o.DiagnosticRule.reportOptionalMemberAccess,o.DiagnosticRule.reportOptionalCall,o.DiagnosticRule.reportOptionalIterable,o.DiagnosticRule.reportOptionalContextManager,o.DiagnosticRule.reportOptionalOperand,o.DiagnosticRule.reportTypedDictNotRequiredAccess,o.DiagnosticRule.reportUntypedFunctionDecorator,o.DiagnosticRule.reportUntypedClassDecorator,o.DiagnosticRule.reportUntypedBaseClass,o.DiagnosticRule.reportUntypedNamedTuple,o.DiagnosticRule.reportPrivateUsage,o.DiagnosticRule.reportTypeCommentUsage,o.DiagnosticRule.reportPrivateImportUsage,o.DiagnosticRule.reportConstantRedefinition,o.DiagnosticRule.reportIncompatibleMethodOverride,o.DiagnosticRule.reportIncompatibleVariableOverride,o.DiagnosticRule.reportInconsistentConstructor,o.DiagnosticRule.reportOverlappingOverload,o.DiagnosticRule.reportMissingSuperCall,o.DiagnosticRule.reportUninitializedInstanceVariable,o.DiagnosticRule.reportInvalidStringEscapeSequence,o.DiagnosticRule.reportUnknownParameterType,o.DiagnosticRule.reportUnknownArgumentType,o.DiagnosticRule.reportUnknownLambdaType,o.DiagnosticRule.reportUnknownVariableType,o.DiagnosticRule.reportUnknownMemberType,o.DiagnosticRule.reportMissingParameterType,o.DiagnosticRule.reportMissingTypeArgument,o.DiagnosticRule.reportInvalidTypeVarUse,o.DiagnosticRule.reportCallInDefaultInitializer,o.DiagnosticRule.reportUnnecessaryIsInstance,o.DiagnosticRule.reportUnnecessaryCast,o.DiagnosticRule.reportUnnecessaryComparison,o.DiagnosticRule.reportAssertAlwaysTrue,o.DiagnosticRule.reportSelfClsParameterName,o.DiagnosticRule.reportImplicitStringConcatenation,o.DiagnosticRule.reportUndefinedVariable,o.DiagnosticRule.reportUnboundVariable,o.DiagnosticRule.reportInvalidStubStatement,o.DiagnosticRule.reportIncompleteStub,o.DiagnosticRule.reportUnsupportedDunderAll,o.DiagnosticRule.reportUnusedCallResult,o.DiagnosticRule.reportUnusedCoroutine,o.DiagnosticRule.reportUnusedExpression,o.DiagnosticRule.reportUnnecessaryTypeIgnoreComment,o.DiagnosticRule.reportMatchNotExhaustive]}t.getDiagLevelDiagnosticRules=v;function m(){return[o.DiagnosticRule.reportMissingModuleSource]}t.getStrictModeNotOverriddenRules=m;function V(){return{printUnknownAsAny:!0,omitTypeArgsIfAny:!0,omitUnannotatedParamType:!0,omitConditionalConstraint:!0,pep604Printing:!0,strictListInference:!1,strictSetInference:!1,strictDictionaryInference:!1,strictParameterNoneValue:!0,enableTypeIgnoreComments:!0,reportGeneralTypeIssues:"none",reportPropertyTypeMismatch:"none",reportFunctionMemberAccess:"none",reportMissingImports:"warning",reportMissingModuleSource:"warning",reportMissingTypeStubs:"none",reportImportCycles:"none",reportUnusedImport:"none",reportUnusedClass:"none",reportUnusedFunction:"none",reportUnusedVariable:"none",reportDuplicateImport:"none",reportWildcardImportFromLibrary:"none",reportOptionalSubscript:"none",reportOptionalMemberAccess:"none",reportOptionalCall:"none",reportOptionalIterable:"none",reportOptionalContextManager:"none",reportOptionalOperand:"none",reportTypedDictNotRequiredAccess:"none",reportUntypedFunctionDecorator:"none",reportUntypedClassDecorator:"none",reportUntypedBaseClass:"none",reportUntypedNamedTuple:"none",reportPrivateUsage:"none",reportTypeCommentUsage:"none",reportPrivateImportUsage:"none",reportConstantRedefinition:"none",reportIncompatibleMethodOverride:"none",reportIncompatibleVariableOverride:"none",reportInconsistentConstructor:"none",reportOverlappingOverload:"none",reportMissingSuperCall:"none",reportUninitializedInstanceVariable:"none",reportInvalidStringEscapeSequence:"none",reportUnknownParameterType:"none",reportUnknownArgumentType:"none",reportUnknownLambdaType:"none",reportUnknownVariableType:"none",reportUnknownMemberType:"none",reportMissingParameterType:"none",reportMissingTypeArgument:"none",reportInvalidTypeVarUse:"none",reportCallInDefaultInitializer:"none",reportUnnecessaryIsInstance:"none",reportUnnecessaryCast:"none",reportUnnecessaryComparison:"none",reportAssertAlwaysTrue:"none",reportSelfClsParameterName:"none",reportImplicitStringConcatenation:"none",reportUnboundVariable:"none",reportUndefinedVariable:"warning",reportInvalidStubStatement:"none",reportIncompleteStub:"none",reportUnsupportedDunderAll:"none",reportUnusedCallResult:"none",reportUnusedCoroutine:"none",reportUnusedExpression:"none",reportUnnecessaryTypeIgnoreComment:"none",reportMatchNotExhaustive:"none"}}t.getOffDiagnosticRuleSet=V;function F(){return{printUnknownAsAny:!1,omitTypeArgsIfAny:!1,omitUnannotatedParamType:!0,omitConditionalConstraint:!1,pep604Printing:!0,strictListInference:!1,strictSetInference:!1,strictDictionaryInference:!1,strictParameterNoneValue:!0,enableTypeIgnoreComments:!0,reportGeneralTypeIssues:"error",reportPropertyTypeMismatch:"none",reportFunctionMemberAccess:"none",reportMissingImports:"error",reportMissingModuleSource:"warning",reportMissingTypeStubs:"none",reportImportCycles:"none",reportUnusedImport:"none",reportUnusedClass:"none",reportUnusedFunction:"none",reportUnusedVariable:"none",reportDuplicateImport:"none",reportWildcardImportFromLibrary:"warning",reportOptionalSubscript:"error",reportOptionalMemberAccess:"error",reportOptionalCall:"error",reportOptionalIterable:"error",reportOptionalContextManager:"error",reportOptionalOperand:"error",reportTypedDictNotRequiredAccess:"error",reportUntypedFunctionDecorator:"none",reportUntypedClassDecorator:"none",reportUntypedBaseClass:"none",reportUntypedNamedTuple:"none",reportPrivateUsage:"none",reportTypeCommentUsage:"none",reportPrivateImportUsage:"error",reportConstantRedefinition:"none",reportIncompatibleMethodOverride:"none",reportIncompatibleVariableOverride:"none",reportInconsistentConstructor:"none",reportOverlappingOverload:"none",reportMissingSuperCall:"none",reportUninitializedInstanceVariable:"none",reportInvalidStringEscapeSequence:"warning",reportUnknownParameterType:"none",reportUnknownArgumentType:"none",reportUnknownLambdaType:"none",reportUnknownVariableType:"none",reportUnknownMemberType:"none",reportMissingParameterType:"none",reportMissingTypeArgument:"none",reportInvalidTypeVarUse:"warning",reportCallInDefaultInitializer:"none",reportUnnecessaryIsInstance:"none",reportUnnecessaryCast:"none",reportUnnecessaryComparison:"none",reportAssertAlwaysTrue:"warning",reportSelfClsParameterName:"warning",reportImplicitStringConcatenation:"none",reportUnboundVariable:"error",reportUndefinedVariable:"error",reportInvalidStubStatement:"none",reportIncompleteStub:"none",reportUnsupportedDunderAll:"warning",reportUnusedCallResult:"none",reportUnusedCoroutine:"error",reportUnusedExpression:"warning",reportUnnecessaryTypeIgnoreComment:"none",reportMatchNotExhaustive:"none"}}t.getBasicDiagnosticRuleSet=F;function P(){return{printUnknownAsAny:!1,omitTypeArgsIfAny:!1,omitUnannotatedParamType:!1,omitConditionalConstraint:!1,pep604Printing:!0,strictListInference:!0,strictSetInference:!0,strictDictionaryInference:!0,strictParameterNoneValue:!0,enableTypeIgnoreComments:!0,reportGeneralTypeIssues:"error",reportPropertyTypeMismatch:"none",reportFunctionMemberAccess:"error",reportMissingImports:"error",reportMissingModuleSource:"warning",reportMissingTypeStubs:"error",reportImportCycles:"error",reportUnusedImport:"error",reportUnusedClass:"error",reportUnusedFunction:"error",reportUnusedVariable:"error",reportDuplicateImport:"error",reportWildcardImportFromLibrary:"error",reportOptionalSubscript:"error",reportOptionalMemberAccess:"error",reportOptionalCall:"error",reportOptionalIterable:"error",reportOptionalContextManager:"error",reportOptionalOperand:"error",reportTypedDictNotRequiredAccess:"error",reportUntypedFunctionDecorator:"error",reportUntypedClassDecorator:"error",reportUntypedBaseClass:"error",reportUntypedNamedTuple:"error",reportPrivateUsage:"error",reportTypeCommentUsage:"error",reportPrivateImportUsage:"error",reportConstantRedefinition:"error",reportIncompatibleMethodOverride:"error",reportIncompatibleVariableOverride:"error",reportInconsistentConstructor:"error",reportOverlappingOverload:"error",reportMissingSuperCall:"none",reportUninitializedInstanceVariable:"none",reportInvalidStringEscapeSequence:"error",reportUnknownParameterType:"error",reportUnknownArgumentType:"error",reportUnknownLambdaType:"error",reportUnknownVariableType:"error",reportUnknownMemberType:"error",reportMissingParameterType:"error",reportMissingTypeArgument:"error",reportInvalidTypeVarUse:"error",reportCallInDefaultInitializer:"none",reportUnnecessaryIsInstance:"error",reportUnnecessaryCast:"error",reportUnnecessaryComparison:"error",reportAssertAlwaysTrue:"error",reportSelfClsParameterName:"error",reportImplicitStringConcatenation:"none",reportUnboundVariable:"error",reportUndefinedVariable:"error",reportInvalidStubStatement:"error",reportIncompleteStub:"error",reportUnsupportedDunderAll:"error",reportUnusedCallResult:"none",reportUnusedCoroutine:"error",reportUnusedExpression:"error",reportUnnecessaryTypeIgnoreComment:"none",reportMatchNotExhaustive:"error"}}t.getStrictDiagnosticRuleSet=P;class G{constructor(q,U){this.include=[],this.exclude=[],this.ignore=[],this.strict=[],this.defineConstant=new Map,this.autoImportCompletions=!0,this.indexing=!1,this.logTypeEvaluationTime=!1,this.typeEvaluationTimeThreshold=50,this.initializedFromJson=!1,this.analyzeUnannotatedFunctions=!0,this.executionEnvironments=[],this.projectRoot=q,this.typeCheckingMode=U,this.diagnosticRuleSet=G.getDiagnosticRuleSet(U)}static getDiagnosticRuleSet(q){return q==="strict"?P():q==="off"?V():F()}getDefaultExecEnvironment(){return new y(this.projectRoot,this.defaultPythonVersion,this.defaultPythonPlatform,this.defaultExtraPaths)}findExecEnvironment(q){var U;return(U=this.executionEnvironments.find(D=>{const M=(0,u.ensureTrailingDirectorySeparator)((0,u.normalizePath)((0,u.combinePaths)(this.projectRoot,D.root)));return q.startsWith(M)}))!==null&&U!==void 0?U:this.getDefaultExecEnvironment()}getExecutionEnvironments(){return this.executionEnvironments.length>0?this.executionEnvironments:[this.getDefaultExecEnvironment()]}initializeFromJson(q,U,D,M,T,N,J=!1){this.initializedFromJson=!0,J||(this.include=[],q.include!==void 0&&(Array.isArray(q.include)?q.include.forEach((W,Y)=>{typeof W!="string"?D.error(`Index ${Y} of "include" array should be a string.`):(0,r.isAbsolute)(W)?D.error(`Ignoring path "${W}" in "include" array because it is not relative.`):this.include.push((0,u.getFileSpec)(M,this.projectRoot,W))}):D.error('Config "include" entry must must contain an array.'))),this.exclude=[],q.exclude!==void 0&&(Array.isArray(q.exclude)?q.exclude.forEach((W,Y)=>{typeof W!="string"?D.error(`Index ${Y} of "exclude" array should be a string.`):(0,r.isAbsolute)(W)?D.error(`Ignoring path "${W}" in "exclude" array because it is not relative.`):this.exclude.push((0,u.getFileSpec)(M,this.projectRoot,W))}):D.error('Config "exclude" entry must contain an array.')),this.ignore=[],q.ignore!==void 0&&(Array.isArray(q.ignore)?q.ignore.forEach((W,Y)=>{typeof W!="string"?D.error(`Index ${Y} of "ignore" array should be a string.`):(0,r.isAbsolute)(W)?D.error(`Ignoring path "${W}" in "ignore" array because it is not relative.`):this.ignore.push((0,u.getFileSpec)(M,this.projectRoot,W))}):D.error('Config "ignore" entry must contain an array.')),this.strict=[],q.strict!==void 0&&(Array.isArray(q.strict)?q.strict.forEach((W,Y)=>{typeof W!="string"?D.error(`Index ${Y} of "strict" array should be a string.`):(0,r.isAbsolute)(W)?D.error(`Ignoring path "${W}" in "strict" array because it is not relative.`):this.strict.push((0,u.getFileSpec)(M,this.projectRoot,W))}):D.error('Config "strict" entry must contain an array.'));let L;q.typeCheckingMode!==void 0&&(q.typeCheckingMode==="off"||q.typeCheckingMode==="basic"||q.typeCheckingMode==="strict"?L=q.typeCheckingMode:D.error('Config "typeCheckingMode" entry must contain "off", "basic", or "strict".')),q.useLibraryCodeForTypes!==void 0&&(typeof q.useLibraryCodeForTypes=="boolean"?this.useLibraryCodeForTypes=q.useLibraryCodeForTypes:D.error('Config "useLibraryCodeForTypes" entry must be true or false.')),this.typeCheckingMode=L||U;const ce=G.getDiagnosticRuleSet(this.typeCheckingMode);if(this.diagnosticRuleSet={...ce},this.applyDiagnosticOverrides(N),b(!0).forEach(ue=>{this.diagnosticRuleSet[ue]=this._convertBoolean(q[ue],ue,this.diagnosticRuleSet[ue])}),v().forEach(ue=>{this.diagnosticRuleSet[ue]=this._convertDiagnosticLevel(q[ue],ue,this.diagnosticRuleSet[ue])}),this.venvPath=void 0,q.venvPath!==void 0&&(typeof q.venvPath!="string"?D.error('Config "venvPath" field must contain a string.'):this.venvPath=(0,u.normalizePath)((0,u.combinePaths)(this.projectRoot,q.venvPath))),this.venv=void 0,q.venv!==void 0&&(typeof q.venv!="string"?D.error('Config "venv" field must contain a string.'):this.venv=q.venv),q.extraPaths!==void 0&&(this.defaultExtraPaths=[],Array.isArray(q.extraPaths)?q.extraPaths.forEach((W,Y)=>{typeof W!="string"?D.error(`Config "extraPaths" field ${Y} must be a string.`):this.defaultExtraPaths.push((0,u.normalizePath)((0,u.combinePaths)(this.projectRoot,W)))}):D.error('Config "extraPaths" field must contain an array.')),q.pythonVersion!==void 0)if(typeof q.pythonVersion=="string"){const ue=(0,f.versionFromString)(q.pythonVersion);ue?this.defaultPythonVersion=ue:D.error('Config "pythonVersion" field contains unsupported version.')}else D.error('Config "pythonVersion" field must contain a string.');this.ensureDefaultPythonVersion(T,D),q.pythonPlatform!==void 0&&(typeof q.pythonPlatform!="string"?D.error('Config "pythonPlatform" field must contain a string.'):this.defaultPythonPlatform=q.pythonPlatform),this.ensureDefaultPythonPlatform(T,D),this.typeshedPath=void 0,q.typeshedPath!==void 0&&(typeof q.typeshedPath!="string"?D.error('Config "typeshedPath" field must contain a string.'):this.typeshedPath=q.typeshedPath?(0,u.normalizePath)((0,u.combinePaths)(this.projectRoot,q.typeshedPath)):""),this.stubPath=void 0,q.typingsPath!==void 0&&(typeof q.typingsPath!="string"?D.error('Config "typingsPath" field must contain a string.'):(D.error('Config "typingsPath" is now deprecated. Please, use stubPath instead.'),this.stubPath=(0,u.normalizePath)((0,u.combinePaths)(this.projectRoot,q.typingsPath)))),q.stubPath!==void 0&&(typeof q.stubPath!="string"?D.error('Config "stubPath" field must contain a string.'):this.stubPath=(0,u.normalizePath)((0,u.combinePaths)(this.projectRoot,q.stubPath))),q.verboseOutput!==void 0&&(typeof q.verboseOutput!="boolean"?D.error('Config "verboseOutput" field must be true or false.'):this.verboseOutput=q.verboseOutput),q.defineConstant!==void 0&&(typeof q.defineConstant!="object"||Array.isArray(q.defineConstant)?D.error('Config "defineConstant" field must contain a map indexed by constant names.'):Object.getOwnPropertyNames(q.defineConstant).forEach(W=>{const Y=q.defineConstant[W],ee=typeof Y;ee!=="boolean"&&ee!=="string"?D.error(`Defined constant "${W}" must be associated with a boolean or string value.`):this.defineConstant.set(W,Y)})),q.useLibraryCodeForTypes!==void 0&&(typeof q.useLibraryCodeForTypes!="boolean"?D.error('Config "useLibraryCodeForTypes" field must be true or false.'):this.useLibraryCodeForTypes=q.useLibraryCodeForTypes),this.executionEnvironments=[],q.executionEnvironments!==void 0&&(Array.isArray(q.executionEnvironments)?q.executionEnvironments.forEach((W,Y)=>{const ee=this._initExecutionEnvironmentFromJson(W,Y,D);ee&&this.executionEnvironments.push(ee)}):D.error('Config "executionEnvironments" field must contain an array.')),q.autoImportCompletions!==void 0&&(typeof q.autoImportCompletions!="boolean"?D.error('Config "autoImportCompletions" field must be true or false.'):this.autoImportCompletions=q.autoImportCompletions),q.indexing!==void 0&&(typeof q.indexing!="boolean"?D.error('Config "indexing" field must be true or false.'):this.indexing=q.indexing),q.logTypeEvaluationTime!==void 0&&(typeof q.logTypeEvaluationTime!="boolean"?D.error('Config "logTypeEvaluationTime" field must be true or false.'):this.logTypeEvaluationTime=q.logTypeEvaluationTime),q.typeEvaluationTimeThreshold!==void 0&&(typeof q.typeEvaluationTimeThreshold!="number"?D.error('Config "typeEvaluationTimeThreshold" field must be a number.'):this.typeEvaluationTimeThreshold=q.typeEvaluationTimeThreshold)}ensureDefaultPythonPlatform(q,U){this.defaultPythonPlatform===void 0&&(this.defaultPythonPlatform=q.getPythonPlatform(),this.defaultPythonPlatform!==void 0&&U.info(`Assuming Python platform ${this.defaultPythonPlatform}`))}ensureDefaultPythonVersion(q,U){if(this.defaultPythonVersion!==void 0)return;const D=[];this.defaultPythonVersion=q.getPythonVersion(this.pythonPath,D),this.defaultPythonVersion!==void 0&&U.info(`Assuming Python version ${(0,f.versionToString)(this.defaultPythonVersion)}`);for(const M of D)U.info(M)}ensureDefaultExtraPaths(q,U,D){const M=[];if(U){const T=(0,u.resolvePaths)(this.projectRoot,s.src);q.existsSync(T)&&!q.existsSync((0,u.resolvePaths)(T,"__init__.py"))&&M.push(T)}if(D&&D.length>0)for(const T of D){const N=(0,u.resolvePaths)(this.projectRoot,T);M.push(N),(0,u.isDirectory)(q,N)&&(0,l.appendArray)(M,(0,a.getPathsFromPthFiles)(q,N))}M.length>0&&(this.defaultExtraPaths=M)}applyDiagnosticOverrides(q){if(!!q)for(const U of v()){const D=q[U];D!==void 0&&(this.diagnosticRuleSet[U]=D)}}_convertBoolean(q,U,D){return q===void 0?D:typeof q=="boolean"?!!q:(console.log(`Config "${U}" entry must be true or false.`),D)}_convertDiagnosticLevel(q,U,D){return q===void 0?D:typeof q=="boolean"?q?"error":"none":typeof q=="string"&&(q==="error"||q==="warning"||q==="information"||q==="none")?q:(console.log(`Config "${U}" entry must be true, false, "error", "warning", "information" or "none".`),D)}_initExecutionEnvironmentFromJson(q,U,D){try{const M=new y(this.projectRoot,this.defaultPythonVersion,this.defaultPythonPlatform,this.defaultExtraPaths);if(q.root&&typeof q.root=="string"?M.root=(0,u.normalizePath)((0,u.combinePaths)(this.projectRoot,q.root)):D.error(`Config executionEnvironments index ${U}: missing root value.`),q.extraPaths&&(Array.isArray(q.extraPaths)?q.extraPaths.forEach((N,J)=>{typeof N!="string"?D.error(`Config executionEnvironments index ${U}: extraPaths field ${J} must be a string.`):M.extraPaths.push((0,u.normalizePath)((0,u.combinePaths)(this.projectRoot,N)))}):D.error(`Config executionEnvironments index ${U}: extraPaths field must contain an array.`)),q.pythonVersion)if(typeof q.pythonVersion=="string"){const T=(0,f.versionFromString)(q.pythonVersion);T?M.pythonVersion=T:D.warn(`Config executionEnvironments index ${U} contains unsupported pythonVersion.`)}else D.error(`Config executionEnvironments index ${U} pythonVersion must be a string.`);return q.pythonPlatform&&(typeof q.pythonPlatform=="string"?M.pythonPlatform=q.pythonPlatform:D.error(`Config executionEnvironments index ${U} pythonPlatform must be a string.`)),M}catch{D.error(`Config executionEnvironments index ${U} is not accessible.`)}}}t.ConfigOptions=G})(Ad);var Ah={},Vn={},on={};Object.defineProperty(on,"__esModule",{value:!0});on.unicodePc=on.unicodeNdSurrogate=on.unicodeNd=on.unicodeMcSurrogate=on.unicodeMc=on.unicodeMnSurrogate=on.unicodeMn=on.unicodeNlSurrogate=on.unicodeNl=on.unicodeLmSurrogate=on.unicodeLm=on.unicodeLoSurrogate=on.unicodeLo=on.unicodeLt=on.unicodeLlSurrogate=on.unicodeLl=on.unicodeLuSurrogate=on.unicodeLu=void 0;on.unicodeLu=[[65,90],[192,214],[216,222],256,258,260,262,264,266,268,270,272,274,276,278,280,282,284,286,288,290,292,294,296,298,300,302,304,306,308,310,313,315,317,319,321,323,325,327,330,332,334,336,338,340,342,344,346,348,350,352,354,356,358,360,362,364,366,368,370,372,374,[376,377],379,381,[385,386],388,[390,391],[393,395],[398,401],[403,404],[406,408],[412,413],[415,416],418,420,[422,423],425,428,[430,431],[433,435],437,[439,440],444,452,455,458,461,463,465,467,469,471,473,475,478,480,482,484,486,488,490,492,494,497,500,[502,504],506,508,510,512,514,516,518,520,522,524,526,528,530,532,534,536,538,540,542,544,546,548,550,552,554,556,558,560,562,[570,571],[573,574],577,[579,582],584,586,588,590,880,882,886,895,902,[904,906],908,[910,911],[913,929],[931,939],975,[978,980],984,986,988,990,992,994,996,998,1e3,1002,1004,1006,1012,1015,[1017,1018],[1021,1071],1120,1122,1124,1126,1128,1130,1132,1134,1136,1138,1140,1142,1144,1146,1148,1150,1152,1162,1164,1166,1168,1170,1172,1174,1176,1178,1180,1182,1184,1186,1188,1190,1192,1194,1196,1198,1200,1202,1204,1206,1208,1210,1212,1214,[1216,1217],1219,1221,1223,1225,1227,1229,1232,1234,1236,1238,1240,1242,1244,1246,1248,1250,1252,1254,1256,1258,1260,1262,1264,1266,1268,1270,1272,1274,1276,1278,1280,1282,1284,1286,1288,1290,1292,1294,1296,1298,1300,1302,1304,1306,1308,1310,1312,1314,1316,1318,1320,1322,1324,1326,[1329,1366],[4256,4293],4295,4301,[5024,5109],7680,7682,7684,7686,7688,7690,7692,7694,7696,7698,7700,7702,7704,7706,7708,7710,7712,7714,7716,7718,7720,7722,7724,7726,7728,7730,7732,7734,7736,7738,7740,7742,7744,7746,7748,7750,7752,7754,7756,7758,7760,7762,7764,7766,7768,7770,7772,7774,7776,7778,7780,7782,7784,7786,7788,7790,7792,7794,7796,7798,7800,7802,7804,7806,7808,7810,7812,7814,7816,7818,7820,7822,7824,7826,7828,7838,7840,7842,7844,7846,7848,7850,7852,7854,7856,7858,7860,7862,7864,7866,7868,7870,7872,7874,7876,7878,7880,7882,7884,7886,7888,7890,7892,7894,7896,7898,7900,7902,7904,7906,7908,7910,7912,7914,7916,7918,7920,7922,7924,7926,7928,7930,7932,7934,[7944,7951],[7960,7965],[7976,7983],[7992,7999],[8008,8013],8025,8027,8029,8031,[8040,8047],[8120,8123],[8136,8139],[8152,8155],[8168,8172],[8184,8187],8450,8455,[8459,8461],[8464,8466],8469,[8473,8477],8484,8486,8488,[8490,8493],[8496,8499],[8510,8511],8517,8579,[11264,11310],11360,[11362,11364],11367,11369,11371,[11373,11376],11378,11381,[11390,11392],11394,11396,11398,11400,11402,11404,11406,11408,11410,11412,11414,11416,11418,11420,11422,11424,11426,11428,11430,11432,11434,11436,11438,11440,11442,11444,11446,11448,11450,11452,11454,11456,11458,11460,11462,11464,11466,11468,11470,11472,11474,11476,11478,11480,11482,11484,11486,11488,11490,11499,11501,11506,42560,42562,42564,42566,42568,42570,42572,42574,42576,42578,42580,42582,42584,42586,42588,42590,42592,42594,42596,42598,42600,42602,42604,42624,42626,42628,42630,42632,42634,42636,42638,42640,42642,42644,42646,42648,42650,42786,42788,42790,42792,42794,42796,42798,42802,42804,42806,42808,42810,42812,42814,42816,42818,42820,42822,42824,42826,42828,42830,42832,42834,42836,42838,42840,42842,42844,42846,42848,42850,42852,42854,42856,42858,42860,42862,42873,42875,[42877,42878],42880,42882,42884,42886,42891,42893,42896,42898,42902,42904,42906,42908,42910,42912,42914,42916,42918,42920,[42922,42926],[42928,42932],42934,[65313,65338],[66560,66599],[66736,66771],[68736,68786],[71840,71871],[119808,119833],[119860,119885],[119912,119937],119964,[119966,119967],119970,[119973,119974],[119977,119980],[119982,119989],[120016,120041],[120068,120069],[120071,120074],[120077,120084],[120086,120092],[120120,120121],[120123,120126],[120128,120132],120134,[120138,120144],[120172,120197],[120224,120249],[120276,120301],[120328,120353],[120380,120405],[120432,120457],[120488,120512],[120546,120570],[120604,120628],[120662,120686],[120720,120744],120778,[125184,125217]];on.unicodeLuSurrogate={55297:[[56320,56359],[56496,56531]],55299:[[56448,56498]],55302:[[56480,56511]],55323:[[56896,56927]],55349:[[56320,56345],[56372,56397],[56424,56449],56476,[56478,56479],56482,[56485,56486],[56489,56492],[56494,56501],[56528,56553],[56580,56581],[56583,56586],[56589,56596],[56598,56604],[56632,56633],[56635,56638],[56640,56644],56646,[56650,56656],[56684,56709],[56736,56761],[56788,56813],[56840,56865],[56892,56917],[56944,56969],[57e3,57024],[57058,57082],[57116,57140],[57174,57198],[57232,57256],[57290,57290]],55354:[[56576,56609]]};on.unicodeLl=[[97,122],181,[223,246],[248,255],257,259,261,263,265,267,269,271,273,275,277,279,281,283,285,287,289,291,293,295,297,299,301,303,305,307,309,[311,312],314,316,318,320,322,324,326,[328,329],331,333,335,337,339,341,343,345,347,349,351,353,355,357,359,361,363,365,367,369,371,373,375,378,380,[382,384],387,389,392,[396,397],402,405,[409,411],414,417,419,421,424,[426,427],429,432,436,438,[441,442],[445,447],454,457,460,462,464,466,468,470,472,474,[476,477],479,481,483,485,487,489,491,493,[495,496],499,501,505,507,509,511,513,515,517,519,521,523,525,527,529,531,533,535,537,539,541,543,545,547,549,551,553,555,557,559,561,[563,569],572,[575,576],578,583,585,587,589,[591,659],[661,687],881,883,887,[891,893],912,[940,974],[976,977],[981,983],985,987,989,991,993,995,997,999,1001,1003,1005,[1007,1011],1013,1016,[1019,1020],[1072,1119],1121,1123,1125,1127,1129,1131,1133,1135,1137,1139,1141,1143,1145,1147,1149,1151,1153,1163,1165,1167,1169,1171,1173,1175,1177,1179,1181,1183,1185,1187,1189,1191,1193,1195,1197,1199,1201,1203,1205,1207,1209,1211,1213,1215,1218,1220,1222,1224,1226,1228,[1230,1231],1233,1235,1237,1239,1241,1243,1245,1247,1249,1251,1253,1255,1257,1259,1261,1263,1265,1267,1269,1271,1273,1275,1277,1279,1281,1283,1285,1287,1289,1291,1293,1295,1297,1299,1301,1303,1305,1307,1309,1311,1313,1315,1317,1319,1321,1323,1325,1327,[1377,1415],[5112,5117],[7296,7304],[7424,7467],[7531,7543],[7545,7578],7681,7683,7685,7687,7689,7691,7693,7695,7697,7699,7701,7703,7705,7707,7709,7711,7713,7715,7717,7719,7721,7723,7725,7727,7729,7731,7733,7735,7737,7739,7741,7743,7745,7747,7749,7751,7753,7755,7757,7759,7761,7763,7765,7767,7769,7771,7773,7775,7777,7779,7781,7783,7785,7787,7789,7791,7793,7795,7797,7799,7801,7803,7805,7807,7809,7811,7813,7815,7817,7819,7821,7823,7825,7827,[7829,7837],7839,7841,7843,7845,7847,7849,7851,7853,7855,7857,7859,7861,7863,7865,7867,7869,7871,7873,7875,7877,7879,7881,7883,7885,7887,7889,7891,7893,7895,7897,7899,7901,7903,7905,7907,7909,7911,7913,7915,7917,7919,7921,7923,7925,7927,7929,7931,7933,[7935,7943],[7952,7957],[7968,7975],[7984,7991],[8e3,8005],[8016,8023],[8032,8039],[8048,8061],[8064,8071],[8080,8087],[8096,8103],[8112,8116],[8118,8119],8126,[8130,8132],[8134,8135],[8144,8147],[8150,8151],[8160,8167],[8178,8180],[8182,8183],8458,[8462,8463],8467,8495,8500,8505,[8508,8509],[8518,8521],8526,8580,[11312,11358],11361,[11365,11366],11368,11370,11372,11377,[11379,11380],[11382,11387],11393,11395,11397,11399,11401,11403,11405,11407,11409,11411,11413,11415,11417,11419,11421,11423,11425,11427,11429,11431,11433,11435,11437,11439,11441,11443,11445,11447,11449,11451,11453,11455,11457,11459,11461,11463,11465,11467,11469,11471,11473,11475,11477,11479,11481,11483,11485,11487,11489,[11491,11492],11500,11502,11507,[11520,11557],11559,11565,42561,42563,42565,42567,42569,42571,42573,42575,42577,42579,2581,42583,42585,42587,42589,42591,42593,42595,42597,42599,42601,42603,42605,42625,42627,42629,42631,42633,42635,42637,42639,42641,42643,42645,42647,42649,42651,42787,42789,42791,42793,42795,42797,[42799,42801],42803,42805,42807,42809,42811,42813,42815,42817,42819,42821,42823,42825,42827,42829,42831,42833,42835,42837,42839,42841,42843,42845,42847,42849,42851,42853,42855,42857,42859,42861,42863,[42865,42872],42874,42876,42879,42881,42883,42885,42887,42892,42894,42897,[42899,42901],42903,42905,42907,42909,42911,42913,42915,42917,42919,42921,42933,42935,43002,[43824,43866],[43872,43877],[43888,43967],[64256,64262],[64275,64279],[65345,65370],[66600,66639],[66776,66811],[68800,68850],[71872,71903],[119834,119859],[119886,119892],[119894,119911],[119938,119963],[119990,119993],119995,[119997,120003],[120005,120015],[120042,120067],[120094,120119],[120146,120171],[120198,120223],[120250,120275],[120302,120327],[120354,120379],[120406,120431],[120458,120485],[120514,120538],[120540,120545],[120572,120596],[120598,120603],[120630,120654],[120656,120661],[120688,120712],[120714,120719],[120746,120770],[120772,120777],120779,[125218,125251]];on.unicodeLlSurrogate={55297:[[56360,56399],[56536,56571]],55299:[[56512,56562]],55302:[[56512,56543]],55323:[[56928,56959]],55349:[[56346,56371],[56398,56404],[56406,56423],[56450,56475],[56502,56505],56507,[56509,56515],[56517,56527],[56554,56579],[56606,56631],[56658,56683],[56710,56735],[56762,56787],[56814,56839],[56866,56891],[56918,56943],[56970,56997],[57026,57050],[57052,57057],[57084,57108],[57110,57115],[57142,57166],[57168,57173],[57200,57224],[57226,57231],[57258,57282],[57284,57289],[57291,57291]],55354:[[56610,56643]]};on.unicodeLt=[453,456,459,498,[8072,8079],[8088,8095],[8104,8111],8124,8140,8188];on.unicodeLo=[170,186,443,[448,451],660,[1488,1514],[1520,1522],[1568,1599],[1601,1610],[1646,1647],[1649,1747],1749,[1774,1775],[1786,1788],1791,1808,[1810,1839],[1869,1957],1969,[1994,2026],[2048,2069],[2112,2136],[2144,2154],[2208,2228],[2230,2237],[2308,2361],2365,2384,[2392,2401],[2418,2432],[2437,2444],[2447,2448],[2451,2472],[2474,2480],2482,[2486,2489],2493,2510,[2524,2525],[2527,2529],[2544,2545],2556,[2565,2570],[2575,2576],[2579,2600],[2602,2608],[2610,2611],[2613,2614],[2616,2617],[2649,2652],2654,[2674,2676],[2693,2701],[2703,2705],[2707,2728],[2730,2736],[2738,2739],[2741,2745],2749,2768,[2784,2785],2809,[2821,2828],[2831,2832],[2835,2856],[2858,2864],[2866,2867],[2869,2873],2877,[2908,2909],[2911,2913],2929,2947,[2949,2954],[2958,2960],[2962,2965],[2969,2970],2972,[2974,2975],[2979,2980],[2984,2986],[2990,3001],3024,[3077,3084],[3086,3088],[3090,3112],[3114,3129],3133,[3160,3162],[3168,3169],3200,[3205,3212],[3214,3216],[3218,3240],[3242,3251],[3253,3257],3261,3294,[3296,3297],[3313,3314],[3333,3340],[3342,3344],[3346,3386],3389,3406,[3412,3414],[3423,3425],[3450,3455],[3461,3478],[3482,3505],[3507,3515],3517,[3520,3526],[3585,3632],[3634,3635],[3648,3653],[3713,3714],3716,[3719,3720],3722,3725,[3732,3735],[3737,3743],[3745,3747],3749,3751,[3754,3755],[3757,3760],[3762,3763],3773,[3776,3780],[3804,3807],3840,[3904,3911],[3913,3948],[3976,3980],[4096,4138],4159,[4176,4181],[4186,4189],4193,[4197,4198],[4206,4208],[4213,4225],4238,[4304,4346],[4349,4680],[4682,4685],[4688,4694],4696,[4698,4701],[4704,4744],[4746,4749],[4752,4784],[4786,4789],[4792,4798],4800,[4802,4805],[4808,4822],[4824,4880],[4882,4885],[4888,4954],[4992,5007],[5121,5740],[5743,5759],[5761,5786],[5792,5866],[5873,5880],[5888,5900],[5902,5905],[5920,5937],[5952,5969],[5984,5996],[5998,6e3],[6016,6067],6108,[6176,6210],[6212,6263],[6272,6276],[6279,6312],6314,[6320,6389],[6400,6430],[6480,6509],[6512,6516],[6528,6571],[6576,6601],[6656,6678],[6688,6740],[6917,6963],[6981,6987],[7043,7072],[7086,7087],[7098,7141],[7168,7203],[7245,7247],[7258,7287],[7401,7404],[7406,7409],[7413,7414],[8501,8504],[11568,11623],[11648,11670],[11680,11686],[11688,11694],[11696,11702],[11704,11710],[11712,11718],[11720,11726],[11728,11734],[11736,11742],12294,12348,[12353,12438],12447,[12449,12538],12543,[12549,12590],[12593,12686],[12704,12730],[12784,12799],[13312,19893],[19968,40938],[40960,40980],[40982,42124],[42192,42231],[42240,42507],[42512,42527],[42538,42539],42606,[42656,42725],42895,42999,[43003,43009],[43011,43013],[43015,43018],[43020,43042],[43072,43123],[43138,43187],[43250,43255],43259,43261,[43274,43301],[43312,43334],[43360,43388],[43396,43442],[43488,43492],[43495,43503],[43514,43518],[43520,43560],[43584,43586],[43588,43595],[43616,43631],[43633,43638],43642,[43646,43695],43697,[43701,43702],[43705,43709],43712,43714,[43739,43740],[43744,43754],43762,[43777,43782],[43785,43790],[43793,43798],[43808,43814],[43816,43822],[43968,44002],[44032,55203],[55216,55238],[55243,55291],[63744,64109],[64112,64217],64285,[64287,64296],[64298,64310],[64312,64316],64318,[64320,64321],[64323,64324],[64326,64433],[64467,64829],[64848,64911],[64914,64967],[65008,65019],[65136,65140],[65142,65276],[65382,65391],[65393,65437],[65440,65470],[65474,65479],[65482,65487],[65490,65495],[65498,65500],[65536,65547],[65549,65574],[65576,65594],[65596,65597],[65599,65613],[65616,65629],[65664,65786],[66176,66204],[66208,66256],[66304,66335],[66349,66368],[66370,66377],[66384,66421],[66432,66461],[66464,66499],[66504,66511],[66640,66717],[66816,66855],[66864,66915],[67072,67382],[67392,67413],[67424,67431],[67584,67589],67592,[67594,67637],[67639,67640],67644,[67647,67669],[67680,67702],[67712,67742],[67808,67826],[67828,67829],[67840,67861],[67872,67897],[67968,68023],[68030,68031],68096,[68112,68115],[68117,68119],[68121,68147],[68192,68220],[68224,68252],[68288,68295],[68297,68324],[68352,68405],[68416,68437],[68448,68466],[68480,68497],[68608,68680],[69635,69687],[69763,69807],[69840,69864],[69891,69926],[69968,70002],70006,[70019,70066],[70081,70084],70106,70108,[70144,70161],[70163,70187],[70272,70278],70280,[70282,70285],[70287,70301],[70303,70312],[70320,70366],[70405,70412],[70415,70416],[70419,70440],[70442,70448],[70450,70451],[70453,70457],70461,70480,[70493,70497],[70656,70708],[70727,70730],[70784,70831],[70852,70853],70855,[71040,71086],[71128,71131],[71168,71215],71236,[71296,71338],[71424,71449],71935,72192,[72203,72242],72250,72272,[72284,72323],[72326,72329],[72384,72440],[72704,72712],[72714,72750],72768,[72818,72847],[72960,72966],[72968,72969],[72971,73008],73030,[73728,74649],[74880,75075],[77824,78894],[82944,83526],[92160,92728],[92736,92766],[92880,92909],[92928,92975],[93027,93047],[93053,93071],[93952,94020],94032,[94208,100332],[100352,101106],[110592,110878],[110960,111355],[113664,113770],[113776,113788],[113792,113800],[113808,113817],[124928,125124],[126464,126467],[126469,126495],[126497,126498],126500,126503,[126505,126514],[126516,126519],126521,126523,126530,126535,126537,126539,[126541,126543],[126545,126546],126548,126551,126553,126555,126557,126559,[126561,126562],126564,[126567,126570],[126572,126578],[126580,126583],[126585,126588],126590,[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[131072,173782],[173824,177972],[177984,178205],[178208,183969],[183984,191456],[194560,195101]];on.unicodeLoSurrogate={55296:[[56320,56331],[56333,56358],[56360,56378],[56380,56381],[56383,56397],[56400,56413],[56448,56570],[56960,56988],[56992,57040],[57088,57119],[57133,57152],[57154,57161],[57168,57205],[57216,57245],[57248,57283],[57288,57295]],55297:[[56400,56477],[56576,56615],[56624,56675],[56832,57142],[57152,57173],[57184,57191]],55298:[[56320,56325],[56328,56328],[56330,56373],[56375,56376],[56380,56380],[56383,56405],[56416,56438],[56448,56478],[56544,56562],[56564,56565],[56576,56597],[56608,56633],[56704,56759],[56766,56767],[56832,56832],[56848,56851],[56853,56855],[56857,56885],[56928,56956],[56960,56988],[57024,57031],[57033,57060],[57088,57141],[57152,57173],[57184,57202],[57216,57233]],55299:[[56320,56392],[56576,56611],[56960,57001],[57008,57009],[57088,57116],57127,[57136,57157],[57264,57284],[57312,57334]],55300:[[56323,56375],[56451,56495],[56528,56552],[56579,56614],56644,56647,[56656,56690],56694,[56707,56754],[56769,56772],56794,56796,[56832,56849],[56851,56875],[56960,56966],56968,[56970,56973],[56975,56989],[56991,57e3],[57008,57054],[57093,57100],[57103,57104],[57107,57128],[57130,57136],[57138,57139],[57141,57145],57149,57168,[57181,57185]],55301:[[56320,56372],[56391,56394],[56415,56417],[56448,56495],[56516,56517],56519,[56704,56750],[56792,56795],[56832,56879],56900,[56960,57002],57016,[57088,57114]],55302:[[56320,56363],[56575,56582],56585,[56588,56595],[56597,56598],[56600,56623],56639,56641,[56736,56743],[56746,56784],56801,56803,56832,[56843,56882],56890,56912,[56924,56969],56989,[57024,57080]],55303:[[56320,56328],[56330,56366],56384,56434,[56576,56582],[56584,56585],[56587,56624],56646,[56672,56677],[56679,56680],[56682,56713],56728,[57056,57074],57264],55304:[[56320,57241]],55305:[[56448,56643]],55308:[[56320,57343]],55309:[[56320,56366]],55313:[[56320,56902]],55322:[[56320,56888],[56896,56926],[57040,57069],[57088,57135],[57187,57207],[57213,57231]],55323:[[57088,57162],57168],55324:[56320],55329:[57335],55330:[[56320,57343]],55331:[[56320,56533],[56576,56576],[56584,56584]],55340:[[56320,56606],[56656,56658],[56676,56679],[56688,57083]],55343:[[56320,56426],[56432,56444],[56448,56456],[56464,56473]],55352:[[56576,56620],56654,[57024,57067]],55354:[[56320,56516]],55355:[[56832,56835],[56837,56863],[56865,56866],56868,56871,[56873,56882],[56884,56887],56889,56891,56898,56903,56905,56907,[56909,56911],[56913,56914],56916,56919,56921,56923,56925,56927,[56929,56930],56932,[56935,56938],[56940,56946],[56948,56951],[56953,56956],56958,[56960,56969],[56971,56987],[56993,56995],[56997,57001],[57003,57019]],55360:[56320],55401:[57053,57088],55405:[57140,57152],55406:[56349,56352],55411:[56993,57008],55418:[57312],55422:[[56320,56861]],55424:[56320],55428:[57162]};on.unicodeLm=[[688,705],[710,721],[736,740],748,750,884,890,1369,1600,[1765,1766],[2036,2037],2042,2074,2084,2088,2417,3654,3782,4348,6103,6211,6823,[7288,7293],[7468,7530],7544,[7579,7615],8305,8319,[8336,8348],[11388,11389],11631,11823,12293,[12337,12341],12347,[12445,12446],[12540,12542],40981,[42232,42237],42508,42623,[42652,42653],[42775,42783],42864,42888,[43e3,43001],43471,43494,43632,43741,[43763,43764],[43868,43871],65392,[65438,65439],[92992,92995],[94099,94111],[94176,94177]];on.unicodeLmSurrogate={55322:[[57152,57155]],55323:[[57235,57247],[57312,57313],57315],55352:[[56631,56637]],55354:[56651]};on.unicodeNl=[[5870,5872],[8544,8578],[8581,8584],12295,[12321,12329],[12344,12346],[42726,42735],[65856,65908],66369,66378,[66513,66517],[74752,74862]];on.unicodeNlSurrogate={55296:[[56640,56692],57153,57162,[57297,57301]],55305:[[56320,56430]]};on.unicodeMn=[[768,879],[1155,1159],[1425,1469],1471,[1473,1474],[1476,1477],1479,[1552,1562],[1611,1631],1648,[1750,1756],[1759,1764],[1767,1768],[1770,1773],1809,[1840,1866],[1958,1968],[2027,2035],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2260,2273],[2275,2306],2362,2364,[2369,2376],2381,[2385,2391],[2402,2403],2433,2492,[2497,2500],2509,[2530,2531],[2561,2562],2620,[2625,2626],[2631,2632],[2635,2637],2641,[2672,2673],2677,[2689,2690],2748,[2753,2757],[2759,2760],2765,[2786,2787],[2810,2815],2817,2876,2879,[2881,2884],2893,2902,[2914,2915],2946,3008,3021,3072,[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],3201,3260,3263,3270,[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],3405,[3426,3427],3530,[3538,3540],3542,3633,[3636,3642],[3655,3662],3761,[3764,3769],[3771,3772],[3784,3789],[3864,3865],3893,3895,3897,[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],4038,[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],4226,[4229,4230],4237,4253,[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],6086,[6089,6099],6109,[6155,6157],[6277,6278],6313,[6432,6434],[6439,6440],6450,[6457,6459],[6679,6680],6683,6742,[6744,6750],6752,6754,[6757,6764],[6771,6780],6783,[6832,6845],[6912,6915],6964,[6966,6970],6972,6978,[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],7142,[7144,7145],7149,[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],7405,7412,[7416,7417],[7616,7673],[7675,7679],[8400,8412],8417,[8421,8432],[11503,11505],11647,[11744,11775],[12330,12333],[12441,12442],42607,[42612,42621],[42654,42655],[42736,42737],43010,43014,43019,[43045,43046],[43204,43205],[43232,43249],[43302,43309],[43335,43345],[43392,43394],43443,[43446,43449],43452,43493,[43561,43566],[43569,43570],[43573,43574],43587,43596,43644,43696,[43698,43700],[43703,43704],[43710,43711],43713,[43756,43757],43766,44005,44008,44013,64286,[65024,65039],[65056,65071],66045,66272,[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],68159,[68325,68326],69633,[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69888,69890],[69927,69931],[69933,69940],70003,[70016,70017],[70070,70078],[70090,70092],[70191,70193],70196,[70198,70199],70206,70367,[70371,70378],[70400,70401],70460,70464,[70502,70508],[70512,70516],[70712,70719],[70722,70724],70726,[70835,70840],70842,[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],71229,[71231,71232],71339,71341,[71344,71349],71351,[71453,71455],[71458,71461],[71463,71467],[72193,72198],[72201,72202],[72243,72248],[72251,72254],72263,[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],72767,[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],73018,[73020,73021],[73023,73029],73031,[92912,92916],[92976,92982],[94095,94098],[113821,113822],[119143,119145],[119163,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],121461,121476,[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[125136,125142],[125252,125258],[917760,917999]];on.unicodeMnSurrogate={55296:[56829,57056,[57206,57210]],55298:[[56833,56835],[56837,56838],[56844,56847],[56888,56890],56895,[57061,57062]],55299:[[56612,56615],[57003,57004],[57158,57168]],55300:[56321,[56376,56390],[56447,56449],[56499,56502],[56505,56506],[56576,56578],[56615,56619],[56621,56628],56691,[56704,56705],[56758,56766],[56777,56780],56783,[56879,56881],56884,[56886,56887],56894,57055,[57059,57066],[57088,57089],[57147,57148],57152,[57190,57196],[57200,57204]],55301:[[56376,56383],[56386,56388],56390,56414,[56499,56504],56506,[56511,56512],[56514,56515],[56754,56757],[56764,56765],[56767,56768],[56796,56797],[56883,56890],56893,[56895,56896],57003,57005,[57008,57013],57015,[57117,57119],[57122,57125],[57127,57131]],55302:[[56367,56375],[56377,56378],[56635,56636],56638,56643,[56788,56791],[56794,56795],56800,[56833,56842],[56883,56888],[56891,56894],56903,[56913,56918],[56921,56923],[56970,56982],[56984,56985]],55303:[[56368,56374],[56376,56381],56383,[56466,56487],[56490,56496],[56498,56499],[56501,56502],[56625,56630],56634,[56636,56637],[56639,56645],56647,[56720,56721],56725,56727,[57075,57076]],55322:[[57072,57076],[57136,57142]],55323:[57167,[57231,57234],57316],55343:[[56477,56478]],55348:[[56679,56681],[56699,56706],[56709,56715],[56746,56749],[56898,56900]],55350:[[56832,56886],[56891,56940],56949,56964,[56987,56991],[56993,57007]],55352:[[56320,56326],[56328,56344],[56347,56353],[56355,56356],[56358,56362],[56624,56630],[57068,57071]],55354:[[56528,56534],[56644,56650]],56128:[[56576,56815]]};on.unicodeMc=[2307,2363,[2366,2368],[2377,2380],[2382,2383],[2434,2435],[2494,2496],[2503,2504],[2507,2508],2519,2563,[2622,2624],2691,[2750,2752],2761,[2763,2764],[2818,2819],2878,2880,[2887,2888],[2891,2892],2903,[3006,3007],[3009,3010],[3014,3016],[3018,3020],3031,[3073,3075],[3137,3140],[3202,3203],3262,[3264,3268],[3271,3272],[3274,3275],[3285,3286],[3330,3331],[3390,3392],[3398,3400],[3402,3404],3415,[3458,3459],[3535,3537],[3544,3551],[3570,3571],[3902,3903],3967,[4139,4140],4145,4152,[4155,4156],[4182,4183],[4194,4196],[4199,4205],[4227,4228],[4231,4236],4239,[4250,4252],6070,[6078,6085],[6087,6088],[6435,6438],[6441,6443],[6448,6449],[6451,6456],[6681,6682],6741,6743,6753,[6755,6756],[6765,6770],6916,6965,6971,[6973,6977],[6979,6980],7042,7073,[7078,7079],7082,7143,[7146,7148],7150,[7154,7155],[7204,7211],[7220,7221],7393,[7410,7411],7415,[12334,12335],[43043,43044],43047,[43136,43137],[43188,43203],[43346,43347],43395,[43444,43445],[43450,43451],[43453,43456],[43567,43568],[43571,43572],43597,43643,43645,43755,[43758,43759],43765,[44003,44004],[44006,44007],[44009,44010],44012,69632,69634,69762,[69808,69810],[69815,69816],69932,70018,[70067,70069],[70079,70080],[70188,70190],[70194,70195],70197,[70368,70370],[70402,70403],[70462,70463],[70465,70468],[70471,70472],[70475,70477],70487,[70498,70499],[70709,70711],[70720,70721],70725,[70832,70834],70841,[70843,70846],70849,[71087,71089],[71096,71099],71102,[71216,71218],[71227,71228],71230,71340,[71342,71343],71350,[71456,71457],71462,[72199,72200],72249,[72279,72280],72343,72751,72766,72873,72881,72884,[94033,94078],[119141,119142],[119149,119154]];on.unicodeMcSurrogate={55300:[56320,56322,56450,[56496,56498],[56503,56504],56620,[56645,56646],56706,[56755,56757],[56767,56768],56782,[56876,56878],[56882,56883],56885,[57056,57058],[57090,57091],[57150,57151],[57153,57156],[57159,57160],[57163,57165],57175,[57186,57187]],55301:[[56373,56375],[56384,56385],56389,[56496,56498],56505,[56507,56510],56513,[56751,56753],[56760,56763],56766,[56880,56882],[56891,56892],56894,57004,[57006,57007],57014,[57120,57121],57126],55302:[[56364,56366],56376,[56624,56629],[56631,56632],56637,56640,56642,[56785,56787],[56796,56799],56804,56889,[56919,56920],56983],55303:[56367,56382,56489,56497,56500,[56714,56718],[56723,56724],56726,[57077,57078]],55323:[[57169,57223],[57328,57329]],55348:[[56677,56678],[56685,56690]]};on.unicodeNd=[[48,57],[1632,1641],[1776,1785],[1984,1993],[2406,2415],[2534,2543],[2662,2671],[2790,2799],[2918,2927],[3046,3055],[3174,3183],[3302,3311],[3430,3439],[3558,3567],[3664,3673],[3792,3801],[3872,3881],[4160,4169],[4240,4249],[6112,6121],[6160,6169],[6470,6479],[6608,6617],[6784,6793],[6800,6809],[6992,7001],[7088,7097],[7232,7241],[7248,7257],[42528,42537],[43216,43225],[43264,43273],[43472,43481],[43504,43513],[43600,43609],[44016,44025],[65296,65305],[66720,66729],[69734,69743],[69872,69881],[69942,69951],[70096,70105],[70384,70393],[70736,70745],[70864,70873],[71248,71257],[71360,71369],[71472,71481],[71904,71913],[72784,72793],[73040,73049],[92768,92777],[93008,93017],[120782,120831],[125264,125273]];on.unicodeNdSurrogate={55297:[[56480,56489]],55299:[[56624,56633]],55300:[[56422,56431],[56560,56569],[56630,56639],[56784,56793],[57072,57081]],55301:[[56400,56409],[56528,56537],[56912,56921],[57024,57033],[57136,57145]],55302:[[56544,56553],56656],55303:[[56400,56409],[56656,56665],[56736,56745]],55322:[[56928,56937],[57168,57177]],55349:[[57294,57343]],55352:[[56640,56649],[57072,57081]],55354:[[56656,56665]],55358:[[57328,57337]]};on.unicodePc=[95,[8255,8256],8276,[65075,65076],[65101,65103],65343];var JO=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),XO=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ZO=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&JO(e,t,n);return XO(e,t),e};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.isBinary=Vn.isOctal=Vn.isHex=Vn.isDecimal=Vn.isNumber=Vn.isLineBreak=Vn.isWhiteSpace=Vn.isSurrogateChar=Vn.isIdentifierChar=Vn.isIdentifierStartChar=void 0;const bi=ZO(on);var Si;(function(t){t[t.NotIdentifierChar=0]="NotIdentifierChar",t[t.StartIdentifierChar=1]="StartIdentifierChar",t[t.IdentifierChar=2]="IdentifierChar",t[t.SurrogateChar=3]="SurrogateChar"})(Si||(Si={}));const Cc=256,uc=new Array(Cc),oo={},Tu={};let wc=!1;function e3(t,e){if(t<Cc)return uc[t]===Si.StartIdentifierChar;wc||(Mh(!1),wc=!0);let n;return e!==void 0?n=dF(t,e):n=oo[t],n===Si.StartIdentifierChar}Vn.isIdentifierStartChar=e3;function t3(t,e){return t<Cc?uc[t]===Si.StartIdentifierChar||uc[t]===Si.IdentifierChar:(wc||(Mh(!1),wc=!0),e!==void 0?dF(t,e):oo[t]===Si.StartIdentifierChar||oo[t]===Si.IdentifierChar)}Vn.isIdentifierChar=t3;function n3(t){return t<Cc?!1:(wc||(Mh(!1),wc=!0),oo[t]===Si.SurrogateChar)}Vn.isSurrogateChar=n3;function i3(t){return t===32||t===9||t===12}Vn.isWhiteSpace=i3;function r3(t){return t===13||t===10}Vn.isLineBreak=r3;function s3(t){return t>=48&&t<=57||t===95}Vn.isNumber=s3;function uF(t){return t>=48&&t<=57||t===95}Vn.isDecimal=uF;function a3(t){return uF(t)||t>=97&&t<=102||t>=65&&t<=70||t===95}Vn.isHex=a3;function o3(t){return t>=48&&t<=55||t===95}Vn.isOctal=o3;function l3(t){return t===48||t===49||t===95}Vn.isBinary=l3;function dF(t,e){if(oo[t]!==Si.SurrogateChar)return Si.NotIdentifierChar;const n=Tu[t];return n?n[e]:Si.NotIdentifierChar}const c3=[95,6277,6278,8472,8494,12443,12444],u3=[c3,bi.unicodeLu,bi.unicodeLl,bi.unicodeLt,bi.unicodeLo,bi.unicodeLm,bi.unicodeNl],d3=[bi.unicodeLuSurrogate,bi.unicodeLlSurrogate,bi.unicodeLoSurrogate,bi.unicodeLmSurrogate,bi.unicodeNlSurrogate],f3=[183,903,4969,4970,4971,4972,4973,4974,4975,4976,4977,6618],p3=[f3,bi.unicodeMn,bi.unicodeMc,bi.unicodeNd,bi.unicodePc],h3=[bi.unicodeMnSurrogate,bi.unicodeMcSurrogate,bi.unicodeNdSurrogate];function p0(t,e,n,i,r){for(let a=0;a<t.length;a++){const s=t[a];let l,o;Array.isArray(s)?(l=s[0],o=s[1]):l=o=s;for(let u=l;u<=o;u++)u<Cc?i[u]=e:r[u]=e;if(n&&l>=Cc)break}}function sS(t,e){for(const n in t)Tu[n]||(Tu[n]={},oo[n]=Si.SurrogateChar),p0(t[n],e,!1,Tu[n],Tu[n])}function Mh(t){if(uc.fill(Si.NotIdentifierChar),p3.forEach(e=>{p0(e,Si.IdentifierChar,t,uc,oo)}),u3.forEach(e=>{p0(e,Si.StartIdentifierChar,t,uc,oo)}),!t){for(const e of h3)sS(e,Si.IdentifierChar);for(const e of d3)sS(e,Si.StartIdentifierChar)}}Mh(!0);var vn={},In={},go={},ev={},qs={};Object.defineProperty(qs,"__esModule",{value:!0});let h0;function m0(){if(h0===void 0)throw new Error("No runtime abstraction layer installed");return h0}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");h0=n}t.install=e})(m0||(m0={}));qs.default=m0;var tv={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=void 0,function(e){function n(i){return{dispose:i}}e.create=n}(t.Disposable||(t.Disposable={}))})(tv);var ml={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;const e=qs;(function(r){const a={dispose(){}};r.None=function(){return a}})(t.Event||(t.Event={}));class n{add(a,s=null,l){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(a),this._contexts.push(s),Array.isArray(l)&&l.push({dispose:()=>this.remove(a,s)})}remove(a,s=null){if(!this._callbacks)return;let l=!1;for(let o=0,u=this._callbacks.length;o<u;o++)if(this._callbacks[o]===a)if(this._contexts[o]===s){this._callbacks.splice(o,1),this._contexts.splice(o,1);return}else l=!0;if(l)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...a){if(!this._callbacks)return[];const s=[],l=this._callbacks.slice(0),o=this._contexts.slice(0);for(let u=0,f=l.length;u<f;u++)try{s.push(l[u].apply(o[u],a))}catch(y){(0,e.default)().console.error(y)}return s}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class i{constructor(a){this._options=a}get event(){return this._event||(this._event=(a,s,l)=>{this._callbacks||(this._callbacks=new n),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(a,s);const o={dispose:()=>{!this._callbacks||(this._callbacks.remove(a,s),o.dispose=i._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(l)&&l.push(o),o}),this._event}fire(a){this._callbacks&&this._callbacks.invoke.call(this._callbacks,a)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=i,i._noop=function(){}})(ml);var Nh={};Object.defineProperty(Nh,"__esModule",{value:!0});Nh.AbstractMessageBuffer=void 0;const m3=13,y3=10,g3=`\r
`;class T3{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,n=0,i=0,r=0;e:for(;n<this._chunks.length;){const o=this._chunks[n];for(i=0;i<o.length;){switch(o[i]){case m3:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case y3:switch(e){case 1:e=2;break;case 3:e=4,i++;break e;default:e=0}break;default:e=0}i++}r+=o.byteLength,n++}if(e!==4)return;const a=this._read(r+i),s=new Map,l=this.toString(a,"ascii").split(g3);if(l.length<2)return s;for(let o=0;o<l.length-2;o++){const u=l[o],f=u.indexOf(":");if(f===-1)throw new Error("Message header must separate key and value using :");const y=u.substr(0,f),p=u.substr(f+1).trim();s.set(y,p)}return s}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const a=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(a)}if(this._chunks[0].byteLength>e){const a=this._chunks[0],s=this.asNative(a,e);return this._chunks[0]=a.slice(e),this._totalLength-=e,s}const n=this.allocNative(e);let i=0,r=0;for(;e>0;){const a=this._chunks[r];if(a.byteLength>e){const s=a.slice(0,e);n.set(s,i),i+=e,this._chunks[r]=a.slice(e),this._totalLength-=e,e-=e}else n.set(a,i),i+=a.byteLength,this._chunks.shift(),this._totalLength-=a.byteLength,e-=a.byteLength}return n}}Nh.AbstractMessageBuffer=T3;Object.defineProperty(ev,"__esModule",{value:!0});const fF=qs,dc=tv,_3=ml,v3=Nh;class Rh extends v3.AbstractMessageBuffer{constructor(e="utf-8"){super(e),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return Rh.emptyBuffer}fromString(e,n){return new TextEncoder().encode(e)}toString(e,n){return n==="ascii"?this.asciiDecoder.decode(e):new TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e:e.slice(0,n)}allocNative(e){return new Uint8Array(e)}}Rh.emptyBuffer=new Uint8Array(0);class b3{constructor(e){this.socket=e,this._onData=new _3.Emitter,this._messageListener=n=>{n.data.arrayBuffer().then(r=>{this._onData.fire(new Uint8Array(r))},()=>{(0,fF.default)().console.error("Converting blob to array buffer failed.")})},this.socket.addEventListener("message",this._messageListener)}onClose(e){return this.socket.addEventListener("close",e),dc.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),dc.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),dc.Disposable.create(()=>this.socket.removeEventListener("end",e))}onData(e){return this._onData.event(e)}}class S3{constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener("close",e),dc.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),dc.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),dc.Disposable.create(()=>this.socket.removeEventListener("end",e))}write(e,n){if(typeof e=="string"){if(n!==void 0&&n!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${n}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}}const I3=new TextEncoder,pF=Object.freeze({messageBuffer:Object.freeze({create:t=>new Rh(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{if(e.charset!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${e.charset}`);return Promise.resolve(I3.encode(JSON.stringify(t,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{if(!(t instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(e.charset).decode(t)))}})}),stream:Object.freeze({asReadableStream:t=>new b3(t),asWritableStream:t=>new S3(t)}),console,timer:Object.freeze({setTimeout(t,e,...n){const i=setTimeout(t,e,...n);return{dispose:()=>clearTimeout(i)}},setImmediate(t,...e){const n=setTimeout(t,0,...e);return{dispose:()=>clearTimeout(n)}},setInterval(t,e,...n){const i=setInterval(t,e,...n);return{dispose:()=>clearInterval(i)}}})});function y0(){return pF}(function(t){function e(){fF.default.install(pF)}t.install=e})(y0||(y0={}));ev.default=y0;var g0={},nv={},li={};Object.defineProperty(li,"__esModule",{value:!0});li.stringArray=li.array=li.func=li.error=li.number=li.string=li.boolean=void 0;function C3(t){return t===!0||t===!1}li.boolean=C3;function hF(t){return typeof t=="string"||t instanceof String}li.string=hF;function w3(t){return typeof t=="number"||t instanceof Number}li.number=w3;function E3(t){return t instanceof Error}li.error=E3;function F3(t){return typeof t=="function"}li.func=F3;function mF(t){return Array.isArray(t)}li.array=mF;function k3(t){return mF(t)&&t.every(e=>hF(e))}li.stringArray=k3;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Message=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType=t.RequestType0=t.AbstractMessageSignature=t.ParameterStructures=t.ResponseError=t.ErrorCodes=void 0;const e=li;var n;(function(L){L.ParseError=-32700,L.InvalidRequest=-32600,L.MethodNotFound=-32601,L.InvalidParams=-32602,L.InternalError=-32603,L.jsonrpcReservedErrorRangeStart=-32099,L.serverErrorStart=-32099,L.MessageWriteError=-32099,L.MessageReadError=-32098,L.PendingResponseRejected=-32097,L.ConnectionInactive=-32096,L.ServerNotInitialized=-32002,L.UnknownErrorCode=-32001,L.jsonrpcReservedErrorRangeEnd=-32e3,L.serverErrorEnd=-32e3})(n=t.ErrorCodes||(t.ErrorCodes={}));class i extends Error{constructor(ce,ue,W){super(ue),this.code=e.number(ce)?ce:n.UnknownErrorCode,this.data=W,Object.setPrototypeOf(this,i.prototype)}toJson(){const ce={code:this.code,message:this.message};return this.data!==void 0&&(ce.data=this.data),ce}}t.ResponseError=i;class r{constructor(ce){this.kind=ce}static is(ce){return ce===r.auto||ce===r.byName||ce===r.byPosition}toString(){return this.kind}}t.ParameterStructures=r,r.auto=new r("auto"),r.byPosition=new r("byPosition"),r.byName=new r("byName");class a{constructor(ce,ue){this.method=ce,this.numberOfParams=ue}get parameterStructures(){return r.auto}}t.AbstractMessageSignature=a;class s extends a{constructor(ce){super(ce,0)}}t.RequestType0=s;class l extends a{constructor(ce,ue=r.auto){super(ce,1),this._parameterStructures=ue}get parameterStructures(){return this._parameterStructures}}t.RequestType=l;class o extends a{constructor(ce,ue=r.auto){super(ce,1),this._parameterStructures=ue}get parameterStructures(){return this._parameterStructures}}t.RequestType1=o;class u extends a{constructor(ce){super(ce,2)}}t.RequestType2=u;class f extends a{constructor(ce){super(ce,3)}}t.RequestType3=f;class y extends a{constructor(ce){super(ce,4)}}t.RequestType4=y;class p extends a{constructor(ce){super(ce,5)}}t.RequestType5=p;class b extends a{constructor(ce){super(ce,6)}}t.RequestType6=b;class v extends a{constructor(ce){super(ce,7)}}t.RequestType7=v;class m extends a{constructor(ce){super(ce,8)}}t.RequestType8=m;class V extends a{constructor(ce){super(ce,9)}}t.RequestType9=V;class F extends a{constructor(ce,ue=r.auto){super(ce,1),this._parameterStructures=ue}get parameterStructures(){return this._parameterStructures}}t.NotificationType=F;class P extends a{constructor(ce){super(ce,0)}}t.NotificationType0=P;class G extends a{constructor(ce,ue=r.auto){super(ce,1),this._parameterStructures=ue}get parameterStructures(){return this._parameterStructures}}t.NotificationType1=G;class te extends a{constructor(ce){super(ce,2)}}t.NotificationType2=te;class q extends a{constructor(ce){super(ce,3)}}t.NotificationType3=q;class U extends a{constructor(ce){super(ce,4)}}t.NotificationType4=U;class D extends a{constructor(ce){super(ce,5)}}t.NotificationType5=D;class M extends a{constructor(ce){super(ce,6)}}t.NotificationType6=M;class T extends a{constructor(ce){super(ce,7)}}t.NotificationType7=T;class N extends a{constructor(ce){super(ce,8)}}t.NotificationType8=N;class J extends a{constructor(ce){super(ce,9)}}t.NotificationType9=J,function(L){function ce(Y){const ee=Y;return ee&&e.string(ee.method)&&(e.string(ee.id)||e.number(ee.id))}L.isRequest=ce;function ue(Y){const ee=Y;return ee&&e.string(ee.method)&&Y.id===void 0}L.isNotification=ue;function W(Y){const ee=Y;return ee&&(ee.result!==void 0||!!ee.error)&&(e.string(ee.id)||e.number(ee.id)||ee.id===null)}L.isResponse=W}(t.Message||(t.Message={}))})(nv);var iv={};(function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=void 0;var n;(function(a){a.None=0,a.First=1,a.AsOld=a.First,a.Last=2,a.AsNew=a.Last})(n=t.Touch||(t.Touch={}));class i{constructor(){this[e]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var s;return(s=this._head)==null?void 0:s.value}get last(){var s;return(s=this._tail)==null?void 0:s.value}has(s){return this._map.has(s)}get(s,l=n.None){const o=this._map.get(s);if(!!o)return l!==n.None&&this.touch(o,l),o.value}set(s,l,o=n.None){let u=this._map.get(s);if(u)u.value=l,o!==n.None&&this.touch(u,o);else{switch(u={key:s,value:l,next:void 0,previous:void 0},o){case n.None:this.addItemLast(u);break;case n.First:this.addItemFirst(u);break;case n.Last:this.addItemLast(u);break;default:this.addItemLast(u);break}this._map.set(s,u),this._size++}return this}delete(s){return!!this.remove(s)}remove(s){const l=this._map.get(s);if(!!l)return this._map.delete(s),this.removeItem(l),this._size--,l.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const s=this._head;return this._map.delete(s.key),this.removeItem(s),this._size--,s.value}forEach(s,l){const o=this._state;let u=this._head;for(;u;){if(l?s.bind(l)(u.value,u.key,this):s(u.value,u.key,this),this._state!==o)throw new Error("LinkedMap got modified during iteration.");u=u.next}}keys(){const s=this._state;let l=this._head;const o={[Symbol.iterator]:()=>o,next:()=>{if(this._state!==s)throw new Error("LinkedMap got modified during iteration.");if(l){const u={value:l.key,done:!1};return l=l.next,u}else return{value:void 0,done:!0}}};return o}values(){const s=this._state;let l=this._head;const o={[Symbol.iterator]:()=>o,next:()=>{if(this._state!==s)throw new Error("LinkedMap got modified during iteration.");if(l){const u={value:l.value,done:!1};return l=l.next,u}else return{value:void 0,done:!0}}};return o}entries(){const s=this._state;let l=this._head;const o={[Symbol.iterator]:()=>o,next:()=>{if(this._state!==s)throw new Error("LinkedMap got modified during iteration.");if(l){const u={value:[l.key,l.value],done:!1};return l=l.next,u}else return{value:void 0,done:!0}}};return o}[(e=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(s){if(s>=this.size)return;if(s===0){this.clear();return}let l=this._head,o=this.size;for(;l&&o>s;)this._map.delete(l.key),l=l.next,o--;this._head=l,this._size=o,l&&(l.previous=void 0),this._state++}addItemFirst(s){if(!this._head&&!this._tail)this._tail=s;else if(this._head)s.next=this._head,this._head.previous=s;else throw new Error("Invalid list");this._head=s,this._state++}addItemLast(s){if(!this._head&&!this._tail)this._head=s;else if(this._tail)s.previous=this._tail,this._tail.next=s;else throw new Error("Invalid list");this._tail=s,this._state++}removeItem(s){if(s===this._head&&s===this._tail)this._head=void 0,this._tail=void 0;else if(s===this._head){if(!s.next)throw new Error("Invalid list");s.next.previous=void 0,this._head=s.next}else if(s===this._tail){if(!s.previous)throw new Error("Invalid list");s.previous.next=void 0,this._tail=s.previous}else{const l=s.next,o=s.previous;if(!l||!o)throw new Error("Invalid list");l.previous=o,o.next=l}s.next=void 0,s.previous=void 0,this._state++}touch(s,l){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(l!==n.First&&l!==n.Last)){if(l===n.First){if(s===this._head)return;const o=s.next,u=s.previous;s===this._tail?(u.next=void 0,this._tail=u):(o.previous=u,u.next=o),s.previous=void 0,s.next=this._head,this._head.previous=s,this._head=s,this._state++}else if(l===n.Last){if(s===this._tail)return;const o=s.next,u=s.previous;s===this._head?(o.previous=void 0,this._head=o):(o.previous=u,u.next=o),s.next=void 0,s.previous=this._tail,this._tail.next=s,this._tail=s,this._state++}}}toJSON(){const s=[];return this.forEach((l,o)=>{s.push([o,l])}),s}fromJSON(s){this.clear();for(const[l,o]of s)this.set(l,o)}}t.LinkedMap=i;class r extends i{constructor(s,l=1){super(),this._limit=s,this._ratio=Math.min(Math.max(0,l),1)}get limit(){return this._limit}set limit(s){this._limit=s,this.checkTrim()}get ratio(){return this._ratio}set ratio(s){this._ratio=Math.min(Math.max(0,s),1),this.checkTrim()}get(s,l=n.AsNew){return super.get(s,l)}peek(s){return super.get(s,n.None)}set(s,l){return super.set(s,l,n.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}t.LRUCache=r})(iv);var rv={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=t.CancellationToken=void 0;const e=qs,n=li,i=ml;var r;(function(o){o.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:i.Event.None}),o.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:i.Event.None});function u(f){const y=f;return y&&(y===o.None||y===o.Cancelled||n.boolean(y.isCancellationRequested)&&!!y.onCancellationRequested)}o.is=u})(r=t.CancellationToken||(t.CancellationToken={}));const a=Object.freeze(function(o,u){const f=(0,e.default)().timer.setTimeout(o.bind(u),0);return{dispose(){f.dispose()}}});class s{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new i.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}class l{get token(){return this._token||(this._token=new s),this._token}cancel(){this._token?this._token.cancel():this._token=r.Cancelled}dispose(){this._token?this._token instanceof s&&this._token.dispose():this._token=r.None}}t.CancellationTokenSource=l})(rv);var yF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=void 0;const e=qs,n=li,i=ml;(function(l){function o(u){let f=u;return f&&n.func(f.listen)&&n.func(f.dispose)&&n.func(f.onError)&&n.func(f.onClose)&&n.func(f.onPartialMessage)}l.is=o})(t.MessageReader||(t.MessageReader={}));class r{constructor(){this.errorEmitter=new i.Emitter,this.closeEmitter=new i.Emitter,this.partialMessageEmitter=new i.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(o){this.errorEmitter.fire(this.asError(o))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(o){this.partialMessageEmitter.fire(o)}asError(o){return o instanceof Error?o:new Error(`Reader received error. Reason: ${n.string(o.message)?o.message:"unknown"}`)}}t.AbstractMessageReader=r;var a;(function(l){function o(u){var m;let f,y;const p=new Map;let b;const v=new Map;if(u===void 0||typeof u=="string")f=u!=null?u:"utf-8";else{if(f=(m=u.charset)!=null?m:"utf-8",u.contentDecoder!==void 0&&(y=u.contentDecoder,p.set(y.name,y)),u.contentDecoders!==void 0)for(const V of u.contentDecoders)p.set(V.name,V);if(u.contentTypeDecoder!==void 0&&(b=u.contentTypeDecoder,v.set(b.name,b)),u.contentTypeDecoders!==void 0)for(const V of u.contentTypeDecoders)v.set(V.name,V)}return b===void 0&&(b=(0,e.default)().applicationJson.decoder,v.set(b.name,b)),{charset:f,contentDecoder:y,contentDecoders:p,contentTypeDecoder:b,contentTypeDecoders:v}}l.fromOptions=o})(a||(a={}));class s extends r{constructor(o,u){super(),this.readable=o,this.options=a.fromOptions(u),this.buffer=(0,e.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(o){this._partialMessageTimeout=o}get partialMessageTimeout(){return this._partialMessageTimeout}listen(o){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=o;const u=this.readable.onData(f=>{this.onData(f)});return this.readable.onError(f=>this.fireError(f)),this.readable.onClose(()=>this.fireClose()),u}onData(o){for(this.buffer.append(o);;){if(this.nextMessageLength===-1){const y=this.buffer.tryReadHeaders();if(!y)return;const p=y.get("Content-Length");if(!p)throw new Error("Header must provide a Content-Length property.");const b=parseInt(p);if(isNaN(b))throw new Error("Content-Length value must be a number.");this.nextMessageLength=b}const u=this.buffer.tryReadBody(this.nextMessageLength);if(u===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let f;this.options.contentDecoder!==void 0?f=this.options.contentDecoder.decode(u):f=Promise.resolve(u),f.then(y=>{this.options.contentTypeDecoder.decode(y,this.options).then(p=>{this.callback(p)},p=>{this.fireError(p)})},y=>{this.fireError(y)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,e.default)().timer.setTimeout((o,u)=>{this.partialMessageTimer=void 0,o===this.messageToken&&(this.firePartialMessage({messageToken:o,waitingTime:u}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}t.ReadableStreamMessageReader=s})(yF);var gF={},Oh={};Object.defineProperty(Oh,"__esModule",{value:!0});Oh.Semaphore=void 0;const D3=qs;class P3{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,i)=>{this._waiting.push({thunk:e,resolve:n,reject:i}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,D3.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const n=e.thunk();n instanceof Promise?n.then(i=>{this._active--,e.resolve(i),this.runNext()},i=>{this._active--,e.reject(i),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}}Oh.Semaphore=P3;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=void 0;const e=qs,n=li,i=Oh,r=ml,a="Content-Length: ",s=`\r
`;(function(f){function y(p){let b=p;return b&&n.func(b.dispose)&&n.func(b.onClose)&&n.func(b.onError)&&n.func(b.write)}f.is=y})(t.MessageWriter||(t.MessageWriter={}));class l{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(y,p,b){this.errorEmitter.fire([this.asError(y),p,b])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(y){return y instanceof Error?y:new Error(`Writer received error. Reason: ${n.string(y.message)?y.message:"unknown"}`)}}t.AbstractMessageWriter=l;var o;(function(f){function y(p){var b,v;return p===void 0||typeof p=="string"?{charset:p!=null?p:"utf-8",contentTypeEncoder:(0,e.default)().applicationJson.encoder}:{charset:(b=p.charset)!=null?b:"utf-8",contentEncoder:p.contentEncoder,contentTypeEncoder:(v=p.contentTypeEncoder)!=null?v:(0,e.default)().applicationJson.encoder}}f.fromOptions=y})(o||(o={}));class u extends l{constructor(y,p){super(),this.writable=y,this.options=o.fromOptions(p),this.errorCount=0,this.writeSemaphore=new i.Semaphore(1),this.writable.onError(b=>this.fireError(b)),this.writable.onClose(()=>this.fireClose())}async write(y){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(y,this.options).then(b=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(b):b).then(b=>{const v=[];return v.push(a,b.byteLength.toString(),s),v.push(s),this.doWrite(y,v,b)},b=>{throw this.fireError(b),b}))}async doWrite(y,p,b){try{return await this.writable.write(p.join(""),"ascii"),this.writable.write(b)}catch(v){return this.handleError(v,y),Promise.reject(v)}}handleError(y,p){this.errorCount++,this.fireError(y,p,this.errorCount)}end(){this.writable.end()}}t.WriteableStreamMessageWriter=u})(gF);var TF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.ConnectionOptions=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=t.NullLogger=t.ProgressType=t.ProgressToken=void 0;const e=qs,n=li,i=nv,r=iv,a=ml,s=rv;var l;(function(M){M.type=new i.NotificationType("$/cancelRequest")})(l||(l={}));var o;(function(M){function T(N){return typeof N=="string"||typeof N=="number"}M.is=T})(o=t.ProgressToken||(t.ProgressToken={}));var u;(function(M){M.type=new i.NotificationType("$/progress")})(u||(u={}));class f{constructor(){}}t.ProgressType=f;var y;(function(M){function T(N){return n.func(N)}M.is=T})(y||(y={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var p;(function(M){M[M.Off=0]="Off",M[M.Messages=1]="Messages",M[M.Compact=2]="Compact",M[M.Verbose=3]="Verbose"})(p=t.Trace||(t.Trace={})),function(M){M.Off="off",M.Messages="messages",M.Compact="compact",M.Verbose="verbose"}(t.TraceValues||(t.TraceValues={})),function(M){function T(J){if(!n.string(J))return M.Off;switch(J=J.toLowerCase(),J){case"off":return M.Off;case"messages":return M.Messages;case"compact":return M.Compact;case"verbose":return M.Verbose;default:return M.Off}}M.fromString=T;function N(J){switch(J){case M.Off:return"off";case M.Messages:return"messages";case M.Compact:return"compact";case M.Verbose:return"verbose";default:return"off"}}M.toString=N}(p=t.Trace||(t.Trace={}));var b;(function(M){M.Text="text",M.JSON="json"})(b=t.TraceFormat||(t.TraceFormat={})),function(M){function T(N){return n.string(N)?(N=N.toLowerCase(),N==="json"?M.JSON:M.Text):M.Text}M.fromString=T}(b=t.TraceFormat||(t.TraceFormat={}));var v;(function(M){M.type=new i.NotificationType("$/setTrace")})(v=t.SetTraceNotification||(t.SetTraceNotification={}));var m;(function(M){M.type=new i.NotificationType("$/logTrace")})(m=t.LogTraceNotification||(t.LogTraceNotification={}));var V;(function(M){M[M.Closed=1]="Closed",M[M.Disposed=2]="Disposed",M[M.AlreadyListening=3]="AlreadyListening"})(V=t.ConnectionErrors||(t.ConnectionErrors={}));class F extends Error{constructor(T,N){super(N),this.code=T,Object.setPrototypeOf(this,F.prototype)}}t.ConnectionError=F;var P;(function(M){function T(N){const J=N;return J&&n.func(J.cancelUndispatched)}M.is=T})(P=t.ConnectionStrategy||(t.ConnectionStrategy={}));var G;(function(M){M.Message=Object.freeze({createCancellationTokenSource(N){return new s.CancellationTokenSource}});function T(N){const J=N;return J&&n.func(J.createCancellationTokenSource)}M.is=T})(G=t.CancellationReceiverStrategy||(t.CancellationReceiverStrategy={}));var te;(function(M){M.Message=Object.freeze({sendCancellation(N,J){return N.sendNotification(l.type,{id:J})},cleanup(N){}});function T(N){const J=N;return J&&n.func(J.sendCancellation)&&n.func(J.cleanup)}M.is=T})(te=t.CancellationSenderStrategy||(t.CancellationSenderStrategy={}));var q;(function(M){M.Message=Object.freeze({receiver:G.Message,sender:te.Message});function T(N){const J=N;return J&&G.is(J.receiver)&&te.is(J.sender)}M.is=T})(q=t.CancellationStrategy||(t.CancellationStrategy={})),function(M){function T(N){const J=N;return J&&(q.is(J.cancellationStrategy)||P.is(J.connectionStrategy))}M.is=T}(t.ConnectionOptions||(t.ConnectionOptions={}));var U;(function(M){M[M.New=1]="New",M[M.Listening=2]="Listening",M[M.Closed=3]="Closed",M[M.Disposed=4]="Disposed"})(U||(U={}));function D(M,T,N,J){const L=N!==void 0?N:t.NullLogger;let ce=0,ue=0,W=0;const Y="2.0";let ee;const H=new Map;let le;const R=new Map,ae=new Map;let re,d=new r.LinkedMap,k=new Map,oe=new Set,ye=new Map,E=p.Off,$=b.Text,B,X=U.New;const Z=new a.Emitter,se=new a.Emitter,_e=new a.Emitter,be=new a.Emitter,ve=new a.Emitter,De=J&&J.cancellationStrategy?J.cancellationStrategy:q.Message;function Oe(de){if(de===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+de.toString()}function Je(de){return de===null?"res-unknown-"+(++W).toString():"res-"+de.toString()}function $e(){return"not-"+(++ue).toString()}function tt(de,Ce){i.Message.isRequest(Ce)?de.set(Oe(Ce.id),Ce):i.Message.isResponse(Ce)?de.set(Je(Ce.id),Ce):de.set($e(),Ce)}function Ue(de){}function Ye(){return X===U.Listening}function it(){return X===U.Closed}function ht(){return X===U.Disposed}function mt(){(X===U.New||X===U.Listening)&&(X=U.Closed,se.fire(void 0))}function Be(de){Z.fire([de,void 0,void 0])}function qe(de){Z.fire(de)}M.onClose(mt),M.onError(Be),T.onClose(mt),T.onError(qe);function dt(){re||d.size===0||(re=(0,e.default)().timer.setImmediate(()=>{re=void 0,Xt()}))}function Xt(){if(d.size===0)return;const de=d.shift();try{i.Message.isRequest(de)?Ti(de):i.Message.isNotification(de)?Se(de):i.Message.isResponse(de)?Ki(de):Me(de)}finally{dt()}}const En=de=>{try{if(i.Message.isNotification(de)&&de.method===l.type.method){const Ce=de.params.id,me=Oe(Ce),we=d.get(me);if(i.Message.isRequest(we)){const _t=J==null?void 0:J.connectionStrategy,Nt=_t&&_t.cancelUndispatched?_t.cancelUndispatched(we,Ue):void 0;if(Nt&&(Nt.error!==void 0||Nt.result!==void 0)){d.delete(me),ye.delete(Ce),Nt.id=we.id,vt(Nt,de.method,Date.now()),T.write(Nt).catch(()=>L.error("Sending response for canceled message failed."));return}}const He=ye.get(Ce);if(He!==void 0){He.cancel(),Tt(de);return}else oe.add(Ce)}tt(d,de)}finally{dt()}};function Ti(de){var mn;if(ht())return;function Ce(Rt,ln,Mt){const un={jsonrpc:Y,id:de.id};Rt instanceof i.ResponseError?un.error=Rt.toJson():un.result=Rt===void 0?null:Rt,vt(un,ln,Mt),T.write(un).catch(()=>L.error("Sending response failed."))}function me(Rt,ln,Mt){const un={jsonrpc:Y,id:de.id,error:Rt.toJson()};vt(un,ln,Mt),T.write(un).catch(()=>L.error("Sending response failed."))}function we(Rt,ln,Mt){Rt===void 0&&(Rt=null);const un={jsonrpc:Y,id:de.id,result:Rt};vt(un,ln,Mt),T.write(un).catch(()=>L.error("Sending response failed."))}Vt(de);const He=H.get(de.method);let _t,Nt;He&&(_t=He.type,Nt=He.handler);const Gt=Date.now();if(Nt||ee){const Rt=(mn=de.id)!=null?mn:String(Date.now()),ln=De.receiver.createCancellationTokenSource(Rt);de.id!==null&&oe.has(de.id)&&ln.cancel(),de.id!==null&&ye.set(Rt,ln);try{let Mt;if(Nt)if(de.params===void 0){if(_t!==void 0&&_t.numberOfParams!==0){me(new i.ResponseError(i.ErrorCodes.InvalidParams,`Request ${de.method} defines ${_t.numberOfParams} params but received none.`),de.method,Gt);return}Mt=Nt(ln.token)}else if(Array.isArray(de.params)){if(_t!==void 0&&_t.parameterStructures===i.ParameterStructures.byName){me(new i.ResponseError(i.ErrorCodes.InvalidParams,`Request ${de.method} defines parameters by name but received parameters by position`),de.method,Gt);return}Mt=Nt(...de.params,ln.token)}else{if(_t!==void 0&&_t.parameterStructures===i.ParameterStructures.byPosition){me(new i.ResponseError(i.ErrorCodes.InvalidParams,`Request ${de.method} defines parameters by position but received parameters by name`),de.method,Gt);return}Mt=Nt(de.params,ln.token)}else ee&&(Mt=ee(de.method,de.params,ln.token));const un=Mt;Mt?un.then?un.then(Mn=>{ye.delete(Rt),Ce(Mn,de.method,Gt)},Mn=>{ye.delete(Rt),Mn instanceof i.ResponseError?me(Mn,de.method,Gt):Mn&&n.string(Mn.message)?me(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${de.method} failed with message: ${Mn.message}`),de.method,Gt):me(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${de.method} failed unexpectedly without providing any details.`),de.method,Gt)}):(ye.delete(Rt),Ce(Mt,de.method,Gt)):(ye.delete(Rt),we(Mt,de.method,Gt))}catch(Mt){ye.delete(Rt),Mt instanceof i.ResponseError?Ce(Mt,de.method,Gt):Mt&&n.string(Mt.message)?me(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${de.method} failed with message: ${Mt.message}`),de.method,Gt):me(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${de.method} failed unexpectedly without providing any details.`),de.method,Gt)}}else me(new i.ResponseError(i.ErrorCodes.MethodNotFound,`Unhandled method ${de.method}`),de.method,Gt)}function Ki(de){if(!ht())if(de.id===null)de.error?L.error(`Received response message without id: Error is: 
${JSON.stringify(de.error,void 0,4)}`):L.error("Received response message without id. No further error information provided.");else{const Ce=de.id,me=k.get(Ce);if(hn(de,me),me!==void 0){k.delete(Ce);try{if(de.error){const we=de.error;me.reject(new i.ResponseError(we.code,we.message,we.data))}else if(de.result!==void 0)me.resolve(de.result);else throw new Error("Should never happen.")}catch(we){we.message?L.error(`Response handler '${me.method}' failed with message: ${we.message}`):L.error(`Response handler '${me.method}' failed unexpectedly.`)}}}}function Se(de){if(ht())return;let Ce,me;if(de.method===l.type.method){const we=de.params.id;oe.delete(we),Tt(de);return}else{const we=R.get(de.method);we&&(me=we.handler,Ce=we.type)}if(me||le)try{if(Tt(de),me)if(de.params===void 0)Ce!==void 0&&Ce.numberOfParams!==0&&Ce.parameterStructures!==i.ParameterStructures.byName&&L.error(`Notification ${de.method} defines ${Ce.numberOfParams} params but received none.`),me();else if(Array.isArray(de.params)){const we=de.params;de.method===u.type.method&&we.length===2&&o.is(we[0])?me({token:we[0],value:we[1]}):(Ce!==void 0&&(Ce.parameterStructures===i.ParameterStructures.byName&&L.error(`Notification ${de.method} defines parameters by name but received parameters by position`),Ce.numberOfParams!==de.params.length&&L.error(`Notification ${de.method} defines ${Ce.numberOfParams} params but received ${we.length} arguments`)),me(...we))}else Ce!==void 0&&Ce.parameterStructures===i.ParameterStructures.byPosition&&L.error(`Notification ${de.method} defines parameters by position but received parameters by name`),me(de.params);else le&&le(de.method,de.params)}catch(we){we.message?L.error(`Notification handler '${de.method}' failed with message: ${we.message}`):L.error(`Notification handler '${de.method}' failed unexpectedly.`)}else _e.fire(de)}function Me(de){if(!de){L.error("Received empty message.");return}L.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(de,null,4)}`);const Ce=de;if(n.string(Ce.id)||n.number(Ce.id)){const me=Ce.id,we=k.get(me);we&&we.reject(new Error("The received response has neither a result nor an error property."))}}function je(de){if(de!=null)switch(E){case p.Verbose:return JSON.stringify(de,null,4);case p.Compact:return JSON.stringify(de);default:return}}function ct(de){if(!(E===p.Off||!B))if($===b.Text){let Ce;(E===p.Verbose||E===p.Compact)&&de.params&&(Ce=`Params: ${je(de.params)}

`),B.log(`Sending request '${de.method} - (${de.id})'.`,Ce)}else sn("send-request",de)}function pt(de){if(!(E===p.Off||!B))if($===b.Text){let Ce;(E===p.Verbose||E===p.Compact)&&(de.params?Ce=`Params: ${je(de.params)}

`:Ce=`No parameters provided.

`),B.log(`Sending notification '${de.method}'.`,Ce)}else sn("send-notification",de)}function vt(de,Ce,me){if(!(E===p.Off||!B))if($===b.Text){let we;(E===p.Verbose||E===p.Compact)&&(de.error&&de.error.data?we=`Error data: ${je(de.error.data)}

`:de.result?we=`Result: ${je(de.result)}

`:de.error===void 0&&(we=`No result returned.

`)),B.log(`Sending response '${Ce} - (${de.id})'. Processing request took ${Date.now()-me}ms`,we)}else sn("send-response",de)}function Vt(de){if(!(E===p.Off||!B))if($===b.Text){let Ce;(E===p.Verbose||E===p.Compact)&&de.params&&(Ce=`Params: ${je(de.params)}

`),B.log(`Received request '${de.method} - (${de.id})'.`,Ce)}else sn("receive-request",de)}function Tt(de){if(!(E===p.Off||!B||de.method===m.type.method))if($===b.Text){let Ce;(E===p.Verbose||E===p.Compact)&&(de.params?Ce=`Params: ${je(de.params)}

`:Ce=`No parameters provided.

`),B.log(`Received notification '${de.method}'.`,Ce)}else sn("receive-notification",de)}function hn(de,Ce){if(!(E===p.Off||!B))if($===b.Text){let me;if((E===p.Verbose||E===p.Compact)&&(de.error&&de.error.data?me=`Error data: ${je(de.error.data)}

`:de.result?me=`Result: ${je(de.result)}

`:de.error===void 0&&(me=`No result returned.

`)),Ce){const we=de.error?` Request failed: ${de.error.message} (${de.error.code}).`:"";B.log(`Received response '${Ce.method} - (${de.id})' in ${Date.now()-Ce.timerStart}ms.${we}`,me)}else B.log(`Received response ${de.id} without active response promise.`,me)}else sn("receive-response",de)}function sn(de,Ce){if(!B||E===p.Off)return;const me={isLSPMessage:!0,type:de,message:Ce,timestamp:Date.now()};B.log(me)}function Pn(){if(it())throw new F(V.Closed,"Connection is closed.");if(ht())throw new F(V.Disposed,"Connection is disposed.")}function Hi(){if(Ye())throw new F(V.AlreadyListening,"Connection is already listening")}function Yn(){if(!Ye())throw new Error("Call listen() first.")}function z(de){return de===void 0?null:de}function Q(de){if(de!==null)return de}function fe(de){return de!=null&&!Array.isArray(de)&&typeof de=="object"}function ge(de,Ce){switch(de){case i.ParameterStructures.auto:return fe(Ce)?Q(Ce):[z(Ce)];case i.ParameterStructures.byName:if(!fe(Ce))throw new Error("Received parameters by name but param is not an object literal.");return Q(Ce);case i.ParameterStructures.byPosition:return[z(Ce)];default:throw new Error(`Unknown parameter structure ${de.toString()}`)}}function Ae(de,Ce){let me;const we=de.numberOfParams;switch(we){case 0:me=void 0;break;case 1:me=ge(de.parameterStructures,Ce[0]);break;default:me=[];for(let He=0;He<Ce.length&&He<we;He++)me.push(z(Ce[He]));if(Ce.length<we)for(let He=Ce.length;He<we;He++)me.push(null);break}return me}const Fe={sendNotification:(de,...Ce)=>{Pn();let me,we;if(n.string(de)){me=de;const _t=Ce[0];let Nt=0,Gt=i.ParameterStructures.auto;i.ParameterStructures.is(_t)&&(Nt=1,Gt=_t);let mn=Ce.length;const Rt=mn-Nt;switch(Rt){case 0:we=void 0;break;case 1:we=ge(Gt,Ce[Nt]);break;default:if(Gt===i.ParameterStructures.byName)throw new Error(`Received ${Rt} parameters for 'by Name' notification parameter structure.`);we=Ce.slice(Nt,mn).map(ln=>z(ln));break}}else{const _t=Ce;me=de.method,we=Ae(de,_t)}const He={jsonrpc:Y,method:me,params:we};return pt(He),T.write(He).catch(()=>L.error("Sending notification failed."))},onNotification:(de,Ce)=>{Pn();let me;return n.func(de)?le=de:Ce&&(n.string(de)?(me=de,R.set(de,{type:void 0,handler:Ce})):(me=de.method,R.set(de.method,{type:de,handler:Ce}))),{dispose:()=>{me!==void 0?R.delete(me):le=void 0}}},onProgress:(de,Ce,me)=>{if(ae.has(Ce))throw new Error(`Progress handler for token ${Ce} already registered`);return ae.set(Ce,me),{dispose:()=>{ae.delete(Ce)}}},sendProgress:(de,Ce,me)=>Fe.sendNotification(u.type,{token:Ce,value:me}),onUnhandledProgress:be.event,sendRequest:(de,...Ce)=>{Pn(),Yn();let me,we,He;if(n.string(de)){me=de;const mn=Ce[0],Rt=Ce[Ce.length-1];let ln=0,Mt=i.ParameterStructures.auto;i.ParameterStructures.is(mn)&&(ln=1,Mt=mn);let un=Ce.length;s.CancellationToken.is(Rt)&&(un=un-1,He=Rt);const Mn=un-ln;switch(Mn){case 0:we=void 0;break;case 1:we=ge(Mt,Ce[ln]);break;default:if(Mt===i.ParameterStructures.byName)throw new Error(`Received ${Mn} parameters for 'by Name' request parameter structure.`);we=Ce.slice(ln,un).map(Lr=>z(Lr));break}}else{const mn=Ce;me=de.method,we=Ae(de,mn);const Rt=de.numberOfParams;He=s.CancellationToken.is(mn[Rt])?mn[Rt]:void 0}const _t=ce++;let Nt;return He&&(Nt=He.onCancellationRequested(()=>{const mn=De.sender.sendCancellation(Fe,_t);return mn===void 0?(L.log(`Received no promise from cancellation strategy when cancelling id ${_t}`),Promise.resolve()):mn.catch(()=>{L.log(`Sending cancellation messages for id ${_t} failed`)})})),new Promise((mn,Rt)=>{const ln={jsonrpc:Y,id:_t,method:me,params:we},Mt=Lr=>{mn(Lr),De.sender.cleanup(_t),Nt==null||Nt.dispose()},un=Lr=>{Rt(Lr),De.sender.cleanup(_t),Nt==null||Nt.dispose()};let Mn={method:me,timerStart:Date.now(),resolve:Mt,reject:un};ct(ln);try{T.write(ln).catch(()=>L.error("Sending request failed."))}catch(Lr){Mn.reject(new i.ResponseError(i.ErrorCodes.MessageWriteError,Lr.message?Lr.message:"Unknown reason")),Mn=null}Mn&&k.set(_t,Mn)})},onRequest:(de,Ce)=>{Pn();let me=null;return y.is(de)?(me=void 0,ee=de):n.string(de)?(me=null,Ce!==void 0&&(me=de,H.set(de,{handler:Ce,type:void 0}))):Ce!==void 0&&(me=de.method,H.set(de.method,{type:de,handler:Ce})),{dispose:()=>{me!==null&&(me!==void 0?H.delete(me):ee=void 0)}}},hasPendingResponse:()=>k.size>0,trace:async(de,Ce,me)=>{let we=!1,He=b.Text;me!==void 0&&(n.boolean(me)?we=me:(we=me.sendNotification||!1,He=me.traceFormat||b.Text)),E=de,$=He,E===p.Off?B=void 0:B=Ce,we&&!it()&&!ht()&&await Fe.sendNotification(v.type,{value:p.toString(de)})},onError:Z.event,onClose:se.event,onUnhandledNotification:_e.event,onDispose:ve.event,end:()=>{T.end()},dispose:()=>{if(ht())return;X=U.Disposed,ve.fire(void 0);const de=new i.ResponseError(i.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const Ce of k.values())Ce.reject(de);k=new Map,ye=new Map,oe=new Set,d=new r.LinkedMap,n.func(T.dispose)&&T.dispose(),n.func(M.dispose)&&M.dispose()},listen:()=>{Pn(),Hi(),X=U.Listening,M.listen(En)},inspect:()=>{(0,e.default)().console.log("inspect")}};return Fe.onNotification(m.type,de=>{if(E===p.Off||!B)return;const Ce=E===p.Verbose||E===p.Compact;B.log(de.message,Ce?de.verbose:void 0)}),Fe.onNotification(u.type,de=>{const Ce=ae.get(de.token);Ce?Ce(de.value):be.fire(de)}),Fe}t.createMessageConnection=D})(TF);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFormat=t.TraceValues=t.Trace=t.ProgressType=t.ProgressToken=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.LRUCache=t.Touch=t.LinkedMap=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.Message=t.RAL=void 0,t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=void 0;const e=nv;Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return e.Message}}),Object.defineProperty(t,"RequestType",{enumerable:!0,get:function(){return e.RequestType}}),Object.defineProperty(t,"RequestType0",{enumerable:!0,get:function(){return e.RequestType0}}),Object.defineProperty(t,"RequestType1",{enumerable:!0,get:function(){return e.RequestType1}}),Object.defineProperty(t,"RequestType2",{enumerable:!0,get:function(){return e.RequestType2}}),Object.defineProperty(t,"RequestType3",{enumerable:!0,get:function(){return e.RequestType3}}),Object.defineProperty(t,"RequestType4",{enumerable:!0,get:function(){return e.RequestType4}}),Object.defineProperty(t,"RequestType5",{enumerable:!0,get:function(){return e.RequestType5}}),Object.defineProperty(t,"RequestType6",{enumerable:!0,get:function(){return e.RequestType6}}),Object.defineProperty(t,"RequestType7",{enumerable:!0,get:function(){return e.RequestType7}}),Object.defineProperty(t,"RequestType8",{enumerable:!0,get:function(){return e.RequestType8}}),Object.defineProperty(t,"RequestType9",{enumerable:!0,get:function(){return e.RequestType9}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return e.ResponseError}}),Object.defineProperty(t,"ErrorCodes",{enumerable:!0,get:function(){return e.ErrorCodes}}),Object.defineProperty(t,"NotificationType",{enumerable:!0,get:function(){return e.NotificationType}}),Object.defineProperty(t,"NotificationType0",{enumerable:!0,get:function(){return e.NotificationType0}}),Object.defineProperty(t,"NotificationType1",{enumerable:!0,get:function(){return e.NotificationType1}}),Object.defineProperty(t,"NotificationType2",{enumerable:!0,get:function(){return e.NotificationType2}}),Object.defineProperty(t,"NotificationType3",{enumerable:!0,get:function(){return e.NotificationType3}}),Object.defineProperty(t,"NotificationType4",{enumerable:!0,get:function(){return e.NotificationType4}}),Object.defineProperty(t,"NotificationType5",{enumerable:!0,get:function(){return e.NotificationType5}}),Object.defineProperty(t,"NotificationType6",{enumerable:!0,get:function(){return e.NotificationType6}}),Object.defineProperty(t,"NotificationType7",{enumerable:!0,get:function(){return e.NotificationType7}}),Object.defineProperty(t,"NotificationType8",{enumerable:!0,get:function(){return e.NotificationType8}}),Object.defineProperty(t,"NotificationType9",{enumerable:!0,get:function(){return e.NotificationType9}}),Object.defineProperty(t,"ParameterStructures",{enumerable:!0,get:function(){return e.ParameterStructures}});const n=iv;Object.defineProperty(t,"LinkedMap",{enumerable:!0,get:function(){return n.LinkedMap}}),Object.defineProperty(t,"LRUCache",{enumerable:!0,get:function(){return n.LRUCache}}),Object.defineProperty(t,"Touch",{enumerable:!0,get:function(){return n.Touch}});const i=tv;Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return i.Disposable}});const r=ml;Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return r.Event}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return r.Emitter}});const a=rv;Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return a.CancellationTokenSource}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return a.CancellationToken}});const s=yF;Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return s.MessageReader}}),Object.defineProperty(t,"AbstractMessageReader",{enumerable:!0,get:function(){return s.AbstractMessageReader}}),Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return s.ReadableStreamMessageReader}});const l=gF;Object.defineProperty(t,"MessageWriter",{enumerable:!0,get:function(){return l.MessageWriter}}),Object.defineProperty(t,"AbstractMessageWriter",{enumerable:!0,get:function(){return l.AbstractMessageWriter}}),Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return l.WriteableStreamMessageWriter}});const o=TF;Object.defineProperty(t,"ConnectionStrategy",{enumerable:!0,get:function(){return o.ConnectionStrategy}}),Object.defineProperty(t,"ConnectionOptions",{enumerable:!0,get:function(){return o.ConnectionOptions}}),Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return o.NullLogger}}),Object.defineProperty(t,"createMessageConnection",{enumerable:!0,get:function(){return o.createMessageConnection}}),Object.defineProperty(t,"ProgressToken",{enumerable:!0,get:function(){return o.ProgressToken}}),Object.defineProperty(t,"ProgressType",{enumerable:!0,get:function(){return o.ProgressType}}),Object.defineProperty(t,"Trace",{enumerable:!0,get:function(){return o.Trace}}),Object.defineProperty(t,"TraceValues",{enumerable:!0,get:function(){return o.TraceValues}}),Object.defineProperty(t,"TraceFormat",{enumerable:!0,get:function(){return o.TraceFormat}}),Object.defineProperty(t,"SetTraceNotification",{enumerable:!0,get:function(){return o.SetTraceNotification}}),Object.defineProperty(t,"LogTraceNotification",{enumerable:!0,get:function(){return o.LogTraceNotification}}),Object.defineProperty(t,"ConnectionErrors",{enumerable:!0,get:function(){return o.ConnectionErrors}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return o.ConnectionError}}),Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return o.CancellationReceiverStrategy}}),Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return o.CancellationSenderStrategy}}),Object.defineProperty(t,"CancellationStrategy",{enumerable:!0,get:function(){return o.CancellationStrategy}});const u=qs;t.RAL=u.default})(g0);(function(t){var e=Te&&Te.__createBinding||(Object.create?function(o,u,f,y){y===void 0&&(y=f);var p=Object.getOwnPropertyDescriptor(u,f);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[f]}}),Object.defineProperty(o,y,p)}:function(o,u,f,y){y===void 0&&(y=f),o[y]=u[f]}),n=Te&&Te.__exportStar||function(o,u){for(var f in o)f!=="default"&&!Object.prototype.hasOwnProperty.call(u,f)&&e(u,o,f)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.BrowserMessageWriter=t.BrowserMessageReader=void 0,ev.default.install();const r=g0;n(g0,t);class a extends r.AbstractMessageReader{constructor(u){super(),this._onData=new r.Emitter,this._messageListener=f=>{this._onData.fire(f.data)},u.addEventListener("error",f=>this.fireError(f)),u.onmessage=this._messageListener}listen(u){return this._onData.event(u)}}t.BrowserMessageReader=a;class s extends r.AbstractMessageWriter{constructor(u){super(),this.context=u,this.errorCount=0,u.addEventListener("error",f=>this.fireError(f))}write(u){try{return this.context.postMessage(u),Promise.resolve()}catch(f){return this.handleError(f,u),Promise.reject(f)}}handleError(u,f){this.errorCount++,this.fireError(u,f,this.errorCount)}end(){}}t.BrowserMessageWriter=s;function l(o,u,f,y){return f===void 0&&(f=r.NullLogger),r.ConnectionStrategy.is(y)&&(y={connectionStrategy:y}),(0,r.createMessageConnection)(o,u,f,y)}t.createMessageConnection=l})(go);var Cs={},T0={},aa={},gi={},aS=go,_F={},_0;(function(t){function e(n){return typeof n=="string"}t.is=e})(_0||(_0={}));var Op;(function(t){function e(n){return typeof n=="string"}t.is=e})(Op||(Op={}));var v0;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}t.is=e})(v0||(v0={}));var od;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}t.is=e})(od||(od={}));var Jr;(function(t){function e(i,r){return i===Number.MAX_VALUE&&(i=od.MAX_VALUE),r===Number.MAX_VALUE&&(r=od.MAX_VALUE),{line:i,character:r}}t.create=e;function n(i){var r=i;return We.objectLiteral(r)&&We.uinteger(r.line)&&We.uinteger(r.character)}t.is=n})(Jr||(Jr={}));var ei;(function(t){function e(i,r,a,s){if(We.uinteger(i)&&We.uinteger(r)&&We.uinteger(a)&&We.uinteger(s))return{start:Jr.create(i,r),end:Jr.create(a,s)};if(Jr.is(i)&&Jr.is(r))return{start:i,end:r};throw new Error("Range#create called with invalid arguments[".concat(i,", ").concat(r,", ").concat(a,", ").concat(s,"]"))}t.create=e;function n(i){var r=i;return We.objectLiteral(r)&&Jr.is(r.start)&&Jr.is(r.end)}t.is=n})(ei||(ei={}));var ld;(function(t){function e(i,r){return{uri:i,range:r}}t.create=e;function n(i){var r=i;return We.defined(r)&&ei.is(r.range)&&(We.string(r.uri)||We.undefined(r.uri))}t.is=n})(ld||(ld={}));var b0;(function(t){function e(i,r,a,s){return{targetUri:i,targetRange:r,targetSelectionRange:a,originSelectionRange:s}}t.create=e;function n(i){var r=i;return We.defined(r)&&ei.is(r.targetRange)&&We.string(r.targetUri)&&ei.is(r.targetSelectionRange)&&(ei.is(r.originSelectionRange)||We.undefined(r.originSelectionRange))}t.is=n})(b0||(b0={}));var xp;(function(t){function e(i,r,a,s){return{red:i,green:r,blue:a,alpha:s}}t.create=e;function n(i){var r=i;return We.objectLiteral(r)&&We.numberRange(r.red,0,1)&&We.numberRange(r.green,0,1)&&We.numberRange(r.blue,0,1)&&We.numberRange(r.alpha,0,1)}t.is=n})(xp||(xp={}));var S0;(function(t){function e(i,r){return{range:i,color:r}}t.create=e;function n(i){var r=i;return We.objectLiteral(r)&&ei.is(r.range)&&xp.is(r.color)}t.is=n})(S0||(S0={}));var I0;(function(t){function e(i,r,a){return{label:i,textEdit:r,additionalTextEdits:a}}t.create=e;function n(i){var r=i;return We.objectLiteral(r)&&We.string(r.label)&&(We.undefined(r.textEdit)||Bs.is(r))&&(We.undefined(r.additionalTextEdits)||We.typedArray(r.additionalTextEdits,Bs.is))}t.is=n})(I0||(I0={}));var C0;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(C0||(C0={}));var w0;(function(t){function e(i,r,a,s,l,o){var u={startLine:i,endLine:r};return We.defined(a)&&(u.startCharacter=a),We.defined(s)&&(u.endCharacter=s),We.defined(l)&&(u.kind=l),We.defined(o)&&(u.collapsedText=o),u}t.create=e;function n(i){var r=i;return We.objectLiteral(r)&&We.uinteger(r.startLine)&&We.uinteger(r.startLine)&&(We.undefined(r.startCharacter)||We.uinteger(r.startCharacter))&&(We.undefined(r.endCharacter)||We.uinteger(r.endCharacter))&&(We.undefined(r.kind)||We.string(r.kind))}t.is=n})(w0||(w0={}));var Lp;(function(t){function e(i,r){return{location:i,message:r}}t.create=e;function n(i){var r=i;return We.defined(r)&&ld.is(r.location)&&We.string(r.message)}t.is=n})(Lp||(Lp={}));var E0;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(E0||(E0={}));var F0;(function(t){t.Unnecessary=1,t.Deprecated=2})(F0||(F0={}));var k0;(function(t){function e(n){var i=n;return We.objectLiteral(i)&&We.string(i.href)}t.is=e})(k0||(k0={}));var cd;(function(t){function e(i,r,a,s,l,o){var u={range:i,message:r};return We.defined(a)&&(u.severity=a),We.defined(s)&&(u.code=s),We.defined(l)&&(u.source=l),We.defined(o)&&(u.relatedInformation=o),u}t.create=e;function n(i){var r,a=i;return We.defined(a)&&ei.is(a.range)&&We.string(a.message)&&(We.number(a.severity)||We.undefined(a.severity))&&(We.integer(a.code)||We.string(a.code)||We.undefined(a.code))&&(We.undefined(a.codeDescription)||We.string((r=a.codeDescription)===null||r===void 0?void 0:r.href))&&(We.string(a.source)||We.undefined(a.source))&&(We.undefined(a.relatedInformation)||We.typedArray(a.relatedInformation,Lp.is))}t.is=n})(cd||(cd={}));var nl;(function(t){function e(i,r){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var l={title:i,command:r};return We.defined(a)&&a.length>0&&(l.arguments=a),l}t.create=e;function n(i){var r=i;return We.defined(r)&&We.string(r.title)&&We.string(r.command)}t.is=n})(nl||(nl={}));var Bs;(function(t){function e(a,s){return{range:a,newText:s}}t.replace=e;function n(a,s){return{range:{start:a,end:a},newText:s}}t.insert=n;function i(a){return{range:a,newText:""}}t.del=i;function r(a){var s=a;return We.objectLiteral(s)&&We.string(s.newText)&&ei.is(s.range)}t.is=r})(Bs||(Bs={}));var Ko;(function(t){function e(i,r,a){var s={label:i};return r!==void 0&&(s.needsConfirmation=r),a!==void 0&&(s.description=a),s}t.create=e;function n(i){var r=i;return We.objectLiteral(r)&&We.string(r.label)&&(We.boolean(r.needsConfirmation)||r.needsConfirmation===void 0)&&(We.string(r.description)||r.description===void 0)}t.is=n})(Ko||(Ko={}));var Mi;(function(t){function e(n){var i=n;return We.string(i)}t.is=e})(Mi||(Mi={}));var Zs;(function(t){function e(a,s,l){return{range:a,newText:s,annotationId:l}}t.replace=e;function n(a,s,l){return{range:{start:a,end:a},newText:s,annotationId:l}}t.insert=n;function i(a,s){return{range:a,newText:"",annotationId:s}}t.del=i;function r(a){var s=a;return Bs.is(s)&&(Ko.is(s.annotationId)||Mi.is(s.annotationId))}t.is=r})(Zs||(Zs={}));var ud;(function(t){function e(i,r){return{textDocument:i,edits:r}}t.create=e;function n(i){var r=i;return We.defined(r)&&dd.is(r.textDocument)&&Array.isArray(r.edits)}t.is=n})(ud||(ud={}));var Ec;(function(t){function e(i,r,a){var s={kind:"create",uri:i};return r!==void 0&&(r.overwrite!==void 0||r.ignoreIfExists!==void 0)&&(s.options=r),a!==void 0&&(s.annotationId=a),s}t.create=e;function n(i){var r=i;return r&&r.kind==="create"&&We.string(r.uri)&&(r.options===void 0||(r.options.overwrite===void 0||We.boolean(r.options.overwrite))&&(r.options.ignoreIfExists===void 0||We.boolean(r.options.ignoreIfExists)))&&(r.annotationId===void 0||Mi.is(r.annotationId))}t.is=n})(Ec||(Ec={}));var Fc;(function(t){function e(i,r,a,s){var l={kind:"rename",oldUri:i,newUri:r};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(l.options=a),s!==void 0&&(l.annotationId=s),l}t.create=e;function n(i){var r=i;return r&&r.kind==="rename"&&We.string(r.oldUri)&&We.string(r.newUri)&&(r.options===void 0||(r.options.overwrite===void 0||We.boolean(r.options.overwrite))&&(r.options.ignoreIfExists===void 0||We.boolean(r.options.ignoreIfExists)))&&(r.annotationId===void 0||Mi.is(r.annotationId))}t.is=n})(Fc||(Fc={}));var kc;(function(t){function e(i,r,a){var s={kind:"delete",uri:i};return r!==void 0&&(r.recursive!==void 0||r.ignoreIfNotExists!==void 0)&&(s.options=r),a!==void 0&&(s.annotationId=a),s}t.create=e;function n(i){var r=i;return r&&r.kind==="delete"&&We.string(r.uri)&&(r.options===void 0||(r.options.recursive===void 0||We.boolean(r.options.recursive))&&(r.options.ignoreIfNotExists===void 0||We.boolean(r.options.ignoreIfNotExists)))&&(r.annotationId===void 0||Mi.is(r.annotationId))}t.is=n})(kc||(kc={}));var zp;(function(t){function e(n){var i=n;return i&&(i.changes!==void 0||i.documentChanges!==void 0)&&(i.documentChanges===void 0||i.documentChanges.every(function(r){return We.string(r.kind)?Ec.is(r)||Fc.is(r)||kc.is(r):ud.is(r)}))}t.is=e})(zp||(zp={}));var Sf=function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return t.prototype.insert=function(e,n,i){var r,a;if(i===void 0?r=Bs.insert(e,n):Mi.is(i)?(a=i,r=Zs.insert(e,n,i)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(i),r=Zs.insert(e,n,a)),this.edits.push(r),a!==void 0)return a},t.prototype.replace=function(e,n,i){var r,a;if(i===void 0?r=Bs.replace(e,n):Mi.is(i)?(a=i,r=Zs.replace(e,n,i)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(i),r=Zs.replace(e,n,a)),this.edits.push(r),a!==void 0)return a},t.prototype.delete=function(e,n){var i,r;if(n===void 0?i=Bs.del(e):Mi.is(n)?(r=n,i=Zs.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(n),i=Zs.del(e,r)),this.edits.push(i),r!==void 0)return r},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),oS=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var i;if(Mi.is(e)?i=e:(i=this.nextId(),n=e),this._annotations[i]!==void 0)throw new Error("Id ".concat(i," is already in use."));if(n===void 0)throw new Error("No annotation provided for id ".concat(i));return this._annotations[i]=n,this._size++,i},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),A3=function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new oS(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(i){if(ud.is(i)){var r=new Sf(i.edits,n._changeAnnotations);n._textEditChanges[i.textDocument.uri]=r}})):e.changes&&Object.keys(e.changes).forEach(function(i){var r=new Sf(e.changes[i]);n._textEditChanges[i]=r})):this._workspaceEdit={}}return Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(dd.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},i=this._textEditChanges[n.uri];if(!i){var r=[],a={textDocument:n,edits:r};this._workspaceEdit.documentChanges.push(a),i=new Sf(r,this._changeAnnotations),this._textEditChanges[n.uri]=i}return i}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var i=this._textEditChanges[e];if(!i){var r=[];this._workspaceEdit.changes[e]=r,i=new Sf(r),this._textEditChanges[e]=i}return i}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new oS,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var r;Ko.is(n)||Mi.is(n)?r=n:i=n;var a,s;if(r===void 0?a=Ec.create(e,i):(s=Mi.is(r)?r:this._changeAnnotations.manage(r),a=Ec.create(e,i,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t.prototype.renameFile=function(e,n,i,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a;Ko.is(i)||Mi.is(i)?a=i:r=i;var s,l;if(a===void 0?s=Fc.create(e,n,r):(l=Mi.is(a)?a:this._changeAnnotations.manage(a),s=Fc.create(e,n,r,l)),this._workspaceEdit.documentChanges.push(s),l!==void 0)return l},t.prototype.deleteFile=function(e,n,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var r;Ko.is(n)||Mi.is(n)?r=n:i=n;var a,s;if(r===void 0?a=kc.create(e,i):(s=Mi.is(r)?r:this._changeAnnotations.manage(r),a=kc.create(e,i,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t}(),D0;(function(t){function e(i){return{uri:i}}t.create=e;function n(i){var r=i;return We.defined(r)&&We.string(r.uri)}t.is=n})(D0||(D0={}));var P0;(function(t){function e(i,r){return{uri:i,version:r}}t.create=e;function n(i){var r=i;return We.defined(r)&&We.string(r.uri)&&We.integer(r.version)}t.is=n})(P0||(P0={}));var dd;(function(t){function e(i,r){return{uri:i,version:r}}t.create=e;function n(i){var r=i;return We.defined(r)&&We.string(r.uri)&&(r.version===null||We.integer(r.version))}t.is=n})(dd||(dd={}));var A0;(function(t){function e(i,r,a,s){return{uri:i,languageId:r,version:a,text:s}}t.create=e;function n(i){var r=i;return We.defined(r)&&We.string(r.uri)&&We.string(r.languageId)&&We.integer(r.version)&&We.string(r.text)}t.is=n})(A0||(A0={}));var Up;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(n){var i=n;return i===t.PlainText||i===t.Markdown}t.is=e})(Up||(Up={}));var Dc;(function(t){function e(n){var i=n;return We.objectLiteral(n)&&Up.is(i.kind)&&We.string(i.value)}t.is=e})(Dc||(Dc={}));var M0;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(M0||(M0={}));var N0;(function(t){t.PlainText=1,t.Snippet=2})(N0||(N0={}));var R0;(function(t){t.Deprecated=1})(R0||(R0={}));var O0;(function(t){function e(i,r,a){return{newText:i,insert:r,replace:a}}t.create=e;function n(i){var r=i;return r&&We.string(r.newText)&&ei.is(r.insert)&&ei.is(r.replace)}t.is=n})(O0||(O0={}));var x0;(function(t){t.asIs=1,t.adjustIndentation=2})(x0||(x0={}));var L0;(function(t){function e(n){var i=n;return i&&(We.string(i.detail)||i.detail===void 0)&&(We.string(i.description)||i.description===void 0)}t.is=e})(L0||(L0={}));var z0;(function(t){function e(n){return{label:n}}t.create=e})(z0||(z0={}));var U0;(function(t){function e(n,i){return{items:n||[],isIncomplete:!!i}}t.create=e})(U0||(U0={}));var fd;(function(t){function e(i){return i.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}t.fromPlainText=e;function n(i){var r=i;return We.string(r)||We.objectLiteral(r)&&We.string(r.language)&&We.string(r.value)}t.is=n})(fd||(fd={}));var V0;(function(t){function e(n){var i=n;return!!i&&We.objectLiteral(i)&&(Dc.is(i.contents)||fd.is(i.contents)||We.typedArray(i.contents,fd.is))&&(n.range===void 0||ei.is(n.range))}t.is=e})(V0||(V0={}));var B0;(function(t){function e(n,i){return i?{label:n,documentation:i}:{label:n}}t.create=e})(B0||(B0={}));var W0;(function(t){function e(n,i){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];var s={label:n};return We.defined(i)&&(s.documentation=i),We.defined(r)?s.parameters=r:s.parameters=[],s}t.create=e})(W0||(W0={}));var $0;(function(t){t.Text=1,t.Read=2,t.Write=3})($0||($0={}));var j0;(function(t){function e(n,i){var r={range:n};return We.number(i)&&(r.kind=i),r}t.create=e})(j0||(j0={}));var q0;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(q0||(q0={}));var G0;(function(t){t.Deprecated=1})(G0||(G0={}));var K0;(function(t){function e(n,i,r,a,s){var l={name:n,kind:i,location:{uri:a,range:r}};return s&&(l.containerName=s),l}t.create=e})(K0||(K0={}));var H0;(function(t){function e(n,i,r,a){return a!==void 0?{name:n,kind:i,location:{uri:r,range:a}}:{name:n,kind:i,location:{uri:r}}}t.create=e})(H0||(H0={}));var Y0;(function(t){function e(i,r,a,s,l,o){var u={name:i,detail:r,kind:a,range:s,selectionRange:l};return o!==void 0&&(u.children=o),u}t.create=e;function n(i){var r=i;return r&&We.string(r.name)&&We.number(r.kind)&&ei.is(r.range)&&ei.is(r.selectionRange)&&(r.detail===void 0||We.string(r.detail))&&(r.deprecated===void 0||We.boolean(r.deprecated))&&(r.children===void 0||Array.isArray(r.children))&&(r.tags===void 0||Array.isArray(r.tags))}t.is=n})(Y0||(Y0={}));var Q0;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(Q0||(Q0={}));var pd;(function(t){t.Invoked=1,t.Automatic=2})(pd||(pd={}));var J0;(function(t){function e(i,r,a){var s={diagnostics:i};return r!=null&&(s.only=r),a!=null&&(s.triggerKind=a),s}t.create=e;function n(i){var r=i;return We.defined(r)&&We.typedArray(r.diagnostics,cd.is)&&(r.only===void 0||We.typedArray(r.only,We.string))&&(r.triggerKind===void 0||r.triggerKind===pd.Invoked||r.triggerKind===pd.Automatic)}t.is=n})(J0||(J0={}));var X0;(function(t){function e(i,r,a){var s={title:i},l=!0;return typeof r=="string"?(l=!1,s.kind=r):nl.is(r)?s.command=r:s.edit=r,l&&a!==void 0&&(s.kind=a),s}t.create=e;function n(i){var r=i;return r&&We.string(r.title)&&(r.diagnostics===void 0||We.typedArray(r.diagnostics,cd.is))&&(r.kind===void 0||We.string(r.kind))&&(r.edit!==void 0||r.command!==void 0)&&(r.command===void 0||nl.is(r.command))&&(r.isPreferred===void 0||We.boolean(r.isPreferred))&&(r.edit===void 0||zp.is(r.edit))}t.is=n})(X0||(X0={}));var Z0;(function(t){function e(i,r){var a={range:i};return We.defined(r)&&(a.data=r),a}t.create=e;function n(i){var r=i;return We.defined(r)&&ei.is(r.range)&&(We.undefined(r.command)||nl.is(r.command))}t.is=n})(Z0||(Z0={}));var eT;(function(t){function e(i,r){return{tabSize:i,insertSpaces:r}}t.create=e;function n(i){var r=i;return We.defined(r)&&We.uinteger(r.tabSize)&&We.boolean(r.insertSpaces)}t.is=n})(eT||(eT={}));var tT;(function(t){function e(i,r,a){return{range:i,target:r,data:a}}t.create=e;function n(i){var r=i;return We.defined(r)&&ei.is(r.range)&&(We.undefined(r.target)||We.string(r.target))}t.is=n})(tT||(tT={}));var nT;(function(t){function e(i,r){return{range:i,parent:r}}t.create=e;function n(i){var r=i;return We.objectLiteral(r)&&ei.is(r.range)&&(r.parent===void 0||t.is(r.parent))}t.is=n})(nT||(nT={}));var iT;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(iT||(iT={}));var rT;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(rT||(rT={}));var sT;(function(t){function e(n){var i=n;return We.objectLiteral(i)&&(i.resultId===void 0||typeof i.resultId=="string")&&Array.isArray(i.data)&&(i.data.length===0||typeof i.data[0]=="number")}t.is=e})(sT||(sT={}));var aT;(function(t){function e(i,r){return{range:i,text:r}}t.create=e;function n(i){var r=i;return r!=null&&ei.is(r.range)&&We.string(r.text)}t.is=n})(aT||(aT={}));var oT;(function(t){function e(i,r,a){return{range:i,variableName:r,caseSensitiveLookup:a}}t.create=e;function n(i){var r=i;return r!=null&&ei.is(r.range)&&We.boolean(r.caseSensitiveLookup)&&(We.string(r.variableName)||r.variableName===void 0)}t.is=n})(oT||(oT={}));var lT;(function(t){function e(i,r){return{range:i,expression:r}}t.create=e;function n(i){var r=i;return r!=null&&ei.is(r.range)&&(We.string(r.expression)||r.expression===void 0)}t.is=n})(lT||(lT={}));var cT;(function(t){function e(i,r){return{frameId:i,stoppedLocation:r}}t.create=e;function n(i){var r=i;return We.defined(r)&&ei.is(i.stoppedLocation)}t.is=n})(cT||(cT={}));var Vp;(function(t){t.Type=1,t.Parameter=2;function e(n){return n===1||n===2}t.is=e})(Vp||(Vp={}));var Bp;(function(t){function e(i){return{value:i}}t.create=e;function n(i){var r=i;return We.objectLiteral(r)&&(r.tooltip===void 0||We.string(r.tooltip)||Dc.is(r.tooltip))&&(r.location===void 0||ld.is(r.location))&&(r.command===void 0||nl.is(r.command))}t.is=n})(Bp||(Bp={}));var uT;(function(t){function e(i,r,a){var s={position:i,label:r};return a!==void 0&&(s.kind=a),s}t.create=e;function n(i){var r=i;return We.objectLiteral(r)&&Jr.is(r.position)&&(We.string(r.label)||We.typedArray(r.label,Bp.is))&&(r.kind===void 0||Vp.is(r.kind))&&r.textEdits===void 0||We.typedArray(r.textEdits,Bs.is)&&(r.tooltip===void 0||We.string(r.tooltip)||Dc.is(r.tooltip))&&(r.paddingLeft===void 0||We.boolean(r.paddingLeft))&&(r.paddingRight===void 0||We.boolean(r.paddingRight))}t.is=n})(uT||(uT={}));var dT;(function(t){function e(n){var i=n;return We.objectLiteral(i)&&Op.is(i.uri)&&We.string(i.name)}t.is=e})(dT||(dT={}));var M3=[`
`,`\r
`,"\r"],fT;(function(t){function e(a,s,l,o){return new N3(a,s,l,o)}t.create=e;function n(a){var s=a;return!!(We.defined(s)&&We.string(s.uri)&&(We.undefined(s.languageId)||We.string(s.languageId))&&We.uinteger(s.lineCount)&&We.func(s.getText)&&We.func(s.positionAt)&&We.func(s.offsetAt))}t.is=n;function i(a,s){for(var l=a.getText(),o=r(s,function(v,m){var V=v.range.start.line-m.range.start.line;return V===0?v.range.start.character-m.range.start.character:V}),u=l.length,f=o.length-1;f>=0;f--){var y=o[f],p=a.offsetAt(y.range.start),b=a.offsetAt(y.range.end);if(b<=u)l=l.substring(0,p)+y.newText+l.substring(b,l.length);else throw new Error("Overlapping edit");u=p}return l}t.applyEdits=i;function r(a,s){if(a.length<=1)return a;var l=a.length/2|0,o=a.slice(0,l),u=a.slice(l);r(o,s),r(u,s);for(var f=0,y=0,p=0;f<o.length&&y<u.length;){var b=s(o[f],u[y]);b<=0?a[p++]=o[f++]:a[p++]=u[y++]}for(;f<o.length;)a[p++]=o[f++];for(;y<u.length;)a[p++]=u[y++];return a}})(fT||(fT={}));var N3=function(){function t(e,n,i,r){this._uri=e,this._languageId=n,this._version=i,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),i=this.offsetAt(e.end);return this._content.substring(n,i)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,i=!0,r=0;r<n.length;r++){i&&(e.push(r),i=!1);var a=n.charAt(r);i=a==="\r"||a===`
`,a==="\r"&&r+1<n.length&&n.charAt(r+1)===`
`&&r++}i&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),i=0,r=n.length;if(r===0)return Jr.create(0,e);for(;i<r;){var a=Math.floor((i+r)/2);n[a]>e?r=a:i=a+1}var s=i-1;return Jr.create(s,e-n[s])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var i=n[e.line],r=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(i+e.character,r),i)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}(),We;(function(t){var e=Object.prototype.toString;function n(b){return typeof b!="undefined"}t.defined=n;function i(b){return typeof b=="undefined"}t.undefined=i;function r(b){return b===!0||b===!1}t.boolean=r;function a(b){return e.call(b)==="[object String]"}t.string=a;function s(b){return e.call(b)==="[object Number]"}t.number=s;function l(b,v,m){return e.call(b)==="[object Number]"&&v<=b&&b<=m}t.numberRange=l;function o(b){return e.call(b)==="[object Number]"&&-2147483648<=b&&b<=2147483647}t.integer=o;function u(b){return e.call(b)==="[object Number]"&&0<=b&&b<=2147483647}t.uinteger=u;function f(b){return e.call(b)==="[object Function]"}t.func=f;function y(b){return b!==null&&typeof b=="object"}t.objectLiteral=y;function p(b,v){return Array.isArray(b)&&b.every(v)}t.typedArray=p})(We||(We={}));var R3=Object.freeze(Object.defineProperty({__proto__:null,get DocumentUri(){return _0},get URI(){return Op},get integer(){return v0},get uinteger(){return od},get Position(){return Jr},get Range(){return ei},get Location(){return ld},get LocationLink(){return b0},get Color(){return xp},get ColorInformation(){return S0},get ColorPresentation(){return I0},get FoldingRangeKind(){return C0},get FoldingRange(){return w0},get DiagnosticRelatedInformation(){return Lp},get DiagnosticSeverity(){return E0},get DiagnosticTag(){return F0},get CodeDescription(){return k0},get Diagnostic(){return cd},get Command(){return nl},get TextEdit(){return Bs},get ChangeAnnotation(){return Ko},get ChangeAnnotationIdentifier(){return Mi},get AnnotatedTextEdit(){return Zs},get TextDocumentEdit(){return ud},get CreateFile(){return Ec},get RenameFile(){return Fc},get DeleteFile(){return kc},get WorkspaceEdit(){return zp},WorkspaceChange:A3,get TextDocumentIdentifier(){return D0},get VersionedTextDocumentIdentifier(){return P0},get OptionalVersionedTextDocumentIdentifier(){return dd},get TextDocumentItem(){return A0},get MarkupKind(){return Up},get MarkupContent(){return Dc},get CompletionItemKind(){return M0},get InsertTextFormat(){return N0},get CompletionItemTag(){return R0},get InsertReplaceEdit(){return O0},get InsertTextMode(){return x0},get CompletionItemLabelDetails(){return L0},get CompletionItem(){return z0},get CompletionList(){return U0},get MarkedString(){return fd},get Hover(){return V0},get ParameterInformation(){return B0},get SignatureInformation(){return W0},get DocumentHighlightKind(){return $0},get DocumentHighlight(){return j0},get SymbolKind(){return q0},get SymbolTag(){return G0},get SymbolInformation(){return K0},get WorkspaceSymbol(){return H0},get DocumentSymbol(){return Y0},get CodeActionKind(){return Q0},get CodeActionTriggerKind(){return pd},get CodeActionContext(){return J0},get CodeAction(){return X0},get CodeLens(){return Z0},get FormattingOptions(){return eT},get DocumentLink(){return tT},get SelectionRange(){return nT},get SemanticTokenTypes(){return iT},get SemanticTokenModifiers(){return rT},get SemanticTokens(){return sT},get InlineValueText(){return aT},get InlineValueVariableLookup(){return oT},get InlineValueEvaluatableExpression(){return lT},get InlineValueContext(){return cT},get InlayHintKind(){return Vp},get InlayHintLabelPart(){return Bp},get InlayHint(){return uT},get WorkspaceFolder(){return dT},EOL:M3,get TextDocument(){return fT}},Symbol.toStringTag,{value:"Module"})),xh=Id(R3),_n={};Object.defineProperty(_n,"__esModule",{value:!0});_n.ProtocolNotificationType=_n.ProtocolNotificationType0=_n.ProtocolRequestType=_n.ProtocolRequestType0=_n.RegistrationType=void 0;const Pc=go;class O3{constructor(e){this.method=e}}_n.RegistrationType=O3;class x3 extends Pc.RequestType0{constructor(e){super(e)}}_n.ProtocolRequestType0=x3;class L3 extends Pc.RequestType{constructor(e){super(e,Pc.ParameterStructures.byName)}}_n.ProtocolRequestType=L3;class z3 extends Pc.NotificationType0{constructor(e){super(e)}}_n.ProtocolNotificationType0=z3;class U3 extends Pc.NotificationType{constructor(e){super(e,Pc.ParameterStructures.byName)}}_n.ProtocolNotificationType=U3;var vF={},Zn={};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.objectLiteral=Zn.typedArray=Zn.stringArray=Zn.array=Zn.func=Zn.error=Zn.number=Zn.string=Zn.boolean=void 0;function V3(t){return t===!0||t===!1}Zn.boolean=V3;function bF(t){return typeof t=="string"||t instanceof String}Zn.string=bF;function B3(t){return typeof t=="number"||t instanceof Number}Zn.number=B3;function W3(t){return t instanceof Error}Zn.error=W3;function $3(t){return typeof t=="function"}Zn.func=$3;function SF(t){return Array.isArray(t)}Zn.array=SF;function j3(t){return SF(t)&&t.every(e=>bF(e))}Zn.stringArray=j3;function q3(t,e){return Array.isArray(t)&&t.every(e)}Zn.typedArray=q3;function G3(t){return t!==null&&typeof t=="object"}Zn.objectLiteral=G3;var IF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementationRequest=void 0;const e=_n;(function(n){n.method="textDocument/implementation",n.type=new e.ProtocolRequestType(n.method)})(t.ImplementationRequest||(t.ImplementationRequest={}))})(IF);var CF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeDefinitionRequest=void 0;const e=_n;(function(n){n.method="textDocument/typeDefinition",n.type=new e.ProtocolRequestType(n.method)})(t.TypeDefinitionRequest||(t.TypeDefinitionRequest={}))})(CF);var wF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=void 0;const e=_n;(function(n){n.type=new e.ProtocolRequestType0("workspace/workspaceFolders")})(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})),function(n){n.type=new e.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")}(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={}))})(wF);var EF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationRequest=void 0;const e=_n;(function(n){n.type=new e.ProtocolRequestType("workspace/configuration")})(t.ConfigurationRequest||(t.ConfigurationRequest={}))})(EF);var FF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPresentationRequest=t.DocumentColorRequest=void 0;const e=_n;(function(n){n.method="textDocument/documentColor",n.type=new e.ProtocolRequestType(n.method)})(t.DocumentColorRequest||(t.DocumentColorRequest={})),function(n){n.type=new e.ProtocolRequestType("textDocument/colorPresentation")}(t.ColorPresentationRequest||(t.ColorPresentationRequest={}))})(FF);var kF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FoldingRangeRequest=void 0;const e=_n;(function(n){n.method="textDocument/foldingRange",n.type=new e.ProtocolRequestType(n.method)})(t.FoldingRangeRequest||(t.FoldingRangeRequest={}))})(kF);var DF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DeclarationRequest=void 0;const e=_n;(function(n){n.method="textDocument/declaration",n.type=new e.ProtocolRequestType(n.method)})(t.DeclarationRequest||(t.DeclarationRequest={}))})(DF);var PF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRangeRequest=void 0;const e=_n;(function(n){n.method="textDocument/selectionRange",n.type=new e.ProtocolRequestType(n.method)})(t.SelectionRangeRequest||(t.SelectionRangeRequest={}))})(PF);var AF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=void 0;const e=go,n=_n;(function(i){i.type=new e.ProgressType;function r(a){return a===i.type}i.is=r})(t.WorkDoneProgress||(t.WorkDoneProgress={})),function(i){i.method="window/workDoneProgress/create",i.type=new n.ProtocolRequestType(i.method)}(t.WorkDoneProgressCreateRequest||(t.WorkDoneProgressCreateRequest={})),function(i){i.method="window/workDoneProgress/cancel",i.type=new n.ProtocolNotificationType(i.method)}(t.WorkDoneProgressCancelNotification||(t.WorkDoneProgressCancelNotification={}))})(AF);var MF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.CallHierarchyPrepareRequest=void 0;const e=_n;(function(n){n.method="textDocument/prepareCallHierarchy",n.type=new e.ProtocolRequestType(n.method)})(t.CallHierarchyPrepareRequest||(t.CallHierarchyPrepareRequest={})),function(n){n.method="callHierarchy/incomingCalls",n.type=new e.ProtocolRequestType(n.method)}(t.CallHierarchyIncomingCallsRequest||(t.CallHierarchyIncomingCallsRequest={})),function(n){n.method="callHierarchy/outgoingCalls",n.type=new e.ProtocolRequestType(n.method)}(t.CallHierarchyOutgoingCallsRequest||(t.CallHierarchyOutgoingCallsRequest={}))})(MF);var NF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.SemanticTokensRegistrationType=t.TokenFormat=void 0;const e=_n;(function(n){n.Relative="relative"})(t.TokenFormat||(t.TokenFormat={})),function(n){n.method="textDocument/semanticTokens",n.type=new e.RegistrationType(n.method)}(t.SemanticTokensRegistrationType||(t.SemanticTokensRegistrationType={})),function(n){n.method="textDocument/semanticTokens/full",n.type=new e.ProtocolRequestType(n.method)}(t.SemanticTokensRequest||(t.SemanticTokensRequest={})),function(n){n.method="textDocument/semanticTokens/full/delta",n.type=new e.ProtocolRequestType(n.method)}(t.SemanticTokensDeltaRequest||(t.SemanticTokensDeltaRequest={})),function(n){n.method="textDocument/semanticTokens/range",n.type=new e.ProtocolRequestType(n.method)}(t.SemanticTokensRangeRequest||(t.SemanticTokensRangeRequest={})),function(n){n.method="workspace/semanticTokens/refresh",n.type=new e.ProtocolRequestType0(n.method)}(t.SemanticTokensRefreshRequest||(t.SemanticTokensRefreshRequest={}))})(NF);var RF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ShowDocumentRequest=void 0;const e=_n;(function(n){n.method="window/showDocument",n.type=new e.ProtocolRequestType(n.method)})(t.ShowDocumentRequest||(t.ShowDocumentRequest={}))})(RF);var OF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedEditingRangeRequest=void 0;const e=_n;(function(n){n.method="textDocument/linkedEditingRange",n.type=new e.ProtocolRequestType(n.method)})(t.LinkedEditingRangeRequest||(t.LinkedEditingRangeRequest={}))})(OF);var xF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.DidRenameFilesNotification=t.WillRenameFilesRequest=t.DidCreateFilesNotification=t.WillCreateFilesRequest=t.FileOperationPatternKind=void 0;const e=_n;(function(n){n.file="file",n.folder="folder"})(t.FileOperationPatternKind||(t.FileOperationPatternKind={})),function(n){n.method="workspace/willCreateFiles",n.type=new e.ProtocolRequestType(n.method)}(t.WillCreateFilesRequest||(t.WillCreateFilesRequest={})),function(n){n.method="workspace/didCreateFiles",n.type=new e.ProtocolNotificationType(n.method)}(t.DidCreateFilesNotification||(t.DidCreateFilesNotification={})),function(n){n.method="workspace/willRenameFiles",n.type=new e.ProtocolRequestType(n.method)}(t.WillRenameFilesRequest||(t.WillRenameFilesRequest={})),function(n){n.method="workspace/didRenameFiles",n.type=new e.ProtocolNotificationType(n.method)}(t.DidRenameFilesNotification||(t.DidRenameFilesNotification={})),function(n){n.method="workspace/didDeleteFiles",n.type=new e.ProtocolNotificationType(n.method)}(t.DidDeleteFilesNotification||(t.DidDeleteFilesNotification={})),function(n){n.method="workspace/willDeleteFiles",n.type=new e.ProtocolRequestType(n.method)}(t.WillDeleteFilesRequest||(t.WillDeleteFilesRequest={}))})(xF);var LF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=void 0;const e=_n;(function(n){n.document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="globalThis"})(t.UniquenessLevel||(t.UniquenessLevel={})),function(n){n.$import="import",n.$export="export",n.local="local"}(t.MonikerKind||(t.MonikerKind={})),function(n){n.method="textDocument/moniker",n.type=new e.ProtocolRequestType(n.method)}(t.MonikerRequest||(t.MonikerRequest={}))})(LF);var zF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHierarchySubtypesRequest=t.TypeHierarchySupertypesRequest=t.TypeHierarchyPrepareRequest=void 0;const e=_n;(function(n){n.method="textDocument/prepareTypeHierarchy",n.type=new e.ProtocolRequestType(n.method)})(t.TypeHierarchyPrepareRequest||(t.TypeHierarchyPrepareRequest={})),function(n){n.method="typeHierarchy/supertypes",n.type=new e.ProtocolRequestType(n.method)}(t.TypeHierarchySupertypesRequest||(t.TypeHierarchySupertypesRequest={})),function(n){n.method="typeHierarchy/subtypes",n.type=new e.ProtocolRequestType(n.method)}(t.TypeHierarchySubtypesRequest||(t.TypeHierarchySubtypesRequest={}))})(zF);var UF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineValueRefreshRequest=t.InlineValueRequest=void 0;const e=_n;(function(n){n.method="textDocument/inlineValue",n.type=new e.ProtocolRequestType(n.method)})(t.InlineValueRequest||(t.InlineValueRequest={})),function(n){n.method="workspace/inlineValue/refresh",n.type=new e.ProtocolRequestType0(n.method)}(t.InlineValueRefreshRequest||(t.InlineValueRefreshRequest={}))})(UF);var VF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=void 0;const e=_n;(function(n){n.method="textDocument/inlayHint",n.type=new e.ProtocolRequestType(n.method)})(t.InlayHintRequest||(t.InlayHintRequest={})),function(n){n.method="inlayHint/resolve",n.type=new e.ProtocolRequestType(n.method)}(t.InlayHintResolveRequest||(t.InlayHintResolveRequest={})),function(n){n.method="workspace/inlayHint/refresh",n.type=new e.ProtocolRequestType0(n.method)}(t.InlayHintRefreshRequest||(t.InlayHintRefreshRequest={}))})(VF);var BF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=void 0;const e=go,n=Zn,i=_n;(function(r){function a(s){const l=s;return l&&n.boolean(l.retriggerRequest)}r.is=a})(t.DiagnosticServerCancellationData||(t.DiagnosticServerCancellationData={})),function(r){r.Full="full",r.Unchanged="unchanged"}(t.DocumentDiagnosticReportKind||(t.DocumentDiagnosticReportKind={})),function(r){r.method="textDocument/diagnostic",r.type=new i.ProtocolRequestType(r.method),r.partialResult=new e.ProgressType}(t.DocumentDiagnosticRequest||(t.DocumentDiagnosticRequest={})),function(r){r.method="workspace/diagnostic",r.type=new i.ProtocolRequestType(r.method),r.partialResult=new e.ProgressType}(t.WorkspaceDiagnosticRequest||(t.WorkspaceDiagnosticRequest={})),function(r){r.method="workspace/diagnostic/refresh",r.type=new i.ProtocolRequestType0(r.method)}(t.DiagnosticRefreshRequest||(t.DiagnosticRefreshRequest={}))})(BF);var WF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=void 0;const e=xh,n=Zn,i=_n;var r;(function(l){l.Markup=1,l.Code=2;function o(u){return u===1||u===2}l.is=o})(r=t.NotebookCellKind||(t.NotebookCellKind={}));var a;(function(l){function o(y,p){const b={executionOrder:y};return(p===!0||p===!1)&&(b.success=p),b}l.create=o;function u(y){const p=y;return n.objectLiteral(p)&&e.uinteger.is(p.executionOrder)&&(p.success===void 0||n.boolean(p.success))}l.is=u;function f(y,p){return y===p?!0:y==null||p===null||p===void 0?!1:y.executionOrder===p.executionOrder&&y.success===p.success}l.equals=f})(a=t.ExecutionSummary||(t.ExecutionSummary={}));var s;(function(l){function o(p,b){return{kind:p,document:b}}l.create=o;function u(p){const b=p;return n.objectLiteral(b)&&r.is(b.kind)&&e.DocumentUri.is(b.document)&&(b.metadata===void 0||n.objectLiteral(b.metadata))}l.is=u;function f(p,b){const v=new Set;return p.document!==b.document&&v.add("document"),p.kind!==b.kind&&v.add("kind"),p.executionSummary!==b.executionSummary&&v.add("executionSummary"),(p.metadata!==void 0||b.metadata!==void 0)&&!y(p.metadata,b.metadata)&&v.add("metadata"),(p.executionSummary!==void 0||b.executionSummary!==void 0)&&!a.equals(p.executionSummary,b.executionSummary)&&v.add("executionSummary"),v}l.diff=f;function y(p,b){if(p===b)return!0;if(p==null||b===null||b===void 0||typeof p!=typeof b||typeof p!="object")return!1;const v=Array.isArray(p),m=Array.isArray(b);if(v!==m)return!1;if(v&&m){if(p.length!==b.length)return!1;for(let V=0;V<p.length;V++)if(!y(p[V],b[V]))return!1}if(n.objectLiteral(p)&&n.objectLiteral(b)){const V=Object.keys(p),F=Object.keys(b);if(V.length!==F.length||(V.sort(),F.sort(),!y(V,F)))return!1;for(let P=0;P<V.length;P++){const G=V[P];if(!y(p[G],b[G]))return!1}}return!0}})(s=t.NotebookCell||(t.NotebookCell={})),function(l){function o(f,y,p,b){return{uri:f,notebookType:y,version:p,cells:b}}l.create=o;function u(f){const y=f;return n.objectLiteral(y)&&n.string(y.uri)&&e.integer.is(y.version)&&n.typedArray(y.cells,s.is)}l.is=u}(t.NotebookDocument||(t.NotebookDocument={})),function(l){l.method="notebookDocument/sync",l.type=new i.RegistrationType(l.method)}(t.NotebookDocumentSyncRegistrationType||(t.NotebookDocumentSyncRegistrationType={})),function(l){l.method="notebookDocument/didOpen",l.type=new i.ProtocolNotificationType(l.method)}(t.DidOpenNotebookDocumentNotification||(t.DidOpenNotebookDocumentNotification={})),function(l){function o(f){const y=f;return n.objectLiteral(y)&&e.uinteger.is(y.start)&&e.uinteger.is(y.deleteCount)&&(y.cells===void 0||n.typedArray(y.cells,s.is))}l.is=o;function u(f,y,p){const b={start:f,deleteCount:y};return p!==void 0&&(b.cells=p),b}l.create=u}(t.NotebookCellArrayChange||(t.NotebookCellArrayChange={})),function(l){l.method="notebookDocument/didChange",l.type=new i.ProtocolNotificationType(l.method)}(t.DidChangeNotebookDocumentNotification||(t.DidChangeNotebookDocumentNotification={})),function(l){l.method="notebookDocument/didSave",l.type=new i.ProtocolNotificationType(l.method)}(t.DidSaveNotebookDocumentNotification||(t.DidSaveNotebookDocumentNotification={})),function(l){l.method="notebookDocument/didClose",l.type=new i.ProtocolNotificationType(l.method)}(t.DidCloseNotebookDocumentNotification||(t.DidCloseNotebookDocumentNotification={}))})(WF);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceSymbolRequest=t.CodeActionResolveRequest=t.CodeActionRequest=t.DocumentSymbolRequest=t.DocumentHighlightRequest=t.ReferencesRequest=t.DefinitionRequest=t.SignatureHelpRequest=t.SignatureHelpTriggerKind=t.HoverRequest=t.CompletionResolveRequest=t.CompletionRequest=t.CompletionTriggerKind=t.PublishDiagnosticsNotification=t.WatchKind=t.RelativePattern=t.FileChangeType=t.DidChangeWatchedFilesNotification=t.WillSaveTextDocumentWaitUntilRequest=t.WillSaveTextDocumentNotification=t.TextDocumentSaveReason=t.DidSaveTextDocumentNotification=t.DidCloseTextDocumentNotification=t.DidChangeTextDocumentNotification=t.TextDocumentContentChangeEvent=t.DidOpenTextDocumentNotification=t.TextDocumentSyncKind=t.TelemetryEventNotification=t.LogMessageNotification=t.ShowMessageRequest=t.ShowMessageNotification=t.MessageType=t.DidChangeConfigurationNotification=t.ExitNotification=t.ShutdownRequest=t.InitializedNotification=t.InitializeErrorCodes=t.InitializeRequest=t.WorkDoneProgressOptions=t.TextDocumentRegistrationOptions=t.StaticRegistrationOptions=t.PositionEncodingKind=t.FailureHandlingKind=t.ResourceOperationKind=t.UnregistrationRequest=t.RegistrationRequest=t.DocumentSelector=t.NotebookCellTextDocumentFilter=t.NotebookDocumentFilter=t.TextDocumentFilter=void 0,t.TypeHierarchySubtypesRequest=t.TypeHierarchyPrepareRequest=t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.WillRenameFilesRequest=t.DidRenameFilesNotification=t.WillCreateFilesRequest=t.DidCreateFilesNotification=t.FileOperationPatternKind=t.LinkedEditingRangeRequest=t.ShowDocumentRequest=t.SemanticTokensRegistrationType=t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.TokenFormat=t.CallHierarchyPrepareRequest=t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=t.SelectionRangeRequest=t.DeclarationRequest=t.FoldingRangeRequest=t.ColorPresentationRequest=t.DocumentColorRequest=t.ConfigurationRequest=t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=t.TypeDefinitionRequest=t.ImplementationRequest=t.ApplyWorkspaceEditRequest=t.ExecuteCommandRequest=t.PrepareRenameRequest=t.RenameRequest=t.PrepareSupportDefaultBehavior=t.DocumentOnTypeFormattingRequest=t.DocumentRangeFormattingRequest=t.DocumentFormattingRequest=t.DocumentLinkResolveRequest=t.DocumentLinkRequest=t.CodeLensRefreshRequest=t.CodeLensResolveRequest=t.CodeLensRequest=t.WorkspaceSymbolResolveRequest=void 0,t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=t.InlineValueRefreshRequest=t.InlineValueRequest=t.TypeHierarchySupertypesRequest=void 0;const e=_n,n=xh,i=Zn,r=IF;Object.defineProperty(t,"ImplementationRequest",{enumerable:!0,get:function(){return r.ImplementationRequest}});const a=CF;Object.defineProperty(t,"TypeDefinitionRequest",{enumerable:!0,get:function(){return a.TypeDefinitionRequest}});const s=wF;Object.defineProperty(t,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return s.WorkspaceFoldersRequest}}),Object.defineProperty(t,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return s.DidChangeWorkspaceFoldersNotification}});const l=EF;Object.defineProperty(t,"ConfigurationRequest",{enumerable:!0,get:function(){return l.ConfigurationRequest}});const o=FF;Object.defineProperty(t,"DocumentColorRequest",{enumerable:!0,get:function(){return o.DocumentColorRequest}}),Object.defineProperty(t,"ColorPresentationRequest",{enumerable:!0,get:function(){return o.ColorPresentationRequest}});const u=kF;Object.defineProperty(t,"FoldingRangeRequest",{enumerable:!0,get:function(){return u.FoldingRangeRequest}});const f=DF;Object.defineProperty(t,"DeclarationRequest",{enumerable:!0,get:function(){return f.DeclarationRequest}});const y=PF;Object.defineProperty(t,"SelectionRangeRequest",{enumerable:!0,get:function(){return y.SelectionRangeRequest}});const p=AF;Object.defineProperty(t,"WorkDoneProgress",{enumerable:!0,get:function(){return p.WorkDoneProgress}}),Object.defineProperty(t,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return p.WorkDoneProgressCreateRequest}}),Object.defineProperty(t,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return p.WorkDoneProgressCancelNotification}});const b=MF;Object.defineProperty(t,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return b.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(t,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return b.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(t,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return b.CallHierarchyPrepareRequest}});const v=NF;Object.defineProperty(t,"TokenFormat",{enumerable:!0,get:function(){return v.TokenFormat}}),Object.defineProperty(t,"SemanticTokensRequest",{enumerable:!0,get:function(){return v.SemanticTokensRequest}}),Object.defineProperty(t,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return v.SemanticTokensDeltaRequest}}),Object.defineProperty(t,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return v.SemanticTokensRangeRequest}}),Object.defineProperty(t,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return v.SemanticTokensRefreshRequest}}),Object.defineProperty(t,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return v.SemanticTokensRegistrationType}});const m=RF;Object.defineProperty(t,"ShowDocumentRequest",{enumerable:!0,get:function(){return m.ShowDocumentRequest}});const V=OF;Object.defineProperty(t,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return V.LinkedEditingRangeRequest}});const F=xF;Object.defineProperty(t,"FileOperationPatternKind",{enumerable:!0,get:function(){return F.FileOperationPatternKind}}),Object.defineProperty(t,"DidCreateFilesNotification",{enumerable:!0,get:function(){return F.DidCreateFilesNotification}}),Object.defineProperty(t,"WillCreateFilesRequest",{enumerable:!0,get:function(){return F.WillCreateFilesRequest}}),Object.defineProperty(t,"DidRenameFilesNotification",{enumerable:!0,get:function(){return F.DidRenameFilesNotification}}),Object.defineProperty(t,"WillRenameFilesRequest",{enumerable:!0,get:function(){return F.WillRenameFilesRequest}}),Object.defineProperty(t,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return F.DidDeleteFilesNotification}}),Object.defineProperty(t,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return F.WillDeleteFilesRequest}});const P=LF;Object.defineProperty(t,"UniquenessLevel",{enumerable:!0,get:function(){return P.UniquenessLevel}}),Object.defineProperty(t,"MonikerKind",{enumerable:!0,get:function(){return P.MonikerKind}}),Object.defineProperty(t,"MonikerRequest",{enumerable:!0,get:function(){return P.MonikerRequest}});const G=zF;Object.defineProperty(t,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return G.TypeHierarchyPrepareRequest}}),Object.defineProperty(t,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return G.TypeHierarchySubtypesRequest}}),Object.defineProperty(t,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return G.TypeHierarchySupertypesRequest}});const te=UF;Object.defineProperty(t,"InlineValueRequest",{enumerable:!0,get:function(){return te.InlineValueRequest}}),Object.defineProperty(t,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return te.InlineValueRefreshRequest}});const q=VF;Object.defineProperty(t,"InlayHintRequest",{enumerable:!0,get:function(){return q.InlayHintRequest}}),Object.defineProperty(t,"InlayHintResolveRequest",{enumerable:!0,get:function(){return q.InlayHintResolveRequest}}),Object.defineProperty(t,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return q.InlayHintRefreshRequest}});const U=BF;Object.defineProperty(t,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return U.DiagnosticServerCancellationData}}),Object.defineProperty(t,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return U.DocumentDiagnosticReportKind}}),Object.defineProperty(t,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return U.DocumentDiagnosticRequest}}),Object.defineProperty(t,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return U.WorkspaceDiagnosticRequest}}),Object.defineProperty(t,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return U.DiagnosticRefreshRequest}});const D=WF;Object.defineProperty(t,"NotebookCellKind",{enumerable:!0,get:function(){return D.NotebookCellKind}}),Object.defineProperty(t,"ExecutionSummary",{enumerable:!0,get:function(){return D.ExecutionSummary}}),Object.defineProperty(t,"NotebookCell",{enumerable:!0,get:function(){return D.NotebookCell}}),Object.defineProperty(t,"NotebookDocument",{enumerable:!0,get:function(){return D.NotebookDocument}}),Object.defineProperty(t,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return D.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(t,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return D.DidOpenNotebookDocumentNotification}}),Object.defineProperty(t,"NotebookCellArrayChange",{enumerable:!0,get:function(){return D.NotebookCellArrayChange}}),Object.defineProperty(t,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return D.DidChangeNotebookDocumentNotification}}),Object.defineProperty(t,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return D.DidSaveNotebookDocumentNotification}}),Object.defineProperty(t,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return D.DidCloseNotebookDocumentNotification}});var M;(function(L){function ce(ue){const W=ue;return i.string(W.language)||i.string(W.scheme)||i.string(W.pattern)}L.is=ce})(M=t.TextDocumentFilter||(t.TextDocumentFilter={}));var T;(function(L){function ce(ue){const W=ue;return i.objectLiteral(W)&&(i.string(W.notebookType)||i.string(W.scheme)||i.string(W.pattern))}L.is=ce})(T=t.NotebookDocumentFilter||(t.NotebookDocumentFilter={}));var N;(function(L){function ce(ue){const W=ue;return i.objectLiteral(W)&&(i.string(W.notebook)||T.is(W.notebook))&&(W.language===void 0||i.string(W.language))}L.is=ce})(N=t.NotebookCellTextDocumentFilter||(t.NotebookCellTextDocumentFilter={}));var J;(function(L){function ce(ue){if(!Array.isArray(ue))return!1;for(let W of ue)if(!i.string(W)&&!M.is(W)&&!N.is(W))return!1;return!0}L.is=ce})(J=t.DocumentSelector||(t.DocumentSelector={})),function(L){L.type=new e.ProtocolRequestType("client/registerCapability")}(t.RegistrationRequest||(t.RegistrationRequest={})),function(L){L.type=new e.ProtocolRequestType("client/unregisterCapability")}(t.UnregistrationRequest||(t.UnregistrationRequest={})),function(L){L.Create="create",L.Rename="rename",L.Delete="delete"}(t.ResourceOperationKind||(t.ResourceOperationKind={})),function(L){L.Abort="abort",L.Transactional="transactional",L.TextOnlyTransactional="textOnlyTransactional",L.Undo="undo"}(t.FailureHandlingKind||(t.FailureHandlingKind={})),function(L){L.UTF8="utf-8",L.UTF16="utf-16",L.UTF32="utf-32"}(t.PositionEncodingKind||(t.PositionEncodingKind={})),function(L){function ce(ue){const W=ue;return W&&i.string(W.id)&&W.id.length>0}L.hasId=ce}(t.StaticRegistrationOptions||(t.StaticRegistrationOptions={})),function(L){function ce(ue){const W=ue;return W&&(W.documentSelector===null||J.is(W.documentSelector))}L.is=ce}(t.TextDocumentRegistrationOptions||(t.TextDocumentRegistrationOptions={})),function(L){function ce(W){const Y=W;return i.objectLiteral(Y)&&(Y.workDoneProgress===void 0||i.boolean(Y.workDoneProgress))}L.is=ce;function ue(W){const Y=W;return Y&&i.boolean(Y.workDoneProgress)}L.hasWorkDoneProgress=ue}(t.WorkDoneProgressOptions||(t.WorkDoneProgressOptions={})),function(L){L.type=new e.ProtocolRequestType("initialize")}(t.InitializeRequest||(t.InitializeRequest={})),function(L){L.unknownProtocolVersion=1}(t.InitializeErrorCodes||(t.InitializeErrorCodes={})),function(L){L.type=new e.ProtocolNotificationType("initialized")}(t.InitializedNotification||(t.InitializedNotification={})),function(L){L.type=new e.ProtocolRequestType0("shutdown")}(t.ShutdownRequest||(t.ShutdownRequest={})),function(L){L.type=new e.ProtocolNotificationType0("exit")}(t.ExitNotification||(t.ExitNotification={})),function(L){L.type=new e.ProtocolNotificationType("workspace/didChangeConfiguration")}(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})),function(L){L.Error=1,L.Warning=2,L.Info=3,L.Log=4}(t.MessageType||(t.MessageType={})),function(L){L.type=new e.ProtocolNotificationType("window/showMessage")}(t.ShowMessageNotification||(t.ShowMessageNotification={})),function(L){L.type=new e.ProtocolRequestType("window/showMessageRequest")}(t.ShowMessageRequest||(t.ShowMessageRequest={})),function(L){L.type=new e.ProtocolNotificationType("window/logMessage")}(t.LogMessageNotification||(t.LogMessageNotification={})),function(L){L.type=new e.ProtocolNotificationType("telemetry/event")}(t.TelemetryEventNotification||(t.TelemetryEventNotification={})),function(L){L.None=0,L.Full=1,L.Incremental=2}(t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})),function(L){L.method="textDocument/didOpen",L.type=new e.ProtocolNotificationType(L.method)}(t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})),function(L){function ce(W){let Y=W;return Y!=null&&typeof Y.text=="string"&&Y.range!==void 0&&(Y.rangeLength===void 0||typeof Y.rangeLength=="number")}L.isIncremental=ce;function ue(W){let Y=W;return Y!=null&&typeof Y.text=="string"&&Y.range===void 0&&Y.rangeLength===void 0}L.isFull=ue}(t.TextDocumentContentChangeEvent||(t.TextDocumentContentChangeEvent={})),function(L){L.method="textDocument/didChange",L.type=new e.ProtocolNotificationType(L.method)}(t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})),function(L){L.method="textDocument/didClose",L.type=new e.ProtocolNotificationType(L.method)}(t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})),function(L){L.method="textDocument/didSave",L.type=new e.ProtocolNotificationType(L.method)}(t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})),function(L){L.Manual=1,L.AfterDelay=2,L.FocusOut=3}(t.TextDocumentSaveReason||(t.TextDocumentSaveReason={})),function(L){L.method="textDocument/willSave",L.type=new e.ProtocolNotificationType(L.method)}(t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})),function(L){L.method="textDocument/willSaveWaitUntil",L.type=new e.ProtocolRequestType(L.method)}(t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})),function(L){L.type=new e.ProtocolNotificationType("workspace/didChangeWatchedFiles")}(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})),function(L){L.Created=1,L.Changed=2,L.Deleted=3}(t.FileChangeType||(t.FileChangeType={})),function(L){function ce(ue){const W=ue;return i.objectLiteral(W)&&(n.URI.is(W.baseUri)||n.WorkspaceFolder.is(W.baseUri))&&i.string(W.pattern)}L.is=ce}(t.RelativePattern||(t.RelativePattern={})),function(L){L.Create=1,L.Change=2,L.Delete=4}(t.WatchKind||(t.WatchKind={})),function(L){L.type=new e.ProtocolNotificationType("textDocument/publishDiagnostics")}(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})),function(L){L.Invoked=1,L.TriggerCharacter=2,L.TriggerForIncompleteCompletions=3}(t.CompletionTriggerKind||(t.CompletionTriggerKind={})),function(L){L.method="textDocument/completion",L.type=new e.ProtocolRequestType(L.method)}(t.CompletionRequest||(t.CompletionRequest={})),function(L){L.method="completionItem/resolve",L.type=new e.ProtocolRequestType(L.method)}(t.CompletionResolveRequest||(t.CompletionResolveRequest={})),function(L){L.method="textDocument/hover",L.type=new e.ProtocolRequestType(L.method)}(t.HoverRequest||(t.HoverRequest={})),function(L){L.Invoked=1,L.TriggerCharacter=2,L.ContentChange=3}(t.SignatureHelpTriggerKind||(t.SignatureHelpTriggerKind={})),function(L){L.method="textDocument/signatureHelp",L.type=new e.ProtocolRequestType(L.method)}(t.SignatureHelpRequest||(t.SignatureHelpRequest={})),function(L){L.method="textDocument/definition",L.type=new e.ProtocolRequestType(L.method)}(t.DefinitionRequest||(t.DefinitionRequest={})),function(L){L.method="textDocument/references",L.type=new e.ProtocolRequestType(L.method)}(t.ReferencesRequest||(t.ReferencesRequest={})),function(L){L.method="textDocument/documentHighlight",L.type=new e.ProtocolRequestType(L.method)}(t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})),function(L){L.method="textDocument/documentSymbol",L.type=new e.ProtocolRequestType(L.method)}(t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})),function(L){L.method="textDocument/codeAction",L.type=new e.ProtocolRequestType(L.method)}(t.CodeActionRequest||(t.CodeActionRequest={})),function(L){L.method="codeAction/resolve",L.type=new e.ProtocolRequestType(L.method)}(t.CodeActionResolveRequest||(t.CodeActionResolveRequest={})),function(L){L.method="workspace/symbol",L.type=new e.ProtocolRequestType(L.method)}(t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})),function(L){L.method="workspaceSymbol/resolve",L.type=new e.ProtocolRequestType(L.method)}(t.WorkspaceSymbolResolveRequest||(t.WorkspaceSymbolResolveRequest={})),function(L){L.method="textDocument/codeLens",L.type=new e.ProtocolRequestType(L.method)}(t.CodeLensRequest||(t.CodeLensRequest={})),function(L){L.method="codeLens/resolve",L.type=new e.ProtocolRequestType(L.method)}(t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})),function(L){L.method="workspace/codeLens/refresh",L.type=new e.ProtocolRequestType0(L.method)}(t.CodeLensRefreshRequest||(t.CodeLensRefreshRequest={})),function(L){L.method="textDocument/documentLink",L.type=new e.ProtocolRequestType(L.method)}(t.DocumentLinkRequest||(t.DocumentLinkRequest={})),function(L){L.method="documentLink/resolve",L.type=new e.ProtocolRequestType(L.method)}(t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})),function(L){L.method="textDocument/formatting",L.type=new e.ProtocolRequestType(L.method)}(t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})),function(L){L.method="textDocument/rangeFormatting",L.type=new e.ProtocolRequestType(L.method)}(t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})),function(L){L.method="textDocument/onTypeFormatting",L.type=new e.ProtocolRequestType(L.method)}(t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})),function(L){L.Identifier=1}(t.PrepareSupportDefaultBehavior||(t.PrepareSupportDefaultBehavior={})),function(L){L.method="textDocument/rename",L.type=new e.ProtocolRequestType(L.method)}(t.RenameRequest||(t.RenameRequest={})),function(L){L.method="textDocument/prepareRename",L.type=new e.ProtocolRequestType(L.method)}(t.PrepareRenameRequest||(t.PrepareRenameRequest={})),function(L){L.type=new e.ProtocolRequestType("workspace/executeCommand")}(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})),function(L){L.type=new e.ProtocolRequestType("workspace/applyEdit")}(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={}))})(vF);var Lh={};Object.defineProperty(Lh,"__esModule",{value:!0});Lh.createProtocolConnection=void 0;const lS=go;function K3(t,e,n,i){return lS.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),(0,lS.createMessageConnection)(t,e,n,i)}Lh.createProtocolConnection=K3;(function(t){var e=Te&&Te.__createBinding||(Object.create?function(r,a,s,l){l===void 0&&(l=s);var o=Object.getOwnPropertyDescriptor(a,s);(!o||("get"in o?!a.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(r,l,o)}:function(r,a,s,l){l===void 0&&(l=s),r[l]=a[s]}),n=Te&&Te.__exportStar||function(r,a){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),t.LSPErrorCodes=t.createProtocolConnection=void 0,n(go,t),n(xh,t),n(_n,t),n(vF,t);var i=Lh;Object.defineProperty(t,"createProtocolConnection",{enumerable:!0,get:function(){return i.createProtocolConnection}}),function(r){r.lspReservedErrorRangeStart=-32899,r.RequestFailed=-32803,r.ServerCancelled=-32802,r.ContentModified=-32801,r.RequestCancelled=-32800,r.lspReservedErrorRangeEnd=-32800}(t.LSPErrorCodes||(t.LSPErrorCodes={}))})(_F);(function(t){var e=Te&&Te.__createBinding||(Object.create?function(a,s,l,o){o===void 0&&(o=l);var u=Object.getOwnPropertyDescriptor(s,l);(!u||("get"in u?!s.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(a,o,u)}:function(a,s,l,o){o===void 0&&(o=l),a[o]=s[l]}),n=Te&&Te.__exportStar||function(a,s){for(var l in a)l!=="default"&&!Object.prototype.hasOwnProperty.call(s,l)&&e(s,a,l)};Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const i=aS;n(aS,t),n(_F,t);function r(a,s,l,o){return(0,i.createMessageConnection)(a,s,l,o)}t.createProtocolConnection=r})(gi);Object.defineProperty(aa,"__esModule",{value:!0});aa.SemanticTokensBuilder=aa.SemanticTokensDiff=aa.SemanticTokensFeature=void 0;const If=gi,H3=t=>class extends t{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(If.SemanticTokensRefreshRequest.type),on:e=>{const n=If.SemanticTokensRequest.type;return this.connection.onRequest(n,(i,r)=>e(i,r,this.attachWorkDoneProgress(i),this.attachPartialResultProgress(n,i)))},onDelta:e=>{const n=If.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(i,r)=>e(i,r,this.attachWorkDoneProgress(i),this.attachPartialResultProgress(n,i)))},onRange:e=>{const n=If.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(i,r)=>e(i,r,this.attachWorkDoneProgress(i),this.attachPartialResultProgress(n,i)))}}}};aa.SemanticTokensFeature=H3;class $F{constructor(e,n){this.originalSequence=e,this.modifiedSequence=n}computeDiff(){const e=this.originalSequence.length,n=this.modifiedSequence.length;let i=0;for(;i<n&&i<e&&this.originalSequence[i]===this.modifiedSequence[i];)i++;if(i<n&&i<e){let r=e-1,a=n-1;for(;r>=i&&a>=i&&this.originalSequence[r]===this.modifiedSequence[a];)r--,a--;(r<i||a<i)&&(r++,a++);const s=r-i+1,l=this.modifiedSequence.slice(i,a+1);return l.length===1&&l[0]===this.originalSequence[r]?[{start:i,deleteCount:s-1}]:[{start:i,deleteCount:s,data:l}]}else return i<n?[{start:i,deleteCount:0,data:this.modifiedSequence.slice(i)}]:i<e?[{start:i,deleteCount:e-i}]:[]}}aa.SemanticTokensDiff=$F;class Y3{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,n,i,r,a){let s=e,l=n;this._dataLen>0&&(s-=this._prevLine,s===0&&(l-=this._prevChar)),this._data[this._dataLen++]=s,this._data[this._dataLen++]=l,this._data[this._dataLen++]=i,this._data[this._dataLen++]=r,this._data[this._dataLen++]=a,this._prevLine=e,this._prevChar=n}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new $F(this._prevData,this._data).computeDiff()}:this.build()}}aa.SemanticTokensBuilder=Y3;var Md={};Object.defineProperty(Md,"__esModule",{value:!0});Md.TextDocuments=void 0;const So=gi;class Q3{constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new So.Emitter,this._onDidOpen=new So.Emitter,this._onDidClose=new So.Emitter,this._onDidSave=new So.Emitter,this._onWillSave=new So.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=So.TextDocumentSyncKind.Incremental;const n=[];return n.push(e.onDidOpenTextDocument(i=>{const r=i.textDocument,a=this._configuration.create(r.uri,r.languageId,r.version,r.text);this._syncedDocuments.set(r.uri,a);const s=Object.freeze({document:a});this._onDidOpen.fire(s),this._onDidChangeContent.fire(s)})),n.push(e.onDidChangeTextDocument(i=>{const r=i.textDocument,a=i.contentChanges;if(a.length===0)return;const{version:s}=r;if(s==null)throw new Error(`Received document change event for ${r.uri} without valid version identifier`);let l=this._syncedDocuments.get(r.uri);l!==void 0&&(l=this._configuration.update(l,a,s),this._syncedDocuments.set(r.uri,l),this._onDidChangeContent.fire(Object.freeze({document:l})))})),n.push(e.onDidCloseTextDocument(i=>{let r=this._syncedDocuments.get(i.textDocument.uri);r!==void 0&&(this._syncedDocuments.delete(i.textDocument.uri),this._onDidClose.fire(Object.freeze({document:r})))})),n.push(e.onWillSaveTextDocument(i=>{let r=this._syncedDocuments.get(i.textDocument.uri);r!==void 0&&this._onWillSave.fire(Object.freeze({document:r,reason:i.reason}))})),n.push(e.onWillSaveTextDocumentWaitUntil((i,r)=>{let a=this._syncedDocuments.get(i.textDocument.uri);return a!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:a,reason:i.reason}),r):[]})),n.push(e.onDidSaveTextDocument(i=>{let r=this._syncedDocuments.get(i.textDocument.uri);r!==void 0&&this._onDidSave.fire(Object.freeze({document:r}))})),So.Disposable.create(()=>{n.forEach(i=>i.dispose())})}}Md.TextDocuments=Q3;var il={};Object.defineProperty(il,"__esModule",{value:!0});il.NotebookDocuments=il.NotebookSyncFeature=void 0;const Xr=gi,cS=Md,J3=t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:e=>this.connection.onNotification(Xr.DidOpenNotebookDocumentNotification.type,n=>{e(n)}),onDidChangeNotebookDocument:e=>this.connection.onNotification(Xr.DidChangeNotebookDocumentNotification.type,n=>{e(n)}),onDidSaveNotebookDocument:e=>this.connection.onNotification(Xr.DidSaveNotebookDocumentNotification.type,n=>{e(n)}),onDidCloseNotebookDocument:e=>this.connection.onNotification(Xr.DidCloseNotebookDocumentNotification.type,n=>{e(n)})}}};il.NotebookSyncFeature=J3;class fc{onDidOpenTextDocument(e){return this.openHandler=e,Xr.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,Xr.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,Xr.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return fc.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return fc.NULL_DISPOSE}onDidSaveTextDocument(){return fc.NULL_DISPOSE}}fc.NULL_DISPOSE=Object.freeze({dispose:()=>{}});class X3{constructor(e){e instanceof cS.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new cS.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Xr.Emitter,this._onDidChange=new Xr.Emitter,this._onDidSave=new Xr.Emitter,this._onDidClose=new Xr.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){const n=this.notebookCellMap.get(e);return n&&n[0]}findNotebookDocumentForCell(e){const n=typeof e=="string"?e:e.document,i=this.notebookCellMap.get(n);return i&&i[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){const n=new fc,i=[];return i.push(this.cellTextDocuments.listen(n)),i.push(e.notebooks.synchronization.onDidOpenNotebookDocument(r=>{this.notebookDocuments.set(r.notebookDocument.uri,r.notebookDocument);for(const a of r.cellTextDocuments)n.openTextDocument({textDocument:a});this.updateCellMap(r.notebookDocument),this._onDidOpen.fire(r.notebookDocument)})),i.push(e.notebooks.synchronization.onDidChangeNotebookDocument(r=>{const a=this.notebookDocuments.get(r.notebookDocument.uri);if(a===void 0)return;a.version=r.notebookDocument.version;const s=a.metadata;let l=!1;const o=r.change;o.metadata!==void 0&&(l=!0,a.metadata=o.metadata);const u=[],f=[],y=[],p=[];if(o.cells!==void 0){const F=o.cells;if(F.structure!==void 0){const P=F.structure.array;if(a.cells.splice(P.start,P.deleteCount,...P.cells!==void 0?P.cells:[]),F.structure.didOpen!==void 0)for(const G of F.structure.didOpen)n.openTextDocument({textDocument:G}),u.push(G.uri);if(F.structure.didClose)for(const G of F.structure.didClose)n.closeTextDocument({textDocument:G}),f.push(G.uri)}if(F.data!==void 0){const P=new Map(F.data.map(G=>[G.document,G]));for(let G=0;G<=a.cells.length;G++){const te=P.get(a.cells[G].document);if(te!==void 0){const q=a.cells.splice(G,1,te);if(y.push({old:q[0],new:te}),P.delete(te.document),P.size===0)break}}}if(F.textContent!==void 0)for(const P of F.textContent)n.changeTextDocument({textDocument:P.document,contentChanges:P.changes}),p.push(P.document.uri)}this.updateCellMap(a);const b={notebookDocument:a};l&&(b.metadata={old:s,new:a.metadata});const v=[];for(const F of u)v.push(this.getNotebookCell(F));const m=[];for(const F of f)m.push(this.getNotebookCell(F));const V=[];for(const F of p)V.push(this.getNotebookCell(F));(v.length>0||m.length>0||y.length>0||V.length>0)&&(b.cells={added:v,removed:m,changed:{data:y,textContent:V}}),(b.metadata!==void 0||b.cells!==void 0)&&this._onDidChange.fire(b)})),i.push(e.notebooks.synchronization.onDidSaveNotebookDocument(r=>{const a=this.notebookDocuments.get(r.notebookDocument.uri);a!==void 0&&this._onDidSave.fire(a)})),i.push(e.notebooks.synchronization.onDidCloseNotebookDocument(r=>{const a=this.notebookDocuments.get(r.notebookDocument.uri);if(a!==void 0){this._onDidClose.fire(a);for(const s of r.cellTextDocuments)n.closeTextDocument({textDocument:s});this.notebookDocuments.delete(r.notebookDocument.uri);for(const s of a.cells)this.notebookCellMap.delete(s.document)}})),Xr.Disposable.create(()=>{i.forEach(r=>r.dispose())})}updateCellMap(e){for(const n of e.cells)this.notebookCellMap.set(n.document,[n,e])}}il.NotebookDocuments=X3;var jF={},ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.thenable=ii.typedArray=ii.stringArray=ii.array=ii.func=ii.error=ii.number=ii.string=ii.boolean=void 0;function Z3(t){return t===!0||t===!1}ii.boolean=Z3;function qF(t){return typeof t=="string"||t instanceof String}ii.string=qF;function ex(t){return typeof t=="number"||t instanceof Number}ii.number=ex;function tx(t){return t instanceof Error}ii.error=tx;function GF(t){return typeof t=="function"}ii.func=GF;function KF(t){return Array.isArray(t)}ii.array=KF;function nx(t){return KF(t)&&t.every(e=>qF(e))}ii.stringArray=nx;function ix(t,e){return Array.isArray(t)&&t.every(e)}ii.typedArray=ix;function rx(t){return t&&GF(t.then)}ii.thenable=rx;var Fr={};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.generateUuid=Fr.parse=Fr.isUUID=Fr.v4=Fr.empty=void 0;class sv{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class an extends sv{constructor(){super([an._randomHex(),an._randomHex(),an._randomHex(),an._randomHex(),an._randomHex(),an._randomHex(),an._randomHex(),an._randomHex(),"-",an._randomHex(),an._randomHex(),an._randomHex(),an._randomHex(),"-","4",an._randomHex(),an._randomHex(),an._randomHex(),"-",an._oneOf(an._timeHighBits),an._randomHex(),an._randomHex(),an._randomHex(),"-",an._randomHex(),an._randomHex(),an._randomHex(),an._randomHex(),an._randomHex(),an._randomHex(),an._randomHex(),an._randomHex(),an._randomHex(),an._randomHex(),an._randomHex(),an._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return an._oneOf(an._chars)}}an._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];an._timeHighBits=["8","9","a","b"];Fr.empty=new sv("00000000-0000-0000-0000-000000000000");function HF(){return new an}Fr.v4=HF;const sx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function YF(t){return sx.test(t)}Fr.isUUID=YF;function ax(t){if(!YF(t))throw new Error("invalid uuid");return new sv(t)}Fr.parse=ax;function ox(){return HF().asHex()}Fr.generateUuid=ox;var Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.attachPartialResult=Za.ProgressFeature=Za.attachWorkDone=void 0;const eo=gi,lx=Fr;class lo{constructor(e,n){this._connection=e,this._token=n,lo.Instances.set(this._token,this)}begin(e,n,i,r){let a={kind:"begin",title:e,percentage:n,message:i,cancellable:r};this._connection.sendProgress(eo.WorkDoneProgress.type,this._token,a)}report(e,n){let i={kind:"report"};typeof e=="number"?(i.percentage=e,n!==void 0&&(i.message=n)):i.message=e,this._connection.sendProgress(eo.WorkDoneProgress.type,this._token,i)}done(){lo.Instances.delete(this._token),this._connection.sendProgress(eo.WorkDoneProgress.type,this._token,{kind:"end"})}}lo.Instances=new Map;class uS extends lo{constructor(e,n){super(e,n),this._source=new eo.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}}class av{constructor(){}begin(){}report(){}done(){}}class dS extends av{constructor(){super(),this._source=new eo.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}}function cx(t,e){if(e===void 0||e.workDoneToken===void 0)return new av;const n=e.workDoneToken;return delete e.workDoneToken,new lo(t,n)}Za.attachWorkDone=cx;const ux=t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){var n;super.initialize(e),((n=e==null?void 0:e.window)==null?void 0:n.workDoneProgress)===!0&&(this._progressSupported=!0,this.connection.onNotification(eo.WorkDoneProgressCancelNotification.type,i=>{let r=lo.Instances.get(i.token);(r instanceof uS||r instanceof dS)&&r.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new av:new lo(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){const e=(0,lx.generateUuid)();return this.connection.sendRequest(eo.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new uS(this.connection,e))}else return Promise.resolve(new dS)}};Za.ProgressFeature=ux;var pT;(function(t){t.type=new eo.ProgressType})(pT||(pT={}));class dx{constructor(e,n){this._connection=e,this._token=n}report(e){this._connection.sendProgress(pT.type,this._token,e)}}function fx(t,e){if(e===void 0||e.partialResultToken===void 0)return;const n=e.partialResultToken;return delete e.partialResultToken,new dx(t,n)}Za.attachPartialResult=fx;var zh={};Object.defineProperty(zh,"__esModule",{value:!0});zh.ConfigurationFeature=void 0;const px=gi,hx=ii,mx=t=>class extends t{getConfiguration(e){return e?hx.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let n={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(px.ConfigurationRequest.type,n).then(i=>Array.isArray(i)?Array.isArray(e)?i:i[0]:Array.isArray(e)?[]:null)}};zh.ConfigurationFeature=mx;var Uh={};Object.defineProperty(Uh,"__esModule",{value:!0});Uh.WorkspaceFoldersFeature=void 0;const Cf=gi,yx=t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let n=e.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Cf.Emitter,this.connection.onNotification(Cf.DidChangeWorkspaceFoldersNotification.type,i=>{this._onDidChangeWorkspaceFolders.fire(i.event)}))}fillServerCapabilities(e){var i,r;super.fillServerCapabilities(e);const n=(r=(i=e.workspace)==null?void 0:i.workspaceFolders)==null?void 0:r.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Cf.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Cf.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Uh.WorkspaceFoldersFeature=yx;var Vh={};Object.defineProperty(Vh,"__esModule",{value:!0});Vh.CallHierarchyFeature=void 0;const ky=gi,gx=t=>class extends t{get callHierarchy(){return{onPrepare:e=>this.connection.onRequest(ky.CallHierarchyPrepareRequest.type,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:e=>{const n=ky.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(i,r)=>e(i,r,this.attachWorkDoneProgress(i),this.attachPartialResultProgress(n,i)))},onOutgoingCalls:e=>{const n=ky.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(i,r)=>e(i,r,this.attachWorkDoneProgress(i),this.attachPartialResultProgress(n,i)))}}}};Vh.CallHierarchyFeature=gx;var Bh={};Object.defineProperty(Bh,"__esModule",{value:!0});Bh.ShowDocumentFeature=void 0;const Tx=gi,_x=t=>class extends t{showDocument(e){return this.connection.sendRequest(Tx.ShowDocumentRequest.type,e)}};Bh.ShowDocumentFeature=_x;var Wh={};Object.defineProperty(Wh,"__esModule",{value:!0});Wh.FileOperationsFeature=void 0;const El=gi,vx=t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(El.DidCreateFilesNotification.type,n=>{e(n)})}onDidRenameFiles(e){return this.connection.onNotification(El.DidRenameFilesNotification.type,n=>{e(n)})}onDidDeleteFiles(e){return this.connection.onNotification(El.DidDeleteFilesNotification.type,n=>{e(n)})}onWillCreateFiles(e){return this.connection.onRequest(El.WillCreateFilesRequest.type,(n,i)=>e(n,i))}onWillRenameFiles(e){return this.connection.onRequest(El.WillRenameFilesRequest.type,(n,i)=>e(n,i))}onWillDeleteFiles(e){return this.connection.onRequest(El.WillDeleteFilesRequest.type,(n,i)=>e(n,i))}};Wh.FileOperationsFeature=vx;var $h={};Object.defineProperty($h,"__esModule",{value:!0});$h.LinkedEditingRangeFeature=void 0;const bx=gi,Sx=t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(bx.LinkedEditingRangeRequest.type,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),void 0))}};$h.LinkedEditingRangeFeature=Sx;var jh={};Object.defineProperty(jh,"__esModule",{value:!0});jh.TypeHierarchyFeature=void 0;const Dy=gi,Ix=t=>class extends t{get typeHierarchy(){return{onPrepare:e=>this.connection.onRequest(Dy.TypeHierarchyPrepareRequest.type,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),void 0)),onSupertypes:e=>{const n=Dy.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(i,r)=>e(i,r,this.attachWorkDoneProgress(i),this.attachPartialResultProgress(n,i)))},onSubtypes:e=>{const n=Dy.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(i,r)=>e(i,r,this.attachWorkDoneProgress(i),this.attachPartialResultProgress(n,i)))}}}};jh.TypeHierarchyFeature=Ix;var qh={};Object.defineProperty(qh,"__esModule",{value:!0});qh.InlineValueFeature=void 0;const fS=gi,Cx=t=>class extends t{get inlineValue(){return{refresh:()=>this.connection.sendRequest(fS.InlineValueRefreshRequest.type),on:e=>this.connection.onRequest(fS.InlineValueRequest.type,(n,i)=>e(n,i,this.attachWorkDoneProgress(n)))}}};qh.InlineValueFeature=Cx;var Gh={};Object.defineProperty(Gh,"__esModule",{value:!0});Gh.InlayHintFeature=void 0;const Py=gi,wx=t=>class extends t{get inlayHint(){return{refresh:()=>this.connection.sendRequest(Py.InlayHintRefreshRequest.type),on:e=>this.connection.onRequest(Py.InlayHintRequest.type,(n,i)=>e(n,i,this.attachWorkDoneProgress(n))),resolve:e=>this.connection.onRequest(Py.InlayHintResolveRequest.type,(n,i)=>e(n,i))}}};Gh.InlayHintFeature=wx;var Kh={};Object.defineProperty(Kh,"__esModule",{value:!0});Kh.DiagnosticFeature=void 0;const au=gi,Ex=t=>class extends t{get diagnostics(){return{refresh:()=>this.connection.sendRequest(au.DiagnosticRefreshRequest.type),on:e=>this.connection.onRequest(au.DocumentDiagnosticRequest.type,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(au.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:e=>this.connection.onRequest(au.WorkspaceDiagnosticRequest.type,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(au.WorkspaceDiagnosticRequest.partialResult,n)))}}};Kh.DiagnosticFeature=Ex;var Hh={};Object.defineProperty(Hh,"__esModule",{value:!0});Hh.MonikerFeature=void 0;const Fx=gi,kx=t=>class extends t{get moniker(){return{on:e=>{const n=Fx.MonikerRequest.type;return this.connection.onRequest(n,(i,r)=>e(i,r,this.attachWorkDoneProgress(i),this.attachPartialResultProgress(n,i)))}}}};Hh.MonikerFeature=kx;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.createConnection=t.combineFeatures=t.combineNotebooksFeatures=t.combineLanguagesFeatures=t.combineWorkspaceFeatures=t.combineWindowFeatures=t.combineClientFeatures=t.combineTracerFeatures=t.combineTelemetryFeatures=t.combineConsoleFeatures=t._NotebooksImpl=t._LanguagesImpl=t.BulkUnregistration=t.BulkRegistration=t.ErrorMessageTracker=void 0;const e=gi,n=ii,i=Fr,r=Za,a=zh,s=Uh,l=Vh,o=aa,u=Bh,f=Wh,y=$h,p=jh,b=qh,v=Gh,m=Kh,V=il,F=Hh;function P($){if($!==null)return $}class G{constructor(){this._messages=Object.create(null)}add(B){let X=this._messages[B];X||(X=0),X++,this._messages[B]=X}sendErrors(B){Object.keys(this._messages).forEach(X=>{B.window.showErrorMessage(X)})}}t.ErrorMessageTracker=G;class te{constructor(){}rawAttach(B){this._rawConnection=B}attach(B){this._connection=B}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(B){}initialize(B){}error(B){this.send(e.MessageType.Error,B)}warn(B){this.send(e.MessageType.Warning,B)}info(B){this.send(e.MessageType.Info,B)}log(B){this.send(e.MessageType.Log,B)}send(B,X){this._rawConnection&&this._rawConnection.sendNotification(e.LogMessageNotification.type,{type:B,message:X}).catch(()=>{(0,e.RAL)().console.error("Sending log message failed")})}}class q{constructor(){}attach(B){this._connection=B}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(B){}fillServerCapabilities(B){}showErrorMessage(B,...X){let Z={type:e.MessageType.Error,message:B,actions:X};return this.connection.sendRequest(e.ShowMessageRequest.type,Z).then(P)}showWarningMessage(B,...X){let Z={type:e.MessageType.Warning,message:B,actions:X};return this.connection.sendRequest(e.ShowMessageRequest.type,Z).then(P)}showInformationMessage(B,...X){let Z={type:e.MessageType.Info,message:B,actions:X};return this.connection.sendRequest(e.ShowMessageRequest.type,Z).then(P)}}const U=(0,u.ShowDocumentFeature)((0,r.ProgressFeature)(q));(function($){function B(){return new D}$.create=B})(t.BulkRegistration||(t.BulkRegistration={}));class D{constructor(){this._registrations=[],this._registered=new Set}add(B,X){const Z=n.string(B)?B:B.method;if(this._registered.has(Z))throw new Error(`${Z} is already added to this registration`);const se=i.generateUuid();this._registrations.push({id:se,method:Z,registerOptions:X||{}}),this._registered.add(Z)}asRegistrationParams(){return{registrations:this._registrations}}}(function($){function B(){return new M(void 0,[])}$.create=B})(t.BulkUnregistration||(t.BulkUnregistration={}));class M{constructor(B,X){this._connection=B,this._unregistrations=new Map,X.forEach(Z=>{this._unregistrations.set(Z.method,Z)})}get isAttached(){return!!this._connection}attach(B){this._connection=B}add(B){this._unregistrations.set(B.method,B)}dispose(){let B=[];for(let Z of this._unregistrations.values())B.push(Z);let X={unregisterations:B};this._connection.sendRequest(e.UnregistrationRequest.type,X).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(B){const X=n.string(B)?B:B.method,Z=this._unregistrations.get(X);if(!Z)return!1;let se={unregisterations:[Z]};return this._connection.sendRequest(e.UnregistrationRequest.type,se).then(()=>{this._unregistrations.delete(X)},_e=>{this._connection.console.info(`Un-registering request handler for ${Z.id} failed.`)}),!0}}class T{attach(B){this._connection=B}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(B){}fillServerCapabilities(B){}register(B,X,Z){return B instanceof D?this.registerMany(B):B instanceof M?this.registerSingle1(B,X,Z):this.registerSingle2(B,X)}registerSingle1(B,X,Z){const se=n.string(X)?X:X.method,_e=i.generateUuid();let be={registrations:[{id:_e,method:se,registerOptions:Z||{}}]};return B.isAttached||B.attach(this.connection),this.connection.sendRequest(e.RegistrationRequest.type,be).then(ve=>(B.add({id:_e,method:se}),B),ve=>(this.connection.console.info(`Registering request handler for ${se} failed.`),Promise.reject(ve)))}registerSingle2(B,X){const Z=n.string(B)?B:B.method,se=i.generateUuid();let _e={registrations:[{id:se,method:Z,registerOptions:X||{}}]};return this.connection.sendRequest(e.RegistrationRequest.type,_e).then(be=>e.Disposable.create(()=>{this.unregisterSingle(se,Z).catch(()=>{this.connection.console.info(`Un-registering capability with id ${se} failed.`)})}),be=>(this.connection.console.info(`Registering request handler for ${Z} failed.`),Promise.reject(be)))}unregisterSingle(B,X){let Z={unregisterations:[{id:B,method:X}]};return this.connection.sendRequest(e.UnregistrationRequest.type,Z).catch(()=>{this.connection.console.info(`Un-registering request handler for ${B} failed.`)})}registerMany(B){let X=B.asRegistrationParams();return this.connection.sendRequest(e.RegistrationRequest.type,X).then(()=>new M(this._connection,X.registrations.map(Z=>({id:Z.id,method:Z.method}))),Z=>(this.connection.console.info("Bulk registration failed."),Promise.reject(Z)))}}class N{constructor(){}attach(B){this._connection=B}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(B){}fillServerCapabilities(B){}applyEdit(B){function X(se){return se&&!!se.edit}let Z=X(B)?B:{edit:B};return this.connection.sendRequest(e.ApplyWorkspaceEditRequest.type,Z)}}const J=(0,f.FileOperationsFeature)((0,s.WorkspaceFoldersFeature)((0,a.ConfigurationFeature)(N)));class L{constructor(){this._trace=e.Trace.Off}attach(B){this._connection=B}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(B){}fillServerCapabilities(B){}set trace(B){this._trace=B}log(B,X){this._trace!==e.Trace.Off&&this.connection.sendNotification(e.LogTraceNotification.type,{message:B,verbose:this._trace===e.Trace.Verbose?X:void 0}).catch(()=>{})}}class ce{constructor(){}attach(B){this._connection=B}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(B){}fillServerCapabilities(B){}logEvent(B){this.connection.sendNotification(e.TelemetryEventNotification.type,B).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}}class ue{constructor(){}attach(B){this._connection=B}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(B){}fillServerCapabilities(B){}attachWorkDoneProgress(B){return(0,r.attachWorkDone)(this.connection,B)}attachPartialResultProgress(B,X){return(0,r.attachPartialResult)(this.connection,X)}}t._LanguagesImpl=ue;const W=(0,F.MonikerFeature)((0,m.DiagnosticFeature)((0,v.InlayHintFeature)((0,b.InlineValueFeature)((0,p.TypeHierarchyFeature)((0,y.LinkedEditingRangeFeature)((0,o.SemanticTokensFeature)((0,l.CallHierarchyFeature)(ue))))))));class Y{constructor(){}attach(B){this._connection=B}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(B){}fillServerCapabilities(B){}attachWorkDoneProgress(B){return(0,r.attachWorkDone)(this.connection,B)}attachPartialResultProgress(B,X){return(0,r.attachPartialResult)(this.connection,X)}}t._NotebooksImpl=Y;const ee=(0,V.NotebookSyncFeature)(Y);function H($,B){return function(X){return B($(X))}}t.combineConsoleFeatures=H;function le($,B){return function(X){return B($(X))}}t.combineTelemetryFeatures=le;function R($,B){return function(X){return B($(X))}}t.combineTracerFeatures=R;function ae($,B){return function(X){return B($(X))}}t.combineClientFeatures=ae;function re($,B){return function(X){return B($(X))}}t.combineWindowFeatures=re;function d($,B){return function(X){return B($(X))}}t.combineWorkspaceFeatures=d;function k($,B){return function(X){return B($(X))}}t.combineLanguagesFeatures=k;function oe($,B){return function(X){return B($(X))}}t.combineNotebooksFeatures=oe;function ye($,B){function X(se,_e,be){return se&&_e?be(se,_e):se||_e}return{__brand:"features",console:X($.console,B.console,H),tracer:X($.tracer,B.tracer,R),telemetry:X($.telemetry,B.telemetry,le),client:X($.client,B.client,ae),window:X($.window,B.window,re),workspace:X($.workspace,B.workspace,d),languages:X($.languages,B.languages,k),notebooks:X($.notebooks,B.notebooks,oe)}}t.combineFeatures=ye;function E($,B,X){const Z=X&&X.console?new(X.console(te)):new te,se=$(Z);Z.rawAttach(se);const _e=X&&X.tracer?new(X.tracer(L)):new L,be=X&&X.telemetry?new(X.telemetry(ce)):new ce,ve=X&&X.client?new(X.client(T)):new T,De=X&&X.window?new(X.window(U)):new U,Oe=X&&X.workspace?new(X.workspace(J)):new J,Je=X&&X.languages?new(X.languages(W)):new W,$e=X&&X.notebooks?new(X.notebooks(ee)):new ee,tt=[Z,_e,be,ve,De,Oe,Je,$e];function Ue(Be){return Be instanceof Promise?Be:n.thenable(Be)?new Promise((qe,dt)=>{Be.then(Xt=>qe(Xt),Xt=>dt(Xt))}):Promise.resolve(Be)}let Ye,it,ht,mt={listen:()=>se.listen(),sendRequest:(Be,...qe)=>se.sendRequest(n.string(Be)?Be:Be.method,...qe),onRequest:(Be,qe)=>se.onRequest(Be,qe),sendNotification:(Be,qe)=>{const dt=n.string(Be)?Be:Be.method;return arguments.length===1?se.sendNotification(dt):se.sendNotification(dt,qe)},onNotification:(Be,qe)=>se.onNotification(Be,qe),onProgress:se.onProgress,sendProgress:se.sendProgress,onInitialize:Be=>(it=Be,{dispose:()=>{it=void 0}}),onInitialized:Be=>se.onNotification(e.InitializedNotification.type,Be),onShutdown:Be=>(Ye=Be,{dispose:()=>{Ye=void 0}}),onExit:Be=>(ht=Be,{dispose:()=>{ht=void 0}}),get console(){return Z},get telemetry(){return be},get tracer(){return _e},get client(){return ve},get window(){return De},get workspace(){return Oe},get languages(){return Je},get notebooks(){return $e},onDidChangeConfiguration:Be=>se.onNotification(e.DidChangeConfigurationNotification.type,Be),onDidChangeWatchedFiles:Be=>se.onNotification(e.DidChangeWatchedFilesNotification.type,Be),__textDocumentSync:void 0,onDidOpenTextDocument:Be=>se.onNotification(e.DidOpenTextDocumentNotification.type,Be),onDidChangeTextDocument:Be=>se.onNotification(e.DidChangeTextDocumentNotification.type,Be),onDidCloseTextDocument:Be=>se.onNotification(e.DidCloseTextDocumentNotification.type,Be),onWillSaveTextDocument:Be=>se.onNotification(e.WillSaveTextDocumentNotification.type,Be),onWillSaveTextDocumentWaitUntil:Be=>se.onRequest(e.WillSaveTextDocumentWaitUntilRequest.type,Be),onDidSaveTextDocument:Be=>se.onNotification(e.DidSaveTextDocumentNotification.type,Be),sendDiagnostics:Be=>se.sendNotification(e.PublishDiagnosticsNotification.type,Be),onHover:Be=>se.onRequest(e.HoverRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),void 0)),onCompletion:Be=>se.onRequest(e.CompletionRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),(0,r.attachPartialResult)(se,qe))),onCompletionResolve:Be=>se.onRequest(e.CompletionResolveRequest.type,Be),onSignatureHelp:Be=>se.onRequest(e.SignatureHelpRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),void 0)),onDeclaration:Be=>se.onRequest(e.DeclarationRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),(0,r.attachPartialResult)(se,qe))),onDefinition:Be=>se.onRequest(e.DefinitionRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),(0,r.attachPartialResult)(se,qe))),onTypeDefinition:Be=>se.onRequest(e.TypeDefinitionRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),(0,r.attachPartialResult)(se,qe))),onImplementation:Be=>se.onRequest(e.ImplementationRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),(0,r.attachPartialResult)(se,qe))),onReferences:Be=>se.onRequest(e.ReferencesRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),(0,r.attachPartialResult)(se,qe))),onDocumentHighlight:Be=>se.onRequest(e.DocumentHighlightRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),(0,r.attachPartialResult)(se,qe))),onDocumentSymbol:Be=>se.onRequest(e.DocumentSymbolRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),(0,r.attachPartialResult)(se,qe))),onWorkspaceSymbol:Be=>se.onRequest(e.WorkspaceSymbolRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),(0,r.attachPartialResult)(se,qe))),onWorkspaceSymbolResolve:Be=>se.onRequest(e.WorkspaceSymbolResolveRequest.type,Be),onCodeAction:Be=>se.onRequest(e.CodeActionRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),(0,r.attachPartialResult)(se,qe))),onCodeActionResolve:Be=>se.onRequest(e.CodeActionResolveRequest.type,(qe,dt)=>Be(qe,dt)),onCodeLens:Be=>se.onRequest(e.CodeLensRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),(0,r.attachPartialResult)(se,qe))),onCodeLensResolve:Be=>se.onRequest(e.CodeLensResolveRequest.type,(qe,dt)=>Be(qe,dt)),onDocumentFormatting:Be=>se.onRequest(e.DocumentFormattingRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),void 0)),onDocumentRangeFormatting:Be=>se.onRequest(e.DocumentRangeFormattingRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),void 0)),onDocumentOnTypeFormatting:Be=>se.onRequest(e.DocumentOnTypeFormattingRequest.type,(qe,dt)=>Be(qe,dt)),onRenameRequest:Be=>se.onRequest(e.RenameRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),void 0)),onPrepareRename:Be=>se.onRequest(e.PrepareRenameRequest.type,(qe,dt)=>Be(qe,dt)),onDocumentLinks:Be=>se.onRequest(e.DocumentLinkRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),(0,r.attachPartialResult)(se,qe))),onDocumentLinkResolve:Be=>se.onRequest(e.DocumentLinkResolveRequest.type,(qe,dt)=>Be(qe,dt)),onDocumentColor:Be=>se.onRequest(e.DocumentColorRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),(0,r.attachPartialResult)(se,qe))),onColorPresentation:Be=>se.onRequest(e.ColorPresentationRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),(0,r.attachPartialResult)(se,qe))),onFoldingRanges:Be=>se.onRequest(e.FoldingRangeRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),(0,r.attachPartialResult)(se,qe))),onSelectionRanges:Be=>se.onRequest(e.SelectionRangeRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),(0,r.attachPartialResult)(se,qe))),onExecuteCommand:Be=>se.onRequest(e.ExecuteCommandRequest.type,(qe,dt)=>Be(qe,dt,(0,r.attachWorkDone)(se,qe),void 0)),dispose:()=>se.dispose()};for(let Be of tt)Be.attach(mt);return se.onRequest(e.InitializeRequest.type,Be=>{B.initialize(Be),n.string(Be.trace)&&(_e.trace=e.Trace.fromString(Be.trace));for(let qe of tt)qe.initialize(Be.capabilities);if(it){let qe=it(Be,new e.CancellationTokenSource().token,(0,r.attachWorkDone)(se,Be),void 0);return Ue(qe).then(dt=>{if(dt instanceof e.ResponseError)return dt;let Xt=dt;Xt||(Xt={capabilities:{}});let En=Xt.capabilities;En||(En={},Xt.capabilities=En),En.textDocumentSync===void 0||En.textDocumentSync===null?En.textDocumentSync=n.number(mt.__textDocumentSync)?mt.__textDocumentSync:e.TextDocumentSyncKind.None:!n.number(En.textDocumentSync)&&!n.number(En.textDocumentSync.change)&&(En.textDocumentSync.change=n.number(mt.__textDocumentSync)?mt.__textDocumentSync:e.TextDocumentSyncKind.None);for(let Ti of tt)Ti.fillServerCapabilities(En);return Xt})}else{let qe={capabilities:{textDocumentSync:e.TextDocumentSyncKind.None}};for(let dt of tt)dt.fillServerCapabilities(qe.capabilities);return qe}}),se.onRequest(e.ShutdownRequest.type,()=>{if(B.shutdownReceived=!0,Ye)return Ye(new e.CancellationTokenSource().token)}),se.onNotification(e.ExitNotification.type,()=>{try{ht&&ht()}finally{B.shutdownReceived?B.exit(0):B.exit(1)}}),se.onNotification(e.SetTraceNotification.type,Be=>{_e.trace=e.Trace.fromString(Be.value)}),mt}t.createConnection=E})(jF);(function(t){var e=Te&&Te.__createBinding||(Object.create?function(s,l,o,u){u===void 0&&(u=o);var f=Object.getOwnPropertyDescriptor(l,o);(!f||("get"in f?!l.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return l[o]}}),Object.defineProperty(s,u,f)}:function(s,l,o,u){u===void 0&&(u=o),s[u]=l[o]}),n=Te&&Te.__exportStar||function(s,l){for(var o in s)o!=="default"&&!Object.prototype.hasOwnProperty.call(l,o)&&e(l,s,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProposedFeatures=t.NotebookDocuments=t.TextDocuments=t.SemanticTokensBuilder=void 0;const i=aa;Object.defineProperty(t,"SemanticTokensBuilder",{enumerable:!0,get:function(){return i.SemanticTokensBuilder}}),n(gi,t);const r=Md;Object.defineProperty(t,"TextDocuments",{enumerable:!0,get:function(){return r.TextDocuments}});const a=il;Object.defineProperty(t,"NotebookDocuments",{enumerable:!0,get:function(){return a.NotebookDocuments}}),n(jF,t),function(s){s.all={__brand:"features"}}(t.ProposedFeatures||(t.ProposedFeatures={}))})(T0);var Dx=gi;(function(t){var e=Te&&Te.__createBinding||(Object.create?function(l,o,u,f){f===void 0&&(f=u);var y=Object.getOwnPropertyDescriptor(o,u);(!y||("get"in y?!o.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return o[u]}}),Object.defineProperty(l,f,y)}:function(l,o,u,f){f===void 0&&(f=u),l[f]=o[u]}),n=Te&&Te.__exportStar||function(l,o){for(var u in l)u!=="default"&&!Object.prototype.hasOwnProperty.call(o,u)&&e(o,l,u)};Object.defineProperty(t,"__esModule",{value:!0}),t.createConnection=void 0;const i=T0;n(Dx,t),n(T0,t);let r=!1;const a={initialize:l=>{},get shutdownReceived(){return r},set shutdownReceived(l){r=l},exit:l=>{}};function s(l,o,u,f){let y,p,b,v;l!==void 0&&l.__brand==="features"&&(y=l,l=o,o=u,u=f),i.ConnectionStrategy.is(l)||i.ConnectionOptions.is(l)?v=l:(p=l,b=o,v=u);const m=V=>(0,i.createProtocolConnection)(p,b,V,v);return(0,i.createConnection)(m,a,y)}t.createConnection=s})(Cs);Object.defineProperty(In,"__esModule",{value:!0});In.DefaultCancellationProvider=In.CancelAfter=In.throwIfCancellationRequested=In.OperationCanceledException=In.setCancellationFolderName=In.getCancellationFolderName=void 0;const QF=go,Ay=Cs,Px=Ht;let JF;function Ax(){return JF}In.getCancellationFolderName=Ax;function Mx(t){JF=t}In.setCancellationFolderName=Mx;class XF extends Ay.ResponseError{constructor(){super(Ay.LSPErrorCodes.RequestCancelled,"request cancelled")}static is(e){return e.code===Ay.LSPErrorCodes.RequestCancelled}}In.OperationCanceledException=XF;function Nx(t){if(!(0,Px.isDebugMode)()&&t.isCancellationRequested)throw new XF}In.throwIfCancellationRequested=Nx;function Rx(...t){const e=new QF.CancellationTokenSource,n=[];for(const i of t)n.push(i.onCancellationRequested(r=>{e.cancel()}));return n.push(e.token.onCancellationRequested(i=>{n.forEach(r=>r.dispose())})),e}In.CancelAfter=Rx;class Ox{createCancellationTokenSource(){return new QF.CancellationTokenSource}}In.DefaultCancellationProvider=Ox;var yn={},Rn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.combineRange=t.extendRange=t.isEmptyRange=t.isEmptyPosition=t.getEmptyRange=t.rangesAreEqual=t.positionsAreEqual=t.doesRangeContain=t.doRangesIntersect=t.doRangesOverlap=t.getEmptyPosition=t.comparePositions=t.Range=t.Position=t.TextRange=void 0,function(v){function m(M,T){if(M<0)throw new Error("start must be non-negative");if(T<0)throw new Error("length must be non-negative");return{start:M,length:T}}v.create=m;function V(M,T){if(M<0)throw new Error("start must be non-negative");if(M>T)throw new Error("end must be greater than or equal to start");return m(M,T-M)}v.fromBounds=V;function F(M){return M.start+M.length}v.getEnd=F;function P(M,T){return T>=M.start&&T<F(M)}v.contains=P;function G(M,T){return T.start>=M.start&&F(T)<=F(M)}v.containsRange=G;function te(M,T){return T>=M.start&&T<=F(M)}v.overlaps=te;function q(M,T){return te(M,T.start)||te(T,M.start)}v.overlapsRange=q;function U(M,T){T&&(Array.isArray(T)?T.forEach(N=>{U(M,N)}):(T.start<M.start&&(M.length+=M.start-T.start,M.start=T.start),F(T)>F(M)&&(M.length+=F(T)-F(M))))}v.extend=U;function D(M){if(M.length===0)return;const T=M[0];for(let N=1;N<M.length;N++)U(T,M[N]);return T}v.combine=D}(t.TextRange||(t.TextRange={}));var e;(function(v){function m(F){const P=F;return P&&P.line!==void 0&&P.character!==void 0}v.is=m;function V(F){return`(${F.line}:${F.character})`}v.print=V})(e=t.Position||(t.Position={})),function(v){function m(F){const P=F;return P&&P.start!==void 0&&P.end!==void 0}v.is=m;function V(F){return`${e.print(F.start)}-${e.print(F.end)}`}v.print=V}(t.Range||(t.Range={}));function n(v,m){return v.line<m.line?-1:v.line>m.line?1:v.character<m.character?-1:v.character>m.character?1:0}t.comparePositions=n;function i(){return{line:0,character:0}}t.getEmptyPosition=i;function r(v,m){return n(m.start,v.end)>=0?!1:!(n(v.start,m.end)>=0)}t.doRangesOverlap=r;function a(v,m){return n(m.start,v.end)>0?!1:!(n(v.start,m.end)>0)}t.doRangesIntersect=a;function s(v,m){return e.is(m)?n(v.start,m)<=0&&n(v.end,m)>=0:s(v,m.start)&&s(v,m.end)}t.doesRangeContain=s;function l(v,m){return n(v,m)===0}t.positionsAreEqual=l;function o(v,m){return l(v.start,m.start)&&l(v.end,m.end)}t.rangesAreEqual=o;function u(){return{start:i(),end:i()}}t.getEmptyRange=u;function f(v){return v.character===0&&v.line===0}t.isEmptyPosition=f;function y(v){return f(v.start)&&f(v.end)}t.isEmptyRange=y;function p(v,m){m&&(Array.isArray(m)?m.forEach(V=>{p(v,V)}):(n(m.start,v.start)<0&&(v.start=m.start),n(m.end,v.end)>0&&(v.end=m.end)))}t.extendRange=p;function b(v){if(v.length===0)return;const m=v[0];for(let V=1;V<v.length;V++)p(m,v[V]);return m}t.combineRange=b})(Rn);Object.defineProperty(yn,"__esModule",{value:!0});yn.convertTextRangeToRange=yn.convertRangeToTextRange=yn.convertPositionToOffset=yn.convertOffsetsToRange=yn.convertOffsetToPosition=void 0;const pS=qt,ZF=Rn;function hT(t,e){if(e.end===0)return{line:0,character:0};let n=0;t>=e.end&&(t=e.end-1,n=1);const i=e.getItemContaining(t);(0,pS.assert)(i>=0&&i<=e.length);const r=e.getItemAt(i);return(0,pS.assert)(r!==void 0),{line:i,character:t-r.start+n}}yn.convertOffsetToPosition=hT;function ek(t,e,n){const i=hT(t,n),r=hT(e,n);return{start:i,end:r}}yn.convertOffsetsToRange=ek;function mT(t,e){if(!(t.line>=e.count))return e.getItemAt(t.line).start+t.character}yn.convertPositionToOffset=mT;function xx(t,e){const n=mT(t.start,e);if(n===void 0)return;const i=mT(t.end,e);if(i!==void 0)return ZF.TextRange.fromBounds(n,i)}yn.convertRangeToTextRange=xx;function Lx(t,e){return ek(t.start,ZF.TextRange.getEnd(t),e)}yn.convertTextRangeToRange=Lx;var kt={},Bc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.createKeysForReferenceSubexpressions=t.createKeyForReference=t.isCodeFlowSupportedForReference=t.getUniqueFlowNodeId=t.FlowFlags=void 0;const e=qt;(function(l){l[l.Unreachable=1]="Unreachable",l[l.Start=2]="Start",l[l.BranchLabel=4]="BranchLabel",l[l.LoopLabel=8]="LoopLabel",l[l.Assignment=16]="Assignment",l[l.Unbind=32]="Unbind",l[l.WildcardImport=64]="WildcardImport",l[l.TrueCondition=128]="TrueCondition",l[l.FalseCondition=512]="FalseCondition",l[l.Call=1024]="Call",l[l.PreFinallyGate=2048]="PreFinallyGate",l[l.PostFinally=4096]="PostFinally",l[l.VariableAnnotation=16384]="VariableAnnotation",l[l.PostContextManager=32768]="PostContextManager",l[l.TrueNeverCondition=65536]="TrueNeverCondition",l[l.FalseNeverCondition=131072]="FalseNeverCondition",l[l.NarrowForPattern=262144]="NarrowForPattern",l[l.ExhaustedMatch=524288]="ExhaustedMatch"})(t.FlowFlags||(t.FlowFlags={}));let n=1;function i(){return n++}t.getUniqueFlowNodeId=i;function r(l){if(l.nodeType===38)return!0;if(l.nodeType===35)return r(l.leftExpression);if(l.nodeType===24){if(l.items.length!==1||l.trailingComma||l.items[0].name!==void 0||l.items[0].argumentCategory!==0)return!1;const o=l.items[0].valueExpression,u=o.nodeType===40&&!o.isImaginary&&o.isInteger,f=o.nodeType===55&&o.operator===33&&o.expression.nodeType===40&&!o.expression.isImaginary&&o.expression.isInteger,y=o.nodeType===48&&o.strings.length===1&&o.strings[0].nodeType===49;return!u&&!f&&!y?!1:r(l.baseExpression)}return!1}t.isCodeFlowSupportedForReference=r;function a(l){let o;if(l.nodeType===38)o=l.value;else if(l.nodeType===35)o=`${a(l.leftExpression)}.${l.memberName.value}`;else if(l.nodeType===24){const u=a(l.baseExpression);(0,e.assert)(l.items.length===1);const f=l.items[0].valueExpression;if(f.nodeType===40)o=`${u}[${f.value.toString()}]`;else if(f.nodeType===48){const y=f;(0,e.assert)(y.strings.length===1&&y.strings[0].nodeType===49),o=`${u}["${y.strings[0].value}"]`}else f.nodeType===55&&f.operator===33&&f.expression.nodeType===40?o=`${u}[-${f.expression.value.toString()}]`:(0,e.fail)("createKeyForReference received unexpected index type")}else(0,e.fail)("createKeyForReference received unexpected expression type");return o}t.createKeyForReference=a;function s(l){if(l.nodeType===38)return[a(l)];if(l.nodeType===35)return[...s(l.leftExpression),a(l)];if(l.nodeType===24)return[...s(l.baseExpression),a(l)];(0,e.fail)("createKeyForReference received unexpected expression type")}t.createKeysForReferenceSubexpressions=s})(Bc);Object.defineProperty(kt,"__esModule",{value:!0});kt.isCodeUnreachable=kt.setDunderAllInfo=kt.getDunderAllInfo=kt.setCodeFlowComplexity=kt.getCodeFlowComplexity=kt.setCodeFlowExpressions=kt.getCodeFlowExpressions=kt.setFileInfo=kt.getFileInfo=kt.setAfterFlowNode=kt.getAfterFlowNode=kt.setFlowNode=kt.getFlowNode=kt.setDeclaration=kt.getDeclaration=kt.setScope=kt.getScope=kt.setImportInfo=kt.getImportInfo=kt.cleanNodeAnalysisInfo=void 0;const zx=Bc;function Ux(t){const e=t;delete e.scope,delete e.declaration,delete e.flowNode,delete e.afterFlowNode,delete e.fileInfo,delete e.codeFlowExpressions,delete e.codeFlowComplexity,delete e.dunderAllInfo}kt.cleanNodeAnalysisInfo=Ux;function Vx(t){return t.importInfo}kt.getImportInfo=Vx;function Bx(t,e){const n=t;n.importInfo=e}kt.setImportInfo=Bx;function Wx(t){return t.scope}kt.getScope=Wx;function $x(t,e){const n=t;n.scope=e}kt.setScope=$x;function jx(t){return t.declaration}kt.getDeclaration=jx;function qx(t,e){const n=t;n.declaration=e}kt.setDeclaration=qx;function tk(t){return t.flowNode}kt.getFlowNode=tk;function Gx(t,e){const n=t;n.flowNode=e}kt.setFlowNode=Gx;function Kx(t){return t.afterFlowNode}kt.getAfterFlowNode=Kx;function Hx(t,e){const n=t;n.afterFlowNode=e}kt.setAfterFlowNode=Hx;function Yx(t){for(;t.nodeType!==36;)t=t.parent;return t.fileInfo}kt.getFileInfo=Yx;function Qx(t,e){const n=t;n.fileInfo=e}kt.setFileInfo=Qx;function Jx(t){return t.codeFlowExpressions}kt.getCodeFlowExpressions=Jx;function Xx(t,e){const n=t;n.codeFlowExpressions=e}kt.setCodeFlowExpressions=Xx;function Zx(t){var e;return(e=t.codeFlowComplexity)!==null&&e!==void 0?e:0}kt.getCodeFlowComplexity=Zx;function e6(t,e){const n=t;n.codeFlowComplexity=e}kt.setCodeFlowComplexity=e6;function t6(t){return t.dunderAllInfo}kt.getDunderAllInfo=t6;function n6(t,e){const n=t;n.dunderAllInfo=e}kt.setDunderAllInfo=n6;function i6(t){let e=t;for(;e;){const n=tk(e);if(n)return!!(n.flags&zx.FlowFlags.Unreachable);e=e.parent}return!1}kt.isCodeUnreachable=i6;var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.isPublicConstantOrTypeAlias=Dn.isTypeAliasName=Dn.isConstantName=Dn.isSingleDunderName=Dn.isDunderName=Dn.isPrivateOrProtectedName=Dn.isProtectedName=Dn.isPrivateName=void 0;const r6=/^[A-Z0-9_]+$/,s6=/^[_]+$/,a6=/^_{0,2}[A-Z][A-Za-z0-9_]+$/;function nk(t){return t.length>2&&t.startsWith("__")&&!t.endsWith("__")}Dn.isPrivateName=nk;function ik(t){return t.length>1&&t.startsWith("_")&&!t.startsWith("__")}Dn.isProtectedName=ik;function rk(t){return nk(t)||ik(t)}Dn.isPrivateOrProtectedName=rk;function o6(t){return t.length>4&&t.startsWith("__")&&t.endsWith("__")}Dn.isDunderName=o6;function l6(t){return t.length>2&&t.startsWith("_")&&t.endsWith("_")}Dn.isSingleDunderName=l6;function sk(t){return!!t.match(r6)&&!t.match(s6)}Dn.isConstantName=sk;function ak(t){return!!t.match(a6)}Dn.isTypeAliasName=ak;function c6(t){return!rk(t)&&(sk(t)||ak(t))}Dn.isPublicConstantOrTypeAlias=c6;var u6=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),d6=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ok=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&u6(e,t,n);return d6(e,t),e};Object.defineProperty(vn,"__esModule",{value:!0});vn.getDirectoryLeadingDotsPointsTo=vn.getRelativeModuleName=vn.getTextRangeForImportNameDeletion=vn.getImportGroupFromModuleNameAndType=vn.getAllImportNames=vn.getContainingImportStatement=vn.getTextEditsForAutoImportInsertion=vn.getTextEditsForAutoImportInsertions=vn.getTextEditsForAutoImportSymbolAddition=vn.getTopLevelImports=vn.compareImportStatements=vn.getImportGroup=void 0;const f6=In,hd=Dt,Hs=Hn,$a=yn,lk=bn,Ac=Rn,ck=ok(kt),yT=ok(Dn);function Wp(t){return t.importResult?t.importResult.importType===0?0:t.importResult.importType===1||t.importResult.isLocalTypingsFile?1:t.importResult.isRelative?3:2:2}vn.getImportGroup=Wp;function p6(t,e){const n=Wp(t),i=Wp(e);return n<i?-1:n>i?1:t.moduleName<e.moduleName?-1:1}vn.compareImportStatements=p6;function h6(t,e=!1){const n={orderedImports:[],mapByFilePath:new Map};let i=!1,r=!1;return t.statements.forEach(a=>{a.nodeType===47?a.statements.forEach(s=>{s.nodeType===20?(r=!0,v6(s,n,i),i=!1):s.nodeType===22?(r=!0,b6(s,n,i,e),i=!1):i=r}):i=r}),n}vn.getTopLevelImports=h6;function hS(t){return yT.isConstantName(t)?0:yT.isTypeAliasName(t)?1:2}function m6(t,e,n){const i=[];if(!e.node||e.node.nodeType!==22||e.node.isWildcardImport)return i;const r=e.node;if(t=(Array.isArray(t)?t:[t]).filter(l=>!!l.name&&!r.imports.some(o=>o.name.value===l.name&&o.alias===l.alias)),t.length===0)return i;for(const l of t)i.push(y6(l.name,l.alias,e.node,n));const a=(0,hd.createMapFromItems)(i,l=>Ac.Range.print(l.range)),s=[];for(const l of a.values())l.length===1?s.push(l[0]):s.push({range:l[0].range,replacementText:l.sort((o,u)=>ov(o.importName,u.importName)).map(o=>o.replacementText).join("")});return s}vn.getTextEditsForAutoImportSymbolAddition=m6;function ov(t,e){const n=hS(t),i=hS(e),r=n-i;if(r!==0)return r;const a=t.replace(/_/g,"="),s=e.replace(/_/g,"=");return(0,lk.compareStringsCaseSensitive)(a,s)}function y6(t,e,n,i){let r;for(const y of n.imports){if(ov(y.name.value,t)>0)break;r=y}let a=!1,s="";if(n.imports.length>0){const y=(0,$a.convertOffsetToPosition)(n.start,i.tokenizerOutput.lines),p=(0,$a.convertOffsetToPosition)(n.imports[0].start,i.tokenizerOutput.lines),b=n.imports.length>1?(0,$a.convertOffsetToPosition)(n.imports[1].start,i.tokenizerOutput.lines):void 0;if(p.line>y.line&&(b===void 0||b.line>p.line)){const v=i.tokenizerOutput.lines.getItemAt(p.line);s=i.text.substr(v.start,p.character),/^\s*$/.test(s)&&(a=!0)}}const l=r?Ac.TextRange.getEnd(r):n.imports.length>0?n.imports[0].start:n.start+n.length,o=(0,$a.convertOffsetToPosition)(l,i.tokenizerOutput.lines),u=e?`${t} as ${e}`:`${t}`;let f;if(a){const y=i.tokenizerOutput.predominantEndOfLineSequence;f=r?`,${y}${s}${u}`:`${u},${y}${s}`}else f=r?`, ${u}`:`${u}, `;return{range:{start:o,end:o},importName:t,replacementText:f}}function g6(t,e,n,i){const r=[];if(t=Array.isArray(t)?t:[t],t.length===0)return[];const a=(0,hd.createMapFromItems)(t,s=>s.module.moduleName);for(const s of a.values())r.push(...dk(s,e,s[0].module.moduleName,pk(s[0].module),n,i));return uk(n,r)}vn.getTextEditsForAutoImportInsertions=g6;function T6(t,e,n,i,r,a){const s=dk(t,e,n,i,r,a);return uk(r,s)}vn.getTextEditsForAutoImportInsertion=T6;function uk(t,e){if(e.length<2)return e.map(s=>r(s));const n=[...(0,hd.createMapFromItems)(e,s=>`${s.importGroup} ${Ac.Range.print(s.range)}`)].sort((s,l)=>(0,lk.compareStringsCaseSensitive)(s[0],l[0])).map(s=>s[1]),i=[];for(const s of n)s.length===1?i.push(r(s[0])):i.push({range:s[0].range,replacementText:s[0].preChange+s.map(l=>l.importStatement).sort((l,o)=>a(l,o)).join(t.tokenizerOutput.predominantEndOfLineSequence)+s[0].postChange});return i;function r(s){return{range:s.range,replacementText:s.preChange+s.importStatement+s.postChange}}function a(s,l){const o=s.startsWith("import"),u=l.startsWith("import");return o===u?s<l?-1:1:o?-1:1}}function dk(t,e,n,i,r,a){const s=[];t=Array.isArray(t)?t:[t],t.length===0&&t.push({});const l=(0,hd.createMapFromItems)(t,p=>p.name?"from":"import"),o=l.get("import");o&&y(o,p=>`import ${p.join(", ")}`);const u=l.get("from");return u&&y(u,p=>`from ${n} import ${p.join(", ")}`),s;function f(p,b){const v=p.name?p.name:b;return{sortText:v,text:p.alias?`${v} as ${p.alias}`:v}}function y(p,b){const v=p.map(m=>f(m,n)).sort((m,V)=>ov(m.sortText,V.sortText)).reduce((m,V)=>(0,hd.addIfUnique)(m,V.text),[]);s.push(_6(b(v),e,n,i,r,a))}}function _6(t,e,n,i,r,a){let s="",l="",o;const u=(0,$a.convertPositionToOffset)(a,r.tokenizerOutput.lines);if(e.orderedImports.length>0&&u>e.orderedImports[0].node.start){let y=!0,p=e.orderedImports[0],b=0;for(const v of e.orderedImports){const m=v.importResult?Wp(v):b;if(i<m){!y&&b<i&&(s=r.tokenizerOutput.predominantEndOfLineSequence+s);break}if(i===m&&v.moduleName>n)break;if(v.followsNonImportStatement){i>b&&(s=r.tokenizerOutput.predominantEndOfLineSequence+s);break}v===e.orderedImports[e.orderedImports.length-1]&&i>m&&(s=r.tokenizerOutput.predominantEndOfLineSequence+s),!y&&i<b&&i===m?y=!0:y=!1,b=m,p=v}p?(y?l=l+r.tokenizerOutput.predominantEndOfLineSequence:s=r.tokenizerOutput.predominantEndOfLineSequence+s,o=(0,$a.convertOffsetToPosition)(y?p.node.start:Ac.TextRange.getEnd(p.node),r.tokenizerOutput.lines)):o={line:0,character:0}}else{o={line:0,character:0};let y=!1;for(const p of r.parseTree.statements){let b=!0;if(p.nodeType===47&&p.statements.length===1){const v=p.statements[0];(v.nodeType===48||v.nodeType===3&&v.leftExpression.nodeType===38&&yT.isDunderName(v.leftExpression.value))&&(b=!1)}if(b){o=(0,$a.convertOffsetToPosition)(p.start,r.tokenizerOutput.lines),y=!1;break}else o=(0,$a.convertOffsetToPosition)(p.start+p.length,r.tokenizerOutput.lines),y=!0}l=l+r.tokenizerOutput.predominantEndOfLineSequence+r.tokenizerOutput.predominantEndOfLineSequence,y?s=r.tokenizerOutput.predominantEndOfLineSequence+s:l=l+r.tokenizerOutput.predominantEndOfLineSequence}return{range:{start:o,end:o},preChange:s,importStatement:t,postChange:l,importGroup:i}}function v6(t,e,n){t.list.forEach(i=>{const r=ck.getImportInfo(i.module);let a;r&&r.isImportFound&&(a=r.resolvedPaths[r.resolvedPaths.length-1]);const s={node:t,subnode:i,importResult:r,resolvedPath:a,moduleName:fk(i.module),followsNonImportStatement:n};e.orderedImports.push(s),a&&(e.mapByFilePath.has(a)||e.mapByFilePath.set(a,s))})}function b6(t,e,n,i){var r;const a=ck.getImportInfo(t.module);let s;if(a&&a.isImportFound&&(s=a.resolvedPaths[a.resolvedPaths.length-1]),i&&a){e.implicitImports=(r=e.implicitImports)!==null&&r!==void 0?r:new Map;for(const o of a.implicitImports){const u=t.imports.find(f=>f.name.value===o.name);u&&e.implicitImports.set(o.path,u)}}const l={node:t,importResult:a,resolvedPath:s,moduleName:fk(t.module),followsNonImportStatement:n};if(e.orderedImports.push(l),s){const o=e.mapByFilePath.get(s);(!o||o.node.nodeType===20||o.moduleName.length>l.moduleName.length)&&e.mapByFilePath.set(s,l)}}function fk(t){let e="";for(let n=0;n<t.leadingDots;n++)e=e+".";return e+=t.nameParts.map(n=>n.value).join("."),e}function S6(t,e){for(;t&&((0,f6.throwIfCancellationRequested)(e),!(t.nodeType===20||t.nodeType===22));)t=t.parent;return t}vn.getContainingImportStatement=S6;function I6(t){return t.nodeType===20?t.list:t.imports}vn.getAllImportNames=I6;function pk(t){let e=2;return t.isLocalTypingsFile||t.importType===1?e=1:t.importType===0&&(e=0),e}vn.getImportGroupFromModuleNameAndType=pk;function C6(t,e){let n;if(t.length===1&&e===0)n=t[0];else if(e===t.length-1){const i=Ac.TextRange.getEnd(t[e-1]),r=Ac.TextRange.getEnd(t[e])-i;n={start:i,length:r}}else{const i=t[e].start,r=t[e+1].start-i;n={start:i,length:r}}return n}vn.getTextRangeForImportNameDeletion=C6;function w6(t,e,n,i=!1,r){let a=e;r=r!==void 0?r:(0,Hs.isFile)(t,e),r&&(a=(0,Hs.getDirectoryPath)(e));let s,l=n;if(r){l=(0,Hs.getDirectoryPath)(n);const f=(0,Hs.stripFileExtension)((0,Hs.getFileName)(n));f!=="__init__"?s=f:i&&(s=(0,Hs.getFileName)(l),l=(0,Hs.getDirectoryPath)(l))}const o=(0,Hs.getRelativePathComponentsFromDirectory)(a,l,f=>t.realCasePath(f));let u=".";for(let f=1;f<o.length;f++){const y=o[f];y===".."?u+=".":u+=y,y!==".."&&f!==o.length-1&&(u+=".")}return s&&(u=u[u.length-1]==="."?u+s:u+"."+s),u}vn.getRelativeModuleName=w6;function E6(t,e){let n=t;for(let i=1;i<e;i++){if(n==="")return;n=(0,Hs.getDirectoryPath)(n)}return n}vn.getDirectoryLeadingDotsPointsTo=E6;var Yh={};Object.defineProperty(Yh,"__esModule",{value:!0});Yh.ParentDirectoryCache=void 0;const mS=Dt,My=Hn;class F6{constructor(e){this._importRootGetter=e,this._importChecked=new Map,this._cachedResults=new Map,this._libPathCache=void 0}getImportResult(e,n,i){var r,a,s,l;const o=(r=this._cachedResults.get(n))===null||r===void 0?void 0:r.get(e);if(o)return o!=null?o:i;const u=(a=this._importChecked.get(n))===null||a===void 0?void 0:a.get(e);if(u)return u.importPath&&(l=(s=this._cachedResults.get(n))===null||s===void 0?void 0:s.get(u.importPath))!==null&&l!==void 0?l:i}checkValidPath(e,n,i){var r;return!(!n.startsWith(i)||(this._libPathCache=(r=this._libPathCache)!==null&&r!==void 0?r:this._importRootGetter().map(a=>(0,My.ensureTrailingDirectorySeparator)((0,My.normalizePathCase)(e,(0,My.normalizePath)(a)))).filter(a=>a!==i).filter(a=>a.startsWith(i)),this._libPathCache.some(a=>n.startsWith(a))))}checked(e,n,i){(0,mS.getOrAdd)(this._importChecked,n,()=>new Map).set(e,i)}add(e){(0,mS.getOrAdd)(this._cachedResults,e.importName,()=>new Map).set(e.path,e.importResult)}reset(){this._importChecked.clear(),this._cachedResults.clear(),this._libPathCache=void 0}}Yh.ParentDirectoryCache=F6;(function(t){var e=Te&&Te.__createBinding||(Object.create?function(q,U,D,M){M===void 0&&(M=D),Object.defineProperty(q,M,{enumerable:!0,get:function(){return U[D]}})}:function(q,U,D,M){M===void 0&&(M=D),q[M]=U[D]}),n=Te&&Te.__setModuleDefault||(Object.create?function(q,U){Object.defineProperty(q,"default",{enumerable:!0,value:U})}:function(q,U){q.default=U}),i=Te&&Te.__importStar||function(q){if(q&&q.__esModule)return q;var U={};if(q!=null)for(var D in q)D!=="default"&&Object.prototype.hasOwnProperty.call(q,D)&&e(U,q,D);return n(U,q),U};Object.defineProperty(t,"__esModule",{value:!0}),t.ImportResolver=t.supportedFileExtensions=t.createImportedModuleDescriptor=void 0;const r=Dt,a=ri,s=Hn,l=hl,o=bn,u=i(bn),f=Vn,y=Dh,p=vn,b=Yh,v=i(Z_),m=Pd,V=Dn;function F(q){if(q.length===0)return{leadingDots:0,nameParts:[],importedSymbols:[]};let U=0,D=0;for(;U<q.length&&q[U]===".";U++)D++;return{leadingDots:D,nameParts:q.slice(U).split("."),importedSymbols:[]}}t.createImportedModuleDescriptor=F;const P=[".pyd",".so",".dylib"];t.supportedFileExtensions=[".py",".pyi",...P];const G=!1;class te{constructor(U,D,M){this.fileSystem=U,this._configOptions=D,this.host=M,this._cachedImportResults=new Map,this._cachedModuleNameResults=new Map,this._cachedEntriesForPath=new Map,this.cachedParentImportResults=new b.ParentDirectoryCache(()=>this.getPythonSearchPaths([]))}invalidateCache(){this._cachedImportResults=new Map,this._cachedModuleNameResults=new Map,this.cachedParentImportResults.reset(),this._invalidateFileSystemCache(),this.fileSystem instanceof y.PyrightFileSystem&&this.fileSystem.clearPartialStubs()}resolveImport(U,D,M){return this._resolveImport(U,D,M)}_resolveImport(U,D,M){const T=this.formatImportName(M),N=[],J=this._resolveImportStrict(T,U,D,M,N);if(J.isImportFound||M.leadingDots>0)return J;U=(0,s.normalizePathCase)(this.fileSystem,(0,s.normalizePath)(U));const L=(0,s.ensureTrailingDirectorySeparator)((0,s.getDirectoryPath)(U)),ce=this.cachedParentImportResults.getImportResult(L,T,J);if(ce)return this.filterImplicitImports(ce,M.importedSymbols);const ue=this.getParentImportResolutionRoot(U,D.root);if(!this.cachedParentImportResults.checkValidPath(this.fileSystem,U,ue))return J;const W={importPath:void 0};let Y=L;for(;this._shouldWalkUp(Y,ue,D);){const ee=this.resolveAbsoluteImport(Y,D,M,T,[],void 0,void 0,!1,!0);if(this.cachedParentImportResults.checked(Y,T,W),ee.isImportFound)return W.importPath=Y,this.cachedParentImportResults.add({importResult:ee,path:Y,importName:T}),this.filterImplicitImports(ee,M.importedSymbols);let H;if([H,Y]=this._tryWalkUp(Y),!H)break}return this.cachedParentImportResults.checked(Y,T,W),J}_resolveImportStrict(U,D,M,T,N){const J={importName:U,isRelative:!1,isImportFound:!1,isPartlyResolved:!1,isNamespacePackage:!1,isStubPackage:!1,importFailureInfo:N,resolvedPaths:[],importType:2,isStubFile:!1,isNativeLib:!1,implicitImports:[],filteredImplicitImports:[],nonStubImportResult:void 0};if(this.ensurePartialStubPackages(M),T.leadingDots>0){const L=this._resolveRelativeImport(D,M,T,U,N);if(L)return L.isRelative=!0,L}else{const L=this._lookUpResultsInCache(M,U,T.importedSymbols);if(L&&!(L.isImportFound&&L.isNamespacePackage&&!this._isNamespacePackageResolved(T,L.implicitImports)))return L;const ce=this._resolveBestAbsoluteImport(D,M,T,!0);if(ce)return ce.isStubFile&&(ce.nonStubImportResult=this._resolveBestAbsoluteImport(D,M,T,!1)||J),this.addResultsToCache(M,U,ce,T.importedSymbols)}return this.addResultsToCache(M,U,J,void 0)}getCompletionSuggestions(U,D,M){const T=this._getCompletionSuggestionsStrict(U,D,M);if(M.leadingDots>0)return T;const N=this.getParentImportResolutionRoot(U,D.root);let L=(0,s.ensureTrailingDirectorySeparator)((0,s.getDirectoryPath)((0,s.normalizePathCase)(this.fileSystem,(0,s.normalizePath)(U))));for(;this._shouldWalkUp(L,N,D);){this._getCompletionSuggestionsAbsolute(U,D,L,M,T,!1);let ce;if([ce,L]=this._tryWalkUp(L),!ce)break}return T}getConfigOption(){return this._configOptions}_getCompletionSuggestionsStrict(U,D,M){const T=[],N=new Set;if(M.leadingDots>0)this._getCompletionSuggestionsRelative(U,D,M,N);else{M.nameParts.length>0&&this._getCompletionSuggestionsTypeshedPath(U,D,M,!0,N),D.root&&this._getCompletionSuggestionsAbsolute(U,D,D.root,M,N);for(const L of D.extraPaths)this._getCompletionSuggestionsAbsolute(U,D,L,M,N);this._configOptions.stubPath&&this._getCompletionSuggestionsAbsolute(U,D,this._configOptions.stubPath,M,N),this._getCompletionSuggestionsTypeshedPath(U,D,M,!1,N);const J=this.getPythonSearchPaths(T);for(const L of J)this._getCompletionSuggestionsAbsolute(U,D,L,M,N)}return N}getSourceFilesFromStub(U,D,M){const T=[];if(this._cachedImportResults.forEach(N=>{N.forEach(J=>{if(J.isStubFile&&J.isImportFound&&J.nonStubImportResult&&J.resolvedPaths[J.resolvedPaths.length-1]===U&&J.nonStubImportResult.isImportFound){const L=J.nonStubImportResult.resolvedPaths[J.nonStubImportResult.resolvedPaths.length-1];(L.endsWith(".py")||L.endsWith(".pyi"))&&T.push(L)}})}),T.length===0){const N=(0,s.changeAnyExtension)(U,".py");this.dirExistsCached(N)&&T.push(N)}if(T.length===0){const N=this.getImportRoots(D),J=[];for(const L of N)if((0,s.containsPath)(L,U,!0)){const ce=(0,s.getRelativePathComponentsFromDirectory)(L,U,!0);if(ce.length>1){ce[1].endsWith(a.stubsSuffix)&&(ce[1]=ce[1].substr(0,ce[1].length-a.stubsSuffix.length));const ue=(0,s.combinePathComponents)(ce);ue&&J.push(ue)}}for(const L of J)for(const ce of N){const ue=(0,s.resolvePaths)(ce,L);let W=(0,s.changeAnyExtension)(ue,".py");if(this.fileExistsCached(W))T.push(W);else{const Y=(0,s.stripFileExtension)(W);Y.endsWith("__init__")?(W=Y.substr(0,Y.length-9)+".py",this.fileExistsCached(W)&&T.push(W)):(W=(0,s.combinePaths)(Y,"__init__.py"),this.fileExistsCached(W)&&T.push(W))}}}return T}getModuleNameForImport(U,D){const M=(0,r.getOrAdd)(this._cachedModuleNameResults,D.root,()=>new Map);return(0,r.getOrAdd)(M,U,()=>this._getModuleNameForImport(U,D))}_getModuleNameForImport(U,D){let M,T=0,N=!1;const J=[],L=this._getStdlibTypeshedPath(D,J);if(L&&(M=this.getModuleNameFromPath(L,U),M)){const Y={leadingDots:0,nameParts:M.split("."),importedSymbols:void 0};if(this._isStdlibTypeshedStubValidForVersion(Y,D,[]))return{moduleName:M,importType:T,isLocalTypingsFile:N}}D.root&&(M=this.getModuleNameFromPath(D.root,U),T=2);for(const Y of D.extraPaths){const ee=this.getModuleNameFromPath(Y,U);(!M||ee&&ee.length<M.length)&&(M=ee,T=2)}if(this._configOptions.stubPath){const Y=this.getModuleNameFromPath(this._configOptions.stubPath,U);(!M||Y&&Y.length<M.length)&&(M=Y,T=2,N=!0)}const ce=this._getThirdPartyTypeshedPath(D,J);if(ce){const Y=this.getModuleNameFromPath(ce,U,!0);(!M||Y&&Y.length<M.length)&&(M=Y,T=1)}const ue=this.getTypeshedPathEx(D,J);if(ue){const Y=this.getModuleNameFromPath(ue,U);(!M||Y&&Y.length<M.length)&&(M=Y,T=1)}const W=this.getPythonSearchPaths(J);for(const Y of W){const ee=this.getModuleNameFromPath(Y,U);(!M||ee&&ee.length<M.length)&&(M=ee,T=1)}return M?{moduleName:M,importType:T,isLocalTypingsFile:N}:{moduleName:"",importType:2,isLocalTypingsFile:N}}getTypeshedStdLibPath(U){const D=[];return this._getStdlibTypeshedPath(U,D)}getImportRoots(U,D=!1){const M=[],T=[],N=this._getStdlibTypeshedPath(U,M);if(N&&T.push(N),U.root&&T.push(U.root),(0,r.appendArray)(T,U.extraPaths),this._configOptions.stubPath&&T.push(this._configOptions.stubPath),D){const ce=this._getThirdPartyTypeshedPath(U,M);ce&&T.push((0,s.combinePaths)(ce,"..."))}else{const ce=this._getThirdPartyTypeshedPackageRoots(U,M);(0,r.appendArray)(T,ce)}const J=this.getTypeshedPathEx(U,M);J&&T.push(J);const L=this.getPythonSearchPaths(M);return L.length>0&&(0,r.appendArray)(T,L),T}readdirEntriesCached(U){const D=this._cachedEntriesForPath.get(U);if(D)return D;let M;try{M=this.fileSystem.readdirEntriesSync(U)}catch{M=[]}return this._cachedEntriesForPath.set(U,M),M}fileExistsCached(U){var D,M;const T=this._splitPath(U);if(!T[0]||!T[1])return this.fileSystem.existsSync(U)&&(M=(D=(0,s.tryStat)(this.fileSystem,U))===null||D===void 0?void 0:D.isFile())!==null&&M!==void 0?M:!1;const J=this.readdirEntriesCached(T[0]).find(L=>L.name===T[1]);if(J!=null&&J.isFile())return!0;if(J!=null&&J.isSymbolicLink()){const L=(0,s.tryRealpath)(this.fileSystem,U);if(L&&this.fileSystem.existsSync(L)&&(0,s.isFile)(this.fileSystem,L))return!0}return!1}dirExistsCached(U){var D,M;const T=this._splitPath(U);if(!T[0]||!T[1])return this.fileSystem.existsSync(U)&&(M=(D=(0,s.tryStat)(this.fileSystem,U))===null||D===void 0?void 0:D.isDirectory())!==null&&M!==void 0?M:!1;const J=this.readdirEntriesCached(T[0]).find(L=>L.name===T[1]);if(J!=null&&J.isDirectory())return!0;if(J!=null&&J.isSymbolicLink()){const L=(0,s.tryRealpath)(this.fileSystem,U);if(L&&this.fileSystem.existsSync(L)&&(0,s.isDirectory)(this.fileSystem,L))return!0}return!1}ensurePartialStubPackages(U){if(!(this.fileSystem instanceof y.PyrightFileSystem)||this.fileSystem.isPartialStubPackagesScanned(U))return!1;const D=this.fileSystem,M=[],T=[];return N(this._configOptions.stubPath),N(U.root),U.extraPaths.forEach(J=>N(J)),N(this.getTypeshedPathEx(U,M)),this.getPythonSearchPaths(M).forEach(J=>N(J)),this.fileSystem.processPartialStubPackages(T,this.getImportRoots(U)),this._invalidateFileSystemCache(),!0;function N(J){!J||D.isPathScanned(J)||T.push(J)}}addResultsToCache(U,D,M,T){return(0,r.getOrAdd)(this._cachedImportResults,U.root,()=>new Map).set(D,M),this.filterImplicitImports(M,T)}resolveAbsoluteImport(U,D,M,T,N,J=!1,L=!1,ce=!1,ue=!0,W=!1){if(ue&&ce){const Y=this._resolveAbsoluteImport(U,D,M,T,N,J,!1,!0,!0,!0);if(Y.packageDirectory&&(!Y.isNamespacePackage||Y.isImportFound))return Y}return this._resolveAbsoluteImport(U,D,M,T,N,J,L,!1,ue,W)}_invalidateFileSystemCache(){this._cachedEntriesForPath.clear()}_splitPath(U){const D=(0,s.getPathComponents)(U);if(D.length<=1)return[U,""];const M=(0,s.combinePathComponents)(D.slice(0,-1)),T=D[D.length-1];return[M,T]}_resolveAbsoluteImport(U,D,M,T,N,J,L,ce,ue,W){ce?N.push(`Attempting to resolve stub package using root path '${U}'`):N.push(`Attempting to resolve using root path '${U}'`);const Y=[];let ee=U,H=!1,le=!1,R=!1,ae=!1,re=[],d,k;if(M.nameParts.length===0){const E="__init__",$=(0,s.combinePaths)(ee,E+".py"),B=(0,s.combinePaths)(ee,E+".pyi");ue&&this.fileExistsCached(B)?(N.push(`Resolved import with file '${B}'`),Y.push(B),R=!0):this.fileExistsCached($)?(N.push(`Resolved import with file '${$}'`),Y.push($)):(N.push(`Partially resolved import with directory '${ee}'`),Y.push(""),H=!0),re=this._findImplicitImports(T,ee,[$,B])}else for(let E=0;E<M.nameParts.length;E++){const $=E===0,B=E===M.nameParts.length-1;ee=(0,s.combinePaths)(ee,M.nameParts[E]),ce&&$&&(ee+=a.stubsSuffix,le=!0);const X=this.dirExistsCached(ee);if(X){$&&(d=ee);const ve="__init__",De=(0,s.combinePaths)(ee,ve+".py"),Oe=(0,s.combinePaths)(ee,ve+".pyi");let Je=!1;if(ue&&this.fileExistsCached(Oe)?(N.push(`Resolved import with file '${Oe}'`),Y.push(Oe),B&&(R=!0),Je=!0):this.fileExistsCached(De)&&(N.push(`Resolved import with file '${De}'`),Y.push(De),Je=!0),!k&&W&&this.fileExistsCached((0,s.combinePaths)(ee,"py.typed"))&&(k=(0,m.getPyTypedInfo)(this.fileSystem,ee)),!B){Je||(Y.push(""),H=!0,k=void 0);continue}if(Je){re=this._findImplicitImports(M.nameParts.join("."),ee,[De,Oe]);break}}let Z=(0,s.stripTrailingDirectorySeparator)(ee);const se=(0,s.getFileName)(Z);Z=(0,s.getDirectoryPath)(Z);const _e=(0,s.combinePaths)(Z,se+".py"),be=(0,s.combinePaths)(Z,se+".pyi");if(ue&&this.fileExistsCached(be))N.push(`Resolved import with file '${be}'`),Y.push(be),B&&(R=!0);else if(this.fileExistsCached(_e))N.push(`Resolved import with file '${_e}'`),Y.push(_e);else{if(L&&this.dirExistsCached(Z)){const De=this._getFilesInDirectory(Z).find(Oe=>this._isNativeModuleFileName(se,Oe));if(De){const Oe=(0,s.combinePaths)(Z,De);ae=this._resolveNativeModuleStub(Oe,D,T,M,N,Y)}}!ae&&X?(N.push(`Partially resolved import with directory '${ee}'`),Y.push(""),B&&(re=this._findImplicitImports(T,ee,[_e,be]),H=!0)):ae&&N.push(`Did not find file '${be}' or '${_e}'`)}break}let oe;const ye=Y.length>0&&Y.length<M.nameParts.length;return J?oe=Y.length>0:oe=Y.length>=M.nameParts.length,{importName:T,isRelative:!1,isNamespacePackage:H,isStubPackage:le,isImportFound:oe,isPartlyResolved:ye,importFailureInfo:N,importType:2,resolvedPaths:Y,searchPath:U,isStubFile:R,isNativeLib:ae,implicitImports:re,pyTypedInfo:k,filteredImplicitImports:re,packageDirectory:d}}getTypeshedPathEx(U,D){}resolveImportEx(U,D,M,T,N=[],J=!0){}resolveNativeImportEx(U,D,M=[]){}getNativeModuleName(U){const D=(0,s.getFileExtension)(U,!1).toLowerCase();if(this._isNativeModuleFileExtension(D))return(0,s.stripFileExtension)((0,s.stripFileExtension)(U))}_lookUpResultsInCache(U,D,M){const T=this._cachedImportResults.get(U.root);if(!T)return;const N=T.get(D);if(!!N)return this.filterImplicitImports(N,M)}_isNamespacePackageResolved(U,D){if(U.importedSymbols){if(!U.importedSymbols.some(M=>D.some(T=>T.name===M)))return!1}else if(D.length===0)return!1;return!0}getModuleNameFromPath(U,D,M=!1){U=(0,s.ensureTrailingDirectorySeparator)(U);let T=(0,s.stripFileExtension)(D);if(this._isNativeModuleFileExtension((0,s.getFileExtension)(D))&&(T=(0,s.stripFileExtension)(T)),!T.startsWith(U))return;T.endsWith("__init__")&&(T=T.substr(0,T.length-9));const N=T.substr(U.length),J=(0,s.getPathComponents)(N);if(J.shift(),M){if(J.length===0)return;J.shift()}if(J.length!==0&&(J[0].endsWith(a.stubsSuffix)&&(J[0]=J[0].substr(0,J[0].length-a.stubsSuffix.length)),!J.some(L=>!this._isIdentifier(L))))return J.join(".")}_resolveBestAbsoluteImport(U,D,M,T){const N=this.formatImportName(M),J=[];if(T&&this._configOptions.stubPath){J.push(`Looking in stubPath '${this._configOptions.stubPath}'`);const Y=this.resolveAbsoluteImport(this._configOptions.stubPath,D,M,N,J,void 0,!1,!0,T,!1);if(Y.isImportFound)if(Y.importType=2,Y.isLocalTypingsFile=!0,Y.isNamespacePackage&&!Y.resolvedPaths[Y.resolvedPaths.length-1]){if(this._isNamespacePackageResolved(M,Y.implicitImports))return Y}else return Y}let L,ce;D.root&&(J.push(`Looking in root directory of execution environment '${D.root}'`),ce=this.resolveAbsoluteImport(D.root,D,M,N,J,void 0,!0,!0,T,!1),L=ce);for(const Y of D.extraPaths)J.push(`Looking in extraPath '${Y}'`),ce=this.resolveAbsoluteImport(Y,D,M,N,J,void 0,!0,!0,T,!1),L=this._pickBestImport(L,ce,M);const ue=this.getPythonSearchPaths(J);if(ue.length>0)for(const Y of ue){J.push(`Looking in python search path '${Y}'`);const ee=this.resolveAbsoluteImport(Y,D,M,N,J,G,!0,!0,T,!0);ee&&(ee.importType=1,L=this._pickBestImport(L,ee,M))}else J.push("No python interpreter search path");if(D.root!==this._getTypeshedRoot(D,J)&&(L==null?void 0:L.pyTypedInfo)&&!L.isPartlyResolved)return L;const W=this.resolveImportEx(U,D,M,N,J,T);if(W)return W;if(T&&M.nameParts.length>0){J.push("Looking for typeshed stdlib path");const Y=this._findTypeshedPath(D,M,N,!0,J);if(Y)return Y.isTypeshedFile=!0,Y;J.push("Looking for typeshed third-party path");const ee=this._findTypeshedPath(D,M,N,!1,J);ee&&(ee.isTypeshedFile=!0,L=this._pickBestImport(L,ee,M))}return L}_pickBestImport(U,D,M){if(!U)return D;if(!D)return U;if(D.isImportFound){if(!U.isImportFound||U.isNamespacePackage&&!D.isNamespacePackage)return D;if(U.importType===2&&!U.isNamespacePackage)return U;if(U.isNamespacePackage&&D.isNamespacePackage&&M.importedSymbols&&!this._isNamespacePackageResolved(M,U.implicitImports)&&this._isNamespacePackageResolved(M,D.implicitImports))return D;if(U.pyTypedInfo&&!D.pyTypedInfo)return U;if(!U.pyTypedInfo&&D.pyTypedInfo)return D;if(U.isStubFile&&!D.isStubFile)return U;if(!U.isStubFile&&D.isStubFile||U.resolvedPaths.length>D.resolvedPaths.length)return D}else if(D.isPartlyResolved&&U.isNamespacePackage&&!D.isNamespacePackage)return D;return U}_isIdentifier(U){for(let D=0;D<U.length;D++)if(D===0?!(0,f.isIdentifierStartChar)(U.charCodeAt(D)):!(0,f.isIdentifierChar)(U.charCodeAt(D)))return!1;return!0}getPythonSearchPaths(U){if(!this._cachedPythonSearchPaths){const D=(v.findPythonSearchPaths(this.fileSystem,this._configOptions,this.host,U)||[]).map(M=>this.fileSystem.realCasePath(M));this._cachedPythonSearchPaths=[...new Set(D)]}return this._cachedPythonSearchPaths}_findTypeshedPath(U,D,M,T,N){N.push(`Looking for typeshed ${T?v.stdLibFolderName:v.thirdPartyFolderName} path`);let J;if(T){const L=this._getStdlibTypeshedPath(U,N,D);L&&(J=[L])}else J=this._getThirdPartyTypeshedPackagePaths(D,U,N);if(J){for(const L of J)if(this.dirExistsCached(L)){const ce=this.resolveAbsoluteImport(L,U,D,M,N);if(ce.isImportFound)return ce.importType=T?0:1,ce}}N.push("Typeshed path not found")}_buildTypeshedThirdPartyPackageMap(U){this._cachedTypeshedThirdPartyPackagePaths=new Map,U&&this.readdirEntriesCached(U).forEach(M=>{if(M.isDirectory()){const T=(0,s.combinePaths)(U,M.name);this.readdirEntriesCached(T).forEach(N=>{if(N.name!=="@python2"){if(N.isDirectory()){const J=this._cachedTypeshedThirdPartyPackagePaths.get(N.name);J?J.push(T):this._cachedTypeshedThirdPartyPackagePaths.set(N.name,[T])}else if(N.isFile()&&N.name.endsWith(".pyi")){const J=(0,s.stripFileExtension)(N.name),L=this._cachedTypeshedThirdPartyPackagePaths.get(J);L?L.push(T):this._cachedTypeshedThirdPartyPackagePaths.set(J,[T])}}})}});const D=[...this._cachedTypeshedThirdPartyPackagePaths.values()].flatMap(M=>M);this._cachedTypeshedThirdPartyPackageRoots=[...new Set(D)].sort()}_getCompletionSuggestionsTypeshedPath(U,D,M,T,N){const J=[];let L;if(T){const ce=this._getStdlibTypeshedPath(D,J,M);ce&&(L=[ce])}else{L=this._getThirdPartyTypeshedPackagePaths(M,D,J,!1);const ce=this.getTypeshedPathEx(D,J);ce&&(L=L!=null?L:[],L.push(ce))}!L||L.forEach(ce=>{this.dirExistsCached(ce)&&this._getCompletionSuggestionsAbsolute(U,D,ce,M,N)})}_getStdlibTypeshedPath(U,D,M){const T=this._getTypeshedSubdirectory(!0,U,D);if(!(T&&M&&!this._isStdlibTypeshedStubValidForVersion(M,U,D)))return T}_getThirdPartyTypeshedPath(U,D){return this._getTypeshedSubdirectory(!1,U,D)}_isStdlibTypeshedStubValidForVersion(U,D,M){this._cachedTypeshedStdLibModuleVersions||(this._cachedTypeshedStdLibModuleVersions=this._readTypeshedStdLibVersions(D,M));for(let T=1;T<=U.nameParts.length;T++){const N=U.nameParts.slice(0,T),J=this._cachedTypeshedStdLibModuleVersions.get(N.join("."));if(J&&(D.pythonVersion<J.min||J.max!==void 0&&D.pythonVersion>J.max))return!1}return!0}_readTypeshedStdLibVersions(U,D){const M=new Map,T=this._getTypeshedSubdirectory(!0,U,D);if(T){const N=(0,s.combinePaths)(T,"VERSIONS");try{const J=this.fileSystem.statSync(N);J.size>0&&J.size<256*1024?this.fileSystem.readFileSync(N,"utf8").split(/\r?\n/).forEach(ce=>{const W=ce.split("#")[0].split(":");if(W.length!==2)return;const Y=W[1].split("-");if(Y.length>2)return;const ee=W[0].trim();if(!ee)return;let H=Y[0].trim();H.endsWith("+")&&(H=H.substr(0,H.length-1));let le=(0,l.versionFromString)(H);le||(le=l.PythonVersion.V3_0);let R;Y.length>1&&(R=(0,l.versionFromString)(Y[1].trim())),M.set(ee,{min:le,max:R})}):D.push("Typeshed stdlib VERSIONS file is unexpectedly large")}catch(J){D.push(`Could not read typeshed stdlib VERSIONS file: '${JSON.stringify(J)}'`)}}return M}_getThirdPartyTypeshedPackagePaths(U,D,M,T=!0){const N=this._getThirdPartyTypeshedPath(D,M);this._cachedTypeshedThirdPartyPackagePaths||this._buildTypeshedThirdPartyPackageMap(N);const J=U.nameParts.length>0?U.nameParts[0]:"";return T?this._cachedTypeshedThirdPartyPackagePaths.get(J):J?(0,r.flatten)((0,r.getMapValues)(this._cachedTypeshedThirdPartyPackagePaths,L=>L.startsWith(J))):[]}_getThirdPartyTypeshedPackageRoots(U,D){const M=this._getThirdPartyTypeshedPath(U,D);return this._cachedTypeshedThirdPartyPackagePaths||this._buildTypeshedThirdPartyPackageMap(M),this._cachedTypeshedThirdPartyPackageRoots}_getTypeshedRoot(U,D){if(this._cachedTypeshedRoot!==void 0)return this._cachedTypeshedRoot;let M="";if(this._configOptions.typeshedPath){const T=this._configOptions.typeshedPath;this.dirExistsCached(T)&&(M=T)}else{const T=this.getPythonSearchPaths(D);for(const N of T){const J=(0,s.combinePaths)(N,"typeshed");if(this.dirExistsCached(J)){M=J;break}}}return M||(M=v.getTypeShedFallbackPath(this.fileSystem)||""),this._cachedTypeshedRoot=M,M}_getTypeshedSubdirectory(U,D,M){if(U){if(this._cachedTypeshedStdLibPath!==void 0)return this._cachedTypeshedStdLibPath}else if(this._cachedTypeshedThirdPartyPath!==void 0)return this._cachedTypeshedThirdPartyPath;let T=this._getTypeshedRoot(D,M);if(T=v.getTypeshedSubdirectory(T,U),!!this.dirExistsCached(T))return U?this._cachedTypeshedStdLibPath=T:this._cachedTypeshedThirdPartyPath=T,T}_resolveRelativeImport(U,D,M,T,N){N.push("Attempting to resolve relative import");const J=(0,p.getDirectoryLeadingDotsPointsTo)((0,s.getDirectoryPath)(U),M.leadingDots);if(!J){N.push(`Invalid relative path '${T}'`);return}const L=this.resolveAbsoluteImport(J,D,M,T,N,!1,!0);return L&&L.isStubFile&&(L.nonStubImportResult=this.resolveAbsoluteImport(J,D,M,T,N,!1,!0,!1,!1)||{importName:T,isRelative:!0,isImportFound:!1,isPartlyResolved:!1,isNamespacePackage:!1,isStubPackage:!1,importFailureInfo:N,resolvedPaths:[],importType:2,isStubFile:!1,isNativeLib:!1,implicitImports:[],filteredImplicitImports:[],nonStubImportResult:void 0}),this.filterImplicitImports(L,M.importedSymbols)}_getCompletionSuggestionsRelative(U,D,M,T){const N=(0,p.getDirectoryLeadingDotsPointsTo)((0,s.getDirectoryPath)(U),M.leadingDots);!N||this._getCompletionSuggestionsAbsolute(U,D,N,M,T)}_getFilesInDirectory(U){const D=this.readdirEntriesCached(U),M=D.filter(T=>T.isFile()).map(T=>T.name);return D.forEach(T=>{var N;const J=(0,s.combinePaths)(U,T.name);T.isSymbolicLink()&&((N=(0,s.tryStat)(this.fileSystem,J))===null||N===void 0?void 0:N.isFile())&&M.push(T.name)}),M}_getCompletionSuggestionsAbsolute(U,D,M,T,N,J=!0){let L=M;const ce=T.nameParts.map(Y=>Y);T.hasTrailingDot&&ce.push("");const ue=T.leadingDots,W=ce.slice(0,-1);if(ce.length===0)this._addFilteredSuggestionsAbsolute(U,D,L,"",N,ue,W,J);else for(let Y=0;Y<ce.length&&(Y===ce.length-1&&this._addFilteredSuggestionsAbsolute(U,D,L,ce[Y],N,ue,W,J),L=(0,s.combinePaths)(L,ce[Y]),!!this.dirExistsCached(L));Y++);}_addFilteredSuggestionsAbsolute(U,D,M,T,N,J,L,ce){const ue=(0,s.getFileSystemEntriesFromDirEntries)(this.readdirEntriesCached(M),this.fileSystem,M);ue.files.forEach(W=>{const Y=(0,s.getFileExtension)(W,!1).toLowerCase(),ee=(0,s.stripFileExtension)(W,!0);if(t.supportedFileExtensions.some(H=>H===Y)){if(ee==="__init__"||T&&!u.isPatternInSymbol(T,ee)||!this._isUniqueValidSuggestion(ee,N)||!this._isResolvableSuggestion(ee,J,L,U,D,ce))return;N.add(ee)}}),ue.directories.forEach(W=>{T&&!W.startsWith(T)||!this._isUniqueValidSuggestion(W,N)||!this._isResolvableSuggestion(W,J,L,U,D,ce)||N.add(W)})}_isResolvableSuggestion(U,D,M,T,N,J){const L={leadingDots:D,nameParts:[...M,U],importedSymbols:[]};if(J){const ce=this.formatImportName(L),ue=[];return this._resolveImportStrict(ce,T,N,L,ue).isImportFound}return this._resolveImport(T,N,L).isImportFound}_isUniqueValidSuggestion(U,D){return!(D.has(U)||/[.-]/.test(U)||(0,V.isDunderName)(U)&&U!=="__future__")}filterImplicitImports(U,D){if(D===void 0){const N=Object.assign({},U);return N.filteredImplicitImports=[],N}if(D.length===0||U.implicitImports.length===0)return U;const M=U.implicitImports.filter(N=>D.some(J=>J===N.name));if(M.length===U.implicitImports.length)return U;const T=Object.assign({},U);return T.filteredImplicitImports=M,T}_findImplicitImports(U,D,M){const T=new Map,N=(0,s.getFileSystemEntriesFromDirEntries)(this.readdirEntriesCached(D),this.fileSystem,D);for(const J of N.files){const L=(0,s.getFileExtension)(J);let ce,ue=!1;if(L===".py"||L===".pyi")ce=(0,s.stripFileExtension)(J);else if(this._isNativeModuleFileExtension(L)&&!this.fileExistsCached(`${J}.py`)&&!this.fileExistsCached(`${J}.pyi`))ce=J.substr(0,J.indexOf(".")),ue=!0;else continue;const W=(0,s.combinePaths)(D,J);if(!M.find(Y=>Y===W)){const Y={isStubFile:J.endsWith(".pyi"),isNativeLib:ue,name:ce,path:W},ee=T.get(Y.name);if(!ee||!ee.isStubFile){if(ue){const H=(0,s.combinePaths)(D,J),le=this.resolveNativeImportEx(H,`${U}.${ce}`,[]);le&&(Y.path=le,Y.isNativeLib=!1)}T.set(Y.name,Y)}}}for(const J of N.directories){const L=(0,s.combinePaths)(D,J,"__init__.py"),ce=L+"i";let ue=!1,W="";if(this.fileExistsCached(ce)?(ue=!0,W=ce):this.fileExistsCached(L)&&(W=L),W&&!M.find(Y=>Y===W)){const Y={isStubFile:ue,isNativeLib:!1,name:J,path:W};T.set(Y.name,Y)}}return[...T.values()]}formatImportName(U){return".".repeat(U.leadingDots)+U.nameParts.join(".")}_resolveNativeModuleStub(U,D,M,T,N,J){let L=M;if(T.leadingDots>0){const ue=this.getModuleNameForImport(U,D);L=ue.moduleName.length>0?ue.moduleName:L}const ce=this.resolveNativeImportEx(U,L,N);return ce?(N.push(`Resolved native import ${M} with stub '${ce}'`),J.push(ce),!1):(N.push(`Resolved import with file '${U}'`),J.push(U),!0)}_isNativeModuleFileName(U,D){const M=(0,s.getFileExtension)(D,!1).toLowerCase(),T=(0,s.stripFileExtension)(D,!0);return this._isNativeModuleFileExtension(M)&&(0,o.equateStringsCaseInsensitive)(U,T)}_isNativeModuleFileExtension(U){return P.some(D=>D===U)}_tryWalkUp(U){return(0,s.isDiskPathRoot)(U)?[!1,""]:[!0,(0,s.ensureTrailingDirectorySeparator)((0,s.normalizePathCase)(this.fileSystem,(0,s.normalizePath)((0,s.combinePaths)(U,".."))))]}_shouldWalkUp(U,D,M){return U.length>D.length||U===D&&!M.root}getParentImportResolutionRoot(U,D){return D?(0,s.ensureTrailingDirectorySeparator)((0,s.normalizePathCase)(this.fileSystem,(0,s.normalizePath)(D))):(0,s.ensureTrailingDirectorySeparator)((0,s.getDirectoryPath)(U))}}t.ImportResolver=te})(Ah);var hk={},k6={},D6=Object.freeze(Object.defineProperty({__proto__:null,default:k6},Symbol.toStringTag,{value:"Module"})),mk=Id(D6),Qh={};(function(t){var e=Te&&Te.__createBinding||(Object.create?function(b,v,m,V){V===void 0&&(V=m),Object.defineProperty(b,V,{enumerable:!0,get:function(){return v[m]}})}:function(b,v,m,V){V===void 0&&(V=m),b[V]=v[m]}),n=Te&&Te.__setModuleDefault||(Object.create?function(b,v){Object.defineProperty(b,"default",{enumerable:!0,value:v})}:function(b,v){b.default=v}),i=Te&&Te.__importStar||function(b){if(b&&b.__esModule)return b;var v={};if(b!=null)for(var m in b)m!=="default"&&Object.prototype.hasOwnProperty.call(b,m)&&e(v,b,m);return n(v,b),v};Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.ConsoleWithLogLevel=t.StderrConsoleWithLevel=t.StderrConsole=t.StandardConsoleWithLevel=t.StandardConsole=t.NullConsole=t.LogLevel=void 0;const r=i(qt);var a;(function(b){b.Error="error",b.Warn="warn",b.Info="info",b.Log="log"})(a=t.LogLevel||(t.LogLevel={}));class s{constructor(){this.logCount=0,this.infoCount=0,this.warnCount=0,this.errorCount=0}log(v){this.logCount++}info(v){this.infoCount++}warn(v){this.warnCount++}error(v){this.errorCount++}}t.NullConsole=s;class l{log(v){console.info(v)}info(v){console.info(v)}warn(v){console.warn(v)}error(v){console.error(v)}}t.StandardConsole=l;class o extends l{constructor(v=a.Log){super(),this._maxLevel=v}get level(){return this._maxLevel}}t.StandardConsoleWithLevel=o;class u{log(v){console.error(v)}info(v){console.error(v)}warn(v){console.error(v)}error(v){console.error(v)}}t.StderrConsole=u;class f extends u{constructor(v=a.Log){super(),this._maxLevel=v}get level(){return this._maxLevel}}t.StderrConsoleWithLevel=f;class y{constructor(v,m=""){this._console=v,this._name=m,this._levelMap=new Map([[a.Error,0],[a.Warn,1],[a.Info,2],[a.Log,3]]),this._maxLevel=2}get level(){switch(this._maxLevel){case 0:return a.Error;case 1:return a.Warn;case 2:return a.Info}return a.Log}set level(v){let m=this._levelMap.get(v);m===void 0&&(m=this._levelMap.get(a.Info)),this._maxLevel=m}error(v){this._log(a.Error,`${this._prefix}${v}`)}warn(v){this._log(a.Warn,`${this._prefix}${v}`)}info(v){this._log(a.Info,`${this._prefix}${v}`)}log(v){this._log(a.Log,`${this._prefix}${v}`)}get _prefix(){return this._name?`(${this._name}) `:""}_log(v,m){this._getNumericalLevel(v)>this._maxLevel||p(this._console,v,m)}_getNumericalLevel(v){const m=this._levelMap.get(v);return r.assert(m!==void 0,"Logger: unknown log level."),m!==void 0?m:2}}t.ConsoleWithLogLevel=y;function p(b,v,m){switch(v){case a.Log:b.log(m);break;case a.Info:b.info(m);break;case a.Warn:b.warn(m);break;case a.Error:b.error(m);break;default:r.fail(`${v} is not expected`)}}t.log=p})(Qh);var Nd={},ji={};Object.defineProperty(ji,"__esModule",{value:!0});ji.timingStats=ji.TimingStats=ji.TimingStat=ji.Duration=void 0;class $p{constructor(){this._startTime=Date.now()}getDurationInMilliseconds(){return Date.now()-this._startTime}getDurationInSeconds(){return this.getDurationInMilliseconds()/1e3}}ji.Duration=$p;class Ms{constructor(){this.totalTime=0,this.callCount=0,this.isTiming=!1}timeOperation(e){if(this.callCount++,this.isTiming)return e();{this.isTiming=!0;const n=new $p,i=e();return this.totalTime+=n.getDurationInMilliseconds(),this.isTiming=!1,i}}subtractFromTime(e){if(this.isTiming){this.isTiming=!1;const n=new $p;e(),this.totalTime-=n.getDurationInMilliseconds(),this.isTiming=!0}else e()}printTime(){const e=this.totalTime/1e3;return(Math.round(e*100)/100).toString()+"sec"}}ji.TimingStat=Ms;class yk{constructor(){this.totalDuration=new $p,this.findFilesTime=new Ms,this.readFileTime=new Ms,this.tokenizeFileTime=new Ms,this.parseFileTime=new Ms,this.resolveImportsTime=new Ms,this.cycleDetectionTime=new Ms,this.bindTime=new Ms,this.typeCheckerTime=new Ms,this.typeEvaluationTime=new Ms}printSummary(e){e.info(`Completed in ${this.totalDuration.getDurationInSeconds()}sec`)}printDetails(e){e.info(""),e.info("Timing stats"),e.info("Find Source Files:    "+this.findFilesTime.printTime()),e.info("Read Source Files:    "+this.readFileTime.printTime()),e.info("Tokenize:             "+this.tokenizeFileTime.printTime()),e.info("Parse:                "+this.parseFileTime.printTime()),e.info("Resolve Imports:      "+this.resolveImportsTime.printTime()),e.info("Bind:                 "+this.bindTime.printTime()),e.info("Check:                "+this.typeCheckerTime.printTime()),e.info("Detect Cycles:        "+this.cycleDetectionTime.printTime())}getTotalDuration(){return this.totalDuration.getDurationInSeconds()}}ji.TimingStats=yk;ji.timingStats=new yk;Object.defineProperty(Nd,"__esModule",{value:!0});Nd.LogTracker=void 0;const yS=Qh,us=ji,P6=2e3;class A6{constructor(e,n){this._console=e,this._prefix=n,this._dummyState=new gS,this._indentation="",this._previousTitles=[]}log(e,n,i=-1,r=!1){if(this._console===void 0)return n(this._dummyState);const a=this._console.level;if(a===void 0||a!==yS.LogLevel.Log&&a!==yS.LogLevel.Info)return n(this._dummyState);const s=this._indentation;this._previousTitles.push(`${s}${e} ...`),this._indentation+="  ";const l=new gS;try{return n(l)}finally{const o=l.duration;if(this._indentation=s,this._previousTitles.length>0&&(l.isSuppressed()||o<=i))this._previousTitles.pop();else{this._printPreviousTitles();let u=`[${this._prefix}] ${this._indentation}${e}${l.get()} (${o}ms)`;r&&l.fileReadTotal+l.tokenizeTotal+l.parsingTotal+l.resolveImportsTotal+l.bindingTotal>0&&(u+=` [f:${l.fileReadTotal}, t:${l.tokenizeTotal}, p:${l.parsingTotal}, i:${l.resolveImportsTotal}, b:${l.bindingTotal}]`),this._console.log(u),o>=P6&&this._console.info(`[${this._prefix}] Long operation: ${e} (${o}ms)`)}}}_printPreviousTitles(){if(this._previousTitles.pop(),!(this._previousTitles.length<=0)){for(const e of this._previousTitles)this._console.log(`[${this._prefix}] ${e}`);this._previousTitles.length=0}}}Nd.LogTracker=A6;class gS{constructor(){this._start=new us.Duration,this._startFile=us.timingStats.readFileTime.totalTime,this._startToken=us.timingStats.tokenizeFileTime.totalTime,this._startParse=us.timingStats.parseFileTime.totalTime,this._startImport=us.timingStats.resolveImportsTime.totalTime,this._startBind=us.timingStats.bindTime.totalTime}get duration(){return this._start.getDurationInMilliseconds()}get fileReadTotal(){return us.timingStats.readFileTime.totalTime-this._startFile}get tokenizeTotal(){return us.timingStats.tokenizeFileTime.totalTime-this._startToken}get parsingTotal(){return us.timingStats.parseFileTime.totalTime-this._startParse}get resolveImportsTotal(){return us.timingStats.resolveImportsTime.totalTime-this._startImport}get bindingTotal(){return us.timingStats.bindTime.totalTime-this._startBind}add(e){e&&(this._addendum=e)}get(){return this._addendum?` [${this._addendum}]`:""}suppress(){this._suppress=!0}isSuppressed(){return!!this._suppress}}var Ws={},Jh={},Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.isIntrinsicDeclaration=Bn.isSpecialBuiltInClassDeclaration=Bn.isAliasDeclaration=Bn.isVariableDeclaration=Bn.isParameterDeclaration=Bn.isClassDeclaration=Bn.isFunctionDeclaration=void 0;function M6(t){return t.type===3}Bn.isFunctionDeclaration=M6;function N6(t){return t.type===4}Bn.isClassDeclaration=N6;function R6(t){return t.type===2}Bn.isParameterDeclaration=R6;function O6(t){return t.type===1}Bn.isVariableDeclaration=O6;function x6(t){return t.type===6}Bn.isAliasDeclaration=x6;function L6(t){return t.type===5}Bn.isSpecialBuiltInClassDeclaration=L6;function z6(t){return t.type===0}Bn.isIntrinsicDeclaration=z6;var Sn={},ze={},ws={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SetNode=t.DictionaryExpandEntryNode=t.DictionaryKeyEntryNode=t.DictionaryNode=t.StringListNode=t.FormatStringNode=t.StringNode=t.NumberNode=t.EllipsisNode=t.ConstantNode=t.NameNode=t.LambdaNode=t.MemberAccessNode=t.YieldFromNode=t.YieldNode=t.SliceNode=t.IndexNode=t.ListComprehensionNode=t.CallNode=t.TupleNode=t.UnpackNode=t.TernaryNode=t.AwaitNode=t.AugmentedAssignmentNode=t.FunctionAnnotationNode=t.TypeAnnotationNode=t.AssignmentNode=t.AssignmentExpressionNode=t.BinaryOperationNode=t.UnaryOperationNode=t.ErrorNode=t.isExpressionNode=t.StatementListNode=t.DecoratorNode=t.WithItemNode=t.WithNode=t.ClassNode=t.ParameterNode=t.FunctionNode=t.ExceptNode=t.TryNode=t.ListComprehensionIfNode=t.ListComprehensionForNode=t.ForNode=t.WhileNode=t.IfNode=t.SuiteNode=t.ModuleNode=t.extendRange=t.getNextNodeId=void 0,t.PatternValueNode=t.PatternMappingExpandEntryNode=t.PatternMappingKeyEntryNode=t.PatternMappingNode=t.PatternCaptureNode=t.PatternClassArgumentNode=t.PatternClassNode=t.PatternLiteralNode=t.PatternAsNode=t.PatternSequenceNode=t.CaseNode=t.MatchNode=t.RaiseNode=t.ReturnNode=t.ContinueNode=t.BreakNode=t.AssertNode=t.NonlocalNode=t.GlobalNode=t.ImportFromAsNode=t.ImportFromNode=t.ImportAsNode=t.ModuleNameNode=t.ImportNode=t.PassNode=t.DelNode=t.ArgumentNode=t.ListNode=void 0;const e=Rn;let n=1;function i(){return n++}t.getNextNodeId=i;function r(s,l){l.start<s.start&&(s.length+=s.start-l.start,s.start=l.start),e.TextRange.getEnd(l)>e.TextRange.getEnd(s)&&(s.length=e.TextRange.getEnd(l)-s.start)}t.extendRange=r,function(s){function l(o){return{start:o.start,length:o.length,nodeType:36,id:n++,statements:[]}}s.create=l}(t.ModuleNode||(t.ModuleNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:50,id:n++,statements:[]}}s.create=l}(t.SuiteNode||(t.SuiteNode={})),function(s){function l(o,u,f,y){const p={start:o.start,length:o.length,nodeType:19,id:n++,testExpression:u,ifSuite:f,elseSuite:y};return u.parent=p,f.parent=p,r(p,u),r(p,f),y&&(r(p,y),y.parent=p),p}s.create=l}(t.IfNode||(t.IfNode={})),function(s){function l(o,u,f){const y={start:o.start,length:o.length,nodeType:57,id:n++,testExpression:u,whileSuite:f};return u.parent=y,f.parent=y,r(y,f),y}s.create=l}(t.WhileNode||(t.WhileNode={})),function(s){function l(o,u,f,y){const p={start:o.start,length:o.length,nodeType:26,id:n++,targetExpression:u,iterableExpression:f,forSuite:y};return u.parent=p,f.parent=p,y.parent=p,r(p,y),p}s.create=l}(t.ForNode||(t.ForNode={})),function(s){function l(o,u,f){const y={start:o.start,length:o.length,nodeType:33,id:n++,targetExpression:u,iterableExpression:f};return u.parent=y,f.parent=y,r(y,u),r(y,f),y}s.create=l}(t.ListComprehensionForNode||(t.ListComprehensionForNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:34,id:n++,testExpression:u};return u.parent=f,r(f,u),f}s.create=l}(t.ListComprehensionIfNode||(t.ListComprehensionIfNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:53,id:n++,trySuite:u,exceptClauses:[]};return u.parent=f,r(f,u),f}s.create=l}(t.TryNode||(t.TryNode={})),function(s){function l(o,u,f){const y={start:o.start,length:o.length,nodeType:25,id:n++,exceptSuite:u,isExceptGroup:f};return u.parent=y,r(y,u),y}s.create=l}(t.ExceptNode||(t.ExceptNode={})),function(s){function l(o,u,f){const y={start:o.start,length:o.length,nodeType:28,id:n++,decorators:[],name:u,parameters:[],suite:f};return u.parent=y,f.parent=y,r(y,f),y}s.create=l}(t.FunctionNode||(t.FunctionNode={})),function(s){function l(o,u){return{start:o.start,length:o.length,nodeType:41,id:n++,category:u}}s.create=l}(t.ParameterNode||(t.ParameterNode={})),function(s){function l(u,f,y){const p={start:u.start,length:u.length,nodeType:10,id:n++,decorators:[],name:f,arguments:[],suite:y};return f.parent=p,y.parent=p,r(p,y),p}s.create=l;function o(u){const f={start:u[0].start,length:0,nodeType:10,id:n++,decorators:u,name:{start:u[0].start,length:0,id:0,nodeType:38,token:{type:7,start:0,length:0,comments:[],value:""},value:""},arguments:[],suite:{start:u[0].start,length:0,id:0,nodeType:50,statements:[]}};return u.forEach(y=>{y.parent=f,r(f,y)}),f.name.parent=f,f.suite.parent=f,f}s.createDummyForDecorators=o}(t.ClassNode||(t.ClassNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:58,id:n++,withItems:[],suite:u};return u.parent=f,r(f,u),f}s.create=l}(t.WithNode||(t.WithNode={})),function(s){function l(o){const u={start:o.start,length:o.length,nodeType:59,id:n++,expression:o};return o.parent=u,u}s.create=l}(t.WithItemNode||(t.WithItemNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:13,id:n++,expression:u};return u.parent=f,r(f,u),f}s.create=l}(t.DecoratorNode||(t.DecoratorNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:47,id:n++,statements:[]}}s.create=l}(t.StatementListNode||(t.StatementListNode={}));function a(s){switch(s.nodeType){case 0:case 55:case 7:case 4:case 54:case 6:case 51:case 56:case 52:case 9:case 32:case 24:case 46:case 60:case 61:case 35:case 30:case 38:case 11:case 18:case 40:case 49:case 27:case 48:case 15:case 16:case 31:case 45:return!0;default:return!1}}t.isExpressionNode=a,function(s){function l(o,u,f,y){const p={start:o.start,length:o.length,nodeType:0,id:n++,category:u,child:f,decorators:y};return f&&(f.parent=p,r(p,f)),y&&(y.forEach(b=>{b.parent=p}),y.length>0&&r(p,y[0])),p}s.create=l}(t.ErrorNode||(t.ErrorNode={})),function(s){function l(o,u,f){var y;const p={start:o.start,length:o.length,nodeType:55,id:n++,operator:f,operatorToken:o,expression:u};return u.parent=p,p.maxChildDepth=1+((y=u.maxChildDepth)!==null&&y!==void 0?y:0),r(p,u),p}s.create=l}(t.UnaryOperationNode||(t.UnaryOperationNode={})),function(s){function l(o,u,f,y){var p,b;const v={start:o.start,length:o.length,nodeType:7,id:n++,leftExpression:o,operatorToken:f,operator:y,rightExpression:u};return o.parent=v,u.parent=v,v.maxChildDepth=1+Math.max((p=o.maxChildDepth)!==null&&p!==void 0?p:0,(b=u.maxChildDepth)!==null&&b!==void 0?b:0),r(v,u),v}s.create=l}(t.BinaryOperationNode||(t.BinaryOperationNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:4,id:n++,name:o,rightExpression:u};return o.parent=f,u.parent=f,r(f,u),f}s.create=l}(t.AssignmentExpressionNode||(t.AssignmentExpressionNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:3,id:n++,leftExpression:o,rightExpression:u};return o.parent=f,u.parent=f,r(f,u),f}s.create=l}(t.AssignmentNode||(t.AssignmentNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:54,id:n++,valueExpression:o,typeAnnotation:u};return o.parent=f,u.parent=f,r(f,u),f}s.create=l}(t.TypeAnnotationNode||(t.TypeAnnotationNode={})),function(s){function l(o,u,f,y){const p={start:o.start,length:o.length,nodeType:62,id:n++,isParamListEllipsis:u,paramTypeAnnotations:f,returnTypeAnnotation:y};return f.forEach(b=>{b.parent=p}),y.parent=p,r(p,y),p}s.create=l}(t.FunctionAnnotationNode||(t.FunctionAnnotationNode={})),function(s){function l(o,u,f,y){const p={start:o.start,length:o.length,nodeType:5,id:n++,leftExpression:o,operator:f,rightExpression:u,destExpression:y};return o.parent=p,u.parent=p,y.parent=p,r(p,u),p}s.create=l}(t.AugmentedAssignmentNode||(t.AugmentedAssignmentNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:6,id:n++,expression:u};return u.parent=f,r(f,u),f}s.create=l}(t.AwaitNode||(t.AwaitNode={})),function(s){function l(o,u,f){const y={start:o.start,length:o.length,nodeType:51,id:n++,ifExpression:o,testExpression:u,elseExpression:f};return o.parent=y,u.parent=y,f.parent=y,r(y,f),y}s.create=l}(t.TernaryNode||(t.TernaryNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:56,id:n++,expression:u};return u.parent=f,r(f,u),f}s.create=l}(t.UnpackNode||(t.UnpackNode={})),function(s){function l(o,u){return{start:o.start,length:o.length,nodeType:52,id:n++,expressions:[],enclosedInParens:u}}s.create=l}(t.TupleNode||(t.TupleNode={})),function(s){function l(o,u,f){var y;const p={start:o.start,length:o.length,nodeType:9,id:n++,leftExpression:o,arguments:u,trailingComma:f};return o.parent=p,p.maxChildDepth=1+((y=o.maxChildDepth)!==null&&y!==void 0?y:0),u.length>0&&(u.forEach(b=>{b.parent=p}),r(p,u[u.length-1])),p}s.create=l}(t.CallNode||(t.CallNode={})),function(s){function l(o){const u={start:o.start,length:o.length,nodeType:32,id:n++,expression:o,forIfNodes:[]};return o.parent=u,u}s.create=l}(t.ListComprehensionNode||(t.ListComprehensionNode={})),function(s){function l(o,u,f,y){var p;const b={start:o.start,length:o.length,nodeType:24,id:n++,baseExpression:o,items:u,trailingComma:f};return o.parent=b,u.forEach(v=>{v.parent=b}),r(b,y),b.maxChildDepth=1+((p=o.maxChildDepth)!==null&&p!==void 0?p:0),b}s.create=l}(t.IndexNode||(t.IndexNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:46,id:n++}}s.create=l}(t.SliceNode||(t.SliceNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:60,id:n++,expression:u};return u&&(u.parent=f,r(f,u)),f}s.create=l}(t.YieldNode||(t.YieldNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:61,id:n++,expression:u};return u.parent=f,r(f,u),f}s.create=l}(t.YieldFromNode||(t.YieldFromNode={})),function(s){function l(o,u){var f;const y={start:o.start,length:o.length,nodeType:35,id:n++,leftExpression:o,memberName:u};return o.parent=y,u.parent=y,r(y,u),y.maxChildDepth=1+((f=o.maxChildDepth)!==null&&f!==void 0?f:0),y}s.create=l}(t.MemberAccessNode||(t.MemberAccessNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:30,id:n++,parameters:[],expression:u};return u.parent=f,r(f,u),f}s.create=l}(t.LambdaNode||(t.LambdaNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:38,id:n++,token:o,value:o.value}}s.create=l}(t.NameNode||(t.NameNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:11,id:n++,constType:o.keywordType}}s.create=l}(t.ConstantNode||(t.ConstantNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:18,id:n++}}s.create=l}(t.EllipsisNode||(t.EllipsisNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:40,id:n++,value:o.value,isInteger:o.isInteger,isImaginary:o.isImaginary}}s.create=l}(t.NumberNode||(t.NumberNode={})),function(s){function l(o,u,f){return{start:o.start,length:o.length,nodeType:49,id:n++,token:o,value:u,hasUnescapeErrors:f}}s.create=l}(t.StringNode||(t.StringNode={})),function(s){function l(o,u,f,y){const p={start:o.start,length:o.length,nodeType:27,id:n++,token:o,value:u,hasUnescapeErrors:f,expressions:y};return y.forEach(b=>{b.parent=p}),p}s.create=l}(t.FormatStringNode||(t.FormatStringNode={})),function(s){function l(o){const u={start:o[0].start,length:o[0].length,nodeType:48,id:n++,strings:o};return o.length>0&&(o.forEach(f=>{f.parent=u}),r(u,o[o.length-1])),u}s.create=l}(t.StringListNode||(t.StringListNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:15,id:n++,entries:[]}}s.create=l}(t.DictionaryNode||(t.DictionaryNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:17,id:n++,keyExpression:o,valueExpression:u};return o.parent=f,u.parent=f,r(f,u),f}s.create=l}(t.DictionaryKeyEntryNode||(t.DictionaryKeyEntryNode={})),function(s){function l(o){const u={start:o.start,length:o.length,nodeType:16,id:n++,expandExpression:o};return o.parent=u,u}s.create=l}(t.DictionaryExpandEntryNode||(t.DictionaryExpandEntryNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:45,id:n++,entries:[]}}s.create=l}(t.SetNode||(t.SetNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:31,id:n++,entries:[]}}s.create=l}(t.ListNode||(t.ListNode={})),function(s){function l(o,u,f){const y={start:o?o.start:u.start,length:o?o.length:u.length,nodeType:1,id:n++,valueExpression:u,argumentCategory:f};return u.parent=y,r(y,u),y}s.create=l}(t.ArgumentNode||(t.ArgumentNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:14,id:n++,expressions:[]}}s.create=l}(t.DelNode||(t.DelNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:42,id:n++}}s.create=l}(t.PassNode||(t.PassNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:20,id:n++,list:[]}}s.create=l}(t.ImportNode||(t.ImportNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:37,id:n++,leadingDots:0,nameParts:[]}}s.create=l}(t.ModuleNameNode||(t.ModuleNameNode={})),function(s){function l(o){const u={start:o.start,length:o.length,nodeType:21,id:n++,module:o};return o.parent=u,u}s.create=l}(t.ImportAsNode||(t.ImportAsNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:22,id:n++,module:u,imports:[],isWildcardImport:!1,usesParens:!1};return u.parent=f,r(f,u),f}s.create=l}(t.ImportFromNode||(t.ImportFromNode={})),function(s){function l(o){const u={start:o.start,length:o.length,nodeType:23,id:n++,name:o};return o.parent=u,u}s.create=l}(t.ImportFromAsNode||(t.ImportFromAsNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:29,id:n++,nameList:[]}}s.create=l}(t.GlobalNode||(t.GlobalNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:39,id:n++,nameList:[]}}s.create=l}(t.NonlocalNode||(t.NonlocalNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:2,id:n++,testExpression:u};return u.parent=f,r(f,u),f}s.create=l}(t.AssertNode||(t.AssertNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:8,id:n++}}s.create=l}(t.BreakNode||(t.BreakNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:12,id:n++}}s.create=l}(t.ContinueNode||(t.ContinueNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:44,id:n++}}s.create=l}(t.ReturnNode||(t.ReturnNode={})),function(s){function l(o){return{start:o.start,length:o.length,nodeType:43,id:n++}}s.create=l}(t.RaiseNode||(t.RaiseNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:63,id:n++,subjectExpression:u,cases:[]};return u.parent=f,r(f,u),f}s.create=l}(t.MatchNode||(t.MatchNode={})),function(s){function l(o,u,f,y,p){const b={start:o.start,length:o.length,nodeType:64,id:n++,pattern:u,isIrrefutable:f,guardExpression:y,suite:p};return r(b,p),u.parent=b,p.parent=b,y&&(y.parent=b),b}s.create=l}(t.CaseNode||(t.CaseNode={})),function(s){function l(o,u){const f=u.findIndex(p=>p.orPatterns.length===1&&p.orPatterns[0].nodeType===69&&p.orPatterns[0].isStar),y={start:o.start,length:o.length,nodeType:65,id:n++,entries:u,starEntryIndex:f>=0?f:void 0};return u.length>0&&r(y,u[u.length-1]),u.forEach(p=>{p.parent=y}),y}s.create=l}(t.PatternSequenceNode||(t.PatternSequenceNode={})),function(s){function l(o,u){const f={start:o[0].start,length:o[0].length,nodeType:66,id:n++,orPatterns:o,target:u};return o.length>1&&r(f,o[o.length-1]),o.forEach(y=>{y.parent=f}),u&&(r(f,u),u.parent=f),f}s.create=l}(t.PatternAsNode||(t.PatternAsNode={})),function(s){function l(o){const u={start:o.start,length:o.length,nodeType:67,id:n++,expression:o};return o.parent=u,u}s.create=l}(t.PatternLiteralNode||(t.PatternLiteralNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:68,id:n++,className:o,arguments:u};return o.parent=f,u.forEach(y=>{y.parent=f}),u.length>0&&r(f,u[u.length-1]),f}s.create=l}(t.PatternClassNode||(t.PatternClassNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:74,id:n++,pattern:o,name:u};return o.parent=f,u&&(r(f,u),u.parent=f),f}s.create=l}(t.PatternClassArgumentNode||(t.PatternClassArgumentNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:69,id:n++,target:o,isStar:u!==void 0,isWildcard:o.value==="_"};return o.parent=f,u&&r(f,u),f}s.create=l}(t.PatternCaptureNode||(t.PatternCaptureNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:70,id:n++,entries:u};return u.length>0&&r(f,u[u.length-1]),u.forEach(y=>{y.parent=f}),f}s.create=l}(t.PatternMappingNode||(t.PatternMappingNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:71,id:n++,keyPattern:o,valuePattern:u};return o.parent=f,u.parent=f,r(f,u),f}s.create=l}(t.PatternMappingKeyEntryNode||(t.PatternMappingKeyEntryNode={})),function(s){function l(o,u){const f={start:o.start,length:o.length,nodeType:72,id:n++,target:u};return u.parent=f,r(f,u),f}s.create=l}(t.PatternMappingExpandEntryNode||(t.PatternMappingExpandEntryNode={})),function(s){function l(o){const u={start:o.start,length:o.length,nodeType:73,id:n++,expression:o};return o.parent=u,u}s.create=l}(t.PatternValueNode||(t.PatternValueNode={}))})(ws);var rs={};Object.defineProperty(rs,"__esModule",{value:!0});var gk=rs.ParseTreeWalker=void 0;class U6{walk(e){const n=this.visitNode(e);n.length>0&&this.walkMultiple(n)}walkMultiple(e){e.forEach(n=>{n&&this.walk(n)})}visitNode(e){var n;switch(e.nodeType){case 0:return this.visitError(e)?[e.child,...(n=e.decorators)!==null&&n!==void 0?n:[]]:[];case 1:return this.visitArgument(e)?[e.name,e.valueExpression]:[];case 2:return this.visitAssert(e)?[e.testExpression,e.exceptionExpression]:[];case 4:return this.visitAssignmentExpression(e)?[e.name,e.rightExpression]:[];case 3:return this.visitAssignment(e)?[e.leftExpression,e.rightExpression,e.typeAnnotationComment]:[];case 5:return this.visitAugmentedAssignment(e)?[e.leftExpression,e.rightExpression]:[];case 6:return this.visitAwait(e)?[e.expression]:[];case 7:return this.visitBinaryOperation(e)?[e.leftExpression,e.rightExpression]:[];case 8:return this.visitBreak(e)?[]:[];case 9:return this.visitCall(e)?[e.leftExpression,...e.arguments]:[];case 64:return this.visitCase(e)?[e.pattern,e.guardExpression,e.suite]:[];case 10:return this.visitClass(e)?[...e.decorators,e.name,...e.arguments,e.suite]:[];case 11:return this.visitConstant(e)?[]:[];case 12:return this.visitContinue(e)?[]:[];case 13:return this.visitDecorator(e)?[e.expression]:[];case 14:return this.visitDel(e)?e.expressions:[];case 15:return this.visitDictionary(e)?e.entries:[];case 16:return this.visitDictionaryExpandEntry(e)?[e.expandExpression]:[];case 17:return this.visitDictionaryKeyEntry(e)?[e.keyExpression,e.valueExpression]:[];case 18:return this.visitEllipsis(e)?[]:[];case 19:return this.visitIf(e)?[e.testExpression,e.ifSuite,e.elseSuite]:[];case 20:return this.visitImport(e)?e.list:[];case 21:return this.visitImportAs(e)?[e.module,e.alias]:[];case 22:return this.visitImportFrom(e)?[e.module,...e.imports]:[];case 23:return this.visitImportFromAs(e)?[e.name,e.alias]:[];case 24:return this.visitIndex(e)?[e.baseExpression,...e.items]:[];case 25:return this.visitExcept(e)?[e.typeExpression,e.name,e.exceptSuite]:[];case 26:return this.visitFor(e)?[e.targetExpression,e.iterableExpression,e.forSuite,e.elseSuite]:[];case 27:return this.visitFormatString(e)?e.expressions:[];case 28:return this.visitFunction(e)?[...e.decorators,e.name,...e.parameters,e.returnTypeAnnotation,e.functionAnnotationComment,e.suite]:[];case 62:return this.visitFunctionAnnotation(e)?[...e.paramTypeAnnotations,e.returnTypeAnnotation]:[];case 29:return this.visitGlobal(e)?e.nameList:[];case 30:return this.visitLambda(e)?[...e.parameters,e.expression]:[];case 31:return this.visitList(e)?e.entries:[];case 32:return this.visitListComprehension(e)?[e.expression,...e.forIfNodes]:[];case 33:return this.visitListComprehensionFor(e)?[e.targetExpression,e.iterableExpression]:[];case 34:return this.visitListComprehensionIf(e)?[e.testExpression]:[];case 63:return this.visitMatch(e)?[e.subjectExpression,...e.cases]:[];case 35:return this.visitMemberAccess(e)?[e.leftExpression,e.memberName]:[];case 37:return this.visitModuleName(e)?e.nameParts:[];case 36:return this.visitModule(e)?[...e.statements]:[];case 38:return this.visitName(e)?[]:[];case 39:return this.visitNonlocal(e)?e.nameList:[];case 40:return this.visitNumber(e)?[]:[];case 41:return this.visitParameter(e)?[e.name,e.typeAnnotation,e.typeAnnotationComment,e.defaultValue]:[];case 42:return this.visitPass(e)?[]:[];case 66:return this.visitPatternAs(e)?[...e.orPatterns,e.target]:[];case 68:return this.visitPatternClass(e)?[e.className,...e.arguments]:[];case 74:return this.visitPatternClassArgument(e)?[e.name,e.pattern]:[];case 69:return this.visitPatternCapture(e)?[e.target]:[];case 67:return this.visitPatternLiteral(e)?[e.expression]:[];case 72:return this.visitPatternMappingExpandEntry(e)?[e.target]:[];case 71:return this.visitPatternMappingKeyEntry(e)?[e.keyPattern,e.valuePattern]:[];case 70:return this.visitPatternMapping(e)?[...e.entries]:[];case 65:return this.visitPatternSequence(e)?[...e.entries]:[];case 73:return this.visitPatternValue(e)?[e.expression]:[];case 43:return this.visitRaise(e)?[e.typeExpression,e.valueExpression,e.tracebackExpression]:[];case 44:return this.visitReturn(e)?[e.returnExpression]:[];case 45:return this.visitSet(e)?e.entries:[];case 46:return this.visitSlice(e)?[e.startValue,e.endValue,e.stepValue]:[];case 47:return this.visitStatementList(e)?e.statements:[];case 48:return this.visitStringList(e)?[e.typeAnnotation,...e.strings]:[];case 49:return this.visitString(e)?[]:[];case 50:return this.visitSuite(e)?[...e.statements]:[];case 51:return this.visitTernary(e)?[e.ifExpression,e.testExpression,e.elseExpression]:[];case 52:return this.visitTuple(e)?e.expressions:[];case 53:return this.visitTry(e)?[e.trySuite,...e.exceptClauses,e.elseSuite,e.finallySuite]:[];case 54:return this.visitTypeAnnotation(e)?[e.valueExpression,e.typeAnnotation]:[];case 55:return this.visitUnaryOperation(e)?[e.expression]:[];case 56:return this.visitUnpack(e)?[e.expression]:[];case 57:return this.visitWhile(e)?[e.testExpression,e.whileSuite,e.elseSuite]:[];case 58:return this.visitWith(e)?[...e.withItems,e.suite]:[];case 59:return this.visitWithItem(e)?[e.expression,e.target]:[];case 60:return this.visitYield(e)?[e.expression]:[];case 61:return this.visitYieldFrom(e)?[e.expression]:[]}}visitArgument(e){return!0}visitAssert(e){return!0}visitAssignment(e){return!0}visitAssignmentExpression(e){return!0}visitAugmentedAssignment(e){return!0}visitAwait(e){return!0}visitBinaryOperation(e){return!0}visitBreak(e){return!0}visitCall(e){return!0}visitCase(e){return!0}visitClass(e){return!0}visitTernary(e){return!0}visitContinue(e){return!0}visitConstant(e){return!0}visitDecorator(e){return!0}visitDel(e){return!0}visitDictionary(e){return!0}visitDictionaryKeyEntry(e){return!0}visitDictionaryExpandEntry(e){return!0}visitError(e){return!0}visitEllipsis(e){return!0}visitIf(e){return!0}visitImport(e){return!0}visitImportAs(e){return!0}visitImportFrom(e){return!0}visitImportFromAs(e){return!0}visitIndex(e){return!0}visitExcept(e){return!0}visitFor(e){return!0}visitFormatString(e){return!0}visitFunction(e){return!0}visitFunctionAnnotation(e){return!0}visitGlobal(e){return!0}visitLambda(e){return!0}visitList(e){return!0}visitListComprehension(e){return!0}visitListComprehensionFor(e){return!0}visitListComprehensionIf(e){return!0}visitMatch(e){return!0}visitMemberAccess(e){return!0}visitModule(e){return!0}visitModuleName(e){return!0}visitName(e){return!0}visitNonlocal(e){return!0}visitNumber(e){return!0}visitParameter(e){return!0}visitPass(e){return!0}visitPatternCapture(e){return!0}visitPatternClass(e){return!0}visitPatternClassArgument(e){return!0}visitPatternAs(e){return!0}visitPatternLiteral(e){return!0}visitPatternMappingExpandEntry(e){return!0}visitPatternSequence(e){return!0}visitPatternValue(e){return!0}visitPatternMappingKeyEntry(e){return!0}visitPatternMapping(e){return!0}visitRaise(e){return!0}visitReturn(e){return!0}visitSet(e){return!0}visitSlice(e){return!0}visitStatementList(e){return!0}visitString(e){return!0}visitStringList(e){return!0}visitSuite(e){return!0}visitTuple(e){return!0}visitTry(e){return!0}visitTypeAnnotation(e){return!0}visitUnaryOperation(e){return!0}visitUnpack(e){return!0}visitWhile(e){return!0}visitWith(e){return!0}visitWithItem(e){return!0}visitYield(e){return!0}visitYieldFrom(e){return!0}}gk=rs.ParseTreeWalker=U6;var V6=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),B6=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),W6=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&V6(e,t,n);return B6(e,t),e};Object.defineProperty(ze,"__esModule",{value:!0});ze.getTypeAnnotationForParameter=ze.isFunctionSuiteEmpty=ze.getFileInfoFromNode=ze.getModuleNode=ze.isWriteAccess=ze.printParseNodeType=ze.getTokenOverlapping=ze.getTokenAt=ze.getCallNodeAndActiveParameterIndex=ze.getEnclosingParameter=ze.CallNodeWalker=ze.NameNodeWalker=ze.isAssignmentToDefaultsFollowingNamedTuple=ze.isDocString=ze.getDocString=ze.isWithinAssertExpression=ze.isWithinTryBlock=ze.isWithinLoop=ze.isWithinAnnotationComment=ze.isWithinTypeAnnotation=ze.isWithinDefaultParamInitializer=ze.isPartialMatchingExpression=ze.isMatchingExpression=ze.isSuiteEmpty=ze.isNodeContainedWithinNodeType=ze.getParentNodeOfType=ze.isNodeContainedWithin=ze.isClassVarAllowedForAssignmentTarget=ze.isFinalAllowedForAssignmentTarget=ze.getTypeAnnotationNode=ze.getExecutionScopeNode=ze.getTypeVarScopeNode=ze.getEvaluationScopeNode=ze.getEvaluationNodeForAssignmentExpression=ze.getEnclosingSuiteOrModule=ze.getEnclosingClassOrFunction=ze.getEnclosingLambda=ze.getEnclosingFunction=ze.getEnclosingClassOrModule=ze.getEnclosingModule=ze.getEnclosingClass=ze.getEnclosingSuite=ze.printOperator=ze.printExpression=ze.printArgument=ze.getTypeSourceId=ze.getClassFullName=Tk=ze.findNodeByOffset=ze.findNodeByPosition=ze.getNodeDepth=void 0;ze.isUnannotatedFunction=ze.getFullStatementRange=ze.getStringValueRange=ze.getStringNodeValueRange=ze.isLastNameOfDottedName=ze.isFirstNameOfDottedName=ze.getFirstNameOfDottedName=ze.getDottedName=ze.getDottedNameWithGivenNodeAsLastName=ze.getFirstAncestorOrSelf=ze.getFirstAncestorOrSelfOfKind=ze.isLastNameOfModuleName=ze.isFromImportAlias=ze.isFromImportName=ze.isFromImportModuleName=ze.isImportAlias=ze.isImportModuleName=void 0;const $6=W6(kt),lv=qt,jp=yn,Os=Rn,j6=ws,Io=kt,cv=rs;function q6(t){let e=0,n=t;for(;n;)e++,n=n.parent;return e}ze.getNodeDepth=q6;function G6(t,e,n){const i=(0,jp.convertPositionToOffset)(e,n);if(i!==void 0)return uv(t,i)}ze.findNodeByPosition=G6;function uv(t,e){if(e<t.start||e>Os.TextRange.getEnd(t))return;const i=new cv.ParseTreeWalker().visitNode(t);for(const r of i)if(r){const a=uv(r,e);if(a)return t.nodeType===5&&a===t.leftExpression?t.destExpression:a}return t}var Tk=ze.findNodeByOffset=uv;function K6(t,e,n){const i=[n];let r=t;for(;r;)r=Xh(r),r&&i.push(r.name.value);return i.push(e),i.reverse().join(".")}ze.getClassFullName=K6;function H6(t){return t.start}ze.getTypeSourceId=H6;function gT(t,e){let n="";return t.argumentCategory===1?n="*":t.argumentCategory===2&&(n="**"),t.name&&(n+=t.name.value+"="),n+=Jt(t.valueExpression,e),n}ze.printArgument=gT;function Jt(t,e=0){switch(t.nodeType){case 38:return t.value;case 35:return Jt(t.leftExpression,e)+"."+t.memberName.value;case 9:return Jt(t.leftExpression,e)+"("+t.arguments.map(n=>gT(n,e)).join(", ")+")";case 24:return Jt(t.baseExpression,e)+"["+t.items.map(n=>gT(n,e)).join(", ")+(t.trailingComma?",":"")+"]";case 55:return np(t.operator)+Jt(t.expression,e);case 7:{const n=Jt(t.leftExpression,e)+" "+np(t.operator)+" "+Jt(t.rightExpression,e);return t.parenthesized?`(${n})`:n}case 40:{let n=t.value.toString();return n.endsWith("n")&&(n=n.substring(0,n.length-1)),t.isImaginary&&(n+="j"),n}case 48:return e&1&&t.typeAnnotation?Jt(t.typeAnnotation,e):t.strings.map(n=>Jt(n,e)).join(" ");case 49:{let n="";t.token.flags&8&&(n+="r"),t.token.flags&16&&(n+="u"),t.token.flags&32&&(n+="b"),t.token.flags&64&&(n+="f");let i=t.token.escapedValue;return(e&2)===0&&(i=i.substring(0,32)),t.token.flags&4?t.token.flags&1?n+=`'''${i}'''`:n+=`"""${i}"""`:t.token.flags&1?n+=`'${i}'`:n+=`"${i}"`,n}case 3:return Jt(t.leftExpression,e)+" = "+Jt(t.rightExpression,e);case 4:return Jt(t.name,e)+" := "+Jt(t.rightExpression,e);case 54:return Jt(t.valueExpression,e)+": "+Jt(t.typeAnnotation,e);case 5:return Jt(t.leftExpression,e)+" "+np(t.operator)+" "+Jt(t.rightExpression,e);case 6:return"await "+Jt(t.expression,e);case 51:return Jt(t.ifExpression,e)+" if "+Jt(t.testExpression,e)+" else "+Jt(t.elseExpression,e);case 31:return`[${t.entries.map(i=>Jt(i,e)).join(", ")}]`;case 56:return"*"+Jt(t.expression,e);case 52:{const n=t.expressions.map(i=>Jt(i,e));return n.length===1?`(${n[0]}, )`:`(${n.join(", ")})`}case 60:return t.expression?"yield "+Jt(t.expression,e):"yield";case 61:return"yield from "+Jt(t.expression,e);case 18:return"...";case 32:{let n="<ListExpression>";if((0,j6.isExpressionNode)(t.expression))n=Jt(t.expression,e);else if(t.expression.nodeType===17){const i=Jt(t.expression.keyExpression,e),r=Jt(t.expression.valueExpression,e);n=`${i}: ${r}`}return n=n+" "+t.forIfNodes.map(i=>i.nodeType===33?`${i.isAsync?"async ":""}for `+Jt(i.targetExpression,e)+` in ${Jt(i.iterableExpression,e)}`:`if ${Jt(i.testExpression,e)}`).join(" "),t.isParenthesized?`(${n}})`:n}case 46:{let n="";return t.startValue&&(n+=Jt(t.startValue,e)),t.endValue&&(n+=": "+Jt(t.endValue,e)),t.stepValue&&(n+=": "+Jt(t.stepValue,e)),n}case 30:return"lambda "+t.parameters.map(n=>{let i="";return n.category===1?i+="*":n.category===2&&(i+="**"),n.name?i+=n.name.value:n.category===0&&(i+="/"),n.defaultValue&&(i+=" = "+Jt(n.defaultValue,e)),i}).join(", ")+": "+Jt(t.expression,e);case 11:{if(t.constType===33)return"True";if(t.constType===15)return"False";if(t.constType===9)return"__debug__";if(t.constType===26)return"None";break}case 15:{const n=`${t.entries.map(i=>i.nodeType===17?`${Jt(i.keyExpression,e)}: ${Jt(i.valueExpression,e)}`:i.nodeType===16?`**${Jt(i.expandExpression,e)}`:Jt(i,e))}`;return n?`{ ${n} }`:"{}"}case 45:return t.entries.map(n=>Jt(n,e)).join(", ")}return"<Expression>"}ze.printExpression=Jt;function np(t){const e={[0]:"+",[1]:"+=",[2]:"=",[3]:"&",[4]:"&=",[5]:"~",[6]:"|",[7]:"|=",[8]:"^",[9]:"^=",[10]:"/",[11]:"/=",[12]:"==",[13]:"//",[14]:"//=",[15]:">",[16]:">=",[17]:"<<",[18]:"<<=",[19]:"<>",[20]:"<",[21]:"<=",[22]:"@",[23]:"@=",[24]:"%",[25]:"%=",[26]:"*",[27]:"*=",[28]:"!=",[29]:"**",[30]:"**=",[31]:">>",[32]:">>=",[33]:"-",[34]:"-=",[36]:"and",[37]:"or",[38]:"not",[39]:"is",[40]:"is not",[41]:"in",[42]:"not in"};return e[t]?e[t]:"unknown"}ze.printOperator=np;function Y6(t){let e=t.parent;for(;e;){if(e.nodeType===50)return e;e=e.parent}}ze.getEnclosingSuite=Y6;function Xh(t,e=!1){let n=t.parent;for(;n;){if(n.nodeType===10)return n;if(n.nodeType===36||n.nodeType===28&&e)return;n=n.parent}}ze.getEnclosingClass=Xh;function Q6(t){let e=t.parent;for(;e;){if(e.nodeType===36)return e;e=e.parent}(0,lv.fail)("Module node not found")}ze.getEnclosingModule=Q6;function J6(t,e=!1){let n=t.parent;for(;n;){if(n.nodeType===10||n.nodeType===36)return n;if(n.nodeType===28&&e)return;n=n.parent}}ze.getEnclosingClassOrModule=J6;function _k(t){let e=t.parent,n;for(;e;){if(e.nodeType===28&&!e.decorators.some(i=>i===n))return e;if(e.nodeType===10)return;n=e,e=e.parent}}ze.getEnclosingFunction=_k;function X6(t){let e=t.parent;for(;e;){if(e.nodeType===30)return e;if(e.nodeType===50)return;e=e.parent}}ze.getEnclosingLambda=X6;function Z6(t){let e=t.parent;for(;e;){if(e.nodeType===28||e.nodeType===10)return e;e=e.parent}}ze.getEnclosingClassOrFunction=Z6;function e4(t,e=!1,n=!0){let i=t.parent;for(;i;){if(i.nodeType===50||i.nodeType===36)return i;if(i.nodeType===30&&n||i.nodeType===28&&e)return;i=i.parent}}ze.getEnclosingSuiteOrModule=e4;function t4(t){let e=!1,n=md(t);for(;n!==void 0;)switch(n.nodeType){case 28:case 30:case 36:return n;case 10:return e?void 0:n;case 32:e=!0,n=md(n.parent);break;default:return}}ze.getEvaluationNodeForAssignmentExpression=t4;function md(t){let e,n,i=t,r=!1;for(;i;){switch(i.nodeType===41&&e===i.name&&(r=!0),i.nodeType){case 28:{if(i.parameters.some(a=>a===e)){if(r&&(0,Io.getScope)(i)!==void 0)return i}else if(e===i.suite&&(0,Io.getScope)(i)!==void 0)return i;break}case 30:{if(i.parameters.some(a=>a===e)){if(r&&(0,Io.getScope)(i)!==void 0)return i}else if((!e||e===i.expression)&&(0,Io.getScope)(i)!==void 0)return i;break}case 10:{if(e===i.suite&&(0,Io.getScope)(i)!==void 0)return i;break}case 32:{if((0,Io.getScope)(i)!==void 0&&!(e===i.forIfNodes[0]&&i.forIfNodes[0].nodeType===33&&i.forIfNodes[0].iterableExpression===n))return i;break}case 36:{if((0,Io.getScope)(i)!==void 0)return i;break}}n=e,e=i,i=i.parent}(0,lv.fail)("Did not find evaluation scope")}ze.getEvaluationScopeNode=md;function n4(t,e=!1){let n,i=t;for(;i;){switch(i.nodeType){case 28:{if((n===i.suite||e)&&!i.decorators.some(r=>r===n))return i;break}case 10:{if(n===i.suite&&!i.decorators.some(r=>r===n))return i;break}}n=i,i=i.parent}}ze.getTypeVarScopeNode=n4;function i4(t){let e=md(t);for(;e.nodeType===10||e.nodeType===32;)e=md(e.parent);return e}ze.getExecutionScopeNode=i4;function r4(t){let e=t,n=t.parent;for(;n;){if(n.nodeType===54){if(n.typeAnnotation===e)return n;break}e=n,n=n.parent}}ze.getTypeAnnotationNode=r4;function s4(t){if(t.nodeType===38)return!0;if(t.nodeType===35){if(t.leftExpression.nodeType!==38||!Xh(t))return!1;const n=_k(t);return!(!n||n.name.value!=="__init__")}return!1}ze.isFinalAllowedForAssignmentTarget=s4;function a4(t){return!!Xh(t,!0)}ze.isClassVarAllowedForAssignmentTarget=a4;function o4(t,e){let n=t;for(;n;){if(n===e)return!0;n=n.parent}return!1}ze.isNodeContainedWithin=o4;function vk(t,e){let n=t;for(;n;){if(n.nodeType===e)return n;n=n.parent}}ze.getParentNodeOfType=vk;function l4(t,e){return vk(t,e)!==void 0}ze.isNodeContainedWithinNodeType=l4;function c4(t){let e=!1;for(const n of t.statements)if(n.nodeType===47){for(const i of n.statements)if(i.nodeType===18)e=!0;else if(i.nodeType!==48)return!1}else return!1;return e}ze.isSuiteEmpty=c4;function yd(t,e){if(t.nodeType===38)return e.nodeType===38?t.value===e.value:e.nodeType===4?t.value===e.name.value:!1;if(t.nodeType===35&&e.nodeType===35)return yd(t.leftExpression,e.leftExpression)&&t.memberName.value===e.memberName.value;if(t.nodeType===24&&e.nodeType===24){if(!yd(t.baseExpression,e.baseExpression)||e.items.length!==1||e.trailingComma||e.items[0].name||e.items[0].argumentCategory!==0)return!1;const n=t.items[0].valueExpression;if(n.nodeType===40){const i=e.items[0].valueExpression;return i.nodeType!==40||i.isImaginary||!i.isInteger?!1:n.value===i.value}if(n.nodeType===55&&n.operator===33&&n.expression.nodeType===40){const i=e.items[0].valueExpression;return i.nodeType!==55||i.operator!==33||i.expression.nodeType!==40||i.expression.isImaginary||!i.expression.isInteger?!1:n.expression.value===i.expression.value}if(n.nodeType===48){const i=n,r=e.items[0].valueExpression;if(i.strings.length===1&&i.strings[0].nodeType===49&&r.nodeType===48&&r.strings.length===1&&r.strings[0].nodeType===49)return i.strings[0].value===r.strings[0].value}return!1}return!1}ze.isMatchingExpression=yd;function TT(t,e){return t.nodeType===35?yd(t.leftExpression,e)||TT(t.leftExpression,e):t.nodeType===24?yd(t.baseExpression,e)||TT(t.baseExpression,e):!1}ze.isPartialMatchingExpression=TT;function u4(t){let e=t,n;for(;e;){if(e.nodeType===41&&n===e.defaultValue)return!0;if(e.nodeType===30||e.nodeType===28||e.nodeType===10||e.nodeType===36)return!1;n=e,e=e.parent}return!1}ze.isWithinDefaultParamInitializer=u4;function d4(t,e){let n=t,i,r=!1;for(;n;){if(n.nodeType===41&&(i===n.typeAnnotation||i===n.typeAnnotationComment)||n.nodeType===28&&i===n.returnTypeAnnotation)return r||!e;if(n.nodeType===28&&i===n.functionAnnotationComment)return!0;if(n.nodeType===54&&i===n.typeAnnotation)return r||!e;if(n.nodeType===3&&i===n.typeAnnotationComment)return!0;if(n.nodeType===48&&i===n.typeAnnotation&&(r=!0),n.nodeType===30||n.nodeType===28||n.nodeType===10||n.nodeType===36)return!1;i=n,n=n.parent}return!1}ze.isWithinTypeAnnotation=d4;function f4(t){let e=t,n;for(;e;){if(e.nodeType===28&&n===e.functionAnnotationComment||e.nodeType===3&&n===e.typeAnnotationComment)return!0;if(e.nodeType===30||e.nodeType===28||e.nodeType===10||e.nodeType===36)return!1;n=e,e=e.parent}return!1}ze.isWithinAnnotationComment=f4;function p4(t){let e=t;for(;e;){switch(e.nodeType){case 26:case 57:return!0}e=e.parent}return!1}ze.isWithinLoop=p4;function h4(t,e=!1){let n=t,i;for(;n;){switch(n.nodeType){case 53:return n.trySuite===i;case 58:{if(e&&n.suite===i)return!0;break}case 28:case 36:case 10:return!1}i=n,n=n.parent}return!1}ze.isWithinTryBlock=h4;function m4(t){let e=t,n;for(;e;){switch(e.nodeType){case 2:return e.testExpression===n}n=e,e=e.parent}return!1}ze.isWithinAssertExpression=m4;function y4(t){if(t.length===0||t[0].nodeType!==47||!bk(t[0]))return;const e=t[0].statements[0].strings;return e.length===1?e[0].value:e.map(n=>n.value).join("")}ze.getDocString=y4;function bk(t){if(t.statements.length===0||t.statements[0].nodeType!==48)return!1;const e=t.statements[0].strings;return!(e.length===0||e.some(n=>(n.token.flags&64)!==0))}ze.isDocString=bk;function g4(t){var e,n;if(t.nodeType!==9||!t.parent||t.parent.nodeType!==3||t.parent.leftExpression.nodeType!==38||!t.parent.parent||t.parent.parent.nodeType!==47)return!1;const i=t.parent.leftExpression.value,r=t.parent.parent;if(r.statements[0]!==t.parent||!r.parent||!(r.parent.nodeType===36||r.parent.nodeType===50))return!1;const a=r.parent;let s=a.statements.findIndex(l=>l===r);if(s<0)return!1;for(s++;s<a.statements.length;){const l=a.statements[s];if(l.nodeType!==47)break;if(((e=l.statements[0])===null||e===void 0?void 0:e.nodeType)===48){s++;continue}if(((n=l.statements[0])===null||n===void 0?void 0:n.nodeType)===3){const o=l.statements[0];if(o.leftExpression.nodeType===35&&o.leftExpression.memberName.value==="__defaults__"){const u=o.leftExpression.leftExpression;if(u.nodeType===35&&u.memberName.value==="__new__"&&u.leftExpression.nodeType===38&&u.leftExpression.value===i)return!0}}break}return!1}ze.isAssignmentToDefaultsFollowingNamedTuple=g4;class T4 extends cv.ParseTreeWalker{constructor(e){super(),this._callback=e}visitName(e){return this._callback(e,this._subscriptIndex,this._baseExpression),!0}visitIndex(e){this.walk(e.baseExpression);const n=this._subscriptIndex,i=this._baseExpression;return this._baseExpression=e.baseExpression,e.items.forEach((r,a)=>{this._subscriptIndex=a,this.walk(r)}),this._subscriptIndex=n,this._baseExpression=i,!1}}ze.NameNodeWalker=T4;class _4 extends cv.ParseTreeWalker{constructor(e){super(),this._callback=e}visitCall(e){return this._callback(e),!0}}ze.CallNodeWalker=_4;function v4(t){let e=t;for(;e;){if(e.nodeType===41)return e;e=e.parent}}ze.getEnclosingParameter=v4;function b4(t,e,n){let i=t,r;for(;i!==void 0;){if(i.nodeType===9&&f(i)){r=i;break}i=i.parent}if(!r||!r.arguments)return;const a=Os.TextRange.getEnd(r);if(e>a)return;const s=Sk(n,a-1);if(e===a&&(s==null?void 0:s.type)===14)return;let l=!1,o=-1,u=!1;return r.arguments.forEach((y,p)=>{if(l)return;let b=y.start;const v=n.getItemAtPosition(b);v>=0&&(b=Os.TextRange.getEnd(n.getItemAt(v-1)));let m=Os.TextRange.getEnd(y);const V=n.getItemAtPosition(m);if(V>=0)for(let F=V;F<n.count;F++){const P=n.getItemAt(F);switch(P.type){case 12:case 14:break;default:continue}m=Os.TextRange.getEnd(P);break}e<m&&(o=p,u=e>=b,l=!0)}),l||(o=r.arguments.length+1),{callNode:r,activeIndex:o,activeOrFake:u};function f(y,p){let b=!0;const v=y.leftExpression.length>0?Os.TextRange.getEnd(y.leftExpression)-1:y.leftExpression.start,m=n.getItemAtPosition(v);if(m>=0&&m+1<n.count){const V=n.getItemAt(m+1);V.type===13&&e<Os.TextRange.getEnd(V)&&(b=!1)}return b}}ze.getCallNodeAndActiveParameterIndex=b4;function Sk(t,e){const n=t.getItemAtPosition(e);if(!(n<0))return t.getItemAt(n)}ze.getTokenAt=Sk;function S4(t,e){const n=t.getItemAtPosition(e);if(n<0)return;const i=t.getItemAt(n);return Os.TextRange.overlaps(i,e)?i:void 0}ze.getTokenOverlapping=S4;function I4(t){switch(t){case 0:return"Error";case 1:return"Argument";case 2:return"Assert";case 3:return"Assignment";case 4:return"AssignmentExpression";case 5:return"AugmentedAssignment";case 6:return"Await";case 7:return"BinaryOperation";case 8:return"Break";case 9:return"Call";case 10:return"Class";case 11:return"Constant";case 12:return"Continue";case 13:return"Decorator";case 14:return"Del";case 15:return"Dictionary";case 16:return"DictionaryExpandEntry";case 17:return"DictionaryKeyEntry";case 18:return"Ellipsis";case 19:return"If";case 20:return"Import";case 21:return"ImportAs";case 22:return"ImportFrom";case 23:return"ImportFromAs";case 24:return"Index";case 25:return"Except";case 26:return"For";case 27:return"FormatString";case 28:return"Function";case 29:return"Global";case 30:return"Lambda";case 31:return"List";case 32:return"ListComprehension";case 33:return"ListComprehensionFor";case 34:return"ListComprehensionIf";case 35:return"MemberAccess";case 36:return"Module";case 37:return"ModuleName";case 38:return"Name";case 39:return"Nonlocal";case 40:return"Number";case 41:return"Parameter";case 42:return"Pass";case 43:return"Raise";case 44:return"Return";case 45:return"Set";case 46:return"Slice";case 47:return"StatementList";case 48:return"StringList";case 49:return"String";case 50:return"Suite";case 51:return"Ternary";case 52:return"Tuple";case 53:return"Try";case 54:return"TypeAnnotation";case 55:return"UnaryOperation";case 56:return"Unpack";case 57:return"While";case 58:return"With";case 59:return"WithItem";case 60:return"Yield";case 61:return"YieldFrom";case 62:return"FunctionAnnotation";case 63:return"Match";case 64:return"Case";case 65:return"PatternSequence";case 66:return"PatternAs";case 67:return"PatternLiteral";case 68:return"PatternClass";case 69:return"PatternCapture";case 70:return"PatternMapping";case 71:return"PatternMappingKeyEntry";case 72:return"PatternMappingExpandEntry";case 73:return"PatternValue";case 74:return"PatternClassArgument"}(0,lv.assertNever)(t)}ze.printParseNodeType=I4;function C4(t){let e=t,n=e.parent;for(;n;){switch(n.nodeType){case 3:return e===n.leftExpression;case 5:return e===n.leftExpression;case 4:return e===n.name;case 14:return!0;case 26:return e===n.targetExpression;case 21:return e===n.alias||n.module.nameParts.length>0&&e===n.module.nameParts[0];case 23:return e===n.alias||!n.alias&&e===n.name;case 35:{if(e!==n.memberName)return!1;break}case 25:return e===n.name;case 58:return n.withItems.some(i=>i===e);case 33:return e===n.targetExpression;case 54:{if(e===n.typeAnnotation)return!1;break}case 28:case 10:case 36:return!1}e=n,n=n.parent}return!1}ze.isWriteAccess=C4;function Ik(t){let e=t;for(;e&&e.nodeType!==36;)e=e.parent;return e}ze.getModuleNode=Ik;function w4(t){const e=Ik(t);return e?$6.getFileInfo(e):void 0}ze.getFileInfoFromNode=w4;function E4(t){let e=!0;return t.suite.statements.forEach(n=>{n.nodeType!==0&&(n.nodeType===47?n.statements.forEach(i=>{i.nodeType!==18&&i.nodeType!==48&&i.nodeType!==42&&(e=!1)}):e=!1)}),e}ze.isFunctionSuiteEmpty=E4;function F4(t,e){if(e>=t.parameters.length)return;const n=t.parameters[e];if(n.typeAnnotation)return n.typeAnnotation;if(n.typeAnnotationComment)return n.typeAnnotationComment;if(!t.functionAnnotationComment||t.functionAnnotationComment.isParamListEllipsis)return;let i=0;const r=t.functionAnnotationComment.paramTypeAnnotations;r.length<t.parameters.length&&(i=1);const a=e-i;if(!(a<0||a>=r.length))return r[a]}ze.getTypeAnnotationForParameter=F4;function k4(t){var e,n;return((n=(e=dv(t,37))===null||e===void 0?void 0:e.parent)===null||n===void 0?void 0:n.nodeType)===21}ze.isImportModuleName=k4;function D4(t){var e;return((e=t.parent)===null||e===void 0?void 0:e.nodeType)===21&&t.parent.alias===t}ze.isImportAlias=D4;function P4(t){var e,n;return((n=(e=dv(t,37))===null||e===void 0?void 0:e.parent)===null||n===void 0?void 0:n.nodeType)===22}ze.isFromImportModuleName=P4;function A4(t){var e;return((e=t.parent)===null||e===void 0?void 0:e.nodeType)===23&&t.parent.name===t}ze.isFromImportName=A4;function M4(t){var e;return((e=t.parent)===null||e===void 0?void 0:e.nodeType)===23&&t.parent.alias===t}ze.isFromImportAlias=M4;function N4(t){var e;if(((e=t.parent)===null||e===void 0?void 0:e.nodeType)!==37)return!1;const n=t.parent;return n.nameParts.length===0?!1:n.nameParts[n.nameParts.length-1]===t}ze.isLastNameOfModuleName=N4;function*R4(t){for(;t!==void 0;)yield t,t=t.parent}function dv(t,e){return Ck(t,n=>n.nodeType===e)}ze.getFirstAncestorOrSelfOfKind=dv;function Ck(t,e){for(const n of R4(t))if(e(n))return n}ze.getFirstAncestorOrSelf=Ck;function O4(t){var e;return((e=t.parent)===null||e===void 0?void 0:e.nodeType)!==35||t.parent.leftExpression===t?t:t.parent}ze.getDottedNameWithGivenNodeAsLastName=O4;function x4(t){if(t.nodeType===38)return[t];const e=[];if(n(t,e))return e.reverse();return;function n(i,r){return i.nodeType===38?(r.push(i),!0):(r.push(i.memberName),i.leftExpression.nodeType===38||i.leftExpression.nodeType===35?n(i.leftExpression,r):!1)}}ze.getDottedName=x4;function wk(t){if(t.nodeType===38)return t;if(t.leftExpression.nodeType===38||t.leftExpression.nodeType===35)return wk(t.leftExpression)}ze.getFirstNameOfDottedName=wk;function L4(t){var e;return((e=t.parent)===null||e===void 0?void 0:e.nodeType)!==35||t.parent.leftExpression===t}ze.isFirstNameOfDottedName=L4;function z4(t){var e,n;return((e=t.parent)===null||e===void 0?void 0:e.nodeType)!==35?!0:t.parent.leftExpression.nodeType!==38&&t.parent.leftExpression.nodeType!==35||t.parent.leftExpression===t?!1:((n=t.parent.parent)===null||n===void 0?void 0:n.nodeType)!==35}ze.isLastNameOfDottedName=z4;function U4(t){return Ek(t.token)}ze.getStringNodeValueRange=U4;function Ek(t){const e=t.quoteMarkLength,n=!(t.flags&65536);return Os.TextRange.create(t.start+e,t.length-e-(n?e:0))}ze.getStringValueRange=Ek;function V4(t,e){const n=(0,jp.convertTextRangeToRange)(t,e.lines),i=W4(n,Os.TextRange.getEnd(t),e);return i?{start:n.start,end:i}:n.end.line===e.lines.count-1?n:{start:n.start,end:{line:n.end.line+1,character:0}}}ze.getFullStatementRange=V4;function B4(t){return t.returnTypeAnnotation===void 0&&t.parameters.every(e=>e.typeAnnotation===void 0&&e.typeAnnotationComment===void 0)}ze.isUnannotatedFunction=B4;function W4(t,e,n){const i=n.tokens.getItemAtPosition(e);if(i<0)return;let r=i;for(;r<n.tokens.count;r++){const a=n.tokens.getItemAt(r),s=(0,jp.convertTextRangeToRange)(a,n.lines);if(t.end.line!==s.start.line)break}for(let a=i;a<r;a++){const s=n.tokens.getItemAt(a);if(s.type===11||s.type===2)continue;return(0,jp.convertTextRangeToRange)(s,n.lines).start}}Object.defineProperty(Sn,"__esModule",{value:!0});Sn.createSynthesizedAliasDeclaration=Sn.getDeclarationsWithUsesLocalNameRemoved=Sn.isDefinedInFile=Sn.getNameNodeForDeclaration=Sn.getNameFromDeclaration=Sn.isPossibleTypeAliasDeclaration=Sn.isExplicitTypeAliasDeclaration=Sn.isFinalVariableDeclaration=Sn.areDeclarationsSame=Sn.hasTypeForDeclaration=void 0;const $4=Rn,j4=Bn,q4=ze;function G4(t){switch(t.type){case 0:case 4:case 5:case 3:return!0;case 2:{if(t.node.typeAnnotation||t.node.typeAnnotationComment)return!0;const e=t.node.parent;if((e==null?void 0:e.nodeType)===28&&e.functionAnnotationComment&&!e.functionAnnotationComment.isParamListEllipsis){const n=e.functionAnnotationComment.paramTypeAnnotations;return!(e.parameters.length>n.length&&t.node===e.parameters[0])}return!1}case 1:return!!t.typeAnnotationNode;case 6:return!1}}Sn.hasTypeForDeclaration=G4;function K4(t,e,n=!1){if(t.type!==e.type||t.path!==e.path||t.range.start.line!==e.range.start.line||t.range.start.character!==e.range.start.character)return!1;if(t.type===6&&e.type===6){if(t.symbolName!==e.symbolName||t.usesLocalName!==e.usesLocalName)return!1;if(n)return!0;if(t.firstNamePart!==e.firstNamePart)return!1}return!0}Sn.areDeclarationsSame=K4;function H4(t){return t.type===1&&!!t.isFinal}Sn.isFinalVariableDeclaration=H4;function Y4(t){return t.type===1&&!!t.typeAliasAnnotation}Sn.isExplicitTypeAliasDeclaration=Y4;function Q4(t){var e;if(t.type!==1||!t.typeAliasName||t.typeAnnotationNode||((e=t.node.parent)===null||e===void 0?void 0:e.nodeType)!==3)return!1;switch(t.node.parent.rightExpression.nodeType){case 0:case 55:case 4:case 54:case 6:case 51:case 56:case 52:case 9:case 32:case 46:case 60:case 61:case 30:case 40:case 15:case 31:case 45:return!1}return!0}Sn.isPossibleTypeAliasDeclaration=Q4;function J4(t){var e;switch(t.type){case 6:return t.symbolName;case 4:case 3:return t.node.name.value;case 2:return(e=t.node.name)===null||e===void 0?void 0:e.value;case 1:return t.node.nodeType===38?t.node.value:void 0;case 0:case 5:return}throw new Error("Shouldn't reach here")}Sn.getNameFromDeclaration=J4;function X4(t){var e,n;switch(t.type){case 6:return t.node.nodeType===21?(e=t.node.alias)!==null&&e!==void 0?e:t.node.module.nameParts[0]:t.node.nodeType===23?(n=t.node.alias)!==null&&n!==void 0?n:t.node.name:t.node.module.nameParts[0];case 4:case 3:return t.node.name;case 2:return t.node.name;case 1:return t.node.nodeType===38?t.node:void 0;case 0:case 5:return}throw new Error("Shouldn't reach here")}Sn.getNameNodeForDeclaration=X4;function Z4(t,e){var n;return(0,j4.isAliasDeclaration)(t)?((n=(0,q4.getFileInfoFromNode)(t.node))===null||n===void 0?void 0:n.filePath)===e:t.path===e}Sn.isDefinedInFile=Z4;function eL(t){return t.map(e=>{if(e.type!==6)return e;const n={...e};return n.usesLocalName=!1,n})}Sn.getDeclarationsWithUsesLocalNameRemoved=eL;function tL(t){return{type:6,node:void 0,path:t,loadSymbolsFromPath:!1,range:(0,$4.getEmptyRange)(),implicitImports:new Map,usesLocalName:!1,moduleName:"",isInExceptSuite:!1}}Sn.createSynthesizedAliasDeclaration=tL;var co={},oa={};Object.defineProperty(oa,"__esModule",{value:!0});oa.extractParameterDocumentation=oa.cleanAndSplitDocString=oa.cleanDocString=void 0;function nL(t){return fv(t).join(`
`)}oa.cleanDocString=nL;function fv(t){const n=t.replace(/\r/g,"").replace(/\t/g,"        ").split(`
`);let i=Number.MAX_VALUE;n.forEach((a,s)=>{if(n.length<=1||s>0){const l=a.trimLeft();l&&(i=Math.min(i,a.length-l.length))}}),i>=Number.MAX_VALUE&&(i=0);const r=[];for(n.forEach((a,s)=>{s===0?r.push(a.trim()):r.push(a.substr(i).trimRight())});r.length>0&&r[0].length===0;)r.shift();for(;r.length>0&&r[r.length-1].length===0;)r.pop();return r}oa.cleanAndSplitDocString=fv;function iL(t,e){if(!t||!e)return;const n=fv(t);for(const i of n){const r=i.trim();let a=r.indexOf("@param "+e);if(a>=0||(a=r.indexOf(":param "+e),a>=0))return r.substr(a+7);if(a=r.indexOf(e+": "),a>=0||(a=r.indexOf(e+" ("),a>=0))return r.substr(a)}}oa.extractParameterDocumentation=iL;Object.defineProperty(co,"__esModule",{value:!0});co.convertDocStringToPlainText=co.convertDocStringToMarkdown=void 0;const Fk=oa;function rL(t){return new PL(t).convert()}co.convertDocStringToMarkdown=rL;function sL(t){const e=(0,Fk.cleanAndSplitDocString)(t),n=[];for(const i of e){const r=n.length>0?n[n.length-1]:void 0;Bi(i)&&Bi(r)||n.push(i)}return n.join(`
`).trimEnd()}co.convertDocStringToPlainText=sL;const aL=/\S|$/,oL=/\S/,lL=/^\s*~~~+$/,cL=/^\s*\+\+\++$/,Ny=/^\s*===+\s+===+$/,uL=/^\s*---+\s+---+$/,dL=/^(\s*)-\s/,fL=/^(\s*)\*\s/,pL=/^(\s*)\d+\.\s/,hL=/^(\s+\* )(.*)$/,mL=/^\s*\.\. /,yL=/^\s*\.\.\s+(\w+)::\s*(.*)$/,gL=/ *>>> /,TL=/^\s*:(param|arg|type|return|rtype|raise|except|var|ivar|cvar|copyright|license)/,_L=/^[.\s\t]+(@\w+)/,vL=/^(\.\s{3})|^(\.)/,bL=[{exp:/^\s*=+(\s+=+)+$/,replacement:"="},{exp:/^\s*-+(\s+-+)+$/,replacement:"-"},{exp:/^\s*~+(\s+-+)+$/,replacement:"~"},{exp:/^\s*\++(\s+\++)+$/,replacement:"+"}],SL=/\s/g,IL=/``/g,CL=/~/g,wL=/\+/g,EL=new RegExp("(?<!\\\\)([_*~[\\]])","g"),TS=/(\[.*\]\(.*\))/g,FL=[{exp:/</g,replacement:"&lt;"},{exp:/>/g,replacement:"&gt;"}],kL=/^\s*::$/,DL=[{exp:/\s+::$/g,replacement:""},{exp:/(\S)\s*::$/g,replacement:"$1:"},{exp:/:[\w_\-+:.]+:`/g,replacement:"`"},{exp:/`:[\w_\-+:.]+:/g,replacement:"`"}];class PL{constructor(e){this._builder="",this._skipAppendEmptyLine=!0,this._insideInlineCode=!1,this._appendDirectiveBlock=!1,this._stateStack=[],this._lineNum=0,this._blockIndent=0,this._state=this._parseText,this._lines=(0,Fk.cleanAndSplitDocString)(e)}convert(){for(this._lines.some(n=>_L.exec(n))&&(this._lines=this._lines.map(n=>n.replace(vL,"")));this._currentLineOrUndefined()!==void 0;){const n=this._state,i=this._lineNum;if(this._state(),this._state===n&&this._lineNum===i)break}return this._state===this._parseBacktickBlock||this._state===this._parseDocTest||this._state===this._parseLiteralBlock?this._trimOutputAndAppendLine("```"):this._insideInlineCode&&this._trimOutputAndAppendLine("`",!0),this._builder.trim()}_eatLine(){this._lineNum++}_currentLineOrUndefined(){return this._lineNum<this._lines.length?this._lines[this._lineNum]:void 0}_currentLine(){return this._currentLineOrUndefined()||""}_currentIndent(){return Ry(this._currentLine())}_prevIndent(){var e;return Ry((e=this._lineAt(this._lineNum-1))!==null&&e!==void 0?e:"")}_lineAt(e){return e<this._lines.length?this._lines[e]:void 0}_nextBlockIndent(){return Ry(this._lines.slice(this._lineNum+1).find(e=>!Bi(e))||"")}_currentLineIsOutsideBlock(){return this._currentIndent()<this._blockIndent}_currentLineWithinBlock(){return this._currentLine().substr(this._blockIndent)}_pushAndSetState(e){this._state===this._parseText&&(this._insideInlineCode=!1),this._stateStack.push(this._state),this._state=e}_popState(){this._state=this._stateStack.splice(0,1)[0],this._state===this._parseText&&(this._insideInlineCode=!1)}_parseText(){if(Bi(this._currentLineOrUndefined())){this._state=this._parseEmpty;return}if(this._beginBacktickBlock()||this._beginLiteralBlock()||this._beginDocTest()||this._beginDirective()||this._beginList()||this._beginFieldList()||this._beginTableBlock())return;const e=this._formatPlainTextIndent(this._currentLine());this._appendTextLine(e),this._eatLine()}_formatPlainTextIndent(e){const n=this._lineAt(this._lineNum-1),i=this._prevIndent(),r=this._currentIndent();return r>i&&!Bi(n)&&!this._builder.endsWith(`\\
`)&&!this._builder.endsWith(`

`)&&!_S(n)&&(this._builder=this._builder.slice(0,-1)+`\\
`),i>r&&!Bi(n)&&!this._builder.endsWith(`\\
`)&&!this._builder.endsWith(`

`)&&(this._builder=this._builder.slice(0,-1)+`\\
`),i===0||this._builder.endsWith(`\\
`)||this._builder.endsWith(`

`)?e=this._convertIndent(e):e=e.trimStart(),e}_convertIndent(e){return e=e.replace(/^([ \t]+)(.+)$/g,(n,i,r)=>"&nbsp;".repeat(i.length)+r),e}_escapeHtml(e){return FL.forEach(n=>{e=e.replace(n.exp,n.replacement)}),e}_appendTextLine(e){e=this._preprocessTextLine(e);const n=e.split("`");for(let i=0;i<n.length;i++){let r=n[i];if(i>0&&(this._insideInlineCode=!this._insideInlineCode,this._append("`")),this._insideInlineCode){this._append(r);continue}if(r=this._escapeHtml(r),i===0){if(n.length===1){for(const l of bL)if(l.exp.test(r)){r=r.replace(SL,l.replacement);break}if(lL.test(r)){this._append(r.replace(CL,"-"));continue}if(cL.test(r)){this._append(r.replace(wL,"-"));continue}}const s=hL.exec(r);s!==null&&s.length===3&&(this._append(s[1]),r=s[2])}r.split(TS).forEach(s=>{TS.test(s)?this._append(s):this._append(s.replace(EL,"\\$1"))})}this._builder+=`
`}_preprocessTextLine(e){return kL.test(e)?"":(DL.forEach(n=>e=e.replace(n.exp,n.replacement)),e=e.replace(IL,"`"),e)}_parseEmpty(){if(Bi(this._currentLineOrUndefined())){this._appendLine(),this._eatLine();return}this._state=this._parseText}_beginMinIndentCodeBlock(e){this._appendLine("```"),this._pushAndSetState(e),this._blockIndent=this._currentIndent()}_beginBacktickBlock(){return this._currentLine().startsWith("```")?(this._appendLine(this._currentLine()),this._pushAndSetState(this._parseBacktickBlock),this._eatLine(),!0):!1}_parseBacktickBlock(){this._currentLine().startsWith("```")?(this._appendLine("```"),this._appendLine(),this._popState()):this._appendLine(this._currentLine()),this._eatLine()}_beginDocTest(){return gL.test(this._currentLine())?(this._beginMinIndentCodeBlock(this._parseDocTest),this._appendLine(this._currentLineWithinBlock()),this._eatLine(),!0):!1}_parseDocTest(){if(this._currentLineIsOutsideBlock()||Bi(this._currentLine())){this._trimOutputAndAppendLine("```"),this._appendLine(),this._popState();return}this._appendLine(this._currentLineWithinBlock()),this._eatLine()}_beginLiteralBlock(){const e=this._lineAt(this._lineNum-1);if(e===void 0)return!1;if(!Bi(e))return!1;let n=this._lineNum-2;for(;n>=0;n--){const i=this._lineAt(n);if(!Bi(i)){if(i.endsWith("::"))break;return!1}}return n<0?!1:this._currentIndent()===0?(this._appendLine("```"),this._pushAndSetState(this._parseLiteralBlockSingleLine),!0):(this._beginMinIndentCodeBlock(this._parseLiteralBlock),!0)}_parseLiteralBlock(){if(Bi(this._currentLineOrUndefined())){this._appendLine(),this._eatLine();return}if(this._currentLineIsOutsideBlock()){this._trimOutputAndAppendLine("```"),this._appendLine(),this._popState();return}this._appendLine(this._currentLineWithinBlock()),this._eatLine()}_parseLiteralBlockSingleLine(){this._appendLine(this._currentLine()),this._appendLine("```"),this._appendLine(),this._popState(),this._eatLine()}_beginDirective(){return mL.test(this._currentLine())?(this._pushAndSetState(this._parseDirective),this._blockIndent=this._nextBlockIndent(),this._appendDirectiveBlock=!1,!0):!1}_beginFieldList(){var e,n;if(this._insideInlineCode)return!1;let i=this._currentLine();if(i.startsWith("@"))return this._appendLine(),this._appendTextLine(i),this._eatLine(),!0;const r=!(i!=null&&i.endsWith(":"))&&!(i!=null&&i.endsWith("::"))&&((n=(e=i.match(/:/g))===null||e===void 0?void 0:e.length)!==null&&n!==void 0?n:0)%2===1,a=TL.test(i);if(r||a){const s=this._lineAt(this._lineNum-1);return!this._builder.endsWith(`\\
`)&&!this._builder.endsWith(`

`)&&!_S(s)&&(this._builder=this._builder.slice(0,-1)+`\\
`),i=this._convertIndent(i),this._appendTextLine(i),this._eatLine(),!0}return!1}_beginTableBlock(){if(this._insideInlineCode)return!1;const e=this._currentLine();return Ny.test(e)?(this._tableState={header:e.trimStart(),inHeader:!0},this._eatLine(),this._pushAndSetState(this._parseTableBlock),!0):!1}_parseTableBlock(){if(Bi(this._currentLineOrUndefined())||!this._tableState){this._tableState=void 0,this._popState();return}let e=this._currentLine();if(Ny.test(e)){this._eatLine(),this._appendLine(`
<br/>
`),this._popState(),this._tableState=void 0;return}else{let n="|";const i=this._tableState.header.split(" "),r=[];if(this._tableState.inHeader){do{let s=0;for(let l=0;l<i.length;l++){const u=i[l].length+1,f=e.slice(s,s+u);r[l]===void 0?r[l]=`${f} `:r[l]=r[l].concat(`<br>${f} `),s+=u}this._eatLine(),e=this._currentLine()}while(!Bi(this._currentLineOrUndefined())&&!uL.test(e)&&!Ny.test(e));this._tableState.inHeader=!1,r.forEach(s=>{n+=`${s}|`}),this._appendLine(n);const a=e.trimStart().replace(/=/g,"-").replace(" ","|");this._appendLine(`|${a}|`),this._eatLine()}else{let a=0;i.forEach(s=>{const l=s.length+1;n+=`${e.slice(a,a+l)}|`,a+=l}),this._appendLine(n),this._eatLine()}}}_beginList(){if(this._insideInlineCode)return!1;let e=this._currentLine();const n=dL.exec(e);if((n==null?void 0:n.length)===2)return n[1].length>=4&&(e=" ".repeat(n[1].length/2)+e.trimLeft()),this._appendTextLine(e),this._eatLine(),this._state!==this._parseList&&this._pushAndSetState(this._parseList),!0;const i=fL.exec(e);if((i==null?void 0:i.length)===2)return i[1].length===0?e=e=" "+e:i[1].length>=4&&(e=" ".repeat(i[1].length/2)+e.trimLeft()),this._appendTextLine(e),this._eatLine(),this._state!==this._parseList&&this._pushAndSetState(this._parseList),!0;const r=pL.exec(e);return(r==null?void 0:r.length)===2?(this._appendTextLine(e),this._eatLine(),!0):!1}_parseList(){if(Bi(this._currentLineOrUndefined())||this._currentLineIsOutsideBlock()){this._popState();return}if(!this._beginList()){const n=this._currentLine().trimStart();this._appendTextLine(n),this._eatLine()}}_parseDirective(){const e=yL.exec(this._currentLine());if(e!==null&&e.length===3){const n=e[1],i=e[2];n==="class"&&(this._appendDirectiveBlock=!0,this._appendLine(),this._appendLine("```"),this._appendLine(i),this._appendLine("```"),this._appendLine())}this._blockIndent===0?this._popState():this._state=this._parseDirectiveBlock,this._eatLine()}_parseDirectiveBlock(){if(!Bi(this._currentLineOrUndefined())&&this._currentLineIsOutsideBlock()){this._popState();return}this._appendDirectiveBlock&&this._appendTextLine(this._currentLine().trimLeft()),this._eatLine()}_appendLine(e){Bi(e)?this._skipAppendEmptyLine||(this._builder+=`
`,this._skipAppendEmptyLine=!0):(this._builder+=e+`
`,this._skipAppendEmptyLine=!1)}_append(e){this._builder+=e,this._skipAppendEmptyLine=!1}_trimOutputAndAppendLine(e,n=!1){this._builder=this._builder.trimRight(),this._skipAppendEmptyLine=!1,n||this._appendLine(),this._appendLine(e)}}function Ry(t){return t.search(aL)}function Bi(t){return t===void 0||!oL.test(t)}function _S(t){var e,n;return t!==void 0&&((n=(e=t.match(/^\s*[#`~=-]{3,}/))===null||e===void 0?void 0:e.length)!==null&&n!==void 0?n:0)>0}var qi={};Object.defineProperty(qi,"__esModule",{value:!0});qi.findTopNodeInScope=qi.getScopeHierarchy=qi.getScopeForNode=qi.getBuiltInScope=void 0;const kk=kt,AL=ze;function ML(t){let e=t;for(;e.type!==4;)e=e.parent;return e}qi.getBuiltInScope=ML;function Dk(t){const e=(0,AL.getEvaluationScopeNode)(t);return(0,kk.getScope)(e)}qi.getScopeForNode=Dk;function NL(t,e){const n=[];let i=t;for(;i;){const r=Dk(i);if(!r)return;if((n.length===0||n[n.length-1]!==r)&&n.push(r),r===e)return n;i=i.parent}return e?void 0:n}qi.getScopeHierarchy=NL;function RL(t,e){let n=t,i,r=!1;for(;n;){if((0,kk.getScope)(n)===e)r=!0;else if(r)return i;i=n,n=n.parent}}qi.findTopNodeInScope=RL;var is={},wn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isSameWithoutLiteralValue=t.combineTypes=t.findSubtype=t.removeFromUnion=t.removeNoneFromUnion=t.removeUnbound=t.removeIncompleteUnknownFromUnion=t.removeUnknownFromUnion=t.isTypeSame=t.getTypeAliasInfo=t.isOverloadedFunction=t.isFunction=t.isParamSpec=t.isUnpacked=t.isUnpackedClass=t.isUnpackedVariadicTypeVar=t.isVariadicTypeVar=t.isTypeVar=t.isModule=t.isClassInstance=t.isInstantiableClass=t.isClass=t.isPossiblyUnbound=t.isUnion=t.isUnbound=t.isAnyOrUnknown=t.isUnknown=t.isAny=t.isNoneTypeClass=t.isNoneInstance=t.isNever=t.TypeVarType=t.UnionType=t.TypeCondition=t.AnyType=t.NeverType=t.NoneType=t.OverloadedFunctionType=t.FunctionType=t.ClassType=t.ModuleType=t.UnknownType=t.UnboundType=t.TypeBase=t.maxTypeRecursionCount=t.EnumLiteral=t.WildcardTypeVarScopeId=void 0;const e=qt;t.WildcardTypeVarScopeId="*";class n{constructor($,B,X){this.className=$,this.itemName=B,this.itemType=X}}t.EnumLiteral=n,t.maxTypeRecursionCount=14;var i;(function(E){function $(Ue){return(Ue.flags&1)!==0}E.isInstantiable=$;function B(Ue){return(Ue.flags&2)!==0}E.isInstance=B;function X(Ue){return(Ue.flags&4)!==0}E.isAnnotated=X;function Z(Ue){return(Ue.flags&8)!==0}E.isSpecialForm=Z;function se(Ue){return Ue.flags|=8}E.setSpecialForm=se;function _e(Ue){return!!Ue.isAmbiguous}E.isAmbiguous=_e;function be(Ue){return{...Ue}}E.cloneType=be;function ve(Ue){(0,e.assert)(E.isInstantiable(Ue));const Ye=E.cloneType(Ue);return Ye.instantiableNestingLevel===void 0?(Ye.flags&=-2,Ye.flags|=2,delete Ye.instantiableNestingLevel):Ye.instantiableNestingLevel===1?delete Ye.instantiableNestingLevel:Ye.instantiableNestingLevel--,Ye}E.cloneTypeAsInstance=ve;function De(Ue){const Ye=E.cloneType(Ue);return E.isInstance(Ue)?(Ye.flags&=-3,Ye.flags|=1):Ye.instantiableNestingLevel=Ye.instantiableNestingLevel===void 0?1:Ye.instantiableNestingLevel,Ye}E.cloneTypeAsInstantiable=De;function Oe(Ue,Ye,it,ht,mt,Be){const qe=be(Ue);return qe.typeAliasInfo={name:Ye,fullName:it,typeParameters:mt,typeArguments:Be,typeVarScopeId:ht},qe}E.cloneForTypeAlias=Oe;function Je(Ue){const Ye=be(Ue);return Ye.flags|=4,Ye}E.cloneForAnnotated=Je;function $e(Ue,Ye){if(Ue.condition===void 0&&Ye===void 0)return Ue;const it=be(Ue);return it.condition=Ye,it}E.cloneForCondition=$e;function tt(Ue){if(Ue.isAmbiguous)return Ue;const Ye=be(Ue);return Ye.isAmbiguous=!0,Ye}E.cloneForAmbiguousType=tt})(i=t.TypeBase||(t.TypeBase={})),function(E){const $={category:0,flags:3};function B(){return $}E.create=B}(t.UnboundType||(t.UnboundType={}));var r;(function(E){const $={category:1,flags:3,isIncomplete:!1},B={category:1,flags:3,isIncomplete:!0};function X(Z=!1){return Z?B:$}E.create=X})(r=t.UnknownType||(t.UnknownType={})),function(E){function $(X,Z,se){return{category:8,fields:se||new Map,loaderFields:new Map,flags:1,moduleName:X,filePath:Z}}E.create=$;function B(X,Z){let se=X.fields.get(Z);if(X.loaderFields){if(!se)se=X.loaderFields.get(Z);else if(se.isExternallyHidden()){const _e=X.loaderFields.get(Z);_e&&!_e.isExternallyHidden()&&(se=_e)}}return se}E.getField=B}(t.ModuleType||(t.ModuleType={}));var a;(function(E){function $(me,we,He,_t,Nt,Gt,mn,Rt,ln){return{category:7,details:{name:me,fullName:we,moduleName:He,filePath:_t,flags:Nt,typeSourceId:Gt,baseClasses:[],declaredMetaclass:mn,effectiveMetaclass:Rt,mro:[],fields:new Map,typeParameters:[],docString:ln},flags:1}}E.createInstantiable=$;function B(me){if(i.isInstance(me))return me;const we=i.cloneTypeAsInstance(me);return we.flags&=-9,we.includeSubclasses=!0,we}E.cloneAsInstance=B;function X(me){return i.cloneTypeAsInstantiable(me)}E.cloneAsInstantiable=X;function Z(me,we,He,_t=!1,Nt,Gt){const mn=i.cloneType(me);return mn.typeArguments=we?we.map(Rt=>y(Rt)&&!Rt.isNoReturn?r.create():Rt):void 0,mn.isTypeArgumentExplicit=He,_t&&(mn.includeSubclasses=!0),mn.tupleTypeArguments=Nt?Nt.map(Rt=>y(Rt.type)?{type:r.create(),isUnbounded:Rt.isUnbounded}:Rt):void 0,Gt!==void 0&&(mn.isEmptyContainer=Gt),mn}E.cloneForSpecialization=Z;function se(me,we){const He=i.cloneType(me);return He.literalValue=we,He}E.cloneWithLiteral=se;function _e(me,we){const He=i.cloneType(me);return He.aliasName=we,He}E.cloneForTypingAlias=_e;function be(me,we){const He=i.cloneType(me);return He.typedDictNarrowedEntries=we,He}E.cloneForNarrowedTypedDictEntries=be;function ve(me,we){const He=i.cloneType(me);return He.details={...He.details},He.details.typeParameters=we,He}E.cloneWithNewTypeParameters=ve;function De(me,we,He){const _t=i.cloneType(me);return _t.typeGuardType=we,_t.isStrictTypeGuard=He,_t}E.cloneForTypeGuard=De;function Oe(me){const we=i.cloneType(me);return we.details={...we.details},we.details.fields=new Map(we.details.fields),we.details.mro=[...we.details.mro],we.details.mro[0]=X(we),we}E.cloneForSymbolTableUpdate=Oe;function Je(me,we=!0){const He=i.cloneType(me);return He.isUnpacked=we,He}E.cloneForUnpacked=Je;function $e(me,we){return me.literalValue===void 0?we.literalValue===void 0:we.literalValue===void 0?!1:me.literalValue instanceof n?we.literalValue instanceof n?me.literalValue.itemName===we.literalValue.itemName:!1:me.literalValue===we.literalValue}E.isLiteralValueSame=$e;function tt(me){return me.details.typeParameters.length>0&&me.typeArguments===void 0}E.isUnspecialized=tt;function Ue(me,we){return!(me.details.flags&2)&&!me.aliasName?!1:we!==void 0?me.details.name===we:!0}E.isSpecialBuiltIn=Ue;function Ye(me,we){if(!(me.details.flags&1))return!1;if(we!==void 0){const He=Array.isArray(we)?we:[we];return He.some(_t=>_t===me.details.name)||He.some(_t=>_t===me.aliasName)}return!0}E.isBuiltIn=Ye;function it(me){return me.details.mro.some(we=>!te(we))}E.derivesFromAnyOrUnknown=it;function ht(me){return!!(me.details.flags&512)}E.supportsAbstractMethods=ht;function mt(me){return!!(me.details.flags&4)}E.isDataClass=mt;function Be(me){return!!(me.details.flags&16)}E.isSkipSynthesizedDataClassInit=Be;function qe(me){return!!(me.details.flags&32)}E.isSkipSynthesizedDataClassEq=qe;function dt(me){return!!(me.details.flags&8)}E.isFrozenDataClass=dt;function Xt(me){return!!(me.details.flags&64)}E.isSynthesizedDataclassOrder=Xt;function En(me){return!!(me.details.flags&2097152)}E.isDataClassKeywordOnlyParams=En;function Ti(me){return!!(me.details.flags&33554432)}E.isGeneratedDataClassSlots=Ti;function Ki(me){return!!(me.details.flags&67108864)}E.isSynthesizeDataClassUnsafeHash=Ki;function Se(me){return!!(me.details.flags&128)}E.isTypedDictClass=Se;function Me(me){return!!(me.details.flags&256)}E.isCanOmitDictValues=Me;function je(me){return!!(me.details.flags&1048576)}E.isEnumClass=je;function ct(me){return!!(me.details.flags&2048)}E.isPropertyClass=ct;function pt(me){return!!(me.details.flags&4194304)}E.isClassProperty=pt;function vt(me){return!!(me.details.flags&4096)}E.isFinal=vt;function Vt(me){return!!(me.details.flags&8192)}E.isProtocolClass=Vt;function Tt(me){return!!(me.details.flags&8388608)}E.isDefinedInStub=Tt;function hn(me){return!!(me.details.flags&16384)}E.isPseudoGenericClass=hn;function sn(me){return me.details.dataClassEntries||[]}E.getDataClassEntries=sn;function Pn(me){return!!(me.details.flags&32768)}E.isRuntimeCheckable=Pn;function Hi(me){return!!(me.details.flags&65536)}E.isTypingExtensionClass=Hi;function Yn(me){return!!(me.details.flags&131072)}E.isPartiallyEvaluated=Yn;function z(me){return!!(me.details.flags&262144)}E.hasCustomClassGetItem=z;function Q(me){return!!(me.details.flags&524288)}E.isTupleClass=Q;function fe(me){return!!(me.details.flags&16777216)}E.isReadOnlyInstanceVariables=fe;function ge(me){return me.details.typeParameters}E.getTypeParameters=ge;function Ae(me){return me.details.mro.some(we=>V(we))}E.hasUnknownBaseClass=Ae;function Fe(me){return E.isPartiallyEvaluated(me)||me.details.mro.some(we=>te(we)&&E.isPartiallyEvaluated(we))}E.isHierarchyPartiallyEvaluated=Fe;function de(me,we,He=0){if(He>t.maxTypeRecursionCount||(He++,me.details===we.details))return!0;const _t=me.details,Nt=we.details;if(_t===Nt)return!0;if(_t.fullName!==Nt.fullName||_t.flags!==Nt.flags||_t.typeSourceId!==Nt.typeSourceId||_t.baseClasses.length!==Nt.baseClasses.length||_t.typeParameters.length!==Nt.typeParameters.length)return!1;if(E.isBuiltIn(me,"NamedTuple")&&E.isBuiltIn(we,"NamedTuple")||E.isBuiltIn(me,"tuple")&&E.isBuiltIn(we,"tuple"))return!0;for(let Gt=0;Gt<_t.baseClasses.length;Gt++)if(!ee(_t.baseClasses[Gt],Nt.baseClasses[Gt],!0,void 0,He))return!1;if((_t.declaredMetaclass||Nt.declaredMetaclass)&&(!_t.declaredMetaclass||!Nt.declaredMetaclass||!ee(_t.declaredMetaclass,Nt.declaredMetaclass,!0,void 0,He)))return!1;for(let Gt=0;Gt<_t.typeParameters.length;Gt++)if(!ee(_t.typeParameters[Gt],Nt.typeParameters[Gt],!0,void 0,He))return!1;return!0}E.isSameGenericClass=de;function Ce(me,we,He){if(de(me,we))return He&&He.push(me),!0;if(Ye(me)&&Ye(we,"object"))return He&&He.push(we),!0;for(const _t of me.details.baseClasses)if(q(_t)){if(Ce(_t,we,He))return He&&He.push(me),!0}else if(V(_t))return He&&He.push(r.create()),!0;return!1}E.isDerivedFrom=Ce})(a=t.ClassType||(t.ClassType={}));var s;(function(E){function $(z,Q,fe,ge,Ae){return Z(z,Q,fe,ge,2,Ae)}E.createInstance=$;function B(z,Q){return Z("","","",z,1,Q)}E.createInstantiable=B;function X(z,Q=0){return Z(z,"","",Q|64,2)}E.createSynthesizedInstance=X;function Z(z,Q,fe,ge,Ae,Fe){return{category:5,details:{name:z,fullName:Q,moduleName:fe,flags:ge,parameters:[],docString:Fe},flags:Ae}}function se(z,Q=!1,fe,ge){var Ae;const Fe=Z(z.details.name,z.details.fullName,z.details.moduleName,z.details.flags,z.flags,z.details.docString);return Fe.details={...z.details},Fe.boundToType=fe,Fe.preBoundFlags=Fe.details.flags,Q&&(z.details.parameters.length>0&&z.details.parameters[0].category===0?(z.details.parameters.length>0&&!z.details.parameters[0].isTypeInferred&&(Fe.strippedFirstParamType=sn(z,0)),Fe.details.parameters=z.details.parameters.slice(1)):Q=!1,Fe.details.flags&=-4,Fe.details.flags|=4),z.typeAliasInfo!==void 0&&(Fe.typeAliasInfo=z.typeAliasInfo),z.specializedTypes&&(Fe.specializedTypes={parameterTypes:Q?z.specializedTypes.parameterTypes.slice(1):z.specializedTypes.parameterTypes,parameterDefaultArgs:Q?(Ae=z.specializedTypes.parameterDefaultArgs)===null||Ae===void 0?void 0:Ae.slice(1):z.specializedTypes.parameterDefaultArgs,returnType:z.specializedTypes.returnType}),Fe.inferredReturnType=z.inferredReturnType,Fe.boundTypeVarScopeId=ge,Fe}E.clone=se;function _e(z){const Q=i.cloneTypeAsInstance(z);return Q.flags&=-9,Q}E.cloneAsInstance=_e;function be(z){const Q=i.cloneTypeAsInstantiable(z);return Q.flags&=-9,Q}E.cloneAsInstantiable=be;function ve(z,Q,fe){const ge=Z(z.details.name,z.details.fullName,z.details.moduleName,z.details.flags,z.flags,z.details.docString);return ge.details=z.details,(0,e.assert)(Q.parameterTypes.length===z.details.parameters.length),Q.parameterDefaultArgs&&(0,e.assert)(Q.parameterDefaultArgs.length===z.details.parameters.length),ge.specializedTypes=Q,fe&&(ge.inferredReturnType=fe),ge}E.cloneForSpecialization=ve;function De(z,Q){const fe=Z(z.details.name,z.details.fullName,z.details.moduleName,z.details.flags,z.flags,z.details.docString);return fe.details={...z.details},delete fe.details.paramSpec,Q&&(fe.details.parameters=[...z.details.parameters,...Q.parameters.map(ge=>({category:ge.category,name:ge.name,hasDefault:ge.hasDefault,isNameSynthesized:ge.isNameSynthesized,hasDeclaredType:!0,type:ge.type}))],fe.details.docString||(fe.details.docString=Q.docString),fe.details.flags=Q.flags&32775|64,E.isParamSpecValue(z)&&(fe.details.flags|=65536),z.specializedTypes&&(fe.specializedTypes={parameterTypes:[...z.specializedTypes.parameterTypes],returnType:z.specializedTypes.returnType},z.specializedTypes.parameterDefaultArgs&&(fe.specializedTypes.parameterDefaultArgs=[...z.specializedTypes.parameterDefaultArgs]),Q.parameters.forEach(ge=>{fe.specializedTypes.parameterTypes.push(ge.type),fe.specializedTypes.parameterDefaultArgs&&fe.specializedTypes.parameterDefaultArgs.push(void 0)})),fe.details.paramSpec=Q.paramSpec),fe}E.cloneForParamSpec=De;function Oe(z,Q){const fe=i.cloneType(z);return fe.details={...z.details},fe.details.flags=Q,fe}E.cloneWithNewFlags=Oe;function Je(z,Q){const fe=i.cloneType(z);if(fe.details={...z.details},fe.details.parameters=fe.details.parameters.slice(0,fe.details.parameters.length-2),Q.parameters.some(ge=>ge.category===0&&!ge.name)&&fe.details.parameters.length>0){const ge=fe.details.parameters[fe.details.parameters.length-1];ge.category===0&&!ge.name&&fe.details.parameters.pop()}return Q.parameters.forEach(ge=>{fe.details.parameters.push({category:ge.category,name:ge.name,hasDefault:ge.hasDefault,isNameSynthesized:ge.isNameSynthesized,hasDeclaredType:!0,type:ge.type})}),fe.details.paramSpec=Q.paramSpec,fe.details.docString||(fe.details.docString=Q.docString),fe}E.cloneForParamSpecApplication=Je;function $e(z,Q){const fe=Z(z.details.name,z.details.fullName,z.details.moduleName,z.details.flags,z.flags,z.details.docString);return fe.details={...z.details},fe.details.parameters=fe.details.parameters.slice(0,fe.details.parameters.length-2),z.specializedTypes&&(fe.specializedTypes={...z.specializedTypes},fe.specializedTypes.parameterTypes=fe.specializedTypes.parameterTypes.slice(0,fe.specializedTypes.parameterTypes.length-2),fe.specializedTypes.parameterDefaultArgs&&(fe.specializedTypes.parameterDefaultArgs=fe.specializedTypes.parameterDefaultArgs.slice(0,fe.specializedTypes.parameterDefaultArgs.length-2))),fe.details.paramSpec||(fe.details.paramSpec=Q),fe}E.cloneRemoveParamSpecVariadics=$e;function tt(z,Q=!1){Ue(Q).forEach(fe=>{E.addParameter(z,fe)})}E.addDefaultParameters=tt;function Ue(z=!1){return[{category:1,name:"args",type:z?r.create():o.create(),hasDeclaredType:!z},{category:2,name:"kwargs",type:z?r.create():o.create(),hasDeclaredType:!z}]}E.getDefaultParameters=Ue;function Ye(z){let Q=!1,fe=!1;for(let ge=0;ge<z.details.parameters.length;ge++){const Ae=z.details.parameters[ge];if(!!Ae.name&&(Ae.category===0||(Ae.category===1?Q=!0:Ae.category===2&&(fe=!0),!V(E.getEffectiveParameterType(z,ge)))))return!1}return Q&&fe}E.hasDefaultParameters=Ye;function it(z){return(z.details.flags&7)===0}E.isInstanceMethod=it;function ht(z){return(z.details.flags&1)!==0}E.isConstructorMethod=ht;function mt(z){return(z.details.flags&4)!==0}E.isStaticMethod=mt;function Be(z){return(z.details.flags&2)!==0}E.isClassMethod=Be;function qe(z){return(z.details.flags&8)!==0}E.isAbstractMethod=qe;function dt(z){return(z.details.flags&16)!==0}E.isGenerator=dt;function Xt(z){return(z.details.flags&64)!==0}E.isSynthesizedMethod=Xt;function En(z){return(z.details.flags&128)!==0}E.isSkipConstructorCheck=En;function Ti(z){return(z.details.flags&256)!==0}E.isOverloaded=Ti;function Ki(z){return(z.details.flags&32)!==0}E.isDefaultParameterCheckDisabled=Ki;function Se(z){return(z.details.flags&512)!==0}E.isAsync=Se;function Me(z){return(z.details.flags&1024)!==0}E.isWrapReturnTypeInAwait=Me;function je(z){return(z.details.flags&2048)!==0}E.isStubDefinition=je;function ct(z){return(z.details.flags&4096)!==0}E.isPyTypedDefinition=ct;function pt(z){return(z.details.flags&8192)!==0}E.isFinal=pt;function vt(z){return(z.details.flags&16384)!==0}E.hasUnannotatedParams=vt;function Vt(z){return(z.details.flags&32768)!==0}E.shouldSkipArgsKwargsCompatibilityCheck=Vt;function Tt(z){return(z.details.flags&65536)!==0}E.isParamSpecValue=Tt;function hn(z){return!!(z.details.flags&131072)}E.isPartiallyEvaluated=hn;function sn(z,Q){return(0,e.assert)(Q<z.details.parameters.length,"Parameter types array overflow"),z.specializedTypes&&Q<z.specializedTypes.parameterTypes.length?z.specializedTypes.parameterTypes[Q]:z.details.parameters[Q].type}E.getEffectiveParameterType=sn;function Pn(z,Q){var fe;if((0,e.assert)(Q<z.details.parameters.length,"Parameter types array overflow"),((fe=z.specializedTypes)===null||fe===void 0?void 0:fe.parameterDefaultArgs)&&Q<z.specializedTypes.parameterDefaultArgs.length){const ge=z.specializedTypes.parameterDefaultArgs[Q];if(ge)return ge}return z.details.parameters[Q].defaultType}E.getEffectiveParameterDefaultArgType=Pn;function Hi(z,Q){z.details.parameters.push(Q)}E.addParameter=Hi;function Yn(z){return z.specializedTypes&&z.specializedTypes.returnType?z.specializedTypes.returnType:z.details.declaredReturnType}E.getSpecializedReturnType=Yn})(s=t.FunctionType||(t.FunctionType={})),function(E){function $(X){return{category:6,overloads:X,flags:2}}E.create=$;function B(X,Z){X.overloads.push(Z)}E.addOverload=B}(t.OverloadedFunctionType||(t.OverloadedFunctionType={})),function(E){const $={category:3,flags:2},B={category:3,flags:1};function X(){return $}E.createInstance=X;function Z(){return B}E.createType=Z}(t.NoneType||(t.NoneType={}));var l;(function(E){const $={category:4,flags:3,isNoReturn:!1},B={category:4,flags:3,isNoReturn:!0};function X(){return $}E.createNever=X;function Z(){return B}E.createNoReturn=Z})(l=t.NeverType||(t.NeverType={}));var o;(function(E){const $={category:2,isEllipsis:!1,flags:3},B={category:2,isEllipsis:!0,flags:3};function X(Z=!1){return Z?B:$}E.create=X})(o=t.AnyType||(t.AnyType={}));var u;(function(E){function $(se,_e){if(!se)return _e;if(!_e)return se;const be=[...se];return _e.forEach(ve=>{be.some(De=>B(ve,De)===0)||be.push(ve)}),be.sort(B)}E.combine=$;function B(se,_e){return se.typeVarName<_e.typeVarName?-1:se.typeVarName>_e.typeVarName?1:se.constraintIndex<_e.constraintIndex?-1:se.constraintIndex>_e.constraintIndex?1:0}function X(se,_e){return se?!_e||se.length!==_e.length?!1:se.find((be,ve)=>be.typeVarName!==_e[ve].typeVarName||be.constraintIndex!==_e[ve].constraintIndex)===void 0:!_e}E.isSame=X;function Z(se,_e){if(!se||!_e)return!0;for(const be of se){let ve=!1;const De=_e.find(Oe=>be.typeVarName===Oe.typeVarName?(ve=!0,be.constraintIndex===Oe.constraintIndex):!1);if(ve&&!De)return!1}return!0}E.isCompatible=Z})(u=t.TypeCondition||(t.TypeCondition={}));var f;(function(E){function $(){return{category:9,subtypes:[],flags:3}}E.create=$;function B(se,_e){U(_e)&&_e.literalValue!==void 0&&_e.condition===void 0&&(a.isBuiltIn(_e,"str")?(se.literalStrMap===void 0&&(se.literalStrMap=new Map),se.literalStrMap.set(_e.literalValue,_e)):a.isBuiltIn(_e,"int")&&(se.literalIntMap===void 0&&(se.literalIntMap=new Map),se.literalIntMap.set(_e.literalValue,_e))),se.flags&=_e.flags,se.subtypes.push(_e)}E.addType=B;function X(se,_e,be=0){if(U(_e)&&_e.condition===void 0&&_e.literalValue!==void 0){if(a.isBuiltIn(_e,"str")&&se.literalStrMap!==void 0)return se.literalStrMap.has(_e.literalValue);if(a.isBuiltIn(_e,"int")&&se.literalIntMap!==void 0)return se.literalIntMap.has(_e.literalValue)}return se.subtypes.find(ve=>ee(ve,_e,void 0,void 0,be))!==void 0}E.containsType=X;function Z(se,_e){if(_e.category===9){const be=_e.typeAliasInfo?[_e]:_e.typeAliasSources;be&&(se.typeAliasSources||(se.typeAliasSources=new Set),be.forEach(ve=>{se.typeAliasSources.add(ve)}))}}E.addTypeAliasSource=Z})(f=t.UnionType||(t.UnionType={})),function(E){function $(it){return $e(it,!1,2)}E.createInstance=$;function B(it,ht=!1){return $e(it,ht,1)}E.createInstantiable=B;function X(it){(0,e.assert)(i.isInstantiable(it));const ht=i.cloneTypeAsInstance(it);return ht.flags&=-9,ht}E.cloneAsInstance=X;function Z(it){const ht=i.cloneTypeAsInstantiable(it);return ht.flags&=-9,ht}E.cloneAsInstantiable=Z;function se(it,ht,mt,Be){const qe=i.cloneType(it);return qe.nameWithScope=Je(it.details.name,ht),qe.scopeId=ht,qe.scopeName=mt,qe.scopeType=Be,qe}E.cloneForScopeId=se;function _e(it,ht=!1){(0,e.assert)(it.details.isVariadic);const mt=i.cloneType(it);return mt.isVariadicUnpacked=!0,mt.isVariadicInUnion=ht,mt}E.cloneForUnpacked=_e;function be(it){(0,e.assert)(it.details.isVariadic);const ht=i.cloneType(it);return ht.isVariadicUnpacked=!1,ht.isVariadicInUnion=!1,ht}E.cloneForPacked=be;function ve(it){if(it.details.isParamSpec||it.details.isVariadic||it.details.variance===0&&it.details.boundType===void 0&&it.details.constraints.length===0)return it;const ht=i.cloneType(it);return ht.details={...ht.details},ht.details.variance=0,ht.details.boundType=void 0,ht.details.constraints=[],ht}E.cloneAsInvariant=ve;function De(it,ht){const mt=i.cloneType(it);return mt.paramSpecAccess=ht,mt}E.cloneForParamSpecAccess=De;function Oe(it,ht){(0,e.assert)(it.details.isSynthesizedSelf);const mt=i.cloneType(it);return mt.details={...mt.details},mt.details.boundType=ht,mt}E.cloneAsSpecializedSelf=Oe;function Je(it,ht){return`${it}.${ht}`}E.makeNameWithScope=Je;function $e(it,ht,mt){return{category:10,details:{name:it,constraints:[],variance:0,isParamSpec:ht,isVariadic:!1,isSynthesized:!1},flags:mt}}function tt(it,ht){it.details.constraints.push(ht)}E.addConstraint=tt;function Ue(it){return it.nameWithScope||it.details.name}E.getNameWithScope=Ue;function Ye(it){return it.scopeName?`${it.details.name}@${it.scopeName}`:it.details.name}E.getReadableName=Ye}(t.TypeVarType||(t.TypeVarType={}));function y(E){return E.category===4}t.isNever=y;function p(E){return E.category===3&&i.isInstance(E)}t.isNoneInstance=p;function b(E){return E.category===3&&i.isInstantiable(E)}t.isNoneTypeClass=b;function v(E){return E.category===2}t.isAny=v;function m(E){return E.category===1}t.isUnknown=m;function V(E){return E.category===2||E.category===1?!0:P(E)?E.subtypes.find($=>!V($))===void 0:!1}t.isAnyOrUnknown=V;function F(E){return E.category===0}t.isUnbound=F;function P(E){return E.category===9}t.isUnion=P;function G(E){return F(E)?!0:P(E)?E.subtypes.find($=>G($))!==void 0:!1}t.isPossiblyUnbound=G;function te(E){return E.category===7}t.isClass=te;function q(E){return E.category===7&&i.isInstantiable(E)}t.isInstantiableClass=q;function U(E){return E.category===7&&i.isInstance(E)}t.isClassInstance=U;function D(E){return E.category===8}t.isModule=D;function M(E){return E.category===10}t.isTypeVar=M;function T(E){return E.category===10&&E.details.isVariadic}t.isVariadicTypeVar=T;function N(E){return P(E)&&E.subtypes.length===1&&(E=E.subtypes[0]),E.category===10&&E.details.isVariadic&&!!E.isVariadicUnpacked}t.isUnpackedVariadicTypeVar=N;function J(E){return!(!te(E)||!E.isUnpacked)}t.isUnpackedClass=J;function L(E){return N(E)||J(E)}t.isUnpacked=L;function ce(E){return E.category===10&&E.details.isParamSpec}t.isParamSpec=ce;function ue(E){return E.category===5}t.isFunction=ue;function W(E){return E.category===6}t.isOverloadedFunction=W;function Y(E){if(E.typeAliasInfo)return E.typeAliasInfo;if(M(E)&&E.details.recursiveTypeAliasName&&E.details.boundType&&E.details.boundType.typeAliasInfo)return E.details.boundType.typeAliasInfo}t.getTypeAliasInfo=Y;function ee(E,$,B=!1,X=!1,Z=0){var se,_e;if(E===$)return!0;if(E.category!==$.category||!X&&E.flags!==$.flags)return!1;if(Z>t.maxTypeRecursionCount)return!0;switch(Z++,E.category){case 7:{const be=$;if(!a.isSameGenericClass(E,be,Z)||!u.isSame(E.condition,$.condition))return!1;if(!B||!a.isPseudoGenericClass(E))if(E.tupleTypeArguments&&be.tupleTypeArguments){const ve=E.tupleTypeArguments||[],De=be.tupleTypeArguments||[];if(ve.length!==De.length)return!1;for(let Oe=0;Oe<ve.length;Oe++)if(!ee(ve[Oe].type,De[Oe].type,B,!1,Z)||ve[Oe].isUnbounded!==De[Oe].isUnbounded)return!1}else{const ve=E.typeArguments||[],De=be.typeArguments||[],Oe=Math.max(ve.length,De.length);for(let Je=0;Je<Oe;Je++){const $e=Je<ve.length?ve[Je]:o.create(),tt=Je<De.length?De[Je]:o.create();if(!ee($e,tt,B,!1,Z))return!1}}return!!a.isLiteralValueSame(E,be)}case 5:{const be=$,ve=E.details.parameters,De=be.details.parameters;if(ve.length!==De.length)return!1;const Oe=ve.findIndex(Ue=>Ue.category===0&&!Ue.name),Je=De.findIndex(Ue=>Ue.category===0&&!Ue.name);for(let Ue=0;Ue<ve.length;Ue++){const Ye=ve[Ue],it=De[Ue];if(Ye.category!==it.category)return!1;const ht=Oe!==void 0&&Ue>=Oe,mt=Je!==void 0&&Ue>=Je;if(ht!==mt||ht&&Ye.name!==it.name)return!1;const Be=s.getEffectiveParameterType(E,Ue),qe=s.getEffectiveParameterType(be,Ue);if(!ee(Be,qe,B,!1,Z))return!1}let $e=E.details.declaredReturnType;E.specializedTypes&&E.specializedTypes.returnType&&($e=E.specializedTypes.returnType),!$e&&E.inferredReturnType&&($e=E.inferredReturnType);let tt=be.details.declaredReturnType;return be.specializedTypes&&be.specializedTypes.returnType&&(tt=be.specializedTypes.returnType),!tt&&be.inferredReturnType&&(tt=be.inferredReturnType),!(($e||tt)&&(!$e||!tt||!ee($e,tt,B,!1,Z)))}case 6:{const be=$;if(E.overloads.length!==be.overloads.length)return!1;for(let ve=0;ve<E.overloads.length;ve++)if(!ee(E.overloads[ve],be.overloads[ve],B,X,Z))return!1;return!0}case 9:{const be=$,ve=E.subtypes,De=be.subtypes;return ve.length!==De.length?!1:d(E,Oe=>!f.containsType(be,Oe,Z))===void 0}case 10:{const be=$;if(E.scopeId!==be.scopeId)return!1;if(E.details.recursiveTypeParameters&&be.details.recursiveTypeParameters){const $e=((se=E==null?void 0:E.typeAliasInfo)===null||se===void 0?void 0:se.typeArguments)||[],tt=((_e=$==null?void 0:$.typeAliasInfo)===null||_e===void 0?void 0:_e.typeArguments)||[],Ue=Math.max($e.length,tt.length);for(let Ye=0;Ye<Ue;Ye++){const it=Ye<$e.length?$e[Ye]:o.create(),ht=Ye<tt.length?tt[Ye]:o.create();if(!ee(it,ht,B,!1,Z))return!1}}if(E.details===be.details)return!0;if(E.details.name!==be.details.name||E.details.isParamSpec!==be.details.isParamSpec||E.details.isVariadic!==be.details.isVariadic||E.details.isSynthesized!==be.details.isSynthesized||E.details.variance!==be.details.variance||E.scopeId!==be.scopeId)return!1;const ve=E.details.boundType,De=be.details.boundType;if(ve){if(!De||!ee(ve,De,B,!1,Z))return!1}else if(De)return!1;const Oe=E.details.constraints,Je=be.details.constraints;if(Oe.length!==Je.length)return!1;for(let $e=0;$e<Oe.length;$e++)if(!ee(Oe[$e],Je[$e],B,!1,Z))return!1;return!0}case 8:{const be=$;return E.fields===be.fields||E.fields.size===0&&be.fields.size===0}}return!0}t.isTypeSame=ee;function H(E){return re(E,$=>m($))}t.removeUnknownFromUnion=H;function le(E){return re(E,$=>m($)&&$.isIncomplete)}t.removeIncompleteUnknownFromUnion=le;function R(E){return P(E)?re(E,$=>F($)):F(E)?r.create():E}t.removeUnbound=R;function ae(E){return re(E,$=>p($))}t.removeNoneFromUnion=ae;function re(E,$){if(P(E)){const B=E.subtypes.filter(X=>!$(X));if(B.length<E.subtypes.length){const X=k(B);return P(X)&&f.addTypeAliasSource(X,E),X}}return E}t.removeFromUnion=re;function d(E,$){return P(E)?E.subtypes.find(B=>$(B)):$(E)?E:void 0}t.findSubtype=d;function k(E,$){let B=!1;if(E.some(ve=>ve.category===4)&&(E=E.filter(ve=>(ve.category===4&&ve.isNoReturn&&(B=!0),ve.category!==4))),E.length===0)return B?l.createNoReturn():l.createNever();let X=!0;if(E.length>1){for(let ve=1;ve<E.length;ve++)if(E[ve]!==E[0]){X=!1;break}}if(X)return E[0];let Z=[];const se=new Set;for(const ve of E)P(ve)?(Z=Z.concat(ve.subtypes),ve.typeAliasInfo?se.add(ve):ve.typeAliasSources&&ve.typeAliasSources.forEach(De=>{se.add(De)})):Z.push(ve);if(Z=Z.sort((ve,De)=>U(ve)&&ve.literalValue!==void 0||q(ve)&&ve.literalValue!==void 0?1:U(De)&&De.literalValue!==void 0||q(De)&&De.literalValue!==void 0?-1:U(ve)&&ve.isEmptyContainer?1:U(De)&&De.isEmptyContainer?-1:0),Z.length===0)return r.create();const _e=f.create();se.size>0&&(_e.typeAliasSources=se);let be=!1;return Z.forEach((ve,De)=>{De===0?f.addType(_e,ve):$===void 0||_e.subtypes.length<$?ye(_e,ve):be=!0}),be?o.create():_e.subtypes.length===1?_e.subtypes[0]:_e}t.combineTypes=k;function oe(E,$){return ee(E,$)?!0:q($)&&$.literalValue!==void 0||U($)&&$.literalValue!==void 0?($=a.cloneWithLiteral($,void 0),ee(E,$)):!1}t.isSameWithoutLiteralValue=oe;function ye(E,$){if(U($)&&$.condition===void 0){if(a.isBuiltIn($,"str")&&$.literalValue!==void 0&&E.literalStrMap!==void 0){E.literalStrMap.has($.literalValue)||f.addType(E,$);return}else if(a.isBuiltIn($,"int")&&$.literalValue!==void 0&&E.literalIntMap!==void 0){E.literalIntMap.has($.literalValue)||f.addType(E,$);return}}for(let B=0;B<E.subtypes.length;B++){const X=E.subtypes[B];if(ee(X,$))return;if(U(X)&&U($)){if(oe(X,$)&&X.literalValue===void 0)return;if(a.isBuiltIn(X,"bool")&&!X.condition&&a.isBuiltIn($,"bool")&&!$.condition&&$.literalValue!==void 0&&!$.literalValue===X.literalValue){E.subtypes[B]=a.cloneWithLiteral(X,void 0);return}}if(U($)&&$.isEmptyContainer&&U(X)&&a.isSameGenericClass(X,$))return}f.addType(E,$)}})(wn);var $n={},Li={};Object.defineProperty(Li,"__esModule",{value:!0});Li.Symbol=Li.indeterminateSymbolId=void 0;const wf=Sn;let OL=1;function xL(){return OL++}Li.indeterminateSymbolId=0;class pv{constructor(e){this.id=xL(),this._flags=e}static createWithType(e,n){const i=new pv(e);return i._synthesizedType=n,i}isInitiallyUnbound(){return!!(this._flags&1)}setIsExternallyHidden(){this._flags|=2}isExternallyHidden(){return!!(this._flags&2)}setIsIgnoredForProtocolMatch(){this._flags|=64}isIgnoredForProtocolMatch(){return!!(this._flags&64)}setIsClassMember(){this._flags|=4}isClassMember(){return!!(this._flags&4)}setIsInstanceMember(){this._flags|=8}isInstanceMember(){return!!(this._flags&8)}setIsClassVar(){this._flags|=128}isClassVar(){return!!(this._flags&128)}setIsInitVar(){this._flags|=1024}isInitVar(){return!!(this._flags&1024)}setIsInDunderAll(){this._flags|=256}isInDunderAll(){return!!(this._flags&256)}setIsPrivateMember(){this._flags|=32}isPrivateMember(){return!!(this._flags&32)}setPrivatePyTypedImport(){this._flags|=512}isPrivatePyTypedImport(){return!!(this._flags&512)}addDeclaration(e){if(this._declarations){const n=this._declarations.findIndex(i=>(0,wf.areDeclarationsSame)(i,e));if(n<0)this._declarations.push(e),this._declarations.forEach(i=>{i.type===1&&i.typeAliasName&&delete i.typeAliasName});else{const i=this._declarations[n];(0,wf.hasTypeForDeclaration)(e)?(this._declarations[n]=e,i.type===1&&e.type===1&&!e.inferredTypeSource&&i.inferredTypeSource&&(e.inferredTypeSource=i.inferredTypeSource)):e.type===1&&i.type===1&&(e.isFinal&&(i.isFinal=!0),e.typeAliasAnnotation&&(i.typeAliasAnnotation=e.typeAliasAnnotation,i.typeAliasName=e.typeAliasName),!i.inferredTypeSource&&e.inferredTypeSource&&(i.inferredTypeSource=e.inferredTypeSource))}}else this._declarations=[e]}hasDeclarations(){return this._declarations?this._declarations.length>0:!1}getDeclarations(){return this._declarations?this._declarations:[]}hasTypedDeclarations(){return this._synthesizedType?!0:this.getDeclarations().some(e=>(0,wf.hasTypeForDeclaration)(e))}getTypedDeclarations(){return this.getDeclarations().filter(e=>(0,wf.hasTypeForDeclaration)(e))}getSynthesizedType(){return this._synthesizedType}}Li.Symbol=pv;var Ii={};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.isNotRequiredTypedDictVariable=Ii.isRequiredTypedDictVariable=Ii.isFinalVariable=Ii.isTypedDictMemberAccessedThroughIndex=Ii.getLastTypedDeclaredForSymbol=void 0;const LL=Sn;function zL(t){const e=t.getTypedDeclarations();if(e.length>0)return e[e.length-1]}Ii.getLastTypedDeclaredForSymbol=zL;function UL(t){const e=t.getTypedDeclarations();return e.length>0&&e[e.length-1].type===1}Ii.isTypedDictMemberAccessedThroughIndex=UL;function VL(t){return t.getDeclarations().some(e=>(0,LL.isFinalVariableDeclaration)(e))}Ii.isFinalVariable=VL;function BL(t){return t.getDeclarations().some(e=>e.type===1&&!!e.isRequired)}Ii.isRequiredTypedDictVariable=BL;function WL(t){return t.getDeclarations().some(e=>e.type===1&&!!e.isNotRequired)}Ii.isNotRequiredTypedDictVariable=WL;var xr={};Object.defineProperty(xr,"__esModule",{value:!0});xr.TypeVarContext=void 0;const Ef=qt,Ff=wn,$L=$n;class hv{constructor(e){this._isLocked=!1,Array.isArray(e)?this._solveForScopes=e:e!==void 0?this._solveForScopes=[e]:this._solveForScopes=void 0,this._typeVarMap=new Map,this._paramSpecMap=new Map}clone(){const e=new hv;return this._solveForScopes&&(e._solveForScopes=[...this._solveForScopes]),this._typeVarMap.forEach(n=>{e.setTypeVarType(n.typeVar,n.narrowBound,n.wideBound,n.retainLiteral)}),this._paramSpecMap.forEach(n=>{e.setParamSpec(n.paramSpec,n.type)}),this._variadicTypeVarMap&&this._variadicTypeVarMap.forEach(n=>{e.setVariadicTypeVar(n.typeVar,n.types)}),e._isLocked=this._isLocked,e}copyFromClone(e){this._typeVarMap=e._typeVarMap,this._paramSpecMap=e._paramSpecMap,this._variadicTypeVarMap=e._variadicTypeVarMap,this._isLocked=e._isLocked}getSolveForScopes(){return this._solveForScopes}hasSolveForScope(e){return e!==void 0&&this._solveForScopes!==void 0&&this._solveForScopes.some(n=>n===e||n===Ff.WildcardTypeVarScopeId)}setSolveForScopes(e){this._solveForScopes=e}addSolveForScope(e){e!==void 0&&!this.hasSolveForScope(e)&&(this._solveForScopes||(this._solveForScopes=[]),this._solveForScopes.push(e))}isEmpty(){return this._typeVarMap.size===0&&this._paramSpecMap.size===0}getScore(){let e=0;return this._typeVarMap.forEach(n=>{e+=1;const i=this.getTypeVarType(n.typeVar);e+=1-this._getComplexityScoreForType(i)}),e+=this._paramSpecMap.size,e}hasTypeVar(e){return this._typeVarMap.has(this._getKey(e))}getTypeVarType(e,n=!1){const i=this._typeVarMap.get(this._getKey(e));if(!!i){if(i.narrowBound)return i.narrowBound;if(!n)return i.wideBound}}setTypeVarType(e,n,i,r){(0,Ef.assert)(!this._isLocked);const a=this._getKey(e);this._typeVarMap.set(a,{typeVar:e,narrowBound:n,wideBound:i,retainLiteral:r})}getVariadicTypeVar(e){var n,i;return(i=(n=this._variadicTypeVarMap)===null||n===void 0?void 0:n.get(this._getKey(e)))===null||i===void 0?void 0:i.types}setVariadicTypeVar(e,n){(0,Ef.assert)(!this._isLocked);const i=this._getKey(e);this._variadicTypeVarMap||(this._variadicTypeVarMap=new Map),this._variadicTypeVarMap.set(i,{typeVar:e,types:n})}getTypeVar(e){const n=this._getKey(e);return this._typeVarMap.get(n)}getTypeVars(){const e=[];return this._typeVarMap.forEach(n=>{e.push(n)}),e}hasParamSpec(e){return this._paramSpecMap.has(this._getKey(e))}getParamSpec(e){var n;return(n=this._paramSpecMap.get(this._getKey(e)))===null||n===void 0?void 0:n.type}setParamSpec(e,n){(0,Ef.assert)(!this._isLocked),this._paramSpecMap.set(this._getKey(e),{paramSpec:e,type:n})}typeVarCount(){return this._typeVarMap.size}getWideTypeBound(e){const n=this._typeVarMap.get(this._getKey(e));if(n)return n.wideBound}getRetainLiterals(e){const n=this._typeVarMap.get(this._getKey(e));return!!(n!=null&&n.retainLiteral)}lock(){(0,Ef.assert)(!this._isLocked),this._isLocked=!0}unlock(){this._isLocked=!1}isLocked(){return this._isLocked}_getKey(e){return Ff.TypeVarType.getNameWithScope(e)}_getComplexityScoreForType(e,n=0){if(n>Ff.maxTypeRecursionCount)return 1;switch(n++,e.category){case 1:case 2:case 3:case 5:case 6:case 10:return .5;case 0:case 4:return 1;case 9:{let i=0;return e.subtypes.length<16&&(0,$L.doForEachSubtype)(e,r=>{const a=this._getComplexityScoreForType(r,n);i=Math.max(i,a)}),.75+i/4}case 7:return this._getComplexityScoreForClass(e,n)}return 0}_getComplexityScoreForClass(e,n){let i=0,r=0;e.tupleTypeArguments?e.tupleTypeArguments.forEach(s=>{i+=this._getComplexityScoreForType(s.type,n),r++}):e.typeArguments?e.typeArguments.forEach(s=>{i+=this._getComplexityScoreForType(s,n),r++}):e.details.typeParameters&&e.details.typeParameters.forEach(s=>{i+=this._getComplexityScoreForType(Ff.AnyType.create(),n),r++});const a=r>0?i/r:0;return .5+a*.25}}xr.TypeVarContext=hv;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getGeneratorYieldType=t.getDeclaredGeneratorReturnType=t.synthesizeTypeVarForSelfCls=t.derivesFromClassRecursive=t.specializeForBaseClass=t.buildTypeVarContext=t.buildTypeVarContextFromSpecializedClass=t.setTypeArgumentsRecursive=t.specializeClassType=t.getTypeVarArgumentsRecursive=t.addTypeVarsToListIfUnique=t.getClassFieldsRecursive=t.getClassIterator=t.getClassMemberIterator=t.lookUpClassMember=t.lookUpObjectMember=t.getProtocolSymbols=t.transformExpectedTypeForConstructor=t.applySolvedTypeVars=t.populateTypeVarContextForSelfType=t.partiallySpecializeType=t.isUnboundedTupleClass=t.isTupleClass=t.isMaybeDescriptorInstance=t.isDescriptorInstance=t.isProperty=t.isEllipsisType=t.getUnionSubtypeCount=t.getLiteralTypeClassName=t.containsLiteralType=t.isLiteralTypeOrUnion=t.isLiteralType=t.getSpecializedTupleType=t.getTypeVarScopeId=t.transformPossibleRecursiveTypeAlias=t.isTypeAliasRecursive=t.isTypeAliasPlaceholder=t.getTypeCondition=t.addConditionToType=t.stripLiteralValue=t.getFullNameOfType=t.derivesFromAnyOrUnknown=t.isUnionableType=t.preserveUnknown=t.areTypesSame=t.doForEachSubtype=t.mapSubtypes=t.isOptionalType=t.getParameterListDetails=t.ParameterSource=void 0,t.convertParamSpecValueToType=t.getDeclaringModulesForType=t.computeMroLinearization=t.requiresSpecialization=t.requiresTypeArguments=t.getGeneratorTypeArgs=t.removeParamSpecVariadicsFromFunction=t.removeParamSpecVariadicsFromSignature=t.specializeTupleClass=t.combineSameSizedTuples=t.explodeGenericClass=t.isPartlyUnknown=t.containsUnknown=t.getMembersForModule=t.getMembersForClass=t.convertToInstantiable=t.convertToInstance=t.isEffectivelyInstantiable=void 0;const e=Dt,n=qt,i=Li,r=Dn,a=Ii,s=wn,l=xr;var o;(function(z){z[z.PositionOnly=0]="PositionOnly",z[z.PositionOrKeyword=1]="PositionOrKeyword",z[z.KeywordOnly=2]="KeywordOnly"})(o=t.ParameterSource||(t.ParameterSource={}));function u(z){const Q={firstPositionOrKeywordIndex:0,positionParamCount:0,positionOnlyParamCount:0,params:[],hasUnpackedVariadicTypeVar:!1,hasUnpackedTypedDict:!1};let fe=z.details.parameters.findIndex(Fe=>Fe.category===0&&!Fe.name);if(fe<0)for(let Fe=0;Fe<z.details.parameters.length;Fe++){const de=z.details.parameters[Fe];if(de.category!==0||!de.name||(0,r.isDunderName)(de.name)||!de.name.startsWith("__"))break;fe=Fe+1}fe>=0&&(Q.firstPositionOrKeywordIndex=fe);for(let Fe=0;Fe<fe&&!z.details.parameters[Fe].hasDefault;Fe++)Q.positionOnlyParamCount++;let ge=!1;const Ae=(Fe,de,Ce,me)=>{if(Fe.name){let we;Fe.category===1?we=o.PositionOnly:ge?we=o.KeywordOnly:fe>=0&&de<fe?we=o.PositionOnly:we=o.PositionOrKeyword,Q.params.push({param:Fe,index:de,type:Ce!=null?Ce:s.FunctionType.getEffectiveParameterType(z,de),defaultArgType:me,source:we})}};return z.details.parameters.forEach((Fe,de)=>{var Ce,me;if(Fe.category===1){const we=s.FunctionType.getEffectiveParameterType(z,de);Fe.name&&(0,s.isUnpackedClass)(we)&&we.tupleTypeArguments?we.tupleTypeArguments.forEach((He,_t)=>{const Nt=(0,s.isVariadicTypeVar)(He.type)||He.isUnbounded?1:0;Nt===1&&(Q.argsIndex=Q.params.length),(0,s.isVariadicTypeVar)(Fe.type)&&(Q.hasUnpackedVariadicTypeVar=!0),Ae({category:Nt,name:`${Fe.name}[${_t.toString()}]`,isNameSynthesized:!0,type:He.type,hasDeclaredType:!0},_t,He.type)}):(Fe.name&&Q.argsIndex===void 0&&(Q.argsIndex=Q.params.length,(0,s.isVariadicTypeVar)(Fe.type)&&(Q.hasUnpackedVariadicTypeVar=!0)),!ge&&(fe<0||de>=fe)&&(Q.firstKeywordOnlyIndex=Q.params.length,Fe.name&&Q.firstKeywordOnlyIndex++,ge=!0),Ae(Fe,de))}else Fe.category===2?(ge=!0,(0,s.isClassInstance)(Fe.type)&&(0,s.isUnpackedClass)(Fe.type)&&Fe.type.details.typedDictEntries?(Q.firstKeywordOnlyIndex===void 0&&(Q.firstKeywordOnlyIndex=Q.params.length),Fe.type.details.typedDictEntries.forEach((we,He)=>{Ae({category:0,name:He,type:we.valueType,hasDeclaredType:!0,hasDefault:!we.isRequired},de,we.valueType)}),Q.hasUnpackedTypedDict=!0):Fe.name&&(Q.kwargsIndex===void 0&&(Q.kwargsIndex=Q.params.length),Q.firstKeywordOnlyIndex===void 0&&(Q.firstKeywordOnlyIndex=Q.params.length),Ae(Fe,de))):Fe.category===0&&(Fe.name&&!ge&&Q.positionParamCount++,Ae(Fe,de,void 0,!((Ce=z.specializedTypes)===null||Ce===void 0)&&Ce.parameterDefaultArgs?(me=z.specializedTypes)===null||me===void 0?void 0:me.parameterDefaultArgs[de]:void 0))}),Q}t.getParameterListDetails=u;function f(z){return(0,s.isUnion)(z)?(0,s.findSubtype)(z,Q=>(0,s.isNoneInstance)(Q))!==void 0:!1}t.isOptionalType=f;function y(z,Q){if((0,s.isUnion)(z)){const ge=[];let Ae=!1;if(z.subtypes.forEach(de=>{const Ce=Q(de);Ce?Ce!==de?(ge.push(G(Ce,te(z))),Ae=!0):ge.push(de):Ae=!0}),!Ae)return z;const Fe=(0,s.combineTypes)(ge);return Fe.category===9&&s.UnionType.addTypeAliasSource(Fe,z),Fe}const fe=Q(z);return fe||s.NeverType.createNever()}t.mapSubtypes=y;function p(z,Q){(0,s.isUnion)(z)?z.subtypes.forEach((fe,ge)=>{Q(fe,ge)}):Q(z,0)}t.doForEachSubtype=p;function b(z,Q){if(z.length<2)return!0;for(let fe=1;fe<z.length;fe++)if(!(0,s.isTypeSame)(z[0],z[fe],Q))return!1;return!0}t.areTypesSame=b;function v(z,Q){return(0,s.isUnknown)(z)&&z.isIncomplete?z:(0,s.isUnknown)(Q)&&Q.isIncomplete?Q:(0,s.isUnknown)(z)||(0,s.isUnknown)(Q)?s.UnknownType.create():s.AnyType.create()}t.preserveUnknown=v;function m(z){let Q=3;for(const fe of z)Q&=fe.flags;return(Q&1)!==0&&(Q&2)===0}t.isUnionableType=m;function V(z){let Q=!1;return p(z,fe=>{(0,s.isAnyOrUnknown)(z)?Q=!0:(0,s.isInstantiableClass)(fe)?s.ClassType.hasUnknownBaseClass(fe)&&(Q=!0):(0,s.isClassInstance)(fe)&&s.ClassType.hasUnknownBaseClass(fe)&&(Q=!0)}),Q}t.derivesFromAnyOrUnknown=V;function F(z){var Q;if(!((Q=z.typeAliasInfo)===null||Q===void 0)&&Q.fullName)return z.typeAliasInfo.fullName;switch(z.category){case 2:case 1:return"typing.Any";case 3:return"builtins.None";case 7:return z.details.fullName;case 5:return z.details.fullName;case 8:return z.moduleName;case 6:return z.overloads[0].details.fullName}}t.getFullNameOfType=F;function P(z){return(0,s.isClass)(z)?(z.literalValue!==void 0&&(z=s.ClassType.cloneWithLiteral(z,void 0)),z):(0,s.isUnion)(z)?y(z,Q=>P(Q)):z}t.stripLiteralValue=P;function G(z,Q){if(!Q)return z;switch(z.category){case 0:case 1:case 2:case 4:case 8:case 10:return z;case 3:case 5:return s.TypeBase.cloneForCondition(z,s.TypeCondition.combine(z.condition,Q));case 6:return s.OverloadedFunctionType.create(z.overloads.map(fe=>G(fe,Q)));case 7:return s.TypeBase.cloneForCondition(z,s.TypeCondition.combine(z.condition,Q));case 9:return(0,s.combineTypes)(z.subtypes.map(fe=>G(fe,Q)))}}t.addConditionToType=G;function te(z){switch(z.category){case 0:case 1:case 2:case 4:case 8:case 10:case 6:case 9:return;case 3:case 7:case 5:return z.condition}}t.getTypeCondition=te;function q(z){return(0,s.isTypeVar)(z)?!!z.details.recursiveTypeAliasName&&!z.details.boundType:!1}t.isTypeAliasPlaceholder=q;function U(z,Q){return Q.category!==9?Q===z?!0:(0,s.isUnbound)(Q)&&Q.typeAliasInfo&&Q.typeAliasInfo.name===z.details.recursiveTypeAliasName:(0,s.findSubtype)(Q,fe=>(0,s.isTypeSame)(z,fe))!==void 0}t.isTypeAliasRecursive=U;function D(z){var Q;if(z&&(0,s.isTypeVar)(z)&&z.details.recursiveTypeAliasName&&z.details.boundType){const fe=s.TypeBase.isInstance(z)?ht(z.details.boundType):z.details.boundType;if(!(!((Q=z.typeAliasInfo)===null||Q===void 0)&&Q.typeArguments)||!z.details.recursiveTypeParameters)return fe;const ge=Oe(z.details.recursiveTypeParameters,z.typeAliasInfo.typeArguments,M(z));return d(fe,ge)}return z}t.transformPossibleRecursiveTypeAlias=D;function M(z){if((0,s.isClass)(z)||(0,s.isFunction)(z))return z.details.typeVarScopeId;if((0,s.isTypeVar)(z))return z.scopeId}t.getTypeVarScopeId=M;function T(z){let Q;if((0,s.isInstantiableClass)(z)?Q=z:(0,s.isClassInstance)(z)&&(Q=s.ClassType.cloneAsInstantiable(z)),!Q)return;const fe=Q.details.mro.find(Ae=>(0,s.isInstantiableClass)(Ae)&&le(Ae));if(!fe||!(0,s.isInstantiableClass)(fe))return;if(s.ClassType.isSameGenericClass(Q,fe))return Q;const ge=De(Q);return d(fe,ge)}t.getSpecializedTupleType=T;function N(z){return s.TypeBase.isInstance(z)&&z.literalValue!==void 0}t.isLiteralType=N;function J(z){return(0,s.isClassInstance)(z)?z.literalValue!==void 0:(0,s.isUnion)(z)?!(0,s.findSubtype)(z,Q=>!(0,s.isClassInstance)(Q)||Q.literalValue===void 0):!1}t.isLiteralTypeOrUnion=J;function L(z,Q=!1,fe=0){var ge;if(fe>s.maxTypeRecursionCount)return!1;if(fe++,(0,s.isClassInstance)(z)&&N(z))return!0;if(Q&&(0,s.isClass)(z)){const Ae=((ge=z.tupleTypeArguments)===null||ge===void 0?void 0:ge.map(Fe=>Fe.type))||z.typeArguments;if(Ae)return Ae.some(Fe=>L(Fe,Q,fe))}if((0,s.isUnion)(z))return z.subtypes.some(Ae=>L(Ae,Q,fe));if((0,s.isOverloadedFunction)(z))return z.overloads.some(Ae=>L(Ae,Q,fe));if((0,s.isFunction)(z)){const Ae=s.FunctionType.getSpecializedReturnType(z);if(Ae&&L(Ae,Q,fe))return!0;for(let Fe=0;Fe<z.details.parameters.length;Fe++){const de=s.FunctionType.getEffectiveParameterType(z,Fe);if(L(de,Q,fe))return!0}}return!1}t.containsLiteralType=L;function ce(z){if((0,s.isClassInstance)(z))return z.literalValue!==void 0&&s.ClassType.isBuiltIn(z)?z.details.name:void 0;if((0,s.isUnion)(z)){let Q,fe=!1;return p(z,ge=>{const Ae=ce(ge);Ae?Q||(Q=Ae):fe=!0}),fe?void 0:Q}}t.getLiteralTypeClassName=ce;function ue(z){return(0,s.isUnion)(z)?z.subtypes.length:1}t.getUnionSubtypeCount=ue;function W(z){return(0,s.isAny)(z)&&z.isEllipsis}t.isEllipsisType=W;function Y(z){return(0,s.isClassInstance)(z)&&s.ClassType.isPropertyClass(z)}t.isProperty=Y;function ee(z,Q=!1){return(0,s.isUnion)(z)?z.subtypes.every(fe=>H(fe,Q)):H(z,Q)}t.isDescriptorInstance=ee;function H(z,Q=!1){return(0,s.isUnion)(z)?z.subtypes.some(fe=>H(fe,Q)):!(!(0,s.isClassInstance)(z)||!z.details.fields.has("__get__")||Q&&!z.details.fields.has("__set__"))}t.isMaybeDescriptorInstance=H;function le(z){return s.ClassType.isBuiltIn(z,"tuple")}t.isTupleClass=le;function R(z){return z.tupleTypeArguments&&z.tupleTypeArguments.some(Q=>Q.isUnbounded)}t.isUnboundedTupleClass=R;function ae(z,Q,fe,ge){if(s.ClassType.isUnspecialized(Q))return z;const Ae=De(Q,void 0);return fe&&re(Ae,Q,fe),d(z,Ae,void 0,void 0,void 0,ge)}t.partiallySpecializeType=ae;function re(z,Q,fe){const ge=tt(Q,!1);z.setTypeVarType(ge,ht(fe))}t.populateTypeVarContextForSelfType=re;function d(z,Q,fe=!1,ge=!1,Ae=!1,Fe){return Q.isEmpty()&&!fe&&!Ae?z:new Hi(Q,fe,ge,Ae,Fe).apply(z)}t.applySolvedTypeVars=d;function k(z,Q,fe){const ge=Fe=>fe.some(de=>Fe.scopeId===de);return(0,s.isTypeVar)(z)?ge(z)?z:void 0:new Yn(Q,fe).apply(z)}t.transformExpectedTypeForConstructor=k;function oe(z){const Q=new Map;return s.ClassType.isProtocolClass(z)&&ye(z,Q),Q}t.getProtocolSymbols=oe;function ye(z,Q,fe=0){fe>s.maxTypeRecursionCount||(z.details.baseClasses.forEach(ge=>{(0,s.isClass)(ge)&&s.ClassType.isProtocolClass(ge)&&ye(ge,Q,fe+1)}),z.details.fields.forEach((ge,Ae)=>{ge.isIgnoredForProtocolMatch()||Q.set(Ae,{symbol:ge,classType:z,isInstanceMember:ge.isInstanceMember(),isClassMember:ge.isClassMember(),isClassVar:ge.isClassVar(),isTypeDeclared:ge.hasTypedDeclarations(),skippedUndeclaredType:!1})}))}function E(z,Q,fe=0){if((0,s.isClassInstance)(z))return $(z,Q,fe)}t.lookUpObjectMember=E;function $(z,Q,fe=0){var ge;return(ge=B(z,Q,fe).next())===null||ge===void 0?void 0:ge.value}t.lookUpClassMember=$;function*B(z,Q,fe=0){const ge=(fe&16)!==0;let Ae=!1;if((0,s.isClass)(z)){let Fe=0;fe&1&&(Fe=Fe|1),fe&2&&(Fe=Fe|2),fe&4&&(Fe=Fe|4),fe&32&&(Fe=Fe|8);const de=X(z,Fe);for(const[Ce,me]of de){if(!(0,s.isInstantiableClass)(Ce)){ge||(yield{symbol:i.Symbol.createWithType(0,s.UnknownType.create()),isInstanceMember:!1,isClassMember:!0,isClassVar:!1,classType:s.UnknownType.create(),isTypeDeclared:!1,skippedUndeclaredType:!1});continue}if(!(0,s.isInstantiableClass)(me))continue;const we=me.details.fields;if((fe&8)===0){const _t=we.get(Q);if(_t&&_t.isInstanceMember()){const Nt=_t.hasTypedDeclarations();!ge||Nt?yield{symbol:_t,isInstanceMember:!0,isClassMember:_t.isClassMember(),isClassVar:_t.isClassVar(),classType:me,isTypeDeclared:Nt,skippedUndeclaredType:Ae}:Ae=!0}}const He=we.get(Q);if(He&&He.isClassMember()){const _t=He.hasTypedDeclarations();if(!ge||_t){let Nt=He.isInstanceMember(),Gt=!0;const mn=s.ClassType.isDataClass(me),Rt=s.ClassType.isTypedDictClass(me);if(mn||Rt){const Mt=He.getDeclarations();Mt.length>0&&Mt[0].type===1&&(Nt=!0,Gt=mn)}yield{symbol:He,isInstanceMember:Nt,isClassMember:Gt,isClassVar:He.isClassVar(),classType:me,isTypeDeclared:_t,skippedUndeclaredType:Ae}}else Ae=!0}}}else(0,s.isAnyOrUnknown)(z)&&(yield{symbol:i.Symbol.createWithType(0,s.UnknownType.create()),isInstanceMember:!1,isClassMember:!0,isClassVar:!1,classType:s.UnknownType.create(),isTypeDeclared:!1,skippedUndeclaredType:!1})}t.getClassMemberIterator=B;function*X(z,Q=0){if((0,s.isClass)(z)){let fe=(Q&1)!==0;for(const ge of z.details.mro){if(fe){fe=!1;continue}const Ae=ae(ge,z);if(Q&4&&(0,s.isInstantiableClass)(Ae)&&s.ClassType.isBuiltIn(Ae,"object")||Q&8&&(0,s.isInstantiableClass)(Ae)&&s.ClassType.isBuiltIn(Ae,"type")||(yield[ge,Ae],(Q&2)!==0))break}}}t.getClassIterator=X;function Z(z){const Q=new Map;for(let fe=z.details.mro.length-1;fe>=0;fe--){const ge=ae(z.details.mro[fe],z);if(!(0,s.isClass)(ge)){Q.clear();continue}ge.details.fields.forEach((Ae,Fe)=>{!Ae.isIgnoredForProtocolMatch()&&Ae.hasTypedDeclarations()&&Q.set(Fe,{classType:ge,symbol:Ae,isInstanceMember:Ae.isInstanceMember(),isClassMember:Ae.isClassMember(),isClassVar:Ae.isClassVar(),isTypeDeclared:!0,skippedUndeclaredType:!1})})}return Q}t.getClassFieldsRecursive=Z;function se(z,Q){for(const fe of Q)z.find(ge=>(0,s.isTypeSame)(ht(ge),ht(fe)))||z.push(fe)}t.addTypeVarsToListIfUnique=se;function _e(z,Q=0){var fe,ge;if(Q>s.maxTypeRecursionCount)return[];Q++;const Ae=Fe=>{const de=[];return Fe.typeArguments&&Fe.typeArguments.forEach(Ce=>{se(de,_e(Ce,Q))}),de};if(!((fe=z.typeAliasInfo)===null||fe===void 0)&&fe.typeArguments){const Fe=[];return(ge=z.typeAliasInfo)===null||ge===void 0||ge.typeArguments.forEach(de=>{se(Fe,_e(de,Q))}),Fe}if((0,s.isTypeVar)(z))return z.details.recursiveTypeAliasName?[]:(0,s.isParamSpec)(z)&&z.paramSpecAccess?[]:[s.TypeBase.isInstantiable(z)?s.TypeVarType.cloneAsInstance(z):z];if((0,s.isClass)(z))return Ae(z);if((0,s.isUnion)(z)){const Fe=[];return p(z,de=>{se(Fe,_e(de,Q))}),Fe}if((0,s.isFunction)(z)){const Fe=[];for(let Ce=0;Ce<z.details.parameters.length;Ce++)se(Fe,_e(s.FunctionType.getEffectiveParameterType(z,Ce),Q));z.details.paramSpec&&se(Fe,[z.details.paramSpec]);const de=s.FunctionType.getSpecializedReturnType(z);return de&&se(Fe,_e(de,Q)),Fe}return[]}t.getTypeVarArgumentsRecursive=_e;function be(z){const Q=new l.TypeVarContext(M(z));return s.ClassType.getTypeParameters(z).forEach(ge=>{Q.setTypeVarType(ge,s.UnknownType.create())}),d(z,Q)}t.specializeClassType=be;function ve(z,Q,fe,ge=0){if(!(ge>s.maxTypeRecursionCount)&&(ge++,!fe.isLocked()))switch(z.category){case 9:p(z,Ae=>{ve(Ae,Q,fe,ge)});break;case 7:z.typeArguments&&z.typeArguments.forEach(Ae=>{ve(Ae,Q,fe,ge)}),z.tupleTypeArguments&&z.tupleTypeArguments.forEach(Ae=>{ve(Ae.type,Q,fe,ge)});break;case 5:z.specializedTypes?(z.specializedTypes.parameterTypes.forEach(Ae=>{ve(Ae,Q,fe,ge)}),z.specializedTypes.returnType&&ve(z.specializedTypes.returnType,Q,fe,ge)):(z.details.parameters.forEach(Ae=>{ve(Ae.type,Q,fe,ge)}),z.details.declaredReturnType&&ve(z.details.declaredReturnType,Q,fe,ge),z.details.paramSpec&&!fe.hasTypeVar(z.details.paramSpec)&&(0,s.isAnyOrUnknown)(Q)&&fe.setParamSpec(z.details.paramSpec,{flags:0,parameters:s.FunctionType.getDefaultParameters(),typeVarScopeId:void 0,docString:void 0,paramSpec:void 0}));break;case 6:z.overloads.forEach(Ae=>{ve(Ae,Q,fe,ge)});break;case 10:fe.hasTypeVar(z)||fe.setTypeVarType(z,Q);break}}t.setTypeArgumentsRecursive=ve;function De(z,Q=!0){const fe=s.ClassType.getTypeParameters(z);let ge=z.typeArguments;!ge&&!Q&&(ge=fe);const Ae=Oe(fe,ge,M(z));return s.ClassType.isTupleClass(z)&&z.tupleTypeArguments&&fe.length>=1&&Ae.setVariadicTypeVar(fe[0],z.tupleTypeArguments),Ae}t.buildTypeVarContextFromSpecializedClass=De;function Oe(z,Q,fe){const ge=new l.TypeVarContext(fe);return z.forEach((Ae,Fe)=>{let de;if(Q)if((0,s.isParamSpec)(Ae)){if(Fe<Q.length)if(de=Q[Fe],(0,s.isFunction)(de)&&s.FunctionType.isParamSpecValue(de)){const Ce=[],me=de;de.details.parameters.forEach((we,He)=>{Ce.push({category:we.category,name:we.name,hasDefault:!!we.hasDefault,isNameSynthesized:we.isNameSynthesized,type:s.FunctionType.getEffectiveParameterType(me,He)})}),ge.setParamSpec(Ae,{parameters:Ce,typeVarScopeId:de.details.typeVarScopeId,flags:de.details.flags,docString:de.details.docString,paramSpec:de.details.paramSpec})}else(0,s.isParamSpec)(de)?ge.setParamSpec(Ae,{flags:0,parameters:[],typeVarScopeId:void 0,docString:void 0,paramSpec:de}):(0,s.isAnyOrUnknown)(de)&&ge.setParamSpec(Ae,{flags:0,parameters:s.FunctionType.getDefaultParameters(),typeVarScopeId:void 0,docString:void 0,paramSpec:void 0})}else Fe>=Q.length?de=s.AnyType.create():de=Q[Fe],ge.setTypeVarType(Ae,de,de,!0)}),ge}t.buildTypeVarContext=Oe;function Je(z,Q){if(s.ClassType.getTypeParameters(Q).length===0)return Q;const ge=De(z),Ae=d(Q,ge);return(0,n.assert)((0,s.isInstantiableClass)(Ae)),Ae}t.specializeForBaseClass=Je;function $e(z,Q,fe){if(s.ClassType.isSameGenericClass(z,Q))return!0;for(const ge of z.details.baseClasses)if((0,s.isInstantiableClass)(ge)){if($e(ge,Q,fe))return!0}else if(!fe&&(0,s.isAnyOrUnknown)(ge))return!0;return!1}t.derivesFromClassRecursive=$e;function tt(z,Q){var fe;const ge=s.TypeVarType.createInstance("__type_of_self__"),Ae=(fe=M(z))!==null&&fe!==void 0?fe:"";ge.details.isSynthesized=!0,ge.details.isSynthesizedSelf=!0,ge.nameWithScope=s.TypeVarType.makeNameWithScope(ge.details.name,Ae),ge.scopeId=Ae;const Fe=s.ClassType.cloneForSpecialization(z,s.ClassType.getTypeParameters(z),!1,!0);return ge.details.boundType=s.ClassType.cloneAsInstance(Fe),Q?s.TypeVarType.cloneAsInstantiable(ge):ge}t.synthesizeTypeVarForSelfCls=tt;function Ue(z){const Q=s.FunctionType.getSpecializedReturnType(z);if(Q){const fe=ct(Q);if(fe)return fe.length>=3?fe[2]:s.UnknownType.create()}}t.getDeclaredGeneratorReturnType=Ue;function Ye(z,Q){let fe=!0;const ge=y(z,Ae=>{if((0,s.isAnyOrUnknown)(Ae))return Ae;if((0,s.isClassInstance)(Ae)&&[["AsyncIterable","Iterable"],["AsyncIterator","Iterator"],["AsyncGenerator","Generator"],["","AwaitableGenerator"]].some(de=>s.ClassType.isBuiltIn(Ae,Q?de[0]:de[1])))return Ae.typeArguments&&Ae.typeArguments.length>=1?Ae.typeArguments[0]:s.UnknownType.create();fe=!1});return fe?ge:void 0}t.getGeneratorYieldType=Ye;function it(z){return s.TypeBase.isInstantiable(z)||(0,s.isClassInstance)(z)&&s.ClassType.isBuiltIn(z,"type")?!0:(0,s.isUnion)(z)?z.subtypes.every(Q=>it(Q)):!1}t.isEffectivelyInstantiable=it;function ht(z){let Q=y(z,fe=>{switch(fe.category){case 7:return s.ClassType.isBuiltIn(fe,"Type")?!fe.typeArguments||fe.typeArguments.length<1?s.UnknownType.create():mt(fe.typeArguments[0]):s.ClassType.cloneAsInstance(fe);case 3:return s.NoneType.createInstance();case 5:{if(s.TypeBase.isInstantiable(fe))return s.FunctionType.cloneAsInstance(fe);break}case 10:{if(s.TypeBase.isInstantiable(fe))return s.TypeVarType.cloneAsInstance(fe);break}}return fe});return z.typeAliasInfo&&z!==Q&&(Q=s.TypeBase.cloneForTypeAlias(Q,z.typeAliasInfo.name,z.typeAliasInfo.fullName,z.typeAliasInfo.typeVarScopeId,z.typeAliasInfo.typeParameters,z.typeAliasInfo.typeArguments)),Q}t.convertToInstance=ht;function mt(z){let Q=y(z,fe=>{switch(fe.category){case 7:return s.ClassType.cloneAsInstantiable(fe);case 3:return s.NoneType.createType();case 5:return s.FunctionType.cloneAsInstantiable(fe);case 10:return s.TypeVarType.cloneAsInstantiable(fe)}return fe});return z.typeAliasInfo&&z!==Q&&(Q=s.TypeBase.cloneForTypeAlias(Q,z.typeAliasInfo.name,z.typeAliasInfo.fullName,z.typeAliasInfo.typeVarScopeId,z.typeAliasInfo.typeParameters,z.typeAliasInfo.typeArguments)),Q}t.convertToInstantiable=mt;function Be(z,Q,fe){for(let ge=0;ge<z.details.mro.length;ge++){const Ae=z.details.mro[ge];if((0,s.isInstantiableClass)(Ae)){const Fe=s.ClassType.isTypedDictClass(Ae);Ae.details.fields.forEach((de,Ce)=>{if((de.isClassMember()||fe&&de.isInstanceMember())&&(!Fe||!(0,a.isTypedDictMemberAccessedThroughIndex)(de))&&!de.isInitVar()){const me=Q.get(Ce);me?!me.hasTypedDeclarations()&&de.hasTypedDeclarations()&&Q.set(Ce,de):Q.set(Ce,de)}})}}if(!fe){const ge=z.details.effectiveMetaclass;if(ge&&(0,s.isInstantiableClass)(ge))for(const Ae of ge.details.mro)if((0,s.isInstantiableClass)(Ae))Ae.details.fields.forEach((Fe,de)=>{const Ce=Q.get(de);Ce?!Ce.hasTypedDeclarations()&&Fe.hasTypedDeclarations()&&Q.set(de,Fe):Q.set(de,Fe)});else break}}t.getMembersForClass=Be;function qe(z,Q){z.loaderFields&&z.loaderFields.forEach((fe,ge)=>{Q.set(ge,fe)}),z.fields.forEach((fe,ge)=>{Q.set(ge,fe)})}t.getMembersForModule=qe;function dt(z){let Q=!1;return p(z,fe=>{(0,s.isUnknown)(fe)&&(Q=!0)}),Q}t.containsUnknown=dt;function Xt(z,Q=!1,fe=0){var ge,Ae;if(fe>s.maxTypeRecursionCount)return!1;if(fe++,(0,s.isUnknown)(z)||!((ge=z.typeAliasInfo)===null||ge===void 0)&&ge.typeArguments&&z.typeAliasInfo.typeArguments.some(Fe=>Xt(Fe,Q,fe)))return!0;if((0,s.isUnion)(z))return(0,s.findSubtype)(z,Fe=>Xt(Fe,Q,fe))!==void 0;if((0,s.isClass)(z)){if(s.TypeBase.isInstance(z)&&(Q=!1),!Q&&!s.ClassType.isPseudoGenericClass(z)){const Fe=((Ae=z.tupleTypeArguments)===null||Ae===void 0?void 0:Ae.map(de=>de.type))||z.typeArguments;if(Fe){for(const de of Fe)if(Xt(de,Q,fe))return!0}}return!1}if((0,s.isOverloadedFunction)(z))return z.overloads.some(Fe=>Xt(Fe,!1,fe));if((0,s.isFunction)(z)){for(let Fe=0;Fe<z.details.parameters.length;Fe++)if(z.details.parameters[Fe].name){const de=s.FunctionType.getEffectiveParameterType(z,Fe);if(Xt(de,!1,fe))return!0}return!!(z.details.declaredReturnType&&!s.FunctionType.isParamSpecValue(z)&&Xt(z.details.declaredReturnType,!1,fe))}return!1}t.isPartlyUnknown=Xt;function En(z){return!z.typeArguments||z.typeArguments.length!==1||!(0,s.isUnion)(z.typeArguments[0])?z:(0,s.combineTypes)(z.typeArguments[0].subtypes.map(Q=>s.ClassType.cloneForSpecialization(z,[Q],!0)))}t.explodeGenericClass=En;function Ti(z,Q){if(!Q||!(0,s.isInstantiableClass)(Q)||R(Q))return;let fe,ge=!0;if(p(z,Ae=>{if((0,s.isClassInstance)(Ae)){let Fe;(0,s.isClass)(Ae)&&le(Ae)&&!R(Ae)&&(Fe=Ae),Fe||(Fe=Ae.details.mro.find(de=>(0,s.isClass)(de)&&le(de)&&!R(de))),Fe&&(0,s.isClass)(Fe)&&Fe.tupleTypeArguments?fe?fe.length===Fe.tupleTypeArguments.length?Fe.tupleTypeArguments.forEach((de,Ce)=>{fe[Ce].push(de.type)}):ge=!1:fe=Fe.tupleTypeArguments.map(de=>[de.type]):ge=!1}else ge=!1}),!(!ge||!fe))return ht(Ki(Q,fe.map(Ae=>({type:(0,s.combineTypes)(Ae),isUnbounded:!1}))))}t.combineSameSizedTuples=Ti;function Ki(z,Q,fe=!0,ge=!0,Ae=!1){let Fe=(0,s.combineTypes)(Q.map(Ce=>Ce.type));ge&&(Fe=P(Fe)),(0,s.isNever)(Fe)&&(Fe=s.AnyType.create());const de=s.ClassType.cloneForSpecialization(z,[Fe],fe,void 0,Q);return Ae&&(de.isUnpacked=!0),de}t.specializeTupleClass=Ki;function Se(z){if((0,s.isFunction)(z))return Me(z);const Q=[];let fe=!1;for(const ge of z.overloads){const Ae=Me(ge);Q.push(Ae),Ae!==ge&&(fe=!0)}return fe?s.OverloadedFunctionType.create(Q):z}t.removeParamSpecVariadicsFromSignature=Se;function Me(z){const Q=z.details.parameters.length;if(Q<2)return z;const fe=z.details.parameters[Q-2],ge=z.details.parameters[Q-1];return fe.category!==1||ge.category!==2||!(0,s.isParamSpec)(fe.type)||!(0,s.isParamSpec)(ge.type)||!(0,s.isTypeSame)(fe.type,ge.type)?z:s.FunctionType.cloneRemoveParamSpecVariadics(z,fe.type)}t.removeParamSpecVariadicsFromFunction=Me;function je(z){return(0,s.isClassInstance)(z)&&le(z)&&z.tupleTypeArguments&&z.isUnpacked?(0,s.combineTypes)(z.tupleTypeArguments.map(Q=>Q.type)):z}function ct(z){var Q;if((0,s.isClassInstance)(z)){if(s.ClassType.isBuiltIn(z,["Generator","AsyncGenerator"]))return z.typeArguments;if(s.ClassType.isBuiltIn(z,"AwaitableGenerator"))return(Q=z.typeArguments)===null||Q===void 0?void 0:Q.slice(1)}}t.getGeneratorTypeArgs=ct;function pt(z){return z.details.typeParameters.length>0?!z.details.typeParameters[0].details.isSynthesized:!!(s.ClassType.isSpecialBuiltIn(z)&&["Tuple","Callable","Generic","Type","Optional","Union","Literal","Annotated","TypeGuard","StrictTypeGuard"].some(fe=>fe===(z.aliasName||z.details.name)))}t.requiresTypeArguments=pt;function vt(z,Q=!1,fe=!1,ge=0){var Ae;if(ge>s.maxTypeRecursionCount)return!1;switch(ge++,z.category){case 7:return s.ClassType.isPseudoGenericClass(z)&&Q?!1:z.typeArguments?z.typeArguments.find(Fe=>vt(Fe,Q,fe,ge))!==void 0:s.ClassType.getTypeParameters(z).length>0;case 5:{if(z.details.paramSpec)return!0;for(let de=0;de<z.details.parameters.length;de++)if(vt(s.FunctionType.getEffectiveParameterType(z,de),Q,fe,ge))return!0;const Fe=z.specializedTypes&&z.specializedTypes.returnType?z.specializedTypes.returnType:z.details.declaredReturnType;if(Fe){if(vt(Fe,Q,fe,ge))return!0}else if(z.inferredReturnType&&vt(z.inferredReturnType,Q,fe,ge))return!0;return!1}case 6:return z.overloads.find(Fe=>vt(Fe,Q,fe,ge))!==void 0;case 9:return(0,s.findSubtype)(z,Fe=>vt(Fe,Q,fe,ge))!==void 0;case 10:{if(!z.details.recursiveTypeAliasName)return!(z.details.isSynthesizedSelf&&fe);if(!((Ae=z.typeAliasInfo)===null||Ae===void 0)&&Ae.typeArguments)return z.typeAliasInfo.typeArguments.some(Fe=>vt(Fe,Q,fe,ge))}}return!1}t.requiresSpecialization=vt;function Vt(z){let Q=!0;z.details.mro=[];const fe=z.details.baseClasses.filter((Ce,me)=>!((0,s.isInstantiableClass)(Ce)&&s.ClassType.isBuiltIn(Ce,"Generic")&&(s.ClassType.isProtocolClass(z)||z.details.baseClasses.some((we,He)=>He>me&&(0,s.isInstantiableClass)(we)&&we.typeArguments&&we.isTypeArgumentExplicit)))),ge=[];fe.forEach((Ce,me)=>{if((0,s.isInstantiableClass)(Ce)){const we=De(Ce,!1);ge.push(Ce.details.mro.map(He=>d(He,we)))}else ge.push([Ce])}),ge.push(fe.map(Ce=>{const me=De(z,!1);return d(Ce,me)}));const Ae=De(z,!1);z.details.mro.push(d(z,Ae));const Fe=(Ce,me)=>me.some(we=>we.findIndex(He=>(0,s.isInstantiableClass)(He)&&s.ClassType.isSameGenericClass(He,Ce))>0),de=(Ce,me)=>{for(let we=0;we<me.length;we++)me[we]=me[we].filter(He=>!(0,s.isInstantiableClass)(He)||!s.ClassType.isSameGenericClass(He,Ce))};for(;;){let Ce=!1,me;for(let we=0;we<ge.length;we++){const He=ge[we];if(He.length>0)if(me===void 0&&(me=He),(0,s.isInstantiableClass)(He[0])){if(!Fe(He[0],ge)){Ce=!0,z.details.mro.push(He[0]),de(He[0],ge);break}}else{Ce=!0,z.details.mro.push(He[0]),He.shift();break}}if(!me)break;Ce||(Q=!1,(0,s.isInstantiableClass)(me[0])?(z.details.mro.push(me[0]),de(me[0],ge)):(z.details.mro.push(me[0]),me.shift()))}return Q}t.computeMroLinearization=Vt;function Tt(z){const Q=[];return hn(z,Q),Q}t.getDeclaringModulesForType=Tt;function hn(z,Q,fe=0){if(fe>s.maxTypeRecursionCount)return;fe++;const ge=Ae=>{Ae&&!Q.some(Fe=>Fe===Ae)&&Q.push(Ae)};switch(z.category){case 7:{ge(z.details.moduleName);break}case 5:{ge(z.details.moduleName);break}case 6:{z.overloads.forEach(Ae=>{hn(Ae,Q,fe)});break}case 9:{p(z,Ae=>{hn(Ae,Q,fe)});break}case 8:{ge(z.moduleName);break}}}function sn(z,Q=!1){let fe=z.parameters.length>0;if(z.parameters.length===1){const ge=z.parameters[0];ge.category===0&&!ge.name&&(fe=!1)}if(fe||!z.paramSpec||Q){const ge=s.FunctionType.createInstance("","","",65536|z.flags);return z.parameters.forEach(Ae=>{s.FunctionType.addParameter(ge,{category:Ae.category,name:Ae.name,hasDefault:Ae.hasDefault,isNameSynthesized:Ae.isNameSynthesized,hasDeclaredType:!0,type:Ae.type})}),Q||(ge.details.paramSpec=z.paramSpec),ge.details.docString=z.docString,ge}return z.paramSpec}t.convertParamSpecValueToType=sn;class Pn{constructor(){this._isTransformingTypeArg=!1,this._pendingTypeVarTransformations=new Set}apply(Q,fe=0){var ge;if(fe>s.maxTypeRecursionCount||(fe++,Q=this._transformGenericTypeAlias(Q,fe),!vt(Q))||(0,s.isAnyOrUnknown)(Q)||(0,s.isNoneInstance)(Q))return Q;if((0,s.isTypeVar)(Q)){if(Q.details.recursiveTypeAliasName){if(!(!((ge=Q.typeAliasInfo)===null||ge===void 0)&&ge.typeArguments))return Q;let de=!1;const Ce=Q.typeAliasInfo.typeArguments.map(me=>{const we=this.apply(me,fe);return we!==me&&(de=!0),we});return de?s.TypeBase.cloneForTypeAlias(Q,Q.typeAliasInfo.name,Q.typeAliasInfo.fullName,Q.typeAliasInfo.typeVarScopeId,Q.typeAliasInfo.typeParameters,Ce):Q}let Ae=Q;const Fe=s.TypeVarType.getNameWithScope(Q);return this._pendingTypeVarTransformations.has(Fe)||(Ae=this.transformTypeVar(Q),this._isTransformingTypeArg||(this._pendingTypeVarTransformations.add(Fe),Ae=this.apply(Ae,fe),this._pendingTypeVarTransformations.delete(Fe)),(0,s.isVariadicTypeVar)(Q)&&Q.isVariadicInUnion&&(Ae=je(Ae))),Ae}if((0,s.isUnion)(Q)){const Ae=y(Q,Fe=>{let de=this.apply(Fe,fe);if((0,s.isVariadicTypeVar)(Fe)&&!(0,s.isVariadicTypeVar)(de)){const Ce=[];p(de,me=>{Ce.push(je(me))}),de=(0,s.combineTypes)(Ce)}return this.transformUnionSubtype?this.transformUnionSubtype(Fe,de):de});return(0,s.isNever)(Ae)?s.UnknownType.create():Ae}if((0,s.isClass)(Q))return this._transformTypeVarsInClassType(Q,fe);if((0,s.isFunction)(Q))return this._transformTypeVarsInFunctionType(Q,fe);if((0,s.isOverloadedFunction)(Q)){let Ae=!1;const Fe=[];return Q.overloads.forEach(de=>{const Ce=this._transformTypeVarsInFunctionType(de,fe);Fe.push(Ce),Ce!==de&&(Ae=!0)}),Ae?s.OverloadedFunctionType.create(Fe):Q}return Q}transformTypeVar(Q){return Q}transformVariadicTypeVar(Q){}transformParamSpec(Q){}transformUnionSubtype(Q,fe){return fe}_transformGenericTypeAlias(Q,fe){if(!Q.typeAliasInfo||!Q.typeAliasInfo.typeParameters||!Q.typeAliasInfo.typeArguments)return Q;let ge=!1;const Ae=Q.typeAliasInfo.typeArguments.map(Fe=>{const de=this.apply(Fe,fe);return Q!==de&&(ge=!0),de});return ge?s.TypeBase.cloneForTypeAlias(Q,Q.typeAliasInfo.name,Q.typeAliasInfo.fullName,Q.typeAliasInfo.typeVarScopeId,Q.typeAliasInfo.typeParameters,Ae):Q}_transformTypeVarsInClassType(Q,fe){if(s.ClassType.getTypeParameters(Q).length===0&&!s.ClassType.isSpecialBuiltIn(Q))return Q;let ge=[],Ae,Fe=!1;const de=s.ClassType.getTypeParameters(Q),Ce=we=>{const He=this.transformParamSpec(we);return He?(Fe=!0,sn(He)):we},me=this._isTransformingTypeArg;return this._isTransformingTypeArg=!0,Q.typeArguments?ge=Q.typeArguments.map(we=>{if((0,s.isTypeVar)(we)&&we.details.isParamSpec)return Ce(we);let He=this.apply(we,fe);return He!==we&&(Fe=!0,(0,s.isTypeVar)(we)&&(0,s.isVariadicTypeVar)(we)&&we.isVariadicInUnion&&(He=je(He))),He}):de.forEach(we=>{let He=we;if(we.details.isParamSpec)He=Ce(we),He!==we&&(Fe=!0);else{const _t=s.TypeVarType.getNameWithScope(we);this._pendingTypeVarTransformations.has(_t)||(He=this.transformTypeVar(we),He!==we&&(this._isTransformingTypeArg||(this._pendingTypeVarTransformations.add(_t),He=this.apply(He,fe),this._pendingTypeVarTransformations.delete(_t)),Fe=!0))}ge.push(He)}),s.ClassType.isTupleClass(Q)&&(Q.tupleTypeArguments?(Ae=[],Q.tupleTypeArguments.forEach(we=>{const He=this.apply(we.type,fe);He!==we.type&&(Fe=!0),(0,s.isVariadicTypeVar)(we.type)&&(0,s.isClassInstance)(He)&&le(He)&&He.tupleTypeArguments?(0,e.appendArray)(Ae,He.tupleTypeArguments):Ae.push({type:He,isUnbounded:we.isUnbounded})})):de.length>0&&(Ae=this.transformVariadicTypeVar(de[0]),Ae&&(Fe=!0))),this._isTransformingTypeArg=me,Fe?s.ClassType.cloneForSpecialization(Q,ge,!0,void 0,Ae):Q}_transformTypeVarsInFunctionType(Q,fe){let ge=Q;if(ge.details.paramSpec){const Rt=this.transformParamSpec(ge.details.paramSpec);Rt&&(ge=s.FunctionType.cloneForParamSpec(ge,Rt))}const Ae=s.FunctionType.getSpecializedReturnType(ge),Fe=Ae?this.apply(Ae,fe):void 0;let de=Ae!==Fe;const Ce={parameterTypes:[],returnType:Fe};if(ge.details.parameters.length>=2){const Rt=ge.details.parameters[ge.details.parameters.length-2],ln=ge.details.parameters[ge.details.parameters.length-1],Mt=s.FunctionType.getEffectiveParameterType(ge,ge.details.parameters.length-2),un=s.FunctionType.getEffectiveParameterType(ge,ge.details.parameters.length-1);if(Rt.category===1&&ln.category===2&&(0,s.isParamSpec)(Mt)&&(0,s.isParamSpec)(un)&&(0,s.isTypeSame)(Mt,un)){const Mn=this.transformParamSpec(Mt);Mn&&(Mn.parameters.length>0||Mn.paramSpec===void 0||!(0,s.isTypeSame)(Mt,Mn.paramSpec))&&(ge=s.FunctionType.cloneForParamSpecApplication(ge,Mn))}}let me,we;const He=[];for(let Rt=0;Rt<ge.details.parameters.length;Rt++){const ln=s.FunctionType.getEffectiveParameterType(ge,Rt),Mt=this.apply(ln,fe);Ce.parameterTypes.push(Mt);let un=s.FunctionType.getEffectiveParameterDefaultArgType(ge,Rt);if(un){const Mn=this.apply(un,fe);Mn!==un&&(un=Mn,de=!0)}He.push(un),me===void 0&&(0,s.isVariadicTypeVar)(ln)&&ge.details.parameters[Rt].category===1&&(me=Rt,(0,s.isClassInstance)(Mt)&&le(Mt)&&Mt.isUnpacked&&(we=Mt.tupleTypeArguments)),ln!==Mt&&(de=!0)}if(!de)return ge;let _t;if(ge.inferredReturnType&&(_t=this.apply(ge.inferredReturnType,fe)),He.some(Rt=>Rt!==void 0)&&(Ce.parameterDefaultArgs=He),!we)return s.FunctionType.cloneForSpecialization(ge,Ce,_t);const Nt=s.FunctionType.createSynthesizedInstance("");let Gt=!1,mn=!1;return Ce.parameterTypes.forEach((Rt,ln)=>{if(ln===me){let Mt=!1;we.forEach(un=>{s.FunctionType.addParameter(Nt,{category:un.isUnbounded?1:0,name:`__p${Nt.details.parameters.length}`,isNameSynthesized:!0,type:un.type,hasDeclaredType:!0}),un.isUnbounded&&(Mt=!0)}),Mt?mn=!0:Gt=!0}else{const Mt={...ge.details.parameters[ln]};(Mt.category===1&&!Mt.name||Mt.category===2)&&(Gt=!1),Mt.category===0&&Mt.name&&Gt&&(s.FunctionType.addParameter(Nt,{category:1,type:s.UnknownType.create()}),Gt=!1),Mt.type=Rt,Mt.name&&Mt.isNameSynthesized&&(Mt.name=`__p${Nt.details.parameters.length}`),(Mt.category!==0||Mt.name||!mn)&&s.FunctionType.addParameter(Nt,Mt)}}),Nt.details.declaredReturnType=Ce.returnType,Nt}}class Hi extends Pn{constructor(Q,fe=!1,ge=!1,Ae=!1,Fe){super(),this._typeVarContext=Q,this._unknownIfNotFound=fe,this._useNarrowBoundOnly=ge,this._eliminateUnsolvedInUnions=Ae,this._typeClassType=Fe}transformTypeVar(Q){if(Q.scopeId&&this._typeVarContext.hasSolveForScope(Q.scopeId)){let fe=this._typeVarContext.getTypeVarType(Q,this._useNarrowBoundOnly);if(!fe&&this._useNarrowBoundOnly){const ge=this._typeVarContext.getTypeVarType(Q);ge&&L(ge,!0)&&(fe=ge)}if(fe)return s.TypeBase.isInstantiable(Q)&&((0,s.isAnyOrUnknown)(fe)&&this._typeClassType&&(0,s.isInstantiableClass)(this._typeClassType)?fe=s.ClassType.cloneForSpecialization(s.ClassType.cloneAsInstance(this._typeClassType),[fe],!0):fe=mt(fe)),fe;if(this._unknownIfNotFound&&!this._typeVarContext.hasSolveForScope(s.WildcardTypeVarScopeId))return s.UnknownType.create()}return Q}transformUnionSubtype(Q,fe){if(!(this._eliminateUnsolvedInUnions&&(0,s.isTypeVar)(Q)&&Q.scopeId!==void 0&&this._typeVarContext.hasSolveForScope(Q.scopeId)&&(Q===fe||(0,s.isUnknown)(fe)&&this._unknownIfNotFound)))return fe}transformVariadicTypeVar(Q){if(!(!Q.scopeId||!this._typeVarContext.hasSolveForScope(Q.scopeId)))return this._typeVarContext.getVariadicTypeVar(Q)}transformParamSpec(Q){if(!Q.scopeId||!this._typeVarContext.hasSolveForScope(Q.scopeId))return;const fe=this._typeVarContext.getParamSpec(Q);if(fe)return fe;if(this._unknownIfNotFound&&!this._typeVarContext.hasSolveForScope(s.WildcardTypeVarScopeId))return{flags:0,parameters:s.FunctionType.getDefaultParameters(!0),typeVarScopeId:void 0,docString:void 0,paramSpec:void 0}}}class Yn extends Pn{constructor(Q,fe){super(),this._typeVarContext=Q,this._liveTypeVarScopes=fe,this.dummyScopeId="__expected_type_scope_id",this.dummyTypeVarPrefix="__expected_type_",this._typeVarContext.addSolveForScope(this.dummyScopeId)}_isTypeVarLive(Q){return this._liveTypeVarScopes.some(fe=>Q.scopeId===fe)}_createDummyTypeVar(Q){if(Q.details.isSynthesized&&Q.details.name.startsWith(this.dummyTypeVarPrefix))return Q;const fe=s.TypeBase.isInstance(Q);let ge=s.TypeVarType.createInstance(`__expected_type_${Yn.synthesizedTypeVarIndexForExpectedType}`);return ge.details.isSynthesized=!0,ge.scopeId=this.dummyScopeId,ge.nameWithScope=s.TypeVarType.makeNameWithScope(ge.details.name,this.dummyScopeId),fe||(ge=mt(ge)),ge.details.boundType=Q.details.boundType,ge.details.constraints=Q.details.constraints,ge.details.variance=Q.details.variance,Yn.synthesizedTypeVarIndexForExpectedType++,ge}transformTypeVar(Q){return this._isTypeVarLive(Q)?Q:this._createDummyTypeVar(Q)}}Yn.synthesizedTypeVarIndexForExpectedType=1})($n);var jL=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),qL=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Pk=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&jL(e,t,n);return qL(e,t),e};Object.defineProperty(is,"__esModule",{value:!0});is.isStubFile=is.SourceMapper=void 0;const vS=Pk(kt),ou=Pk(ze),Fl=Dt,Oy=Ht,GL=qt,Ak=Hn,An=Bn,xy=wn,KL=$n;class HL{constructor(e,n,i,r,a,s,l){this._importResolver=e,this._execEnv=n,this._evaluator=i,this._fileBinder=r,this._boundSourceGetter=a,this._mapCompiled=s,this._preferStubs=l}findModules(e){return this._getBoundSourceFilesFromStubFile(e).map(i=>{var r;return(r=i.getParseResults())===null||r===void 0?void 0:r.parseTree}).filter(Oy.isDefined)}findDeclarations(e){return(0,An.isClassDeclaration)(e)?this._findClassOrTypeAliasDeclarations(e):(0,An.isFunctionDeclaration)(e)?this._findFunctionOrTypeAliasDeclarations(e):(0,An.isVariableDeclaration)(e)?this._findVariableDeclarations(e):(0,An.isParameterDeclaration)(e)?this._findParameterDeclarations(e):(0,An.isSpecialBuiltInClassDeclaration)(e)?this._findSpecialBuiltInClassDeclarations(e):[]}findClassDeclarations(e){return this._findClassOrTypeAliasDeclarations(e).filter(n=>(0,An.isClassDeclaration)(n)).map(n=>n)}findClassDeclarationsByType(e,n){const i=[];return this._addClassTypeDeclarations(e,n,i,new Set),i.filter(r=>(0,An.isClassDeclaration)(r)).map(r=>r)}findFunctionDeclarations(e){return this._findFunctionOrTypeAliasDeclarations(e).filter(n=>(0,An.isFunctionDeclaration)(n)).map(n=>n)}_findSpecialBuiltInClassDeclarations(e,n=new Set){if(e.node.valueExpression.nodeType===38){const i=e.node.valueExpression.value;return this._getBoundSourceFilesFromStubFile(e.path).flatMap(a=>this._findClassDeclarationsByName(a,i,n))}return[]}_findClassOrTypeAliasDeclarations(e,n=new Set){const i=this._getFullClassName(e.node);return this._getBoundSourceFilesFromStubFile(e.path).flatMap(a=>this._findClassDeclarationsByName(a,i,n))}_findFunctionOrTypeAliasDeclarations(e,n=new Set){const i=e.node.name.value,r=this._getBoundSourceFilesFromStubFile(e.path);if(e.isMethod){const a=ou.getEnclosingClass(e.node);if(a===void 0)return[];const s=this._getFullClassName(a);return r.flatMap(l=>this._findMethodDeclarationsByName(l,s,i,n))}else return r.flatMap(a=>this._findFunctionDeclarationsByName(a,i,n))}_findVariableDeclarations(e,n=new Set){if(e.node.nodeType!==38)return[];const i=e.node.value,r=this._getBoundSourceFilesFromStubFile(e.path),a=ou.getEnclosingClass(e.node);if(a){const s=this._getFullClassName(a);return r.flatMap(l=>this._findFieldDeclarationsByName(l,s,i,n))}else return r.flatMap(s=>this._findVariableDeclarationsByName(s,i,n))}_findParameterDeclarations(e){const n=[];if(!e.node.name)return n;const i=ou.getEnclosingFunction(e.node);if(!i)return n;const r=this._evaluator.getDeclarationsForNameNode(i.name);if(!r)return n;const a=new Set;for(const s of r)for(const l of this._findFunctionOrTypeAliasDeclarations(s,a))n.push(...this._lookUpSymbolDeclarations(l.node,e.node.name.value).filter(o=>(0,An.isParameterDeclaration)(o)).map(o=>o));return n}_findMemberDeclarationsByName(e,n,i,r,a){const s=[],l=this._findClassDeclarationsByName(e,n,a);for(const o of l.filter(u=>(0,An.isClassDeclaration)(u)).map(u=>u)){const u=this._evaluator.getTypeOfClass(o.node);if(!u)continue;const f=(0,KL.lookUpClassMember)(u.classType,i);if(f)for(const y of f.symbol.getDeclarations())r(y,a,s)}return s}_findFieldDeclarationsByName(e,n,i,r){let a=[];const s=`@${e.getFilePath()}/c/${n}/v/${i}`;return r.has(s)||(r.add(s),a=this._findMemberDeclarationsByName(e,n,i,(l,o,u)=>{if((0,An.isVariableDeclaration)(l))if(this._isStubThatShouldBeMappedToImplementation(l.path))for(const f of this._findVariableDeclarations(l,o))(0,An.isVariableDeclaration)(f)&&u.push(f);else u.push(l)},r),r.delete(s)),a}_findMethodDeclarationsByName(e,n,i,r){let a=[];const s=`@${e.getFilePath()}/c/${n}/f/${i}`;return r.has(s)||(r.add(s),a=this._findMemberDeclarationsByName(e,n,i,(l,o,u)=>{(0,An.isFunctionDeclaration)(l)&&(this._isStubThatShouldBeMappedToImplementation(l.path)?(0,Fl.appendArray)(u,this._findFunctionOrTypeAliasDeclarations(l,o)):u.push(l))},r),r.delete(s)),a}_findVariableDeclarationsByName(e,n,i){var r;const a=[],s=`@${e.getFilePath()}/v/${n}`;if(i.has(s))return a;i.add(s);const l=(r=e.getParseResults())===null||r===void 0?void 0:r.parseTree;if(!l)return a;const o=this._lookUpSymbolDeclarations(l,n);if(o.length===0)this._addDeclarationsFollowingWildcardImports(l,n,a,i);else for(const u of o)this._addVariableDeclarations(u,a,i);return i.delete(s),a}_findFunctionDeclarationsByName(e,n,i){var r;const a=[],s=`@${e.getFilePath()}/f/${n}`;if(i.has(s))return a;i.add(s);const l=(r=e.getParseResults())===null||r===void 0?void 0:r.parseTree;if(!l)return a;const o=this._lookUpSymbolDeclarations(l,n);if(o.length===0)this._addDeclarationsFollowingWildcardImports(l,n,a,i);else for(const u of o)this._addClassOrFunctionDeclarations(u,a,i);return i.delete(s),a}_findClassDeclarationsByName(e,n,i){var r;let a=[];const s=(r=e.getParseResults())===null||r===void 0?void 0:r.parseTree;if(s){let l=n.split(".");l.length>0&&(a=this._findClassDeclarations(e,l[0],s,i),l=l.slice(1));for(const o of l)a=a.flatMap(u=>this._findClassDeclarations(e,o,u.node,i))}return a}_findClassDeclarations(e,n,i,r){const a=[],s=`@${e.getFilePath()}[${i.start}]${n}`;if(r.has(s))return a;r.add(s);const l=this._lookUpSymbolDeclarations(i,n);if(l.length===0&&i.nodeType===36)this._addDeclarationsFollowingWildcardImports(i,n,a,r);else for(const o of l)this._addClassOrFunctionDeclarations(o,a,r);return r.delete(s),a}_addVariableDeclarations(e,n,i){if((0,An.isVariableDeclaration)(e))this._isStubThatShouldBeMappedToImplementation(e.path)?(0,Fl.appendArray)(n,this._findVariableDeclarations(e,i)):n.push(e);else if((0,An.isAliasDeclaration)(e)){const r=this._evaluator.resolveAliasDeclaration(e,!0);r&&((0,An.isVariableDeclaration)(r)?this._addVariableDeclarations(r,n,i):((0,An.isClassDeclaration)(r)||(0,An.isFunctionDeclaration)(r))&&this._addClassOrFunctionDeclarations(r,n,i))}}_addClassOrFunctionDeclarations(e,n,i){var r;if((0,An.isClassDeclaration)(e))this._isStubThatShouldBeMappedToImplementation(e.path)?(0,Fl.appendArray)(n,this._findClassOrTypeAliasDeclarations(e,i)):n.push(e);else if((0,An.isFunctionDeclaration)(e))this._isStubThatShouldBeMappedToImplementation(e.path)?(0,Fl.appendArray)(n,this._findFunctionOrTypeAliasDeclarations(e,i)):n.push(e);else if((0,An.isAliasDeclaration)(e)){const a=this._handleSpecialBuiltInModule(e),s=this._evaluator.resolveAliasDeclaration(a,!0);s&&!(0,An.isAliasDeclaration)(s)&&this._addClassOrFunctionDeclarations(s,n,i)}else if((0,An.isVariableDeclaration)(e)){this._addVariableDeclarations(e,n,i);const a=(r=e.typeAliasName)!==null&&r!==void 0?r:e.node,s=this._evaluator.getType(a);if(!s)return;if((0,xy.isFunction)(s)&&s.details.declaration)this._addClassOrFunctionDeclarations(s.details.declaration,n,i);else if((0,xy.isOverloadedFunction)(s))for(const l of s.overloads.map(o=>o.details.declaration).filter(Oy.isDefined))this._addClassOrFunctionDeclarations(l,n,i);else(0,xy.isInstantiableClass)(s)&&this._addClassTypeDeclarations(e.path,s,n,i)}}_handleSpecialBuiltInModule(e){if(e.path||!e.node||e.moduleName!=="io"&&e.moduleName!=="collections")return e;const n=this._importResolver.getTypeshedStdLibPath(this._execEnv);if(!n)return e;const i=ou.getFileInfoFromNode(e.node);if(!i)return e;const r=(0,Ak.combinePaths)(n,l().nameParts.map(o=>o.value).join(".")+".pyi"),a=this._getSourceFiles(r,i.filePath);if(a.length===0)return e;const s={...e};return s.path=a[0].getFilePath(),s;function l(){switch(e.node.nodeType){case 21:return e.node.module;case 23:return e.node.parent.module;case 22:return e.node.module;default:return(0,GL.assertNever)(e.node)}}}_addClassTypeDeclarations(e,n,i,r){const a=n.details.filePath,s=this._getSourceFiles(a),l=n.details.fullName.substring(n.details.moduleName.length+1);for(const o of s)(0,Fl.appendArray)(i,this._findClassDeclarationsByName(o,l,r))}_getSourceFiles(e,n){const i=[];if(this._isStubThatShouldBeMappedToImplementation(e))(0,Fl.appendArray)(i,this._getBoundSourceFilesFromStubFile(e,n));else{const r=this._boundSourceGetter(e);r&&i.push(r)}return i}_addDeclarationsFollowingWildcardImports(e,n,i,r){var a,s;const l=(a=vS.getScope(e))===null||a===void 0?void 0:a.symbolTable;if(!!l)for(const o of l.values())for(const u of o.getDeclarations()){if(!(0,An.isAliasDeclaration)(u)||!u.path||u.node.nodeType!==22||!u.node.isWildcardImport)continue;const f=`@${u.path}/l/${n}`;if(r.has(f))continue;r.add(f);const y=this._getSourceFiles(u.path);for(const p of y){const b=(s=p.getParseResults())===null||s===void 0?void 0:s.parseTree;if(!b)continue;const v=this._lookUpSymbolDeclarations(b,n);if(v.length===0)this._addDeclarationsFollowingWildcardImports(b,n,i,r);else for(const m of v){const V=this._evaluator.resolveAliasDeclaration(m,!0);!V||((0,An.isFunctionDeclaration)(V)||(0,An.isClassDeclaration)(V)?this._addClassOrFunctionDeclarations(V,i,r):(0,An.isVariableDeclaration)(V)&&this._addVariableDeclarations(V,i,r))}}}}_lookUpSymbolDeclarations(e,n){if(e===void 0)return[];const i=vS.getScope(e),r=i==null?void 0:i.lookUpSymbol(n),a=r==null?void 0:r.getDeclarations();return a!=null?a:[]}_getFullClassName(e){const n=[];let i=e;for(;i!==void 0;)n.push(i.name.value),i=ou.getEnclosingClass(i);return n.reverse().join(".")}_getBoundSourceFilesFromStubFile(e,n){return this._importResolver.getSourceFilesFromStub(e,this._execEnv,this._mapCompiled).map(r=>this._fileBinder(n!=null?n:e,r)).filter(Oy.isDefined)}_isStubThatShouldBeMappedToImplementation(e){return this._preferStubs||!Mk(e)?!1:this._importResolver.getSourceFilesFromStub(e,this._execEnv,this._mapCompiled).every(i=>i!==e)}}is.SourceMapper=HL;function Mk(t){return(0,Ak.getAnyExtensionFromPath)(t,[".pyi"],!1)===".pyi"}is.isStubFile=Mk;var Ni={},Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.DiagnosticAddendum=Oi.Diagnostic=Oi.convertLevelToCategory=void 0;const YL=Dt,QL=5,JL=8,bS=64;function XL(t){switch(t){case"error":return 0;case"warning":return 1;case"information":return 2;default:throw new Error(`${t} is not expected`)}}Oi.convertLevelToCategory=XL;class ZL{constructor(e,n,i){this.category=e,this.message=n,this.range=i,this._relatedInfo=[]}addAction(e){this._actions===void 0?this._actions=[e]:this._actions.push(e)}getActions(){return this._actions}setRule(e){this._rule=e}getRule(){return this._rule}addRelatedInfo(e,n,i){this._relatedInfo.push({filePath:n,message:e,range:i})}getRelatedInfo(){return this._relatedInfo}}Oi.Diagnostic=ZL;class mv{constructor(){this._messages=[],this._childAddenda=[]}addMessage(e){this._messages.push(e)}createAddendum(){const e=new mv;return this.addAddendum(e),e}getString(e=QL,n=JL){let i=this._getLinesRecursive(e,n);i.length>n&&(i=i.slice(0,n),i.push("  ..."));const r=i.join(`
`);return r.length>0?`
`+r:""}isEmpty(){return this._getMessageCount()===0}addAddendum(e){this._childAddenda.push(e)}getChildren(){return this._childAddenda}getMessages(){return this._messages}_getMessageCount(e=0){if(e>bS)return 0;let n=this._messages.length;for(const i of this._childAddenda)n+=i._getMessageCount(e+1);return n}_getLinesRecursive(e,n,i=0){if(e<=0||i>bS)return[];let r=[];for(const s of this._childAddenda){const l=this._messages.length>0?e-1:e;if((0,YL.appendArray)(r,s._getLinesRecursive(l,n,i+1)),r.length>=n){r=r.slice(0,n);break}}const a=this._messages.length>0?"\xA0\xA0":"";return this._messages.concat(r).map(s=>a+s)}}Oi.DiagnosticAddendum=mv;var ir={};const e7={annotatedParamCountMismatch:"Parameter annotation count mismatch: expected {expected} but received {received}",annotatedTypeArgMissing:'Expected one type argument and one or more annotations for "Annotated"',annotationFormatString:"Type annotations cannot use format string literals (f-strings)",annotationNotSupported:"Type annotation not supported for this type of expression",annotationSpansStrings:"Type annotations cannot span multiple string literals",annotationStringEscape:"Type annotations cannot contain escape characters",argAssignment:'Argument of type "{argType}" cannot be assigned to parameter of type "{paramType}"',argAssignmentFunction:'Argument of type "{argType}" cannot be assigned to parameter of type "{paramType}" in function "{functionName}"',argAssignmentParam:'Argument of type "{argType}" cannot be assigned to parameter "{paramName}" of type "{paramType}"',argAssignmentParamFunction:'Argument of type "{argType}" cannot be assigned to parameter "{paramName}" of type "{paramType}" in function "{functionName}"',argMissingForParam:"Argument missing for parameter {name}",argMissingForParams:"Arguments missing for parameters {names}",argMorePositionalExpectedCount:"Expected {expected} more positional arguments",argMorePositionalExpectedOne:"Expected 1 more positional argument",argPositional:"Expected positional argument",argPositionalExpectedCount:"Expected {expected} positional arguments",argPositionalExpectedOne:"Expected 1 positional argument",argTypePartiallyUnknown:"Argument type is partially unknown",argTypeUnknown:"Argument type is unknown",assertAlwaysTrue:"Assert expression always evaluates to true",assertTypeArgs:'"assert_type" expects two positional arguments',assertTypeTypeMismatch:'"assert_type" mismatch: expected "{expected}" but received "{received}"',assignmentExprContext:"Assignment expression must be within module, function or lambda",assignmentExprComprehension:'Assignment expression target "{name}" cannot use same name as comprehension for target',assignmentInProtocol:"Instance or class variables within a Protocol class must be explicitly declared within the class body",assignmentExprInSubscript:"Assignment expressions within a subscript are supported only in Python 3.10 and newer",assignmentTargetExpr:"Expression cannot be assignment target",asyncNotInAsyncFunction:'Use of "async" not allowed outside of async function',awaitIllegal:'Use of "await" requires Python 3.5 or newer',awaitNotInAsync:'"await" allowed only within async function',backticksIllegal:"Expressions surrounded by backticks are not supported in Python 3.x; use repr instead",baseClassCircular:"Class cannot derive from itself",baseClassFinal:'Base class "{type}" is marked final and cannot be subclassed',baseClassInvalid:"Argument to class must be a base class",baseClassMethodTypeIncompatible:'Base classes for class "{classType}" define method "{name}" in incompatible way',baseClassVariableTypeIncompatible:'Base classes for class "{classType}" define variable "{name}" in incompatible way',baseClassUnknown:"Base class type is unknown, obscuring type of derived class",bindTypeMismatch:'Could not bind method "{methodName}" because "{type}" is not assignable to parameter "{paramName}"',breakOutsideLoop:'"break" can be used only within a loop',callableExtraArgs:'Expected only two type arguments to "Callable"',callableFirstArg:'Expected parameter type list or "..."',callableSecondArg:'Expected return type as second type argument for "Callable"',casePatternIsIrrefutable:"Irrefutable pattern is allowed only for the last case statement",classAlreadySpecialized:'Type "{type}" is already specialized',classDecoratorTypeUnknown:"Untyped class decorator obscures type of class; ignoring decorator",classDefinitionCycle:'Class definition for "{name}" depends on itself',classGetItemClsParam:'__class_getitem__ override should take a "cls" parameter',classMethodClsParam:'Class methods should take a "cls" parameter',classNotRuntimeSubscriptable:'Subscript for class "{name}" will generate runtime exception; enclose type annotation in quotes',classPatternBuiltInArgCount:"Class pattern accepts at most 1 positional sub-pattern",classPatternBuiltInArgPositional:"Class pattern accepts only positional sub-pattern",classPatternTypeAlias:'"{type}" cannot be used in a class pattern because it is a specialized type alias',classVarNotAllowed:'"ClassVar" is not allowed in this context',classVarFirstArgMissing:'Expected a type argument after "ClassVar"',classVarOverridesInstanceVar:'Class variable "{name}" overrides instance variable of same name in class "{className}"',classVarTooManyArgs:'Expected only one type argument after "ClassVar"',classVarWithTypeVar:'"ClassVar" type cannot include type variables',clsSelfParamTypeMismatch:'Type of parameter "{name}" must be a supertype of its class "{classType}"',codeTooComplexToAnalyze:"Code is too complex to analyze; reduce complexity by refactoring into subroutines or reducing conditional code paths",comparisonAlwaysFalse:'Condition will always evaluate to False since the types "{leftType}" and "{rightType}" have no overlap',comparisonAlwaysTrue:'Condition will always evaluate to True since the types "{leftType}" and "{rightType}" have no overlap',comprehensionInDict:"Comprehension cannot be used with other dictionary entries",comprehensionInSet:"Comprehension cannot be used with other set entries",concatenateParamSpecMissing:'Last type argument for "Concatenate" must be a ParamSpec',concatenateTypeArgsMissing:'"Concatenate" requires at least two type arguments',constantRedefinition:'"{name}" is constant (because it is uppercase) and cannot be redefined',constructorParametersMismatch:'Mismatch between signature of __new__ and __init__ in class "{classType}"',continueInFinally:'"continue" cannot be used within a finally clause',continueOutsideLoop:'"continue" can be used only within a loop',constructorNoArgs:'Expected no arguments to "{type}" constructor',dataClassBaseClassNotFrozen:"A frozen class cannot inherit from a class that is not frozen",dataClassFieldWithDefault:"Fields without default values cannot appear after fields with default values",dataClassFieldWithoutAnnotation:"Dataclass field without type annotation will cause runtime exception",dataClassPostInitParamCount:"Dataclass __post_init__ incorrect parameter count; number of InitVar fields is {expected}",dataClassPostInitType:'Dataclass __post_init__ method parameter type mismatch for field "{fieldName}"',dataClassSlotsOverwrite:"__slots__ is already defined in class",dataClassTransformExpectedBoolLiteral:"Expected expression that statically evaluates to True or False",dataClassTransformFieldSpecifier:'Expected tuple of classes or functions but received type "{type}"',dataClassTransformPositionalParam:'All arguments to "dataclass_transform" must be keyword arguments',dataClassTransformUnknownArgument:'Argument "{name}" is not supported by dataclass_transform',declaredReturnTypePartiallyUnknown:'Declared return type, "{returnType}", is partially unknown',declaredReturnTypeUnknown:"Declared return type is unknown",defaultValueContainsCall:"Function calls and mutable objects not allowed within parameter default value expression",defaultValueNotAllowed:'Parameter with "*" or "**" cannot have default value',defaultValueNotEllipsis:'Default values in stub files should be specified as "..."',deprecatedType:'This type is deprecated as of Python {version}; use "{replacement}" instead',delTargetExpr:"Expression cannot be deleted",dictExpandIllegalInComprehension:"Dictionary expansion not allowed in comprehension",dictInAnnotation:"Dictionary expression not allowed in type annotation",dictKeyValuePairs:"Dictionary entries must contain key/value pairs",dictUnpackIsNotMapping:"Expected mapping for dictionary unpack operator",dunderAllSymbolNotPresent:'"{name}" is specified in __all__ but is not present in module',duplicateArgsParam:'Only one "*" parameter allowed',duplicateBaseClass:"Duplicate base class not allowed",duplicateCatchAll:"Only one catch-all except clause allowed",duplicateEnumMember:'Enum member "{name}" is already declared',duplicateGenericAndProtocolBase:"Only one Generic[...] or Protocol[...] base class allowed",duplicateImport:'"{importName}" is imported more than once',duplicateKwargsParam:'Only one "**" parameter allowed',duplicateKeywordOnly:'Only one "*" separator allowed',duplicateParam:'Duplicate parameter "{name}"',duplicateCapturePatternTarget:'Capture target "{name}" cannot appear more than once within the same pattern',duplicateStarPattern:'Only one "*" pattern allowed in a pattern sequence',duplicateStarStarPattern:'Only one "**" entry allowed',duplicatePositionOnly:'Only one "/" parameter allowed',duplicateUnpack:"Only one unpack operation allowed in list",ellipsisContext:'"..." not allowed in this context',ellipsisSecondArg:'"..." allowed only as the second of two arguments',enumClassOverride:'Enum class "{name}" is final and cannot be subclassed',exceptionGroupIncompatible:'Exception group syntax ("except*") requires Python 3.11 or newer',exceptionTypeIncorrect:'"{type}" does not derive from BaseException',exceptionTypeNotClass:'"{type}" is not valid exception class',exceptionTypeNotInstantiable:'Constructor for exception type "{type}" requires one or more arguments',expectedAfterDecorator:"Expected function or class declaration after decorator",expectedArrow:'Expected "->" followed by return type annotation',expectedAsAfterException:'Expected "as" after exception type',expectedAssignRightHandExpr:'Expected expression to the right of "="',expectedBinaryRightHandExpr:"Expected expression to the right of operator",expectedBoolLiteral:"Expected True or False",expectedCase:'Expected "case" statement',expectedClassName:"Expected class name",expectedCloseBrace:'"{" was not closed',expectedCloseBracket:'"[" was not closed',expectedCloseParen:'"(" was not closed',expectedColon:'Expected ":"',expectedComplexNumberLiteral:"Expected complex number literal for pattern matching",expectedDecoratorExpr:"Expression form not supported for decorator prior to Python 3.9",expectedDecoratorName:"Expected decorator name",expectedDecoratorNewline:"Expected new line at end of decorator",expectedDelExpr:'Expected expression after "del"',expectedElse:'Expected "else"',expectedExceptionClass:"Invalid exception class or object",expectedExceptionObj:"Expected exception object, exception class or None",expectedExpr:"Expected expression",expectedIdentifier:"Expected identifier",expectedImport:'Expected "import"',expectedImportAlias:'Expected symbol after "as"',expectedImportSymbols:"Expected one or more symbol names after import",expectedIndentedBlock:"Expected indented block",expectedInExpr:'Expected expression after "in"',expectedIn:'Expected "in"',expectedFunctionAfterAsync:'Expected function definition after "async"',expectedFunctionName:'Expected function name after "def"',expectedMemberName:'Expected member name after "."',expectedModuleName:"Expected module name",expectedNameAfterAs:'Expected symbol name after "as"',expectedNamedParameter:'Keyword parameter must follow "*"',expectedNewline:"Expected newline",expectedNewlineOrSemicolon:"Statements must be separated by newlines or semicolons",expectedOpenParen:'Expected "("',expectedParamName:"Expected parameter name",expectedPatternExpr:"Expected pattern expression",expectedPatternSubjectExpr:"Expected pattern subject expression",expectedPatternValue:'Expected pattern value expression of the form "a.b"',expectedReturnExpr:'Expected expression after "return"',expectedSliceIndex:"Expected index or slice expression",expectedTypeNotString:"Expected type but received a string literal",expectedYieldExpr:"Expected expression in yield statement",finalClassIsAbstract:'Class "{type}" is marked final and must implement all abstract methods',finalContext:'"Final" not allowed in this context',finalMethodOverride:'Method "{name}" cannot override final method defined in class "{className}"',finalReassigned:'"{name}" is declared as Final and cannot be reassigned',finalRedeclaration:'"{name}" was previously declared as Final',finalRedeclarationBySubclass:'"{name}" cannot be redeclared because parent class "{className}" declares it as Final',finalTooManyArgs:'Expected a single type argument after "Final"',finalUnassigned:'"{name}" is declared Final, but value is not assigned',formatStringBrace:"Single close brace not allowed within f-string literal; use double close brace",formatStringBytes:"Format string literals (f-strings) cannot be binary",formatStringEscape:"Escape sequence (backslash) not allowed in expression portion of f-string",formatStringInPattern:"Format string not allowed in pattern",formatStringUnicode:"Format string literals (f-strings) cannot be unicode",formatStringIllegal:"Format string literals (f-strings) require Python 3.6 or newer",formatStringUnterminated:"Unterminated expression in f-string; missing close brace",functionDecoratorTypeUnknown:"Untyped function decorator obscures type of function; ignoring decorator",functionInConditionalExpression:"Conditional expression references function which always evaluates to True",generatorAsyncReturnType:'Return type of async generator function must be "AsyncGenerator" or "AsyncIterable"',generatorNotParenthesized:"Generator expressions must be parenthesized if not sole argument",generatorSyncReturnType:'Return type of generator function must be "Generator" or "Iterable"',genericClassAssigned:"Generic class type cannot be assigned",genericClassDeleted:"Generic class type cannot be deleted",genericNotAllowed:'"Generic" is not valid in this context',genericTypeAliasBoundTypeVar:"Generic type alias within class cannot use bound type variables {names}",genericTypeArgMissing:'"Generic" requires at least one type argument',genericTypeArgTypeVar:'Type argument for "Generic" must be a type variable',genericTypeArgUnique:'Type arguments for "Generic" must be unique',globalReassignment:'"{name}" is assigned before globalThis declaration',globalRedefinition:'"{name}" was already declared globalThis',implicitStringConcat:"Implicit string concatenation not allowed",importCycleDetected:"Cycle detected in import chain",importDepthExceeded:"Import chain depth exceeded {depth}",importResolveFailure:'Import "{importName}" could not be resolved',importSourceResolveFailure:'Import "{importName}" could not be resolved from source',importSymbolUnknown:'"{name}" is unknown import symbol',incompatibleMethodOverride:'Method "{name}" overrides class "{className}" in an incompatible manner',inconsistentIndent:"Unindent amount does not match previous indent",initMustReturnNone:'Return type of "__init__" must be None',inconsistentTabs:"Inconsistent use of tabs and spaces in indentation",initSubclassClsParam:'__init_subclass__ override should take a "cls" parameter',instanceMethodSelfParam:'Instance methods should take a "self" parameter',instanceVarOverridesClassVar:'Instance variable "{name}" overrides class variable of same name in class "{className}"',instantiateAbstract:'Cannot instantiate abstract class "{type}"',instantiateProtocol:'Cannot instantiate protocol class "{type}"',internalBindError:'An internal error occurred while binding file "{file}": {message}',internalParseError:'An internal error occurred while parsing file "{file}": {message}',internalTypeCheckingError:'An internal error occurred while type checking file "{file}": {message}',invalidIdentifierChar:"Invalid character in identifier",invalidStubStatement:"Statement is meaningless within a type stub file",invalidTokenChars:'Invalid character "{text}" in token',isInstanceInvalidType:'Second argument to "isinstance" must be a class or tuple of classes',isSubclassInvalidType:'Second argument to "issubclass" must be a class or tuple of classes',keyValueInSet:"Key/value pairs are not allowed within a set",keywordArgInTypeArgument:"Keyword arguments cannot be used in type argument lists",keywordOnlyAfterArgs:'Keyword-only argument separator not allowed after "*" parameter',keywordSubscriptIllegal:"Keyword arguments within subscripts are not supported",lambdaReturnTypeUnknown:"Return type of lambda is unknown",lambdaReturnTypePartiallyUnknown:'Return type of lambda, "{returnType}", is partially unknown',listAssignmentMismatch:'Expression with type "{type}" cannot be assigned to target list',listInAnnotation:"List expression not allowed in type annotation",literalUnsupportedType:'Type arguments for "Literal" must be None, a literal value (int, bool, str, or bytes), or an enum value',literalEmptyArgs:'Expected one or more type arguments after "Literal"',literalNotCallable:"Literal type cannot be instantiated",matchIncompatible:"Match statements require Python 3.10 or newer",matchIsNotExhaustive:"Cases within match statement do not exhaustively handle all values",maxParseDepthExceeded:"Maximum parse depth exceeded; break expression into smaller sub-expressions",memberAccess:'Cannot access member "{name}" for type "{type}"',memberDelete:'Cannot delete member "{name}" for type "{type}"',memberSet:'Cannot assign member "{name}" for type "{type}"',metaclassConflict:"The metaclass of a derived class must be a subclass of the metaclasses of all its base classes",metaclassDuplicate:"Only one metaclass can be provided",metaclassIsGeneric:"Metaclass cannot be generic",methodNotDefined:'"{name}" method not defined',methodNotDefinedOnType:'"{name}" method not defined on type "{type}"',methodOrdering:"Cannot create consistent method ordering",methodOverridden:'"{name}" overrides method of same name in class "{className}" with incompatible type "{type}"',methodReturnsNonObject:'"{name}" method does not return an object',missingProtocolMembers:"Class derives from one or more protocol classes but does not implement all required members",missingSuperCall:'Method "{methodName}" does not call the method of the same name in parent class',moduleAsType:"Module cannot be used as a type",moduleNotCallable:"Module is not callable",moduleUnknownMember:'"{name}" is not a known member of module',namedExceptAfterCatchAll:"A named except clause cannot appear after catch-all except clause",namedParamAfterParamSpecArgs:'Keyword parameter "{name}" cannot appear in signature after ParamSpec args parameter',namedTupleEmptyName:"Names within a named tuple cannot be empty",namedTupleMultipleInheritance:"Multiple inheritance with NamedTuple is not supported",namedTupleFirstArg:"Expected named tuple class name as first argument",namedTupleNameType:"Expected two-entry tuple specifying entry name and type",namedTupleNameUnique:"Names within a named tuple must be unique",namedTupleNoTypes:'"namedtuple" provides no types for tuple entries; use "NamedTuple" instead',namedTupleSecondArg:"Expected named tuple entry list as second argument",newClsParam:'__new__ override should take a "cls" parameter',newTypeLiteral:"NewType cannot be used with Literal type",newTypeNotAClass:"Expected class as second argument to NewType",newTypeProtocolClass:"NewType cannot be used with protocol class",nonDefaultAfterDefault:"Non-default argument follows default argument",noneNotCallable:'Object of type "None" cannot be called',noneNotIterable:'Object of type "None" cannot be used as iterable value',noneOperator:'Operator "{operator}" not supported for "None"',noneNotSubscriptable:'Object of type "None" is not subscriptable',noneNotUsableWith:'Object of type "None" cannot be used with "with"',noneUnknownMember:'"{name}" is not a known member of "None"',nonLocalNoBinding:'No binding for nonlocal "{name}" found',nonLocalReassignment:'"{name}" is assigned before nonlocal declaration',nonLocalRedefinition:'"{name}" was already declared nonlocal',nonLocalInModule:"Nonlocal declaration not allowed at module level",noOverload:'No overloads for "{name}" match the provided arguments',noReturnContainsReturn:'Function with declared return type "NoReturn" cannot include a return statement',noReturnContainsYield:'Function with declared return type "NoReturn" cannot include a yield statement',noReturnReturnsNone:'Function with declared type of "NoReturn" cannot return "None"',notRequiredArgCount:'Expected a single type argument after "NotRequired"',notRequiredNotInTypedDict:'"NotRequired" is not allowed in this context',objectNotCallable:'Object of type "{type}" is not callable',obscuredClassDeclaration:'Class declaration "{name}" is obscured by a declaration of the same name',obscuredFunctionDeclaration:'Function declaration "{name}" is obscured by a declaration of the same name',obscuredMethodDeclaration:'Method declaration "{name}" is obscured by a declaration of the same name',obscuredParameterDeclaration:'Parameter declaration "{name}" is obscured by a declaration of the same name',obscuredVariableDeclaration:'Declaration "{name}" is obscured by a declaration of the same name',operatorLessOrGreaterDeprecated:'Operator "<>" is not supported in Python 3; use "!=" instead',optionalExtraArgs:'Expected one type argument after "Optional"',orPatternIrrefutable:'Irrefutable pattern allowed only as the last subpattern in an "or" pattern',orPatternMissingName:'All subpatterns within an "or" pattern must target the same names',overlappingOverload:'Overload {obscured} for "{name}" will never be used because its parameters overlap overload {obscuredBy}',overloadAbstractMismatch:"Overloaded methods must all be abstract or not",overloadImplementationMismatch:"Overloaded implementation is not consistent with signature of overload {index}",overloadReturnTypeMismatch:'Overload {prevIndex} for "{name}" overlaps overload {newIndex} and returns an incompatible type',overloadWithImplementation:'"{name}" is marked as overload, but it includes an implementation',overloadWithoutImplementation:'"{name}" is marked as overload, but no implementation is provided',paramAfterKwargsParam:'Parameter cannot follow "**" parameter',paramAlreadyAssigned:'Parameter "{name}" is already assigned',paramAnnotationMissing:'Type annotation is missing for parameter "{name}"',paramNameMissing:'No parameter named "{name}"',paramSpecArgsKwargsUsage:'"args" and "kwargs" members of ParamSpec must both appear within a function signature',paramSpecArgsMissing:'Arguments for ParamSpec "{type}" are missing',paramSpecArgsUsage:'"args" member of ParamSpec is valid only when used with *args parameter',paramSpecAssignedName:'ParamSpec must be assigned to a variable named "{name}"',paramSpecContext:"ParamSpec not allowed in this context",paramSpecFirstArg:"Expected name of ParamSpec as first argument",paramSpecKwargsUsage:'"kwargs" member of ParamSpec is valid only when used with **kwargs parameter',paramSpecNotBound:'Param spec "{type}" has no bound value',paramSpecNotUsedByOuterScope:'ParamSpec "{name}" has no meaning in this context',paramSpecUnknownArg:"ParamSpec does not support more than one argument",paramSpecUnknownMember:'"{name}" is not a known member of ParamSpec',paramSpecUnknownParam:'"{name}" is unknown parameter to ParamSpec',paramAssignmentMismatch:'Expression of type "{sourceType}" cannot be assigned to parameter of type "{paramType}"',paramTypeCovariant:"Covariant type variable cannot be used in parameter type",paramTypeUnknown:'Type of parameter "{paramName}" is unknown',paramTypePartiallyUnknown:'Type of parameter "{paramName}" is partially unknown',parenthesizedContextManagerIllegal:'Parentheses within "with" statement requires Python 3.9 or newer',positionArgAfterNamedArg:"Positional argument cannot appear after keyword arguments",privateImportFromPyTypedModule:'"{name}" is not exported from module "{module}"',positionOnlyAfterArgs:'Position-only argument separator not allowed after "*" parameter',positionOnlyAfterKeywordOnly:'"/" parameter must appear before "*" parameter',positionOnlyIncompatible:"Position-only argument separator requires Python 3.8 or newer",positionOnlyFirstParam:"Position-only argument separator not allowed as first parameter",privateUsedOutsideOfClass:'"{name}" is private and used outside of the class in which it is declared',privateUsedOutsideOfModule:'"{name}" is private and used outside of the module in which it is declared',propertyOverridden:'"{name}" incorrectly overrides property of same name in class "{className}"',propertyStaticMethod:"Static methods not allowed for property getter, setter or deleter",protectedUsedOutsideOfClass:'"{name}" is protected and used outside of the class in which it is declared',protocolBaseClass:'Protocol class "{classType}" cannot derive from non-protocol class "{baseType}"',protocolIllegal:'Use of "Protocol" requires Python 3.7 or newer',protocolMemberNotClassVar:'Protocol class "{className}" does not define "{memberName}" as a ClassVar',protocolNotAllowedInTypeArgument:'"Protocol" cannot be used as a type argument',protocolVarianceContravariant:'Type variable "{variable}" used in generic protocol "{class}" should be contravariant',protocolVarianceCovariant:'Type variable "{variable}" used in generic protocol "{class}" should be covariant',protocolVarianceInvariant:'Type variable "{variable}" used in generic protocol "{class}" should be invariant',protocolUsedInCall:'Protocol class cannot be used in "{name}" call',relativeImportNotAllowed:'Relative imports cannot be used with "import .a" form; use "from . import a" instead',recursiveDefinition:'Type of "{name}" could not be determined because it refers to itself',requiredArgCount:'Expected a single type argument after "Required"',requiredNotInTypedDict:'"Required" is not allowed in this context',returnOutsideFunction:'"return" can be used only within a function',returnMissing:'Function with declared type of "{returnType}" must return value',returnTypeContravariant:"Contravariant type variable cannot be used in return type",returnTypeMismatch:'Expression of type "{exprType}" cannot be assigned to return type "{returnType}"',returnTypeUnknown:"Return type is unknown",returnTypePartiallyUnknown:'Return type, "{returnType}", is partially unknown',revealLocalsArgs:'Expected no arguments for "reveal_locals" call',revealLocalsNone:"No locals in this scope",revealTypeArgs:'Expected a single positional argument for "reveal_type" call',revealTypeExpectedTextArg:'The "expected_text" argument for function "reveal_type" must be a str literal value',revealTypeExpectedTextMismatch:'Type text mismatch; expected "{expected}" but received "{received}"',revealTypeExpectedTypeMismatch:'Type mismatch; expected "{expected}" but received "{received}"',selfTypeContext:'"Self" is not valid in this context',selfTypeWithTypedSelfOrCls:'"Self" cannot be used in a function with a `self` or `cls` parameter that has a type annotation other than "Self"',setterGetterTypeMismatch:"Property setter value type is not assignable to the getter return type",singleOverload:'"{name}" is marked as overload, but additional overloads are missing',slotsAttributeError:'"{name}" is not specified in __slots__',slotsClassVarConflict:'"{name}" conflicts with instance variable declared in __slots__',starPatternInAsPattern:'Star pattern cannot be used with "as" target',starPatternInOrPattern:"Star pattern cannot be ORed within other patterns",starStarWildcardNotAllowed:'** cannot be used with wildcard "_"',staticClsSelfParam:'Static methods should not take a "self" or "cls" parameter',strictTypeGuardReturnType:'Return type of StrictTypeGuard ("{returnType}") is not assignable to value parameter type ("{type}")',stringNonAsciiBytes:"Non-ASCII character not allowed in bytes string literal",stringNotSubscriptable:"String expression cannot be subscripted in type annotation; enclose entire annotation in quotes",stringUnsupportedEscape:"Unsupported escape sequence in string literal",stringUnterminated:"String literal is unterminated",stubFileMissing:'Stub file not found for "{importName}"',stubUsesGetAttr:'Type stub file is incomplete; "__getattr__" obscures type errors for module',sublistParamsIncompatible:"Sublist parameters are not supported in Python 3.x",superCallArgCount:'Expected no more than two arguments to "super" call',superCallFirstArg:'Expected class type as first argument to "super" call but received "{type}"',superCallSecondArg:'Second argument to "super" call must be object or class that derives from "{type}"',superCallZeroArgForm:'Zero-argument form of "super" call is valid only within a class',symbolIsUnbound:'"{name}" is unbound',symbolIsUndefined:'"{name}" is not defined',symbolIsPossiblyUnbound:'"{name}" is possibly unbound',symbolOverridden:'"{name}" overrides symbol of same name in class "{className}"',totalOrderingMissingMethod:'Class must define one of "__lt__", "__le__", "__gt__", or "__ge__" to use total_ordering',trailingCommaInFromImport:"Trailing comma not allowed without surrounding parentheses",tryWithoutExcept:"Try statement must have at least one except or finally clause",tupleAssignmentMismatch:'Expression with type "{type}" cannot be assigned to target tuple',tupleInAnnotation:"Tuple expression not allowed in type annotation",tupleIndexOutOfRange:"Index {index} is out of range for type {type}",typeAliasIsRecursiveDirect:'Type alias "{name}" cannot use itself in its definition',typeAliasIsRecursiveIndirect:'Type alias "{name}" cannot refer to itself indirectly in its definition',typeAliasNotInModuleOrClass:"A TypeAlias can be defined only within a module or class scope",typeAliasRedeclared:'"{name}" is declared as a TypeAlias and can be assigned only once',typeArgListExpected:"Expected ParamSpec, ellipsis, or list of types",typeArgListNotAllowed:"List expression not allowed for this type argument",typeAnnotationCall:"Illegal type annotation: call expression not allowed",typeAnnotationVariable:"Illegal type annotation: variable not allowed unless it is a type alias",typeArgsExpectingNone:'Expected no type arguments for class "{name}"',typeArgsMismatchOne:"Expected one type argument but received {received}",typeArgsMissingForAlias:'Expected type arguments for generic type alias "{name}"',typeArgsMissingForClass:'Expected type arguments for generic class "{name}"',typeArgsTooFew:'Too few type arguments provided for "{name}"; expected {expected} but received {received}',typeArgsTooMany:'Too many type arguments provided for "{name}"; expected {expected} but received {received}',typeAssignmentMismatch:'Expression of type "{sourceType}" cannot be assigned to declared type "{destType}"',typeCallNotAllowed:"type() call should not be used in type annotation",typeCommentDeprecated:"Use of type comments is deprecated; use type annotation instead",typedDictAccess:"Could not access item in TypedDict",typedDictBadVar:"TypedDict classes can contain only type annotations",typedDictBaseClass:"All base classes for TypedDict classes must also be TypedDict classes",typedDictDelete:"Could not delete item in TypedDict",typedDictEmptyName:"Names within a TypedDict cannot be empty",typedDictEntryName:"Expected string literal for dictionary entry name",typedDictEntryUnique:"Names within a dictionary must be unique",typedDictExtraArgs:"Extra TypedDict arguments not supported",typedDictFieldRedefinition:'Type of TypedDict field "{name}" cannot be redefined',typedDictFirstArg:"Expected TypedDict class name as first argument",typedDictSecondArgDict:"Expected dict or keyword parameter as second parameter",typedDictSecondArgDictEntry:"Expected simple dictionary entry",typedDictSet:"Could not assign item in TypedDict",typedDictTotalParam:'Expected "total" parameter to have a value of True or False',typeExpectedClass:'Expected class type but received "{type}"',typeGuardArgCount:'Expected a single type argument after "TypeGuard"',typeNotAwaitable:'"{type}" is not awaitable',typeNotCallable:'"{expression}" has type "{type}" and is not callable',typeNotIntantiable:'"{type}" cannot be instantiated',typeNotIterable:'"{type}" is not iterable',typeNotSpecializable:'Could not specialize type "{type}"',typeNotSubscriptable:'Object of type "{type}" is not subscriptable',typeNotUsableWith:'Object of type "{type}" cannot be used with "with" because it does not implement {method}',typeNotSupportBinaryOperator:'Operator "{operator}" not supported for types "{leftType}" and "{rightType}"',typeNotSupportBinaryOperatorBidirectional:'Operator "{operator}" not supported for types "{leftType}" and "{rightType}" when expected type is "{expectedType}"',typeNotSupportUnaryOperator:'Operator "{operator}" not supported for type "{type}"',typeNotSupportUnaryOperatorBidirectional:'Operator "{operator}" not supported for type "{type}" when expected type is "{expectedType}"',typePartiallyUnknown:'Type of "{name}" is partially unknown',typeUnknown:'Type of "{name}" is unknown',typeVarAssignedName:'TypeVar must be assigned to a variable named "{name}"',typeVarAssignmentMismatch:'Type "{type}" cannot be assigned to type variable "{name}"',typeVarBoundAndConstrained:"TypeVar cannot be both bound and constrained",typeVarFirstArg:"Expected name of TypeVar as first argument",typeVarGeneric:"TypeVar bound type cannot be generic",typeVarNoMember:'TypeVar "{type}" has no member "{name}"',typeVarNotSubscriptable:'TypeVar "{type}" is not subscriptable',typeVarNotUsedByOuterScope:'Type variable "{name}" has no meaning in this context',typeVarPossiblyUnsolvable:'Type variable "{name}" may go unsolved if caller supplies no argument for parameter "{param}"',typeVarSingleConstraint:"TypeVar cannot have only a single constraint",typeVarsNotInGenericOrProtocol:"Generic[] or Protocol[] must include all type variables",typeVarTupleContext:"TypeVarTuple not allowed in this context",typeVarTupleMustBeUnpacked:"Unpack operator is required for TypeVarTuple value",typeVarUnknownParam:'"{name}" is unknown parameter to TypeVar',typeVarUsedByOuterScope:'TypeVar "{name}" is already in use by an outer scope',typeVarUsedOnlyOnce:'TypeVar "{name}" appears only once in generic function signature',typeVarVariance:"TypeVar cannot be both covariant and contravariant",unaccessedClass:'Class "{name}" is not accessed',unaccessedFunction:'Function "{name}" is not accessed',unaccessedImport:'Import "{name}" is not accessed',unaccessedSymbol:'"{name}" is not accessed',unaccessedVariable:'Variable "{name}" is not accessed',unexpectedAsyncToken:'Expected "def", "with" or "for" to follow "async"',unexpectedExprToken:"Unexpected token at end of expression",unexpectedIndent:"Unexpected indentation",unexpectedUnindent:"Unindent not expected",unionSyntaxIllegal:"Alternative syntax for unions requires Python 3.10 or newer",unionTypeArgCount:"Union requires two or more type arguments",uninitializedInstanceVariable:'Instance variable "{name}" is not initialized in the class body or __init__ method',unnecessaryCast:'Unnecessary "cast" call; type is already "{type}"',unnecessaryIsInstanceAlways:'Unnecessary isinstance call; "{testType}" is always an instance of "{classType}"',unnecessaryIsSubclassAlways:'Unnecessary issubclass call; "{testType}" is always a subclass of "{classType}"',unnecessaryPyrightIgnore:'Unnecessary "# pyright: ignore" comment',unnecessaryPyrightIgnoreRule:'Unnecessary "# pyright: ignore" rule: "{name}"',unnecessaryTypeIgnore:'Unnecessary "# type: ignore" comment',unpackArgCount:'Expected a single type argument after "Unpack"',unpackedArgInTypeArgument:"Unpacked arguments cannot be used in type argument lists",unpackedArgWithVariadicParam:"Unpacked argument cannot be used for TupleTypeVar parameter",unpackedDictArgumentNotMapping:'Argument expression after ** must be a mapping with a "str" key type',unpackedSubscriptIllegal:"Unpack operator in subscript requires Python 3.11 or newer",unpackedTypedDictArgument:"Unable to match unpacked TypedDict argument to parameters",unpackedTypeVarTupleExpected:"Expected unpacked TypeVarTuple; use Unpack[{name1}] or *{name2}",unpackExpectedTypedDict:"Expected TypedDict type argument for Unpack",unpackExpectedTypeVarTuple:"Expected TypeVarTuple or Tuple as type argument for Unpack",unpackIllegalInComprehension:"Unpack operation not allowed in comprehension",unpackInAnnotation:"Unpack operator not allowed in type annotation",unpackInDict:"Unpack operation not allowed in dictionaries",unpackInSet:"Unpack operator not allowed within a set",unpackNotAllowed:"Unpack not allowed in this context",unpackOperatorNotAllowed:"Unpack operation not allowed in this context",unpackTuplesIllegal:"Unpack operation not allowed in tuples prior to Python 3.8",unreachableCode:"Code is unreachable",unreachableExcept:"Except clause is unreachable because exception is already handled",unsupportedDunderAllOperation:'Operation on "__all__" is not supported, so exported symbol list may be incorrect',unusedCallResult:'Result of call expression is of type "{type}" and is not used; assign to variable "_" if this is intentional',unusedCoroutine:'Result of async function call is not used; use "await" or assign result to variable',unusedExpression:"Expression value is unused",varAnnotationIllegal:"Type annotations for variables requires Python 3.6 or newer; use type comment for compatibility with previous versions",variadicTypeArgsTooMany:"Type argument list can have at most one unpacked TypeVarTuple or Tuple",variadicTypeParamTooManyAlias:"Type alias can have at most one TypeVarTuple type parameter but received multiple ({names})",variadicTypeParamTooManyClass:"Generic class can have at most one TypeVarTuple type parameter but received multiple ({names})",walrusIllegal:'Operator ":=" requires Python 3.8 or newer',walrusNotAllowed:'Operator ":=" not allowed in this context',wildcardInFunction:"Wildcard import not allowed within a class or function",wildcardLibraryImport:"Wildcard import from a library not allowed",yieldFromIllegal:'Use of "yield from" requires Python 3.3 or newer',yieldFromOutsideAsync:'"yield from" not allowed in an async function',yieldOutsideFunction:'"yield" not allowed outside of a function or lambda',yieldTypeMismatch:'Expression of type "{exprType}" cannot be assigned to yield type "{yieldType}"',yieldWithinListCompr:'"yield" not allowed inside a list comprehension',zeroCaseStatementsFound:"Match statement must include at least one case statement",zeroLengthTupleNotAllowed:"Zero-length tuple not allowed in this context"},t7={argParam:'Argument corresponds to parameter "{paramName}"',argParamFunction:'Argument corresponds to parameter "{paramName}" in function "{functionName}"',argsParamMissing:'Parameter "*{paramName}" has no corresponding parameter',argsPositionOnly:"Position-only parameter mismatch; expected {expected} but received {received}",argumentType:'Argument type is "{type}"',argumentTypes:"Argument types: ({types})",assignToNone:'Type cannot be assigned to type "None"',asyncHelp:'Did you mean "async with"?',baseClassProvidesType:'Base class "{baseClass}" provides type "{type}"',dataClassFieldLocation:"Field declaration",dataClassFrozen:'"{name}" is frozen',finalMethod:"Final method",keyNotRequired:'"{name}" is not a required key in "{type}", so access may result in runtime exception',keyRequiredDeleted:'"{name}" is a required key and cannot be deleted',keyUndefined:'"{name}" is not a defined key in "{type}"',functionParamDefaultMissing:'Parameter "{name}" is missing default argument',functionParamName:'Parameter name mismatch: "{destName}" versus "{srcName}"',functionReturnTypeMismatch:'Function return type "{sourceType}" is incompatible with type "{destType}"',functionTooFewParams:"Function accepts too few positional parameters; expected {expected} but received {received}",functionTooManyParams:"Function accepts too many positional parameters; expected {expected} but received {received}",incompatibleGetter:"Property getter method is incompatible",incompatibleSetter:"Property setter method is incompatible",initMethodLocation:'The __init__ method is defined in class "{type}"',incompatibleDeleter:"Property deleter method is incompatible",initMethodSignature:'Signature of __init__ is "{type}"',kwargsParamMissing:'Parameter "**{paramName}" has no corresponding parameter',listAssignmentMismatch:'Type "{type}" is incompatible with target list',literalAssignmentMismatch:'"{sourceType}" cannot be assigned to type "{destType}"',matchIsNotExhaustiveType:'Unhandled type: "{type}"',matchIsNotExhaustiveHint:'If exhaustive handling is not intended, add "case _: pass"',memberSetClassVar:'Member "{name}" cannot be assigned through a class instance because it is a ClassVar',memberAssignment:'Expression of type "{type}" cannot be assigned to member "{name}" of class "{classType}"',memberIsAbstract:'"{type}.{name}" is abstract',memberIsAbstractMore:"and {count} more...",memberIsFinalInProtocol:'"{name}" is marked Final in protocol',memberIsInitVar:'Member "{name}" is an init-only field',memberIsInvariant:'"{name}" is invariant because it is mutable',memberIsNotFinalInProtocol:'"{name}" is not marked Final in protocol',memberTypeMismatch:'"{name}" is an incompatible type',memberUnknown:'Member "{name}" is unknown',missingProtocolMember:'Member "{name}" is declared in protocol class "{classType}"',missingGetter:"Property getter method is missing",missingSetter:"Property setter method is missing",missingDeleter:"Property deleter method is missing",namedParamMissingInDest:'Keyword parameter "{name}" is missing in destination',namedParamMissingInSource:'Keyword parameter "{name}" is missing in source',namedParamTypeMismatch:'Keyword parameter "{name}" of type "{sourceType}" cannot be assigned to type "{destType}"',newMethodLocation:'The __new__ method is defined in class "{type}"',newMethodSignature:'Signature of __new__ is "{type}"',noOverloadAssignable:'No overloaded function matches type "{type}"',orPatternMissingName:"Missing names: {name}",overloadSignature:"Overload signature is defined here",overloadNotAssignable:'One or more overloads of "{name}" is not assignable',overloadWithImplementation:'The body of a function overload should be "..."',overriddenMethod:"Overridden method",overriddenSymbol:"Overridden symbol",overrideNotClassMethod:"Base method is declared as a classmethod but override is not",overrideNotInstanceMethod:"Base method is declared as an instance method but override is not",overrideNotStaticMethod:"Base method is declared as a staticmethod but override is not",overrideParamKeywordNoDefault:'Keyword parameter "{name}" mismatch: base parameter has default argument value, override parameter does not',overrideParamKeywordType:'Keyword parameter "{name}" type mismatch: base parameter is type "{baseType}", override parameter is type "{overrideType}"',overrideParamName:'Parameter {index} name mismatch: base parameter is named "{baseName}", override parameter is named "{overrideName}"',overrideParamNameExtra:'Parameter "{name}" is missing in base',overrideParamNameMissing:'Parameter "{name}" is missing in override',overrideParamNamePositionOnly:'Parameter {index} name mismatch: base parameter is named "{baseName}", override parameter is position-only"',overrideParamNoDefault:"Parameter {index} mismatch: base parameter has default argument value, override parameter does not",overrideParamType:'Parameter {index} type mismatch: base parameter is type "{baseType}", override parameter is type "{overrideType}"',overridePositionalParamCount:"Positional parameter count mismatch; base method has {baseCount}, but override has {overrideCount}",overrideReturnType:'Return type mismatch: base method returns type "{baseType}", override returns type "{overrideType}"',overrideType:'Base class defines type as "{type}"',paramAssignment:'Parameter {index}: type "{sourceType}" cannot be assigned to type "{destType}"',paramSpecOverload:"ParamSpec cannot be used with overloaded function",paramType:'Parameter type is "{paramType}"',privateImportFromPyTypedSource:'Import from "{module}" instead',propertyAccessFromProtocolClass:"A property defined within a protocol class cannot be accessed as a class variable",propertyMethodIncompatible:'Property method "{name}" is incompatible',propertyMethodMissing:'Property method "{name}" is missing in override',propertyMissingDeleter:'Property "{name}" has no defined deleter',propertyMissingSetter:'Property "{name}" has no defined setter',protocolIncompatible:'"{sourceType}" is incompatible with protocol "{destType}"',protocolMemberClassVar:'"{name}" is not a class variable',protocolMemberMissing:'"{name}" is not present',protocolSourceIsNotConcrete:'"{sourceType}" is not a concrete class type and cannot be assigned to type "{destType}"',readOnlyAttribute:'Attribute "{name}" is read-only',seeDeclaration:"See declaration",seeClassDeclaration:"See class declaration",seeFunctionDeclaration:"See function declaration",seeMethodDeclaration:"See method declaration",seeParameterDeclaration:"See parameter declaration",seeVariableDeclaration:"See variable declaration",tupleEntryTypeMismatch:"Tuple entry {entry} is incorrect type",tupleAssignmentMismatch:'Type "{type}" is incompatible with target tuple',tupleSizeMismatch:"Element size mismatch; expected {expected} but received {received}",tupleSizeMismatchIndeterminate:"Tuple size mismatch; expected {expected} but received indeterminate number",typeAssignmentMismatch:'Type "{sourceType}" cannot be assigned to type "{destType}"',typeBound:'Type "{sourceType}" is incompatible with bound type "{destType}" for type variable "{name}"',typeConstrainedTypeVar:'Type "{type}" is incompatible with constrained type variable "{name}"',typedDictFieldMissing:'"{name}" is missing from "{type}"',typedDictFieldNotRequired:'"{name}" is not required in "{type}"',typedDictFieldRequired:'"{name}" is required in "{type}"',typedDictFieldTypeMismatch:'Type "{type}" is not assignable to field "{name}"',typedDictFieldRedefinition:'Type in parent class is "{parentType}" and type in child class is "{childType}"',typedDictFieldUndefined:'"{name}" is an undefined field in type "{type}"',typedDictFinalMismatch:'"{sourceType}" is incompatible with "{destType}" because of a @final mismatch',typeIncompatible:'"{sourceType}" is incompatible with "{destType}"',typeNotCallable:'Type "{type}" is not callable',typeNotClass:'"{type}" is not a class',typeParamSpec:'Type "{type}" is incompatible with ParamSpec "{name}"',typeNotStringLiteral:'"{type}" is not a string literal',typeOfSymbol:'Type of "{name}" is "{type}"',typeUnsupported:'Type "{type}" is unsupported',typeVarIsContravariant:'TypeVar "{name}" is contravariant',typeVarIsCovariant:'TypeVar "{name}" is covariant',typeVarIsInvariant:'TypeVar "{name}" is invariant',typeVarNotAllowed:"TypeVar or generic type with type arguments not allowed",typeVarUnsolvableRemedy:"Provide an overload that specifies the return type when the argument is not supplied",typeVarsMissing:"Missing type variables: {names}",typeVarTupleRequiresKnownLength:"TypeVarTuple cannot be bound to a tuple of unknown length",unreachableExcept:'"{exceptionType}" is a subclass of "{parentType}"',useDictInstead:"Use Dict[T1, T2] to indicate a dictionary type",useListInstead:"Use List[T] to indicate a list type or Union[T1, T2] to indicate a union type",useTupleInstead:"Use Tuple[T1, ..., Tn] to indicate a tuple type or Union[T1, T2] to indicate a union type",useTypeInstead:"Use Type[T] instead"},n7={addOptionalToAnnotation:'Add "Optional" to Type Annotation',createTypeStub:"Create Type Stub",createTypeStubFor:'Create Type Stub For "{moduleName}"',executingCommand:"Executing command",filesToAnalyzeOne:"1 file to analyze",filesToAnalyzeCount:"{count} files to analyze",findingReferences:"Finding references",organizeImports:"Organize Imports"},i7={moveFile:'Do you want to update all import references for "{oldModuleName}" to "{newModuleName}"?',moveFileLabel:'Update all import references for "{oldModuleName}" to "{newModuleName}"?',moveFileDescription:'Update all import references for "{oldModuleName}" to "{newModuleName}"?'};var r7={Diagnostic:e7,DiagnosticAddendum:t7,CodeAction:n7,Refactoring:i7},s7={},a7={},o7={},l7={},c7={},u7={},d7={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Localizer=t.setLocaleOverride=t.ParameterizedString=void 0;const e=qt,n=r7,i=s7,r=a7,a=o7,s=l7,l=c7,o=u7,u=d7;class f{constructor(T){this._formatString=T}format(T){let N=this._formatString;return Object.keys(T).forEach(J=>{N=N.replace(`{${J}}`,T[J].toString())}),N}getFormatString(){return this._formatString}}t.ParameterizedString=f;const y="en-us",p=new Map([["de",i],["en-us",n],["es",r],["fr",a],["ja",s],["ru",l],["zh-cn",o],["zh-tw",u]]);let b,v={};function m(M){b===void 0&&(b=F());const T=M.split("."),N=V(b,T)||V(v,T);if(N)return N;(0,e.fail)(`Missing localized string for key "${M}"`)}function V(M,T){let N=M;for(const J of T){if(!N[J])return;N=N[J]}return N}function F(){v=q();const M=te();return U(M)}let P;function G(M){P=M.toLowerCase()}t.setLocaleOverride=G;function te(){if(P)return P;try{if(navigator!=null&&navigator.language)return navigator.language.toLowerCase()}catch{}const M=xu.env,T=M.VSCODE_NLS_CONFIG;if(T)try{return JSON.parse(T).locale}catch{}const N=M.LC_ALL||M.LC_MESSAGES||M.LANG||M.LANGUAGE;if(N){const J=N.split(".");if(J.length>0&&J[0])return J[0]}return y}function q(){const M=D(y);return M||(console.error("Could not load default strings"),{})}function U(M){if(M===y)return{};let T=D(M);if(T!==void 0)return T;const N=M.split("-");return N.length>0&&N[0]&&(T=D(N[0]),T!==void 0)?T:{}}function D(M){return p.get(M)}(function(M){(function(T){T.annotatedParamCountMismatch=()=>new f(m("Diagnostic.annotatedParamCountMismatch")),T.annotatedTypeArgMissing=()=>m("Diagnostic.annotatedTypeArgMissing"),T.annotationFormatString=()=>m("Diagnostic.annotationFormatString"),T.annotationNotSupported=()=>m("Diagnostic.annotationNotSupported"),T.annotationSpansStrings=()=>m("Diagnostic.annotationSpansStrings"),T.annotationStringEscape=()=>m("Diagnostic.annotationStringEscape"),T.argAssignment=()=>new f(m("Diagnostic.argAssignment")),T.argAssignmentFunction=()=>new f(m("Diagnostic.argAssignmentFunction")),T.argAssignmentParam=()=>new f(m("Diagnostic.argAssignmentParam")),T.argAssignmentParamFunction=()=>new f(m("Diagnostic.argAssignmentParamFunction")),T.argMissingForParam=()=>new f(m("Diagnostic.argMissingForParam")),T.argMissingForParams=()=>new f(m("Diagnostic.argMissingForParams")),T.argMorePositionalExpectedCount=()=>new f(m("Diagnostic.argMorePositionalExpectedCount")),T.argMorePositionalExpectedOne=()=>m("Diagnostic.argMorePositionalExpectedOne"),T.argPositional=()=>m("Diagnostic.argPositional"),T.argPositionalExpectedCount=()=>new f(m("Diagnostic.argPositionalExpectedCount")),T.argPositionalExpectedOne=()=>m("Diagnostic.argPositionalExpectedOne"),T.argTypePartiallyUnknown=()=>m("Diagnostic.argTypePartiallyUnknown"),T.argTypeUnknown=()=>m("Diagnostic.argTypeUnknown"),T.assertAlwaysTrue=()=>m("Diagnostic.assertAlwaysTrue"),T.assertTypeArgs=()=>m("Diagnostic.assertTypeArgs"),T.assertTypeTypeMismatch=()=>new f(m("Diagnostic.assertTypeTypeMismatch")),T.assignmentExprContext=()=>m("Diagnostic.assignmentExprContext"),T.assignmentExprComprehension=()=>new f(m("Diagnostic.assignmentExprComprehension")),T.assignmentExprInSubscript=()=>m("Diagnostic.assignmentExprInSubscript"),T.assignmentInProtocol=()=>m("Diagnostic.assignmentInProtocol"),T.assignmentTargetExpr=()=>m("Diagnostic.assignmentTargetExpr"),T.asyncNotInAsyncFunction=()=>m("Diagnostic.asyncNotInAsyncFunction"),T.awaitIllegal=()=>m("Diagnostic.awaitIllegal"),T.awaitNotInAsync=()=>m("Diagnostic.awaitNotInAsync"),T.backticksIllegal=()=>m("Diagnostic.backticksIllegal"),T.baseClassCircular=()=>m("Diagnostic.baseClassCircular"),T.baseClassInvalid=()=>m("Diagnostic.baseClassInvalid"),T.baseClassFinal=()=>new f(m("Diagnostic.baseClassFinal")),T.baseClassMethodTypeIncompatible=()=>new f(m("Diagnostic.baseClassMethodTypeIncompatible")),T.baseClassVariableTypeIncompatible=()=>new f(m("Diagnostic.baseClassVariableTypeIncompatible")),T.baseClassUnknown=()=>m("Diagnostic.baseClassUnknown"),T.bindTypeMismatch=()=>new f(m("Diagnostic.bindTypeMismatch")),T.breakOutsideLoop=()=>m("Diagnostic.breakOutsideLoop"),T.callableExtraArgs=()=>m("Diagnostic.callableExtraArgs"),T.callableFirstArg=()=>m("Diagnostic.callableFirstArg"),T.callableSecondArg=()=>m("Diagnostic.callableSecondArg"),T.casePatternIsIrrefutable=()=>m("Diagnostic.casePatternIsIrrefutable"),T.classAlreadySpecialized=()=>new f(m("Diagnostic.classAlreadySpecialized")),T.classDecoratorTypeUnknown=()=>m("Diagnostic.classDecoratorTypeUnknown"),T.classDefinitionCycle=()=>new f(m("Diagnostic.classDefinitionCycle")),T.classGetItemClsParam=()=>m("Diagnostic.classGetItemClsParam"),T.classMethodClsParam=()=>m("Diagnostic.classMethodClsParam"),T.classNotRuntimeSubscriptable=()=>new f(m("Diagnostic.classNotRuntimeSubscriptable")),T.classPatternBuiltInArgCount=()=>m("Diagnostic.classPatternBuiltInArgCount"),T.classPatternBuiltInArgPositional=()=>m("Diagnostic.classPatternBuiltInArgPositional"),T.classPatternTypeAlias=()=>new f(m("Diagnostic.classPatternTypeAlias")),T.classVarNotAllowed=()=>m("Diagnostic.classVarNotAllowed"),T.classVarFirstArgMissing=()=>m("Diagnostic.classVarFirstArgMissing"),T.classVarOverridesInstanceVar=()=>new f(m("Diagnostic.classVarOverridesInstanceVar")),T.classVarTooManyArgs=()=>m("Diagnostic.classVarTooManyArgs"),T.classVarWithTypeVar=()=>m("Diagnostic.classVarWithTypeVar"),T.clsSelfParamTypeMismatch=()=>new f(m("Diagnostic.clsSelfParamTypeMismatch")),T.codeTooComplexToAnalyze=()=>m("Diagnostic.codeTooComplexToAnalyze"),T.comparisonAlwaysFalse=()=>new f(m("Diagnostic.comparisonAlwaysFalse")),T.comparisonAlwaysTrue=()=>new f(m("Diagnostic.comparisonAlwaysTrue")),T.comprehensionInDict=()=>m("Diagnostic.comprehensionInDict"),T.comprehensionInSet=()=>m("Diagnostic.comprehensionInSet"),T.concatenateParamSpecMissing=()=>m("Diagnostic.concatenateParamSpecMissing"),T.concatenateTypeArgsMissing=()=>m("Diagnostic.concatenateTypeArgsMissing"),T.constantRedefinition=()=>new f(m("Diagnostic.constantRedefinition")),T.constructorNoArgs=()=>new f(m("Diagnostic.constructorNoArgs")),T.constructorParametersMismatch=()=>new f(m("Diagnostic.constructorParametersMismatch")),T.continueInFinally=()=>m("Diagnostic.continueInFinally"),T.continueOutsideLoop=()=>m("Diagnostic.continueOutsideLoop"),T.dataClassBaseClassNotFrozen=()=>m("Diagnostic.dataClassBaseClassNotFrozen"),T.dataClassFieldWithDefault=()=>m("Diagnostic.dataClassFieldWithDefault"),T.dataClassFieldWithoutAnnotation=()=>m("Diagnostic.dataClassFieldWithoutAnnotation"),T.dataClassPostInitParamCount=()=>new f(m("Diagnostic.dataClassPostInitParamCount")),T.dataClassPostInitType=()=>new f(m("Diagnostic.dataClassPostInitType")),T.dataClassSlotsOverwrite=()=>m("Diagnostic.dataClassSlotsOverwrite"),T.dataClassTransformExpectedBoolLiteral=()=>m("Diagnostic.dataClassTransformExpectedBoolLiteral"),T.dataClassTransformFieldSpecifier=()=>new f(m("Diagnostic.dataClassTransformFieldSpecifier")),T.dataClassTransformPositionalParam=()=>m("Diagnostic.dataClassTransformPositionalParam"),T.dataClassTransformUnknownArgument=()=>new f(m("Diagnostic.dataClassTransformUnknownArgument")),T.declaredReturnTypePartiallyUnknown=()=>new f(m("Diagnostic.declaredReturnTypePartiallyUnknown")),T.declaredReturnTypeUnknown=()=>m("Diagnostic.declaredReturnTypeUnknown"),T.defaultValueContainsCall=()=>m("Diagnostic.defaultValueContainsCall"),T.defaultValueNotAllowed=()=>m("Diagnostic.defaultValueNotAllowed"),T.defaultValueNotEllipsis=()=>m("Diagnostic.defaultValueNotEllipsis"),T.deprecatedType=()=>new f(m("Diagnostic.deprecatedType")),T.dictExpandIllegalInComprehension=()=>m("Diagnostic.dictExpandIllegalInComprehension"),T.dictInAnnotation=()=>m("Diagnostic.dictInAnnotation"),T.dictKeyValuePairs=()=>m("Diagnostic.dictKeyValuePairs"),T.dictUnpackIsNotMapping=()=>m("Diagnostic.dictUnpackIsNotMapping"),T.delTargetExpr=()=>m("Diagnostic.delTargetExpr"),T.dunderAllSymbolNotPresent=()=>new f(m("Diagnostic.dunderAllSymbolNotPresent")),T.duplicateArgsParam=()=>m("Diagnostic.duplicateArgsParam"),T.duplicateBaseClass=()=>m("Diagnostic.duplicateBaseClass"),T.duplicateCatchAll=()=>m("Diagnostic.duplicateCatchAll"),T.duplicateEnumMember=()=>new f(m("Diagnostic.duplicateEnumMember")),T.duplicateGenericAndProtocolBase=()=>m("Diagnostic.duplicateGenericAndProtocolBase"),T.duplicateImport=()=>new f(m("Diagnostic.duplicateImport")),T.duplicateKwargsParam=()=>m("Diagnostic.duplicateKwargsParam"),T.duplicateKeywordOnly=()=>m("Diagnostic.duplicateKeywordOnly"),T.duplicateParam=()=>new f(m("Diagnostic.duplicateParam")),T.duplicateCapturePatternTarget=()=>new f(m("Diagnostic.duplicateCapturePatternTarget")),T.duplicateStarPattern=()=>m("Diagnostic.duplicateStarPattern"),T.duplicateStarStarPattern=()=>m("Diagnostic.duplicateStarStarPattern"),T.duplicatePositionOnly=()=>m("Diagnostic.duplicatePositionOnly"),T.duplicateUnpack=()=>m("Diagnostic.duplicateUnpack"),T.ellipsisContext=()=>m("Diagnostic.ellipsisContext"),T.ellipsisSecondArg=()=>m("Diagnostic.ellipsisSecondArg"),T.enumClassOverride=()=>new f(m("Diagnostic.enumClassOverride")),T.exceptionGroupIncompatible=()=>m("Diagnostic.exceptionGroupIncompatible"),T.exceptionTypeIncorrect=()=>new f(m("Diagnostic.exceptionTypeIncorrect")),T.exceptionTypeNotClass=()=>new f(m("Diagnostic.exceptionTypeNotClass")),T.exceptionTypeNotInstantiable=()=>new f(m("Diagnostic.exceptionTypeNotInstantiable")),T.expectedAfterDecorator=()=>m("Diagnostic.expectedAfterDecorator"),T.expectedArrow=()=>m("Diagnostic.expectedArrow"),T.expectedAsAfterException=()=>m("Diagnostic.expectedAsAfterException"),T.expectedAssignRightHandExpr=()=>m("Diagnostic.expectedAssignRightHandExpr"),T.expectedBinaryRightHandExpr=()=>m("Diagnostic.expectedBinaryRightHandExpr"),T.expectedBoolLiteral=()=>m("Diagnostic.expectedBoolLiteral"),T.expectedCase=()=>m("Diagnostic.expectedCase"),T.expectedClassName=()=>m("Diagnostic.expectedClassName"),T.expectedCloseBrace=()=>m("Diagnostic.expectedCloseBrace"),T.expectedCloseBracket=()=>m("Diagnostic.expectedCloseBracket"),T.expectedCloseParen=()=>m("Diagnostic.expectedCloseParen"),T.expectedColon=()=>m("Diagnostic.expectedColon"),T.expectedComplexNumberLiteral=()=>m("Diagnostic.expectedComplexNumberLiteral"),T.expectedDecoratorExpr=()=>m("Diagnostic.expectedDecoratorExpr"),T.expectedDecoratorName=()=>m("Diagnostic.expectedDecoratorName"),T.expectedDecoratorNewline=()=>m("Diagnostic.expectedDecoratorNewline"),T.expectedDelExpr=()=>m("Diagnostic.expectedDelExpr"),T.expectedElse=()=>m("Diagnostic.expectedElse"),T.expectedExceptionClass=()=>m("Diagnostic.expectedExceptionClass"),T.expectedExceptionObj=()=>m("Diagnostic.expectedExceptionObj"),T.expectedExpr=()=>m("Diagnostic.expectedExpr"),T.expectedImport=()=>m("Diagnostic.expectedImport"),T.expectedImportAlias=()=>m("Diagnostic.expectedImportAlias"),T.expectedImportSymbols=()=>m("Diagnostic.expectedImportSymbols"),T.expectedIdentifier=()=>m("Diagnostic.expectedIdentifier"),T.expectedIndentedBlock=()=>m("Diagnostic.expectedIndentedBlock"),T.expectedIn=()=>m("Diagnostic.expectedIn"),T.expectedInExpr=()=>m("Diagnostic.expectedInExpr"),T.expectedFunctionAfterAsync=()=>m("Diagnostic.expectedFunctionAfterAsync"),T.expectedFunctionName=()=>m("Diagnostic.expectedFunctionName"),T.expectedMemberName=()=>m("Diagnostic.expectedMemberName"),T.expectedModuleName=()=>m("Diagnostic.expectedModuleName"),T.expectedNameAfterAs=()=>m("Diagnostic.expectedNameAfterAs"),T.expectedNamedParameter=()=>m("Diagnostic.expectedNamedParameter"),T.expectedNewline=()=>m("Diagnostic.expectedNewline"),T.expectedNewlineOrSemicolon=()=>m("Diagnostic.expectedNewlineOrSemicolon"),T.expectedOpenParen=()=>m("Diagnostic.expectedOpenParen"),T.expectedParamName=()=>m("Diagnostic.expectedParamName"),T.expectedPatternExpr=()=>m("Diagnostic.expectedPatternExpr"),T.expectedPatternSubjectExpr=()=>m("Diagnostic.expectedPatternSubjectExpr"),T.expectedPatternValue=()=>m("Diagnostic.expectedPatternValue"),T.expectedReturnExpr=()=>m("Diagnostic.expectedReturnExpr"),T.expectedSliceIndex=()=>m("Diagnostic.expectedSliceIndex"),T.expectedTypeNotString=()=>m("Diagnostic.expectedTypeNotString"),T.expectedYieldExpr=()=>m("Diagnostic.expectedYieldExpr"),T.finalClassIsAbstract=()=>new f(m("Diagnostic.finalClassIsAbstract")),T.finalContext=()=>m("Diagnostic.finalContext"),T.finalMethodOverride=()=>new f(m("Diagnostic.finalMethodOverride")),T.finalReassigned=()=>new f(m("Diagnostic.finalReassigned")),T.finalRedeclaration=()=>new f(m("Diagnostic.finalRedeclaration")),T.finalRedeclarationBySubclass=()=>new f(m("Diagnostic.finalRedeclarationBySubclass")),T.finalTooManyArgs=()=>m("Diagnostic.finalTooManyArgs"),T.finalUnassigned=()=>new f(m("Diagnostic.finalUnassigned")),T.formatStringBrace=()=>m("Diagnostic.formatStringBrace"),T.formatStringBytes=()=>m("Diagnostic.formatStringBytes"),T.formatStringEscape=()=>m("Diagnostic.formatStringEscape"),T.formatStringInPattern=()=>m("Diagnostic.formatStringInPattern"),T.formatStringIllegal=()=>m("Diagnostic.formatStringIllegal"),T.formatStringUnicode=()=>m("Diagnostic.formatStringUnicode"),T.formatStringUnterminated=()=>m("Diagnostic.formatStringUnterminated"),T.functionDecoratorTypeUnknown=()=>m("Diagnostic.functionDecoratorTypeUnknown"),T.functionInConditionalExpression=()=>m("Diagnostic.functionInConditionalExpression"),T.generatorAsyncReturnType=()=>m("Diagnostic.generatorAsyncReturnType"),T.generatorNotParenthesized=()=>m("Diagnostic.generatorNotParenthesized"),T.generatorSyncReturnType=()=>m("Diagnostic.generatorSyncReturnType"),T.genericClassAssigned=()=>m("Diagnostic.genericClassAssigned"),T.genericClassDeleted=()=>m("Diagnostic.genericClassDeleted"),T.genericNotAllowed=()=>m("Diagnostic.genericNotAllowed"),T.genericTypeAliasBoundTypeVar=()=>new f(m("Diagnostic.genericTypeAliasBoundTypeVar")),T.genericTypeArgMissing=()=>m("Diagnostic.genericTypeArgMissing"),T.genericTypeArgTypeVar=()=>m("Diagnostic.genericTypeArgTypeVar"),T.genericTypeArgUnique=()=>m("Diagnostic.genericTypeArgUnique"),T.globalReassignment=()=>new f(m("Diagnostic.globalReassignment")),T.globalRedefinition=()=>new f(m("Diagnostic.globalRedefinition")),T.implicitStringConcat=()=>m("Diagnostic.implicitStringConcat"),T.importCycleDetected=()=>m("Diagnostic.importCycleDetected"),T.importDepthExceeded=()=>new f(m("Diagnostic.importDepthExceeded")),T.importResolveFailure=()=>new f(m("Diagnostic.importResolveFailure")),T.importSourceResolveFailure=()=>new f(m("Diagnostic.importSourceResolveFailure")),T.importSymbolUnknown=()=>new f(m("Diagnostic.importSymbolUnknown")),T.incompatibleMethodOverride=()=>new f(m("Diagnostic.incompatibleMethodOverride")),T.inconsistentIndent=()=>m("Diagnostic.inconsistentIndent"),T.inconsistentTabs=()=>m("Diagnostic.inconsistentTabs"),T.initMustReturnNone=()=>m("Diagnostic.initMustReturnNone"),T.initSubclassClsParam=()=>m("Diagnostic.initSubclassClsParam"),T.instanceMethodSelfParam=()=>m("Diagnostic.instanceMethodSelfParam"),T.instanceVarOverridesClassVar=()=>new f(m("Diagnostic.instanceVarOverridesClassVar")),T.instantiateAbstract=()=>new f(m("Diagnostic.instantiateAbstract")),T.instantiateProtocol=()=>new f(m("Diagnostic.instantiateProtocol")),T.internalBindError=()=>new f(m("Diagnostic.internalBindError")),T.internalParseError=()=>new f(m("Diagnostic.internalParseError")),T.internalTypeCheckingError=()=>new f(m("Diagnostic.internalTypeCheckingError")),T.invalidIdentifierChar=()=>m("Diagnostic.invalidIdentifierChar"),T.invalidStubStatement=()=>m("Diagnostic.invalidStubStatement"),T.invalidTokenChars=()=>new f(m("Diagnostic.invalidTokenChars")),T.isInstanceInvalidType=()=>new f(m("Diagnostic.isInstanceInvalidType")),T.isSubclassInvalidType=()=>new f(m("Diagnostic.isSubclassInvalidType")),T.keyValueInSet=()=>m("Diagnostic.keyValueInSet"),T.keywordArgInTypeArgument=()=>m("Diagnostic.keywordArgInTypeArgument"),T.keywordOnlyAfterArgs=()=>m("Diagnostic.keywordOnlyAfterArgs"),T.keywordSubscriptIllegal=()=>m("Diagnostic.keywordSubscriptIllegal"),T.lambdaReturnTypeUnknown=()=>m("Diagnostic.lambdaReturnTypeUnknown"),T.lambdaReturnTypePartiallyUnknown=()=>new f(m("Diagnostic.lambdaReturnTypePartiallyUnknown")),T.listAssignmentMismatch=()=>new f(m("Diagnostic.listAssignmentMismatch")),T.listInAnnotation=()=>m("Diagnostic.listInAnnotation"),T.literalUnsupportedType=()=>m("Diagnostic.literalUnsupportedType"),T.literalEmptyArgs=()=>m("Diagnostic.literalEmptyArgs"),T.literalNotCallable=()=>m("Diagnostic.literalNotCallable"),T.matchIncompatible=()=>m("Diagnostic.matchIncompatible"),T.matchIsNotExhaustive=()=>m("Diagnostic.matchIsNotExhaustive"),T.maxParseDepthExceeded=()=>m("Diagnostic.maxParseDepthExceeded"),T.memberAccess=()=>new f(m("Diagnostic.memberAccess")),T.memberDelete=()=>new f(m("Diagnostic.memberDelete")),T.memberSet=()=>new f(m("Diagnostic.memberSet")),T.metaclassConflict=()=>m("Diagnostic.metaclassConflict"),T.metaclassDuplicate=()=>m("Diagnostic.metaclassDuplicate"),T.metaclassIsGeneric=()=>m("Diagnostic.metaclassIsGeneric"),T.methodNotDefined=()=>new f(m("Diagnostic.methodNotDefined")),T.methodNotDefinedOnType=()=>new f(m("Diagnostic.methodNotDefinedOnType")),T.methodOrdering=()=>m("Diagnostic.methodOrdering"),T.methodOverridden=()=>new f(m("Diagnostic.methodOverridden")),T.methodReturnsNonObject=()=>new f(m("Diagnostic.methodReturnsNonObject")),T.missingProtocolMembers=()=>m("Diagnostic.missingProtocolMembers"),T.missingSuperCall=()=>new f(m("Diagnostic.missingSuperCall")),T.moduleAsType=()=>m("Diagnostic.moduleAsType"),T.moduleNotCallable=()=>m("Diagnostic.moduleNotCallable"),T.moduleUnknownMember=()=>new f(m("Diagnostic.moduleUnknownMember")),T.namedExceptAfterCatchAll=()=>m("Diagnostic.namedExceptAfterCatchAll"),T.namedParamAfterParamSpecArgs=()=>new f(m("Diagnostic.namedParamAfterParamSpecArgs")),T.namedTupleEmptyName=()=>m("Diagnostic.namedTupleEmptyName"),T.namedTupleFirstArg=()=>m("Diagnostic.namedTupleFirstArg"),T.namedTupleMultipleInheritance=()=>m("Diagnostic.namedTupleMultipleInheritance"),T.namedTupleNameType=()=>m("Diagnostic.namedTupleNameType"),T.namedTupleNameUnique=()=>m("Diagnostic.namedTupleNameUnique"),T.namedTupleNoTypes=()=>m("Diagnostic.namedTupleNoTypes"),T.namedTupleSecondArg=()=>m("Diagnostic.namedTupleSecondArg"),T.newClsParam=()=>m("Diagnostic.newClsParam"),T.newTypeLiteral=()=>m("Diagnostic.newTypeLiteral"),T.newTypeNotAClass=()=>m("Diagnostic.newTypeNotAClass"),T.newTypeProtocolClass=()=>m("Diagnostic.newTypeProtocolClass"),T.nonDefaultAfterDefault=()=>m("Diagnostic.nonDefaultAfterDefault"),T.noneNotCallable=()=>m("Diagnostic.noneNotCallable"),T.noneNotIterable=()=>m("Diagnostic.noneNotIterable"),T.noneNotSubscriptable=()=>m("Diagnostic.noneNotSubscriptable"),T.noneNotUsableWith=()=>m("Diagnostic.noneNotUsableWith"),T.noneOperator=()=>new f(m("Diagnostic.noneOperator")),T.noneUnknownMember=()=>new f(m("Diagnostic.noneUnknownMember")),T.nonLocalNoBinding=()=>new f(m("Diagnostic.nonLocalNoBinding")),T.nonLocalReassignment=()=>new f(m("Diagnostic.nonLocalReassignment")),T.nonLocalRedefinition=()=>new f(m("Diagnostic.nonLocalRedefinition")),T.nonLocalInModule=()=>m("Diagnostic.nonLocalInModule"),T.noOverload=()=>new f(m("Diagnostic.noOverload")),T.noReturnContainsReturn=()=>m("Diagnostic.noReturnContainsReturn"),T.noReturnContainsYield=()=>m("Diagnostic.noReturnContainsYield"),T.noReturnReturnsNone=()=>m("Diagnostic.noReturnReturnsNone"),T.notRequiredArgCount=()=>m("Diagnostic.notRequiredArgCount"),T.notRequiredNotInTypedDict=()=>m("Diagnostic.notRequiredNotInTypedDict"),T.objectNotCallable=()=>new f(m("Diagnostic.objectNotCallable")),T.obscuredClassDeclaration=()=>new f(m("Diagnostic.obscuredClassDeclaration")),T.obscuredFunctionDeclaration=()=>new f(m("Diagnostic.obscuredFunctionDeclaration")),T.obscuredMethodDeclaration=()=>new f(m("Diagnostic.obscuredMethodDeclaration")),T.obscuredParameterDeclaration=()=>new f(m("Diagnostic.obscuredParameterDeclaration")),T.obscuredVariableDeclaration=()=>new f(m("Diagnostic.obscuredVariableDeclaration")),T.operatorLessOrGreaterDeprecated=()=>m("Diagnostic.operatorLessOrGreaterDeprecated"),T.optionalExtraArgs=()=>m("Diagnostic.optionalExtraArgs"),T.orPatternIrrefutable=()=>m("Diagnostic.orPatternIrrefutable"),T.orPatternMissingName=()=>m("Diagnostic.orPatternMissingName"),T.overlappingOverload=()=>new f(m("Diagnostic.overlappingOverload")),T.overloadAbstractMismatch=()=>new f(m("Diagnostic.overloadAbstractMismatch")),T.overloadImplementationMismatch=()=>new f(m("Diagnostic.overloadImplementationMismatch")),T.overloadReturnTypeMismatch=()=>new f(m("Diagnostic.overloadReturnTypeMismatch")),T.overloadWithImplementation=()=>new f(m("Diagnostic.overloadWithImplementation")),T.overloadWithoutImplementation=()=>new f(m("Diagnostic.overloadWithoutImplementation")),T.paramAfterKwargsParam=()=>m("Diagnostic.paramAfterKwargsParam"),T.paramAlreadyAssigned=()=>new f(m("Diagnostic.paramAlreadyAssigned")),T.paramAnnotationMissing=()=>new f(m("Diagnostic.paramAnnotationMissing")),T.paramNameMissing=()=>new f(m("Diagnostic.paramNameMissing")),T.paramSpecArgsKwargsUsage=()=>m("Diagnostic.paramSpecArgsKwargsUsage"),T.paramSpecArgsMissing=()=>new f(m("Diagnostic.paramSpecArgsMissing")),T.paramSpecArgsUsage=()=>m("Diagnostic.paramSpecArgsUsage"),T.paramSpecAssignedName=()=>new f(m("Diagnostic.paramSpecAssignedName")),T.paramSpecContext=()=>m("Diagnostic.paramSpecContext"),T.paramSpecFirstArg=()=>m("Diagnostic.paramSpecFirstArg"),T.paramSpecKwargsUsage=()=>m("Diagnostic.paramSpecKwargsUsage"),T.paramSpecNotBound=()=>new f(m("Diagnostic.paramSpecNotBound")),T.paramSpecNotUsedByOuterScope=()=>new f(m("Diagnostic.paramSpecNotUsedByOuterScope")),T.paramSpecUnknownArg=()=>m("Diagnostic.paramSpecUnknownArg"),T.paramSpecUnknownMember=()=>new f(m("Diagnostic.paramSpecUnknownMember")),T.paramSpecUnknownParam=()=>new f(m("Diagnostic.paramSpecUnknownParam")),T.paramTypeCovariant=()=>m("Diagnostic.paramTypeCovariant"),T.paramTypeUnknown=()=>new f(m("Diagnostic.paramTypeUnknown")),T.paramAssignmentMismatch=()=>new f(m("Diagnostic.paramAssignmentMismatch")),T.paramTypePartiallyUnknown=()=>new f(m("Diagnostic.paramTypePartiallyUnknown")),T.parenthesizedContextManagerIllegal=()=>m("Diagnostic.parenthesizedContextManagerIllegal"),T.positionArgAfterNamedArg=()=>m("Diagnostic.positionArgAfterNamedArg"),T.privateImportFromPyTypedModule=()=>new f(m("Diagnostic.privateImportFromPyTypedModule")),T.positionOnlyAfterArgs=()=>m("Diagnostic.positionOnlyAfterArgs"),T.positionOnlyAfterKeywordOnly=()=>m("Diagnostic.positionOnlyAfterKeywordOnly"),T.positionOnlyIncompatible=()=>m("Diagnostic.positionOnlyIncompatible"),T.positionOnlyFirstParam=()=>m("Diagnostic.positionOnlyFirstParam"),T.privateUsedOutsideOfClass=()=>new f(m("Diagnostic.privateUsedOutsideOfClass")),T.privateUsedOutsideOfModule=()=>new f(m("Diagnostic.privateUsedOutsideOfModule")),T.propertyOverridden=()=>new f(m("Diagnostic.propertyOverridden")),T.propertyStaticMethod=()=>m("Diagnostic.propertyStaticMethod"),T.protectedUsedOutsideOfClass=()=>new f(m("Diagnostic.protectedUsedOutsideOfClass")),T.protocolBaseClass=()=>new f(m("Diagnostic.protocolBaseClass")),T.protocolIllegal=()=>m("Diagnostic.protocolIllegal"),T.protocolMemberNotClassVar=()=>new f(m("Diagnostic.protocolMemberNotClassVar")),T.protocolNotAllowedInTypeArgument=()=>m("Diagnostic.protocolNotAllowedInTypeArgument"),T.protocolUsedInCall=()=>new f(m("Diagnostic.protocolUsedInCall")),T.protocolVarianceContravariant=()=>new f(m("Diagnostic.protocolVarianceContravariant")),T.protocolVarianceCovariant=()=>new f(m("Diagnostic.protocolVarianceCovariant")),T.protocolVarianceInvariant=()=>new f(m("Diagnostic.protocolVarianceInvariant")),T.recursiveDefinition=()=>new f(m("Diagnostic.recursiveDefinition")),T.relativeImportNotAllowed=()=>m("Diagnostic.relativeImportNotAllowed"),T.requiredArgCount=()=>m("Diagnostic.requiredArgCount"),T.requiredNotInTypedDict=()=>m("Diagnostic.requiredNotInTypedDict"),T.returnMissing=()=>new f(m("Diagnostic.returnMissing")),T.returnOutsideFunction=()=>m("Diagnostic.returnOutsideFunction"),T.returnTypeContravariant=()=>m("Diagnostic.returnTypeContravariant"),T.returnTypeMismatch=()=>new f(m("Diagnostic.returnTypeMismatch")),T.returnTypeUnknown=()=>m("Diagnostic.returnTypeUnknown"),T.returnTypePartiallyUnknown=()=>new f(m("Diagnostic.returnTypePartiallyUnknown")),T.revealLocalsArgs=()=>m("Diagnostic.revealLocalsArgs"),T.revealLocalsNone=()=>m("Diagnostic.revealLocalsNone"),T.revealTypeArgs=()=>m("Diagnostic.revealTypeArgs"),T.revealTypeExpectedTextArg=()=>m("Diagnostic.revealTypeExpectedTextArg"),T.revealTypeExpectedTextMismatch=()=>new f(m("Diagnostic.revealTypeExpectedTextMismatch")),T.revealTypeExpectedTypeMismatch=()=>new f(m("Diagnostic.revealTypeExpectedTypeMismatch")),T.selfTypeContext=()=>m("Diagnostic.selfTypeContext"),T.selfTypeWithTypedSelfOrCls=()=>m("Diagnostic.selfTypeWithTypedSelfOrCls"),T.setterGetterTypeMismatch=()=>m("Diagnostic.setterGetterTypeMismatch"),T.starPatternInAsPattern=()=>m("Diagnostic.starPatternInAsPattern"),T.starPatternInOrPattern=()=>m("Diagnostic.starPatternInOrPattern"),T.singleOverload=()=>new f(m("Diagnostic.singleOverload")),T.slotsAttributeError=()=>new f(m("Diagnostic.slotsAttributeError")),T.slotsClassVarConflict=()=>new f(m("Diagnostic.slotsClassVarConflict")),T.starStarWildcardNotAllowed=()=>m("Diagnostic.starStarWildcardNotAllowed"),T.staticClsSelfParam=()=>m("Diagnostic.staticClsSelfParam"),T.strictTypeGuardReturnType=()=>new f(m("Diagnostic.strictTypeGuardReturnType")),T.stringNonAsciiBytes=()=>m("Diagnostic.stringNonAsciiBytes"),T.stringNotSubscriptable=()=>m("Diagnostic.stringNotSubscriptable"),T.stringUnsupportedEscape=()=>m("Diagnostic.stringUnsupportedEscape"),T.stringUnterminated=()=>m("Diagnostic.stringUnterminated"),T.stubFileMissing=()=>new f(m("Diagnostic.stubFileMissing")),T.stubUsesGetAttr=()=>m("Diagnostic.stubUsesGetAttr"),T.sublistParamsIncompatible=()=>m("Diagnostic.sublistParamsIncompatible"),T.superCallArgCount=()=>m("Diagnostic.superCallArgCount"),T.superCallFirstArg=()=>new f(m("Diagnostic.superCallFirstArg")),T.superCallSecondArg=()=>new f(m("Diagnostic.superCallSecondArg")),T.superCallZeroArgForm=()=>m("Diagnostic.superCallZeroArgForm"),T.symbolIsUnbound=()=>new f(m("Diagnostic.symbolIsUnbound")),T.symbolIsUndefined=()=>new f(m("Diagnostic.symbolIsUndefined")),T.symbolIsPossiblyUnbound=()=>new f(m("Diagnostic.symbolIsPossiblyUnbound")),T.symbolOverridden=()=>new f(m("Diagnostic.symbolOverridden")),T.totalOrderingMissingMethod=()=>m("Diagnostic.totalOrderingMissingMethod"),T.trailingCommaInFromImport=()=>m("Diagnostic.trailingCommaInFromImport"),T.tryWithoutExcept=()=>m("Diagnostic.tryWithoutExcept"),T.tupleAssignmentMismatch=()=>new f(m("Diagnostic.tupleAssignmentMismatch")),T.tupleInAnnotation=()=>m("Diagnostic.tupleInAnnotation"),T.tupleIndexOutOfRange=()=>new f(m("Diagnostic.tupleIndexOutOfRange")),T.typeAliasIsRecursiveDirect=()=>new f(m("Diagnostic.typeAliasIsRecursiveDirect")),T.typeAliasIsRecursiveIndirect=()=>new f(m("Diagnostic.typeAliasIsRecursiveIndirect")),T.typeAliasNotInModuleOrClass=()=>m("Diagnostic.typeAliasNotInModuleOrClass"),T.typeAliasRedeclared=()=>new f(m("Diagnostic.typeAliasRedeclared")),T.typeAnnotationCall=()=>m("Diagnostic.typeAnnotationCall"),T.typeAnnotationVariable=()=>m("Diagnostic.typeAnnotationVariable"),T.typeArgListExpected=()=>m("Diagnostic.typeArgListExpected"),T.typeArgListNotAllowed=()=>m("Diagnostic.typeArgListNotAllowed"),T.typeArgsExpectingNone=()=>new f(m("Diagnostic.typeArgsExpectingNone")),T.typeArgsMismatchOne=()=>new f(m("Diagnostic.typeArgsMismatchOne")),T.typeArgsMissingForAlias=()=>new f(m("Diagnostic.typeArgsMissingForAlias")),T.typeArgsMissingForClass=()=>new f(m("Diagnostic.typeArgsMissingForClass")),T.typeArgsTooFew=()=>new f(m("Diagnostic.typeArgsTooFew")),T.typeArgsTooMany=()=>new f(m("Diagnostic.typeArgsTooMany")),T.typeAssignmentMismatch=()=>new f(m("Diagnostic.typeAssignmentMismatch")),T.typeCallNotAllowed=()=>m("Diagnostic.typeCallNotAllowed"),T.typeCommentDeprecated=()=>m("Diagnostic.typeCommentDeprecated"),T.typedDictAccess=()=>m("Diagnostic.typedDictAccess"),T.typedDictBadVar=()=>m("Diagnostic.typedDictBadVar"),T.typedDictBaseClass=()=>m("Diagnostic.typedDictBaseClass"),T.typedDictDelete=()=>m("Diagnostic.typedDictDelete"),T.typedDictEmptyName=()=>m("Diagnostic.typedDictEmptyName"),T.typedDictEntryName=()=>m("Diagnostic.typedDictEntryName"),T.typedDictEntryUnique=()=>m("Diagnostic.typedDictEntryUnique"),T.typedDictExtraArgs=()=>m("Diagnostic.typedDictExtraArgs"),T.typedDictFieldRedefinition=()=>new f(m("Diagnostic.typedDictFieldRedefinition")),T.typedDictFirstArg=()=>m("Diagnostic.typedDictFirstArg"),T.typedDictSecondArgDict=()=>m("Diagnostic.typedDictSecondArgDict"),T.typedDictSecondArgDictEntry=()=>m("Diagnostic.typedDictSecondArgDictEntry"),T.typedDictSet=()=>m("Diagnostic.typedDictSet"),T.typedDictTotalParam=()=>m("Diagnostic.typedDictTotalParam"),T.typeExpectedClass=()=>new f(m("Diagnostic.typeExpectedClass")),T.typeGuardArgCount=()=>m("Diagnostic.typeGuardArgCount"),T.typeNotAwaitable=()=>new f(m("Diagnostic.typeNotAwaitable")),T.typeNotCallable=()=>new f(m("Diagnostic.typeNotCallable")),T.typeNotIntantiable=()=>new f(m("Diagnostic.typeNotIntantiable")),T.typeNotIterable=()=>new f(m("Diagnostic.typeNotIterable")),T.typeNotSpecializable=()=>new f(m("Diagnostic.typeNotSpecializable")),T.typeNotSubscriptable=()=>new f(m("Diagnostic.typeNotSubscriptable")),T.typeNotUsableWith=()=>new f(m("Diagnostic.typeNotUsableWith")),T.typeNotSupportBinaryOperator=()=>new f(m("Diagnostic.typeNotSupportBinaryOperator")),T.typeNotSupportBinaryOperatorBidirectional=()=>new f(m("Diagnostic.typeNotSupportBinaryOperatorBidirectional")),T.typeNotSupportUnaryOperator=()=>new f(m("Diagnostic.typeNotSupportUnaryOperator")),T.typeNotSupportUnaryOperatorBidirectional=()=>new f(m("Diagnostic.typeNotSupportUnaryOperatorBidirectional")),T.typePartiallyUnknown=()=>new f(m("Diagnostic.typePartiallyUnknown")),T.typeUnknown=()=>new f(m("Diagnostic.typeUnknown")),T.typeVarAssignedName=()=>new f(m("Diagnostic.typeVarAssignedName")),T.typeVarAssignmentMismatch=()=>new f(m("Diagnostic.typeVarAssignmentMismatch")),T.typeVarBoundAndConstrained=()=>m("Diagnostic.typeVarBoundAndConstrained"),T.typeVarFirstArg=()=>m("Diagnostic.typeVarFirstArg"),T.typeVarGeneric=()=>m("Diagnostic.typeVarGeneric"),T.typeVarNoMember=()=>new f(m("Diagnostic.typeVarNoMember")),T.typeVarNotSubscriptable=()=>new f(m("Diagnostic.typeVarNotSubscriptable")),T.typeVarNotUsedByOuterScope=()=>new f(m("Diagnostic.typeVarNotUsedByOuterScope")),T.typeVarPossiblyUnsolvable=()=>new f(m("Diagnostic.typeVarPossiblyUnsolvable")),T.typeVarSingleConstraint=()=>m("Diagnostic.typeVarSingleConstraint"),T.typeVarsNotInGenericOrProtocol=()=>m("Diagnostic.typeVarsNotInGenericOrProtocol"),T.typeVarTupleMustBeUnpacked=()=>m("Diagnostic.typeVarTupleMustBeUnpacked"),T.typeVarTupleContext=()=>m("Diagnostic.typeVarTupleContext"),T.typeVarUnknownParam=()=>new f(m("Diagnostic.typeVarUnknownParam")),T.typeVarUsedByOuterScope=()=>new f(m("Diagnostic.typeVarUsedByOuterScope")),T.typeVarUsedOnlyOnce=()=>new f(m("Diagnostic.typeVarUsedOnlyOnce")),T.typeVarVariance=()=>m("Diagnostic.typeVarVariance"),T.unaccessedClass=()=>new f(m("Diagnostic.unaccessedClass")),T.unaccessedFunction=()=>new f(m("Diagnostic.unaccessedFunction")),T.unaccessedImport=()=>new f(m("Diagnostic.unaccessedImport")),T.unaccessedSymbol=()=>new f(m("Diagnostic.unaccessedSymbol")),T.unaccessedVariable=()=>new f(m("Diagnostic.unaccessedVariable")),T.unexpectedAsyncToken=()=>m("Diagnostic.unexpectedAsyncToken"),T.unexpectedExprToken=()=>m("Diagnostic.unexpectedExprToken"),T.unexpectedIndent=()=>m("Diagnostic.unexpectedIndent"),T.unexpectedUnindent=()=>m("Diagnostic.unexpectedUnindent"),T.unionSyntaxIllegal=()=>m("Diagnostic.unionSyntaxIllegal"),T.unionTypeArgCount=()=>m("Diagnostic.unionTypeArgCount"),T.uninitializedInstanceVariable=()=>new f(m("Diagnostic.uninitializedInstanceVariable")),T.unnecessaryCast=()=>new f(m("Diagnostic.unnecessaryCast")),T.unnecessaryIsInstanceAlways=()=>new f(m("Diagnostic.unnecessaryIsInstanceAlways")),T.unnecessaryIsSubclassAlways=()=>new f(m("Diagnostic.unnecessaryIsSubclassAlways")),T.unnecessaryPyrightIgnore=()=>m("Diagnostic.unnecessaryPyrightIgnore"),T.unnecessaryPyrightIgnoreRule=()=>new f(m("Diagnostic.unnecessaryPyrightIgnoreRule")),T.unnecessaryTypeIgnore=()=>m("Diagnostic.unnecessaryTypeIgnore"),T.unpackArgCount=()=>m("Diagnostic.unpackArgCount"),T.unpackedArgInTypeArgument=()=>m("Diagnostic.unpackedArgInTypeArgument"),T.unpackedArgWithVariadicParam=()=>m("Diagnostic.unpackedArgWithVariadicParam"),T.unpackedDictArgumentNotMapping=()=>m("Diagnostic.unpackedDictArgumentNotMapping"),T.unpackedSubscriptIllegal=()=>m("Diagnostic.unpackedSubscriptIllegal"),T.unpackedTypedDictArgument=()=>m("Diagnostic.unpackedTypedDictArgument"),T.unpackedTypeVarTupleExpected=()=>new f(m("Diagnostic.unpackedTypeVarTupleExpected")),T.unpackExpectedTypedDict=()=>m("Diagnostic.unpackExpectedTypedDict"),T.unpackExpectedTypeVarTuple=()=>m("Diagnostic.unpackExpectedTypeVarTuple"),T.unpackIllegalInComprehension=()=>m("Diagnostic.unpackIllegalInComprehension"),T.unpackInAnnotation=()=>m("Diagnostic.unpackInAnnotation"),T.unpackInDict=()=>m("Diagnostic.unpackInDict"),T.unpackInSet=()=>m("Diagnostic.unpackInSet"),T.unpackNotAllowed=()=>m("Diagnostic.unpackNotAllowed"),T.unpackOperatorNotAllowed=()=>m("Diagnostic.unpackOperatorNotAllowed"),T.unpackTuplesIllegal=()=>m("Diagnostic.unpackTuplesIllegal"),T.unreachableCode=()=>m("Diagnostic.unreachableCode"),T.unreachableExcept=()=>m("Diagnostic.unreachableExcept"),T.unsupportedDunderAllOperation=()=>m("Diagnostic.unsupportedDunderAllOperation"),T.unusedCallResult=()=>new f(m("Diagnostic.unusedCallResult")),T.unusedCoroutine=()=>m("Diagnostic.unusedCoroutine"),T.unusedExpression=()=>m("Diagnostic.unusedExpression"),T.varAnnotationIllegal=()=>m("Diagnostic.varAnnotationIllegal"),T.variadicTypeArgsTooMany=()=>m("Diagnostic.variadicTypeArgsTooMany"),T.variadicTypeParamTooManyAlias=()=>new f(m("Diagnostic.variadicTypeParamTooManyAlias")),T.variadicTypeParamTooManyClass=()=>new f(m("Diagnostic.variadicTypeParamTooManyClass")),T.walrusIllegal=()=>m("Diagnostic.walrusIllegal"),T.walrusNotAllowed=()=>m("Diagnostic.walrusNotAllowed"),T.wildcardInFunction=()=>m("Diagnostic.wildcardInFunction"),T.wildcardLibraryImport=()=>m("Diagnostic.wildcardLibraryImport"),T.yieldFromIllegal=()=>m("Diagnostic.yieldFromIllegal"),T.yieldFromOutsideAsync=()=>m("Diagnostic.yieldFromOutsideAsync"),T.yieldOutsideFunction=()=>m("Diagnostic.yieldOutsideFunction"),T.yieldTypeMismatch=()=>new f(m("Diagnostic.yieldTypeMismatch")),T.yieldWithinListCompr=()=>m("Diagnostic.yieldWithinListCompr"),T.zeroCaseStatementsFound=()=>m("Diagnostic.zeroCaseStatementsFound"),T.zeroLengthTupleNotAllowed=()=>m("Diagnostic.zeroLengthTupleNotAllowed")})(M.Diagnostic||(M.Diagnostic={})),function(T){T.argParam=()=>new f(m("DiagnosticAddendum.argParam")),T.argParamFunction=()=>new f(m("DiagnosticAddendum.argParamFunction")),T.argsParamMissing=()=>new f(m("DiagnosticAddendum.argsParamMissing")),T.argsPositionOnly=()=>new f(m("DiagnosticAddendum.argsPositionOnly")),T.argumentType=()=>new f(m("DiagnosticAddendum.argumentType")),T.argumentTypes=()=>new f(m("DiagnosticAddendum.argumentTypes")),T.assignToNone=()=>m("DiagnosticAddendum.assignToNone"),T.asyncHelp=()=>m("DiagnosticAddendum.asyncHelp"),T.baseClassProvidesType=()=>new f(m("DiagnosticAddendum.baseClassProvidesType")),T.dataClassFrozen=()=>new f(m("DiagnosticAddendum.dataClassFrozen")),T.dataClassFieldLocation=()=>m("DiagnosticAddendum.dataClassFieldLocation"),T.finalMethod=()=>m("DiagnosticAddendum.finalMethod"),T.functionParamDefaultMissing=()=>new f(m("DiagnosticAddendum.functionParamDefaultMissing")),T.functionParamName=()=>new f(m("DiagnosticAddendum.functionParamName")),T.functionReturnTypeMismatch=()=>new f(m("DiagnosticAddendum.functionReturnTypeMismatch")),T.functionTooFewParams=()=>new f(m("DiagnosticAddendum.functionTooFewParams")),T.incompatibleGetter=()=>m("DiagnosticAddendum.incompatibleGetter"),T.incompatibleSetter=()=>m("DiagnosticAddendum.incompatibleSetter"),T.incompatibleDeleter=()=>m("DiagnosticAddendum.incompatibleDeleter"),T.initMethodLocation=()=>new f(m("DiagnosticAddendum.initMethodLocation")),T.initMethodSignature=()=>new f(m("DiagnosticAddendum.initMethodSignature")),T.functionTooManyParams=()=>new f(m("DiagnosticAddendum.functionTooManyParams")),T.keyNotRequired=()=>new f(m("DiagnosticAddendum.keyNotRequired")),T.keyRequiredDeleted=()=>new f(m("DiagnosticAddendum.keyRequiredDeleted")),T.keyUndefined=()=>new f(m("DiagnosticAddendum.keyUndefined")),T.kwargsParamMissing=()=>new f(m("DiagnosticAddendum.kwargsParamMissing")),T.listAssignmentMismatch=()=>new f(m("DiagnosticAddendum.listAssignmentMismatch")),T.literalAssignmentMismatch=()=>new f(m("DiagnosticAddendum.literalAssignmentMismatch")),T.matchIsNotExhaustiveType=()=>new f(m("DiagnosticAddendum.matchIsNotExhaustiveType")),T.matchIsNotExhaustiveHint=()=>m("DiagnosticAddendum.matchIsNotExhaustiveHint"),T.memberAssignment=()=>new f(m("DiagnosticAddendum.memberAssignment")),T.memberIsAbstract=()=>new f(m("DiagnosticAddendum.memberIsAbstract")),T.memberIsAbstractMore=()=>new f(m("DiagnosticAddendum.memberIsAbstractMore")),T.memberIsFinalInProtocol=()=>new f(m("DiagnosticAddendum.memberIsFinalInProtocol")),T.memberIsInitVar=()=>new f(m("DiagnosticAddendum.memberIsInitVar")),T.memberIsInvariant=()=>new f(m("DiagnosticAddendum.memberIsInvariant")),T.memberIsNotFinalInProtocol=()=>new f(m("DiagnosticAddendum.memberIsNotFinalInProtocol")),T.memberSetClassVar=()=>new f(m("DiagnosticAddendum.memberSetClassVar")),T.memberTypeMismatch=()=>new f(m("DiagnosticAddendum.memberTypeMismatch")),T.memberUnknown=()=>new f(m("DiagnosticAddendum.memberUnknown")),T.missingProtocolMember=()=>new f(m("DiagnosticAddendum.missingProtocolMember")),T.missingGetter=()=>m("DiagnosticAddendum.missingGetter"),T.missingSetter=()=>m("DiagnosticAddendum.missingSetter"),T.missingDeleter=()=>m("DiagnosticAddendum.missingDeleter"),T.namedParamMissingInDest=()=>new f(m("DiagnosticAddendum.namedParamMissingInDest")),T.namedParamMissingInSource=()=>new f(m("DiagnosticAddendum.namedParamMissingInSource")),T.namedParamTypeMismatch=()=>new f(m("DiagnosticAddendum.namedParamTypeMismatch")),T.newMethodLocation=()=>new f(m("DiagnosticAddendum.newMethodLocation")),T.newMethodSignature=()=>new f(m("DiagnosticAddendum.newMethodSignature")),T.noOverloadAssignable=()=>new f(m("DiagnosticAddendum.noOverloadAssignable")),T.orPatternMissingName=()=>new f(m("DiagnosticAddendum.orPatternMissingName")),T.overloadSignature=()=>m("DiagnosticAddendum.overloadSignature"),T.overloadNotAssignable=()=>new f(m("DiagnosticAddendum.overloadNotAssignable")),T.overloadWithImplementation=()=>m("DiagnosticAddendum.overloadWithImplementation"),T.overriddenMethod=()=>m("DiagnosticAddendum.overriddenMethod"),T.overriddenSymbol=()=>m("DiagnosticAddendum.overriddenSymbol"),T.overrideNotClassMethod=()=>m("DiagnosticAddendum.overrideNotClassMethod"),T.overrideNotInstanceMethod=()=>m("DiagnosticAddendum.overrideNotInstanceMethod"),T.overrideNotStaticMethod=()=>m("DiagnosticAddendum.overrideNotStaticMethod"),T.overrideParamKeywordNoDefault=()=>new f(m("DiagnosticAddendum.overrideParamKeywordNoDefault")),T.overrideParamKeywordType=()=>new f(m("DiagnosticAddendum.overrideParamKeywordType")),T.overrideParamName=()=>new f(m("DiagnosticAddendum.overrideParamName")),T.overrideParamNameExtra=()=>new f(m("DiagnosticAddendum.overrideParamNameExtra")),T.overrideParamNameMissing=()=>new f(m("DiagnosticAddendum.overrideParamNameMissing")),T.overrideParamNamePositionOnly=()=>new f(m("DiagnosticAddendum.overrideParamNamePositionOnly")),T.overrideParamNoDefault=()=>new f(m("DiagnosticAddendum.overrideParamNoDefault")),T.overrideParamType=()=>new f(m("DiagnosticAddendum.overrideParamType")),T.overridePositionalParamCount=()=>new f(m("DiagnosticAddendum.overridePositionalParamCount")),T.overrideReturnType=()=>new f(m("DiagnosticAddendum.overrideReturnType")),T.overrideType=()=>new f(m("DiagnosticAddendum.overrideType")),T.paramAssignment=()=>new f(m("DiagnosticAddendum.paramAssignment")),T.paramSpecOverload=()=>m("DiagnosticAddendum.paramSpecOverload"),T.paramType=()=>new f(m("DiagnosticAddendum.paramType")),T.privateImportFromPyTypedSource=()=>new f(m("DiagnosticAddendum.privateImportFromPyTypedSource")),T.propertyAccessFromProtocolClass=()=>m("DiagnosticAddendum.propertyAccessFromProtocolClass"),T.propertyMethodIncompatible=()=>new f(m("DiagnosticAddendum.propertyMethodIncompatible")),T.propertyMethodMissing=()=>new f(m("DiagnosticAddendum.propertyMethodMissing")),T.propertyMissingDeleter=()=>new f(m("DiagnosticAddendum.propertyMissingDeleter")),T.propertyMissingSetter=()=>new f(m("DiagnosticAddendum.propertyMissingSetter")),T.protocolMemberClassVar=()=>new f(m("DiagnosticAddendum.protocolMemberClassVar")),T.protocolIncompatible=()=>new f(m("DiagnosticAddendum.protocolIncompatible")),T.protocolMemberMissing=()=>new f(m("DiagnosticAddendum.protocolMemberMissing")),T.protocolSourceIsNotConcrete=()=>new f(m("DiagnosticAddendum.protocolSourceIsNotConcrete")),T.readOnlyAttribute=()=>new f(m("DiagnosticAddendum.readOnlyAttribute")),T.seeDeclaration=()=>m("DiagnosticAddendum.seeDeclaration"),T.seeClassDeclaration=()=>m("DiagnosticAddendum.seeClassDeclaration"),T.seeFunctionDeclaration=()=>m("DiagnosticAddendum.seeFunctionDeclaration"),T.seeMethodDeclaration=()=>m("DiagnosticAddendum.seeMethodDeclaration"),T.seeParameterDeclaration=()=>m("DiagnosticAddendum.seeParameterDeclaration"),T.seeVariableDeclaration=()=>m("DiagnosticAddendum.seeVariableDeclaration"),T.tupleEntryTypeMismatch=()=>new f(m("DiagnosticAddendum.tupleEntryTypeMismatch")),T.tupleAssignmentMismatch=()=>new f(m("DiagnosticAddendum.tupleAssignmentMismatch")),T.tupleSizeMismatch=()=>new f(m("DiagnosticAddendum.tupleSizeMismatch")),T.tupleSizeMismatchIndeterminate=()=>new f(m("DiagnosticAddendum.tupleSizeMismatchIndeterminate")),T.typeAssignmentMismatch=()=>new f(m("DiagnosticAddendum.typeAssignmentMismatch")),T.typeBound=()=>new f(m("DiagnosticAddendum.typeBound")),T.typeConstrainedTypeVar=()=>new f(m("DiagnosticAddendum.typeConstrainedTypeVar")),T.typedDictFieldMissing=()=>new f(m("DiagnosticAddendum.typedDictFieldMissing")),T.typedDictFieldNotRequired=()=>new f(m("DiagnosticAddendum.typedDictFieldNotRequired")),T.typedDictFieldRedefinition=()=>new f(m("DiagnosticAddendum.typedDictFieldRedefinition")),T.typedDictFieldRequired=()=>new f(m("DiagnosticAddendum.typedDictFieldRequired")),T.typedDictFieldTypeMismatch=()=>new f(m("DiagnosticAddendum.typedDictFieldTypeMismatch")),T.typedDictFieldUndefined=()=>new f(m("DiagnosticAddendum.typedDictFieldUndefined")),T.typedDictFinalMismatch=()=>new f(m("DiagnosticAddendum.typedDictFinalMismatch")),T.typeIncompatible=()=>new f(m("DiagnosticAddendum.typeIncompatible")),T.typeNotCallable=()=>new f(m("DiagnosticAddendum.typeNotCallable")),T.typeNotClass=()=>new f(m("DiagnosticAddendum.typeNotClass")),T.typeParamSpec=()=>new f(m("DiagnosticAddendum.typeParamSpec")),T.typeNotStringLiteral=()=>new f(m("DiagnosticAddendum.typeNotStringLiteral")),T.typeOfSymbol=()=>new f(m("DiagnosticAddendum.typeOfSymbol")),T.typeUnsupported=()=>new f(m("DiagnosticAddendum.typeUnsupported")),T.typeVarIsContravariant=()=>new f(m("DiagnosticAddendum.typeVarIsContravariant")),T.typeVarIsCovariant=()=>new f(m("DiagnosticAddendum.typeVarIsCovariant")),T.typeVarIsInvariant=()=>new f(m("DiagnosticAddendum.typeVarIsInvariant")),T.typeVarTupleRequiresKnownLength=()=>m("DiagnosticAddendum.typeVarTupleRequiresKnownLength"),T.typeVarNotAllowed=()=>m("DiagnosticAddendum.typeVarNotAllowed"),T.typeVarsMissing=()=>new f(m("DiagnosticAddendum.typeVarsMissing")),T.typeVarUnsolvableRemedy=()=>m("DiagnosticAddendum.typeVarUnsolvableRemedy"),T.unreachableExcept=()=>new f(m("DiagnosticAddendum.unreachableExcept")),T.useDictInstead=()=>m("DiagnosticAddendum.useDictInstead"),T.useListInstead=()=>m("DiagnosticAddendum.useListInstead"),T.useTupleInstead=()=>m("DiagnosticAddendum.useTupleInstead"),T.useTypeInstead=()=>m("DiagnosticAddendum.useTypeInstead")}(M.DiagnosticAddendum||(M.DiagnosticAddendum={})),function(T){T.addOptionalToAnnotation=()=>m("CodeAction.addOptionalToAnnotation"),T.createTypeStub=()=>m("CodeAction.createTypeStub"),T.createTypeStubFor=()=>new f(m("CodeAction.createTypeStubFor")),T.executingCommand=()=>m("CodeAction.executingCommand"),T.filesToAnalyzeOne=()=>m("CodeAction.filesToAnalyzeOne"),T.filesToAnalyzeCount=()=>new f(m("CodeAction.filesToAnalyzeCount")),T.findingReferences=()=>m("CodeAction.findingReferences"),T.organizeImports=()=>m("CodeAction.organizeImports")}(M.CodeAction||(M.CodeAction={})),function(T){T.moveFile=()=>new f(m("Refactoring.moveFile")),T.moveFileLabel=()=>new f(m("Refactoring.moveFileLabel")),T.moveFileDescription=()=>new f(m("Refactoring.moveFileDescription"))}(M.Refactoring||(M.Refactoring={}))})(t.Localizer||(t.Localizer={}))})(ir);var f7=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),p7=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Nk=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&f7(e,t,n);return p7(e,t),e};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.getTypeOfIndexedTypedDict=Ni.assignToTypedDict=Ni.assignTypedDictToTypedDict=Ni.getTypedDictMembersForClass=Ni.synthesizeTypedDictClassMethods=Ni.createTypedDictType=void 0;const h7=Dt,zu=qt,Rk=Oi,_T=Is,SS=yn,IS=Rn,kn=ir,qp=Nk(kt),vT=Nk(ze),ea=Li,Ly=Ii,St=wn,$s=$n,m7=xr;function y7(t,e,n,i){const r=qp.getFileInfo(e);let a="TypedDict";if(i.length===0)t.addError(kn.Localizer.Diagnostic.typedDictFirstArg(),e);else{const u=i[0];u.argumentCategory!==0||!u.valueExpression||u.valueExpression.nodeType!==48?t.addError(kn.Localizer.Diagnostic.typedDictFirstArg(),i[0].valueExpression||e):a=u.valueExpression.strings.map(f=>f.value).join("")}const s=St.ClassType.createInstantiable(a,vT.getClassFullName(e,r.moduleName,a),r.moduleName,r.filePath,128,vT.getTypeSourceId(e),void 0,n.details.effectiveMetaclass);s.details.baseClasses.push(n),(0,$s.computeMroLinearization)(s);const l=s.details.fields;l.set("__class__",ea.Symbol.createWithType(68,s));let o=!1;if(i.length<2)t.addError(kn.Localizer.Diagnostic.typedDictSecondArgDict(),e);else{const u=i[1],f=new Map;if(u.argumentCategory===0&&u.valueExpression&&u.valueExpression.nodeType===15){o=!0;const y=u.valueExpression;y.entries.forEach(p=>{if(p.nodeType!==17){t.addError(kn.Localizer.Diagnostic.typedDictSecondArgDictEntry(),p);return}if(p.keyExpression.nodeType!==48){t.addError(kn.Localizer.Diagnostic.typedDictEntryName(),p.keyExpression);return}const b=p.keyExpression.strings.map(F=>F.value).join("");if(!b){t.addError(kn.Localizer.Diagnostic.typedDictEmptyName(),p.keyExpression);return}if(f.has(b)){t.addError(kn.Localizer.Diagnostic.typedDictEntryUnique(),p.keyExpression);return}f.set(b,!0);const v=t.getTypeOfExpressionExpectingType(p.valueExpression,!0,!0),m=new ea.Symbol(8),V={type:1,node:p.keyExpression,path:r.filePath,typeAnnotationNode:p.valueExpression,isRequired:v.isRequired,isNotRequired:v.isNotRequired,isRuntimeTypeExpression:!0,range:(0,SS.convertOffsetsToRange)(p.keyExpression.start,IS.TextRange.getEnd(p.keyExpression),r.lines),moduleName:r.moduleName,isInExceptSuite:!1};m.addDeclaration(V),l.set(b,m)}),t.setTypeForNode(y)}else if(u.name)for(let y=1;y<i.length;y++){const p=i[y];if(!p.name||!p.valueExpression)continue;if(f.has(p.name.value)){t.addError(kn.Localizer.Diagnostic.typedDictEntryUnique(),p.valueExpression);continue}f.set(p.name.value,!0);const b=t.getTypeOfExpressionExpectingType(p.valueExpression,!0,!0),v=new ea.Symbol(8),m=qp.getFileInfo(e),V={type:1,node:p.name,path:m.filePath,typeAnnotationNode:p.valueExpression,isRequired:b.isRequired,isNotRequired:b.isNotRequired,isRuntimeTypeExpression:!0,range:(0,SS.convertOffsetsToRange)(p.name.start,IS.TextRange.getEnd(p.valueExpression),m.lines),moduleName:m.moduleName,isInExceptSuite:!1};v.addDeclaration(V),l.set(p.name.value,v)}else t.addError(kn.Localizer.Diagnostic.typedDictSecondArgDict(),e)}return o&&(i.length>=3&&(!i[2].name||i[2].name.value!=="total"||!i[2].valueExpression||i[2].valueExpression.nodeType!==11||!(i[2].valueExpression.constType===15||i[2].valueExpression.constType===33)?t.addError(kn.Localizer.Diagnostic.typedDictTotalParam(),i[2].valueExpression||e):i[2].valueExpression.constType===15&&(s.details.flags|=256)),i.length>3&&t.addError(kn.Localizer.Diagnostic.typedDictExtraArgs(),i[3].valueExpression||e)),Ok(t,e,s,!1),s}Ni.createTypedDictType=y7;function Ok(t,e,n,i){(0,zu.assert)(St.ClassType.isTypedDictClass(n));const r=St.FunctionType.createSynthesizedInstance("__new__",1);St.FunctionType.addParameter(r,{category:0,name:"cls",type:n,hasDeclaredType:!0}),St.FunctionType.addDefaultParameters(r),r.details.declaredReturnType=St.ClassType.cloneAsInstance(n);const a=St.FunctionType.createSynthesizedInstance("__init__");St.FunctionType.addParameter(a,{category:0,name:"self",type:St.ClassType.cloneAsInstance(n),hasDeclaredType:!0}),a.details.declaredReturnType=St.NoneType.createInstance(),St.FunctionType.addParameter(a,{category:1,type:St.AnyType.create(),hasDeclaredType:!0});const s=Mc(t,n);s.forEach((u,f)=>{St.FunctionType.addParameter(a,{category:0,name:f,hasDefault:!u.isRequired,type:u.valueType,hasDeclaredType:!0})});const l=n.details.fields;l.set("__init__",ea.Symbol.createWithType(4,a)),l.set("__new__",ea.Symbol.createWithType(4,r));const o=t.getBuiltInType(e,"str");if((0,St.isInstantiableClass)(o)){const u={category:0,name:"self",type:St.ClassType.cloneAsInstance(n),hasDeclaredType:!0},f=G=>{let te=St.TypeVarType.createInstance("__TDefault");return te=St.TypeVarType.cloneForScopeId(te,G.details.typeVarScopeId,n.details.name,1),te},y=(G,te,q,U=!1,D=!1)=>{const M=St.FunctionType.createSynthesizedInstance("get",256);if(St.FunctionType.addParameter(M,u),M.details.typeVarScopeId=t.getScopeIdForNode(e),St.FunctionType.addParameter(M,{category:0,name:"k",type:G,hasDeclaredType:!0}),q){const T=f(M);let N,J;U?(N=St.AnyType.create(),J=te!=null?te:St.AnyType.create()):(N=D&&te?te:T,te?J=D?te:(0,St.combineTypes)([te,T]):J=T),St.FunctionType.addParameter(M,{category:0,name:"default",type:N,hasDeclaredType:!0}),M.details.declaredReturnType=J}else M.details.declaredReturnType=U?te:(0,St.combineTypes)([te!=null?te:St.AnyType.create(),St.NoneType.createInstance()]);return M},p=(G,te)=>{const q={category:0,name:"k",type:G,hasDeclaredType:!0},U=St.FunctionType.createSynthesizedInstance("pop",256);St.FunctionType.addParameter(U,u),St.FunctionType.addParameter(U,q),U.details.declaredReturnType=te;const D=St.FunctionType.createSynthesizedInstance("pop",256);St.FunctionType.addParameter(D,u),St.FunctionType.addParameter(D,q),D.details.typeVarScopeId=t.getScopeIdForNode(e);const M=f(D);return St.FunctionType.addParameter(D,{category:0,name:"default",hasDeclaredType:!0,type:M,hasDefault:!0}),D.details.declaredReturnType=(0,St.combineTypes)([te,M]),[U,D]},b=(G,te)=>{const q=St.FunctionType.createSynthesizedInstance("setdefault",256);return St.FunctionType.addParameter(q,u),St.FunctionType.addParameter(q,{category:0,name:"k",hasDeclaredType:!0,type:G}),St.FunctionType.addParameter(q,{category:0,name:"default",hasDeclaredType:!0,type:te}),q.details.declaredReturnType=te,q},v=G=>{const te=St.FunctionType.createSynthesizedInstance("delitem",256);return St.FunctionType.addParameter(te,u),St.FunctionType.addParameter(te,{category:0,name:"k",hasDeclaredType:!0,type:G}),te.details.declaredReturnType=St.NoneType.createInstance(),te},m=[],V=[],F=[];if(s.forEach((G,te)=>{const q=St.ClassType.cloneAsInstance(St.ClassType.cloneWithLiteral(o,te));m.push(y(q,G.valueType,!1,G.isRequired)),G.isRequired?m.push(y(q,G.valueType,!0,!0,!0)):(m.push(y(q,G.valueType,!0,!1,!0)),m.push(y(q,G.valueType,!0,!1,!1))),G.isRequired||(0,h7.appendArray)(V,p(q,G.valueType)),F.push(b(q,G.valueType))}),i){const G=t.getTypingType(e,"LiteralString");if(G&&(0,St.isInstantiableClass)(G)){const te=St.ClassType.cloneAsInstance(G);m.push(y(te,St.NoneType.createInstance(),!1,!0)),m.push(y(te,void 0,!0))}}const P=St.ClassType.cloneAsInstance(o);m.push(y(P,St.AnyType.create(),!1)),m.push(y(P,St.AnyType.create(),!0)),l.set("get",ea.Symbol.createWithType(4,St.OverloadedFunctionType.create(m))),V.length>0&&l.set("pop",ea.Symbol.createWithType(4,St.OverloadedFunctionType.create(V))),F.length>0&&l.set("setdefault",ea.Symbol.createWithType(4,St.OverloadedFunctionType.create(F))),l.set("__delitem__",ea.Symbol.createWithType(4,v(P)))}}Ni.synthesizeTypedDictClassMethods=Ok;function Mc(t,e,n=!1){if(!e.details.typedDictEntries){const a=new Map;xk(t,e,a),e.details.typedDictEntries=a}const i=(0,$s.buildTypeVarContextFromSpecializedClass)(e),r=new Map;return e.details.typedDictEntries.forEach((a,s)=>{const l={...a};l.valueType=(0,$s.applySolvedTypeVars)(l.valueType,i),r.set(s,l)}),n&&e.typedDictNarrowedEntries&&e.typedDictNarrowedEntries.forEach((a,s)=>{const l={...a};l.valueType=(0,$s.applySolvedTypeVars)(l.valueType,i),r.set(s,l)}),r}Ni.getTypedDictMembersForClass=Mc;function xk(t,e,n,i=0){if((0,zu.assert)(St.ClassType.isTypedDictClass(e)),i>St.maxTypeRecursionCount)return;i++,e.details.baseClasses.forEach(a=>{(0,St.isInstantiableClass)(a)&&St.ClassType.isTypedDictClass(a)&&xk(t,a,n,i)});const r=(0,$s.buildTypeVarContextFromSpecializedClass)(e);e.details.fields.forEach((a,s)=>{if(!a.isIgnoredForProtocolMatch()){const l=(0,Ly.getLastTypedDeclaredForSymbol)(a);if(l&&l.type===1){let o=t.getEffectiveTypeOfSymbol(a);o=(0,$s.applySolvedTypeVars)(o,r);let u=!St.ClassType.isCanOmitDictValues(e);(0,Ly.isRequiredTypedDictVariable)(a)?u=!0:(0,Ly.isNotRequiredTypedDictVariable)(a)&&(u=!1);const f=n.get(s);if(f&&!(0,St.isTypeSame)(f.valueType,o)){const y=new Rk.DiagnosticAddendum;y.addMessage(kn.Localizer.DiagnosticAddendum.typedDictFieldRedefinition().format({parentType:t.printType(f.valueType),childType:t.printType(o)})),t.addDiagnostic(qp.getFileInfo(l.node).diagnosticRuleSet.reportGeneralTypeIssues,_T.DiagnosticRule.reportGeneralTypeIssues,kn.Localizer.Diagnostic.typedDictFieldRedefinition().format({name:s})+y.getString(),l.node)}n.set(s,{valueType:o,isRequired:u,isProvided:!1})}}})}function g7(t,e,n,i,r,a,s=0){let l=!0;const o=Mc(t,e),u=Mc(t,n,!0);return o.forEach((f,y)=>{const p=u.get(y);if(!p)i==null||i.createAddendum().addMessage(kn.Localizer.DiagnosticAddendum.typedDictFieldMissing().format({name:y,type:t.printType(n)})),l=!1;else{f.isRequired&&!p.isRequired?(i==null||i.createAddendum().addMessage(kn.Localizer.DiagnosticAddendum.typedDictFieldRequired().format({name:y,type:t.printType(e)})),l=!1):!f.isRequired&&p.isRequired&&(i==null||i.createAddendum().addMessage(kn.Localizer.DiagnosticAddendum.typedDictFieldNotRequired().format({name:y,type:t.printType(e)})),l=!1);const b=i==null?void 0:i.createAddendum();t.assignType(f.valueType,p.valueType,b==null?void 0:b.createAddendum(),r,void 0,a,s)||(b==null||b.addMessage(kn.Localizer.DiagnosticAddendum.memberTypeMismatch().format({name:y})),l=!1)}}),l}Ni.assignTypedDictToTypedDict=g7;function T7(t,e,n,i,r){(0,zu.assert)((0,St.isClassInstance)(e)),(0,zu.assert)(St.ClassType.isTypedDictClass(e)),(0,zu.assert)(n.length===i.length);let a=!0;const s=new Map;let l,o=e;e.details.typeParameters.length>0&&(l=new m7.TypeVarContext((0,$s.getTypeVarScopeId)(e)),e.typeArguments&&(o=St.ClassType.cloneForSpecialization(e,void 0,!1)));const u=Mc(t,o);if(n.forEach((y,p)=>{if(!(0,St.isClassInstance)(y)||!St.ClassType.isBuiltIn(y,"str")||!(0,$s.isLiteralType)(y))a=!1;else{const b=y.literalValue,v=u.get(b);if(!v)a=!1,r&&r.addMessage(kn.Localizer.DiagnosticAddendum.typedDictFieldUndefined().format({name:y.literalValue,type:t.printType(St.ClassType.cloneAsInstance(e))}));else{const m=r==null?void 0:r.createAddendum();t.assignType(v.valueType,i[p],m==null?void 0:m.createAddendum(),l)||(m&&m.addMessage(kn.Localizer.DiagnosticAddendum.typedDictFieldTypeMismatch().format({name:y.literalValue,type:t.printType(i[p])})),a=!1),v.isRequired||s.set(b,{valueType:i[p],isRequired:!1,isProvided:!0}),v.isProvided=!0}}}),!a||(u.forEach((y,p)=>{y.isRequired&&!y.isProvided&&(r&&r.addMessage(kn.Localizer.DiagnosticAddendum.typedDictFieldRequired().format({name:p,type:t.printType(e)})),a=!1)}),!a))return;const f=l?(0,$s.applySolvedTypeVars)(o,l):e;return s.size===0?f:St.ClassType.cloneForNarrowedTypedDictEntries(f,s)}Ni.assignToTypedDict=T7;function _7(t,e,n,i){if(e.items.length!==1)return t.addError(kn.Localizer.Diagnostic.typeArgsMismatchOne().format({received:e.items.length}),e),{node:e,type:St.UnknownType.create()};if(e.trailingComma||e.items[0].name||e.items[0].argumentCategory!==0)return;const r=Mc(t,n,i.method==="get"),a=t.getTypeOfExpression(e.items[0].valueExpression),s=a.type;let l=new Rk.DiagnosticAddendum,o=!0;const u=(0,$s.mapSubtypes)(s,f=>{if((0,St.isAnyOrUnknown)(f))return f;if((0,St.isClassInstance)(f)&&St.ClassType.isBuiltIn(f,"str")){if(f.literalValue===void 0)return St.UnknownType.create();const y=f.literalValue,p=r.get(y);if(p)!(p.isRequired||p.isProvided)&&i.method==="get"&&(vT.isWithinTryBlock(e,!0)||l.addMessage(kn.Localizer.DiagnosticAddendum.keyNotRequired().format({name:y,type:t.printType(n)})));else return l.addMessage(kn.Localizer.DiagnosticAddendum.keyUndefined().format({name:y,type:t.printType(n)})),o=!1,St.UnknownType.create();return i.method==="set"?t.assignType(p.valueType,i.setType||St.AnyType.create(),l)||(o=!1):i.method==="del"&&p.isRequired&&(l.addMessage(kn.Localizer.DiagnosticAddendum.keyRequiredDeleted().format({name:y})),o=!1),p.valueType}return l.addMessage(kn.Localizer.DiagnosticAddendum.typeNotStringLiteral().format({type:t.printType(f)})),o=!1,St.UnknownType.create()});if(i.setExpectedTypeDiag&&!l.isEmpty()&&!i.setExpectedTypeDiag.isEmpty()&&(l=i.setExpectedTypeDiag),!l.isEmpty()){let f;i.method==="set"?f=kn.Localizer.Diagnostic.typedDictSet():i.method==="del"?f=kn.Localizer.Diagnostic.typedDictDelete():f=kn.Localizer.Diagnostic.typedDictAccess();const y=qp.getFileInfo(e);t.addDiagnostic(o?y.diagnosticRuleSet.reportTypedDictNotRequiredAccess:y.diagnosticRuleSet.reportGeneralTypeIssues,o?_T.DiagnosticRule.reportTypedDictNotRequiredAccess:_T.DiagnosticRule.reportGeneralTypeIssues,f+l.getString(),e)}return{node:e,type:u,isIncomplete:!!a.isIncomplete}}Ni.getTypeOfIndexedTypedDict=_7;var Gp={exports:{}};(function(t,e){var n=Te&&Te.__createBinding||(Object.create?function(N,J,L,ce){ce===void 0&&(ce=L),Object.defineProperty(N,ce,{enumerable:!0,get:function(){return J[L]}})}:function(N,J,L,ce){ce===void 0&&(ce=L),N[ce]=J[L]}),i=Te&&Te.__setModuleDefault||(Object.create?function(N,J){Object.defineProperty(N,"default",{enumerable:!0,value:J})}:function(N,J){N.default=J}),r=Te&&Te.__importStar||function(N){if(N&&N.__esModule)return N;var J={};if(N!=null)for(var L in N)L!=="default"&&Object.prototype.hasOwnProperty.call(N,L)&&n(J,N,L);return i(J,N),J};Object.defineProperty(e,"__esModule",{value:!0}),e.getVariableDocString=e.getFunctionOrClassDeclDocString=e.getClassDocString=e.getModuleDocString=e.getVariableInStubFileDocStrings=e.getPropertyDocStringInherited=e.getOverloadedFunctionDocStringsInherited=e.getFunctionDocStringInherited=void 0;const a=Bn,s=r(ze),l=is,o=wn,u=$n,f=29;function y(N,J){if(N.category===6){if(N.overloads.length===0)return!1;N=N.overloads[0]}return N.details.moduleName==="builtins"&&!!J&&!!N.boundToType&&!o.ClassType.isSameGenericClass(J,N.boundToType)}function p(N,J,L,ce){let ue;if(!y(N,ce)&&J&&(0,a.isFunctionDeclaration)(J)&&(ue=U(N,J,L)),!ue&&ce){const W=N.details.name,Y=(0,u.getClassMemberIterator)(ce,W,f);for(const ee of Y)if(ee.symbol.getDeclarations().length>0){const le=ee.symbol.getDeclarations().slice(-1)[0];if((0,a.isFunctionDeclaration)(le)&&(ue=D(le,L),ue))break}}return ue||N.details.docString}e.getFunctionDocStringInherited=p;function b(N,J,L,ce,ue){let W;if(!y(N,ue)){for(const Y of J)if(W=te(N,Y,L),W&&W.length>0)return W}if(ue&&N.overloads.length>0){const Y=N.overloads[0].details.name,ee=(0,u.getClassMemberIterator)(ue,Y,f);for(const H of ee){const le=H.symbol.getDeclarations().slice(-1)[0],R=ce.getTypeForDeclaration(le);if(R&&(W=te(R,le,L),W&&W.length>0))break}}return W!=null?W:[]}e.getOverloadedFunctionDocStringsInherited=b;function v(N,J,L){const ce=s.getEnclosingClass(N.node.name,!1),ue=ce?L.getTypeOfClass(ce):void 0;if(ue)return q(N,J,L,ue.classType)}e.getPropertyDocStringInherited=v;function m(N,J){const L=[];if(!(0,l.isStubFile)(N.path))return L;for(const ce of J.findDeclarations(N))if((0,a.isVariableDeclaration)(ce)&&!!ce.docString)L.push(ce.docString);else if((0,a.isClassDeclaration)(ce)||(0,a.isFunctionDeclaration)(ce)){const ue=P(ce);ue&&L.push(ue)}return L}e.getVariableInStubFileDocStrings=m;function V(N,J,L){let ce=N.docString;if(!ce&&J&&(0,l.isStubFile)(J.path)){const ue=L.findModules(J.path);ce=T(ue)}return ce}e.getModuleDocString=V;function F(N,J,L){let ce=N.details.docString;if(!ce&&J&&(0,a.isClassDeclaration)(J)&&(ce=M([J]),!ce&&J&&(0,l.isStubFile)(J.path)&&J.type===4)){const ue=L.findClassDeclarations(J);ce=M(ue)}if(!ce&&J){const ue=L.findClassDeclarationsByType(J.path,N);if(ue){const W=ue.filter(Y=>(0,a.isClassDeclaration)(Y)).map(Y=>Y);ce=M(W)}}return ce}e.getClassDocString=F;function P(N){var J,L,ce;return s.getDocString((ce=(L=(J=N.node)===null||J===void 0?void 0:J.suite)===null||L===void 0?void 0:L.statements)!==null&&ce!==void 0?ce:[])}e.getFunctionOrClassDeclDocString=P;function G(N,J){if(!!N)return N.docString!==void 0?N.docString:m(N,J).find(L=>L)}e.getVariableDocString=G;function te(N,J,L){if(!(0,o.isOverloadedFunction)(N))return;const ce=[];if(N.overloads.some(ue=>ue.details.docString))N.overloads.forEach(ue=>{ue.details.docString&&ce.push(ue.details.docString)});else if(J&&(0,l.isStubFile)(J.path)&&(0,a.isFunctionDeclaration)(J)){const ue=L.findFunctionDeclarations(J),W=M(ue);W&&ce.push(W)}return ce}function q(N,J,L,ce){if(!N||!(0,a.isFunctionDeclaration)(N))return;const ue=L.getTypeForDeclaration(N);if(!ue||!(0,u.isMaybeDescriptorInstance)(ue))return;const W=N.node.nodeType===28?N.node.name.value:void 0;if(!W)return;const Y=(0,u.getClassIterator)(ce,0);for(const[ee]of Y){if(!(0,o.isInstantiableClass)(ee))continue;const H=ee.details.fields.get(W),le=H==null?void 0:H.getDeclarations();if(le){for(const R of le)if((0,a.isFunctionDeclaration)(R)){const ae=L.getTypeForDeclaration(R);if(ae&&(0,u.isMaybeDescriptorInstance)(ae)){const re=D(R,J);if(re)return re}}}}}function U(N,J,L){if(!(0,o.isFunction)(N))return;let ce=N.details.docString;return!ce&&J&&(ce=D(J,L)),!ce&&N.details.declaration&&(ce=D(N.details.declaration,L)),ce}function D(N,J){let L=M([N]);if(!L&&(0,l.isStubFile)(N.path)){const ce=J.findFunctionDeclarations(N);L=M(ce)}return L}function M(N){for(const J of N){const L=P(J);if(L)return L}}function T(N){for(const J of N)if(J.statements){const L=s.getDocString(J.statements);if(L)return L}}})(Gp,Gp.exports);var _s={},v7=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),b7=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),S7=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&v7(e,t,n);return b7(e,t),e};Object.defineProperty(_s,"__esModule",{value:!0});_s.printFunctionParts=_s.printObjectTypeForClass=_s.printLiteralValue=_s.printType=void 0;const I7=S7(ze),Zt=wn,zy=$n,C7=/'/g,w7=/\\"/g;function Pi(t,e,n,i=[]){const r=(e&16)!==0,a=(e&128)!==0;if(e&=-145,t.typeAliasInfo){let s=!0;if(((e&32)===0||i.find(l=>l===t))&&(s=!1),!s)try{i.push(t);let l=t.typeAliasInfo.name;const o=t.typeAliasInfo.typeParameters;if(o){let u;t.typeAliasInfo.typeArguments?((e&2)===0||t.typeAliasInfo.typeArguments.some(f=>!(0,Zt.isAnyOrUnknown)(f)))&&(u=[],t.typeAliasInfo.typeArguments.forEach((f,y)=>{const p=y<o.length?o[y]:o[o.length-1];(0,Zt.isVariadicTypeVar)(p)&&(0,Zt.isClassInstance)(f)&&(0,zy.isTupleClass)(f)&&f.tupleTypeArguments?f.tupleTypeArguments.forEach(b=>{u.push(Pi(b.type,e,n,i))}):u.push(Pi(f,e,n,i))})):((e&2)===0||o.some(f=>!(0,Zt.isAnyOrUnknown)(f)))&&(u=[],o.forEach(f=>{u.push(Pi(f,e,n,i))})),u&&(u.length===0?l+="[()]":l+=`[${u.join(", ")}]`)}if(t.category!==10)return l}finally{i.pop()}}if(i.find(s=>{var l;return s===t||s.typeAliasInfo!==void 0&&s.typeAliasInfo.fullName===((l=t.typeAliasInfo)===null||l===void 0?void 0:l.fullName)})||i.length>Zt.maxTypeRecursionCount)return(0,Zt.isTypeVar)(t)&&t.details.isSynthesized&&t.details.recursiveTypeAliasName?t.details.recursiveTypeAliasName:t.typeAliasInfo?t.typeAliasInfo.name:"...";try{i.push(t);const s=(e&64)===0,l=o=>o.condition!==void 0&&s?"*":"";switch(t.category){case 0:return"Unbound";case 1:return(e&1)!==0?"Any":"Unknown";case 8:return`Module("${t.moduleName}")`;case 7:{if(Zt.TypeBase.isInstance(t))return t.literalValue!==void 0?`Literal[${_u(t)}]`:`${bT(t,e,n,i)}${l(t)}`;{let o;return t.literalValue!==void 0?o=`Literal[${_u(t)}]`:o=`${bT(t,e,n,i)}`,`${kf(t,o)}${l(t)}`}}case 5:{const o=Lk(t,e,n,i),u=`(${o[0].join(", ")})`;if(Zt.FunctionType.isParamSpecValue(t))return u;const f=`${u} -> ${o[1]}`;return a?`(${f})`:f}case 6:return`Overload[${t.overloads.map(f=>Pi(f,e,n,i)).join(", ")}]`;case 9:{const o=new Set,u=new Set,f=e&8?e|128:e;if((e&32)===0&&t.typeAliasSources)for(const m of t.typeAliasSources){let V=!0,F=!0;const P=new Set;for(const G of m.subtypes){let te=0,q=!1;for(const U of t.subtypes){if((0,Zt.isTypeSame)(G,U,void 0,!0)){o.has(te)||(F=!1),P.add(te),q=!0;break}te++}if(!q){V=!1;break}}V&&!F&&(u.add(Pi(m,f,n,i)),P.forEach(G=>o.add(G)))}const y=t.subtypes.findIndex(m=>(0,Zt.isNoneInstance)(m));if(y>=0&&!o.has(y)){const m=(0,Zt.removeNoneFromUnion)(t);if((0,Zt.isNever)(m))return"None";const V=Pi(m,f,n,i);if(e&8){const F=V+" | None";return r?`(${F})`:F}return"Optional["+V+"]"}const p=new Set,b=new Set;(0,zy.doForEachSubtype)(t,(m,V)=>{o.has(V)||((0,Zt.isClassInstance)(m)&&m.literalValue!==void 0?p.add(_u(m)):(0,Zt.isInstantiableClass)(m)&&m.literalValue!==void 0?b.add(_u(m)):u.add(Pi(m,f,n,i)))});const v=[];if(u.forEach(m=>v.push(m)),p.size>0){const m=[];p.forEach(V=>m.push(V)),v.push(`Literal[${m.join(", ")}]`)}if(b.size>0){const m=[];b.forEach(V=>m.push(V)),v.push(`Type[Literal[${m.join(", ")}]]`)}if(v.length===1)return v[0];if(e&8){const m=v.join(" | ");return r?`(${m})`:m}return`Union[${v.join(", ")}]`}case 10:{if(t.details.isSynthesized){if(t.details.recursiveTypeAliasName)return(e&32)!==0&&t.details.boundType?Pi(Zt.TypeBase.isInstance(t)?(0,zy.convertToInstance)(t.details.boundType):t.details.boundType,e,n,i):t.details.recursiveTypeAliasName;if(t.details.isSynthesizedSelf&&t.details.boundType){let u=Pi(t.details.boundType,e&-33,n,i);return(0,Zt.isAnyOrUnknown)(t.details.boundType)||(u=`Self@${u}`),Zt.TypeBase.isInstantiable(t)?`${kf(t,u)}`:u}return(e&1)!==0?"Any":"Unknown"}if(t.details.isParamSpec)return t.paramSpecAccess?`${t.details.name}.${t.paramSpecAccess}`:`${Zt.TypeVarType.getReadableName(t)}`;let o=Zt.TypeVarType.getReadableName(t);return t.isVariadicUnpacked&&(o=`*${o}`),Zt.TypeBase.isInstantiable(t)?`${kf(t,o)}`:o}case 3:return`${Zt.TypeBase.isInstantiable(t)?`${kf(t,"None")}`:"None"}${l(t)}`;case 4:return t.isNoReturn?"NoReturn":"Never";case 2:return t.isEllipsis?"...":"Any"}return""}finally{i.pop()}}_s.printType=Pi;function _u(t,e="'"){const n=t.literalValue;if(n===void 0)return"";let i;if(typeof n=="string"){const r=t.details.name==="bytes"?"b":"";let a=n;const s=50;n.length>s&&(a=n.substring(0,s)+"\u2026"),i=JSON.stringify(a).toString(),e!=='"'&&(i=`'${i.substring(1,i.length-1).replace(w7,'"').replace(C7,"\\'")}'`),r&&(i=`${r}${i}`)}else typeof n=="boolean"?i=n?"True":"False":n instanceof Zt.EnumLiteral?i=`${n.className}.${n.itemName}`:typeof n=="bigint"?(i=n.toString(),i.endsWith("n")&&(i=i.substring(0,i.length-1))):i=n.toString();return i}_s.printLiteralValue=_u;function bT(t,e,n,i=[]){var r,a;let s=t.aliasName||t.details.name;if(!Zt.ClassType.isPseudoGenericClass(t)){const l=Zt.ClassType.getTypeParameters(t),o=l.length>0?l[l.length-1]:void 0,u=o?o.details.isVariadic:!1,f=(r=t.tupleTypeArguments)!==null&&r!==void 0?r:(a=t.typeArguments)===null||a===void 0?void 0:a.map(y=>({type:y,isUnbounded:!1}));if(f)if(f.length>0){const y=[];let p=!0;f.forEach((b,v)=>{const m=v<l.length?l[v]:void 0;if(m&&m.details.isVariadic&&(0,Zt.isClassInstance)(b.type)&&Zt.ClassType.isBuiltIn(b.type,"tuple")&&b.type.tupleTypeArguments)b.type.tupleTypeArguments.length===0?((0,Zt.isAnyOrUnknown)(b.type)||(p=!1),y.push("()")):y.push(...b.type.tupleTypeArguments.map(V=>{(0,Zt.isAnyOrUnknown)(V.type)||(p=!1);const F=Pi(V.type,e,n,i);return V.isUnbounded?`*tuple[${F}, ...]`:F}));else{(0,Zt.isAnyOrUnknown)(b.type)||(p=!1);const V=Pi(b.type,e,n,i);b.isUnbounded?f.length===1?y.push(V,"..."):y.push(`*tuple[${V}, ...]`):y.push(V)}}),t.isUnpacked&&(s="*"+s),((e&2)===0||!p)&&(s+="["+y.join(", ")+"]")}else(Zt.ClassType.isTupleClass(t)||u)&&(s+="[()]");else l.length>0&&((e&2)===0||l.some(y=>!(0,Zt.isAnyOrUnknown)(y)))&&(s+="["+l.map(y=>Pi(y,e,n,i)).join(", ")+"]")}return s}_s.printObjectTypeForClass=bT;function Lk(t,e,n,i=[]){const r=[];let a=!1;t.details.parameters.forEach((o,u)=>{if(u===t.details.parameters.length-1&&o.category===1&&(0,Zt.isVariadicTypeVar)(o.type)){const b=Zt.FunctionType.getEffectiveParameterType(t,u);if((0,Zt.isClassInstance)(b)&&Zt.ClassType.isBuiltIn(b,"tuple")&&b.tupleTypeArguments){b.tupleTypeArguments.forEach(v=>{const m=Pi(v.type,e,n,i);r.push(m)});return}}let f="";o.category===1?(!o.name||!o.isNameSynthesized)&&(f+="*"):o.category===2&&(f+="**"),o.name&&!o.isNameSynthesized&&(f+=o.name,a=!0);let y="=",p=!1;if(o.name)if(o.hasDeclaredType||o.isTypeInferred){const b=Zt.FunctionType.getEffectiveParameterType(t,u),v=i.length<Zt.maxTypeRecursionCount?Pi(b,e,n,i):"";o.isNameSynthesized?o.category===1&&!(0,Zt.isUnpacked)(b)&&(f+="*"):f+=": ",o.category===2&&(0,Zt.isUnpacked)(b)&&(f+="**"),f+=v,(0,Zt.isParamSpec)(b)&&(o.category===1||o.category===2)&&(p=!0),y=" = "}else(e&2)===0&&(o.isNameSynthesized||(f+=": "),f+="Unknown",y=" = ");else if(o.category===0)if(a)f+="/";else return;if(o.hasDefault&&(o.defaultValueExpression?f+=y+I7.printExpression(o.defaultValueExpression):f+=y+"..."),Zt.FunctionType.shouldSkipArgsKwargsCompatibilityCheck(t)&&!p){if(o.category===1)f="...";else if(o.category===2)return}r.push(f)}),t.details.paramSpec&&r.push(`**${Pi(t.details.paramSpec,e,n,i)}`);const s=n(t),l=i.length<Zt.maxTypeRecursionCount?Pi(s,e|16|128,n,i):"";return[r,l]}_s.printFunctionParts=Lk;function kf(t,e){var n;const i=((n=t.instantiableNestingLevel)!==null&&n!==void 0?n:0)+1;for(let r=0;r<i;r++)e=`Type[${e}]`;return e}var rl={};Object.defineProperty(rl,"__esModule",{value:!0});rl.fromLSPAny=rl.toLSPAny=void 0;function E7(t){return t}rl.toLSPAny=E7;function F7(t){return t}rl.fromLSPAny=F7;var To={},k7=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),D7=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),yv=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&k7(e,t,n);return D7(e,t),e};Object.defineProperty(To,"__esModule",{value:!0});To.DocumentSymbolCollector=void 0;const CS=yv(kt),lu=Bn,Co=Sn,wS=ze,P7=yv(ze),A7=rs,ES=yv(qi),M7=is,N7=wn,FS=$n,Uy=In,R7=Dt,kS=qt;class Kp extends A7.ParseTreeWalker{constructor(e,n,i,r,a,s=!1,l=!0){super(),this._symbolName=e,this._declarations=n,this._evaluator=i,this._cancellationToken=r,this._startingNode=a,this._treatModuleInImportAndFromImportSame=s,this._skipUnreachableCode=l,this._results=[],this._dunderAllNameNodes=new Set,this._setDunderAllNodes(this._startingNode)}static collectFromNode(e,n,i,r,a=!1,s=!0){const l=e.value,o=this.getDeclarationsForNode(e,n,!0,i);return r=r!=null?r:(0,wS.getModuleNode)(e),r?new Kp(l,o,n,i,r,a,s).collect():[]}static getDeclarationsForNode(e,n,i,r,a){(0,Uy.throwIfCancellationRequested)(r);const s=this._getDeclarationsForNode(e,n),l=[];return s.forEach(o=>{const u=n.resolveAliasDeclaration(o,i);if(u&&(l.push(u),a&&(0,M7.isStubFile)(u.path))){const f=a.findDeclarations(u);for(const y of f)y&&y.path&&this._addIfUnique(l,y)}}),l}collect(){return this.walk(this._startingNode),this._results}walk(e){(!this._skipUnreachableCode||!CS.isCodeUnreachable(e))&&super.walk(e)}visitName(e){if((0,Uy.throwIfCancellationRequested)(this._cancellationToken),e.value!==this._symbolName)return!1;if(this._declarations.length>0){const n=Kp._getDeclarationsForNode(e,this._evaluator,this._skipUnreachableCode);n&&n.length>0&&n.some(i=>this._resultsContainsDeclaration(i))&&this._addResult(e)}else this._addResult(e);return!1}visitString(e){return(0,Uy.throwIfCancellationRequested)(this._cancellationToken),this._dunderAllNameNodes.has(e)&&this._addResult(e),!1}_addResult(e){const n=e.nodeType===38?e:(0,wS.getStringNodeValueRange)(e);this._results.push({node:e,range:n})}_resultsContainsDeclaration(e){const n=this._evaluator.resolveAliasDeclaration(e,!1);if(!n)return!1;if(this._declarations.some(r=>(0,Co.areDeclarationsSame)(r,n,this._treatModuleInImportAndFromImportSame)))return!0;const i=this._getResolveAliasDeclaration(n);return!i||i===n?!1:this._declarations.some(r=>(0,Co.areDeclarationsSame)(r,i,this._treatModuleInImportAndFromImportSame))}_getResolveAliasDeclaration(e){if(i(e))return(0,Co.getDeclarationsWithUsesLocalNameRemoved)([e])[0];const n=this._evaluator.resolveAliasDeclaration(e,!0);return i(n)?(0,Co.getDeclarationsWithUsesLocalNameRemoved)([n])[0]:n;function i(r){return!!r&&r.type===6&&r.node&&r.usesLocalName&&r.node.nodeType===21}}_setDunderAllNodes(e){if(e.nodeType!==36)return;const n=CS.getDunderAllInfo(e);if(!n)return;const i=ES.getScopeForNode(e);!i||n.stringNodes.forEach(r=>{if(r.value!==this._symbolName)return;const a=i.lookUpSymbolRecursive(r.value);!a||!a.symbol.getDeclarations().some(s=>this._resultsContainsDeclaration(s))||this._dunderAllNameNodes.add(r)})}static _addIfUnique(e,n){for(const i of e)if((0,Co.areDeclarationsSame)(i,n))return;e.push(n)}static _getDeclarationsForNode(e,n,i=!0){var r;return((r=e.parent)===null||r===void 0?void 0:r.nodeType)!==37?this._getDeclarationsForNonModuleNameNode(e,n,i):this._getDeclarationsForModuleNameNode(e,n)}static _getDeclarationsForNonModuleNameNode(e,n,i=!0){var r,a;(0,kS.assert)(((r=e.parent)===null||r===void 0?void 0:r.nodeType)!==37);let s=n.getDeclarationsForNameNode(e,i)||[];if(((a=e.parent)===null||a===void 0?void 0:a.nodeType)===23&&(s=s.filter(l=>l.node===e.parent)),s.length===0){const l=n.getType(e);if((l==null?void 0:l.category)===8)return[(0,Co.createSynthesizedAliasDeclaration)(l.filePath)]}for(const l of s.filter(o=>(0,lu.isAliasDeclaration)(o)&&!o.loadSymbolsFromPath)){const o=l.node;o.nodeType!==23&&s.push(...n.getDeclarationsForNameNode(o.module.nameParts[0],i)||[])}for(const l of s.filter(o=>(0,lu.isFunctionDeclaration)(o)&&o.isMethod&&o.node.name.value.length>0)){const o=l,u=P7.getEnclosingClass(o.node),f=u?n.getTypeOfClass(u):void 0;if(!!f){for(const y of f.classType.details.mro)if((0,N7.isInstantiableClass)(y)){const p=(0,FS.lookUpClassMember)(y,o.node.name.value),b=(0,FS.lookUpClassMember)(y,o.node.name.value,1);p&&!b&&p.symbol.getDeclarations().filter(v=>(0,lu.isFunctionDeclaration)(v)&&v.isMethod).forEach(v=>this._addIfUnique(s,v))}}}return s}static _getDeclarationsForModuleNameNode(e,n){var i,r,a,s,l;(0,kS.assert)(((i=e.parent)===null||i===void 0?void 0:i.nodeType)===37);const o=e.parent;if(((r=o.parent)===null||r===void 0?void 0:r.nodeType)===21||((a=o.parent)===null||a===void 0?void 0:a.nodeType)===22){const u=o.nameParts.findIndex(f=>f===e);if(u===0){const f=[];if(f.push(...((s=n.getDeclarationsForNameNode(o.nameParts[0]))===null||s===void 0?void 0:s.filter(v=>(0,lu.isAliasDeclaration)(v)))||[]),f.length===0)return f;const y=o.nameParts.length===1&&o.parent.nodeType===21&&!!o.parent.alias,p=y?o.parent.alias.value:o.nameParts[0].value,b=(l=ES.getScopeForNode(e))===null||l===void 0?void 0:l.lookUpSymbolRecursive(p);if(b&&o.nameParts.length===1){let v=[];(0,R7.appendArray)(v,b.symbol.getDeclarations().filter(m=>(0,lu.isAliasDeclaration)(m))),v.length>1&&(v=v.filter(m=>(m=m,m.firstNamePart!==void 0?m.firstNamePart===o.nameParts[0].value:m.node===o.parent))),y&&(v=(0,Co.getDeclarationsWithUsesLocalNameRemoved)(v)),f.push(...v)}return f}return u>0?n.getDeclarationsForNameNode(o.nameParts[u])||[]:[]}return[]}}To.DocumentSymbolCollector=Kp;var pr={},O7=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),x7=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),L7=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&O7(e,t,n);return x7(e,t),e};Object.defineProperty(pr,"__esModule",{value:!0});pr.getAutoImportText=pr.getDocumentationPartsForTypeAndDecl=pr.getOverloadedFunctionDocStringsFromType=pr.getFunctionDocStringFromType=pr.getOverloadedFunctionTooltip=void 0;const zk=L7(ze),ec=Gp.exports,vu=wn,z7=Ht;function U7(t,e,n=70){let i="";const r=t.overloads.filter(a=>vu.FunctionType.isOverloaded(a)).map(a=>a.details.name+e.printType(a,!1));for(let a=0;a<r.length;a++)a!==0&&r[a].length>n&&r[a-1].length<=n&&(i+=`
`),i+=r[a],a<r.length-1&&(i+=`
`,r[a].length>n&&(i+=`
`));return i}pr.getOverloadedFunctionTooltip=U7;function Uk(t,e,n){const i=t.details.declaration,r=i?zk.getEnclosingClass(i.node):void 0,a=r?n.getTypeOfClass(r):void 0;return(0,ec.getFunctionDocStringInherited)(t,i,e,a==null?void 0:a.classType)}pr.getFunctionDocStringFromType=Uk;function Vk(t,e,n){if(t.overloads.length===0)return[];const i=t.overloads[0].details.declaration,r=i?zk.getEnclosingClass(i.node):void 0,a=r?n.getTypeOfClass(r):void 0;return(0,ec.getOverloadedFunctionDocStringsInherited)(t,t.overloads.map(s=>s.details.declaration).filter(z7.isDefined),e,n,a==null?void 0:a.classType)}pr.getOverloadedFunctionDocStringsFromType=Vk;function V7(t,e,n,i){if((n==null?void 0:n.type)===1&&n.typeAliasName&&n.docString)return[n.docString];if((0,vu.isModule)(e)){const r=(0,ec.getModuleDocString)(e,n,t);if(r)return[r]}else if((0,vu.isInstantiableClass)(e)){const r=(0,ec.getClassDocString)(e,n,t);if(r)return[r]}else if((0,vu.isFunction)(e)){const r=Uk(e,t,i);if(r)return[r]}else{if((0,vu.isOverloadedFunction)(e))return Vk(e,t,i);if((n==null?void 0:n.type)===1){const r=(0,ec.getVariableDocString)(n,t);if(r)return[r]}else if((n==null?void 0:n.type)===3){const r=(0,ec.getPropertyDocStringInherited)(n,t,i);if(r)return[r]}}return[]}pr.getDocumentationPartsForTypeAndDecl=V7;function B7(t,e,n){let i;return e?i=`from ${e} import ${t}`:i=`import ${t}`,n&&(i=`${i} as ${n}`),i}pr.getAutoImportText=B7;(function(t){var e=Te&&Te.__createBinding||(Object.create?function(ye,E,$,B){B===void 0&&(B=$),Object.defineProperty(ye,B,{enumerable:!0,get:function(){return E[$]}})}:function(ye,E,$,B){B===void 0&&(B=$),ye[B]=E[$]}),n=Te&&Te.__setModuleDefault||(Object.create?function(ye,E){Object.defineProperty(ye,"default",{enumerable:!0,value:E})}:function(ye,E){ye.default=E}),i=Te&&Te.__importStar||function(ye){if(ye&&ye.__esModule)return ye;var E={};if(ye!=null)for(var $ in ye)$!=="default"&&Object.prototype.hasOwnProperty.call(ye,$)&&e(E,ye,$);return n(E,ye),E};Object.defineProperty(t,"__esModule",{value:!0}),t.CompletionMap=t.CompletionProvider=t.dictionaryKeyDetail=t.autoImportDetail=void 0;const r=Cs,a=i(kt),s=Bn,l=Sn,o=co,u=i(ze),f=ze,y=qi,p=is,b=i(Dn),v=Ii,m=Ni,V=Gp.exports,F=_s,P=wn,G=$n,te=In,q=Dt,U=i(qt),D=qt,M=rl,T=yn,N=hl,J=i(bn),L=Rn,ce=Rn,ue=ji,W=ws,Y=Ws,ee=To,H=pr;var le;(function(ye){const E=["True","False","None","and","or","not","is","lambda","yield","assert","break","class","continue","def","del","elif","else","except","finally","for","from","globalThis","if","import","in","nonlocal","pass","raise","return","try","while","with"],$=[...E,"async","await"],B=[...$,"case","match"];function X(Z){return Z>=N.PythonVersion.V3_10?B:Z>=N.PythonVersion.V3_5?$:E}ye.forVersion=X})(le||(le={}));var R;(function(ye){ye[ye.LikelyKeyword=0]="LikelyKeyword",ye[ye.RecentImportModuleName=1]="RecentImportModuleName",ye[ye.ImportModuleName=2]="ImportModuleName",ye[ye.LiteralValue=3]="LiteralValue",ye[ye.NamedParameter=4]="NamedParameter",ye[ye.RecentKeywordOrSymbol=5]="RecentKeywordOrSymbol",ye[ye.RecentAutoImport=6]="RecentAutoImport",ye[ye.Keyword=7]="Keyword",ye[ye.EnumMember=8]="EnumMember",ye[ye.NormalSymbol=9]="NormalSymbol",ye[ye.PrivateSymbol=10]="PrivateSymbol",ye[ye.DunderSymbol=11]="DunderSymbol",ye[ye.AutoImport=12]="AutoImport"})(R||(R={})),t.autoImportDetail="Auto-import",t.dictionaryKeyDetail="Dictionary key";const ae=.25,re=128;class d{constructor(E,$,B,X,Z,se,_e,be,ve,De,Oe,Je,$e){this._workspacePath=E,this._parseResults=$,this._fileContents=B,this._importResolver=X,this._position=Z,this._filePath=se,this._configOptions=_e,this._importLookup=be,this._evaluator=ve,this._options=De,this._sourceMapper=Oe,this._autoImportMaps=Je,this._cancellationToken=$e,this._insideStringLiteral=void 0,this._execEnv=this._configOptions.findExecEnvironment(this._filePath)}getCompletionsForPosition(){var E,$;const B=(0,T.convertPositionToOffset)(this._position,this._parseResults.tokenizerOutput.lines);if(B===void 0)return;const X=u.getTokenOverlapping(this._parseResults.tokenizerOutput.tokens,B);if((X==null?void 0:X.type)===5){const Ye=X;this._insideStringLiteral=ce.TextRange.contains(Ye,B)||Ye.flags&65536?Ye:void 0}let Z=u.findNodeByOffset(this._parseResults.parseTree,B);const se=Z,_e=Z?u.getNodeDepth(Z):0;if(!se||se.nodeType!==38){let Ye=B,it=!1;for(;Ye>=0;){Ye--;const ht=this._fileContents.substr(Ye,1);if(ht==="("||ht===`
`||ht==="}")break;ht===","&&(it=!0);const mt=u.findNodeByOffset(this._parseResults.parseTree,Ye);if(mt&&mt!==se){u.getNodeDepth(mt)>_e&&(Z=mt,it&&((E=Z.parent)===null||E===void 0?void 0:E.nodeType)===23&&(Z=Z.parent));break}}}if(Z===void 0)return;const be=this._parseResults.tokenizerOutput.lines.getItemAt(this._position.line),ve=this._fileContents.substr(be.start,be.length),De=ve.substr(0,this._position.character),Oe=ve.substr(this._position.character),Je=De.search(/\w+$/),$e=Je>=0?De.substr(Je):"";if(this._isWithinComment(B))return;let tt=Z;for(;tt&&tt.nodeType!==0;)tt=tt.parent;let Ue=tt||Z;for(;;){if((0,te.throwIfCancellationRequested)(this._cancellationToken),Ue.nodeType===49)return this._getLiteralCompletions(Ue,$e,De,Oe);if(Ue.nodeType===48||Ue.nodeType===27)return;if(Ue.nodeType===37)return this._getImportModuleCompletions(Ue);if(Ue.nodeType===0)return this._getExpressionErrorCompletions(Ue,$e,De,Oe);if(Ue.nodeType===35)return this._getMemberAccessCompletions(Ue.leftExpression,$e);if(Ue.nodeType===15){const it=new k;if(this._addTypedDictKeys(Ue,void 0,De,Oe,it))return{completionMap:it}}const Ye=u.getFirstAncestorOrSelfOfKind(Ue,17);if(Ye&&(($=Ye.parent)===null||$===void 0?void 0:$.nodeType)===15){const it=Ye.parent;if(it.trailingCommaToken&&it.trailingCommaToken.start<B){const ht=new k;if(this._addTypedDictKeys(it,void 0,De,Oe,ht))return{completionMap:ht}}}if(Ue.nodeType===38){const it=this._tryGetNameCompletions(Ue,B,$e,De,Oe);if(it||it===void 0)return it}if(Ue.nodeType===22)return this._getImportFromCompletions(Ue,$e);if((0,W.isExpressionNode)(Ue))return this._getExpressionCompletions(Ue,$e,De,Oe);if(Ue.nodeType===50)return Ue.parent&&Ue.parent.nodeType===25&&!Ue.parent.name&&Ue.parent.typeExpression&&ce.TextRange.getEnd(Ue.parent.typeExpression)<B&&B<=Ue.parent.exceptSuite.start||Ue.parent&&Ue.parent.nodeType===10&&(!Ue.parent.name||!Ue.parent.name.value)&&Ue.parent.arguments.length===0&&B<=Ue.parent.suite.start?void 0:this._getStatementCompletions(Ue,$e,De,Oe);if(Ue.nodeType===36)return this._getStatementCompletions(Ue,$e,De,Oe);if(Ue.nodeType===41&&Ue.length===0&&Ue.parent&&Ue.parent.nodeType===30)return;if(!Ue.parent)break;Ue=Ue.parent}}resolveCompletionItem(E){(0,te.throwIfCancellationRequested)(this._cancellationToken);const $=(0,M.fromLSPAny)(E.data),B=E.label;let X="";$.autoImportText&&(X=$.autoImportText);const Z=d._mostRecentCompletions.findIndex(se=>se.label===B&&se.autoImportText===X);if(Z>0&&(d._mostRecentCompletions=d._mostRecentCompletions.splice(Z,1)),Z!==0&&d._mostRecentCompletions.unshift({label:B,autoImportText:X}),d._mostRecentCompletions.length>re&&d._mostRecentCompletions.pop(),$.symbolLabel){if(this._itemToResolve=E,!$.autoImportText)this.getCompletionsForPosition();else if(!E.additionalTextEdits){const _e={completionMap:new k};this._addAutoImportCompletions($.symbolLabel,1,!1,_e)}}}_tryGetNameCompletions(E,$,B,X,Z){var se,_e,be;if(!E.parent)return!1;if(!(E.parent.nodeType===21&&E.parent.alias===E)){if(E.parent.nodeType===37)return E.parent.parent&&E.parent.parent.nodeType===21&&!E.parent.parent.alias&&ce.TextRange.getEnd(E.parent.parent)<$?void 0:this._getImportModuleCompletions(E.parent);if(E.parent.nodeType===23){if(E.parent.alias===E)return;const ve=E.parent.parent;return ve&&ve.nodeType===22?!E.parent.alias&&ce.TextRange.getEnd(E.parent)<$?void 0:E.parent.name===E?this._getImportFromCompletions(ve,B):this._getImportFromCompletions(ve,""):!1}if(E.parent.nodeType===35&&E===E.parent.memberName)return this._getMemberAccessCompletions(E.parent.leftExpression,B);if(!(E.parent.nodeType===25&&E===E.parent.name)){if(E.parent.nodeType===28&&E===E.parent.name)return!((se=E.parent.decorators)===null||se===void 0)&&se.some(ve=>this._isOverload(ve))?this._getMethodOverloadsCompletions(B,E):void 0;if(!(E.parent.nodeType===41&&E===E.parent.name)&&!(E.parent.nodeType===10&&E===E.parent.name)&&!(E.parent.nodeType===26&&ce.TextRange.contains(E.parent.targetExpression,E.start))&&!(E.parent.nodeType===33&&ce.TextRange.contains(E.parent.targetExpression,E.start))){if(E.parent.nodeType===3||E.parent.nodeType===4){if((E.parent.nodeType===4?E.parent.name:E.parent.leftExpression)!==E||B.length===0)return!1;const De=this._evaluator.getDeclarationsForNameNode(E);if((De==null?void 0:De.length)!==1||!(0,s.isVariableDeclaration)(De[0])||De[0].node!==E)return!1;const Oe=this._getExpressionCompletions(E,B,X,Z);return Oe!=null&&Oe.completionMap&&Oe.completionMap.delete(E.value),Oe}if(E.parent.nodeType===47&&((_e=E.parent.parent)===null||_e===void 0?void 0:_e.nodeType)===50&&((be=E.parent.parent.parent)===null||be===void 0?void 0:be.nodeType)===10){const ve=this._getClassVariableCompletions(B,E);if(ve)return ve}return!1}}}}_isWithinComment(E){var $,B;const X=Z(E,this._parseResults.tokenizerOutput.tokens);if(!X)return!1;return(B=($=X.comments)===null||$===void 0?void 0:$.some(se=>ce.TextRange.overlaps(se,E)))!==null&&B!==void 0?B:!1;function Z(se,_e){const be=_e.getItemAtPosition(se);if(be<0)return;let ve=_e.getItemAt(be);if(!(se>ve.start&&se<ve.start+ve.length)){for(let De=be-1;De>=0;De--){const Oe=_e.getItemAt(De);if(ve.start!==Oe.start)break;ve=Oe}return se<=ve.start?ve:(U.assert(be+1<_e.length),_e.getItemAt(be+1))}}}_getExpressionErrorCompletions(E,$,B,X){var Z;switch(E.category){case 0:return this._createSingleKeywordCompletion("in");case 1:return this._createSingleKeywordCompletion("else");case 2:case 4:return this._getExpressionCompletions(E,$,B,X);case 3:{let se=this._getLiteralCompletions(E,$,B,X);return(!se||!se.completionMap)&&(se=this._getExpressionCompletions(E,$,B,X)),se}case 7:{if(E.child&&(0,W.isExpressionNode)(E.child))return this._getMemberAccessCompletions(E.child,$);break}case 10:{if(E.child&&E.child.nodeType===38)return!((Z=E.decorators)===null||Z===void 0)&&Z.some(se=>this._isOverload(se))?this._getMethodOverloadsCompletions($,E.child):this._getMethodOverrideCompletions($,E.child,E.decorators);break}}}_isOverload(E){return this._checkDecorator(E,"overload")}_checkDecorator(E,$){return E.expression.nodeType===38&&E.expression.value===$}_createSingleKeywordCompletion(E){const $=r.CompletionItem.create(E);$.kind=r.CompletionItemKind.Keyword,$.sortText=this._makeSortText(R.LikelyKeyword,E);const B=new k;return B.set($),{completionMap:B}}_getClassVariableCompletions(E,$){const B=u.getEnclosingClass($,!1);if(!B)return;const X=this._evaluator.getTypeOfClass(B);if(!X)return;const Z=new Map;for(const be of X.classType.details.mro)(0,P.isInstantiableClass)(be)&&(0,G.getMembersForClass)(be,Z,!1);const se=(0,p.isStubFile)(this._filePath)?3:2,_e=new k;return Z.forEach((be,ve)=>{if(b.isPrivateName(ve)||be.isPrivateMember()||be.isExternallyHidden()||!J.isPatternInSymbol($.value,ve))return;const De=be.getDeclarations().filter($e=>(0,s.isVariableDeclaration)($e)&&$e.moduleName!=="builtins");if(De.length===0||De.some($e=>$e.node&&u.getEnclosingClass($e.node,!1)===B))return;let Oe;const Je=De.filter($e=>$e.typeAnnotationNode);if(Je.length>0){const $e=`${ve}: ${u.printExpression(Je[Je.length-1].typeAnnotationNode,se)}`;Oe={textEdit:this._createReplaceEdits(E,$,$e)}}this._addSymbol(ve,be,$.value,_e,{edits:Oe})}),_e.size>0?{completionMap:_e}:void 0}_getMethodOverloadsCompletions(E,$){var B;const X=be(this._evaluator,$);if(!X)return;const Z=((B=$.parent)===null||B===void 0?void 0:B.nodeType)===28?!0:void 0,se=new k,_e=u.getEnclosingFunction($);return X.forEach((ve,De)=>{const Oe=(0,v.getLastTypedDeclaredForSymbol)(ve);if(!Oe||Oe.type!==3||!Oe.node.decorators.some($e=>this._isOverload($e)))return;const Je=ve.getDeclarations();if(!(Je.length===1&&Je.some($e=>$e.node===_e))&&J.isPatternInSymbol($.value,De)){const $e=this._createReplaceEdits(E,$,Oe.node.name.value);this._addSymbol(De,ve,$.value,se,{funcParensDisabled:Z,edits:{textEdit:$e}})}}),{completionMap:se};function be(ve,De){const Oe=u.getEnclosingClass(De,!1);if(Oe){const $e=ve.getTypeOfClass(Oe);if(!$e)return;const tt=new Map;for(const Ue of $e.classType.details.mro)(0,P.isInstantiableClass)(Ue)&&(0,G.getMembersForClass)(Ue,tt,!1);return tt}const Je=u.getEnclosingModule(De);if(Je){const $e=a.getScope(Je);return $e==null?void 0:$e.symbolTable}}}_getMethodOverrideCompletions(E,$,B){var X,Z;const se=u.getEnclosingClass($,!0);if(!se)return;const _e=this._evaluator.getTypeOfClass(se);if(!_e)return;const be=new Map;for(let Je=1;Je<_e.classType.details.mro.length;Je++){const $e=_e.classType.details.mro[Je];(0,P.isInstantiableClass)($e)&&(0,G.getMembersForClass)($e,be,!1)}const ve=(X=B==null?void 0:B.some(Je=>this._checkDecorator(Je,"staticmethod")))!==null&&X!==void 0?X:!1,De=(Z=B==null?void 0:B.some(Je=>this._checkDecorator(Je,"classmethod")))!==null&&Z!==void 0?Z:!1,Oe=new k;return be.forEach((Je,$e)=>{let tt=(0,v.getLastTypedDeclaredForSymbol)(Je);if(tt&&tt.type===3&&J.isPatternInSymbol($.value,$e)){const Ue=this._evaluator.getTypeForDeclaration(tt);if(!Ue)return;let Ye=(0,P.isClassInstance)(Ue)&&P.ClassType.isPropertyClass(Ue);if(b.isDunderName($e)&&(Ye=!1),!(0,P.isFunction)(Ue)&&!Ye)return;if(Ye){const dt=Je.getTypedDeclarations();dt.length>0&&dt[0].type===3&&(tt=dt[0])}const it=(0,P.isFunction)(Ue)&&P.FunctionType.isStaticMethod(Ue),ht=(0,P.isFunction)(Ue)&&P.FunctionType.isClassMethod(Ue)&&$e!=="__init_subclass__";if(ve!==it||De!==ht)return;const mt=this._printMethodSignature(_e.classType,tt);let Be;if((0,p.isStubFile)(this._filePath))Be=`${mt}: ...`;else{const dt=this._printOverriddenMethodBody(_e.classType,it,Ye,tt);Be=`${mt}:
${dt}`}const qe=this._createReplaceEdits(E,$,Be);this._addSymbol($e,Je,$.value,Oe,{funcParensDisabled:!0,edits:{format:this._options.snippet?r.InsertTextFormat.Snippet:void 0,textEdit:qe}})}}),{completionMap:Oe}}_createReplaceEdits(E,$,B){const X=($==null?void 0:$.nodeType)===38?this._position.character-E.length+$.value.length:this._position.character,Z={start:{line:this._position.line,character:this._position.character-E.length},end:{line:this._position.line,character:X}};return r.TextEdit.replace(Z,B)}_printMethodSignature(E,$){const B=$.node;let X;(0,p.isStubFile)(this._filePath)?X=!0:E.details.moduleName===$.moduleName&&(X=!1);const Z=(0,p.isStubFile)(this._filePath)?3:2,se=B.parameters.map((ve,De)=>{let Oe="";ve.category===1?Oe+="*":ve.category===2&&(Oe+="**"),ve.name&&(Oe+=ve.name.value);const Je=u.getTypeAnnotationForParameter(B,De);return Je&&(Oe+=": "+u.printExpression(Je,Z)),ve.defaultValue&&(Oe+=Je?" = ":"=",Oe+=(X!=null?X:!be(ve.defaultValue))?"...":u.printExpression(ve.defaultValue,Z)),!Oe&&!ve.name&&ve.category===0?"/":Oe}).join(", ");let _e=B.name.value+"("+se+")";return B.returnTypeAnnotation?_e+=" -> "+u.printExpression(B.returnTypeAnnotation,Z):B.functionAnnotationComment&&(_e+=" -> "+u.printExpression(B.functionAnnotationComment.returnTypeAnnotation,Z)),_e;function be(ve){switch(ve.nodeType){case 40:case 11:return!0;case 49:return(ve.token.flags&64)===0;case 48:return ve.strings.every(be);case 55:return be(ve.expression);case 7:return be(ve.leftExpression)&&be(ve.rightExpression);default:return!1}}}_printOverriddenMethodBody(E,$,B,X){let Z=this._parseResults.tokenizerOutput.predominantTabSequence;if(E.details.baseClasses.length===1&&(0,P.isClass)(E.details.baseClasses[0])&&E.details.baseClasses[0].details.fullName==="builtins.object")return Z+=this._options.snippet?"${0:pass}":"pass",Z;if(X.node.parameters.length===0)return Z+=this._options.snippet?"${0:pass}":"pass",Z;const se=_e($?X.node.parameters:X.node.parameters.slice(1));if(X.node.name.value!=="__init__"&&(Z+="return "),X.node.isAsync&&(Z+="await "),B)return Z+`super().${X.node.name.value}`;return Z+`super().${X.node.name.value}(${se.map(be).join(", ")})`;function _e(ve){const De=[];let Oe=!1;for(const Je of ve)Je.name&&De.push([Je,Oe]),Oe=Je.category===1||Je.category===2;return De}function be(ve){var De;const Oe=(De=ve[0].name)===null||De===void 0?void 0:De.value;return ve[0].category===1?`*${Oe}`:ve[0].category===2?`**${Oe}`:ve[1]?`${Oe}=${Oe}`:Oe}}_getMemberAccessCompletions(E,$){const B=new Map,X=new k;let Z={},se=this._evaluator.getType(E);return se&&(se=this._evaluator.makeTopLevelTypeVarsConcrete(se),(0,G.doForEachSubtype)(se,_e=>{if(_e=this._evaluator.makeTopLevelTypeVarsConcrete(_e),(0,P.isClass)(_e)){if(P.ClassType.isBuiltIn(_e,"LiteralString")){const be=this._evaluator.getBuiltInObject(E,"str");be&&(0,P.isClassInstance)(be)&&(_e=be)}(0,G.getMembersForClass)(_e,B,P.TypeBase.isInstance(_e))}else if((0,P.isModule)(_e))(0,G.getMembersForModule)(_e,B);else if((0,P.isFunction)(_e)||(0,P.isOverloadedFunction)(_e)){const be=this._evaluator.getBuiltInType(E,"function");be&&(0,P.isInstantiableClass)(be)&&(0,G.getMembersForClass)(be,B,!0)}else if((0,P.isNoneInstance)(_e)){const be=this._evaluator.getBuiltInType(E,"object");be&&(0,P.isInstantiableClass)(be)&&(0,G.getMembersForClass)(be,B,P.TypeBase.isInstance(_e))}this._addSymbolsForSymbolTable(B,()=>!0,$,!1,(0,P.isClass)(_e)?_e:void 0,X)})),(!se||(0,P.isUnknown)(se)||(0,P.isUnbound)(se))&&(Z=this._getLastKnownModule(E,se)),{completionMap:X,memberAccessInfo:Z}}_getLastKnownModule(E,$){var B;let X=E,Z=$,se=E.nodeType===35?E==null?void 0:E.memberName.value:void 0;for(;X&&(X.nodeType===9||X.nodeType===35?(X=X.leftExpression,se===void 0&&(se=X.nodeType===35&&(B=X==null?void 0:X.memberName.value)!==null&&B!==void 0?B:"")):X=void 0,!(X&&(Z=this._evaluator.getType(X),Z!==void 0&&!(0,P.isUnknown)(Z)&&!(0,P.isUnbound)(Z)))););const _e={};if(Z&&!(0,P.isUnknown)(Z)&&!(0,P.isUnbound)(Z)&&X){const be=(0,G.getDeclaringModulesForType)(Z);_e.lastKnownModule=be.find(ve=>ve!=="typing"),X.nodeType===35?_e.lastKnownMemberName=X.memberName.value:(X.nodeType===38&&(0,P.isInstantiableClass)(Z)||X.nodeType===38&&(0,P.isClassInstance)(Z))&&(_e.lastKnownMemberName=Z.details.name),_e.unknownMemberName=se}return _e}_getStatementCompletions(E,$,B,X){return this._getExpressionCompletions(E,$,B,X)}_getExpressionCompletions(E,$,B,X){var Z,se,_e,be;const ve=this._isIndexArgument(E);if(!ve&&E.nodeType===40||((Z=E.parent)===null||Z===void 0?void 0:Z.nodeType)===59&&E.parent===((se=E.parent.target)===null||se===void 0?void 0:se.parent))return;const De=new k,Oe={completionMap:De};if(B.slice(-2)==="..")return Oe;if(this._addCallArgumentCompletions(E,$,B,X,!1,De),this._addSymbols(E,$,De),this._findMatchingKeywords(le.forVersion(this._execEnv.pythonVersion),$).map(Je=>{if(De.has(Je))return;const $e=r.CompletionItem.create(Je);$e.kind=r.CompletionItemKind.Keyword,$e.sortText=this._makeSortText(R.Keyword,Je),De.set($e)}),!$.startsWith("_")&&!this._itemToResolve&&this._addAutoImportCompletions($,ae,this._options.lazyEdit,Oe),E.nodeType===0){if(E.category===3&&((_e=E.parent)===null||_e===void 0?void 0:_e.nodeType)===24)this._tryAddTypedDictStringLiteral(E.parent,void 0,void 0,De);else if(E.category===2&&E.parent&&E.parent.nodeType===3){const Je=(be=this._evaluator.getExpectedType(E))===null||be===void 0?void 0:be.type;Je&&this._addLiteralValuesForTargetType(Je,B,$,X,De)}}if(ve){const Je=E.parent.parent;this._getIndexerKeys(Je,E).forEach($e=>{De.has($e)||this._addNameToCompletions($e,r.CompletionItemKind.Constant,$,De,{sortText:this._makeSortText(R.LiteralValue,$e),itemDetail:t.dictionaryKeyDetail})})}return Oe}_isIndexArgument(E){const $=E.parent;return $&&$.nodeType===1&&$.argumentCategory===0&&$.parent&&$.parent.nodeType===24&&$.parent.baseExpression&&$.parent.baseExpression.nodeType===38}_addCallArgumentCompletions(E,$,B,X,Z,se){const _e=(0,T.convertPositionToOffset)(this._position,this._parseResults.tokenizerOutput.lines),be=(0,f.getCallNodeAndActiveParameterIndex)(E,_e,this._parseResults.tokenizerOutput.tokens);if(!be)return;const ve=this._evaluator.getCallSignatureInfo(be.callNode,be.activeIndex,be.activeOrFake);if(ve){const De=(0,T.convertOffsetToPosition)(ve.callNode.leftExpression.start+ve.callNode.leftExpression.length,this._parseResults.tokenizerOutput.lines);(0,L.comparePositions)(this._position,De)>0&&(Z||this._addNamedParameters(ve,$,se),this._addLiteralValuesForArgument(ve,B,$,X,se))}}_addLiteralValuesForArgument(E,$,B,X,Z){E.signatures.forEach(se=>{if(!se.activeParam)return;const _e=se.type,be=_e.details.parameters.indexOf(se.activeParam);if(be<0)return;const ve=_e.details.parameters[be].type;this._addLiteralValuesForTargetType(ve,$,B,X,Z)})}_addLiteralValuesForTargetType(E,$,B,X,Z){const se=this._getQuoteInfo($);this._getSubTypesWithLiteralValues(E).forEach(_e=>{if(P.ClassType.isBuiltIn(_e,"str")){const be=(0,F.printLiteralValue)(_e,se.quoteCharacter);se.stringValue===void 0?this._addNameToCompletions(be,r.CompletionItemKind.Constant,B,Z,{sortText:this._makeSortText(R.LiteralValue,_e.literalValue)}):this._addStringLiteralToCompletions(be.substr(1,be.length-2),se.stringValue,X,se.quoteCharacter,Z)}})}_getDictExpressionStringKeys(E,$){const B=X(E);if(!B)return[];return B.entries.flatMap(Z=>Z.nodeType!==17||($==null?void 0:$.has(Z.keyExpression.id))?[]:Z.keyExpression.nodeType===48?[Z.keyExpression.strings.map(se=>se.value).join("")]:[]);function X(Z){if(Z.nodeType===15)return Z;let se=Z;for(;se&&se.nodeType!==15&&se.nodeType!==45;)if(se=se.parent,!se)return;return se}}_getSubTypesWithLiteralValues(E){const $=[];return(0,G.doForEachSubtype)(E,B=>{(0,P.isClassInstance)(B)&&(0,G.isLiteralType)(B)&&$.push(B)}),$}_getIndexerKeyType(E){var $;if((P.ClassType.isBuiltIn(E,"dict")||P.ClassType.isBuiltIn(E,"Mapping"))&&(($=E.typeArguments)===null||$===void 0?void 0:$.length)===2)return E.typeArguments[0];const B=(0,G.lookUpObjectMember)(E,"__getitem__");if(B!=null&&B.symbol.hasDeclarations()){const X=B.symbol.getDeclarations()[0];if((0,s.isFunctionDeclaration)(X)&&X.isMethod){const Z=this._evaluator.getTypeForDeclaration(X);if(Z&&(0,P.isFunction)(Z)&&Z.details.parameters.length===2)return Z.details.parameters[1].type}}}_getIndexerKeys(E,$){var B,X,Z,se,_e,be,ve,De,Oe;if(E.baseExpression.nodeType!==38)return[];const Je=this._evaluator.getType(E.baseExpression);if(!Je||!(0,P.isClassInstance)(Je))return[];const $e=this._getIndexerKeyType(Je);if($e){const mt=[];if(this._getSubTypesWithLiteralValues($e).forEach(Be=>{!P.ClassType.isBuiltIn(Be,"str")&&!P.ClassType.isBuiltIn(Be,"int")&&!P.ClassType.isBuiltIn(Be,"bool")&&!P.ClassType.isBuiltIn(Be,"bytes")&&!P.ClassType.isEnumClass(Be)||mt.push((0,F.printLiteralValue)(Be,this._parseResults.tokenizerOutput.predominantSingleQuoteCharacter))}),mt.length>0)return mt}const tt=(B=this._evaluator.getDeclarationsForNameNode(E.baseExpression))!==null&&B!==void 0?B:[],Ue=tt.length>0?tt[0]:void 0;if(!Ue||Ue.type!==1&&Ue.type!==2)return[];if(Ue.path!==this._filePath)return[];let Ye=E.baseExpression;if(Ue.node){const mt=u.getEvaluationScopeNode(Ue.node);((X=u.getFileInfoFromNode(Ye))===null||X===void 0?void 0:X.filePath)===((Z=u.getFileInfoFromNode(mt))===null||Z===void 0?void 0:Z.filePath)&&(Ye=mt)}const it=ee.DocumentSymbolCollector.collectFromNode(E.baseExpression,this._evaluator,this._cancellationToken,Ye),ht=new Set;for(const mt of it){const Be=((se=mt.node.parent)===null||se===void 0?void 0:se.nodeType)===54?mt.node.parent:mt.node;if(((_e=Be.parent)===null||_e===void 0?void 0:_e.nodeType)===3||((be=Be.parent)===null||be===void 0?void 0:be.nodeType)===4){if(Be.parent.rightExpression.nodeType===15){const qe=Be.parent.rightExpression;for(const dt of qe.entries.filter(Xt=>Xt.nodeType===17)){const Xt=this._parseResults.text.substr(dt.keyExpression.start,dt.keyExpression.length).trim();Xt.length>0&&ht.add(Xt)}}if(Be.parent.rightExpression.nodeType===9){const qe=Be.parent.rightExpression,dt=this._evaluator.getType(qe.leftExpression);if(!dt||!(0,P.isInstantiableClass)(dt)||!P.ClassType.isBuiltIn(dt,"dict"))continue;for(const Xt of qe.arguments){const En=(De=(ve=Xt.name)===null||ve===void 0?void 0:ve.value.trim())!==null&&De!==void 0?De:"",Ti=this._parseResults.tokenizerOutput.predominantSingleQuoteCharacter;En.length>0&&ht.add(`${Ti}${En}${Ti}`)}}}if(((Oe=Be.parent)===null||Oe===void 0?void 0:Oe.nodeType)===24&&Be.parent.items.length===1&&Be.parent.items[0].valueExpression.nodeType!==0&&!ce.TextRange.containsRange(Be.parent,$)){const qe=Be.parent.items[0],dt=this._parseResults.text.substr(qe.valueExpression.start,qe.valueExpression.length).trim();dt.length>0&&ht.add(dt)}}return[...ht]}_getLiteralCompletions(E,$,B,X){var Z,se,_e;let be=E.parent;if(!be)return;const ve=new k;if((0,W.isExpressionNode)(be)){const De=this._evaluator.getExpectedType(be);if(De&&(0,G.isLiteralTypeOrUnion)(De.type))return this._addLiteralValuesForTargetType(De.type,B,$,X,ve),{completionMap:ve};if(E.nodeType===49&&((Z=E.parent)===null||Z===void 0?void 0:Z.parent)){const Oe=E.parent.parent;let Je;if(Oe.nodeType===17&&Oe.keyExpression===E.parent&&((se=Oe.parent)===null||se===void 0?void 0:se.nodeType)===15?Je=Oe.parent:(Oe==null?void 0:Oe.nodeType)===45&&(Je=Oe),Je&&this._addTypedDictKeys(Je,E,B,X,ve))return{completionMap:ve}}}if(!(be.nodeType!==1&&(be.nodeType!==48||be.strings.length>1||(be=be.parent,!be)))){if(be.nodeType===1&&((_e=be.parent)===null||_e===void 0?void 0:_e.nodeType)===24){const De=E.nodeType===49?B:"";if(!this._tryAddTypedDictStringLiteral(be.parent,De,X,ve)){const Oe=this._getIndexerKeys(be.parent,E),Je=this._getQuoteInfo(De);for(const $e of Oe){const tt=/^["|'].*["|']$/.test($e);if(!(E.nodeType===49&&!tt))if(tt){const Ue=$e.substr(1,$e.length-2);this._addStringLiteralToCompletions(Ue,Je.stringValue,X,Je.quoteCharacter,ve,t.dictionaryKeyDetail)}else this._addNameToCompletions($e,r.CompletionItemKind.Constant,$,ve,{sortText:this._makeSortText(R.LiteralValue,$e),itemDetail:t.dictionaryKeyDetail})}if(ve.size===0)return}}else{U.assert(E.nodeType===49);const De=(0,T.convertPositionToOffset)(this._position,this._parseResults.tokenizerOutput.lines),Oe=be.start<De&&De<ce.TextRange.getEnd(E);this._addCallArgumentCompletions(E,$,B,X,Oe,ve)}return{completionMap:ve}}}_addTypedDictKeys(E,$,B,X,Z){var se;const _e=this._evaluator.getExpectedType(E);if(!_e||u.getNodeDepth(_e.node)<u.getNodeDepth(E))return!1;let be=[];if((0,G.doForEachSubtype)(_e.type,Je=>{(0,P.isClassInstance)(Je)&&P.ClassType.isTypedDictClass(Je)&&be.push(Je)}),be.length===0)return!1;const ve=this._getDictExpressionStringKeys(E,$?new Set([(se=$.parent)===null||se===void 0?void 0:se.id]):void 0);be=this._tryNarrowTypedDicts(be,ve);const De=this._getQuoteInfo(B),Oe=new Set(ve);return be.forEach(Je=>{(0,m.getTypedDictMembersForClass)(this._evaluator,Je,!0).forEach(($e,tt)=>{Oe.has(tt)||Z.has(tt)||(Oe.add(tt),this._addStringLiteralToCompletions(tt,De?De.stringValue:void 0,X,De?De.quoteCharacter:this._parseResults.tokenizerOutput.predominantSingleQuoteCharacter,Z))})}),!0}_tryNarrowTypedDicts(E,$){const B=E.flatMap(X=>{const Z=(0,m.getTypedDictMembersForClass)(this._evaluator,X,!0);for(let se=0;se<$.length;se++)if(!Z.has($[se]))return[];return[X]});return B.length===0?E:B}_getQuoteInfo(E){let $,B=this._parseResults.tokenizerOutput.predominantSingleQuoteCharacter;if(!this._insideStringLiteral)return{stringValue:$,quoteCharacter:B};const X="'",Z='"';if(E!==void 0){const se=E.lastIndexOf(X),_e=E.lastIndexOf(Z);se>_e?($=E.substr(se+1),B=X):_e>se&&($=E.substr(_e+1),B=Z)}return this._insideStringLiteral.flags&64&&(B=this._insideStringLiteral.flags&1?Z:X),{stringValue:$,quoteCharacter:B}}_tryAddTypedDictStringLiteral(E,$,B,X){if(!E)return!1;const Z=this._evaluator.getType(E.baseExpression);if(!Z)return!1;let se=!1;return(0,G.doForEachSubtype)(Z,_e=>{if(!(0,P.isClassInstance)(_e)||!P.ClassType.isTypedDictClass(_e))return;const be=(0,m.getTypedDictMembersForClass)(this._evaluator,_e,!0),ve=this._getQuoteInfo($);be.forEach((De,Oe)=>{this._addStringLiteralToCompletions(Oe,ve.stringValue,B,ve.quoteCharacter,X)}),se=!0}),se}_addStringLiteralToCompletions(E,$,B,X,Z,se){if(J.isPatternInSymbol($||"",E)){const _e=`${X}${E}${X}`;if(Z.has(_e))return;const be=r.CompletionItem.create(_e);be.kind=r.CompletionItemKind.Constant,be.sortText=this._makeSortText(R.LiteralValue,_e);let ve=this._position.character;$!==void 0&&(ve-=$.length+1);let De=this._position.character;B!==void 0&&B.startsWith(X)&&De++;const Oe={start:{line:this._position.line,character:ve},end:{line:this._position.line,character:De}};be.textEdit=r.TextEdit.replace(Oe,_e),be.detail=se,Z.set(be)}}_addAutoImportCompletions(E,$,B,X){var Z,se,_e;if(!X.completionMap||!this._configOptions.autoImportCompletions||!this._options.autoImport)return;const be=this._autoImportMaps.getModuleSymbolsMap(),ve=new Y.AutoImporter(this._execEnv,this._importResolver,this._parseResults,this._position,X.completionMap,be,{libraryMap:this._autoImportMaps.libraryMap,lazyEdit:B}),De=[],Oe=(Z=this._autoImportMaps.nameMap)===null||Z===void 0?void 0:Z.get(E);Oe&&E.length>1&&!X.completionMap.has(E)&&(0,q.appendArray)(De,ve.getAutoImportCandidatesForAbbr(E,Oe,this._cancellationToken)),De.push(...ve.getAutoImportCandidates(E,$,void 0,this._cancellationToken));const Je=ve.getPerfInfo(),$e=new ue.Duration;for(const tt of De)tt.symbol?this._addSymbol(tt.name,tt.symbol,E,X.completionMap,{autoImportSource:tt.source,autoImportAlias:tt.alias,edits:{textEdit:this._createReplaceEdits(E,void 0,tt.insertionText),additionalTextEdits:tt.edits}}):this._addNameToCompletions((se=tt.alias)!==null&&se!==void 0?se:tt.name,(_e=tt.kind)!==null&&_e!==void 0?_e:r.CompletionItemKind.Module,E,X.completionMap,{autoImportText:this._getAutoImportText(tt.name,tt.source,tt.alias),edits:{textEdit:this._createReplaceEdits(E,void 0,tt.insertionText),additionalTextEdits:tt.edits}});X.autoImportInfo={indexUsed:Je.indexUsed,totalTimeInMS:Je.totalInMs,moduleTimeInMS:Je.moduleTimeInMS,indexTimeInMS:Je.indexTimeInMS,importAliasTimeInMS:Je.importAliasTimeInMS,itemCount:De.length,symbolCount:Je.symbolCount,indexCount:Je.indexCount,importAliasCount:Je.importAliasCount,additionTimeInMS:$e.getDurationInMilliseconds()}}_getImportFromCompletions(E,$){if(E.isWildcardImport)return;const B=a.getImportInfo(E.module);if(!B)return;const X=new k,Z=B.resolvedPaths.length>0?B.resolvedPaths[B.resolvedPaths.length-1]:"",se=this._importLookup(Z);return se&&this._addSymbolsForSymbolTable(se.symbolTable,(_e,be)=>_e.getDeclarations().some(ve=>!(0,s.isIntrinsicDeclaration)(ve))&&!E.imports.find(ve=>ve.name.value===be),$,!0,void 0,X),B.implicitImports.forEach(_e=>{E.imports.find(be=>be.name.value===_e.name)||this._addNameToCompletions(_e.name,r.CompletionItemKind.Module,$,X)}),{completionMap:X}}_findMatchingKeywords(E,$){return E.filter(B=>$?J.isPatternInSymbol($,B):!0)}_addNamedParameters(E,$,B){const X=new Map;E.signatures.forEach(Z=>{this._addNamedParametersToMap(Z.type,X)}),E.callNode.arguments.forEach(Z=>{Z.name&&X.delete(Z.name.value)}),X.forEach(Z=>{if(J.isPatternInSymbol($,Z)){const se=Z+"=";if(B.has(se))return;const _e=r.CompletionItem.create(se);_e.kind=r.CompletionItemKind.Variable;const be={workspacePath:this._workspacePath,filePath:this._filePath,position:this._position};_e.data=(0,M.toLSPAny)(be),_e.sortText=this._makeSortText(R.NamedParameter,Z),_e.filterText=Z,B.set(_e)}})}_addNamedParametersToMap(E,$){E.details.parameters.forEach(B=>{B.name&&!B.isNameSynthesized&&(b.isPrivateOrProtectedName(B.name)||$.set(B.name,B.name))})}_addSymbols(E,$,B){let X=E;for(;X;){let Z=(0,y.getScopeForNode)(X);if(Z){for(;Z;)this._addSymbolsForSymbolTable(Z.symbolTable,()=>!0,$,!1,void 0,B),Z=Z.parent;if(X.nodeType===10){const se=this._evaluator.getTypeOfClass(X);se&&(0,P.isInstantiableClass)(se.classType)&&se.classType.details.mro.forEach((_e,be)=>{(0,P.isInstantiableClass)(_e)&&this._addSymbolsForSymbolTable(_e.details.fields,ve=>ve.isClassMember()?ve.getDeclarations().some(De=>De.type===1):!1,$,!1,void 0,B)})}break}X=X.parent}}_addSymbolsForSymbolTable(E,$,B,X,Z,se){E.forEach((_e,be)=>{!(_e.isExternallyHidden()&&!_e.getDeclarations().some(De=>(0,l.isDefinedInFile)(De,this._filePath)))&&$(_e,be)&&(se.has(be)||this._addSymbol(be,_e,B,se,{boundObjectOrClass:Z,funcParensDisabled:X}))})}_addSymbol(E,$,B,X,Z){var se,_e,be;if($.isPrivatePyTypedImport())return;let ve=(0,v.getLastTypedDeclaredForSymbol)($);if(!ve){const De=$.getDeclarations();De.length>0&&(ve=De[De.length-1])}if(ve){let De=r.CompletionItemKind.Variable;if(ve=this._evaluator.resolveAliasDeclaration(ve,!0),ve&&(De=this._convertDeclarationTypeToItemKind(ve),ve.type===1&&Z.boundObjectOrClass&&(0,P.isInstantiableClass)(Z.boundObjectOrClass)&&P.ClassType.isEnumClass(Z.boundObjectOrClass)&&((se=ve.node.parent)===null||se===void 0?void 0:se.nodeType)===3&&(De=r.CompletionItemKind.EnumMember),this._itemToResolve)){const Je=(0,M.fromLSPAny)(this._itemToResolve.data);if(Je.symbolLabel===E&&!Je.autoImportText){const $e=this._evaluator.getEffectiveTypeOfSymbol($);if($e){let tt,Ue;switch(ve.type){case 0:case 1:case 2:{let Ye=!1;if($e&&P.TypeBase.isInstantiable($e)){const it=(0,P.getTypeAliasInfo)($e);it&&it.name===E&&(Ye=!0)}tt=E+": "+this._evaluator.printType($e,Ye);break}case 3:{const Ye=Z.boundObjectOrClass&&((0,P.isFunction)($e)||(0,P.isOverloadedFunction)($e))?this._evaluator.bindFunctionToClassOrObject(Z.boundObjectOrClass,$e):$e;if(Ye)if((0,G.isProperty)(Ye)&&Z.boundObjectOrClass&&(0,P.isClassInstance)(Z.boundObjectOrClass)){const it=this._evaluator.getGetterTypeFromProperty(Ye,!0)||P.UnknownType.create();tt=E+": "+this._evaluator.printType(it,!1)+" (property)"}else(0,P.isOverloadedFunction)(Ye)?tt=(0,H.getOverloadedFunctionTooltip)(Ye,this._evaluator,35):tt=E+": "+this._evaluator.printType(Ye,!1);break}case 4:case 5:{tt="class "+E+"()";break}case 6:{if(tt=E,ve.path){const Ye=this._importLookup(ve.path);Ye&&(Ue=Ye.docString)}break}default:{tt=E;break}}if(ve.type===1&&ve.typeAliasName&&ve.docString)Ue=ve.docString;else if((0,P.isModule)($e))Ue=(0,V.getModuleDocString)($e,ve,this._sourceMapper);else if((0,P.isInstantiableClass)($e))Ue=(0,V.getClassDocString)($e,ve,this._sourceMapper);else if((0,P.isFunction)($e)){const Ye=Z.boundObjectOrClass?this._evaluator.bindFunctionToClassOrObject(Z.boundObjectOrClass,$e):$e;Ye&&(0,P.isFunction)(Ye)&&(Ue=(0,H.getFunctionDocStringFromType)(Ye,this._sourceMapper,this._evaluator))}else if((0,P.isOverloadedFunction)($e)){const Ye=Z.boundObjectOrClass?this._evaluator.bindFunctionToClassOrObject(Z.boundObjectOrClass,$e):$e;Ye&&(0,P.isOverloadedFunction)(Ye)&&(Ue=(0,H.getOverloadedFunctionDocStringsFromType)(Ye,this._sourceMapper,this._evaluator).find(it=>it))}else if((ve==null?void 0:ve.type)===3)Ue=(0,V.getPropertyDocStringInherited)(ve,this._sourceMapper,this._evaluator);else if((ve==null?void 0:ve.type)===1){const Ye=(_e=$.getDeclarations().find(it=>it.type===1&&!!it.docString))!==null&&_e!==void 0?_e:ve;Ue=(0,V.getVariableDocString)(Ye,this._sourceMapper)}if(this._options.format===r.MarkupKind.Markdown){let Ye="```python\n"+tt+"\n```\n";Ue&&(Ye+=`---
`,Ye+=(0,o.convertDocStringToMarkdown)(Ue)),Ye=Ye.trimEnd(),this._itemToResolve.documentation={kind:r.MarkupKind.Markdown,value:Ye}}else if(this._options.format===r.MarkupKind.PlainText){let Ye=tt+`
`;Ue&&(Ye+=`
`,Ye+=(0,o.convertDocStringToPlainText)(Ue)),Ye=Ye.trimEnd(),this._itemToResolve.documentation={kind:r.MarkupKind.PlainText,value:Ye}}else(0,D.fail)(`Unsupported markup type: ${this._options.format}`)}}}const Oe=Z.autoImportSource?this._getAutoImportText(E,Z.autoImportSource,Z.autoImportAlias):void 0;this._addNameToCompletions((be=Z.autoImportAlias)!==null&&be!==void 0?be:E,De,B,X,{autoImportText:Oe,funcParensDisabled:Z.funcParensDisabled,edits:Z.edits})}else if($.getSynthesizedType()){const Oe=r.CompletionItemKind.Variable;this._addNameToCompletions(E,Oe,B,X,{funcParensDisabled:Z.funcParensDisabled,edits:Z.edits})}}_getAutoImportText(E,$,B){const X=(0,H.getAutoImportText)(E,$,B);let Z="";return this._options.format===r.MarkupKind.Markdown?Z=`\`\`\`
${X}
\`\`\``:this._options.format===r.MarkupKind.PlainText?Z=X:(0,D.fail)(`Unsupported markup type: ${this._options.format}`),{source:$!=null?$:"",importText:Z}}_addNameToCompletions(E,$,B,X,Z){var se,_e,be,ve;if(!(Z!=null&&Z.autoImportText?!0:J.isPatternInSymbol(B,E))||X.has(E,k.matchKindAndImportText,$,(se=Z==null?void 0:Z.autoImportText)===null||se===void 0?void 0:se.importText))return;const Oe=r.CompletionItem.create(E);Oe.kind=$;const Je={workspacePath:this._workspacePath,filePath:this._filePath,position:this._position};if(Z!=null&&Z.funcParensDisabled&&(Je.funcParensDisabled=!0),Oe.data=(0,M.toLSPAny)(Je),(Z==null?void 0:Z.sortText)||(Z==null?void 0:Z.itemDetail)?(Oe.sortText=Z.sortText,Oe.detail=Z.itemDetail):Z!=null&&Z.autoImportText?(Oe.sortText=this._makeSortText(R.AutoImport,E,Z.autoImportText.importText),Je.autoImportText=Z.autoImportText.importText,Oe.detail=t.autoImportDetail,Z.autoImportText.source&&(Oe.labelDetails={description:Z.autoImportText.source})):$===r.CompletionItemKind.EnumMember?Oe.sortText=this._makeSortText(R.EnumMember,E):b.isDunderName(E)?Oe.sortText=this._makeSortText(R.DunderSymbol,E):B===""&&b.isPrivateOrProtectedName(E)?Oe.sortText=this._makeSortText(R.PrivateSymbol,E):Oe.sortText=this._makeSortText(R.NormalSymbol,E),Je.symbolLabel=E,this._options.format===r.MarkupKind.Markdown){let $e="";Z!=null&&Z.autoImportText&&($e+=Z.autoImportText.importText,(Z.typeDetail||Z.documentation)&&($e+=`

`)),Z!=null&&Z.typeDetail&&($e+="```python\n"+Z.typeDetail+"\n```\n"),Z!=null&&Z.documentation&&($e+=`---
`,$e+=(0,o.convertDocStringToMarkdown)(Z.documentation)),$e=$e.trimEnd(),$e&&(Oe.documentation={kind:r.MarkupKind.Markdown,value:$e})}else if(this._options.format===r.MarkupKind.PlainText){let $e="";Z!=null&&Z.autoImportText&&($e+=Z.autoImportText.importText,(Z.typeDetail||Z.documentation)&&($e+=`

`)),Z!=null&&Z.typeDetail&&($e+=Z.typeDetail+`
`),Z!=null&&Z.documentation&&($e+=`
`+(0,o.convertDocStringToPlainText)(Z.documentation)),$e=$e.trimEnd(),$e&&(Oe.documentation={kind:r.MarkupKind.PlainText,value:$e})}else(0,D.fail)(`Unsupported markup type: ${this._options.format}`);!((_e=Z==null?void 0:Z.edits)===null||_e===void 0)&&_e.format&&(Oe.insertTextFormat=Z.edits.format),!((be=Z==null?void 0:Z.edits)===null||be===void 0)&&be.textEdit&&(Oe.textEdit=Z.edits.textEdit),!((ve=Z==null?void 0:Z.edits)===null||ve===void 0)&&ve.additionalTextEdits&&(Oe.additionalTextEdits=Z.edits.additionalTextEdits.map($e=>({range:{start:{line:$e.range.start.line,character:$e.range.start.character},end:{line:$e.range.end.line,character:$e.range.end.character}},newText:$e.replacementText})),this._itemToResolve&&(0,M.fromLSPAny)(this._itemToResolve.data).autoImportText===Je.autoImportText&&(this._itemToResolve.additionalTextEdits=Oe.additionalTextEdits)),X.set(Oe)}_getRecentListIndex(E,$){return d._mostRecentCompletions.findIndex(B=>B.label===E&&B.autoImportText===$)}_makeSortText(E,$,B=""){const X=this._getRecentListIndex($,B);return X>=0&&(E===R.AutoImport?E=R.RecentAutoImport:E===R.ImportModuleName?E=R.RecentImportModuleName:(E===R.Keyword||E===R.NormalSymbol||E===R.PrivateSymbol||E===R.DunderSymbol)&&(E=R.RecentKeywordOrSymbol)),this._formatInteger(E,2)+"."+this._formatInteger(X,4)+"."+$}_formatInteger(E,$){const B="0".charCodeAt(0);let X="";for(let Z=0;Z<$;Z++){let se=Math.floor(E%10);se<0&&(se=9),X=String.fromCharCode(se+B)+X,E=Math.floor(E/10)}return X}_convertDeclarationTypeToItemKind(E){const $=this._evaluator.resolveAliasDeclaration(E,!0);if(!$)return r.CompletionItemKind.Variable;switch($.type){case 0:return $.intrinsicType==="class"?r.CompletionItemKind.Class:r.CompletionItemKind.Variable;case 2:return r.CompletionItemKind.Variable;case 1:return $.isConstant||$.isFinal?r.CompletionItemKind.Constant:r.CompletionItemKind.Variable;case 3:{if(this._isPossiblePropertyDeclaration($)){const B=this._evaluator.getTypeOfFunction($.node);if(B&&(0,G.isProperty)(B.decoratedType))return r.CompletionItemKind.Property}return $.isMethod?r.CompletionItemKind.Method:r.CompletionItemKind.Function}case 4:case 5:return r.CompletionItemKind.Class;case 6:return r.CompletionItemKind.Module}}_getImportModuleCompletions(E){const $={leadingDots:E.leadingDots,hasTrailingDot:E.hasTrailingDot||!1,nameParts:E.nameParts.map(Z=>Z.value),importedSymbols:[]},B=this._importResolver.getCompletionSuggestions(this._filePath,this._execEnv,$),X=new k;if(!E.hasTrailingDot&&E.parent&&E.parent.nodeType===22&&E.parent.missingImportKeyword){const Z="import",se=r.CompletionItem.create(Z);se.kind=r.CompletionItemKind.Keyword,se.sortText=this._makeSortText(R.Keyword,Z),X.set(se)}return B.forEach(Z=>{if(X.has(Z))return;const se=r.CompletionItem.create(Z);se.kind=r.CompletionItemKind.Module,se.sortText=this._makeSortText(R.ImportModuleName,Z),X.set(se)}),{completionMap:X}}_isPossiblePropertyDeclaration(E){return E.isMethod&&E.node.decorators.length>0}}t.CompletionProvider=d,d._mostRecentCompletions=[];class k{constructor(){this._completions=new Map}get size(){return this._completions.size}set(E){const $=this._completions.get(E.label);$?Array.isArray($)?$.push(E):this._completions.set(E.label,[$,E]):this._completions.set(E.label,E)}get(E){return this._completions.get(E)}has(E,$,B,X){const Z=this._completions.get(E);return Z?$?$(Z,B,X):!0:!1}clear(){this._completions.clear()}delete(E){return this._completions.delete(E)}toArray(){var E;const $=[];return(E=this._completions)===null||E===void 0||E.forEach(B=>{Array.isArray(B)?B.forEach(X=>{$.push(X)}):$.push(B)}),$}static matchKindAndImportText(E,$,B){var X;return Array.isArray(E)?!!E.find(Z=>{var se;return Z.kind===$&&((se=oe(Z))===null||se===void 0?void 0:se.autoImportText)===B}):E.kind===$&&((X=oe(E))===null||X===void 0?void 0:X.autoImportText)===B}static labelOnlyIgnoringAutoImports(E){var $;if(Array.isArray(E)){if(E.find(B=>{var X;return!(!((X=oe(B))===null||X===void 0)&&X.autoImportText)}))return!0}else if(!(!(($=oe(E))===null||$===void 0)&&$.autoImportText))return!0;return!1}}t.CompletionMap=k;function oe(ye){return(0,M.fromLSPAny)(ye.data)}})(Jh);var W7=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),$7=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Bk=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&W7(e,t,n);return $7(e,t),e};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.convertSymbolKindToCompletionItemKind=Ws.AutoImporter=Ws.buildModuleSymbolsMap=void 0;const $t=Cs,kl=vn,Wk=Bk(Dn),ST=In,j7=Dt,Uo=Hn,Df=Bk(bn),q7=ji,G7=Jh;function K7(t,e,n){const i=new Map;return(0,ST.throwIfCancellationRequested)(n),t.forEach(r=>{if(r.shadows.length>0)return;const a=r.sourceFile.getFilePath(),s=r.sourceFile.getModuleSymbolTable();if(s){const o=(0,Uo.stripFileExtension)((0,Uo.getFileName)(a));if(Wk.isPrivateOrProtectedName(o))return;i.set(a,{forEach(u){s.forEach((f,y)=>{if(f.isExternallyHidden())return;const p=f.getDeclarations();if(!p||p.length===0)return;const b=p[0];if(!b||b.type===6)return;const v=b.type===1&&!b.isConstant&&!b.isFinal?$t.SymbolKind.Variable:void 0;u({symbol:f,kind:v},y,!1)})}});return}const l=r.sourceFile.getCachedIndexResults();if(l&&e&&!l.privateOrProtected){i.set(a,$k(l,!1));return}}),i}Ws.buildModuleSymbolsMap=K7;class H7{constructor(e,n,i,r,a,s,l){this._execEnvironment=e,this._importResolver=n,this._parseResults=i,this._invocationPosition=r,this._excludes=a,this._moduleSymbolMap=s,this._options=l,this._stopWatch=new q7.Duration,this._perfInfo={indexUsed:!1,totalInMs:0,moduleTimeInMS:0,indexTimeInMS:0,importAliasTimeInMS:0,symbolCount:0,indexCount:0,importAliasCount:0},this._importStatements=(0,kl.getTopLevelImports)(this._parseResults.parseTree,!0),this._perfInfo.indexUsed=!!this._options.libraryMap}getAutoImportCandidatesForAbbr(e,n,i){const a=this._getCandidates(n.importName,1,e,i).get(n.importName);return a?a.filter(s=>s.source===n.importFrom):[]}getAutoImportCandidates(e,n,i,r){const a=[];return this._getCandidates(e,n,i,r).forEach(l=>(0,j7.appendArray)(a,l)),a}getPerfInfo(){return this._perfInfo.totalInMs=this._stopWatch.getDurationInMilliseconds(),this._perfInfo}_getCandidates(e,n,i,r){const a=new Map,s=new Map;return this._addImportsFromModuleMap(e,n,i,s,a,r),this._addImportsFromLibraryMap(e,n,i,s,a,r),this._addImportsFromImportAliasMap(s,i,a,r),a}_addImportsFromLibraryMap(e,n,i,r,a,s){var l;const o=this._stopWatch.getDurationInMilliseconds();(l=this._options.libraryMap)===null||l===void 0||l.forEach((u,f)=>{if(u.privateOrProtected||this._moduleSymbolMap.has(f))return;const y=this._isStubFileOrHasInit(this._options.libraryMap,f);this._processModuleSymbolTable($k(u,!0),f,e,n,y,i,r,a,s)}),this._perfInfo.indexTimeInMS=this._stopWatch.getDurationInMilliseconds()-o}_addImportsFromModuleMap(e,n,i,r,a,s){const l=this._stopWatch.getDurationInMilliseconds();this._moduleSymbolMap.forEach((o,u)=>{const f=this._isStubFileOrHasInit(this._moduleSymbolMap,u);this._processModuleSymbolTable(o,u,e,n,f,i,r,a,s)}),this._perfInfo.moduleTimeInMS=this._stopWatch.getDurationInMilliseconds()-l}_isStubFileOrHasInit(e,n){const i=(0,Uo.getDirectoryPath)(n),r=(0,Uo.combinePaths)(i,"__init__.py"),a=r+"i",s=n.endsWith(".pyi"),l=e.has(r)||e.has(a);return{isStub:s,hasInit:l}}_processModuleSymbolTable(e,n,i,r,a,s,l,o,u){(0,ST.throwIfCancellationRequested)(u);const[f,y,p]=this._getImportPartsForSymbols(n);if(!f)return;const b=Df.getCharacterCount(f,".");if(e.forEach((F,P,G)=>{var te;if(this._perfIndexCount(F,G),!this._shouldIncludeVariable(F,P,a.isStub,G)||!this._isSimilar(i,P,r)||this._containsName(P,f,o))return;if(F.importAlias){this._addToImportAliasMap(F.importAlias,{importParts:{symbolName:P,importName:P,importFrom:f,filePath:n,dotCount:b,moduleNameAndType:p},importGroup:y,symbol:F.symbol,kind:F.importAlias.kind,itemKind:F.importAlias.itemKind},l);return}const D=this._getTextEditsForAutoImportByFilePath(f,P,s,P,y,n);this._addResult(o,{name:P,alias:s,symbol:F.symbol,source:f,kind:(te=F.itemKind)!==null&&te!==void 0?te:IT(F.kind),insertionText:D.insertionText,edits:D.edits})}),!a.isStub&&!a.hasInit)return;const v=this._getImportParts(n);!v||!this._isSimilar(i,v.importName,r)||this._containsName(v.importName,v.importFrom,o)||this._addToImportAliasMap({modulePath:n,originalName:v.importName,kind:$t.SymbolKind.Module,itemKind:$t.CompletionItemKind.Module},{importParts:v,importGroup:y,kind:$t.SymbolKind.Module,itemKind:$t.CompletionItemKind.Module},l)}_shouldIncludeVariable(e,n,i,r){var a;return i||e.kind!==$t.SymbolKind.Variable||this._options.allowVariableInAll&&!r&&((a=e.symbol)===null||a===void 0?void 0:a.isInDunderAll())?!0:Wk.isPublicConstantOrTypeAlias(n)}_addImportsFromImportAliasMap(e,n,i,r){(0,ST.throwIfCancellationRequested)(r);const a=this._stopWatch.getDurationInMilliseconds();e.forEach(s=>{this._perfInfo.importAliasCount+=s.size,s.forEach(l=>{var o,u;if(n){if(this._importStatements.mapByFilePath.has(l.importParts.filePath))return;if(l.importParts.importFrom){const p=this._importStatements.orderedImports.find(b=>b.moduleName===l.importParts.importFrom);if(p&&p.node.nodeType===22&&p.node.imports.some(b=>b.name.value===l.importParts.symbolName))return}}if(this._containsName(l.importParts.importName,l.importParts.importFrom,i))return;const y=this._getTextEditsForAutoImportByFilePath((o=l.importParts.importFrom)!==null&&o!==void 0?o:l.importParts.importName,l.importParts.symbolName,n,l.importParts.importName,l.importGroup,l.importParts.filePath);this._addResult(i,{name:l.importParts.importName,alias:n,symbol:l.symbol,kind:(u=l.itemKind)!==null&&u!==void 0?u:IT(l.kind),source:l.importParts.importFrom,insertionText:y.insertionText,edits:y.edits})})}),this._perfInfo.importAliasTimeInMS=this._stopWatch.getDurationInMilliseconds()-a}_addToImportAliasMap(e,n,i){if(!i.has(e.modulePath)){const l=new Map;l.set(e.originalName,n),i.set(e.modulePath,l);return}const r=i.get(e.modulePath);if(!r.has(e.originalName)){r.set(e.originalName,n);return}const a=r.get(e.originalName);this._compareImportAliasData(a,n)<=0||r.set(e.originalName,n)}_compareImportAliasData(e,n){const i=e.importGroup-n.importGroup;if(i!==0)return i;const r=e.importParts.dotCount-n.importParts.dotCount;return r!==0?r:e.symbol&&!n.symbol?-1:!e.symbol&&n.symbol?1:Df.getStringComparer()(e.importParts.importName,n.importParts.importName)}_getImportPartsForSymbols(e){const n=this._importStatements.mapByFilePath.get(e);if(n)return[n.moduleName,(0,kl.getImportGroup)(n),{importType:2,isLocalTypingsFile:!1,moduleName:n.moduleName}];{const i=this._getModuleNameAndTypeFromFilePath(e);return[i.moduleName,(0,kl.getImportGroupFromModuleNameAndType)(i),i]}}_getImportParts(e){if((0,Uo.stripFileExtension)((0,Uo.getFileName)(e))==="__init__")return i(this._getModuleNameAndTypeFromFilePath((0,Uo.getDirectoryPath)(e)));return i(this._getModuleNameAndTypeFromFilePath(e));function i(r){const a=r.moduleName;if(!a)return;const s=a.lastIndexOf("."),l=s>0?a.substring(s+1):void 0,o=s>0?a.substring(0,s):void 0;return{symbolName:l,importName:l!=null?l:a,importFrom:o,filePath:e,dotCount:Df.getCharacterCount(a,"."),moduleNameAndType:r}}}_isSimilar(e,n,i){if(i===1)return e===n;if(e.length<=0||n.length<=0)return!1;if(!this._options.patternMatcher){const r=e[0]!=="_"&&n[0]==="_"&&n.length>1?1:0;return e[0].toLocaleLowerCase()!==n[r].toLocaleLowerCase()?!1:Df.isPatternInSymbol(e,n)}return this._options.patternMatcher(e,n)}_shouldExclude(e){return this._excludes.has(e,G7.CompletionMap.labelOnlyIgnoringAutoImports)}_containsName(e,n,i){if(this._shouldExclude(e))return!0;const r=i.get(e);return!!(r!=null&&r.some(a=>a.source===n))}_getModuleNameAndTypeFromFilePath(e){return this._importResolver.getModuleNameForImport(e,this._execEnvironment)}_getTextEditsForAutoImportByFilePath(e,n,i,r,a,s){var l,o,u,f,y,p;const b=this._importStatements.mapByFilePath.get(s);if(b){if(b.node.nodeType===20){const v=(o=(l=b.subnode)===null||l===void 0?void 0:l.alias)===null||o===void 0?void 0:o.value;if(n)return{insertionText:`${v!=null?v:b.moduleName}.${n}`,edits:[]};if(v)return{insertionText:`${v}`,edits:[]}}if(n&&b.node.nodeType===22&&!b.node.isWildcardImport){const v=b.node.imports.find(m=>m.name.value===n);if(v){const m=(u=v.alias)===null||u===void 0?void 0:u.value;return{insertionText:`${m!=null?m:n}`,edits:[]}}if(e===b.moduleName)return{insertionText:i!=null?i:r,edits:this._options.lazyEdit?void 0:(0,kl.getTextEditsForAutoImportSymbolAddition)({name:n,alias:i},b,this._parseResults)}}}else if(n){const v=this._importStatements.orderedImports.find(V=>V.moduleName===e);if(v&&v.node.nodeType===22&&!v.node.isWildcardImport){const V=v.node.imports.find(F=>F.name.value===n);if(V){const F=(f=V.alias)===null||f===void 0?void 0:f.value;if(F)return{insertionText:`${F}`,edits:[]}}else return{insertionText:i!=null?i:r,edits:this._options.lazyEdit?void 0:(0,kl.getTextEditsForAutoImportSymbolAddition)({name:n,alias:i},v,this._parseResults)}}const m=(y=this._importStatements.implicitImports)===null||y===void 0?void 0:y.get(s);if(m){const V=(p=m.alias)===null||p===void 0?void 0:p.value;return{insertionText:`${V!=null?V:m.name.value}.${n}`,edits:[]}}}return{insertionText:i!=null?i:r,edits:this._options.lazyEdit?void 0:(0,kl.getTextEditsForAutoImportInsertion)({name:n,alias:i},this._importStatements,e,a,this._parseResults,this._invocationPosition)}}_perfIndexCount(e,n){e.symbol?this._perfInfo.symbolCount++:n&&this._perfInfo.indexCount++}_addResult(e,n){let i=e.get(n.name);i||(i=[],e.set(n.name,i)),i.push(n)}}Ws.AutoImporter=H7;function $k(t,e){return{forEach(n){t.symbols.forEach(i=>{!i.externallyVisible||n({importAlias:i.alias,kind:i.kind,itemKind:i.itemKind},i.name,e)})}}}function IT(t){switch(t){case $t.SymbolKind.File:return $t.CompletionItemKind.File;case $t.SymbolKind.Module:case $t.SymbolKind.Namespace:return $t.CompletionItemKind.Module;case $t.SymbolKind.Package:return $t.CompletionItemKind.Folder;case $t.SymbolKind.Class:return $t.CompletionItemKind.Class;case $t.SymbolKind.Method:return $t.CompletionItemKind.Method;case $t.SymbolKind.Property:return $t.CompletionItemKind.Property;case $t.SymbolKind.Field:return $t.CompletionItemKind.Field;case $t.SymbolKind.Constructor:return $t.CompletionItemKind.Constructor;case $t.SymbolKind.Enum:return $t.CompletionItemKind.Enum;case $t.SymbolKind.Interface:return $t.CompletionItemKind.Interface;case $t.SymbolKind.Function:return $t.CompletionItemKind.Function;case $t.SymbolKind.Variable:case $t.SymbolKind.Array:return $t.CompletionItemKind.Variable;case $t.SymbolKind.String:return $t.CompletionItemKind.Constant;case $t.SymbolKind.Number:case $t.SymbolKind.Boolean:return $t.CompletionItemKind.Value;case $t.SymbolKind.Constant:case $t.SymbolKind.Null:return $t.CompletionItemKind.Constant;case $t.SymbolKind.Object:case $t.SymbolKind.Key:return $t.CompletionItemKind.Value;case $t.SymbolKind.EnumMember:return $t.CompletionItemKind.EnumMember;case $t.SymbolKind.Struct:return $t.CompletionItemKind.Struct;case $t.SymbolKind.Event:return $t.CompletionItemKind.Event;case $t.SymbolKind.Operator:return $t.CompletionItemKind.Operator;case $t.SymbolKind.TypeParameter:return $t.CompletionItemKind.TypeParameter;default:return}}Ws.convertSymbolKindToCompletionItemKind=IT;var Zh={},Y7=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Q7=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),jk=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Y7(e,t,n);return Q7(e,t),e};Object.defineProperty(Zh,"__esModule",{value:!0});Zh.CallHierarchyProvider=void 0;const za=Cs,Hp=jk(Sn),J7=jk(ze),qk=rs,pc=wn,Nc=$n,Ho=In,X7=Hn,bu=yn,Gk=Rn;class Z7{static getCallForDeclaration(e,n,i,r){if((0,Ho.throwIfCancellationRequested)(r),n.type===3||n.type===4)return{name:e,kind:Kk(n,i),uri:n.path,range:n.range,selectionRange:n.range}}static getIncomingCallsForDeclaration(e,n,i,r,a,s){(0,Ho.throwIfCancellationRequested)(s);const o=new t8(e,n,i,r,a,s).findCalls();return o.length>0?o:void 0}static getOutgoingCallsForDeclaration(e,n,i,r){(0,Ho.throwIfCancellationRequested)(r);let a;if(e.type===3)a=e.node;else if(e.type===4){const o=i.getTypeForDeclaration(e);if(o&&(0,pc.isInstantiableClass)(o)){const u=(0,Nc.lookUpClassMember)(o,"__init__",14);if(u){const f=i.getTypeOfMember(u);if(f&&(0,pc.isFunction)(f)){const y=u.symbol.getDeclarations();if(y&&y.length>0){const p=y[0];p.type===3&&(a=p.node)}}}}}if(!a)return;const l=new e8(a,n,i,r).findCalls();return l.length>0?l:void 0}static getTargetDeclaration(e,n){let i=e[0];for(const r of e)if((Hp.hasTypeForDeclaration(r)||!Hp.hasTypeForDeclaration(i))&&(r.type===3||r.type===4)&&(i=r,r.node===n))break;return i}}Zh.CallHierarchyProvider=Z7;class e8 extends qk.ParseTreeWalker{constructor(e,n,i,r){super(),this._parseRoot=e,this._parseResults=n,this._evaluator=i,this._cancellationToken=r,this._outgoingCalls=[]}findCalls(){return this.walk(this._parseRoot),this._outgoingCalls}visitCall(e){(0,Ho.throwIfCancellationRequested)(this._cancellationToken);let n;if(e.leftExpression.nodeType===38?n=e.leftExpression:e.leftExpression.nodeType===35&&(n=e.leftExpression.memberName),n){const i=this._evaluator.getDeclarationsForNameNode(n);i&&i.forEach(r=>{this._addOutgoingCallForDeclaration(n,r)})}return!0}visitMemberAccess(e){(0,Ho.throwIfCancellationRequested)(this._cancellationToken);const n=this._evaluator.getType(e.leftExpression);return n&&(0,Nc.doForEachSubtype)(n,i=>{let r=i;if(r=this._evaluator.makeTopLevelTypeVarsConcrete(r),!(0,pc.isClassInstance)(r))return;const a=(0,Nc.lookUpObjectMember)(r,e.memberName.value);if(!a)return;const s=this._evaluator.getTypeOfMember(a),l=a.symbol.getDeclarations();!s||(0,pc.isClassInstance)(s)&&pc.ClassType.isPropertyClass(s)&&l.forEach(o=>{this._addOutgoingCallForDeclaration(e.memberName,o)})}),!0}_addOutgoingCallForDeclaration(e,n){const i=this._evaluator.resolveAliasDeclaration(n,!0);if(!i||i.type!==3&&i.type!==4)return;const r={name:e.value,kind:Kk(i,this._evaluator),uri:i.path,range:i.range,selectionRange:i.range};let a=this._outgoingCalls.find(l=>l.to.uri===r.uri&&(0,Gk.rangesAreEqual)(l.to.range,r.range));a||(a={to:r,fromRanges:[]},this._outgoingCalls.push(a));const s=(0,bu.convertOffsetsToRange)(e.start,e.start+e.length,this._parseResults.tokenizerOutput.lines);a.fromRanges.push(s)}}class t8 extends qk.ParseTreeWalker{constructor(e,n,i,r,a,s){super(),this._filePath=e,this._symbolName=n,this._declaration=i,this._parseResults=r,this._evaluator=a,this._cancellationToken=s,this._incomingCalls=[]}findCalls(){return this.walk(this._parseResults.parseTree),this._incomingCalls}visitCall(e){(0,Ho.throwIfCancellationRequested)(this._cancellationToken);let n;if(e.leftExpression.nodeType===38?n=e.leftExpression:e.leftExpression.nodeType===35&&(n=e.leftExpression.memberName),n&&n.value===this._symbolName){const i=this._evaluator.getDeclarationsForNameNode(n);i&&i.map(a=>this._evaluator.resolveAliasDeclaration(a,!0)).filter(a=>a!==void 0).some(a=>Hp.areDeclarationsSame(a,this._declaration))&&this._addIncomingCallForDeclaration(n)}return!0}visitMemberAccess(e){if((0,Ho.throwIfCancellationRequested)(this._cancellationToken),e.memberName.value===this._symbolName){const n=this._evaluator.getType(e.leftExpression);n&&(0,Nc.doForEachSubtype)(n,i=>{let r=i;if(r=this._evaluator.makeTopLevelTypeVarsConcrete(r),!(0,pc.isClassInstance)(r))return;const a=(0,Nc.lookUpObjectMember)(r,e.memberName.value);if(!a)return;const s=this._evaluator.getTypeOfMember(a),l=a.symbol.getDeclarations();!s||l.some(o=>Hp.areDeclarationsSame(o,this._declaration))&&this._addIncomingCallForDeclaration(e.memberName)})}return!0}_addIncomingCallForDeclaration(e){const n=J7.getExecutionScopeNode(e);if(!n)return;let i;if(n.nodeType===36){const s=(0,bu.convertOffsetsToRange)(0,0,this._parseResults.tokenizerOutput.lines);i={name:`(module) ${(0,X7.getFileName)(this._filePath)}`,kind:za.SymbolKind.Module,uri:this._filePath,range:s,selectionRange:s}}else if(n.nodeType===30){const s=(0,bu.convertOffsetsToRange)(n.start,n.start+n.length,this._parseResults.tokenizerOutput.lines);i={name:"(lambda)",kind:za.SymbolKind.Function,uri:this._filePath,range:s,selectionRange:s}}else{const s=(0,bu.convertOffsetsToRange)(n.name.start,n.name.start+n.name.length,this._parseResults.tokenizerOutput.lines);i={name:n.name.value,kind:za.SymbolKind.Function,uri:this._filePath,range:s,selectionRange:s}}let r=this._incomingCalls.find(s=>s.from.uri===i.uri&&(0,Gk.rangesAreEqual)(s.from.range,i.range));r||(r={from:i,fromRanges:[]},this._incomingCalls.push(r));const a=(0,bu.convertOffsetsToRange)(e.start,e.start+e.length,this._parseResults.tokenizerOutput.lines);r.fromRanges.push(a)}}function Kk(t,e){let n;switch(t.type){case 4:case 5:n=za.SymbolKind.Class;break;case 3:if(t.isMethod){const i=e.getTypeForDeclaration(t);i&&(0,Nc.isProperty)(i)?n=za.SymbolKind.Property:n=za.SymbolKind.Method}else n=za.SymbolKind.Function;break;default:n=za.SymbolKind.Function;break}return n}var la={},n8=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),i8=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r8=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&n8(e,t,n);return i8(e,t),e};Object.defineProperty(la,"__esModule",{value:!0});la.ReferencesProvider=la.FindReferencesTreeWalker=la.ReferencesResult=void 0;const s8=Bn,CT=r8(ze),a8=wn,DS=In,o8=Dt,PS=qt,wT=yn,l8=Rn,Hk=To;class Yk{constructor(e,n,i,r,a){this.requiresGlobalSearch=e,this.nodeAtOffset=n,this.symbolName=i,this.declarations=r,this._reporter=a,this._locations=[],this.nonImportDeclarations=r.filter(s=>{var l;return(0,s8.isAliasDeclaration)(s)?!(!s.usesLocalName||!s.node||s.node.nodeType===22||((l=s.node.alias)===null||l===void 0?void 0:l.value)!==i):!0})}get containsOnlyImportDecls(){return this.declarations.length>0&&this.nonImportDeclarations.length===0}get locations(){return this._locations}addLocations(...e){e.length!==0&&(this._reporter&&this._reporter(e),(0,o8.appendArray)(this._locations,e))}}la.ReferencesResult=Yk;class Qk{constructor(e,n,i,r,a,s){this._parseResults=e,this._filePath=n,this._referencesResult=i,this._includeDeclaration=r,this._evaluator=a,this._cancellationToken=s}findReferences(e=this._parseResults.parseTree){const n=new Hk.DocumentSymbolCollector(this._referencesResult.symbolName,this._referencesResult.declarations,this._evaluator,this._cancellationToken,e,!0,!1),i=[];for(const r of n.collect())(this._includeDeclaration||r.node!==this._referencesResult.nodeAtOffset)&&i.push({path:this._filePath,range:{start:(0,wT.convertOffsetToPosition)(r.range.start,this._parseResults.tokenizerOutput.lines),end:(0,wT.convertOffsetToPosition)(l8.TextRange.getEnd(r.range),this._parseResults.tokenizerOutput.lines)}});return i}}la.FindReferencesTreeWalker=Qk;class c8{static getDeclarationForNode(e,n,i,r,a,s){(0,DS.throwIfCancellationRequested)(s);const l=Hk.DocumentSymbolCollector.getDeclarationsForNode(i,r,!1,s,e);if(l.length===0)return;const o=u8(r,n,i,l);return new Yk(o,i,i.value,l,a)}static getDeclarationForPosition(e,n,i,r,a,s,l){(0,DS.throwIfCancellationRequested)(l);const o=(0,wT.convertPositionToOffset)(r,n.tokenizerOutput.lines);if(o===void 0)return;const u=CT.findNodeByOffset(n.parseTree,o);if(u!==void 0&&u.nodeType===38)return this.getDeclarationForNode(e,i,u,a,s,l)}static addReferences(e,n,i,r,a,s){const l=new Qk(e,n,i,r,a,s);i.addLocations(...l.findReferences())}}la.ReferencesProvider=c8;function u8(t,e,n,i){const r=t.lookUpSymbolRecursive(n,n.value,!1);if(r&&!a(r.symbol))return!1;return i.some(l=>{var o,u;if(l.path!==e)return!0;const f=CT.getEvaluationScopeNode(l.node);return f.nodeType===36||f.nodeType===10||((u=(o=l.node)===null||o===void 0?void 0:o.parent)===null||u===void 0?void 0:u.nodeType)===35&&l.node===l.node.parent.memberName});function a(l,o=0){return o>a8.maxTypeRecursionCount||(o++,l.isExternallyHidden())?!1:l.getDeclarations().reduce((u,f)=>{if(!u)return!1;switch(f.type){case 6:case 0:case 5:return u;case 4:case 3:return u&&s(f.node.name,o);case 2:return u&&s(f.node.name,o);case 1:return f.node.nodeType===38?u&&s(f.node,o):!1;default:(0,PS.assertNever)(f)}},!0)}function s(l,o){const u=CT.getEvaluationScopeNode(l);switch(u.nodeType){case 10:case 28:{const f=u.name,y=t.lookUpSymbolRecursive(f,f.value,!1);return y?a(y.symbol,o):!0}case 30:case 32:return!1;case 36:return!0;default:(0,PS.assertNever)(u)}}}var em={};Object.defineProperty(em,"__esModule",{value:!0});em.RenameModuleProvider=void 0;const AS=Cs,d8=kt,Dl=Bn,Vy=Sn,f8=Ah,ar=vn,fi=ze,p8=rs,MS=is,Pf=Dt,NS=Ht,RS=qt,_i=Hn,Af=yn,wo=Rn,h8=ws,Pl=To;var Js;(function(t){t[t.File=0]="File",t[t.Folder=1]="Folder",t[t.Symbol=2]="Symbol"})(Js||(Js={}));class gv{constructor(e,n,i,r,a,s,l,o,u){if(this._fs=e,this._evaluator=n,this._moduleFilePath=i,this._moduleNameAndType=a,this._newModuleNameAndType=s,this._type=l,this._declarations=o,this._token=u,this._results=new Map,this._aliasIntroduced=new Set,this._newModuleFilePath=(0,_i.resolvePaths)(r),this._moduleNames=this._moduleName.split("."),this._newModuleNames=this._newModuleName.split("."),this._moduleNames.length!==this._newModuleNames.length){this._onlyNameChanged=!1;return}let f=0;for(f=0;f<this._moduleNames.length-1&&this._moduleNames[f]===this._newModuleNames[f];f++);this._onlyNameChanged=f===this._moduleNames.length-1,(0,RS.assert)(this._type!==Js.Folder||this._onlyNameChanged,"We only support simple rename for folder")}static createForModule(e,n,i,r,a,s){if(!!e.fileSystem.existsSync(r)){if((0,_i.isFile)(e.fileSystem,r))return this._create(e,n,i,r,a,Js.File,s);if((0,_i.isDirectory)(e.fileSystem,r)){if((0,_i.getDirectoryChangeKind)(e.fileSystem,r,a)!=="Renamed")return;let l=(0,_i.combinePaths)(r,"__init__.pyi");return!e.fileSystem.existsSync(l)&&(l=(0,_i.combinePaths)(r,"__init__.py"),!e.fileSystem.existsSync(l))?void 0:this._create(e,n,i,l,(0,_i.combinePaths)(a,(0,_i.getFileName)(l)),Js.Folder,s)}}}static createForSymbol(e,n,i,r,a,s,l){if(!e.fileSystem.existsSync(r))return;const o=s.filter(u=>(0,Dl.isClassDeclaration)(u)||(0,Dl.isFunctionDeclaration)(u)||(0,Dl.isVariableDeclaration)(u));if(o.length!==0)return this._create(e,n,i,r,a,Js.Symbol,o,l)}static getRenameModulePath(e){const n=e.find(a=>!a.node);if(n)return n.path;const i=[...e.reduce((a,s)=>a.add(s.path),new Set)],r=i.findIndex(a=>(0,MS.isStubFile)(a));return r>=0?i[r]:i[0]}static getRenameModulePathInfo(e,n){const i=a(e),r=s(i,n);return{filePath:i,newFilePath:r};function a(l){return(0,_i.stripFileExtension)((0,_i.getFileName)(l))==="__init__"?(0,_i.getDirectoryPath)(l):l}function s(l,o){const u=(0,_i.getFileExtension)(l),f=(0,_i.getDirectoryPath)(l);return(0,_i.combinePaths)(f,`${o}${u}`)}}static _create(e,n,i,r,a,s,l,o){const u=n.findExecEnvironment(r),f=e.getModuleNameForImport(r,u);if(!f.moduleName)return;const y=e.getModuleNameForImport(a,u);if(!y.moduleName)return;o=AS.CancellationToken.is(l)?l:o;const p=AS.CancellationToken.is(l)?[]:l;return p.length===0&&(p.push((0,Vy.createSynthesizedAliasDeclaration)(r)),(0,MS.isStubFile)(r)&&(e.resolveImport(r,u,(0,f8.createImportedModuleDescriptor)(f.moduleName)),e.getSourceFilesFromStub(r,u,!1).forEach(b=>p.push((0,Vy.createSynthesizedAliasDeclaration)(b))))),new gv(e.fileSystem,i,r,a,f,y,s,p,o)}renameReferences(e,n){switch(this._type){case Js.Folder:return this._renameFolderReferences(e,n);case Js.File:return this._renameModuleReferences(e,n);case Js.Symbol:return this._updateSymbolReferences(e,n);default:return(0,RS.assertNever)(this._type,`${this._type} is unknown`)}}_updateSymbolReferences(e,n){var i,r,a,s;const l=new Pl.DocumentSymbolCollector((i=(0,Vy.getNameFromDeclaration)(this._declarations[0]))!==null&&i!==void 0?i:"",this._declarations,this._evaluator,this._token,n.parseTree,!0,!1),o=(0,ar.getTopLevelImports)(n.parseTree,!0),u=o.orderedImports.find(p=>p.moduleName===this._newModuleName),f=new Set,y=new Map;for(const p of l.collect()){const b=p.node;if(b.nodeType===49)continue;if((0,fi.isFromImportName)(b)){const P=(r=b.parent)===null||r===void 0?void 0:r.parent,G=this._getNewModuleName(e,P.module.leadingDots>0,!1);if(P.imports.length===1)this._addResultWithTextRange(e,P.module,n,G);else{const te=b.parent;this._addFromImportNameDeletion(e,n,f,P.imports,te);const q={name:te.name.value,alias:(a=te.alias)===null||a===void 0?void 0:a.value};this._addResultEdits(this._getTextEditsForNewOrExistingFromImport(e,P,n,f,o,G,[q]))}continue}const v=(0,fi.getDottedNameWithGivenNodeAsLastName)(b);if(v===b||v.nodeType!==35)continue;const m=v.leftExpression.nodeType===35?v.leftExpression.memberName:v.leftExpression.nodeType===38?v.leftExpression:void 0;if(!m)continue;const V=(s=this._evaluator.getDeclarationsForNameNode(m))===null||s===void 0?void 0:s.filter(P=>(0,Dl.isAliasDeclaration)(P)&&(P.node.nodeType===21||P.node.nodeType===23));if(!V||V.length===0)continue;const F=V[0].node;(0,Pf.getOrAdd)(y,F,()=>[]).push(v)}for(const[p,b]of y){let v;if(this._canReplaceImportName(n,p,b)){const m=this._getReferenceModuleName(o,u);if(p.nodeType===21)m?(v=m,this._addImportNameDeletion(e,n,f,p.parent.list,p)):(v=p.alias?p.alias.value:this._newModuleName,this._addResultWithTextRange(e,p.module,n,this._newModuleName));else if(m)v=m,this._addFromImportNameDeletion(e,n,f,p.parent.imports,p);else{const V=p.parent,F=this._getNewModuleName(e,V.module.leadingDots>0,!0);v=p.alias?p.alias.value:this._newLastModuleName,this._addResultWithTextRange(e,V.module,n,F),this._addResultWithTextRange(e,p.name,n,this._newLastModuleName)}}else{const m=this._getReferenceModuleName(o,u);m?v=m:(v=this._newModuleName,this._addResultEdits((0,ar.getTextEditsForAutoImportInsertion)([],o,this._newModuleName,(0,ar.getImportGroupFromModuleNameAndType)(this._newModuleNameAndType),n,(0,Af.convertOffsetToPosition)(n.parseTree.length,n.tokenizerOutput.lines)).map(V=>({filePath:e,range:V.range,replacementText:V.replacementText}))))}for(const m of b)this._addResultWithTextRange(e,m.leftExpression,n,v)}}_getReferenceModuleName(e,n){var i,r;if(n&&n.node.nodeType===20)return!((i=n.subnode)===null||i===void 0)&&i.alias?n.subnode.alias.value:this._newModuleName;if(!((r=e.implicitImports)===null||r===void 0)&&r.has(this._newModuleFilePath)){const a=e.implicitImports.get(this._newModuleFilePath);return a.alias?a.alias.value:a.name.value}}_canReplaceImportName(e,n,i){var r;const a=(r=n.alias)!==null&&r!==void 0?r:n.nodeType===21?n.module.nameParts[n.module.nameParts.length-1]:n.name,s=Pl.DocumentSymbolCollector.getDeclarationsForNode(a,this._evaluator,!1,this._token);if(s.length===0)return!1;const l=new Pl.DocumentSymbolCollector(a.value,s,this._evaluator,this._token,e.parseTree,!0,!1);for(const o of l.collect())if(!((0,fi.isImportModuleName)(o.node)||(0,fi.isImportAlias)(o.node)||(0,fi.isFromImportModuleName)(o.node)||(0,fi.isFromImportName)(o.node)||(0,fi.isFromImportAlias)(o.node))&&!i.some(u=>wo.TextRange.containsRange(u,o.node)))return!1;return!0}_renameFolderReferences(e,n){const i=new Pl.DocumentSymbolCollector(this.lastModuleName,this._declarations,this._evaluator,this._token,n.parseTree,!0,!1);for(const r of i.collect())this._addResultWithTextRange(e,r.range,n,this._newLastModuleName)}_renameModuleReferences(e,n){const i=new Pl.DocumentSymbolCollector(this.lastModuleName,this._declarations,this._evaluator,this._token,n.parseTree,!0,!1),r=new Set,a=i.collect();this._updateModuleReferences(e,n,r,a),this._updateRelativeModuleNamePath(e,n,r,a)}_updateRelativeModuleNamePath(e,n,i,r){if(e!==this._moduleFilePath)return;let a;for(const s of this._getNewRelativeModuleNamesForFileMoved(e,Tv.collect(n.parseTree).filter(l=>!r.some(o=>wo.TextRange.containsRange(l.parent,o.node))))){if(this._addResultWithTextRange(e,s.moduleName,n,s.newModuleName),!s.itemsToMove)continue;const l=s.moduleName.parent;for(const o of s.itemsToMove)this._addFromImportNameDeletion(e,n,i,l.imports,o);a=a!=null?a:(0,ar.getTopLevelImports)(n.parseTree,!1),this._addResultEdits(this._getTextEditsForNewOrExistingFromImport(e,l,n,i,a,(0,ar.getRelativeModuleName)(this._fs,this._newModuleFilePath,this._newModuleFilePath,!1,!0),s.itemsToMove.map(o=>{var u;return{name:o.name.value,alias:(u=o.alias)===null||u===void 0?void 0:u.value}})))}}_updateModuleReferences(e,n,i,r){var a,s,l,o,u;let f;for(const y of r){const p=y.node;if(p.nodeType===49){this._addResultWithTextRange(e,y.range,n,this._newLastModuleName);continue}if((0,fi.isImportModuleName)(p)){if(!(0,fi.isLastNameOfModuleName)(p))continue;const v=(0,fi.getFirstAncestorOrSelfOfKind)(p,37);if(v.nameParts.length===1&&((a=v.parent)===null||a===void 0?void 0:a.nodeType)===21&&!v.parent.alias&&this._newModuleNames.length>1){this._aliasIntroduced.add(v.parent),this._addResultWithTextRange(e,v,n,`${this._newModuleName} as ${this._newLastModuleName}`);continue}this._addResultWithTextRange(e,v,n,this._newModuleName);continue}if((0,fi.isImportAlias)(p)){this._addResultWithTextRange(e,y.range,n,this._newLastModuleName);continue}if((0,fi.isFromImportModuleName)(p)){if(!(0,fi.isLastNameOfModuleName)(p))continue;const v=(0,fi.getFirstAncestorOrSelfOfKind)(p,37),m=v.parent,V=[],F=[];for(const P of m.imports)this._isExportedSymbol(P.name)?V.push(P):F.push(P);if(F.length===0){this._addResultWithTextRange(e,v,n,this._getNewModuleName(e,v.leadingDots>0,!1));continue}if(V.length===0)continue;if(m.module.leadingDots>0)for(const P of this._getNewRelativeModuleNamesForFileMoved(e,[m.module]))this._addResultWithTextRange(e,P.moduleName,n,P.newModuleName);for(const P of V)this._addFromImportNameDeletion(e,n,i,m.imports,P);f=f!=null?f:(0,ar.getTopLevelImports)(n.parseTree,!1),this._addResultEdits(this._getTextEditsForNewOrExistingFromImport(e,m,n,i,f,this._newModuleName,V.map(P=>{var G;const te=r.findIndex(U=>U.node===P.name)>=0?this._newLastModuleName:P.name.value,q=r.findIndex(U=>U.node===P.alias)>=0?this._newLastModuleName:(G=P.alias)===null||G===void 0?void 0:G.value;return{name:te,alias:q}})));continue}if((0,fi.isFromImportName)(p)){if(i.has(p.id))continue;const v=(s=p.parent)===null||s===void 0?void 0:s.parent,m=this._getNewModuleName(e,v.module.leadingDots>0,!0);if(this._isExportedSymbol(p)){this._addResultWithTextRange(e,y.range,n,this._newLastModuleName);continue}if(v.imports.length===1)this._addResultWithTextRange(e,v.module,n,m),this._addResultWithTextRange(e,y.range,n,this._newLastModuleName);else{const V=p.parent;if(v.module.leadingDots>0)for(const P of this._getNewRelativeModuleNamesForFileMoved(e,[v.module]))this._addResultWithTextRange(e,P.moduleName,n,P.newModuleName);this._addFromImportNameDeletion(e,n,i,v.imports,V),f=f!=null?f:(0,ar.getTopLevelImports)(n.parseTree,!1);const F={name:this._newLastModuleName,alias:((l=V.alias)===null||l===void 0?void 0:l.value)===this.lastModuleName?this._newLastModuleName:(o=V.alias)===null||o===void 0?void 0:o.value};this._addResultEdits(this._getTextEditsForNewOrExistingFromImport(e,v,n,i,f,m,[F]))}continue}if((0,fi.isFromImportAlias)(p)){if(i.has(p.id))continue;this._addResultWithTextRange(e,y.range,n,this._newLastModuleName);continue}const b=Pl.DocumentSymbolCollector.getDeclarationsForNode(p,this._evaluator,!1,this._token).filter(v=>(0,Dl.isAliasDeclaration)(v));if(this._onlyNameChanged){this._addResultWithTextRange(e,y.range,n,this._newLastModuleName);continue}if(b!=null&&b.some(v=>!v.usesLocalName&&(!v.node||v.node.nodeType===21)&&!this._aliasIntroduced.has(v.node))){const v=(0,fi.getDottedNameWithGivenNodeAsLastName)(p);if(((u=v.parent)===null||u===void 0?void 0:u.nodeType)!==35){this._addResultWithTextRange(e,v,n,this._newModuleName);continue}const m=this._evaluator.getDeclarationsForNameNode(v.parent.memberName);if(!m||m.length===0)continue;this._addResultWithTextRange(e,v,n,this._newModuleName);continue}if(y.node.value!==this._newLastModuleName){this._addResultWithTextRange(e,y.range,n,this._newLastModuleName);continue}}}_getNewRelativeModuleNamesForFileMoved(e,n){if(e!==this._moduleFilePath)return[];const r=(0,_i.stripFileExtension)((0,_i.getFileName)(e))==="__init__",a=(0,_i.getDirectoryPath)(e),s=[];for(const l of n){if(l.leadingDots===0)continue;const o=this._getNewModuleNameInfoForFileMoved(l,r,a);if(!o)continue;const u=(0,ar.getRelativeModuleName)(this._fs,o.src,o.dest,!1,!0);s.push({moduleName:l,newModuleName:u,itemsToMove:o.itemsToMove})}return s}_getNewModuleNameInfoForFileMoved(e,n,i){const r=(0,d8.getImportInfo)(e);if(!r)return;let a=r.resolvedPaths[r.resolvedPaths.length-1];if(!a)if(e.nameParts.length===0){const o=(0,ar.getDirectoryLeadingDotsPointsTo)(i,e.leadingDots);if(!o)return;a=(0,_i.combinePaths)(o,"__init__.py")}else return;if(this._moduleFilePath!==a||!n)return{src:this._newModuleFilePath,dest:a};const s=[],l=[];for(const o of e.parent.imports)this._isExportedSymbol(o.name)?s.push(o):l.push(o);return l.length===0?{src:this._newModuleFilePath,dest:this._newModuleFilePath}:s.length===0?{src:this._newModuleFilePath,dest:this._moduleFilePath}:{src:this._newModuleFilePath,dest:this._moduleFilePath,itemsToMove:[...s]}}_isExportedSymbol(e){const n=this._evaluator.getDeclarationsForNameNode(e);return n?!n.some(i=>(0,Dl.isAliasDeclaration)(i)&&i.submoduleFallback):!1}_getNewModuleName(e,n,i){const r=e===this._moduleFilePath?this._newModuleFilePath:e,a=n?(0,ar.getRelativeModuleName)(this._fs,r,this._newModuleFilePath,i,!0):this._newModuleName;if(i&&a.endsWith(this._newLastModuleName)){const s=a===this._newLastModuleName?0:a.length>this._newLastModuleName.length+1&&a[a.length-this._newLastModuleName.length-2]!=="."?1:0,l=a.length-this._newLastModuleName.length-s,o=a.substr(0,l);return o.length>0?o:"."}return a}getEdits(){const e=[];return this._results.forEach(n=>(0,Pf.appendArray)(e,n)),e}get lastModuleName(){return this._moduleNames[this._moduleNames.length-1]}get _moduleName(){return this._moduleNameAndType.moduleName}get _newLastModuleName(){return this._newModuleNames[this._newModuleNames.length-1]}get _newModuleName(){return this._newModuleNameAndType.moduleName}_addImportNameDeletion(e,n,i,r,a){this._addImportNameDeletionInternal(e,n,i,r,a,20),i.add(a.module.id),a.module.nameParts.forEach(s=>i.add(s.id)),a.alias&&i.add(a.alias.id)}_addFromImportNameDeletion(e,n,i,r,a){this._addImportNameDeletionInternal(e,n,i,r,a,22),i.add(a.name.id),a.alias&&i.add(a.alias.id)}_addImportNameDeletionInternal(e,n,i,r,a,s){const l=(0,ar.getTextRangeForImportNameDeletion)(r,r.findIndex(u=>u===a));this._addResultWithTextRange(e,l,n,""),i.add(a.id);let o=0;for(o=r.length-1;o>=0&&i.has(r[o].id);o--);if(o===-1){const u=(0,fi.getFirstAncestorOrSelfOfKind)(a,s);u&&this._addResultWithRange(e,(0,fi.getFullStatementRange)(u,n.tokenizerOutput),"")}else if(o>=0&&o<r.length-2){const u=wo.TextRange.getEnd(r[o]),f=wo.TextRange.getEnd(r[o+1])-u;this._addResultWithTextRange(e,{start:u,length:f},n,"")}}_addResultWithTextRange(e,n,i,r){i.text.substr(n.start,n.length)!==r&&this._addResultWithRange(e,(0,Af.convertTextRangeToRange)(n,i.tokenizerOutput.lines),r)}_addResultEdits(e){e.forEach(n=>this._addResultWithRange(n.filePath,n.range,n.replacementText))}_getDeletionsForSpan(e,n){var i;return(0,NS.isString)(e)&&(e=(i=this._results.get(e))!==null&&i!==void 0?i:[]),e.filter(r=>r.replacementText===""&&(0,wo.doRangesIntersect)(r.range,n))}_removeEdits(e,n){var i;(0,NS.isString)(e)&&(e=(i=this._results.get(e))!==null&&i!==void 0?i:[]),(0,Pf.removeArrayElements)(e,r=>n.findIndex(a=>a===r)>=0)}_addResultWithRange(e,n,i){const r=(0,Pf.getOrAdd)(this._results,e,()=>[]);if(i===""){const a=this._getDeletionsForSpan(r,n);a.length>0&&(this._removeEdits(r,a),(0,wo.extendRange)(n,a.map(s=>s.range)))}r.some(a=>(0,wo.rangesAreEqual)(a.range,n)&&a.replacementText===i)||r.push({filePath:e,range:n,replacementText:i})}_getTextEditsForNewOrExistingFromImport(e,n,i,r,a,s,l){const o=a.orderedImports.find(u=>u.moduleName===s);if(o&&o.node.nodeType===22&&!o.node.isWildcardImport){const u=(0,ar.getTextEditsForAutoImportSymbolAddition)(l,o,i);if(o.node!==n)return u.map(f=>({filePath:e,range:f.range,replacementText:f.replacementText}));if(this._onlyNameChanged&&l.length===1&&u.length===1){const f=this._getDeletionsForSpan(e,u[0].range);if(f.length===0)return[{filePath:e,range:u[0].range,replacementText:u[0].replacementText}];{const y=l[0].alias===this._newLastModuleName?this.lastModuleName:l[0].alias,p=n.imports.find(b=>{var v;return b.name.value===this.lastModuleName&&((v=b.alias)===null||v===void 0?void 0:v.value)===y});if(p)return this._removeEdits(e,f),p.alias&&r.delete(p.alias.id),[{filePath:e,range:(0,Af.convertTextRangeToRange)(p.name,i.tokenizerOutput.lines),replacementText:this._newLastModuleName}]}}}return(0,ar.getTextEditsForAutoImportInsertion)(l,a,s,(0,ar.getImportGroupFromModuleNameAndType)(this._newModuleNameAndType),i,(0,Af.convertOffsetToPosition)(i.parseTree.length,i.tokenizerOutput.lines)).map(u=>({filePath:e,range:u.range,replacementText:u.replacementText}))}}em.RenameModuleProvider=gv;class Tv extends p8.ParseTreeWalker{constructor(){super(...arguments),this._result=[]}walk(e){(0,h8.isExpressionNode)(e)||super.walk(e)}visitModuleName(e){return this._result.push(e),!1}static collect(e){const n=new Tv;return n.walk(e),n._result}}var tm={};Object.defineProperty(tm,"__esModule",{value:!0});tm.CircularDependency=void 0;class m8{constructor(){this._paths=[]}appendPath(e){this._paths.push(e)}getPaths(){return this._paths}normalizeOrder(){let e=0;this._paths.forEach((n,i)=>{n<this._paths[e]&&(e=i)}),e!==0&&(this._paths=this._paths.slice(e).concat(this._paths.slice(0,e)))}isEqual(e){if(e._paths.length!==this._paths.length)return!1;for(let n=0;n<this._paths.length;n++)if(this._paths[n]!==e._paths[n])return!1;return!0}}tm.CircularDependency=m8;var nm={};class gd{constructor(e,n,i,r){this._uri=e,this._languageId=n,this._version=i,this._content=r,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){const n=this.offsetAt(e.start),i=this.offsetAt(e.end);return this._content.substring(n,i)}return this._content}update(e,n){for(let i of e)if(gd.isIncremental(i)){const r=Jk(i.range),a=this.offsetAt(r.start),s=this.offsetAt(r.end);this._content=this._content.substring(0,a)+i.text+this._content.substring(s,this._content.length);const l=Math.max(r.start.line,0),o=Math.max(r.end.line,0);let u=this._lineOffsets;const f=OS(i.text,!1,a);if(o-l===f.length)for(let p=0,b=f.length;p<b;p++)u[p+l+1]=f[p];else f.length<1e4?u.splice(l+1,o-l,...f):this._lineOffsets=u=u.slice(0,l+1).concat(f,u.slice(o+1));const y=i.text.length-(s-a);if(y!==0)for(let p=l+1+f.length,b=u.length;p<b;p++)u[p]=u[p]+y}else if(gd.isFull(i))this._content=i.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=OS(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let n=this.getLineOffsets(),i=0,r=n.length;if(r===0)return{line:0,character:e};for(;i<r;){let s=Math.floor((i+r)/2);n[s]>e?r=s:i=s+1}let a=i-1;return{line:a,character:e-n[a]}}offsetAt(e){let n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;let i=n[e.line],r=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(i+e.character,r),i)}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let n=e;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")}static isFull(e){let n=e;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0}}var ET;(function(t){function e(r,a,s,l){return new gd(r,a,s,l)}t.create=e;function n(r,a,s){if(r instanceof gd)return r.update(a,s),r;throw new Error("TextDocument.update: document must be created by TextDocument.create")}t.update=n;function i(r,a){let s=r.getText(),l=FT(a.map(y8),(f,y)=>{let p=f.range.start.line-y.range.start.line;return p===0?f.range.start.character-y.range.start.character:p}),o=0;const u=[];for(const f of l){let y=r.offsetAt(f.range.start);if(y<o)throw new Error("Overlapping edit");y>o&&u.push(s.substring(o,y)),f.newText.length&&u.push(f.newText),o=r.offsetAt(f.range.end)}return u.push(s.substr(o)),u.join("")}t.applyEdits=i})(ET||(ET={}));function FT(t,e){if(t.length<=1)return t;const n=t.length/2|0,i=t.slice(0,n),r=t.slice(n);FT(i,e),FT(r,e);let a=0,s=0,l=0;for(;a<i.length&&s<r.length;)e(i[a],r[s])<=0?t[l++]=i[a++]:t[l++]=r[s++];for(;a<i.length;)t[l++]=i[a++];for(;s<r.length;)t[l++]=r[s++];return t}function OS(t,e,n=0){const i=e?[n]:[];for(let r=0;r<t.length;r++){let a=t.charCodeAt(r);(a===13||a===10)&&(a===13&&r+1<t.length&&t.charCodeAt(r+1)===10&&r++,i.push(n+r+1))}return i}function Jk(t){const e=t.start,n=t.end;return e.line>n.line||e.line===n.line&&e.character>n.character?{start:n,end:e}:t}function y8(t){const e=Jk(t.range);return e!==t.range?{newText:t.newText,range:e}:t}var g8=Object.freeze(Object.defineProperty({__proto__:null,get TextDocument(){return ET}},Symbol.toStringTag,{value:"Module"})),T8=Id(g8),sl={};Object.defineProperty(sl,"__esModule",{value:!0});sl.TextRangeDiagnosticSink=sl.DiagnosticSink=void 0;const _8=Dt,cu=Oi,By=yn,v8=bn;class Xk{constructor(e){this._diagnosticList=e||[],this._diagnosticMap=new Map}fetchAndClear(){const e=this._diagnosticList;return this._diagnosticList=[],this._diagnosticMap.clear(),e}addError(e,n){return this.addDiagnostic(new cu.Diagnostic(0,e,n))}addWarning(e,n){return this.addDiagnostic(new cu.Diagnostic(1,e,n))}addInformation(e,n){return this.addDiagnostic(new cu.Diagnostic(2,e,n))}addUnusedCode(e,n,i){const r=new cu.Diagnostic(3,e,n);return i&&r.addAction(i),this.addDiagnostic(r)}addDeprecated(e,n,i){const r=new cu.Diagnostic(4,e,n);return i&&r.addAction(i),this.addDiagnostic(r)}addDiagnostic(e){const n=`${e.range.start.line},${e.range.start.character}-${e.range.end.line}-${e.range.end.character}:${(0,v8.hashString)(e.message)}}`;return this._diagnosticMap.has(n)||(this._diagnosticList.push(e),this._diagnosticMap.set(n,e)),e}addDiagnostics(e){(0,_8.appendArray)(this._diagnosticList,e)}getErrors(){return this._diagnosticList.filter(e=>e.category===0)}getWarnings(){return this._diagnosticList.filter(e=>e.category===1)}getInformation(){return this._diagnosticList.filter(e=>e.category===2)}getUnusedCode(){return this._diagnosticList.filter(e=>e.category===3)}getDeprecated(){return this._diagnosticList.filter(e=>e.category===4)}}sl.DiagnosticSink=Xk;class b8 extends Xk{constructor(e,n){super(n),this._lines=e}addDiagnosticWithTextRange(e,n,i){const r=(0,By.convertOffsetsToRange)(i.start,i.start+i.length,this._lines);switch(e){case"error":return this.addError(n,r);case"warning":return this.addWarning(n,r);case"information":return this.addInformation(n,r);default:throw new Error(`${e} is not expected value`)}}addUnusedCodeWithTextRange(e,n,i){return this.addUnusedCode(e,(0,By.convertOffsetsToRange)(n.start,n.start+n.length,this._lines),i)}addDeprecatedWithTextRange(e,n,i){return this.addDeprecated(e,(0,By.convertOffsetsToRange)(n.start,n.start+n.length,this._lines),i)}}sl.TextRangeDiagnosticSink=b8;var Rd={};Object.defineProperty(Rd,"__esModule",{value:!0});Rd.TextRangeCollection=void 0;const xS=Rn;class S8{constructor(e){this._items=e}get start(){return this._items.length>0?this._items[0].start:0}get end(){const e=this._items[this._items.length-1];return this._items.length>0?e.start+e.length:0}get length(){return this.end-this.start}get count(){return this._items.length}contains(e){return e>=this.start&&e<this.end}getItemAt(e){if(e<0||e>=this._items.length)throw new Error("index is out of range");return this._items[e]}getItemAtPosition(e){if(this.count===0||e<this.start||e>this.end)return-1;let n=0,i=this.count-1;for(;n<i;){const r=Math.floor(n+(i-n)/2),a=this._items[r];if(e>=a.start&&(r>=this.count-1||e<this._items[r+1].start))return r;e<a.start?i=r-1:n=r+1}return n}getItemContaining(e){if(this.count===0||e<this.start||e>this.end)return-1;let n=0,i=this.count-1;for(;n<=i;){const r=Math.floor(n+(i-n)/2),a=this._items[r];if(xS.TextRange.contains(a,e))return r;if(r<this.count-1&&xS.TextRange.getEnd(a)<=e&&e<this._items[r+1].start)return-1;e<a.start?i=r-1:n=r+1}return-1}}Rd.TextRangeCollection=S8;var Zk={};(function(t){var e=Te&&Te.__createBinding||(Object.create?function(F,P,G,te){te===void 0&&(te=G),Object.defineProperty(F,te,{enumerable:!0,get:function(){return P[G]}})}:function(F,P,G,te){te===void 0&&(te=G),F[te]=P[G]}),n=Te&&Te.__setModuleDefault||(Object.create?function(F,P){Object.defineProperty(F,"default",{enumerable:!0,value:P})}:function(F,P){F.default=P}),i=Te&&Te.__importStar||function(F){if(F&&F.__esModule)return F;var P={};if(F!=null)for(var G in F)G!=="default"&&Object.prototype.hasOwnProperty.call(F,G)&&e(P,F,G);return n(P,F),P};Object.defineProperty(t,"__esModule",{value:!0}),t.DefinitionProvider=t.DefinitionFilter=void 0;const r=kt,a=Bn,s=i(ze),l=is,o=wn,u=$n,f=In,y=Dt,p=Ht,b=yn,v=Rn;var m;(function(F){F.All="all",F.PreferSource="preferSource",F.PreferStubs="preferStubs"})(m=t.DefinitionFilter||(t.DefinitionFilter={}));class V{static getDefinitionsForPosition(P,G,te,q,U,D){(0,f.throwIfCancellationRequested)(D);const M=(0,b.convertPositionToOffset)(te,G.tokenizerOutput.lines);if(M===void 0)return;const T=s.findNodeByOffset(G.parseTree,M);if(T===void 0)return;const N=[];if(T.nodeType===38){const ce=U.getDeclarationsForNameNode(T);V._resolveDeclarations(ce,U,N,P)}else if(T.nodeType===49){const ce=U.getDeclarationsForStringNode(T);V._resolveDeclarations(ce,U,N,P)}if(N.length===0)return;if(q===m.All)return N;const J=q===m.PreferStubs,L=ce=>J===(0,l.isStubFile)(ce.path);return N.find(L)?N.filter(L):N}static getTypeDefinitionsForPosition(P,G,te,q,U,D){var M;(0,f.throwIfCancellationRequested)(D);const T=(0,b.convertPositionToOffset)(te,G.tokenizerOutput.lines);if(T===void 0)return;const N=s.findNodeByOffset(G.parseTree,T);if(N===void 0)return;const J=[];if(N.nodeType===38){const L=q.getType(N);if(L){let ce=[];(0,u.doForEachSubtype)(L,ue=>{(ue==null?void 0:ue.category)===7&&(0,y.appendArray)(ce,P.findClassDeclarationsByType(U,ue))}),ce.length===0&&(ce=(M=q.getDeclarationsForNameNode(N))!==null&&M!==void 0?M:[]),V._resolveDeclarations(ce,q,J,P)}}else if(N.nodeType===49){const L=q.getDeclarationsForStringNode(N);V._resolveDeclarations(L,q,J,P)}if(J.length!==0)return J}static _resolveDeclarations(P,G,te,q){P&&P.forEach(U=>{let D=G.resolveAliasDeclaration(U,!0,!0);if(D&&D.path){if(D.type===6&&D.isUnresolved)return;if(D.type===6&&D.symbolName&&D.submoduleFallback&&D.submoduleFallback.path&&(D=D.submoduleFallback),this._addIfUnique(te,{path:D.path,range:D.range}),(0,a.isFunctionDeclaration)(D)){const M=G.getTypeForDeclaration(D);if(M&&(0,o.isOverloadedFunction)(M))for(const T of M.overloads.map(N=>N.details.declaration).filter(p.isDefined))this._addIfUnique(te,{path:T.path,range:T.range})}if((0,l.isStubFile)(D.path))if(D.type===6)q.findModules(D.path).map(M=>{var T;return(T=(0,r.getFileInfo)(M))===null||T===void 0?void 0:T.filePath}).filter(p.isDefined).forEach(M=>this._addIfUnique(te,this._createModuleEntry(M)));else{const M=q.findDeclarations(D);for(const T of M)T&&T.path&&this._addIfUnique(te,{path:T.path,range:T.range})}}})}static _createModuleEntry(P){return{path:P,range:{start:{line:0,character:0},end:{line:0,character:0}}}}static _addIfUnique(P,G){for(const te of P)if(te.path===G.path&&(0,v.rangesAreEqual)(te.range,G.range))return;P.push(G)}}t.DefinitionProvider=V})(Zk);var im={},I8=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),C8=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),w8=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&I8(e,t,n);return C8(e,t),e};Object.defineProperty(im,"__esModule",{value:!0});im.DocumentHighlightProvider=void 0;const LS=Cs,zS=w8(ze),E8=In,US=yn,F8=Rn,k8=To;class D8{static getDocumentHighlight(e,n,i,r){(0,E8.throwIfCancellationRequested)(r);const a=(0,US.convertPositionToOffset)(n,e.tokenizerOutput.lines);if(a===void 0)return;const s=zS.findNodeByOffset(e.parseTree,a);return s===void 0||s.nodeType!==38?void 0:k8.DocumentSymbolCollector.collectFromNode(s,i,r,e.parseTree,!0).map(o=>({kind:o.node.nodeType===38&&zS.isWriteAccess(o.node)?LS.DocumentHighlightKind.Write:LS.DocumentHighlightKind.Read,range:(0,US.convertOffsetsToRange)(o.range.start,F8.TextRange.getEnd(o.range),e.tokenizerOutput.lines)}))}}im.DocumentHighlightProvider=D8;var to={},Od={};Object.defineProperty(Od,"__esModule",{value:!0});Od.resolveAliasDeclaration=void 0;function kT(t,e,n,i){let r=e;const a=[];let s=!1,l=!1,o,u;for(;;){if(r.type!==6||!r.symbolName)return{declaration:r,isPrivate:s,privatePyTypedImported:o,privatePyTypedImporter:u};if(!n&&r.usesLocalName)return{declaration:r,isPrivate:s,privatePyTypedImported:o,privatePyTypedImporter:u};let f;r.path&&r.loadSymbolsFromPath&&(f=t(r.path));const y=f?f.symbolTable.get(r.symbolName):void 0;if(!y)return r.submoduleFallback?kT(t,r.submoduleFallback,n,i):r.isNativeLib?{declaration:void 0,isPrivate:s}:void 0;if(y.isPrivateMember()&&(s=!0),y.isExternallyHidden()&&!i)return;let p=y.getTypedDeclarations();if(p=p.filter(v=>!v.isInExceptSuite),p.length===0&&(p=y.getDeclarations(),p=p.filter(v=>!v.isInExceptSuite)),p.length===0&&(p=y.getDeclarations()),p.length===0)return;const b=p.filter(v=>!a.includes(v));if(b.length>0?r=b[b.length-1]:r=p[p.length-1],l&&(o=o!=null?o:r==null?void 0:r.moduleName),y.isPrivatePyTypedImport()&&(l=!0),l&&(u=u!=null?u:r==null?void 0:r.moduleName),a.find(v=>v===r))return r.path===e.path&&r.type===6&&r.submoduleFallback?kT(t,r.submoduleFallback,n,i):{declaration:e,isPrivate:s,privatePyTypedImported:o,privatePyTypedImporter:u};a.push(r)}}Od.resolveAliasDeclaration=kT;var P8=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),A8=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),eD=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&P8(e,t,n);return A8(e,t),e};Object.defineProperty(to,"__esModule",{value:!0});to.DocumentSymbolProvider=to.convertToFlatSymbols=to.getIndexAliasData=void 0;const fs=Cs,M8=W_,N8=Od,tD=eD(kt),R8=Sn,O8=Ii,x8=$n,_v=In,L8=yn,z8=eD(bn),nD=Ws;function iD(t,e){var n;if(!e.symbolName)return;const i=(0,N8.resolveAliasDeclaration)(t,e,!0,!1);if(!i||!i.declaration||i.isPrivate)return;const r=(0,R8.getNameFromDeclaration)(i.declaration);if(!r||i.declaration.path.length<=0)return;const a=(n=rD(r,i.declaration))!==null&&n!==void 0?n:fs.SymbolKind.Module;return{originalName:r,modulePath:i.declaration.path,kind:a,itemKind:(0,nD.convertSymbolKindToCompletionItemKind)(a)}}to.getIndexAliasData=iD;function U8(t,e){const n=[];for(const i of e)lD(n,t,i);return n}to.convertToFlatSymbols=U8;class Yp{static getSymbolsForDocument(e,n,i,r,a,s){var l;const o=[];if(!n&&!i)return o;const u=(l=n==null?void 0:n.symbols)!==null&&l!==void 0?l:Yp.indexSymbols(e,i,{indexingForAutoImportMode:!1},s);return sD(u,r,a,"",o,s),o}static addHierarchicalSymbolsForDocument(e,n,i,r,a){var s;if(!n&&!i)return;const l=(s=n==null?void 0:n.symbols)!==null&&s!==void 0?s:Yp.indexSymbols(e,i,{indexingForAutoImportMode:!1},a);aD(l,r,a)}static indexSymbols(e,n,i,r){const a=[];return oD(e,n,n.parseTree,i,a,r),a}}to.DocumentSymbolProvider=Yp;function rD(t,e,n){let i;switch(e.type){case 4:case 5:i=fs.SymbolKind.Class;break;case 3:if(e.isMethod){const r=n==null?void 0:n.getTypeForDeclaration(e);r&&(0,x8.isProperty)(r)?i=fs.SymbolKind.Property:i=fs.SymbolKind.Method}else i=fs.SymbolKind.Function;break;case 6:i=fs.SymbolKind.Module;break;case 2:if(t==="self"||t==="cls"||t==="_")return;i=fs.SymbolKind.Variable;break;case 1:if(t==="_")return;i=e.isConstant||e.isFinal?fs.SymbolKind.Constant:fs.SymbolKind.Variable;break;default:i=fs.SymbolKind.Variable;break}return i}function sD(t,e,n,i,r,a){if((0,_v.throwIfCancellationRequested)(a),!t)return;for(const l of t)if(!l.alias){if(z8.isPatternInSymbol(n,l.name)){const o={uri:M8.URI.file(e).toString(),range:l.selectionRange},u={name:l.name,kind:l.kind,location:o};i.length&&(u.containerName=i),r.push(u)}sD(l.children,e,n,s(i,l.name),r,a)}function s(l,o){return l.length>0?`${l}.${o}`:o}}function aD(t,e,n){if((0,_v.throwIfCancellationRequested)(n),!!t)for(const i of t){if(i.alias)continue;const r=[];aD(i.children,r,n);const a={name:i.name,kind:i.kind,range:i.range,selectionRange:i.selectionRange,children:r};e.push(a)}}function oD(t,e,n,i,r,a){(0,_v.throwIfCancellationRequested)(a);const s=tD.getScope(n);if(!s)return;s.symbolTable.forEach((o,u)=>{if(o.isIgnoredForProtocolMatch()||i.indexingForAutoImportMode&&!i.forceIndexing&&!t.isStubFile&&!t.isInPyTypedPackage&&!o.isInDunderAll())return;let f=(0,O8.getLastTypedDeclaredForSymbol)(o);!f&&o.hasDeclarations()&&(f=o.getDeclarations()[0]),f&&(f.type===6&&(!i.indexingForAutoImportMode||!f.loadSymbolsFromPath||f.path.length<=0)||V8(t,e,f,i,!o.isExternallyHidden(),u,r,a))})}function V8(t,e,n,i,r,a,s,l){if(i.indexingForAutoImportMode&&!r)return;const o=rD(a,n);if(o===void 0)return;const u=n.range;let f=u;const y=[];(n.type===4||n.type===3)&&(i.indexingForAutoImportMode||oD(t,e,n.node,i,y,l),f=(0,L8.convertOffsetsToRange)(n.node.start,n.node.start+n.node.length,e.tokenizerOutput.lines));let p;if(n.type===6&&(p=iD(tD.getFileInfo(e.parseTree).importLookup,n),!p))return;const b={name:a,externallyVisible:r,kind:o,itemKind:(0,nD.convertSymbolKindToCompletionItemKind)(o),alias:p,range:i.indexingForAutoImportMode?void 0:f,selectionRange:i.indexingForAutoImportMode?void 0:u,children:i.indexingForAutoImportMode?void 0:y};s.push(b)}function lD(t,e,n,i){const r={name:n.name,kind:n.kind,location:fs.Location.create(e,n.range)};if(n.tags&&(r.tags=n.tags),i&&(r.containerName=i.name),t.push(r),n.children)for(const a of n.children)lD(t,e,a,n)}var Rc={},B8=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),W8=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),$8=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&B8(e,t,n);return W8(e,t),e};Object.defineProperty(Rc,"__esModule",{value:!0});Rc.convertHoverResults=Rc.HoverProvider=void 0;const Qp=Cs,VS=co,j8=$8(ze),jr=wn,Wy=$n,q8=In,cD=qt,$y=yn,G8=Rn,BS=pr;class K8{static getHoverForPosition(e,n,i,r,a,s){var l;(0,q8.throwIfCancellationRequested)(s);const o=(0,$y.convertPositionToOffset)(i,n.tokenizerOutput.lines);if(o===void 0)return;const u=j8.findNodeByOffset(n.parseTree,o);if(u===void 0)return;const f={parts:[],range:{start:(0,$y.convertOffsetToPosition)(u.start,n.tokenizerOutput.lines),end:(0,$y.convertOffsetToPosition)(G8.TextRange.getEnd(u),n.tokenizerOutput.lines)}};if(u.nodeType===38){const y=a.getDeclarationsForNameNode(u);if(y&&y.length>0){let p=y[0];p.type===6&&y.length>1&&(p=y[1]),this._addResultsForDeclaration(r,e,f.parts,p,u,a)}else if((!u.parent||u.parent.nodeType!==37)&&f.parts.length===0){const p=a.getType(u)||jr.UnknownType.create();let b="";(0,jr.isModule)(p)?b="(module) "+u.value:b=u.value+": "+a.printType(p,!1),this._addResultsPart(f.parts,b,!0),this._addDocumentationPart(r,e,f.parts,u,a,void 0)}}else if(u.nodeType===49){const y=(l=a.getExpectedType(u))===null||l===void 0?void 0:l.type;y!==void 0&&this._tryAddPartsForTypedDictKey(r,e,a,u,y,f.parts)}return f.parts.length>0?f:void 0}static _addResultsForDeclaration(e,n,i,r,a,s){var l;const o=s.resolveAliasDeclaration(r,!0);if(!o){this._addResultsPart(i,"(import) "+a.value+this._getTypeText(a,s),!0);return}switch(o.type){case 0:{this._addResultsPart(i,a.value+this._getTypeText(a,s),!0),this._addDocumentationPart(e,n,i,a,s,o);break}case 1:{let u=o.isConstant||o.isFinal?"constant":"variable",f=a;r.node.nodeType===21||r.node.nodeType===23?r.node.alias&&a!==r.node.alias&&o.node.nodeType===38&&(f=o.node):((l=a.parent)===null||l===void 0?void 0:l.nodeType)===1&&a.parent.name===a&&r.node.nodeType===38&&(f=r.node);const y=s.getType(f);let p=!1,b;if(y!=null&&y.typeAliasInfo){const m=(0,jr.getTypeAliasInfo)(y);(m==null?void 0:m.name)===f.value&&((0,jr.isTypeVar)(y)?(u=y.details.isParamSpec?"param spec":"type variable",b=y.details.name):(p=!0,u="type alias"))}const v=b||a.value+this._getTypeText(f,s,p);this._addResultsPart(i,`(${u}) ${v}`,!0),this._addDocumentationPart(e,n,i,a,s,o);break}case 2:{this._addResultsPart(i,"(parameter) "+a.value+this._getTypeText(a,s),!0),this._addDocumentationPart(e,n,i,a,s,o);break}case 4:case 5:{if(this._addInitMethodInsteadIfCallNode(e,a,s,i,n,o))return;this._addResultsPart(i,"(class) "+a.value,!0),this._addDocumentationPart(e,n,i,a,s,o);break}case 3:{let u="function";if(o.isMethod){const y=s.getTypeForDeclaration(o);u=y&&(0,Wy.isMaybeDescriptorInstance)(y,!1)?"property":"method"}const f=s.getType(a);f&&(0,jr.isOverloadedFunction)(f)?this._addResultsPart(i,`(${u})
${(0,BS.getOverloadedFunctionTooltip)(f,s)}`,!0):this._addResultsPart(i,`(${u}) `+a.value+this._getTypeText(a,s),!0),this._addDocumentationPart(e,n,i,a,s,o);break}case 6:{this._addResultsPart(i,"(module) "+a.value,!0),this._addDocumentationPart(e,n,i,a,s,o);break}}}static _tryAddPartsForTypedDictKey(e,n,i,r,a,s){(0,Wy.doForEachSubtype)(a,l=>{var o,u;if((0,jr.isClassInstance)(l)&&jr.ClassType.isTypedDictClass(l)){const f=(o=l.details.typedDictEntries)===null||o===void 0?void 0:o.get(r.value);if(f){s.length>0&&s.push({text:`

---
`});const y="(key) "+r.value+": "+i.printType(f.valueType,!1);this._addResultsPart(s,y,!0);const p=(u=l.details.fields.get(r.value))===null||u===void 0?void 0:u.getDeclarations();if(p!==void 0&&(p==null?void 0:p.length)!==0){const b=p[0];b.type===1&&b.docString!==void 0&&this._addDocumentationPartForType(e,n,s,l,b,i)}}}})}static _addInitMethodInsteadIfCallNode(e,n,i,r,a,s){let l=n;if(l.parent&&l.parent.nodeType===35&&n===l.parent.memberName&&(l=n.parent),!l||!l.parent||l.parent.nodeType!==9||l.parent.leftExpression!==l)return!1;const o=i.getType(n);if(!o||!(0,jr.isInstantiableClass)(o))return!1;const u=(0,Wy.lookUpClassMember)(o,"__init__",8);if(!u)return!1;const f=i.getType(l.parent),y=i.getTypeOfMember(u);if(!f||!y||!(0,jr.isClassInstance)(f)||!(0,jr.isFunction)(y))return!1;const p=i.bindFunctionToClassOrObject(f,y);if(!p||!(0,jr.isFunction)(p))return!1;const b=i.printFunctionParts(p),v=`${n.value}(${b[0].join(", ")})`;return this._addResultsPart(r,"(class) "+v,!0),this._addDocumentationPartForType(e,a,r,p,s,i)||this._addDocumentationPartForType(e,a,r,o,s,i),!0}static _getTypeText(e,n,i=!1){const r=n.getType(e)||jr.UnknownType.create();return": "+n.printType(r,i)}static _addDocumentationPart(e,n,i,r,a,s){const l=a.getType(r);l&&this._addDocumentationPartForType(e,n,i,l,s,a)}static _addDocumentationPartForType(e,n,i,r,a,s){const l=(0,BS.getDocumentationPartsForTypeAndDecl)(n,r,a,s);let o=!1;for(const u of l)u&&(o=!0,this._addDocumentationResultsPart(e,i,u));return o}static _addDocumentationResultsPart(e,n,i){if(i)if(e===Qp.MarkupKind.Markdown){const r=(0,VS.convertDocStringToMarkdown)(i);n.length>0&&r.length>0&&n.push({text:`---
`}),this._addResultsPart(n,r)}else e===Qp.MarkupKind.PlainText?this._addResultsPart(n,(0,VS.convertDocStringToPlainText)(i)):(0,cD.fail)(`Unsupported markup type: ${e}`)}static _addResultsPart(e,n,i=!1){e.push({python:i,text:n})}}Rc.HoverProvider=K8;function H8(t,e){if(!e)return;const n=e.parts.map(i=>{if(i.python){if(t===Qp.MarkupKind.Markdown)return"```python\n"+i.text+"\n```\n";if(t===Qp.MarkupKind.PlainText)return i.text+`

`;(0,cD.fail)(`Unsupported markup type: ${t}`)}return i.text}).join("").trimEnd();return{contents:{kind:t,value:n},range:e.range}}Rc.convertHoverResults=H8;var rm={},sm={};Object.defineProperty(sm,"__esModule",{value:!0});sm.ImportSorter=void 0;const Mf=vn,Y8=In,Nf=yn,WS=Rn,Q8=88;class J8{constructor(e,n){this._parseResults=e,this._cancellationToken=n}sort(){(0,Y8.throwIfCancellationRequested)(this._cancellationToken);const e=[],n=(0,Mf.getTopLevelImports)(this._parseResults.parseTree),i=n.orderedImports.map(a=>a).sort((a,s)=>(0,Mf.compareImportStatements)(a,s));if(i.length===0)return[];const r=this._getPrimaryReplacementRange(n.orderedImports);return e.push({range:r,replacementText:this._generateSortedImportText(i)}),this._addSecondaryReplacementRanges(n.orderedImports,e),e}_getPrimaryReplacementRange(e){let n=e.findIndex(r=>r.followsNonImportStatement);n<0&&(n=e.length);const i=e[n-1].node;return{start:(0,Nf.convertOffsetToPosition)(e[0].node.start,this._parseResults.tokenizerOutput.lines),end:(0,Nf.convertOffsetToPosition)(WS.TextRange.getEnd(i),this._parseResults.tokenizerOutput.lines)}}_addSecondaryReplacementRanges(e,n){let i=e.findIndex(r=>r.followsNonImportStatement);if(!(i<0))for(;;){let r=e.findIndex((a,s)=>s>i&&a.followsNonImportStatement);if(r<0&&(r=e.length),n.push({range:{start:(0,Nf.convertOffsetToPosition)(e[i].node.start,this._parseResults.tokenizerOutput.lines),end:(0,Nf.convertOffsetToPosition)(WS.TextRange.getEnd(e[r-1].node),this._parseResults.tokenizerOutput.lines)},replacementText:""}),i=r,i>=e.length)break}}_generateSortedImportText(e){let n="",i=(0,Mf.getImportGroup)(e[0]);for(const r of e){const a=(0,Mf.getImportGroup)(r);i!==a&&(n+=this._parseResults.tokenizerOutput.predominantEndOfLineSequence,i=a);let s;r.node.nodeType===20?s=this._formatImportNode(r.subnode,r.moduleName):s=this._formatImportFromNode(r.node,r.moduleName),r!==e[e.length-1]&&(s+=this._parseResults.tokenizerOutput.predominantEndOfLineSequence),n+=s}return n}_formatImportNode(e,n){let i=`import ${n}`;return e.alias&&(i+=` as ${e.alias.value}`),i}_formatImportFromNode(e,n){const i=e.imports.sort((s,l)=>this._compareSymbols(s,l)).map(s=>{let l=s.name.value;return s.alias&&(l+=` as ${s.alias.value}`),l});let r=`from ${n} import `;if(e.isWildcardImport)return r+"*";const a=i.join(", ");if(r.length+a.length<=Q8)return r+a;r+="("+this._parseResults.tokenizerOutput.predominantEndOfLineSequence;for(const s of i)r+=this._parseResults.tokenizerOutput.predominantTabSequence+s+","+this._parseResults.tokenizerOutput.predominantEndOfLineSequence;return r+=")",r}_compareSymbols(e,n){return e.name.value<n.name.value?-1:1}}sm.ImportSorter=J8;var X8=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Z8=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ez=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&X8(e,t,n);return Z8(e,t),e};Object.defineProperty(rm,"__esModule",{value:!0});rm.performQuickAction=void 0;const jy=vn,tz=ez(ze),nz=In,$S=Dt,jS=yn,iz=Rn,rz=sm;function sz(t,e,n,i){if(t==="pyright.organizeimports")return new rz.ImportSorter(n,i).sort();if(t==="pyright.addoptionalforparam"&&e.length>=1){const r=parseInt(e[0],10);return az(n,r,i)}return[]}rm.performQuickAction=sz;function az(t,e,n){(0,nz.throwIfCancellationRequested)(n);let i=tz.findNodeByOffset(t.parseTree,e);for(;i&&i.nodeType!==41;)i=i.parent;if(!i)return[];const r=i.typeAnnotation||i.typeAnnotationComment;if(!r)return[];const a=[],s=(0,jS.convertOffsetToPosition)(r.start,t.tokenizerOutput.lines),l=(0,jS.convertOffsetToPosition)(iz.TextRange.getEnd(r),t.tokenizerOutput.lines);a.push({range:{start:s,end:s},replacementText:"Optional["}),a.push({range:{start:l,end:l},replacementText:"]"});const o=(0,jy.getTopLevelImports)(t.parseTree),u=o.orderedImports.find(f=>f.moduleName==="typing");if(u&&u.node.nodeType===22&&!u.node.isWildcardImport){const f=(0,jy.getTextEditsForAutoImportSymbolAddition)({name:"Optional"},u,t);(0,$S.appendArray)(a,f)}else{const f=(0,jy.getTextEditsForAutoImportInsertion)({name:"Optional"},o,"typing",0,t,s);(0,$S.appendArray)(a,f)}return a}var am={},oz=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),lz=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),cz=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&oz(e,t,n);return lz(e,t),e};Object.defineProperty(am,"__esModule",{value:!0});am.SignatureHelpProvider=void 0;const qy=Cs,qS=co,uz=oa,Rf=cz(ze),dz=ze,fz=In,pz=yn,GS=pr;class hz{static getSignatureHelpForPosition(e,n,i,r,a,s){var l;(0,fz.throwIfCancellationRequested)(s);const o=(0,pz.convertPositionToOffset)(n,e.tokenizerOutput.lines);if(o===void 0)return;let u=Rf.findNodeByOffset(e.parseTree,o);const f=u,y=u?Rf.getNodeDepth(u):0;let p=o-1;for(;p>=0&&e.text.substr(p,1)!==",";){const F=Rf.findNodeByOffset(e.parseTree,p);if(F&&F!==f){Rf.getNodeDepth(F)>y&&(u=F);break}p--}if(u===void 0)return;const b=(0,dz.getCallNodeAndActiveParameterIndex)(u,o,e.tokenizerOutput.tokens);if(!b)return;const v=r.getCallSignatureInfo(b.callNode,b.activeIndex,b.activeOrFake);if(!v)return;const m=v.signatures.map(F=>this._makeSignature(v.callNode,F,i,r,a)),V=!!(!((l=v.callNode.arguments)===null||l===void 0)&&l.length);return{signatures:m,callHasParameters:V}}static _makeSignature(e,n,i,r,a){var s;const l=n.type,o=r.printFunctionParts(l),u=[],f=(s=(0,GS.getFunctionDocStringFromType)(l,i,r))!==null&&s!==void 0?s:this._getDocStringFromCallNode(e,i,r);let y="(";const p=l.details.parameters;o[0].forEach((m,V)=>{let F="";V<p.length?F=p[V].name||"":p.length>0&&(F=p[p.length-1].name||""),u.push({startOffset:y.length,endOffset:y.length+m.length,text:m,documentation:(0,uz.extractParameterDocumentation)(f||"",F)}),y+=m,V<o[0].length-1&&(y+=", ")}),y+=") -> "+o[1];let b;n.activeParam&&(b=p.indexOf(n.activeParam),b===-1&&(b=void 0));const v={label:y,parameters:u,activeParameter:b};return f&&(a===qy.MarkupKind.Markdown?v.documentation={kind:qy.MarkupKind.Markdown,value:(0,qS.convertDocStringToMarkdown)(f)}:v.documentation={kind:qy.MarkupKind.PlainText,value:(0,qS.convertDocStringToPlainText)(f)}),v}static _getDocStringFromCallNode(e,n,i){var r;let a;const s=e.leftExpression;if(s.nodeType===38?a=s:s.nodeType===35&&(a=s.memberName),!!a)for(const l of(r=i.getDeclarationsForNameNode(a))!==null&&r!==void 0?r:[]){const o=i.resolveAliasDeclaration(l,!0);if(!o)continue;const u=i.getType(a);if(!u)continue;const f=(0,GS.getDocumentationPartsForTypeAndDecl)(n,u,o,i);if(f.length>0)return f.join(`

`)}}}am.SignatureHelpProvider=hz;var al={},xd={};Object.defineProperty(xd,"__esModule",{value:!0});xd.getUnescapedString=void 0;function mz(t){return{...t,value:t.valueParts.join(""),formatStringSegments:t.formatStringSegments.map(e=>({...e,value:e.valueParts.join("")}))}}function yz(t){const e=t.escapedValue,n=(t.flags&8)!==0,i=(t.flags&64)!==0;if(n&&!i)return{value:e,unescapeErrors:[],nonAsciiInBytes:!1,formatStringSegments:[]};const r=[];for(let v=0;v<e.length;v++)r.push(e.charCodeAt(v));const a=(t.flags&32)!==0;if(!i&&!r.some(v=>v===13||v===10||v===92))return{value:e,unescapeErrors:[],nonAsciiInBytes:a&&r.some(v=>v>=128),formatStringSegments:[]};let s=0,l={offset:0,length:0,valueParts:[],isExpression:!1,hasFormatSpecifier:!1},o=0;const u={valueParts:[],unescapeErrors:[],nonAsciiInBytes:!1,formatStringSegments:[]},f=()=>{n||u.unescapeErrors.push({offset:o-1,length:2,errorType:0})},y=(v=0)=>o+v>=r.length?3:r[o+v],p=v=>{let m=!1,V=0,F="";for(let P=0;P<v;P++){const G=y(1+P);if(!_z(G)){m=!0;break}V=16*V+vz(G)}return m?(f(),F="\\"+String.fromCharCode(y()),o++):(F=String.fromCharCode(V),o+=1+v),F},b=v=>{const m=String.fromCharCode(v);u.valueParts.push(m),l.valueParts.push(m)};for(;;){let v=y();if(v===3)return i&&(l.isExpression&&u.unescapeErrors.push({offset:l.offset,length:o-l.offset,errorType:3}),o!==l.offset&&(l.length=o-l.offset,u.formatStringSegments.push(l))),mz(u);if(v===92){if(i&&l.isExpression&&!l.hasFormatSpecifier&&u.unescapeErrors.push({offset:o,length:1,errorType:1}),o++,n){b(v);continue}v=y();let m="";if(v===13||v===10)v===13&&y(1)===10&&(n&&(m+=String.fromCharCode(v)),o++,v=y()),n&&(m="\\"+m+String.fromCharCode(v)),o++;else if(n)m="\\"+String.fromCharCode(v),o++;else switch(v){case 92:case 39:case 34:m=String.fromCharCode(v),o++;break;case 97:m="\x07",o++;break;case 98:m="\b",o++;break;case 102:m="\f",o++;break;case 110:m=`
`,o++;break;case 114:m="\r",o++;break;case 116:m="	",o++;break;case 118:m="\v",o++;break;case 120:m=p(2);break;case 78:{let V=!1,F=1;if(y(F)!==123)V=!0;else for(F++;;){const P=y(F);if(P===125)break;if(!Tz(P)&&P!==45&&!gz(P)){V=!0;break}else F++}V?(f(),m="\\"+String.fromCharCode(v),o++):(m="-",o+=1+F);break}case 117:m=p(4);break;case 85:m=p(8);break;default:if(Gy(v)){let V=v-48;o++,v=y(),Gy(v)&&(V=V*8+v-48,o++,v=y(),Gy(v)&&(V=V*8+v-48,o++)),m=String.fromCharCode(V)}else m="\\",f();break}u.valueParts.push(m),l.valueParts.push(m)}else if(v===10||v===13)v===13&&y(1)===10&&(b(v),o++,v=y()),b(v),o++;else if(i&&v===123)!l.isExpression&&y(1)===123?(b(v),o+=2):(s===0?(l.length=o-l.offset,l.length>0&&u.formatStringSegments.push(l),o++,l={offset:o,length:0,valueParts:[],isExpression:!0,hasFormatSpecifier:!1}):(b(v),o++),s++);else if(i&&v===125)!l.isExpression&&y(1)===125?(b(v),o+=2):s===0?(u.unescapeErrors.push({offset:o,length:1,errorType:2}),o++):(s--,s===0?(l.length=o-l.offset,u.formatStringSegments.push(l),o++,l={offset:o,length:0,valueParts:[],isExpression:!1,hasFormatSpecifier:!1}):(b(v),o++));else if(l.isExpression&&(v===39||v===34)){const m=v;b(v);const V=y(1)===m&&y(2)===m;for(V&&(o+=2,b(v),b(v),u.valueParts.push(String.fromCharCode(v)),u.valueParts.push(String.fromCharCode(v)));;){o++;let F=y();if(F===3)break;if(F===92){b(F),o++,F=y(),b(F);continue}if((F===10||F===13)&&!V)break;if(F===m){if(!V){o++,b(F);break}if(y(1)===m&&y(2)===m){o+=3,b(F),b(F),b(F);break}}b(F)}}else l.isExpression&&v===58&&(l.hasFormatSpecifier=!0),a&&v>=128&&(u.nonAsciiInBytes=!0),b(v),o++}}xd.getUnescapedString=yz;function gz(t){return t===32||t===9}function Tz(t){return t>=48&&t<=57||t>=97&&t<=122||t>=65&&t<=90}function Gy(t){return t>=48&&t<=55}function _z(t){return t>=48&&t<=57||t>=97&&t<=102||t>=65&&t<=70}function vz(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-97+10:t>=65&&t<=70?t-65+10:0}var uD={},om={};Object.defineProperty(om,"__esModule",{value:!0});om.CharacterStream=void 0;const KS=Vn;class bz{constructor(e){this._text=e,this._position=0,this._currentChar=e.length>0?e.charCodeAt(0):0,this._isEndOfStream=e.length===0}getText(){return this._text}get position(){return this._position}set position(e){this._position=e,this._checkBounds()}get currentChar(){return this._currentChar}getCurrentChar(){return this._currentChar}get nextChar(){return this.position+1<this._text.length?this._text.charCodeAt(this.position+1):0}get prevChar(){return this.position-1>=0?this._text.charCodeAt(this.position-1):0}isEndOfStream(){return this._isEndOfStream}lookAhead(e){const n=this._position+e;return n<0||n>=this._text.length?0:this._text.charCodeAt(n)}advance(e){this.position+=e}moveNext(){return this._position<this._text.length-1?(this._position+=1,this._currentChar=this._text.charCodeAt(this._position),!0):(this.advance(1),!this.isEndOfStream())}isAtWhiteSpace(){return(0,KS.isWhiteSpace)(this.currentChar)}isAtLineBreak(){return(0,KS.isLineBreak)(this.currentChar)}skipLineBreak(){this._currentChar===13?(this.moveNext(),this.currentChar===10&&this.moveNext()):this._currentChar===10&&this.moveNext()}skipWhitespace(){for(;!this.isEndOfStream()&&this.isAtWhiteSpace();)this.moveNext()}skipToEol(){for(;!this.isEndOfStream()&&!this.isAtLineBreak();)this.moveNext()}skipToWhitespace(){for(;!this.isEndOfStream()&&!this.isAtWhiteSpace();)this.moveNext()}charCodeAt(e){return this._text.charCodeAt(e)}get length(){return this._text.length}_checkBounds(){this._position<0&&(this._position=0),this._isEndOfStream=this._position>=this._text.length,this._isEndOfStream&&(this._position=this._text.length),this._currentChar=this._isEndOfStream?0:this._text.charCodeAt(this._position)}}om.CharacterStream=bz;var vv={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.IdentifierToken=t.OperatorToken=t.NumberToken=t.StringToken=t.KeywordToken=t.NewLineToken=t.DedentToken=t.IndentToken=t.Token=t.Comment=void 0,function(e){function n(i,r,a,s=0){return{type:s,start:i,length:r,value:a}}e.create=n}(t.Comment||(t.Comment={})),function(e){function n(i,r,a,s){return{start:r,length:a,type:i,comments:s}}e.create=n}(t.Token||(t.Token={})),function(e){function n(i,r,a,s,l){return{start:i,length:r,type:3,isIndentAmbiguous:s,comments:l,indentAmount:a}}e.create=n}(t.IndentToken||(t.IndentToken={})),function(e){function n(i,r,a,s,l,o){return{start:i,length:r,type:4,comments:o,indentAmount:a,matchesIndent:s,isDedentAmbiguous:l}}e.create=n}(t.DedentToken||(t.DedentToken={})),function(e){function n(i,r,a,s){return{start:i,length:r,type:2,comments:s,newLineType:a}}e.create=n}(t.NewLineToken||(t.NewLineToken={})),function(e){function n(i,r,a,s){return{start:i,length:r,type:8,comments:s,keywordType:a}}e.create=n}(t.KeywordToken||(t.KeywordToken={})),function(e){function n(i,r,a,s,l,o){return{start:i,length:r,type:5,flags:a,escapedValue:s,prefixLength:l,quoteMarkLength:a&4?3:1,comments:o}}e.create=n}(t.StringToken||(t.StringToken={})),function(e){function n(i,r,a,s,l,o){return{start:i,length:r,type:6,isInteger:s,isImaginary:l,value:a,comments:o}}e.create=n}(t.NumberToken||(t.NumberToken={})),function(e){function n(i,r,a,s){return{start:i,length:r,type:9,operatorType:a,comments:s}}e.create=n}(t.OperatorToken||(t.OperatorToken={})),function(e){function n(i,r,a,s){const l=a.normalize("NFKC");return{start:i,length:r,type:7,value:l,comments:s}}e.create=n}(t.IdentifierToken||(t.IdentifierToken={}))})(vv);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Tokenizer=t.defaultTabSize=void 0;const e=Rd,n=Vn,i=om,r=vv,a=new Map([["and",0],["as",1],["assert",2],["async",3],["await",4],["break",5],["case",6],["class",7],["continue",8],["__debug__",9],["def",10],["del",11],["elif",12],["else",13],["except",14],["finally",16],["for",17],["from",18],["globalThis",19],["if",20],["import",21],["in",22],["is",23],["lambda",24],["match",25],["nonlocal",27],["not",28],["or",29],["pass",30],["raise",31],["return",32],["try",34],["while",35],["with",36],["yield",37],["False",15],["None",26],["True",33]]),s={[0]:3,[1]:4,[2]:4,[3]:2,[4]:4,[5]:1,[6]:2,[7]:4,[8]:2,[9]:4,[10]:2,[11]:4,[12]:10,[13]:2,[14]:4,[15]:10,[16]:10,[17]:2,[18]:4,[19]:26,[20]:10,[21]:10,[22]:2,[23]:4,[24]:2,[25]:4,[26]:2,[27]:4,[28]:10,[29]:2,[30]:4,[31]:2,[32]:4,[33]:2,[34]:4,[36]:2,[37]:2,[38]:1,[39]:2,[40]:2,[41]:2,[42]:2},l=65279,o=32*1024;t.defaultTabSize=8;class u{constructor(){this._cs=new i.CharacterStream(""),this._tokens=[],this._prevLineStart=0,this._parenDepth=0,this._lineRanges=[],this._indentAmounts=[],this._typeIgnoreLines=new Map,this._pyrightIgnoreLines=new Map,this._crCount=0,this._crLfCount=0,this._lfCount=0,this._indentCount=0,this._indentTabCount=0,this._indentSpacesTotal=0,this._singleQuoteCount=0,this._doubleQuoteCount=0,this._ipythonMode=!1}tokenize(y,p,b,v=0,m=!1){if(p===void 0)p=0;else if(p<0||p>y.length)throw new Error(`Invalid range start (start=${p}, text.length=${y.length})`);if(b===void 0)b=y.length;else{if(b<0||p+b>y.length)throw new Error(`Invalid range length (start=${p}, length=${b}, text.length=${y.length})`);p+b<y.length&&(y=y.substring(0,p+b))}this._cs=new i.CharacterStream(y),this._cs.position=p,this._tokens=[],this._prevLineStart=0,this._parenDepth=v,this._lineRanges=[],this._indentAmounts=[],this._ipythonMode=m;const V=p+b;for(p===0&&this._readIndentationAfterNewLine();!this._cs.isEndOfStream()&&(this._addNextToken(),!(this._cs.position>=V)););(this._tokens.length===0||this._tokens[this._tokens.length-1].type!==2)&&this._tokens.push(r.NewLineToken.create(this._cs.position,0,3,this._getComments())),this._setIndent(0,0,!1,!1),this._tokens.push(r.Token.create(1,this._cs.position,0,this._getComments())),this._addLineRange();let F=`
`;this._crCount>this._crLfCount&&this._crCount>this._lfCount?F="\r":this._crLfCount>this._crCount&&this._crLfCount>this._lfCount&&(F=`\r
`);let P="    ";if(this._indentTabCount>this._indentCount/2)P="	";else if(this._indentCount>0){let G=Math.round(this._indentSpacesTotal/this._indentCount);G<1?G=1:G>t.defaultTabSize&&(G=t.defaultTabSize),P="";for(let te=0;te<G;te++)P+=" "}return{tokens:new e.TextRangeCollection(this._tokens),lines:new e.TextRangeCollection(this._lineRanges),typeIgnoreLines:this._typeIgnoreLines,typeIgnoreAll:this._typeIgnoreAll,pyrightIgnoreLines:this._pyrightIgnoreLines,predominantEndOfLineSequence:F,predominantTabSequence:P,predominantSingleQuoteCharacter:this._singleQuoteCount>=this._doubleQuoteCount?"'":'"'}}static getOperatorInfo(y){return s[y]}static isOperatorAssignment(y){return y===void 0||s[y]===void 0?!1:(s[y]&4)!==0}static isOperatorComparison(y){return y===void 0||s[y]===void 0?!1:(s[y]&8)!==0}_addNextToken(){this._cs.skipWhitespace(),!this._cs.isEndOfStream()&&(this._handleCharacter()||this._cs.moveNext())}_handleCharacter(){const y=this._getStringPrefixLength();if(y>=0){let p="";y>0&&(p=this._cs.getText().substring(this._cs.position,this._cs.position+y),this._cs.advance(y));const b=this._getQuoteTypeFlags(p);if(b!==0)return this._handleString(b,y),!0}if(this._cs.currentChar===35)return this._handleComment(),!0;if(this._ipythonMode&&this._isIPythonMagics())return this._handleIPythonMagics(this._cs.currentChar===37?1:2),!0;switch(this._cs.currentChar){case l:return this._cs.position===0?!1:this._handleInvalid();case 13:{const p=this._cs.nextChar===10?2:1,b=p===2?2:0;return this._handleNewLine(p,b),!0}case 10:return this._handleNewLine(1,1),!0;case 92:return this._cs.nextChar===13?(this._cs.lookAhead(2)===10?this._cs.advance(3):this._cs.advance(2),this._addLineRange(),!0):this._cs.nextChar===10?(this._cs.advance(2),this._addLineRange(),!0):this._handleInvalid();case 40:{this._parenDepth++,this._tokens.push(r.Token.create(13,this._cs.position,1,this._getComments()));break}case 41:{this._parenDepth>0&&this._parenDepth--,this._tokens.push(r.Token.create(14,this._cs.position,1,this._getComments()));break}case 91:{this._parenDepth++,this._tokens.push(r.Token.create(15,this._cs.position,1,this._getComments()));break}case 93:{this._parenDepth>0&&this._parenDepth--,this._tokens.push(r.Token.create(16,this._cs.position,1,this._getComments()));break}case 123:{this._parenDepth++,this._tokens.push(r.Token.create(17,this._cs.position,1,this._getComments()));break}case 125:{this._parenDepth>0&&this._parenDepth--,this._tokens.push(r.Token.create(18,this._cs.position,1,this._getComments()));break}case 44:{this._tokens.push(r.Token.create(12,this._cs.position,1,this._getComments()));break}case 96:{this._tokens.push(r.Token.create(22,this._cs.position,1,this._getComments()));break}case 59:{this._tokens.push(r.Token.create(11,this._cs.position,1,this._getComments()));break}case 58:{if(this._cs.nextChar===61){this._tokens.push(r.OperatorToken.create(this._cs.position,2,35,this._getComments())),this._cs.advance(1);break}this._tokens.push(r.Token.create(10,this._cs.position,1,this._getComments()));break}default:{if(this._isPossibleNumber()&&this._tryNumber())return!0;if(this._cs.currentChar===46){if(this._cs.nextChar===46&&this._cs.lookAhead(2)===46)return this._tokens.push(r.Token.create(19,this._cs.position,3,this._getComments())),this._cs.advance(3),!0;this._tokens.push(r.Token.create(20,this._cs.position,1,this._getComments()));break}return!this._tryIdentifier()&&!this._tryOperator()?this._handleInvalid():!0}}return!1}_addLineRange(){const y=this._cs.position-this._prevLineStart;y>0&&this._lineRanges.push({start:this._prevLineStart,length:y}),this._prevLineStart=this._cs.position}_handleNewLine(y,p){this._parenDepth===0&&p!==3&&(this._tokens.length===0||this._tokens[this._tokens.length-1].type!==2)&&this._tokens.push(r.NewLineToken.create(this._cs.position,y,p,this._getComments())),p===0?this._crCount++:p===2?this._crLfCount++:this._lfCount++,this._cs.advance(y),this._addLineRange(),this._readIndentationAfterNewLine()}_readIndentationAfterNewLine(){let y=0,p=0,b=!1,v=!1;for(;!this._cs.isEndOfStream();)switch(this._cs.currentChar){case 32:y++,p++,v=!0,this._cs.moveNext();break;case 9:y++,p+=t.defaultTabSize-p%t.defaultTabSize,b=!0,this._cs.moveNext();break;case 12:y=0,p=0,b=!1,v=!1,this._cs.moveNext();break;default:this._setIndent(y,p,v,b);return;case 35:case 10:case 13:return}}_setIndent(y,p,b,v){if(!(this._parenDepth>0))if(this._indentAmounts.length===0)p>0&&(this._indentCount++,v&&this._indentTabCount++,this._indentSpacesTotal+=p,this._indentAmounts.push({tab1Spaces:y,tab8Spaces:p,isSpacePresent:b,isTabPresent:v}),this._tokens.push(r.IndentToken.create(this._cs.position,0,p,!1,this._getComments())));else{const m=this._indentAmounts[this._indentAmounts.length-1];if(m.tab8Spaces<p){const V=(m.isSpacePresent&&v||m.isTabPresent&&b)&&m.tab1Spaces>=y;this._indentCount++,v&&this._indentTabCount++,this._indentSpacesTotal+=p-this._indentAmounts[this._indentAmounts.length-1].tab8Spaces,this._indentAmounts.push({tab1Spaces:y,tab8Spaces:p,isSpacePresent:b,isTabPresent:v}),this._tokens.push(r.IndentToken.create(this._cs.position,0,p,V,this._getComments()))}else if(m.tab8Spaces===p)(m.isSpacePresent&&v||m.isTabPresent&&b)&&this._tokens.push(r.IndentToken.create(this._cs.position,0,p,!0,this._getComments()));else{let V=m.isSpacePresent&&v||m.isTabPresent&&b;const F=[];for(;this._indentAmounts.length>0&&this._indentAmounts[this._indentAmounts.length-1].tab8Spaces>p;)F.push(this._indentAmounts.length>1?this._indentAmounts[this._indentAmounts.length-2].tab8Spaces:0),this._indentAmounts.pop();F.forEach((P,G)=>{const te=G<F.length-1||P===p,q=G<F.length-1?P:p;this._tokens.push(r.DedentToken.create(this._cs.position,0,q,te,V,this._getComments())),V=!1})}}}_tryIdentifier(){const y=()=>{for(;;)if((0,n.isIdentifierChar)(this._cs.currentChar))this._cs.moveNext();else if((0,n.isIdentifierChar)(this._cs.currentChar,this._cs.nextChar))this._cs.moveNext(),this._cs.moveNext();else break},p=this._cs.position;if((0,n.isIdentifierStartChar)(this._cs.currentChar)?(this._cs.moveNext(),y()):(0,n.isIdentifierStartChar)(this._cs.currentChar,this._cs.nextChar)&&(this._cs.moveNext(),this._cs.moveNext(),y()),this._cs.position>p){const b=this._cs.getText().substring(p,this._cs.position);return a.has(b)?this._tokens.push(r.KeywordToken.create(p,this._cs.position-p,a.get(b),this._getComments())):this._tokens.push(r.IdentifierToken.create(p,this._cs.position-p,b,this._getComments())),!0}return!1}_isPossibleNumber(){return!!((0,n.isDecimal)(this._cs.currentChar)||this._cs.currentChar===46&&(0,n.isDecimal)(this._cs.nextChar))}_tryNumber(){const y=this._cs.position;if(this._cs.currentChar===48){let v=0,m=0;if((this._cs.nextChar===120||this._cs.nextChar===88)&&(0,n.isHex)(this._cs.lookAhead(2))){for(this._cs.advance(2),m=2;(0,n.isHex)(this._cs.currentChar);)this._cs.moveNext();v=16}else if((this._cs.nextChar===98||this._cs.nextChar===66)&&(0,n.isBinary)(this._cs.lookAhead(2))){for(this._cs.advance(2),m=2;(0,n.isBinary)(this._cs.currentChar);)this._cs.moveNext();v=2}else if((this._cs.nextChar===111||this._cs.nextChar===79)&&(0,n.isOctal)(this._cs.lookAhead(2))){for(this._cs.advance(2),m=2;(0,n.isOctal)(this._cs.currentChar);)this._cs.moveNext();v=8}if(v>0){const V=this._cs.getText().substring(y,this._cs.position),F=V.replace(/_/g,"");let P=parseInt(F.substring(m),v);if(!isNaN(P)){const G=BigInt(F);return(!isFinite(P)||BigInt(P)!==G)&&(P=G),this._tokens.push(r.NumberToken.create(y,V.length,P,!0,!1,this._getComments())),!0}}}let p=!1,b=!1;if(this._cs.currentChar>=49&&this._cs.currentChar<=57){for(;(0,n.isDecimal)(this._cs.currentChar);)b=!0,this._cs.moveNext();p=this._cs.currentChar!==46&&this._cs.currentChar!==101&&this._cs.currentChar!==69}if(this._cs.currentChar===48){for(b=!0;this._cs.currentChar===48||this._cs.currentChar===95;)this._cs.moveNext();p=this._cs.currentChar!==46&&this._cs.currentChar!==101&&this._cs.currentChar!==69}if(p){let v=this._cs.getText().substring(y,this._cs.position);const m=v.replace(/_/g,"");let V=parseInt(m,10);if(!isNaN(V)){let F=!1;const P=BigInt(m);return(!isFinite(V)||BigInt(V)!==P)&&(V=P),(this._cs.currentChar===106||this._cs.currentChar===74)&&(F=!0,v+=String.fromCharCode(this._cs.currentChar),this._cs.moveNext()),this._tokens.push(r.NumberToken.create(y,v.length,V,!0,F,this._getComments())),!0}}if(this._cs.position=y,(b||this._cs.currentChar===46&&this._cs.nextChar>=48&&this._cs.nextChar<=57)&&this._skipFloatingPointCandidate()){let v=this._cs.getText().substring(y,this._cs.position);const m=parseFloat(v);if(!isNaN(m)){let V=!1;return(this._cs.currentChar===106||this._cs.currentChar===74)&&(V=!0,v+=String.fromCharCode(this._cs.currentChar),this._cs.moveNext()),this._tokens.push(r.NumberToken.create(y,this._cs.position-y,m,!1,V,this._getComments())),!0}}return this._cs.position=y,!1}_tryOperator(){let y=0;const p=this._cs.nextChar;let b;switch(this._cs.currentChar){case 43:y=p===61?2:1,b=y===2?1:0;break;case 38:y=p===61?2:1,b=y===2?4:3;break;case 124:y=p===61?2:1,b=y===2?7:6;break;case 94:y=p===61?2:1,b=y===2?9:8;break;case 61:y=p===61?2:1,b=y===2?12:2;break;case 33:if(p!==61)return!1;y=2,b=28;break;case 37:y=p===61?2:1,b=y===2?25:24;break;case 126:y=1,b=5;break;case 45:if(p===62)return this._tokens.push(r.Token.create(21,this._cs.position,2,this._getComments())),this._cs.advance(2),!0;y=p===61?2:1,b=y===2?34:33;break;case 42:p===42?(y=this._cs.lookAhead(2)===61?3:2,b=y===3?30:29):(y=p===61?2:1,b=y===2?27:26);break;case 47:p===47?(y=this._cs.lookAhead(2)===61?3:2,b=y===3?14:13):(y=p===61?2:1,b=y===2?11:10);break;case 60:p===60?(y=this._cs.lookAhead(2)===61?3:2,b=y===3?18:17):p===62?(y=2,b=19):(y=p===61?2:1,b=y===2?21:20);break;case 62:p===62?(y=this._cs.lookAhead(2)===61?3:2,b=y===3?32:31):(y=p===61?2:1,b=y===2?16:15);break;case 64:y=p===61?2:1,b=y===2?23:22;break;default:return!1}return this._tokens.push(r.OperatorToken.create(this._cs.position,y,b,this._getComments())),this._cs.advance(y),y>0}_handleInvalid(){const y=this._cs.position;for(;!(this._cs.currentChar===10||this._cs.currentChar===13||this._cs.isAtWhiteSpace()||this._cs.isEndOfStream());)(0,n.isSurrogateChar)(this._cs.currentChar)?(this._cs.moveNext(),this._cs.moveNext()):this._cs.moveNext();const p=this._cs.position-y;return p>0?(this._tokens.push(r.Token.create(0,y,p,this._getComments())),!0):!1}_getComments(){const y=this._comments;return this._comments=void 0,y}_isIPythonMagics(){const y=this._tokens.length>0?this._tokens[this._tokens.length-1]:void 0;return(y===void 0||y.type===2||y.type===3)&&(this._cs.currentChar===37||this._cs.currentChar===33)}_handleIPythonMagics(y){const p=this._cs.position+1;let b=p;do{this._cs.skipToEol();const F=this._cs.position-b;if(!this._cs.getText().substring(b,b+F).match(/\\\s*$/))break;b=this._cs.position+1}while(!this._cs.isEndOfStream());const v=this._cs.position-p,m=this._cs.getText().substring(p,p+v),V=r.Comment.create(p,v,m,y);this._addComments(V)}_handleComment(){const y=this._cs.position+1;this._cs.skipToEol();const p=this._cs.position-y,b=this._cs.getText().substring(y,y+p),v=r.Comment.create(y,p,b),m=b.match(/^\s*type:\s*ignore(\s*\[([\s*\w-,]*)\]|\s|$)/);if(m){const P={range:{start:y,length:m[0].length},rulesList:this._getIgnoreCommentRulesList(y,m)};this._tokens.findIndex(G=>G.type!==2&&G&&G.type!==3)<0?this._typeIgnoreAll=P:this._typeIgnoreLines.set(this._lineRanges.length,P)}const V=b.match(/^\s*pyright:\s*ignore(\s*\[([\s*\w-,]*)\]|\s|$)/);if(V){const P={range:{start:y,length:V[0].length},rulesList:this._getIgnoreCommentRulesList(y,V)};this._pyrightIgnoreLines.set(this._lineRanges.length,P)}this._addComments(v)}_getIgnoreCommentRulesList(y,p){if(p.length<3||p[2]===void 0)return;const b=p[2].split(","),v=[];let m=y+p[0].indexOf("[")+1;for(const V of b){const F=V.trimStart();m+=V.length-F.length;const P=F.trimEnd();P.length>0&&v.push({range:{start:m,length:P.length},text:P}),m+=F.length+1}return v}_addComments(y){this._comments?this._comments.push(y):this._comments=[y]}_getStringPrefixLength(){if(this._cs.currentChar===39||this._cs.currentChar===34)return 0;if(this._cs.nextChar===39||this._cs.nextChar===34)switch(this._cs.currentChar){case 102:case 70:case 114:case 82:case 98:case 66:case 117:case 85:return 1}if(this._cs.lookAhead(2)===39||this._cs.lookAhead(2)===34)switch(this._cs.getText().substring(this._cs.position,this._cs.position+2).toLowerCase()){case"rf":case"fr":case"ur":case"ru":case"br":case"rb":return 2}return-1}_getQuoteTypeFlags(y){let p=0;y=y.toLowerCase();for(let b=0;b<y.length;b++)switch(y[b]){case"u":p|=16;break;case"b":p|=32;break;case"r":p|=8;break;case"f":p|=64;break}return this._cs.currentChar===39?(p|=1,this._cs.nextChar===39&&this._cs.lookAhead(2)===39&&(p|=4)):this._cs.currentChar===34&&(p|=2,this._cs.nextChar===34&&this._cs.lookAhead(2)===34&&(p|=4)),p}_handleString(y,p){const b=this._cs.position-p;y&4?this._cs.advance(3):(this._cs.moveNext(),y&1?this._singleQuoteCount++:this._doubleQuoteCount++);const v=this._skipToEndOfStringLiteral(y),m=this._cs.position;this._tokens.push(r.StringToken.create(b,m-b,v.flags,v.escapedValue,p,this._getComments()))}_skipToEndOfStringLiteral(y){const p=y&1?39:34,b=(y&4)!==0;let v=[];for(;;){if(this._cs.isEndOfStream())return y|=65536,{escapedValue:String.fromCharCode.apply(void 0,v),flags:y};if(this._cs.currentChar===92)v.push(this._cs.currentChar),this._cs.moveNext(),this._cs.getCurrentChar()===13||this._cs.getCurrentChar()===10?(this._cs.getCurrentChar()===13&&this._cs.nextChar===10&&(v.push(this._cs.currentChar),this._cs.moveNext()),v.push(this._cs.currentChar),this._cs.moveNext(),this._addLineRange()):(v.push(this._cs.currentChar),this._cs.moveNext());else if(this._cs.currentChar===10||this._cs.currentChar===13){if(!b)return y|=65536,{escapedValue:String.fromCharCode.apply(void 0,v),flags:y};this._cs.currentChar===13&&this._cs.nextChar===10&&(v.push(this._cs.currentChar),this._cs.moveNext()),v.push(this._cs.currentChar),this._cs.moveNext(),this._addLineRange()}else if(!b&&this._cs.currentChar===p){this._cs.moveNext();break}else if(b&&this._cs.currentChar===p&&this._cs.nextChar===p&&this._cs.lookAhead(2)===p){this._cs.advance(3);break}else v.push(this._cs.currentChar),this._cs.moveNext()}return v.length>o&&(v=v.slice(0,o),y|=131072),{escapedValue:String.fromCharCode.apply(void 0,v),flags:y}}_skipFloatingPointCandidate(){const y=this._cs.position;return this._skipFractionalNumber(),this._cs.position>y&&(this._cs.currentChar===101||this._cs.currentChar===69)&&(this._cs.moveNext(),this._skipDecimalNumber(!0)),this._cs.position>y}_skipFractionalNumber(){this._skipDecimalNumber(!1),this._cs.currentChar===46&&this._cs.moveNext(),this._skipDecimalNumber(!1)}_skipDecimalNumber(y){for(y&&(this._cs.currentChar===45||this._cs.currentChar===43)&&this._cs.moveNext();(0,n.isDecimal)(this._cs.currentChar);)this._cs.moveNext()}}t.Tokenizer=u})(uD);var Sz=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Iz=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Cz=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Sz(e,t,n);return Iz(e,t),e};Object.defineProperty(al,"__esModule",{value:!0});al.Parser=al.ParseOptions=void 0;const wz=Dt,Yi=qt,uu=Oi,HS=sl,Ky=yn,ki=hl,YS=ji,Pe=ir,Ee=ws,Hy=Cz(xd),Yy=uD,Of=vv;class dD{constructor(){this.isStubFile=!1,this.pythonVersion=ki.latestStablePythonVersion,this.reportInvalidStringEscapeSequence=!1,this.skipFunctionAndClassBody=!1,this.ipythonMode=!1,this.reportErrorsForParsedStringContents=!1}}al.ParseOptions=dD;const Al=256;class tc{constructor(){this._tokenIndex=0,this._areErrorsSuppressed=!1,this._parseOptions=new dD,this._diagSink=new HS.DiagnosticSink,this._isInLoop=!1,this._isInFunction=!1,this._isInFinally=!1,this._isParsingTypeAnnotation=!1,this._isParsingIndexTrailer=!1,this._futureImportMap=new Map,this._importedModules=[],this._containsWildcardImport=!1,this._assignmentExpressionsAllowed=!0,this._typingImportAliases=[],this._typingSymbolAliases=new Map}parseSourceFile(e,n,i){YS.timingStats.tokenizeFileTime.timeOperation(()=>{this._startNewParse(e,0,e.length,n,i)});const r=Ee.ModuleNode.create({start:0,length:e.length});return YS.timingStats.parseFileTime.timeOperation(()=>{for(;!this._atEof();)if(!this._consumeTokenIfType(2)){const a=this._peekToken();if(a.type===3){this._getNextToken();const l=a;l.isIndentAmbiguous?this._addError(Pe.Localizer.Diagnostic.inconsistentTabs(),l):this._addError(Pe.Localizer.Diagnostic.unexpectedIndent(),a)}const s=this._parseStatement();s?(s.parent=r,r.statements.push(s)):this._consumeTokensUntilType([2])}}),(0,Yi.assert)(this._tokenizerOutput!==void 0),{text:e,parseTree:r,importedModules:this._importedModules,futureImports:this._futureImportMap,tokenizerOutput:this._tokenizerOutput,containsWildcardImport:this._containsWildcardImport,typingSymbolAliases:this._typingSymbolAliases}}parseTextExpression(e,n,i,r,a=0,s=0,l){const o=new HS.DiagnosticSink;this._startNewParse(e,n,i,r,o,s),l&&(this._typingSymbolAliases=new Map(l));let u;if(a===1)u=this._parseTypeAnnotation();else if(a===2)u=this._parseFunctionTypeAnnotation();else{const f=this._parseTestOrStarExpressionList(!1,!0);f.parseError?u=f.parseError:(f.list.length===0&&this._addError(Pe.Localizer.Diagnostic.expectedExpr(),this._peekToken()),u=this._makeExpressionOrTuple(f,!1))}return this._peekTokenType()===2&&this._getNextToken(),this._atEof()||this._addError(Pe.Localizer.Diagnostic.unexpectedExprToken(),this._peekToken()),{parseTree:u,lines:this._tokenizerOutput.lines,diagnostics:o.fetchAndClear()}}_startNewParse(e,n,i,r,a,s=0){this._fileContents=e,this._parseOptions=r,this._diagSink=a;const l=new Yy.Tokenizer;this._tokenizerOutput=l.tokenize(e,n,i,s,this._parseOptions.ipythonMode),this._tokenIndex=0}_parseStatement(){switch(this._consumeTokenIfType(4)&&this._addError(Pe.Localizer.Diagnostic.unexpectedUnindent(),this._peekToken()),this._peekKeywordType()){case 20:return this._parseIfStatement();case 35:return this._parseWhileStatement();case 17:return this._parseForStatement();case 34:return this._parseTryStatement();case 36:return this._parseWithStatement();case 10:return this._parseFunctionDef();case 7:return this._parseClassDef();case 3:return this._parseAsyncStatement();case 25:{const e=this._peekToken(1);let n=!1;if(e.type===10||e.type===11||e.type===12||e.type===20||e.type===2||e.type===1)n=!0;else if(e.type===9){const i=e;i.operatorType!==26&&i.operatorType!==33&&(n=!0)}if(!n){const i=this._parseMatchStatement();if(i)return i}}}return this._peekOperatorType()===22?this._parseDecorated():this._parseSimpleStatement()}_parseAsyncStatement(){const e=this._getKeywordToken(3);switch(this._peekKeywordType()){case 10:return this._parseFunctionDef(e);case 36:return this._parseWithStatement(e);case 17:return this._parseForStatement(e)}this._addError(Pe.Localizer.Diagnostic.unexpectedAsyncToken(),e)}_parseMatchStatement(){let e=!1;if(this._suppressErrors(()=>{const s=this._tokenIndex;this._getKeywordToken(25),e=this._parseTestOrStarListAsExpression(!0,!0,12,Pe.Localizer.Diagnostic.expectedReturnExpr()).nodeType!==0&&this._peekToken().type===10,this._tokenIndex=s}),!e)return;const n=this._getKeywordToken(25),i=this._parseTestOrStarListAsExpression(!0,!0,12,Pe.Localizer.Diagnostic.expectedReturnExpr()),r=Ee.MatchNode.create(n,i),a=this._peekToken();if(!this._consumeTokenIfType(10))this._addError(Pe.Localizer.Diagnostic.expectedColon(),a),this._consumeTokensUntilType([2,10])&&this._getNextToken();else if(!this._consumeTokenIfType(2))this._addError(Pe.Localizer.Diagnostic.expectedNewline(),a);else{const s=this._peekToken();if(!this._consumeTokenIfType(3))this._addError(Pe.Localizer.Diagnostic.expectedIndentedBlock(),this._peekToken());else{const l=s;l.isIndentAmbiguous&&this._addError(Pe.Localizer.Diagnostic.inconsistentTabs(),l)}for(;;){const l=this._peekToken();if(l.type===3){this._getNextToken();const f=l;f.isIndentAmbiguous?this._addError(Pe.Localizer.Diagnostic.inconsistentTabs(),f):this._addError(Pe.Localizer.Diagnostic.unexpectedIndent(),l)}const o=this._parseCaseStatement();o?(o.parent=r,r.cases.push(o)):this._consumeTokensUntilType([2,10])&&this._getNextToken();const u=this._peekToken();if(this._consumeTokenIfType(4)){u.matchesIndent||this._addError(Pe.Localizer.Diagnostic.inconsistentIndent(),u),u.isDedentAmbiguous&&this._addError(Pe.Localizer.Diagnostic.inconsistentTabs(),u);break}if(this._peekTokenType()===1)break}r.cases.length>0?(0,Ee.extendRange)(r,r.cases[r.cases.length-1]):this._addError(Pe.Localizer.Diagnostic.zeroCaseStatementsFound(),n)}this._getLanguageVersion()<ki.PythonVersion.V3_10&&this._addError(Pe.Localizer.Diagnostic.matchIncompatible(),n);for(let s=0;s<r.cases.length-1;s++){const l=r.cases[s];!l.guardExpression&&l.isIrrefutable&&this._addError(Pe.Localizer.Diagnostic.casePatternIsIrrefutable(),l.pattern)}return r}_parseCaseStatement(){const e=this._peekToken();if(!this._consumeTokenIfKeyword(6)){this._addError(Pe.Localizer.Diagnostic.expectedCase(),e);return}const n=this._parsePatternSequence();let i;if(n.parseError)i=n.parseError;else if(n.list.length===0)this._addError(Pe.Localizer.Diagnostic.expectedPatternExpr(),this._peekToken()),i=Ee.ErrorNode.create(e,11);else if(n.list.length===1&&!n.trailingComma){const s=n.list[0].orPatterns[0];s.nodeType===69&&s.isStar?i=Ee.PatternSequenceNode.create(n.list[0],n.list):i=n.list[0]}else i=Ee.PatternSequenceNode.create(n.list[0],n.list);let r;this._consumeTokenIfKeyword(20)&&(r=this._parseTestExpression(!0));const a=this._parseSuite(this._isInFunction);return Ee.CaseNode.create(e,i,this._isPatternIrrefutable(i),r,a)}_isPatternIrrefutable(e){return e.nodeType===69?!0:e.nodeType===66?e.orPatterns.some(n=>this._isPatternIrrefutable(n)):!1}_getPatternTargetNames(e,n){switch(e.nodeType){case 65:{e.entries.forEach(i=>{this._getPatternTargetNames(i,n)});break}case 68:{e.arguments.forEach(i=>{this._getPatternTargetNames(i.pattern,n)});break}case 66:{e.target&&n.set(e.target.value,!0),e.orPatterns.forEach(i=>{this._getPatternTargetNames(i,n)});break}case 69:{e.isWildcard||n.set(e.target.value,!0);break}case 70:{e.entries.forEach(i=>{i.nodeType===72?n.set(i.target.value,!0):(this._getPatternTargetNames(i.keyPattern,n),this._getPatternTargetNames(i.valuePattern,n))});break}}}_parsePatternSequence(){const e=this._parseExpressionListGeneric(()=>this._parsePatternAs()),n=e.list.filter(r=>r.orPatterns.length===1&&r.orPatterns[0].nodeType===69&&r.orPatterns[0].isStar);n.length>1&&this._addError(Pe.Localizer.Diagnostic.duplicateStarPattern(),n[1].orPatterns[0]);const i=new Map;return e.list.forEach(r=>{r.orPatterns.forEach(a=>{a.nodeType===69&&!a.isStar&&!a.isWildcard&&(i.has(a.target.value)?this._addError(Pe.Localizer.Diagnostic.duplicateCapturePatternTarget().format({name:a.target.value}),a):i.set(a.target.value,a))})}),e}_parsePatternAs(){const e=[];for(;;){const r=this._parsePatternAtom();if(e.push(r),!this._consumeTokenIfOperator(6))break}e.length>1&&e.forEach(r=>{r.nodeType===69&&r.isStar&&this._addError(Pe.Localizer.Diagnostic.starPatternInOrPattern(),r)});let n;if(this._consumeTokenIfKeyword(1)){const r=this._getTokenIfIdentifier();r?n=Ee.NameNode.create(r):this._addError(Pe.Localizer.Diagnostic.expectedNameAfterAs(),this._peekToken())}n&&e.length===1&&e[0].nodeType===69&&e[0].isStar&&this._addError(Pe.Localizer.Diagnostic.starPatternInAsPattern(),e[0]),e.forEach((r,a)=>{a<e.length-1&&this._isPatternIrrefutable(r)&&this._addError(Pe.Localizer.Diagnostic.orPatternIrrefutable(),r)});const i=new Map;return e.forEach(r=>{this._getPatternTargetNames(r,i)}),e.forEach(r=>{const a=new Map;if(this._getPatternTargetNames(r,a),a.size<i.size){const s=Array.from(i.keys()).filter(o=>!a.has(o)),l=new uu.DiagnosticAddendum;l.addMessage(Pe.Localizer.DiagnosticAddendum.orPatternMissingName().format({name:s.map(o=>`"${o}"`).join(", ")})),this._addError(Pe.Localizer.Diagnostic.orPatternMissingName()+l.getString(),r)}}),Ee.PatternAsNode.create(e,n)}_parsePatternAtom(){const e=this._parsePatternLiteral();if(e)return e;const n=this._parsePatternCaptureOrValue();if(n){const a=this._peekToken();if(n.nodeType===0||!this._consumeTokenIfType(13))return n;const s=this._parseClassPatternArgList(),l=n.nodeType===69?n.target:n.expression,o=Ee.PatternClassNode.create(l,s);return this._consumeTokenIfType(14)||(this._addError(Pe.Localizer.Diagnostic.expectedCloseParen(),a),this._consumeTokensUntilType([2]),(0,Ee.extendRange)(o,this._peekToken())),o}const i=this._peekToken();if(this._peekOperatorType()===26){const a=this._getNextToken(),s=this._getTokenIfIdentifier();return s?Ee.PatternCaptureNode.create(Ee.NameNode.create(s),a):(this._addError(Pe.Localizer.Diagnostic.expectedIdentifier(),this._peekToken()),Ee.ErrorNode.create(a,2))}if(i.type===13||i.type===15){const a=this._getNextToken(),s=this._parsePatternSequence();let l;if(s.parseError)l=s.parseError;else if(s.list.length===1&&!s.trailingComma&&a.type===13){const u=s.list[0].orPatterns[0];u.nodeType===69&&u.isStar?l=Ee.PatternSequenceNode.create(a,s.list):l=s.list[0],(0,Ee.extendRange)(l,i)}else l=Ee.PatternSequenceNode.create(a,s.list);const o=this._peekToken();return this._consumeTokenIfType(i.type===13?14:16)?(0,Ee.extendRange)(l,o):(this._addError(i.type===13?Pe.Localizer.Diagnostic.expectedCloseParen():Pe.Localizer.Diagnostic.expectedCloseBracket(),i),this._consumeTokensUntilType([10,i.type===13?14:16])),l}else if(i.type===17){const a=this._getNextToken(),s=this._parsePatternMapping(a),l=this._peekToken();return this._consumeTokenIfType(18)?(0,Ee.extendRange)(s,l):(this._addError(Pe.Localizer.Diagnostic.expectedCloseBrace(),i),this._consumeTokensUntilType([10,18])),s}return this._handleExpressionParseError(11,Pe.Localizer.Diagnostic.expectedPatternExpr())}_parseClassPatternArgList(){const e=[];let n=!1;for(;;){const i=this._peekTokenType();if(i===14||i===2||i===1)break;const r=this._parseClassPatternArgument();if(r.name?n=!0:n&&!r.name&&this._addError(Pe.Localizer.Diagnostic.positionArgAfterNamedArg(),r),e.push(r),!this._consumeTokenIfType(12))break}return e}_parseClassPatternArgument(){const e=this._peekToken(),n=this._peekToken(1);let i;(e.type===7||e.type===8)&&n.type===9&&n.operatorType===2&&(this._getNextToken(),i=Ee.NameNode.create(e),this._getNextToken());const r=this._parsePatternAs();return Ee.PatternClassArgumentNode.create(r,i)}_parsePatternLiteral(){const e=this._peekToken(),n=this._peekOperatorType();if(e.type===6||n===33)return this._parsePatternLiteralNumber();if(e.type===5){const i=this._parseAtom();return(0,Yi.assert)(i.nodeType===48),i.strings.forEach(r=>{r.token.flags&64&&this._addError(Pe.Localizer.Diagnostic.formatStringInPattern(),r)}),Ee.PatternLiteralNode.create(i)}if(e.type===8){const i=e;if(i.keywordType===15||i.keywordType===33||i.keywordType===26)return Ee.PatternLiteralNode.create(this._parseAtom())}}_parsePatternLiteralNumber(){const e=this._parseArithmeticExpression();let n,i;return e.nodeType===7?(e.operator===33||e.operator===0)&&(n=e.leftExpression,i=e.rightExpression):n=e,n&&(n.nodeType===55&&n.operator===33&&(n=n.expression),(n.nodeType!==40||i!==void 0&&n.isImaginary)&&(this._addError(Pe.Localizer.Diagnostic.expectedComplexNumberLiteral(),e),i=void 0)),i&&(i.nodeType===55&&i.operator===33&&(i=i.expression),(i.nodeType!==40||!i.isImaginary)&&this._addError(Pe.Localizer.Diagnostic.expectedComplexNumberLiteral(),e)),Ee.PatternLiteralNode.create(e)}_parsePatternMapping(e){const n=this._parseExpressionListGeneric(()=>this._parsePatternMappingItem());if(n.list.length>0){const i=n.list.filter(r=>r.nodeType===72);return i.length>1&&this._addError(Pe.Localizer.Diagnostic.duplicateStarStarPattern(),i[1]),Ee.PatternMappingNode.create(e,n.list)}return n.parseError||Ee.ErrorNode.create(this._peekToken(),11)}_parsePatternMappingItem(){let e;const n=this._peekToken();if(this._consumeTokenIfOperator(29)){const a=this._getTokenIfIdentifier();if(!a)return this._addError(Pe.Localizer.Diagnostic.expectedIdentifier(),this._peekToken()),Ee.ErrorNode.create(this._peekToken(),11);const s=Ee.NameNode.create(a);return a.value==="_"&&this._addError(Pe.Localizer.Diagnostic.starStarWildcardNotAllowed(),s),Ee.PatternMappingExpandEntryNode.create(n,s)}const i=this._parsePatternLiteral();if(i)e=i;else{const a=this._parsePatternCaptureOrValue();a&&(a.nodeType===73?e=a:(this._addError(Pe.Localizer.Diagnostic.expectedPatternValue(),a),e=Ee.ErrorNode.create(this._peekToken(),11)))}e||(this._addError(Pe.Localizer.Diagnostic.expectedPatternExpr(),this._peekToken()),e=Ee.ErrorNode.create(this._peekToken(),11));let r;return this._consumeTokenIfType(10)?r=this._parsePatternAs():(this._addError(Pe.Localizer.Diagnostic.expectedColon(),this._peekToken()),r=Ee.ErrorNode.create(this._peekToken(),11)),Ee.PatternMappingKeyEntryNode.create(e,r)}_parsePatternCaptureOrValue(){const e=this._peekToken();if(e.type===7||e.type===8){let n;for(;;){const i=this._getTokenIfIdentifier();if(i){const r=Ee.NameNode.create(i);n=n?Ee.MemberAccessNode.create(n,r):r}else{this._addError(Pe.Localizer.Diagnostic.expectedIdentifier(),this._peekToken());break}if(!this._consumeTokenIfType(20))break}return n?n.nodeType===35?Ee.PatternValueNode.create(n):Ee.PatternCaptureNode.create(n):(this._addError(Pe.Localizer.Diagnostic.expectedIdentifier(),this._peekToken()),Ee.ErrorNode.create(this._peekToken(),11))}}_parseIfStatement(e=20){const n=this._getKeywordToken(e),i=this._parseTestExpression(!0),r=this._parseSuite(this._isInFunction),a=Ee.IfNode.create(n,i,r);return this._consumeTokenIfKeyword(13)?(a.elseSuite=this._parseSuite(this._isInFunction),a.elseSuite.parent=a,(0,Ee.extendRange)(a,a.elseSuite)):this._peekKeywordType()===12&&(a.elseSuite=this._parseIfStatement(12),a.elseSuite.parent=a,(0,Ee.extendRange)(a,a.elseSuite)),a}_parseLoopSuite(e=!1){const n=this._isInLoop,i=this._isInFinally;this._isInLoop=!0,this._isInFinally=!1;const r=this._parseSuite(this._isInFunction,!1,()=>{e&&this._detectUnsupportedTypeAnnotationComment()});return this._isInLoop=n,this._isInFinally=i,r}_parseSuite(e=!1,n=!1,i){const r=this._peekToken(),a=Ee.SuiteNode.create(r);if(!this._consumeTokenIfType(10)&&(this._addError(Pe.Localizer.Diagnostic.expectedColon(),r),this._consumeTokensUntilType([2,10]))){if(this._peekTokenType()===10)this._getNextToken();else if(this._peekToken(1).type!==3)return this._getNextToken(),a}if(n){if(this._consumeTokenIfType(2)){let l=0;for(;;){const o=this._getNextToken();if(o.type===3&&l++,o.type===4&&(o.isDedentAmbiguous&&this._addError(Pe.Localizer.Diagnostic.inconsistentTabs(),o),l--,l===0)||o.type===1)break}}else this._parseSimpleStatement();return this._tokenIndex>0&&(0,Ee.extendRange)(a,this._tokenizerOutput.tokens.getItemAt(this._tokenIndex-1)),a}i&&i();const s=this._isInFunction;if(this._isInFunction=e,this._consumeTokenIfType(2)){i&&i();const l=this._peekToken();if(!this._consumeTokenIfType(3))this._addError(Pe.Localizer.Diagnostic.expectedIndentedBlock(),this._peekToken());else{const o=l;o.isIndentAmbiguous&&this._addError(Pe.Localizer.Diagnostic.inconsistentTabs(),o)}for(;;){const o=this._peekToken();if(o.type===3){this._getNextToken();const y=o;y.isIndentAmbiguous?this._addError(Pe.Localizer.Diagnostic.inconsistentTabs(),y):this._addError(Pe.Localizer.Diagnostic.unexpectedIndent(),o)}const u=this._parseStatement();u?(u.parent=a,a.statements.push(u)):this._consumeTokensUntilType([2]);const f=this._peekToken();if(this._consumeTokenIfType(4)){f.matchesIndent||this._addError(Pe.Localizer.Diagnostic.inconsistentIndent(),f),f.isDedentAmbiguous&&this._addError(Pe.Localizer.Diagnostic.inconsistentTabs(),f);break}if(this._peekTokenType()===1)break}}else{const l=this._parseSimpleStatement();a.statements.push(l),l.parent=a}return a.statements.length>0&&(0,Ee.extendRange)(a,a.statements[a.statements.length-1]),this._isInFunction=s,a}_parseForStatement(e){const n=this._getKeywordToken(17),i=this._parseExpressionListAsPossibleTuple(2,Pe.Localizer.Diagnostic.expectedExpr(),n);let r,a,s;if(!this._consumeTokenIfKeyword(22))r=this._handleExpressionParseError(0,Pe.Localizer.Diagnostic.expectedIn()),a=Ee.SuiteNode.create(this._peekToken());else{if(r=this._parseTestOrStarListAsExpression(!1,!0,2,Pe.Localizer.Diagnostic.expectedInExpr()),a=this._parseLoopSuite(!0),this._getLanguageVersion()<ki.PythonVersion.V3_9&&!this._parseOptions.isStubFile&&r.nodeType===52&&!r.enclosedInParens){let o=!1;r.expressions.forEach(u=>{u.nodeType===56&&!o&&(this._addError(Pe.Localizer.Diagnostic.unpackOperatorNotAllowed(),u),o=!0)})}this._consumeTokenIfKeyword(13)&&(s=this._parseSuite(this._isInFunction))}const l=Ee.ForNode.create(n,i,r,a);return l.elseSuite=s,s&&((0,Ee.extendRange)(l,s),s.parent=l),e&&(l.isAsync=!0,l.asyncToken=e,(0,Ee.extendRange)(l,e)),l}_tryParseListComprehension(e){const n=this._tryParseCompForStatement();if(!n)return;e.nodeType===56?this._addError(Pe.Localizer.Diagnostic.unpackIllegalInComprehension(),e):e.nodeType===16&&this._addError(Pe.Localizer.Diagnostic.dictExpandIllegalInComprehension(),e);const i=Ee.ListComprehensionNode.create(e),r=[n];for(;;){const a=this._tryParseCompForStatement()||this._tryParseCompIfStatement();if(!a)break;a.parent=i,r.push(a)}return i.forIfNodes=r,r.length>0&&(r.forEach(a=>{a.parent=i}),(0,Ee.extendRange)(i,r[r.length-1])),i}_tryParseCompForStatement(){const e=this._peekKeywordType();if(e===3){const l=this._peekToken(1);if(l.type!==8||l.keywordType!==17)return}else if(e!==17)return;let n;this._peekKeywordType()===3&&(n=this._getKeywordToken(3));const i=this._getKeywordToken(17),r=this._parseExpressionListAsPossibleTuple(2,Pe.Localizer.Diagnostic.expectedExpr(),i);let a;this._consumeTokenIfKeyword(22)?this._disallowAssignmentExpression(()=>{a=this._parseOrTest()}):a=this._handleExpressionParseError(0,Pe.Localizer.Diagnostic.expectedIn());const s=Ee.ListComprehensionForNode.create(n||i,r,a);return n&&(s.isAsync=!0,s.asyncToken=n),s}_tryParseCompIfStatement(){if(this._peekKeywordType()!==20)return;const e=this._getKeywordToken(20),n=this._tryParseLambdaExpression()||this._parseAssignmentExpression(!0);return Ee.ListComprehensionIfNode.create(e,n)}_parseWhileStatement(){const e=this._getKeywordToken(35),n=Ee.WhileNode.create(e,this._parseTestExpression(!0),this._parseLoopSuite());return this._consumeTokenIfKeyword(13)&&(n.elseSuite=this._parseSuite(this._isInFunction),n.elseSuite.parent=n,(0,Ee.extendRange)(n,n.elseSuite)),n}_parseTryStatement(){const e=this._getKeywordToken(34),n=this._parseSuite(this._isInFunction),i=Ee.TryNode.create(e,n);let r=!1;for(;;){const a=this._peekToken();if(!this._consumeTokenIfKeyword(14))break;const s=this._peekToken();let l=!1;this._consumeTokenIfOperator(26)&&(this._getLanguageVersion()<ki.PythonVersion.V3_11&&!this._parseOptions.isStubFile&&this._addError(Pe.Localizer.Diagnostic.exceptionGroupIncompatible(),s),l=!0);let o,u;if(this._peekTokenType()!==10)if(o=this._parseTestExpression(!0),this._consumeTokenIfKeyword(1))u=this._getTokenIfIdentifier(),u||this._addError(Pe.Localizer.Diagnostic.expectedNameAfterAs(),this._peekToken());else{const p=this._peekToken();this._consumeTokenIfType(12)&&(this._addError(Pe.Localizer.Diagnostic.expectedAsAfterException(),p),this._parseTestExpression(!1))}o?r&&this._addError(Pe.Localizer.Diagnostic.namedExceptAfterCatchAll(),o):(r&&this._addError(Pe.Localizer.Diagnostic.duplicateCatchAll(),a),r=!0);const f=this._parseSuite(this._isInFunction),y=Ee.ExceptNode.create(a,f,l);o&&(y.typeExpression=o,y.typeExpression.parent=y),u&&(y.name=Ee.NameNode.create(u),y.name.parent=y),i.exceptClauses.push(y),y.parent=i}return i.exceptClauses.length>0&&((0,Ee.extendRange)(i,i.exceptClauses[i.exceptClauses.length-1]),this._consumeTokenIfKeyword(13)&&(i.elseSuite=this._parseSuite(this._isInFunction),i.elseSuite.parent=i,(0,Ee.extendRange)(i,i.elseSuite))),this._consumeTokenIfKeyword(16)&&(i.finallySuite=this._parseSuite(this._isInFunction),i.finallySuite.parent=i,(0,Ee.extendRange)(i,i.finallySuite)),!i.finallySuite&&i.exceptClauses.length===0&&this._addError(Pe.Localizer.Diagnostic.tryWithoutExcept(),e),i}_parseFunctionDef(e,n){const i=this._getKeywordToken(10),r=this._getTokenIfIdentifier();if(!r)return this._addError(Pe.Localizer.Diagnostic.expectedFunctionName(),i),Ee.ErrorNode.create(i,10,void 0,n);const a=this._peekToken();if(!this._consumeTokenIfType(13))return this._addError(Pe.Localizer.Diagnostic.expectedOpenParen(),this._peekToken()),Ee.ErrorNode.create(r,10,Ee.NameNode.create(r),n);const s=this._parseVarArgsList(14,!0);this._consumeTokenIfType(14)||(this._addError(Pe.Localizer.Diagnostic.expectedCloseParen(),a),this._consumeTokensUntilType([10]));let l;this._consumeTokenIfType(21)&&(l=this._parseTypeAnnotation());let o;const u=this._parseSuite(!0,this._parseOptions.skipFunctionAndClassBody,()=>{o||(o=this._getTypeAnnotationCommentText())}),f=Ee.FunctionNode.create(i,Ee.NameNode.create(r),u);return e&&(f.isAsync=!0,(0,Ee.extendRange)(f,e)),f.parameters=s,s.forEach(y=>{y.parent=f}),n&&(f.decorators=n,n.forEach(y=>{y.parent=f}),n.length>0&&(0,Ee.extendRange)(f,n[0])),l&&(f.returnTypeAnnotation=l,f.returnTypeAnnotation.parent=f,(0,Ee.extendRange)(f,l)),o&&this._parseFunctionTypeAnnotationComment(o,f),f}_parseVarArgsList(e,n){const i=new Map,r=[];let a=!1,s=!1,l=!1,o=!1,u=!1,f=!1;for(;this._peekTokenType()!==e;){const y=this._parseParameter(n);if(!y){this._consumeTokensUntilType([e]);break}if(y.name){const b=y.name.value;i.has(b)?this._addError(Pe.Localizer.Diagnostic.duplicateParam().format({name:b}),y.name):i.set(b,b)}else y.category===0&&r.length===0&&this._addError(Pe.Localizer.Diagnostic.positionOnlyFirstParam(),y);y.category===0&&(y.name?y.defaultValue?a=!0:a&&!l&&!u&&(s||(this._addError(Pe.Localizer.Diagnostic.nonDefaultAfterDefault(),y),s=!0)):(o?this._addError(Pe.Localizer.Diagnostic.duplicatePositionOnly(),y):l?this._addError(Pe.Localizer.Diagnostic.positionOnlyAfterKeywordOnly(),y):u&&this._addError(Pe.Localizer.Diagnostic.positionOnlyAfterArgs(),y),o=!0)),r.push(y),y.category===1&&(y.name?((l||u)&&this._addError(Pe.Localizer.Diagnostic.duplicateArgsParam(),y),u=!0):(l?this._addError(Pe.Localizer.Diagnostic.duplicateKeywordOnly(),y):u&&this._addError(Pe.Localizer.Diagnostic.keywordOnlyAfterArgs(),y),l=!0)),y.category===2?(f&&this._addError(Pe.Localizer.Diagnostic.duplicateKwargsParam(),y),f=!0):f&&this._addError(Pe.Localizer.Diagnostic.paramAfterKwargsParam(),y);const p=this._consumeTokenIfType(12);if(n&&!y.typeAnnotation){const b=this._parseVariableTypeAnnotationComment();b&&(y.typeAnnotationComment=b,y.typeAnnotationComment.parent=y,(0,Ee.extendRange)(y,y.typeAnnotationComment))}if(!p)break}if(r.length>0){const y=r[r.length-1];y.category===1&&!y.name&&this._addError(Pe.Localizer.Diagnostic.expectedNamedParameter(),y)}return r}_parseParameter(e){let n=0,i=0;const r=this._peekToken();this._consumeTokenIfOperator(26)?n=1:this._consumeTokenIfOperator(29)?n=2:this._consumeTokenIfOperator(10)&&(this._getLanguageVersion()<ki.PythonVersion.V3_8&&!this._parseOptions.isStubFile&&this._addError(Pe.Localizer.Diagnostic.positionOnlyIncompatible(),r),i=1);const a=this._getTokenIfIdentifier();if(!a){if(n===1)return Ee.ParameterNode.create(r,1);if(i===1)return Ee.ParameterNode.create(r,0);if(this._peekTokenType()===13){const o=this._getNextToken();this._consumeTokensUntilType([14])&&this._getNextToken(),this._addError(Pe.Localizer.Diagnostic.sublistParamsIncompatible(),o)}else this._addError(Pe.Localizer.Diagnostic.expectedParamName(),this._peekToken())}let s=0;n===1?s=1:n===2&&(s=2);const l=Ee.ParameterNode.create(r,s);return a&&(l.name=Ee.NameNode.create(a),l.name.parent=l,(0,Ee.extendRange)(l,a)),e&&this._consumeTokenIfType(10)&&(l.typeAnnotation=this._parseTypeAnnotation(s===1),l.typeAnnotation.parent=l,(0,Ee.extendRange)(l,l.typeAnnotation)),this._consumeTokenIfOperator(2)&&(l.defaultValue=this._parseTestExpression(!1),l.defaultValue.parent=l,(0,Ee.extendRange)(l,l.defaultValue),n>0&&this._addError(Pe.Localizer.Diagnostic.defaultValueNotAllowed(),l.defaultValue)),l}_parseWithStatement(e){const n=this._getKeywordToken(36);let i=[];const r=this._peekToken();let a=!1;if(r.type===13){const o=this._tokenIndex;this._suppressErrors(()=>{for(this._getNextToken();i.push(this._parseWithItem()),!(!this._consumeTokenIfType(12)||this._peekToken().type===14););this._peekToken().type===14&&this._peekToken(1).type===10&&(a=i.length!==1||i[0].target!==void 0),this._tokenIndex=o,i=[]})}for(a&&(this._consumeTokenIfType(13),this._getLanguageVersion()<ki.PythonVersion.V3_9&&this._addError(Pe.Localizer.Diagnostic.parenthesizedContextManagerIllegal(),r));i.push(this._parseWithItem()),!(!this._consumeTokenIfType(12)||this._peekToken().type===14););a&&(this._consumeTokenIfType(14)||this._addError(Pe.Localizer.Diagnostic.expectedCloseParen(),r));const s=this._parseSuite(this._isInFunction,!1,()=>{this._detectUnsupportedTypeAnnotationComment()}),l=Ee.WithNode.create(n,s);return e&&(l.isAsync=!0,l.asyncToken=e,(0,Ee.extendRange)(l,e)),l.withItems=i,i.forEach(o=>{o.parent=l}),l}_parseWithItem(){const e=this._parseTestExpression(!0),n=Ee.WithItemNode.create(e);return this._consumeTokenIfKeyword(1)&&(n.target=this._parseExpression(!1),n.target.parent=n,(0,Ee.extendRange)(n,n.target)),n}_parseDecorated(){const e=[];for(;this._peekOperatorType()===22;)e.push(this._parseDecorator());const n=this._peekToken();if(n.type===8)if(n.keywordType===3)if(this._getNextToken(),this._peekKeywordType()!==10)this._addError(Pe.Localizer.Diagnostic.expectedFunctionAfterAsync(),this._peekToken());else return this._parseFunctionDef(n,e);else{if(n.keywordType===10)return this._parseFunctionDef(void 0,e);if(n.keywordType===7)return this._parseClassDef(e)}return this._addError(Pe.Localizer.Diagnostic.expectedAfterDecorator(),this._peekToken()),Ee.ClassNode.createDummyForDecorators(e)}_parseDecorator(){const e=this._getNextToken();(0,Yi.assert)(e.operatorType===22);const n=this._parseTestExpression(!0);if(this._getLanguageVersion()<ki.PythonVersion.V3_9){let r=!1;(this._isNameOrMemberAccessExpression(n)||n.nodeType===9&&this._isNameOrMemberAccessExpression(n.leftExpression))&&(r=!0),r||this._addError(Pe.Localizer.Diagnostic.expectedDecoratorExpr(),n)}const i=Ee.DecoratorNode.create(e,n);return this._consumeTokenIfType(2)||(this._addError(Pe.Localizer.Diagnostic.expectedDecoratorNewline(),this._peekToken()),this._consumeTokensUntilType([2])),i}_isNameOrMemberAccessExpression(e){return e.nodeType===38?!0:e.nodeType===35?this._isNameOrMemberAccessExpression(e.leftExpression):!1}_parseClassDef(e){const n=this._getKeywordToken(7);let i=this._getTokenIfIdentifier();i||(this._addError(Pe.Localizer.Diagnostic.expectedClassName(),this._peekToken()),i=Of.IdentifierToken.create(0,0,"",void 0));let r=[];const a=this._peekToken();this._consumeTokenIfType(13)&&(r=this._parseArgList().args,this._consumeTokenIfType(14)||this._addError(Pe.Localizer.Diagnostic.expectedCloseParen(),a));const s=this._parseSuite(!1,this._parseOptions.skipFunctionAndClassBody),l=Ee.ClassNode.create(n,Ee.NameNode.create(i),s);return l.arguments=r,r.forEach(o=>{o.parent=l}),e&&(l.decorators=e,e.length>0&&(e.forEach(o=>{o.parent=l}),(0,Ee.extendRange)(l,e[0]))),l}_parsePassStatement(){return Ee.PassNode.create(this._getKeywordToken(30))}_parseBreakStatement(){const e=this._getKeywordToken(5);return this._isInLoop||this._addError(Pe.Localizer.Diagnostic.breakOutsideLoop(),e),Ee.BreakNode.create(e)}_parseContinueStatement(){const e=this._getKeywordToken(8);return this._isInLoop?this._isInFinally&&this._addError(Pe.Localizer.Diagnostic.continueInFinally(),e):this._addError(Pe.Localizer.Diagnostic.continueOutsideLoop(),e),Ee.ContinueNode.create(e)}_parseReturnStatement(){const e=this._getKeywordToken(32),n=Ee.ReturnNode.create(e);if(this._isInFunction||this._addError(Pe.Localizer.Diagnostic.returnOutsideFunction(),e),!this._isNextTokenNeverExpression()){const i=this._parseTestOrStarListAsExpression(!0,!0,2,Pe.Localizer.Diagnostic.expectedReturnExpr());this._reportConditionalErrorForStarTupleElement(i),n.returnExpression=i,n.returnExpression.parent=n,(0,Ee.extendRange)(n,i)}return n}_parseFromStatement(){const e=this._getKeywordToken(18),n=this._parseDottedModuleName(!0),i=Ee.ImportFromNode.create(e,n),r=n.leadingDots===0&&n.nameParts.length===1&&n.nameParts[0].value==="__future__",a=this._peekToken();if(!this._consumeTokenIfKeyword(21))this._addError(Pe.Localizer.Diagnostic.expectedImport(),this._peekToken()),n.hasTrailingDot||(i.missingImportKeyword=!0);else{(0,Ee.extendRange)(i,a);const l=this._peekToken();if(this._consumeTokenIfOperator(26))(0,Ee.extendRange)(i,l),i.isWildcardImport=!0,i.wildcardToken=l,this._containsWildcardImport=!0;else{const o=this._peekToken(),u=this._consumeTokenIfType(13);let f;for(;;){const y=this._getTokenIfIdentifier();if(!y)break;f=void 0;const p=Ee.ImportFromAsNode.create(Ee.NameNode.create(y));if(this._consumeTokenIfKeyword(1)){const v=this._getTokenIfIdentifier();v?(p.alias=Ee.NameNode.create(v),p.alias.parent=p,(0,Ee.extendRange)(p,v)):this._addError(Pe.Localizer.Diagnostic.expectedImportAlias(),this._peekToken())}i.imports.push(p),p.parent=i,(0,Ee.extendRange)(i,p),r&&this._futureImportMap.set(y.value,!0);const b=this._peekToken();if(!this._consumeTokenIfType(12))break;f=b}if(i.imports.length===0&&this._addError(Pe.Localizer.Diagnostic.expectedImportSymbols(),this._peekToken()),u){i.usesParens=!0;const y=this._peekToken();this._consumeTokenIfType(14)?(0,Ee.extendRange)(i,y):this._addError(Pe.Localizer.Diagnostic.expectedCloseParen(),o)}else f&&this._addError(Pe.Localizer.Diagnostic.trailingCommaInFromImport(),f)}}this._importedModules.push({nameNode:i.module,leadingDots:i.module.leadingDots,nameParts:i.module.nameParts.map(l=>l.value),importedSymbols:i.imports.map(l=>l.name.value)});let s=!1;if(i.module.nameParts.length===1){const l=i.module.nameParts[0].value;(l==="typing"||l==="typing_extensions")&&(s=!0)}if(s){const l=["Literal","TypeAlias","Annotated"];i.isWildcardImport?l.forEach(o=>{this._typingSymbolAliases.set(o,o)}):i.imports.forEach(o=>{var u;l.some(f=>f===o.name.value)&&this._typingSymbolAliases.set(((u=o.alias)===null||u===void 0?void 0:u.value)||o.name.value,o.name.value)})}return i}_parseImportStatement(){var e;const n=this._getKeywordToken(21),i=Ee.ImportNode.create(n);for(;;){const r=this._parseDottedModuleName(),a=Ee.ImportAsNode.create(r);if(this._consumeTokenIfKeyword(1)){const s=this._getTokenIfIdentifier();s?(a.alias=Ee.NameNode.create(s),a.alias.parent=a,(0,Ee.extendRange)(a,a.alias)):this._addError(Pe.Localizer.Diagnostic.expectedImportAlias(),this._peekToken())}if(a.module.leadingDots>0&&this._addError(Pe.Localizer.Diagnostic.relativeImportNotAllowed(),a.module),i.list.push(a),a.parent=i,this._importedModules.push({nameNode:a.module,leadingDots:a.module.leadingDots,nameParts:a.module.nameParts.map(s=>s.value),importedSymbols:void 0}),r.nameParts.length===1){const s=r.nameParts[0].value;(s==="typing"||s==="typing_extensions")&&this._typingImportAliases.push(((e=a.alias)===null||e===void 0?void 0:e.value)||s)}if(!this._consumeTokenIfType(12))break}return i.list.length>0&&(0,Ee.extendRange)(i,i.list[i.list.length-1]),i}_parseDottedModuleName(e=!1){var n;const i=Ee.ModuleNameNode.create(this._peekToken());for(;;){const r=(n=this._getTokenIfType(19))!==null&&n!==void 0?n:this._getTokenIfType(20);if(r)r.type===19?i.leadingDots+=3:i.leadingDots++,(0,Ee.extendRange)(i,r);else break}for(;;){const r=this._getTokenIfIdentifier();if(!r){(!e||i.leadingDots===0||i.nameParts.length>0)&&(this._addError(Pe.Localizer.Diagnostic.expectedModuleName(),this._peekToken()),i.hasTrailingDot=!0);break}const a=Ee.NameNode.create(r);i.nameParts.push(a),a.parent=i,(0,Ee.extendRange)(i,a);const s=this._peekToken();if(!this._consumeTokenIfType(20))break;(0,Ee.extendRange)(i,s)}return i}_parseGlobalStatement(){const e=this._getKeywordToken(19),n=Ee.GlobalNode.create(e);return n.nameList=this._parseNameList(),n.nameList.length>0&&(n.nameList.forEach(i=>{i.parent=n}),(0,Ee.extendRange)(n,n.nameList[n.nameList.length-1])),n}_parseNonlocalStatement(){const e=this._getKeywordToken(27),n=Ee.NonlocalNode.create(e);return n.nameList=this._parseNameList(),n.nameList.length>0&&(n.nameList.forEach(i=>{i.parent=n}),(0,Ee.extendRange)(n,n.nameList[n.nameList.length-1])),n}_parseNameList(){const e=[];for(;;){const n=this._getTokenIfIdentifier();if(!n){this._addError(Pe.Localizer.Diagnostic.expectedIdentifier(),this._peekToken());break}if(e.push(Ee.NameNode.create(n)),!this._consumeTokenIfType(12))break}return e}_parseRaiseStatement(){const e=this._getKeywordToken(31),n=Ee.RaiseNode.create(e);return this._isNextTokenNeverExpression()||(n.typeExpression=this._parseTestExpression(!0),n.typeExpression.parent=n,(0,Ee.extendRange)(n,n.typeExpression),this._consumeTokenIfKeyword(18)?(n.valueExpression=this._parseTestExpression(!0),n.valueExpression.parent=n,(0,Ee.extendRange)(n,n.valueExpression)):this._consumeTokenIfType(12)&&(n.valueExpression=this._parseTestExpression(!0),n.valueExpression.parent=n,(0,Ee.extendRange)(n,n.valueExpression),this._consumeTokenIfType(12)&&(n.tracebackExpression=this._parseTestExpression(!0),n.tracebackExpression.parent=n,(0,Ee.extendRange)(n,n.tracebackExpression)))),n}_parseAssertStatement(){const e=this._getKeywordToken(2),n=this._parseTestExpression(!0),i=Ee.AssertNode.create(e,n);if(this._consumeTokenIfType(12)){const r=this._parseTestExpression(!0);i.exceptionExpression=r,i.exceptionExpression.parent=i,(0,Ee.extendRange)(i,r)}return i}_parseDelStatement(){const e=this._getKeywordToken(11),n=this._parseExpressionList(!0);!n.parseError&&n.list.length===0&&this._addError(Pe.Localizer.Diagnostic.expectedDelExpr(),this._peekToken());const i=Ee.DelNode.create(e);return i.expressions=n.list,i.expressions.length>0&&(i.expressions.forEach(r=>{r.parent=i}),(0,Ee.extendRange)(i,i.expressions[i.expressions.length-1])),i}_parseYieldExpression(){const e=this._getKeywordToken(37),n=this._peekToken();if(this._consumeTokenIfKeyword(18))return this._getLanguageVersion()<ki.PythonVersion.V3_3&&this._addError(Pe.Localizer.Diagnostic.yieldFromIllegal(),n),Ee.YieldFromNode.create(e,this._parseTestExpression(!0));let i;return this._isNextTokenNeverExpression()||(i=this._parseTestOrStarListAsExpression(!0,!0,2,Pe.Localizer.Diagnostic.expectedYieldExpr()),this._reportConditionalErrorForStarTupleElement(i)),Ee.YieldNode.create(e,i)}_tryParseYieldExpression(){if(this._peekKeywordType()===37)return this._parseYieldExpression()}_parseSimpleStatement(){const e=Ee.StatementListNode.create(this._peekToken());for(;;){if(this._peekTokenType()===0){const r=this._getNextToken(),s=this._fileContents.substr(r.start,r.length).charCodeAt(0);this._addError(Pe.Localizer.Diagnostic.invalidTokenChars().format({text:`\\u${s.toString(16)}`}),r),this._consumeTokensUntilType([2]);break}const n=this._parseSmallStatement();if(e.statements.push(n),n.parent=e,(0,Ee.extendRange)(e,n),n.nodeType===0||!this._consumeTokenIfType(11))break;const i=this._peekTokenType();if(i===2||i===1)break}return this._consumeTokenIfType(2)||this._addError(Pe.Localizer.Diagnostic.expectedNewlineOrSemicolon(),this._peekToken()),e}_parseSmallStatement(){switch(this._peekKeywordType()){case 30:return this._parsePassStatement();case 5:return this._parseBreakStatement();case 8:return this._parseContinueStatement();case 32:return this._parseReturnStatement();case 18:return this._parseFromStatement();case 21:return this._parseImportStatement();case 19:return this._parseGlobalStatement();case 27:return this._parseNonlocalStatement();case 31:return this._parseRaiseStatement();case 2:return this._parseAssertStatement();case 11:return this._parseDelStatement();case 37:return this._parseYieldExpression()}return this._parseExpressionStatement()}_makeExpressionOrTuple(e,n){if(e.list.length===1&&!e.trailingComma)return e.list[0].nodeType===56&&this._addError(Pe.Localizer.Diagnostic.unpackOperatorNotAllowed(),e.list[0]),e.list[0];const i=e.list.length>0?e.list[0]:this._peekToken(-1),r=Ee.TupleNode.create(i,n);return r.expressions=e.list,e.list.length>0&&(e.list.forEach(a=>{a.parent=r}),(0,Ee.extendRange)(r,e.list[e.list.length-1])),r}_parseExpressionListAsPossibleTuple(e,n,i){if(this._isNextTokenNeverExpression())return this._addError(n,i),Ee.ErrorNode.create(i,e);const r=this._parseExpressionList(!0);return r.parseError?r.parseError:this._makeExpressionOrTuple(r,!1)}_parseTestListAsExpression(e,n){if(this._isNextTokenNeverExpression())return this._handleExpressionParseError(e,n);const i=this._parseTestExpressionList();return i.parseError?i.parseError:this._makeExpressionOrTuple(i,!1)}_parseTestOrStarListAsExpression(e,n,i,r){if(this._isNextTokenNeverExpression())return this._handleExpressionParseError(i,r);const a=this._parseTestOrStarExpressionList(e,n);return a.parseError?a.parseError:this._makeExpressionOrTuple(a,!1)}_parseExpressionList(e){return this._parseExpressionListGeneric(()=>this._parseExpression(e))}_parseTestExpressionList(){return this._parseExpressionListGeneric(()=>this._parseTestExpression(!1))}_parseTestOrStarExpressionList(e,n){const i=this._parseExpressionListGeneric(()=>this._parseTestOrStarExpression(e));if(!n&&!i.parseError){let r=!1;for(const a of i.list)if(a.nodeType===56){if(r){this._addError(Pe.Localizer.Diagnostic.duplicateUnpack(),a);break}r=!0}}return i}_parseExpression(e){const n=this._peekToken();return e&&this._consumeTokenIfOperator(26)?Ee.UnpackNode.create(n,this._parseExpression(!1)):this._parseBitwiseOrExpression()}_parseTestOrStarExpression(e){return this._peekOperatorType()===26?this._parseExpression(!0):this._parseTestExpression(e)}_parseTestExpression(e){if(this._peekKeywordType()===24)return this._parseLambdaExpression();const n=e?this._parseAssignmentExpression():this._parseOrTest();if(n.nodeType===0||!this._consumeTokenIfKeyword(20))return n;const i=this._parseOrTest();if(i.nodeType===0)return i;if(!this._consumeTokenIfKeyword(13))return this._handleExpressionParseError(1,Pe.Localizer.Diagnostic.expectedElse());const r=this._parseTestExpression(!0);return r.nodeType===0?r:Ee.TernaryNode.create(n,i,r)}_parseAssignmentExpression(e=!1){const n=this._parseOrTest();if(n.nodeType===0||n.nodeType!==38)return n;const i=this._peekToken();if(!this._consumeTokenIfOperator(35))return n;(!this._assignmentExpressionsAllowed||this._isParsingTypeAnnotation||e)&&this._addError(Pe.Localizer.Diagnostic.walrusNotAllowed(),i),this._getLanguageVersion()<ki.PythonVersion.V3_8&&this._addError(Pe.Localizer.Diagnostic.walrusIllegal(),i);const r=this._parseTestExpression(!1);return Ee.AssignmentExpressionNode.create(n,r)}_parseOrTest(){let e=this._parseAndTest();if(e.nodeType===0)return e;for(;;){const n=this._peekToken();if(!this._consumeTokenIfKeyword(29))break;const i=this._parseAndTest();e=this._createBinaryOperationNode(e,i,n,37)}return e}_parseAndTest(){let e=this._parseNotTest();if(e.nodeType===0)return e;for(;;){const n=this._peekToken();if(!this._consumeTokenIfKeyword(0))break;const i=this._parseNotTest();e=this._createBinaryOperationNode(e,i,n,36)}return e}_parseNotTest(){const e=this._peekToken();if(this._consumeTokenIfKeyword(28)){const n=this._parseNotTest();return this._createUnaryOperationNode(e,n,38)}return this._parseComparison()}_parseComparison(){let e=this._parseBitwiseOrExpression();if(e.nodeType===0)return e;for(;;){let n;const i=this._peekToken();if(Yy.Tokenizer.isOperatorComparison(this._peekOperatorType()))n=this._peekOperatorType(),n===19&&(this._addError(Pe.Localizer.Diagnostic.operatorLessOrGreaterDeprecated(),i),n=28),this._getNextToken();else if(this._consumeTokenIfKeyword(22))n=41;else if(this._consumeTokenIfKeyword(23))this._consumeTokenIfKeyword(28)?n=40:n=39;else if(this._peekKeywordType()===28){const a=this._peekToken(1);a.type===8&&a.keywordType===22&&(this._getNextToken(),this._getNextToken(),n=42)}if(n===void 0)break;const r=this._parseComparison();e=this._createBinaryOperationNode(e,r,i,n)}return e}_parseBitwiseOrExpression(){let e=this._parseBitwiseXorExpression();if(e.nodeType===0)return e;for(;;){const n=this._peekToken();if(!this._consumeTokenIfOperator(6))break;const i=this._parseBitwiseXorExpression();e=this._createBinaryOperationNode(e,i,n,6)}return e}_parseBitwiseXorExpression(){let e=this._parseBitwiseAndExpression();if(e.nodeType===0)return e;for(;;){const n=this._peekToken();if(!this._consumeTokenIfOperator(8))break;const i=this._parseBitwiseAndExpression();e=this._createBinaryOperationNode(e,i,n,8)}return e}_parseBitwiseAndExpression(){let e=this._parseShiftExpression();if(e.nodeType===0)return e;for(;;){const n=this._peekToken();if(!this._consumeTokenIfOperator(3))break;const i=this._parseShiftExpression();e=this._createBinaryOperationNode(e,i,n,3)}return e}_parseShiftExpression(){let e=this._parseArithmeticExpression();if(e.nodeType===0)return e;let n=this._peekToken(),i=this._peekOperatorType();for(;i===17||i===31;){this._getNextToken();const r=this._parseArithmeticExpression();e=this._createBinaryOperationNode(e,r,n,i),n=this._peekToken(),i=this._peekOperatorType()}return e}_parseArithmeticExpression(){let e=this._parseArithmeticTerm();if(e.nodeType===0)return e;let n=this._peekToken(),i=this._peekOperatorType();for(;i===0||i===33;){this._getNextToken();const r=this._parseArithmeticTerm();if(r.nodeType===0)return r;e=this._createBinaryOperationNode(e,r,n,i),n=this._peekToken(),i=this._peekOperatorType()}return e}_parseArithmeticTerm(){let e=this._parseArithmeticFactor();if(e.nodeType===0)return e;let n=this._peekToken(),i=this._peekOperatorType();for(;i===26||i===22||i===10||i===24||i===13;){this._getNextToken();const r=this._parseArithmeticFactor();e=this._createBinaryOperationNode(e,r,n,i),n=this._peekToken(),i=this._peekOperatorType()}return e}_parseArithmeticFactor(){const e=this._peekToken(),n=this._peekOperatorType();if(n===0||n===33||n===5){this._getNextToken();const a=this._parseArithmeticFactor();return this._createUnaryOperationNode(e,a,n)}const i=this._parseAtomExpression();if(i.nodeType===0)return i;const r=this._peekToken();if(this._consumeTokenIfOperator(29)){const a=this._parseArithmeticFactor();return this._createBinaryOperationNode(i,a,r,29)}return i}_isTypingAnnotation(e,n){if(e.nodeType===38){if(this._typingSymbolAliases.get(e.value)===n)return!0}else if(e.nodeType===35&&e.leftExpression.nodeType===38&&e.memberName.value===n){const i=e.leftExpression.value;return this._typingImportAliases.some(r=>r===i)}return!1}_parseAtomExpression(){let e;this._peekKeywordType()===4&&!this._isParsingTypeAnnotation&&(e=this._getKeywordToken(4),this._getLanguageVersion()<ki.PythonVersion.V3_5&&this._addError(Pe.Localizer.Diagnostic.awaitIllegal(),e));let n=this._parseAtom();if(n.nodeType===0)return n;for(;;){const i=this._peekToken();if(this._consumeTokenIfType(13)){const r=this._isParsingTypeAnnotation;this._isParsingTypeAnnotation=!1;const a=this._parseArgList(),s=Ee.CallNode.create(n,a.args,a.trailingComma);(a.args.length>1||a.trailingComma)&&a.args.forEach(u=>{u.valueExpression.nodeType===32&&(u.valueExpression.isParenthesized||this._addError(Pe.Localizer.Diagnostic.generatorNotParenthesized(),u.valueExpression))});const l=this._peekToken();let o=!1;if(this._consumeTokenIfType(14)?((0,Ee.extendRange)(s,l),o=!0):(this._addError(Pe.Localizer.Diagnostic.expectedCloseParen(),i),this._consumeTokensUntilType([2]),(0,Ee.extendRange)(s,this._peekToken())),this._isParsingTypeAnnotation=r,this._isParsingTypeAnnotation){const u=new uu.DiagnosticAddendum;n.nodeType===38&&n.value==="type"&&(u.addMessage(Pe.Localizer.DiagnosticAddendum.useTypeInstead()),this._addError(Pe.Localizer.Diagnostic.typeCallNotAllowed()+u.getString(),s))}if(n=s,n.maxChildDepth!==void 0&&n.maxChildDepth>=Al&&(n=Ee.ErrorNode.create(n,14),this._addError(Pe.Localizer.Diagnostic.maxParseDepthExceeded(),n)),!o)break}else if(this._consumeTokenIfType(15)){const r=this._isParsingIndexTrailer,a=this._isParsingTypeAnnotation;(this._isTypingAnnotation(n,"Literal")||this._isTypingAnnotation(n,"Annotated"))&&(this._isParsingTypeAnnotation=!1),this._isParsingIndexTrailer=!0;const s=this._parseSubscriptList();this._isParsingTypeAnnotation=a,this._isParsingIndexTrailer=r;const l=this._peekToken(),o=Ee.IndexNode.create(n,s.list,s.trailingComma,l);(0,Ee.extendRange)(o,o),this._consumeTokenIfType(16)||this._handleExpressionParseError(6,Pe.Localizer.Diagnostic.expectedCloseBracket(),i,o),n=o,n.maxChildDepth!==void 0&&n.maxChildDepth>=Al&&(n=Ee.ErrorNode.create(n,14),this._addError(Pe.Localizer.Diagnostic.maxParseDepthExceeded(),n))}else if(this._consumeTokenIfType(20)){const r=this._getTokenIfIdentifier();if(!r)return this._handleExpressionParseError(7,Pe.Localizer.Diagnostic.expectedMemberName(),i,n,[8]);n=Ee.MemberAccessNode.create(n,Ee.NameNode.create(r)),n.maxChildDepth!==void 0&&n.maxChildDepth>=Al&&(n=Ee.ErrorNode.create(n,14),this._addError(Pe.Localizer.Diagnostic.maxParseDepthExceeded(),n))}else break}return e?Ee.AwaitNode.create(e,n):n}_parseSubscriptList(){const e=[];let n=!1,i=!1;for(;;){const r=this._peekToken();if(r.type!==10&&this._isNextTokenNeverExpression())break;let a=0;this._consumeTokenIfOperator(26)?a=1:this._consumeTokenIfOperator(29)&&(a=2);const s=this._tokenIndex;let l=this._parsePossibleSlice(),o;if(a===0)if(this._consumeTokenIfOperator(2)){const f=l;l=this._parsePossibleSlice(),f.nodeType===38?o=f.token:this._addError(Pe.Localizer.Diagnostic.expectedParamName(),f)}else l.nodeType===38&&this._peekOperatorType()===35&&(this._tokenIndex=s,l=this._parseTestExpression(!0),!this._parseOptions.isStubFile&&this._getLanguageVersion()<ki.PythonVersion.V3_10&&this._addError(Pe.Localizer.Diagnostic.assignmentExprInSubscript(),l));const u=Ee.ArgumentNode.create(r,l,a);if(o&&(u.name=Ee.NameNode.create(o),u.name.parent=u),u.name?n=!0:n&&u.argumentCategory===0&&this._addError(Pe.Localizer.Diagnostic.positionArgAfterNamedArg(),u),e.push(u),u.name&&this._addError(Pe.Localizer.Diagnostic.keywordSubscriptIllegal(),u.name),a!==0){const f=this._parseOptions.isStubFile||this._getLanguageVersion()>=ki.PythonVersion.V3_11;(a===2||!f)&&this._addError(Pe.Localizer.Diagnostic.unpackedSubscriptIllegal(),u)}if(!this._consumeTokenIfType(12)){i=!1;break}i=!0}if(e.length===0){const r=this._handleExpressionParseError(3,Pe.Localizer.Diagnostic.expectedSliceIndex(),void 0,void 0,[16]);e.push(Ee.ArgumentNode.create(this._peekToken(),r,0))}return{list:e,trailingComma:i}}_parsePossibleSlice(){const e=this._peekToken(),n=[void 0,void 0,void 0];let i=0,r=!1;for(;;){const l=this._peekTokenType();if(l===16||l===12||(l!==10&&(n[i]=this._parseTestExpression(!1)),i++,i>=3||!this._consumeTokenIfType(10)))break;r=!0}if(!r)return n[0]?n[0]:Ee.ErrorNode.create(this._peekToken(),3);const a=Ee.SliceNode.create(e);a.startValue=n[0],a.startValue&&(a.startValue.parent=a),a.endValue=n[1],a.endValue&&(a.endValue.parent=a),a.stepValue=n[2],a.stepValue&&(a.stepValue.parent=a);const s=n[2]||n[1]||n[0];return s&&(0,Ee.extendRange)(a,s),a}_parseArgList(){const e=[];let n=!1,i=!1;for(;;){const r=this._peekTokenType();if(r===14||r===2||r===1)break;i=!1;const a=this._parseArgument();if(a.name?n=!0:n&&a.argumentCategory===0&&this._addError(Pe.Localizer.Diagnostic.positionArgAfterNamedArg(),a),e.push(a),!this._consumeTokenIfType(12))break;i=!0}return{args:e,trailingComma:i}}_parseArgument(){const e=this._peekToken();let n=0;this._consumeTokenIfOperator(26)?n=1:this._consumeTokenIfOperator(29)&&(n=2);let i=this._parseTestExpression(!0),r;if(n===0)if(this._consumeTokenIfOperator(2)){const s=i;i=this._parseTestExpression(!1),s.nodeType===38?r=s.token:this._addError(Pe.Localizer.Diagnostic.expectedParamName(),s)}else{const s=this._tryParseListComprehension(i);s&&(i=s)}const a=Ee.ArgumentNode.create(e,i,n);return r&&(a.name=Ee.NameNode.create(r),a.name.parent=a),a}_parseAtom(){const e=this._peekToken();if(e.type===19)return Ee.EllipsisNode.create(this._getNextToken());if(e.type===6)return Ee.NumberNode.create(this._getNextToken());if(e.type===7)return Ee.NameNode.create(this._getNextToken());if(e.type===5)return this._parseStringList();if(e.type===22){this._getNextToken(),this._addError(Pe.Localizer.Diagnostic.backticksIllegal(),e);const n=this._parseTestListAsExpression(2,Pe.Localizer.Diagnostic.expectedExpr());return this._consumeTokenIfType(22),n}if(e.type===13){const n=this._parseTupleAtom();if(n.nodeType===52&&this._isParsingTypeAnnotation&&!this._isParsingIndexTrailer){const i=new uu.DiagnosticAddendum;i.addMessage(Pe.Localizer.DiagnosticAddendum.useTupleInstead()),this._addError(Pe.Localizer.Diagnostic.tupleInAnnotation()+i.getString(),n)}return n.nodeType===7&&(n.parenthesized=!0),n.nodeType===48&&(n.isParenthesized=!0),n.nodeType===32&&(n.isParenthesized=!0),n}else if(e.type===15){const n=this._parseListAtom();if(this._isParsingTypeAnnotation&&!this._isParsingIndexTrailer){const i=new uu.DiagnosticAddendum;i.addMessage(Pe.Localizer.DiagnosticAddendum.useListInstead()),this._addError(Pe.Localizer.Diagnostic.listInAnnotation()+i.getString(),n)}return n}else if(e.type===17){const n=this._parseDictionaryOrSetAtom();if(this._isParsingTypeAnnotation){const i=new uu.DiagnosticAddendum;i.addMessage(Pe.Localizer.DiagnosticAddendum.useDictInstead()),this._addError(Pe.Localizer.Diagnostic.dictInAnnotation()+i.getString(),n)}return n}if(e.type===8){const n=e;if(n.keywordType===15||n.keywordType===33||n.keywordType===9||n.keywordType===26)return Ee.ConstantNode.create(this._getNextToken());const i=this._getTokenIfIdentifier();if(i)return Ee.NameNode.create(i)}return this._handleExpressionParseError(2,Pe.Localizer.Diagnostic.expectedExpr())}_handleExpressionParseError(e,n,i,r,a){this._addError(n,i!=null?i:this._peekToken());const s=Ee.ErrorNode.create(this._peekToken(),e,r),l=[2];return a&&(0,wz.appendArray)(l,a),this._consumeTokensUntilType(l),s}_parseLambdaExpression(e=!0){const n=this._getKeywordToken(24),i=this._parseVarArgsList(10,!1);this._consumeTokenIfType(10)||this._addError(Pe.Localizer.Diagnostic.expectedColon(),this._peekToken());let r;e?r=this._parseTestExpression(!1):r=this._tryParseLambdaExpression(!1)||this._parseOrTest();const a=Ee.LambdaNode.create(n,r);return a.parameters=i,i.forEach(s=>{s.parent=a}),a}_tryParseLambdaExpression(e=!0){if(this._peekKeywordType()===24)return this._parseLambdaExpression(e)}_parseTupleAtom(){var e;const n=this._getNextToken();(0,Yi.assert)(n.type===13);const i=this._tryParseYieldExpression();if(i)return this._peekTokenType()!==14?this._handleExpressionParseError(8,Pe.Localizer.Diagnostic.expectedCloseParen(),n,i):((0,Ee.extendRange)(i,this._getNextToken()),i);const r=this._parseTestListWithComprehension(),a=this._makeExpressionOrTuple(r,!0),s=r.list.length===1&&!r.trailingComma;if(s||(0,Ee.extendRange)(a,n),this._peekTokenType()!==14)return this._handleExpressionParseError(8,Pe.Localizer.Diagnostic.expectedCloseParen(),n,(e=r.parseError)!==null&&e!==void 0?e:a);{const l=this._getNextToken();s||(0,Ee.extendRange)(a,l)}return a}_parseListAtom(){var e;const n=this._getNextToken();(0,Yi.assert)(n.type===15);const i=this._parseTestListWithComprehension(),r=this._peekToken();if(!this._consumeTokenIfType(16))return this._handleExpressionParseError(9,Pe.Localizer.Diagnostic.expectedCloseBracket(),n,(e=i.parseError)!==null&&e!==void 0?e:a());return a();function a(){const s=Ee.ListNode.create(n);return r&&(0,Ee.extendRange)(s,r),i.list.length>0&&(i.list.forEach(l=>{l.parent=s}),(0,Ee.extendRange)(s,i.list[i.list.length-1])),s.entries=i.list,s}}_parseTestListWithComprehension(){let e=!1;return this._parseExpressionListGeneric(()=>{let n=this._parseTestOrStarExpression(!0);const i=this._tryParseListComprehension(n);return i&&(n=i,e=!0),n},()=>this._isNextTokenNeverExpression(),()=>e)}_parseDictionaryOrSetAtom(){const e=this._getNextToken();(0,Yi.assert)(e.type===17);const n=[],i=[];let r=!1,a=!1,s=!1,l=!0,o;for(;this._peekTokenType()!==18;){o=void 0;let y,p,b;const v=this._peekToken();if(this._consumeTokenIfOperator(29)?y=this._parseExpression(!1):(p=this._parseTestOrStarExpression(!0),this._consumeTokenIfType(10)&&(b=this._parseTestExpression(!1))),p&&b)if(p.nodeType===56&&this._addError(Pe.Localizer.Diagnostic.unpackInDict(),p),a)this._addError(Pe.Localizer.Diagnostic.keyValueInSet(),b);else{const m=Ee.DictionaryKeyEntryNode.create(p,b);let V=m;const F=this._tryParseListComprehension(m);F&&(V=F,s=!0,l||this._addError(Pe.Localizer.Diagnostic.comprehensionInDict(),V)),n.push(V),r=!0}else if(y)if(a)this._addError(Pe.Localizer.Diagnostic.unpackInSet(),y);else{const m=Ee.DictionaryExpandEntryNode.create(y);(0,Ee.extendRange)(m,v);let V=m;const F=this._tryParseListComprehension(m);F&&(V=F,s=!0,l||this._addError(Pe.Localizer.Diagnostic.comprehensionInDict(),y)),n.push(V),r=!0}else if((0,Yi.assert)(p!==void 0),p)if(r){const m=Ee.ErrorNode.create(this._peekToken(),13),V=Ee.DictionaryKeyEntryNode.create(p,m);n.push(V),this._addError(Pe.Localizer.Diagnostic.dictKeyValuePairs(),p)}else{const m=this._tryParseListComprehension(p);m&&(p=m,s=!0,l||this._addError(Pe.Localizer.Diagnostic.comprehensionInSet(),p)),i.push(p),a=!0}if(s||this._peekTokenType()!==12)break;o=this._getNextToken(),l=!1}let u=this._peekToken();if(this._consumeTokenIfType(18)||(this._addError(Pe.Localizer.Diagnostic.expectedCloseBrace(),e),u=void 0),a){const y=Ee.SetNode.create(e);return u&&(0,Ee.extendRange)(y,u),i.length>0&&(0,Ee.extendRange)(y,i[i.length-1]),i.forEach(p=>{p.parent=y}),y.entries=i,y}const f=Ee.DictionaryNode.create(e);return o&&(f.trailingCommaToken=o,(0,Ee.extendRange)(f,o)),u&&(0,Ee.extendRange)(f,u),n.length>0&&(n.forEach(y=>{y.parent=f}),(0,Ee.extendRange)(f,n[n.length-1])),f.entries=n,f}_parseExpressionListGeneric(e,n=()=>this._isNextTokenNeverExpression(),i=()=>!1){let r=!1;const a=[];let s;for(;!n();){const l=e();if(l.nodeType===0){s=l;break}if(a.push(l),i())break;if(!this._consumeTokenIfType(12)){r=!1;break}r=!0}return{trailingComma:r,list:a,parseError:s}}_parseExpressionStatement(){let e=this._parseTestOrStarListAsExpression(!1,!1,2,Pe.Localizer.Diagnostic.expectedExpr()),n;if(e.nodeType===0)return e;if(this._consumeTokenIfType(10)){if(n=this._parseTypeAnnotation(),e=Ee.TypeAnnotationNode.create(e,n),!this._parseOptions.isStubFile&&this._getLanguageVersion()<ki.PythonVersion.V3_6&&this._addError(Pe.Localizer.Diagnostic.varAnnotationIllegal(),n),!this._consumeTokenIfOperator(2))return e;const i=this._isTypingAnnotation(n,"TypeAlias"),r=this._isParsingTypeAnnotation;i&&(this._isParsingTypeAnnotation=!0);const a=this._tryParseYieldExpression()||this._parseTestOrStarListAsExpression(!1,!0,2,Pe.Localizer.Diagnostic.expectedAssignRightHandExpr());return this._isParsingTypeAnnotation=r,Ee.AssignmentNode.create(e,a)}if(this._consumeTokenIfOperator(2))return this._parseChainAssignments(e);if(Yy.Tokenizer.isOperatorAssignment(this._peekOperatorType())){const i=this._getNextToken(),r=this._tryParseYieldExpression()||this._parseTestListAsExpression(2,Pe.Localizer.Diagnostic.expectedBinaryRightHandExpr()),a=Object.assign({},e);return a.id=(0,Ee.getNextNodeId)(),Ee.AugmentedAssignmentNode.create(e,r,i.operatorType,a)}return e}_parseChainAssignments(e){let n=this._tryParseYieldExpression()||this._parseTestOrStarListAsExpression(!1,!0,2,Pe.Localizer.Diagnostic.expectedAssignRightHandExpr());if(n.nodeType===0)return Ee.AssignmentNode.create(e,n);if(this._consumeTokenIfOperator(2)&&(n=this._parseChainAssignments(n),n.nodeType===0))return n;const i=Ee.AssignmentNode.create(e,n),r=this._parseVariableTypeAnnotationComment();return r&&(i.typeAnnotationComment=r,i.typeAnnotationComment.parent=i,(0,Ee.extendRange)(i,i.typeAnnotationComment)),i}_parseFunctionTypeAnnotation(){const e=this._peekToken();if(!this._consumeTokenIfType(13)){this._addError(Pe.Localizer.Diagnostic.expectedOpenParen(),this._peekToken());return}let n=[];for(;;){const a=this._peekTokenType();if(a===14||a===2||a===1)break;this._consumeTokenIfOperator(26)||this._consumeTokenIfOperator(29);const s=this._parseTypeAnnotation();if(n.push(s),!this._consumeTokenIfType(12))break}if(this._consumeTokenIfType(14)||(this._addError(Pe.Localizer.Diagnostic.expectedCloseParen(),e),this._consumeTokensUntilType([10])),!this._consumeTokenIfType(21)){this._addError(Pe.Localizer.Diagnostic.expectedArrow(),this._peekToken());return}const i=this._parseTypeAnnotation();let r=!1;return n.length===1&&n[0].nodeType===18&&(n=[],r=!0),Ee.FunctionAnnotationNode.create(e,r,n,i)}_parseTypeAnnotation(e=!1){const n=this._isParsingTypeAnnotation;this._isParsingTypeAnnotation=!0;const i=this._peekToken(),r=this._consumeTokenIfOperator(26);r&&(e?!this._parseOptions.isStubFile&&this._getLanguageVersion()<ki.PythonVersion.V3_11&&this._addError(Pe.Localizer.Diagnostic.unpackedSubscriptIllegal(),i):this._addError(Pe.Localizer.Diagnostic.unpackInAnnotation(),i));let a=this._parseTestExpression(!1);return r&&e&&(a=Ee.UnpackNode.create(i,a)),this._isParsingTypeAnnotation=n,a}_reportStringTokenErrors(e,n){e.flags&65536&&this._addError(Pe.Localizer.Diagnostic.stringUnterminated(),e),n.nonAsciiInBytes&&this._addError(Pe.Localizer.Diagnostic.stringNonAsciiBytes(),e),e.flags&64&&(this._getLanguageVersion()<ki.PythonVersion.V3_6&&this._addError(Pe.Localizer.Diagnostic.formatStringIllegal(),e),e.flags&32&&this._addError(Pe.Localizer.Diagnostic.formatStringBytes(),e),e.flags&16&&this._addError(Pe.Localizer.Diagnostic.formatStringUnicode(),e))}_makeStringNode(e){const n=Hy.getUnescapedString(e);return this._reportStringTokenErrors(e,n),Ee.StringNode.create(e,n.value,n.unescapeErrors.length>0)}_getTypeAnnotationCommentText(){if(this._tokenIndex===0)return;const e=this._tokenizerOutput.tokens.getItemAt(this._tokenIndex-1),n=this._tokenizerOutput.tokens.getItemAt(this._tokenIndex);if(e.start+e.length===n.start)return;const i=this._fileContents.substring(e.start+e.length,n.start),r=/^(\s*#\s*type:\s*)([^\r\n]*)/,a=i.match(r);if(!a)return;const s=a[2];if(s.trim().match(/^ignore(\s|\[|$)/))return;const l=e.start+e.length+a[1].length;return Of.StringToken.create(l,s.length,0,s,0,void 0)}_detectUnsupportedTypeAnnotationComment(){const e=this._getTypeAnnotationCommentText();!e||this._addError(Pe.Localizer.Diagnostic.annotationNotSupported(),e)}_parseVariableTypeAnnotationComment(){const e=this._getTypeAnnotationCommentText();if(!e)return;const n=this._makeStringNode(e),i=Ee.StringListNode.create([n]),a=new tc().parseTextExpression(this._fileContents,e.start,e.length,this._parseOptions,1,void 0,this._typingSymbolAliases);if(a.diagnostics.forEach(s=>{this._addError(s.message,i)}),!!a.parseTree)return(0,Yi.assert)(a.parseTree.nodeType!==62),a.parseTree}_parseFunctionTypeAnnotationComment(e,n){const i=this._makeStringNode(e),r=Ee.StringListNode.create([i]),s=new tc().parseTextExpression(this._fileContents,e.start,e.length,this._parseOptions,2,void 0,this._typingSymbolAliases);if(s.diagnostics.forEach(o=>{this._addError(o.message,r)}),!s.parseTree||s.parseTree.nodeType!==62)return;const l=s.parseTree;n.functionAnnotationComment=l,l.parent=n,(0,Ee.extendRange)(n,l)}_parseFormatStringSegment(e,n,i,r){(0,Yi.assert)(n.isExpression);const s=new tc().parseTextExpression(this._fileContents,e.start+e.prefixLength+e.quoteMarkLength+n.offset+i,r,this._parseOptions,0,1,this._typingSymbolAliases);return s.diagnostics.forEach(l=>{const o=(l.range?(0,Ky.convertPositionToOffset)(l.range.start,s.lines):e.start)||e.start,u=(l.range?((0,Ky.convertPositionToOffset)(l.range.end,s.lines)||0)+1:e.start+e.length)||e.start+e.length,f={start:o,length:u-o};this._addError(l.message,f)}),s.parseTree}_parseFormatString(e){const n=Hy.getUnescapedString(e);this._reportStringTokenErrors(e,n);const i=[];for(const r of n.formatStringSegments)if(r.isExpression){const a=this._getFormatStringExpressionLength(r.value.trimEnd()),s=this._parseFormatStringSegment(e,r,0,a);s&&((0,Yi.assert)(s.nodeType!==62),i.push(s));const l=r.value.substr(a);let o=0,u=0;for(let f=0;f<l.length;f++)if(l.charCodeAt(f)===123)o===0&&(u=f+1),o++;else if(l.charCodeAt(f)===125&&o>0&&(o--,o===0)){const y=this._getFormatStringExpressionLength(r.value.substr(a+u,f-u)),p=this._parseFormatStringSegment(e,r,a+u,y);p&&((0,Yi.assert)(p.nodeType!==62),i.push(p))}}return Ee.FormatStringNode.create(e,n.value,n.unescapeErrors.length>0,i)}_getFormatStringExpressionLength(e){let n=0;const i=[];let r=0,a=0,s=0,l;for(;n<e.length;){const o=e[n],u=i.length>0||r>0||a>0||s>0,f=i.length>0;if(o==="=")l=n;else{if(o===":"){if(!u)break}else if(o==="!"){if(!u&&(n===e.length-1||e[n+1]!=="="))break}else if(o==="'"||o==='"'){let y=o;n+2<e.length&&e[n+1]===o&&e[n+2]===o&&(y=o+o+o,n+=2),i.length>0&&i[i.length-1]===y?i.pop():i.length===0&&i.push(y)}else o==="("?f||a++:o===")"?!f&&a>0&&a--:o==="{"?f||r++:o==="}"?!f&&r>0&&r--:o==="["?f||s++:o==="]"&&!f&&s>0&&s--;o!==" "&&(l=void 0)}n++}return this._parseOptions.pythonVersion>=ki.PythonVersion.V3_8&&l!==void 0&&(n=l),n}_createBinaryOperationNode(e,n,i,r){return e.maxChildDepth!==void 0&&e.maxChildDepth>=Al&&(e=Ee.ErrorNode.create(e,14),this._addError(Pe.Localizer.Diagnostic.maxParseDepthExceeded(),e)),n.maxChildDepth!==void 0&&n.maxChildDepth>=Al&&(n=Ee.ErrorNode.create(n,14),this._addError(Pe.Localizer.Diagnostic.maxParseDepthExceeded(),n)),Ee.BinaryOperationNode.create(e,n,i,r)}_createUnaryOperationNode(e,n,i){return n.maxChildDepth!==void 0&&n.maxChildDepth>=Al&&(n=Ee.ErrorNode.create(n,14),this._addError(Pe.Localizer.Diagnostic.maxParseDepthExceeded(),n)),Ee.UnaryOperationNode.create(e,n,i)}_parseStringList(){const e=[];for(;this._peekTokenType()===5;){const i=this._getNextToken();i.flags&64?e.push(this._parseFormatString(i)):e.push(this._makeStringNode(i))}const n=Ee.StringListNode.create(e);if(this._isParsingTypeAnnotation)if(n.strings.length>1)this._addError(Pe.Localizer.Diagnostic.annotationSpansStrings(),n);else if(n.strings[0].token.flags&64)this._addError(Pe.Localizer.Diagnostic.annotationFormatString(),n);else{const i=n.strings[0].token,a=Hy.getUnescapedString(n.strings[0].token).value,s=i.start,l=i.prefixLength+i.quoteMarkLength;if(a.length!==i.length-l-i.quoteMarkLength)this._addError(Pe.Localizer.Diagnostic.annotationStringEscape(),n);else{const u=new tc().parseTextExpression(this._fileContents,s+l,a.length,this._parseOptions,1,(n.strings[0].token.flags&4)!==0?1:0,this._typingSymbolAliases);(u.diagnostics.length===0||this._parseOptions.reportErrorsForParsedStringContents)&&(u.diagnostics.forEach(f=>{this._addError(f.message,n)}),u.parseTree&&((0,Yi.assert)(u.parseTree.nodeType!==62),n.typeAnnotation=u.parseTree,n.typeAnnotation.parent=n))}}return n}_reportConditionalErrorForStarTupleElement(e){if(e.nodeType===52&&!e.enclosedInParens&&!(this._parseOptions.pythonVersion>=ki.PythonVersion.V3_8)){for(const n of e.expressions)if(n.nodeType===56){this._addError(Pe.Localizer.Diagnostic.unpackTuplesIllegal(),n);return}}}_isNextTokenNeverExpression(){switch(this._peekToken().type){case 8:{switch(this._peekKeywordType()){case 17:case 22:case 20:return!0}break}case 9:{switch(this._peekOperatorType()){case 1:case 34:case 27:case 11:case 25:case 4:case 7:case 9:case 18:case 32:case 30:case 14:case 2:return!0}break}case 3:case 4:case 2:case 1:case 11:case 14:case 16:case 18:case 12:case 10:return!0}return!1}_disallowAssignmentExpression(e){const n=this._assignmentExpressionsAllowed;this._assignmentExpressionsAllowed=!1,e(),this._assignmentExpressionsAllowed=n}_getNextToken(){const e=this._tokenizerOutput.tokens.getItemAt(this._tokenIndex);return this._atEof()||this._tokenIndex++,e}_atEof(){return this._tokenIndex>=this._tokenizerOutput.tokens.count-1}_peekToken(e=0){return this._tokenIndex+e<0?this._tokenizerOutput.tokens.getItemAt(0):this._tokenIndex+e>=this._tokenizerOutput.tokens.count?this._tokenizerOutput.tokens.getItemAt(this._tokenizerOutput.tokens.count-1):this._tokenizerOutput.tokens.getItemAt(this._tokenIndex+e)}_peekTokenType(){return this._peekToken().type}_peekKeywordType(){const e=this._peekToken();if(e.type===8)return e.keywordType}_peekOperatorType(){const e=this._peekToken();if(e.type===9)return e.operatorType}_getTokenIfIdentifier(){const e=this._peekToken();if(e.type===7)return this._getNextToken();if(e.type===0)return this._getNextToken(),this._addError(Pe.Localizer.Diagnostic.invalidIdentifierChar(),e),Of.IdentifierToken.create(e.start,e.length,"",e.comments);if(e.type===8){const n=this._peekKeywordType();if([9,25,6].find(r=>r===n)){const r=this._fileContents.substr(e.start,e.length);return this._getNextToken(),Of.IdentifierToken.create(e.start,e.length,r,e.comments)}}}_consumeTokensUntilType(e){for(;;){const n=this._peekToken();if(e.some(i=>i===n.type))return!0;if(n.type===1)return!1;this._getNextToken()}}_getTokenIfType(e){if(this._peekTokenType()===e)return this._getNextToken()}_consumeTokenIfType(e){return!!this._getTokenIfType(e)}_consumeTokenIfKeyword(e){return this._peekKeywordType()===e?(this._getNextToken(),!0):!1}_consumeTokenIfOperator(e){return this._peekOperatorType()===e?(this._getNextToken(),!0):!1}_getKeywordToken(e){const n=this._getNextToken();return(0,Yi.assert)(n.type===8),(0,Yi.assert)(n.keywordType===e),n}_getLanguageVersion(){return this._parseOptions.pythonVersion}_suppressErrors(e){const n=this._areErrorsSuppressed;try{this._areErrorsSuppressed=!0,e()}finally{this._areErrorsSuppressed=n}}_addError(e,n){(0,Yi.assert)(n!==void 0),this._areErrorsSuppressed||this._diagSink.addError(e,(0,Ky.convertOffsetsToRange)(n.start,n.start+n.length,this._tokenizerOutput.lines))}}al.Parser=tc;var no={},Ld={};Object.defineProperty(Ld,"__esModule",{value:!0});Ld.isAnnotationEvaluationPostponed=void 0;function Ez(t){return t.futureImports.get("annotations")!==void 0||t.isStubFile}Ld.isAnnotationEvaluationPostponed=Ez;var lm={};Object.defineProperty(lm,"__esModule",{value:!0});lm.Scope=void 0;const Fz=qt,kz=Li;class Dz{constructor(e,n){this.symbolTable=new Map,this.notLocalBindings=new Map,this.type=e,this.parent=n}getGlobalScope(){let e=this,n=!1;for(;e;){if(e.type===3||e.type===4)return{scope:e,isBeyondExecutionScope:n};e.type===1&&(n=!0),e=e.parent}return(0,Fz.fail)("failed to find scope"),{scope:this,isBeyondExecutionScope:n}}isIndependentlyExecutable(){return this.type===3||this.type===1}lookUpSymbol(e){return this.symbolTable.get(e)}lookUpSymbolRecursive(e,n=!1,i=!1){const r=this.symbolTable.get(e);if(r){if(n&&r.isExternallyHidden())return;const l=r.getDeclarations();if(l.length===0||l.some(o=>o.type!==1||!o.isDefinedByMemberAccess))return{symbol:r,isOutsideCallerModule:n,isBeyondExecutionScope:i,scope:this}}let a,s=i||this.isIndependentlyExecutable();if(this.notLocalBindings.get(e)===1){const l=this.getGlobalScope();a=l.scope,l.isBeyondExecutionScope&&(s=!0)}else a=this.parent;if(a)return a.lookUpSymbolRecursive(e,n||this.type===3,s)}addSymbol(e,n){const i=new kz.Symbol(n);return this.symbolTable.set(e,i),i}getBindingType(e){return this.notLocalBindings.get(e)}setBindingType(e,n){return this.notLocalBindings.set(e,n)}setSlotsNames(e){this.slotsNames=e}getSlotsNames(){return this.slotsNames}}lm.Scope=Dz;var ya={};Object.defineProperty(ya,"__esModule",{value:!0});ya.evaluateStaticBoolLikeExpression=ya.evaluateStaticBoolExpression=void 0;const hc=Ad;function Uu(t,e,n,i,r){if(t.nodeType===4)return Uu(t.rightExpression,e,n,i,r);if(t.nodeType===55){if(t.operator===38){const a=fD(t.expression,e,n,i,r);if(a!==void 0)return!a}}else if(t.nodeType===7){if(t.operator===37||t.operator===36){const a=Uu(t.leftExpression,e,n,i,r),s=Uu(t.rightExpression,e,n,i,r);return a===void 0||s===void 0?void 0:t.operator===37?a||s:a&&s}if(JS(t.leftExpression,r)&&t.rightExpression.nodeType===52){const a=Pz(t.rightExpression);return QS(t.operator,e.pythonVersion,a)}else{if(t.leftExpression.nodeType===24&&JS(t.leftExpression.baseExpression,r)&&t.leftExpression.items.length===1&&!t.leftExpression.trailingComma&&!t.leftExpression.items[0].name&&t.leftExpression.items[0].argumentCategory===0&&t.leftExpression.items[0].valueExpression.nodeType===40&&!t.leftExpression.items[0].valueExpression.isImaginary&&t.leftExpression.items[0].valueExpression.value===0&&t.rightExpression.nodeType===40)return QS(t.operator,Math.floor(e.pythonVersion/256),t.rightExpression.value);if(Az(t.leftExpression,r)&&t.rightExpression.nodeType===48){const a=t.rightExpression.strings.map(l=>l.value).join(""),s=Nz(e);return Qy(t.operator,s,a)}else if(Mz(t.leftExpression)&&t.rightExpression.nodeType===48){const a=t.rightExpression.strings.map(l=>l.value).join(""),s=Rz(e);if(s!==void 0)return Qy(t.operator,s,a)}else if(t.leftExpression.nodeType===38&&t.rightExpression.nodeType===48){const a=n.get(t.leftExpression.value);if(a!==void 0&&typeof a=="string"){const s=t.rightExpression.strings.map(l=>l.value).join("");return Qy(t.operator,a,s)}}}}else if(t.nodeType===11){if(t.constType===33)return!0;if(t.constType===15)return!1}else if(t.nodeType===38){if(t.value==="TYPE_CHECKING")return!0;const a=n.get(t.value);if(a!==void 0)return!!a}else if(i&&t.nodeType===35&&t.memberName.value==="TYPE_CHECKING"&&t.leftExpression.nodeType===38&&i.some(a=>a===t.leftExpression.value))return!0}ya.evaluateStaticBoolExpression=Uu;function fD(t,e,n,i,r){return t.nodeType===11&&t.constType===26?!1:Uu(t,e,n,i,r)}ya.evaluateStaticBoolLikeExpression=fD;function Pz(t){let e;if(t.expressions.length>=2){if(t.expressions[0].nodeType===40&&!t.expressions[0].isImaginary&&t.expressions[1].nodeType===40&&!t.expressions[1].isImaginary){const n=t.expressions[0],i=t.expressions[1];typeof n.value=="number"&&typeof i.value=="number"&&(e=n.value*256+i.value)}}else if(t.expressions.length===1){const n=t.expressions[0];typeof n.value=="number"&&(e=n.value*256)}return e}function QS(t,e,n){if(e!==void 0&&n!==void 0){if(e=BigInt(e),n=BigInt(n),t===20)return e<n;if(t===21)return e<=n;if(t===15)return e>n;if(t===16)return e>=n;if(t===12)return e===n;if(t===28)return e!==n}}function Qy(t,e,n){if(e!==void 0&&n!==void 0){if(t===12)return e===n;if(t===28)return e!==n}}function JS(t,e=["sys"]){return!!(t.nodeType===35&&t.leftExpression.nodeType===38&&t.memberName.value==="version_info"&&e.some(n=>n===t.leftExpression.value))}function Az(t,e=["sys"]){return!!(t.nodeType===35&&t.leftExpression.nodeType===38&&t.memberName.value==="platform"&&e.some(n=>n===t.leftExpression.value))}function Mz(t){return t.nodeType===35&&t.leftExpression.nodeType===38&&t.leftExpression.value==="os"&&t.memberName.value==="name"}function Nz(t){if(t.pythonPlatform===hc.PythonPlatform.Darwin)return"darwin";if(t.pythonPlatform===hc.PythonPlatform.Windows)return"win32";if(t.pythonPlatform===hc.PythonPlatform.Linux)return"linux"}function Rz(t){if(t.pythonPlatform===hc.PythonPlatform.Darwin)return"posix";if(t.pythonPlatform===hc.PythonPlatform.Windows)return"nt";if(t.pythonPlatform===hc.PythonPlatform.Linux)return"posix"}var Oz=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),xz=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bv=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Oz(e,t,n);return xz(e,t),e};Object.defineProperty(no,"__esModule",{value:!0});no.ReturnFinder=no.YieldFinder=no.Binder=void 0;const Lz=Dt,Eo=qt,du=Is,XS=Hn,Ir=yn,Fa=Rn,Ps=Rn,Ln=ir,zz=Ld,nn=bv(kt),gn=Bc,oi=bv(ze),Sv=rs,Uz=lm,Jy=bv(ya),Vz=Li,Qi=Dn,Bz=.05;class ur extends Sv.ParseTreeWalker{constructor(e,n=!1){super(),this._moduleSymbolOnly=n,this._deferredBindingTasks=[],this._currentExceptTargets=[],this._finallyTargets=[],this._typingImportAliases=[],this._sysImportAliases=[],this._dataclassesImportAliases=[],this._typingSymbolAliases=new Map,this._dataclassesSymbolAliases=new Map,this._dunderAllStringNodes=[],this._usesUnsupportedDunderAllForm=!1,this._isInExceptSuite=!1,this._potentialHiddenSymbols=new Map,this._potentialPrivateSymbols=new Map,this._codeFlowComplexity=0,this._fileInfo=e}bindModule(e){var n;const i=this._fileInfo.builtinsScope===void 0;this._createNewScope(i?4:3,this._fileInfo.builtinsScope,()=>{nn.setScope(e,this._currentScope),nn.setFlowNode(e,this._currentFlowNode),this._addImplicitSymbolToCurrentScope("__doc__",e,"str | None"),this._addImplicitSymbolToCurrentScope("__name__",e,"str"),this._addImplicitSymbolToCurrentScope("__qualname__",e,"str"),this._addImplicitSymbolToCurrentScope("__loader__",e,"Any"),this._addImplicitSymbolToCurrentScope("__package__",e,"str"),this._addImplicitSymbolToCurrentScope("__spec__",e,"Any"),this._addImplicitSymbolToCurrentScope("__path__",e,"Iterable[str]"),this._addImplicitSymbolToCurrentScope("__file__",e,"str"),this._addImplicitSymbolToCurrentScope("__cached__",e,"str"),this._addImplicitSymbolToCurrentScope("__dict__",e,"Dict[str, Any]"),this._addImplicitSymbolToCurrentScope("__annotations__",e,"Dict[str, Any]"),this._addImplicitSymbolToCurrentScope("__builtins__",e,"Any"),this._currentFlowNode=this._createStartFlowNode(),this._walkStatementsAndReportUnreachable(e.statements),nn.setAfterFlowNode(e,this._currentFlowNode),nn.setCodeFlowExpressions(e,this._currentScopeCodeFlowExpressions),nn.setCodeFlowComplexity(e,this._codeFlowComplexity)}),this._bindDeferred(),this._potentialHiddenSymbols.forEach((a,s)=>{var l;!((l=this._dunderAllNames)===null||l===void 0)&&l.some(o=>o===s)||(this._fileInfo.isStubFile?a.setIsExternallyHidden():a.setPrivatePyTypedImport())}),this._potentialPrivateSymbols.forEach((a,s)=>{var l;!((l=this._dunderAllNames)===null||l===void 0)&&l.some(o=>o===s)||a.setIsPrivateMember()}),this._dunderAllNames?nn.setDunderAllInfo(e,{names:this._dunderAllNames,stringNodes:this._dunderAllStringNodes,usesUnsupportedDunderAllForm:this._usesUnsupportedDunderAllForm}):nn.setDunderAllInfo(e,void 0);const r=nn.getScope(e);if(r&&this._dunderAllNames)for(const a of this._dunderAllNames)(n=r.symbolTable.get(a))===null||n===void 0||n.setIsInDunderAll()}visitModule(e){return(0,Eo.fail)("We should never get here"),!1}visitSuite(e){return this._walkStatementsAndReportUnreachable(e.statements),!1}visitModuleName(e){const n=nn.getImportInfo(e);if((0,Eo.assert)(n!==void 0),n.isNativeLib)return!0;if(!n.isImportFound)return this._addDiagnostic(this._fileInfo.diagnosticRuleSet.reportMissingImports,du.DiagnosticRule.reportMissingImports,Ln.Localizer.Diagnostic.importResolveFailure().format({importName:n.importName}),e),!0;if(!n.isStubFile&&n.importType===1&&!n.pyTypedInfo){const i=this._addDiagnostic(this._fileInfo.diagnosticRuleSet.reportMissingTypeStubs,du.DiagnosticRule.reportMissingTypeStubs,Ln.Localizer.Diagnostic.stubFileMissing().format({importName:n.importName}),e);if(i){const r={action:"pyright.createtypestub",moduleName:n.importName};i.addAction(r)}}return!0}visitClass(e){this.walkMultiple(e.decorators);const n={type:4,node:e,path:this._fileInfo.filePath,range:(0,Ir.convertOffsetsToRange)(e.name.start,Ps.TextRange.getEnd(e.name),this._fileInfo.lines),moduleName:this._fileInfo.moduleName,isInExceptSuite:this._isInExceptSuite},i=this._bindNameToScope(this._currentScope,e.name.value);return i&&i.addDeclaration(n),nn.setDeclaration(e,n),this.walkMultiple(e.arguments),this._createNewScope(2,this._getNonClassParentScope(),()=>{nn.setScope(e,this._currentScope),this._addImplicitSymbolToCurrentScope("__doc__",e,"str | None"),this._addImplicitSymbolToCurrentScope("__module__",e,"str"),this._dunderSlotsEntries=void 0,this._moduleSymbolOnly||this.walk(e.suite),this._dunderSlotsEntries&&this._addSlotsToCurrentScope(this._dunderSlotsEntries),this._dunderSlotsEntries=void 0}),this._createAssignmentTargetFlowNodes(e.name,!1,!1),!1}visitFunction(e){this._createVariableAnnotationFlowNode(),nn.setFlowNode(e,this._currentFlowNode);const n=this._bindNameToScope(this._currentScope,e.name.value),i=oi.getEnclosingClass(e,!0),r={type:3,node:e,isMethod:!!i,isGenerator:!1,path:this._fileInfo.filePath,range:(0,Ir.convertOffsetsToRange)(e.name.start,Ps.TextRange.getEnd(e.name),this._fileInfo.lines),moduleName:this._fileInfo.moduleName,isInExceptSuite:this._isInExceptSuite};return n&&n.addDeclaration(r),nn.setDeclaration(e,r),this.walkMultiple(e.decorators),e.parameters.forEach(a=>{a.defaultValue&&this.walk(a.defaultValue),a.typeAnnotation&&this.walk(a.typeAnnotation),a.typeAnnotationComment&&this.walk(a.typeAnnotationComment)}),e.returnTypeAnnotation&&this.walk(e.returnTypeAnnotation),e.functionAnnotationComment&&this.walk(e.functionAnnotationComment),this._createNewScope(1,this._getNonClassParentScope(),()=>{nn.setScope(e,this._currentScope),oi.getEnclosingClass(e)&&this._addImplicitSymbolToCurrentScope("__class__",e,"class"),this._deferBinding(()=>{this._currentFlowNode=this._createStartFlowNode(),this._codeFlowComplexity=0,e.parameters.forEach(l=>{if(l.name){const o=this._bindNameToScope(this._currentScope,l.name.value);if(o){const u={type:2,node:l,path:this._fileInfo.filePath,range:(0,Ir.convertOffsetsToRange)(l.start,Ps.TextRange.getEnd(l),this._fileInfo.lines),moduleName:this._fileInfo.moduleName,isInExceptSuite:this._isInExceptSuite};o.addDeclaration(u),nn.setDeclaration(l.name,u)}this._createFlowAssignment(l.name)}}),this._targetFunctionDeclaration=r,this._currentReturnTarget=this._createBranchLabel(),this.walk(e.suite),nn.setAfterFlowNode(e.suite,this._currentFlowNode),this._addAntecedent(this._currentReturnTarget,this._currentFlowNode);const s=this._finishFlowLabel(this._currentReturnTarget);nn.setAfterFlowNode(e,s),nn.setCodeFlowExpressions(e,this._currentScopeCodeFlowExpressions),nn.setCodeFlowComplexity(e,this._codeFlowComplexity)})}),this._createAssignmentTargetFlowNodes(e.name,!1,!1),!1}visitLambda(e){return this._createVariableAnnotationFlowNode(),nn.setFlowNode(e,this._currentFlowNode),e.parameters.forEach(n=>{n.defaultValue&&this.walk(n.defaultValue)}),this._createNewScope(1,this._getNonClassParentScope(),()=>{nn.setScope(e,this._currentScope),this._deferBinding(()=>{this._currentFlowNode=this._createStartFlowNode(),e.parameters.forEach(n=>{if(n.name){const i=this._bindNameToScope(this._currentScope,n.name.value);if(i){const r={type:2,node:n,path:this._fileInfo.filePath,range:(0,Ir.convertOffsetsToRange)(n.start,Ps.TextRange.getEnd(n),this._fileInfo.lines),moduleName:this._fileInfo.moduleName,isInExceptSuite:this._isInExceptSuite};i.addDeclaration(r),nn.setDeclaration(n.name,r)}this._createFlowAssignment(n.name),this.walk(n.name)}}),this.walk(e.expression),nn.setCodeFlowExpressions(e,this._currentScopeCodeFlowExpressions)})}),!1}visitCall(e){var n,i;if(this._disableTrueFalseTargets(()=>{this.walk(e.leftExpression),e.arguments.forEach(r=>{this._currentFlowNode&&nn.setFlowNode(r,this._currentFlowNode),this.walk(r)})}),oi.isNodeContainedWithinNodeType(e,13)||this._createCallFlowNode(e),this._currentScope.type===3&&e.leftExpression.nodeType===35&&e.leftExpression.leftExpression.nodeType===38&&e.leftExpression.leftExpression.value==="__all__"){let r=!0;if(e.leftExpression.memberName.value==="extend"&&e.arguments.length===1){const a=e.arguments[0].valueExpression;if(a.nodeType===31)a.entries.forEach(s=>{var l,o;s.nodeType===48&&s.strings.length===1&&s.strings[0].nodeType===49&&((l=this._dunderAllNames)===null||l===void 0||l.push(s.strings[0].value),(o=this._dunderAllStringNodes)===null||o===void 0||o.push(s.strings[0]),r=!1)});else if(a.nodeType===35&&a.leftExpression.nodeType===38&&a.memberName.value==="__all__"){const s=this._getDunderAllNamesFromImport(a.leftExpression.value);s&&s.length>0&&(s.forEach(l=>{var o;(o=this._dunderAllNames)===null||o===void 0||o.push(l)}),r=!1)}}else if(e.leftExpression.memberName.value==="remove"&&e.arguments.length===1){const a=e.arguments[0].valueExpression;a.nodeType===48&&a.strings.length===1&&a.strings[0].nodeType===49&&this._dunderAllNames&&(this._dunderAllNames=this._dunderAllNames.filter(s=>s!==a.strings[0].value),this._dunderAllStringNodes=this._dunderAllStringNodes.filter(s=>s.value!==a.strings[0].value),r=!1)}else if(e.leftExpression.memberName.value==="append"&&e.arguments.length===1){const a=e.arguments[0].valueExpression;a.nodeType===48&&a.strings.length===1&&a.strings[0].nodeType===49&&((n=this._dunderAllNames)===null||n===void 0||n.push(a.strings[0].value),(i=this._dunderAllStringNodes)===null||i===void 0||i.push(a.strings[0]),r=!1)}r&&(this._usesUnsupportedDunderAllForm=!0,this._addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnsupportedDunderAll,du.DiagnosticRule.reportUnsupportedDunderAll,Ln.Localizer.Diagnostic.unsupportedDunderAllOperation(),e))}return!1}visitAssignment(e){if(this._handleTypingStubAssignmentOrAnnotation(e))return!1;this._bindPossibleTupleNamedTarget(e.leftExpression),e.typeAnnotationComment&&(this.walk(e.typeAnnotationComment),this._addTypeDeclarationForVariable(e.leftExpression,e.typeAnnotationComment));let n=!1;e.leftExpression.nodeType===54&&!(0,zz.isAnnotationEvaluationPostponed)(this._fileInfo)&&(this._createAssignmentTargetFlowNodes(e.leftExpression,!0,!1),n=!0),this.walk(e.rightExpression);let i=!0;if((oi.getEnclosingFunction(e)||e.rightExpression.nodeType===9&&this._fileInfo.isTypingStubFile||oi.isWithinLoop(e))&&(i=!1),this._addInferredTypeAssignmentForVariable(e.leftExpression,e.rightExpression,i),n||this._createAssignmentTargetFlowNodes(e.leftExpression,!0,!1),this._currentScope.type===3&&(e.leftExpression.nodeType===38&&e.leftExpression.value==="__all__"||e.leftExpression.nodeType===54&&e.leftExpression.valueExpression.nodeType===38&&e.leftExpression.valueExpression.value==="__all__")){const r=e.rightExpression;this._dunderAllNames=[];let a=!1;r.nodeType===31?r.entries.forEach(s=>{s.nodeType===48&&s.strings.length===1&&s.strings[0].nodeType===49?(this._dunderAllNames.push(s.strings[0].value),this._dunderAllStringNodes.push(s.strings[0])):a=!0}):r.nodeType===52?r.expressions.forEach(s=>{s.nodeType===48&&s.strings.length===1&&s.strings[0].nodeType===49?(this._dunderAllNames.push(s.strings[0].value),this._dunderAllStringNodes.push(s.strings[0])):a=!0}):a=!0,a&&(this._usesUnsupportedDunderAllForm=!0,this._addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnsupportedDunderAll,du.DiagnosticRule.reportUnsupportedDunderAll,Ln.Localizer.Diagnostic.unsupportedDunderAllOperation(),e))}if(this._currentScope.type===2&&(e.leftExpression.nodeType===38&&e.leftExpression.value==="__slots__"||e.leftExpression.nodeType===54&&e.leftExpression.valueExpression.nodeType===38&&e.leftExpression.valueExpression.value==="__slots__")){const r=e.rightExpression;this._dunderSlotsEntries=[];let a=!0;r.nodeType===48?this._dunderSlotsEntries.push(r):r.nodeType===31?r.entries.forEach(s=>{s.nodeType===48&&s.strings.length===1&&s.strings[0].nodeType===49?this._dunderSlotsEntries.push(s):a=!1}):r.nodeType===52?r.expressions.forEach(s=>{s.nodeType===48&&s.strings.length===1&&s.strings[0].nodeType===49?this._dunderSlotsEntries.push(s):a=!1}):a=!1,a||(this._dunderSlotsEntries=void 0)}return!1}visitAssignmentExpression(e){this._disableTrueFalseTargets(()=>{this.walk(e.rightExpression)});const n=oi.getEvaluationNodeForAssignmentExpression(e);if(!n)this._addError(Ln.Localizer.Diagnostic.assignmentExprContext(),e),this.walk(e.name);else{const i=nn.getScope(n);let r=this._currentScope;for(;r&&r!==i;){if(r.lookUpSymbol(e.name.value)){this._addError(Ln.Localizer.Diagnostic.assignmentExprComprehension().format({name:e.name.value}),e.name);break}r=r.parent}this._bindNameToScope(i,e.name.value),this._addInferredTypeAssignmentForVariable(e.name,e.rightExpression),this._createAssignmentTargetFlowNodes(e.name,!0,!1)}return!1}visitAugmentedAssignment(e){if(this.walk(e.leftExpression),this.walk(e.rightExpression),this._bindPossibleTupleNamedTarget(e.destExpression),this._createAssignmentTargetFlowNodes(e.destExpression,!1,!1),e.operator===1&&this._currentScope.type===3&&e.leftExpression.nodeType===38&&e.leftExpression.value==="__all__"){const n=e.rightExpression;let i=!0;if(n.nodeType===31)n.entries.forEach(r=>{var a;r.nodeType===48&&r.strings.length===1&&r.strings[0].nodeType===49&&((a=this._dunderAllNames)===null||a===void 0||a.push(r.strings[0].value),this._dunderAllStringNodes.push(r.strings[0]))}),i=!1;else if(n.nodeType===35&&n.leftExpression.nodeType===38&&n.memberName.value==="__all__"){const r=this._getDunderAllNamesFromImport(n.leftExpression.value);r&&(r.forEach(a=>{var s;(s=this._dunderAllNames)===null||s===void 0||s.push(a)}),i=!1)}i&&(this._usesUnsupportedDunderAllForm=!0,this._addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnsupportedDunderAll,du.DiagnosticRule.reportUnsupportedDunderAll,Ln.Localizer.Diagnostic.unsupportedDunderAllOperation(),e))}return!1}visitDel(e){return e.expressions.forEach(n=>{this._bindPossibleTupleNamedTarget(n),this.walk(n),this._createAssignmentTargetFlowNodes(n,!1,!0)}),!1}visitTypeAnnotation(e){if(this._handleTypingStubAssignmentOrAnnotation(e))return!1;this.walk(e.typeAnnotation),this._createVariableAnnotationFlowNode(),this._bindPossibleTupleNamedTarget(e.valueExpression),this._addTypeDeclarationForVariable(e.valueExpression,e.typeAnnotation);const n=[];return this._isNarrowingExpression(e.valueExpression,n)&&n.forEach(i=>{const r=(0,gn.createKeyForReference)(i);this._currentScopeCodeFlowExpressions.add(r)}),this.walk(e.valueExpression),!1}visitFor(e){this._bindPossibleTupleNamedTarget(e.targetExpression),this._addInferredTypeAssignmentForVariable(e.targetExpression,e),this.walk(e.iterableExpression);const n=this._createLoopLabel(),i=this._createBranchLabel(),r=this._createBranchLabel();if(this._addAntecedent(n,this._currentFlowNode),this._currentFlowNode=n,this._addAntecedent(i,this._currentFlowNode),this._createAssignmentTargetFlowNodes(e.targetExpression,!0,!1),this._bindLoopStatement(n,r,()=>{this.walk(e.forSuite),this._addAntecedent(n,this._currentFlowNode)}),this._currentFlowNode=this._finishFlowLabel(i),e.elseSuite&&this.walk(e.elseSuite),this._addAntecedent(r,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(r),e.asyncToken){const a=oi.getEnclosingFunction(e);(!a||!a.isAsync)&&this._addError(Ln.Localizer.Diagnostic.asyncNotInAsyncFunction(),e.asyncToken)}return!1}visitContinue(e){return this._currentContinueTarget&&this._addAntecedent(this._currentContinueTarget,this._currentFlowNode),this._currentFlowNode=ur._unreachableFlowNode,!1}visitBreak(e){return this._currentBreakTarget&&this._addAntecedent(this._currentBreakTarget,this._currentFlowNode),this._currentFlowNode=ur._unreachableFlowNode,!1}visitReturn(e){return this._targetFunctionDeclaration&&(this._targetFunctionDeclaration.returnStatements||(this._targetFunctionDeclaration.returnStatements=[]),this._targetFunctionDeclaration.returnStatements.push(e)),e.returnExpression&&this.walk(e.returnExpression),nn.setFlowNode(e,this._currentFlowNode),this._currentReturnTarget&&this._addAntecedent(this._currentReturnTarget,this._currentFlowNode),this._finallyTargets.forEach(n=>{this._addAntecedent(n,this._currentFlowNode)}),this._currentFlowNode=ur._unreachableFlowNode,!1}visitYield(e){return this._isInListComprehension(e,!0)&&this._addError(Ln.Localizer.Diagnostic.yieldWithinListCompr(),e),this._bindYield(e),!1}visitYieldFrom(e){return this._isInListComprehension(e,!0)&&this._addError(Ln.Localizer.Diagnostic.yieldWithinListCompr(),e),this._bindYield(e),!1}visitMemberAccess(e){return this.walk(e.leftExpression),nn.setFlowNode(e,this._currentFlowNode),!1}visitName(e){return nn.setFlowNode(e,this._currentFlowNode),!1}visitIndex(e){return nn.setFlowNode(e,this._currentFlowNode),!0}visitIf(e){const n=this._currentFlowNode,i=this._createBranchLabel(),r=this._createBranchLabel(),a=this._createBranchLabel(n);return a.affectedExpressions=this._trackCodeFlowExpressions(()=>{const s=Jy.evaluateStaticBoolLikeExpression(e.testExpression,this._fileInfo.executionEnvironment,this._fileInfo.definedConstants,this._typingImportAliases,this._sysImportAliases);this._bindConditional(e.testExpression,i,r),this._currentFlowNode=s===!1?ur._unreachableFlowNode:this._finishFlowLabel(i),this.walk(e.ifSuite),this._addAntecedent(a,this._currentFlowNode),this._currentFlowNode=s===!0?ur._unreachableFlowNode:this._finishFlowLabel(r),e.elseSuite?this.walk(e.elseSuite):this._bindNeverCondition(e.testExpression,a,!1),this._addAntecedent(a,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(a)}),!1}visitWhile(e){const n=this._createBranchLabel(),i=this._createBranchLabel(),r=this._createBranchLabel(),a=Jy.evaluateStaticBoolLikeExpression(e.testExpression,this._fileInfo.executionEnvironment,this._fileInfo.definedConstants,this._typingImportAliases,this._sysImportAliases),s=this._createLoopLabel();return this._addAntecedent(s,this._currentFlowNode),this._currentFlowNode=s,this._bindConditional(e.testExpression,n,i),this._currentFlowNode=a===!1?ur._unreachableFlowNode:this._finishFlowLabel(n),this._bindLoopStatement(s,r,()=>{this.walk(e.whileSuite)}),this._addAntecedent(s,this._currentFlowNode),this._currentFlowNode=a===!0?ur._unreachableFlowNode:this._finishFlowLabel(i),e.elseSuite&&this.walk(e.elseSuite),this._addAntecedent(r,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(r),!1}visitAssert(e){const n=this._createBranchLabel(),i=this._createBranchLabel();return this._bindConditional(e.testExpression,n,i),e.exceptionExpression&&(this._currentFlowNode=this._finishFlowLabel(i),this.walk(e.exceptionExpression)),this._currentFlowNode=this._finishFlowLabel(n),!1}visitExcept(e){if(e.typeExpression&&this.walk(e.typeExpression),e.name){this.walk(e.name);const i=this._bindNameToScope(this._currentScope,e.name.value);if(this._createAssignmentTargetFlowNodes(e.name,!0,!1),i){const r={type:1,node:e.name,isConstant:(0,Qi.isConstantName)(e.name.value),inferredTypeSource:e,path:this._fileInfo.filePath,range:(0,Ir.convertOffsetsToRange)(e.name.start,Ps.TextRange.getEnd(e.name),this._fileInfo.lines),moduleName:this._fileInfo.moduleName,isInExceptSuite:this._isInExceptSuite};i.addDeclaration(r)}}const n=this._isInExceptSuite;return this._isInExceptSuite=!0,this.walk(e.exceptSuite),this._isInExceptSuite=n,e.name&&this._createFlowAssignment(e.name,!0),!1}visitRaise(e){return this._targetFunctionDeclaration&&(this._targetFunctionDeclaration.raiseStatements||(this._targetFunctionDeclaration.raiseStatements=[]),this._targetFunctionDeclaration.raiseStatements.push(e)),e.typeExpression&&this.walk(e.typeExpression),e.valueExpression&&this.walk(e.valueExpression),e.tracebackExpression&&this.walk(e.tracebackExpression),this._finallyTargets.forEach(n=>{this._addAntecedent(n,this._currentFlowNode)}),this._currentFlowNode=ur._unreachableFlowNode,!1}visitTry(e){const n=this._currentFlowNode,i=e.exceptClauses.map(()=>this._createBranchLabel()),r=this._createBranchLabel(n);let a=!1;const s=this._createBranchLabel(n),l={flags:gn.FlowFlags.PreFinallyGate,id:this._getUniqueFlowNodeId(),antecedent:s,isGateClosed:!1};if(r.affectedExpressions=this._trackCodeFlowExpressions(()=>{e.finallySuite&&this._addAntecedent(r,l),e.exceptClauses.some(u=>!u.typeExpression)||i.push(s),i.forEach(u=>{this._addAntecedent(u,this._currentFlowNode)}),e.finallySuite&&this._finallyTargets.push(s),this._useExceptTargets(i,()=>{this.walk(e.trySuite)}),e.elseSuite&&this.walk(e.elseSuite),this._addAntecedent(r,this._currentFlowNode),this._isCodeUnreachable()||(a=!0),e.exceptClauses.forEach((u,f)=>{this._currentFlowNode=this._finishFlowLabel(i[f]),this.walk(u),this._addAntecedent(r,this._currentFlowNode),this._isCodeUnreachable()||(a=!0)}),e.finallySuite&&this._finallyTargets.pop(),this._currentFlowNode=this._finishFlowLabel(r)}),e.finallySuite){this.walk(e.finallySuite);const o={flags:gn.FlowFlags.PostFinally,id:this._getUniqueFlowNodeId(),finallyNode:e.finallySuite,antecedent:this._currentFlowNode,preFinallyGate:l};this._currentFlowNode=a?o:ur._unreachableFlowNode}return!1}visitAwait(e){var n;const i=oi.getEnclosingFunction(e);if(i===void 0||!i.isAsync){if(this._fileInfo.isIPythonMode&&i===void 0)return!0;((n=e.parent)===null||n===void 0?void 0:n.nodeType)!==32&&this._addError(Ln.Localizer.Diagnostic.awaitNotInAsync(),e)}return!0}visitGlobal(e){const n=this._currentScope.getGlobalScope().scope;return e.nameList.forEach(i=>{const r=i.value;this._currentScope.getBindingType(r)===0&&this._addError(Ln.Localizer.Diagnostic.nonLocalRedefinition().format({name:r}),i);const a=this._currentScope.lookUpSymbolRecursive(r);a&&a.scope===this._currentScope&&this._addError(Ln.Localizer.Diagnostic.globalReassignment().format({name:r}),i),this._bindNameToScope(n,r),this._currentScope!==n&&this._currentScope.setBindingType(r,1)}),!0}visitNonlocal(e){const n=this._currentScope.getGlobalScope().scope;return this._currentScope===n?this._addError(Ln.Localizer.Diagnostic.nonLocalInModule(),e):e.nameList.forEach(i=>{const r=i.value;this._currentScope.getBindingType(r)===1&&this._addError(Ln.Localizer.Diagnostic.globalRedefinition().format({name:r}),i);const a=this._currentScope.lookUpSymbolRecursive(r);a&&a.scope===this._currentScope?this._addError(Ln.Localizer.Diagnostic.nonLocalReassignment().format({name:r}),i):(!a||a.scope===n)&&this._addError(Ln.Localizer.Diagnostic.nonLocalNoBinding().format({name:r}),i),a&&this._currentScope.setBindingType(r,0)}),!0}visitImportAs(e){var n,i,r,a,s,l;if(e.module.nameParts.length>0){const o=e.module.nameParts[0].value;let u;e.alias?u=e.alias.value:u=o;const f=this._bindNameToScope(this._currentScope,u);f&&(this._currentScope.type===3||this._currentScope.type===4)&&(!e.alias||e.module.nameParts.length!==1||e.module.nameParts[0].value!==e.alias.value)&&(this._fileInfo.isStubFile||this._fileInfo.isInPyTypedPackage)&&this._potentialHiddenSymbols.set(u,f);const y=nn.getImportInfo(e.module);(0,Eo.assert)(y!==void 0),f&&this._createAliasDeclarationForMultipartImportName(e,e.alias,y,f),this._createFlowAssignment(e.alias?e.alias:e.module.nameParts[0]),e.module.nameParts.length===1&&(o==="typing"||o==="typing_extensions"?this._typingImportAliases.push((i=(n=e.alias)===null||n===void 0?void 0:n.value)!==null&&i!==void 0?i:o):o==="sys"?this._sysImportAliases.push((a=(r=e.alias)===null||r===void 0?void 0:r.value)!==null&&a!==void 0?a:o):o==="dataclasses"&&this._dataclassesImportAliases.push((l=(s=e.alias)===null||s===void 0?void 0:s.value)!==null&&l!==void 0?l:o))}return!0}visitImportFrom(e){const n=["Final","TypeAlias","ClassVar","Required","NotRequired","Annotated"],i=["InitVar"],r=nn.getImportInfo(e.module);let a="";r&&r.isImportFound&&!r.isNativeLib&&(a=r.resolvedPaths[r.resolvedPaths.length-1]);const s=(0,XS.stripFileExtension)((0,XS.getFileName)(this._fileInfo.filePath)),l=s==="__init__"&&e.module.leadingDots===1&&e.module.nameParts.length===1;let o=!1,u=!1;if(e.module.nameParts.length===1){const f=e.module.nameParts[0].value;(f==="typing"||f==="typing_extensions")&&(o=!0),f==="dataclasses"&&(u=!0)}if(e.isWildcardImport){if((oi.getEnclosingClass(e)||oi.getEnclosingFunction(e))&&this._addError(Ln.Localizer.Diagnostic.wildcardInFunction(),e),r){const f=[],y=this._fileInfo.importLookup(a);if(y){const p=this._getWildcardImportNames(y);l&&(p.some(v=>v===e.module.nameParts[0].value)||this._addImplicitFromImport(e,r)),p.forEach(b=>{const v=this._bindNameToScope(this._currentScope,b);if(v){if(y.symbolTable.get(b)){const V={type:6,node:e,path:a,loadSymbolsFromPath:!0,range:(0,Fa.getEmptyRange)(),usesLocalName:!1,symbolName:b,moduleName:this._fileInfo.moduleName,isInExceptSuite:this._isInExceptSuite};v.addDeclaration(V),f.push(b)}else if(r&&r.filteredImplicitImports){const V=r.filteredImplicitImports.find(F=>F.name===b);if(V){const F={type:6,node:e,path:V.path,loadSymbolsFromPath:!0,range:(0,Fa.getEmptyRange)(),usesLocalName:!1,moduleName:this._fileInfo.moduleName,isInExceptSuite:this._isInExceptSuite},P={type:6,node:e,path:a,loadSymbolsFromPath:!0,usesLocalName:!1,symbolName:b,submoduleFallback:F,range:(0,Fa.getEmptyRange)(),moduleName:this._fileInfo.moduleName,isInExceptSuite:this._isInExceptSuite};v.addDeclaration(P)}}}})}this._createFlowWildcardImport(e,f),o&&n.forEach(p=>{this._typingSymbolAliases.set(p,p)}),u&&i.forEach(p=>{this._dataclassesSymbolAliases.set(p,p)})}}else l&&this._addImplicitFromImport(e,r),e.imports.forEach(f=>{const y=f.name.value,p=f.alias||f.name,b=this._bindNameToScope(this._currentScope,p.value);if(b){e.module.nameParts.length>0&&(this._currentScope.type===3||this._currentScope.type===4)&&(!f.alias||f.alias.value!==f.name.value)&&(this._fileInfo.isStubFile||this._fileInfo.isInPyTypedPackage)&&this._potentialHiddenSymbols.set(p.value,b);let v;r&&r.filteredImplicitImports&&(v=r.filteredImplicitImports.find(P=>P.name===y));let m,V=!0;v&&(m={type:6,node:f,path:v.path,loadSymbolsFromPath:!0,range:(0,Fa.getEmptyRange)(),usesLocalName:!1,moduleName:this._fileInfo.moduleName,isInExceptSuite:this._isInExceptSuite},s==="__init__"&&e.module.leadingDots===1&&e.module.nameParts.length===0&&(V=!1));const F={type:6,node:f,path:a,loadSymbolsFromPath:V,usesLocalName:!!f.alias,symbolName:y,submoduleFallback:m,range:(0,Fa.getEmptyRange)(),moduleName:this._fileInfo.moduleName,isInExceptSuite:this._isInExceptSuite,isNativeLib:r==null?void 0:r.isNativeLib};b.addDeclaration(F),this._createFlowAssignment(f.alias||f.name),o&&n.some(P=>P===f.name.value)&&this._typingSymbolAliases.set(p.value,f.name.value),u&&i.some(P=>P===f.name.value)&&this._dataclassesSymbolAliases.set(p.value,f.name.value)}});return!0}visitWith(e){e.withItems.forEach(s=>{this.walk(s.expression),s.target&&(this._bindPossibleTupleNamedTarget(s.target),this._addInferredTypeAssignmentForVariable(s.target,s),this._createAssignmentTargetFlowNodes(s.target,!0,!1))});const n=this._createContextManagerLabel(e.withItems.map(s=>s.expression),!!e.isAsync,!1);this._addAntecedent(n,this._currentFlowNode);const i=this._createContextManagerLabel(e.withItems.map(s=>s.expression),!!e.isAsync,!0);this._currentExceptTargets.forEach(s=>{this._addAntecedent(s,i)});const r=this._currentFlowNode,a=this._createBranchLabel(r);return this._addAntecedent(a,n),a.affectedExpressions=this._trackCodeFlowExpressions(()=>{if(this._useExceptTargets([n,i],()=>{this.walk(e.suite)}),this._addAntecedent(a,this._currentFlowNode),this._currentFlowNode=a,this._isCodeUnreachable()||this._addExceptTargets(this._currentFlowNode),e.asyncToken){const s=oi.getEnclosingFunction(e);(!s||!s.isAsync)&&this._addError(Ln.Localizer.Diagnostic.asyncNotInAsyncFunction(),e.asyncToken)}}),!1}visitTernary(e){const n=this._currentFlowNode,i=this._createBranchLabel(),r=this._createBranchLabel(),a=this._createBranchLabel(n);return a.affectedExpressions=this._trackCodeFlowExpressions(()=>{this._bindConditional(e.testExpression,i,r),this._currentFlowNode=this._finishFlowLabel(i),this.walk(e.ifExpression),this._addAntecedent(a,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(r),this.walk(e.elseExpression),this._addAntecedent(a,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(a)}),!1}visitUnaryOperation(e){return e.operator===38&&this._currentFalseTarget&&this._currentTrueTarget?this._bindConditional(e.expression,this._currentFalseTarget,this._currentTrueTarget):this._disableTrueFalseTargets(()=>{this.walk(e.expression)}),!1}visitBinaryOperation(e){if(e.operator===36||e.operator===37){let n=this._currentTrueTarget,i=this._currentFalseTarget,r;(!n||!i)&&(r=this._createBranchLabel(),n=i=r);const a=this._createBranchLabel();e.operator===36?this._bindConditional(e.leftExpression,a,i):this._bindConditional(e.leftExpression,n,a),this._currentFlowNode=this._finishFlowLabel(a),this._bindConditional(e.rightExpression,n,i),r&&(this._currentFlowNode=this._finishFlowLabel(r))}else this._disableTrueFalseTargets(()=>{this.walk(e.leftExpression),this.walk(e.rightExpression)});return!1}visitListComprehension(e){const n=oi.getEnclosingFunction(e);return this._createNewScope(0,this._getNonClassParentScope(),()=>{var i;nn.setScope(e,this._currentScope);const r=this._createBranchLabel();for(let a=0;a<e.forIfNodes.length;a++){const s=e.forIfNodes[a],l=new Map;s.nodeType===33&&(this._bindPossibleTupleNamedTarget(s.targetExpression,l),this._addInferredTypeAssignmentForVariable(s.targetExpression,s),s.asyncToken&&(!n||!n.isAsync)&&((i=e.parent)===null||i===void 0?void 0:i.nodeType)===31&&this._addError(Ln.Localizer.Diagnostic.asyncNotInAsyncFunction(),s.asyncToken))}for(let a=0;a<e.forIfNodes.length;a++){const s=e.forIfNodes[a];if(s.nodeType===33)this.walk(s.iterableExpression),this._createAssignmentTargetFlowNodes(s.targetExpression,!0,!1);else{const l=this._createBranchLabel();this._bindConditional(s.testExpression,l,r),this._currentFlowNode=this._finishFlowLabel(l)}}this.walk(e.expression),this._addAntecedent(r,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(r)}),!1}visitMatch(e){this.walk(e.subjectExpression);const n=[],i=this._isNarrowingExpression(e.subjectExpression,n);i&&n.forEach(s=>{const l=(0,gn.createKeyForReference)(s);this._currentScopeCodeFlowExpressions.add(l)});const r=this._createBranchLabel();let a=!1;return e.cases.forEach(s=>{const l=this._createBranchLabel(),o=this._createBranchLabel(),u=this._createBranchLabel();this._addAntecedent(o,this._currentFlowNode),s.isIrrefutable?s.guardExpression||(a=!0):this._addAntecedent(l,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(o),this.walk(s.pattern),i&&this._createFlowNarrowForPattern(e.subjectExpression,s),s.guardExpression?this._bindConditional(s.guardExpression,u,l):this._addAntecedent(u,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(u),this.walk(s.suite),this._addAntecedent(r,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(l)}),i&&this._createFlowNarrowForPattern(e.subjectExpression,e),a||this._createFlowExhaustedMatch(e),this._addAntecedent(r,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(r),!1}visitPatternAs(e){const n=this._createBranchLabel();if(e.orPatterns.forEach(i=>{this.walk(i),this._addAntecedent(n,this._currentFlowNode)}),this._currentFlowNode=this._finishFlowLabel(n),e.target){this.walk(e.target);const i=this._bindNameToScope(this._currentScope,e.target.value);if(this._createAssignmentTargetFlowNodes(e.target,!1,!1),i){const r={type:1,node:e.target,isConstant:(0,Qi.isConstantName)(e.target.value),inferredTypeSource:e,path:this._fileInfo.filePath,range:(0,Ir.convertOffsetsToRange)(e.target.start,Ps.TextRange.getEnd(e.target),this._fileInfo.lines),moduleName:this._fileInfo.moduleName,isInExceptSuite:this._isInExceptSuite};i.addDeclaration(r)}}return!1}visitPatternCapture(e){return e.isWildcard||this._addPatternCaptureTarget(e.target),!0}visitPatternMappingExpandEntry(e){return e.target.value!=="_"&&this._addPatternCaptureTarget(e.target),!0}_getNonClassParentScope(){let e=this._currentScope;for(;e.type===2;)e=e.parent;return e}_addSlotsToCurrentScope(e){(0,Eo.assert)(this._currentScope.type===2);let n=!1;for(const i of e){const r=i.strings[0].value;if(r==="__dict__"){n=!0;continue}let a=this._currentScope.lookUpSymbol(r);if(!a){a=this._currentScope.addSymbol(r,5);const l=this._fileInfo.diagnosticRuleSet.reportPrivateUsage!=="none";(0,Qi.isPrivateOrProtectedName)(r)&&l&&a.setIsPrivateMember()}const s={type:1,node:i,isConstant:(0,Qi.isConstantName)(r),isDefinedBySlots:!0,path:this._fileInfo.filePath,range:(0,Ir.convertOffsetsToRange)(i.start,i.start+i.length,this._fileInfo.lines),moduleName:this._fileInfo.moduleName,isInExceptSuite:this._isInExceptSuite};a.addDeclaration(s)}n||this._currentScope.setSlotsNames(e.map(i=>i.strings[0].value))}_isInListComprehension(e,n=!1){let i=e,r,a;for(;i;){if(i.nodeType===32){if(n&&i.forIfNodes.length>0){const s=i.forIfNodes[0];if(r===s&&s.nodeType===33&&a===s.iterableExpression)return!1}return!0}a=r,r=i,i=i.parent}return!1}_addPatternCaptureTarget(e){const n=this._bindNameToScope(this._currentScope,e.value);if(this._createAssignmentTargetFlowNodes(e,!1,!1),n){const i={type:1,node:e,isConstant:(0,Qi.isConstantName)(e.value),inferredTypeSource:e.parent,path:this._fileInfo.filePath,range:(0,Ir.convertOffsetsToRange)(e.start,Ps.TextRange.getEnd(e),this._fileInfo.lines),moduleName:this._fileInfo.moduleName,isInExceptSuite:this._isInExceptSuite};n.addDeclaration(i)}}_useExceptTargets(e,n){const i=this._currentExceptTargets;this._currentExceptTargets=e,n(),this._currentExceptTargets=i}_getDunderAllNamesFromImport(e){var n;const i=this._currentScope.lookUpSymbol(e);if(!i)return;const r=i.getDeclarations().find(l=>l.type===6),a=(r==null?void 0:r.path)&&r.loadSymbolsFromPath?r.path:((n=r==null?void 0:r.submoduleFallback)===null||n===void 0?void 0:n.path)&&r.submoduleFallback.loadSymbolsFromPath?r.submoduleFallback.path:void 0;if(!a)return;const s=this._fileInfo.importLookup(a);if(!!s)return s.dunderAllNames}_addImplicitFromImport(e,n){const i=e.module.nameParts[0].value,r=this._bindNameToScope(this._currentScope,i);r&&this._createAliasDeclarationForMultipartImportName(e,void 0,n,r),this._createFlowAssignment(e.module.nameParts[0])}_createAliasDeclarationForMultipartImportName(e,n,i,r){var a;const s=e.module.nameParts[0].value,l=r.getDeclarations().find(y=>y.type===6&&y.firstNamePart===s);let o,u;i&&i.isImportFound&&!i.isNativeLib&&i.resolvedPaths.length>0?u=i.resolvedPaths[i.resolvedPaths.length-1]:u="*** unresolved ***";const f=i&&i.isImportFound&&!i.isNativeLib&&i.resolvedPaths.length>0;if(l?o=l:f?o={type:6,node:e,path:u,loadSymbolsFromPath:!1,range:(0,Fa.getEmptyRange)(),usesLocalName:!!n,moduleName:i.importName,firstNamePart:s,isInExceptSuite:this._isInExceptSuite}:o={type:6,node:e,path:u,loadSymbolsFromPath:!0,range:(0,Fa.getEmptyRange)(),usesLocalName:!!n,moduleName:(a=i==null?void 0:i.importName)!==null&&a!==void 0?a:"",firstNamePart:s,isUnresolved:!0,isInExceptSuite:this._isInExceptSuite},n||e.module.nameParts.length===1)o.path=u,o.loadSymbolsFromPath=!0,o.isUnresolved=!1,i&&this._addImplicitImportsToLoaderActions(i,o);else{let y=o;for(let p=1;p<e.module.nameParts.length;p++){const b=e.module.nameParts[p].value;let v=y.implicitImports?y.implicitImports.get(b):void 0;v||(v={path:i&&p<i.resolvedPaths.length?i.resolvedPaths[p]:"*** unresolved ***",loadSymbolsFromPath:!1,implicitImports:new Map,isUnresolved:!f},y.implicitImports||(y.implicitImports=new Map),y.implicitImports.set(b,v)),p===e.module.nameParts.length-1&&i&&p<i.resolvedPaths.length&&(v.path=i.resolvedPaths[p],v.loadSymbolsFromPath=!0,this._addImplicitImportsToLoaderActions(i,v)),y=v}}l||r.addDeclaration(o)}_getWildcardImportNames(e){const n=[];if(e.dunderAllNames){if(!e.usesUnsupportedDunderAllForm)return e.dunderAllNames;(0,Lz.appendArray)(n,e.dunderAllNames)}return e.symbolTable.forEach((i,r)=>{!i.isExternallyHidden()&&!(0,Qi.isPrivateOrProtectedName)(r)&&n.push(r)}),n}_walkStatementsAndReportUnreachable(e){let n=!1;for(const i of e)nn.setFlowNode(i,this._currentFlowNode),n||(n=this._isCodeUnreachable()),n?this._targetFunctionDeclaration&&!this._targetFunctionDeclaration.isGenerator&&new pD().checkContainsYield(i)&&(this._targetFunctionDeclaration.isGenerator=!0):this.walk(i);return!1}_createStartFlowNode(){return{flags:gn.FlowFlags.Start,id:this._getUniqueFlowNodeId()}}_createBranchLabel(e){return{flags:gn.FlowFlags.BranchLabel,id:this._getUniqueFlowNodeId(),antecedents:[],preBranchAntecedent:e,affectedExpressions:void 0}}_createFlowNarrowForPattern(e,n){const i={flags:gn.FlowFlags.NarrowForPattern,id:this._getUniqueFlowNodeId(),subjectExpression:e,statement:n,antecedent:this._currentFlowNode};this._currentFlowNode=i}_createContextManagerLabel(e,n,i){return{flags:gn.FlowFlags.PostContextManager|gn.FlowFlags.BranchLabel,id:this._getUniqueFlowNodeId(),antecedents:[],expressions:e,affectedExpressions:void 0,isAsync:n,blockIfSwallowsExceptions:i}}_createLoopLabel(){return{flags:gn.FlowFlags.LoopLabel,id:this._getUniqueFlowNodeId(),antecedents:[],affectedExpressions:void 0}}_finishFlowLabel(e){return e.antecedents.length===0?ur._unreachableFlowNode:e.antecedents.length===1&&e.flags===gn.FlowFlags.BranchLabel?e.antecedents[0]:(this._codeFlowComplexity+=e.antecedents.length-1,e)}_bindNeverCondition(e,n,i){const r=[];if(e.nodeType===55&&e.operator===38)this._bindNeverCondition(e.expression,n,!i);else if(e.nodeType===7&&(e.operator===36||e.operator===37)){let a=e.operator===36;if(i&&(a=!a),a){const s=this._currentFlowNode;this._bindNeverCondition(e.leftExpression,n,i),this._currentFlowNode=s,this._bindNeverCondition(e.rightExpression,n,i)}else{const s=this._currentFlowNode,l=this._createBranchLabel();if(this._bindNeverCondition(e.leftExpression,l,i),s!==this._currentFlowNode){this._currentFlowNode=this._finishFlowLabel(l);const o=this._currentFlowNode;this._bindNeverCondition(e.rightExpression,n,i),o===this._currentFlowNode&&(this._currentFlowNode=s)}}}else this._isNarrowingExpression(e,r,!0)&&r.filter(s=>s.nodeType===38).length>0&&(this._currentFlowNode=this._createFlowConditional(i?gn.FlowFlags.TrueNeverCondition:gn.FlowFlags.FalseNeverCondition,this._currentFlowNode,e)),this._addAntecedent(n,this._currentFlowNode)}_bindConditional(e,n,i){this._setTrueFalseTargets(n,i,()=>{this.walk(e)}),this._isLogicalExpression(e)||(this._addAntecedent(n,this._createFlowConditional(gn.FlowFlags.TrueCondition,this._currentFlowNode,e)),this._addAntecedent(i,this._createFlowConditional(gn.FlowFlags.FalseCondition,this._currentFlowNode,e)))}_disableTrueFalseTargets(e){this._setTrueFalseTargets(void 0,void 0,e)}_setTrueFalseTargets(e,n,i){const r=this._currentTrueTarget,a=this._currentFalseTarget;this._currentTrueTarget=e,this._currentFalseTarget=n,i(),this._currentTrueTarget=r,this._currentFalseTarget=a}_createFlowConditional(e,n,i){if(n.flags&gn.FlowFlags.Unreachable)return n;const r=Jy.evaluateStaticBoolLikeExpression(i,this._fileInfo.executionEnvironment,this._fileInfo.definedConstants,this._typingImportAliases,this._sysImportAliases);if(r===!0&&e&gn.FlowFlags.FalseCondition||r===!1&&e&gn.FlowFlags.TrueCondition)return ur._unreachableFlowNode;const a=[];if(!this._isNarrowingExpression(i,a))return n;a.forEach(o=>{const u=(0,gn.createKeyForReference)(o);this._currentScopeCodeFlowExpressions.add(u)});const s=a.filter(o=>o.nodeType===38),l={flags:e,id:this._getUniqueFlowNodeId(),reference:s.length>0?s[0]:void 0,expression:i,antecedent:n};return this._addExceptTargets(l),l}_isLogicalExpression(e){switch(e.nodeType){case 55:return e.operator===38;case 7:return e.operator===36||e.operator===37}return!1}_isNarrowingExpression(e,n,i=!1,r=!1){switch(e.nodeType){case 38:case 35:case 24:return i&&(e.nodeType!==38||!r)?!1:(0,gn.isCodeFlowSupportedForReference)(e)?(n.push(e),!0):!1;case 4:return n.push(e.name),this._isNarrowingExpression(e.rightExpression,n,i,!0),!0;case 7:{const a=e.operator===39||e.operator===40,s=e.operator===12||e.operator===28;if(a||s){if(e.rightExpression.nodeType===11&&e.rightExpression.constType===26)return this._isNarrowingExpression(e.leftExpression,n,i,!0);if(a&&e.leftExpression.nodeType===9&&e.leftExpression.leftExpression.nodeType===38&&e.leftExpression.leftExpression.value==="type"&&e.leftExpression.arguments.length===1&&e.leftExpression.arguments[0].argumentCategory===0)return this._isNarrowingExpression(e.leftExpression.arguments[0].valueExpression,n,i,!0);const l=this._isNarrowingExpression(e.leftExpression,n,i,!0);if(a)return l;if(s){const o=this._isNarrowingExpression(e.rightExpression,n,i,!0);return l||o}}return(e.operator===41||e.operator===42)&&e.leftExpression.nodeType===48&&this._isNarrowingExpression(e.rightExpression,n,i,!0)?!0:e.operator===41||e.operator===42?this._isNarrowingExpression(e.leftExpression,n,i,!0):!1}case 55:return e.operator===38&&this._isNarrowingExpression(e.expression,n,i,!1);case 5:return this._isNarrowingExpression(e.rightExpression,n,i,!0);case 9:{if(e.leftExpression.nodeType===38&&(e.leftExpression.value==="isinstance"||e.leftExpression.value==="issubclass")&&e.arguments.length===2)return this._isNarrowingExpression(e.arguments[0].valueExpression,n,i,!0);if(e.leftExpression.nodeType===38&&e.leftExpression.value==="callable"&&e.arguments.length===1)return this._isNarrowingExpression(e.arguments[0].valueExpression,n,i,!0);if(e.arguments.length>=1)return i?!1:this._isNarrowingExpression(e.arguments[0].valueExpression,n,i,!0)}}return!1}_createAssignmentTargetFlowNodes(e,n,i){switch(e.nodeType){case 38:case 35:{this._createFlowAssignment(e,i),n&&this.walk(e);break}case 24:{this._createFlowAssignment(e,i),n&&this.walk(e);break}case 52:{e.expressions.forEach(r=>{this._createAssignmentTargetFlowNodes(r,n,i)});break}case 54:{this._createAssignmentTargetFlowNodes(e.valueExpression,!1,i),n&&this.walk(e);break}case 56:{this._createAssignmentTargetFlowNodes(e.expression,!1,i),n&&this.walk(e);break}case 31:{e.entries.forEach(r=>{this._createAssignmentTargetFlowNodes(r,n,i)});break}default:n&&this.walk(e)}}_createCallFlowNode(e){if(!this._isCodeUnreachable()){const n={flags:gn.FlowFlags.Call,id:this._getUniqueFlowNodeId(),node:e,antecedent:this._currentFlowNode};this._currentFlowNode=n}nn.setFlowNode(e,this._currentFlowNode),this._isCodeUnreachable()||this._addExceptTargets(this._currentFlowNode)}_createVariableAnnotationFlowNode(){if(!this._isCodeUnreachable()){const e={flags:gn.FlowFlags.VariableAnnotation,id:this._getUniqueFlowNodeId(),antecedent:this._currentFlowNode};this._currentFlowNode=e}}_createFlowAssignment(e,n=!1){let i=Vz.indeterminateSymbolId;if(e.nodeType===38){const a=this._currentScope.lookUpSymbolRecursive(e.value);(0,Eo.assert)(a!==void 0),i=a.symbol.id}const r=this._currentFlowNode;if(!this._isCodeUnreachable()&&(0,gn.isCodeFlowSupportedForReference)(e)){const a={flags:gn.FlowFlags.Assignment,id:this._getUniqueFlowNodeId(),node:e,antecedent:this._currentFlowNode,targetSymbolId:i},s=(0,gn.createKeyForReference)(e);this._currentScopeCodeFlowExpressions.add(s),n&&(a.flags|=gn.FlowFlags.Unbind),e.nodeType===35&&this._addExceptTargets(a),this._currentFlowNode=a}(!n||nn.getFlowNode(e)===void 0)&&nn.setFlowNode(e,n?r:this._currentFlowNode)}_createFlowWildcardImport(e,n){if(!this._isCodeUnreachable()){const i={flags:gn.FlowFlags.WildcardImport,id:this._getUniqueFlowNodeId(),node:e,names:n,antecedent:this._currentFlowNode};this._addExceptTargets(i),this._currentFlowNode=i}nn.setFlowNode(e,this._currentFlowNode)}_createFlowExhaustedMatch(e){if(!this._isCodeUnreachable()){const n={flags:gn.FlowFlags.ExhaustedMatch,id:this._getUniqueFlowNodeId(),node:e,antecedent:this._currentFlowNode};this._currentFlowNode=n}nn.setAfterFlowNode(e,this._currentFlowNode)}_isCodeUnreachable(){return!!(this._currentFlowNode.flags&gn.FlowFlags.Unreachable)}_addExceptTargets(e){this._currentExceptTargets&&this._currentExceptTargets.forEach(n=>{this._addAntecedent(n,e)})}_trackCodeFlowExpressions(e){const n=this._currentScopeCodeFlowExpressions;this._currentScopeCodeFlowExpressions=new Set,e();const i=this._currentScopeCodeFlowExpressions;return n&&this._currentScopeCodeFlowExpressions.forEach(r=>{n.add(r)}),this._currentScopeCodeFlowExpressions=n,i}_bindLoopStatement(e,n,i){const r=this._currentContinueTarget,a=this._currentBreakTarget;this._currentContinueTarget=e,this._currentBreakTarget=n,e.affectedExpressions=this._trackCodeFlowExpressions(i),this._currentContinueTarget=r,this._currentBreakTarget=a}_addAntecedent(e,n){this._currentFlowNode.flags&gn.FlowFlags.Unreachable||e.antecedents.some(i=>i.id===n.id)||e.antecedents.push(n)}_bindNameToScope(e,n,i){const r=this._currentScope.getBindingType(n);if(r!==void 0){const s=(r===0?this._currentScope.parent:this._currentScope.getGlobalScope().scope).lookUpSymbolRecursive(n);if(s)return s.symbol}else{let a=e.lookUpSymbol(n);return a||(a=e.addSymbol(n,5),(this._currentScope.type===3||this._currentScope.type===4)&&(0,Qi.isPrivateOrProtectedName)(n)&&((0,Qi.isPrivateName)(n)?a.setIsExternallyHidden():this._fileInfo.isStubFile||this._fileInfo.isInPyTypedPackage?this._currentScope.type===4?a.setIsExternallyHidden():this._potentialPrivateSymbols.set(n,a):a.setIsPrivateMember()),i&&i.set(n,a)),a}}_bindPossibleTupleNamedTarget(e,n){switch(e.nodeType){case 38:{this._bindNameToScope(this._currentScope,e.value,n);break}case 52:{e.expressions.forEach(i=>{this._bindPossibleTupleNamedTarget(i,n)});break}case 31:{e.entries.forEach(i=>{this._bindPossibleTupleNamedTarget(i,n)});break}case 54:{this._bindPossibleTupleNamedTarget(e.valueExpression,n);break}case 56:{this._bindPossibleTupleNamedTarget(e.expression,n);break}}}_addImplicitSymbolToCurrentScope(e,n,i){const r=this._addSymbolToCurrentScope(e,!1);r&&(r.addDeclaration({type:0,node:n,intrinsicType:i,path:this._fileInfo.filePath,range:(0,Fa.getEmptyRange)(),moduleName:this._fileInfo.moduleName,isInExceptSuite:this._isInExceptSuite}),r.setIsIgnoredForProtocolMatch())}_addSymbolToCurrentScope(e,n){let i=this._currentScope.lookUpSymbol(e);if(!i){let r=0;n&&(r|=1),this._currentScope.type===2&&(r|=4),this._fileInfo.isStubFile&&(0,Qi.isPrivateOrProtectedName)(e)&&(r|=2),i=this._currentScope.addSymbol(e,r)}return i}_createNewScope(e,n,i){const r=this._currentScope,a=new Uz.Scope(e,n);this._currentScope=a;const s=e===4||e===3||e===1,l=this._currentScopeCodeFlowExpressions;return s&&(this._currentScopeCodeFlowExpressions=new Set),i(),this._currentScopeCodeFlowExpressions=l,this._currentScope=r,a}_addInferredTypeAssignmentForVariable(e,n,i=!1){switch(e.nodeType){case 38:{const r=e,a=this._currentScope.lookUpSymbolRecursive(r.value);if(a&&a.symbol){const s={type:1,node:e,isConstant:(0,Qi.isConstantName)(e.value),inferredTypeSource:n,isInferenceAllowedInPyTyped:this._isInferenceAllowedInPyTyped(r.value),typeAliasName:i?e:void 0,path:this._fileInfo.filePath,range:(0,Ir.convertOffsetsToRange)(r.start,Ps.TextRange.getEnd(r),this._fileInfo.lines),moduleName:this._fileInfo.moduleName,isInExceptSuite:this._isInExceptSuite,docString:this._getVariableDocString(e)};a.symbol.addDeclaration(s)}break}case 35:{const r=this._getMemberAccessInfo(e);if(r){const a=e.memberName;let s=r.classScope.lookUpSymbol(a.value);if(!s){s=r.classScope.addSymbol(a.value,1);const o=this._fileInfo.diagnosticRuleSet.reportPrivateUsage!=="none";(0,Qi.isPrivateOrProtectedName)(a.value)&&o&&s.setIsPrivateMember()}r.isInstanceMember?(!s.isClassMember()||!s.getDeclarations().some(o=>o.type===3&&o.isMethod))&&s.setIsInstanceMember():s.setIsClassMember();const l={type:1,node:e.memberName,isConstant:(0,Qi.isConstantName)(a.value),inferredTypeSource:n,isDefinedByMemberAccess:!0,path:this._fileInfo.filePath,range:(0,Ir.convertOffsetsToRange)(e.memberName.start,e.memberName.start+e.memberName.length,this._fileInfo.lines),moduleName:this._fileInfo.moduleName,isInExceptSuite:this._isInExceptSuite,docString:this._getVariableDocString(e)};s.addDeclaration(l)}break}case 52:{e.expressions.forEach(r=>{this._addInferredTypeAssignmentForVariable(r,n)});break}case 54:{this._addInferredTypeAssignmentForVariable(e.valueExpression,n);break}case 56:{this._addInferredTypeAssignmentForVariable(e.expression,n);break}case 31:{e.entries.forEach(r=>{this._addInferredTypeAssignmentForVariable(r,n)});break}}}_isInferenceAllowedInPyTyped(e){return["__match_args__","__slots__","__all__"].some(i=>i===e)}_addTypeDeclarationForVariable(e,n){var i,r,a;let s=!1;switch(e.nodeType){case 38:{const l=e,o=this._currentScope.lookUpSymbolRecursive(l.value);if(o&&o.symbol){const u=this._isAnnotationFinal(n),f=this._isAnnotationTypeAlias(n);let y=n,p=n;f?(y=void 0,p=void 0,this._currentScope.type!==2&&this._currentScope.type!==3&&this._currentScope.type!==4&&this._addError(Ln.Localizer.Diagnostic.typeAliasNotInModuleOrClass(),n)):u.isFinal&&(p=u.finalTypeNode,u.finalTypeNode||(y=void 0));let b=this._isAnnotationClassVar(n);if(b.isClassVar&&(p=b.classVarTypeNode,b.classVarTypeNode||(y=void 0)),u.isFinal){const m=oi.getEnclosingClassOrFunction(e);m&&m.nodeType===10&&(((i=e.parent)===null||i===void 0?void 0:i.nodeType)===3||((a=(r=e.parent)===null||r===void 0?void 0:r.parent)===null||a===void 0?void 0:a.nodeType)===3)&&(b={isClassVar:!0,classVarTypeNode:void 0})}const v={type:1,node:e,isConstant:(0,Qi.isConstantName)(l.value),isFinal:u.isFinal,isClassVar:b.isClassVar,isRequired:this._isRequiredAnnotation(p),isNotRequired:this._isNotRequiredAnnotation(p),typeAliasAnnotation:f?n:void 0,typeAliasName:f?e:void 0,path:this._fileInfo.filePath,typeAnnotationNode:y,range:(0,Ir.convertOffsetsToRange)(l.start,Ps.TextRange.getEnd(l),this._fileInfo.lines),moduleName:this._fileInfo.moduleName,isInExceptSuite:this._isInExceptSuite,docString:this._getVariableDocString(e)};if(o.symbol.addDeclaration(v),b.isClassVar?o.symbol.setIsClassVar():o.symbol.setIsInstanceMember(),n.nodeType===24){if(this._isDataclassesAnnotation(n.baseExpression,"InitVar"))o.symbol.setIsInitVar();else if(this._isTypingAnnotation(n.baseExpression,"Annotated")&&n.items.length>0){const m=n.items[0].valueExpression;m.nodeType===24&&this._isDataclassesAnnotation(m.baseExpression,"InitVar")&&o.symbol.setIsInitVar()}}}s=!0;break}case 35:{const l=this._getMemberAccessInfo(e);if(l){const o=e.memberName;let u=l.classScope.lookUpSymbol(o.value);if(!u){u=l.classScope.addSymbol(o.value,1);const p=this._fileInfo.diagnosticRuleSet.reportPrivateUsage!=="none";(0,Qi.isPrivateOrProtectedName)(o.value)&&p&&u.setIsPrivateMember()}l.isInstanceMember?u.setIsInstanceMember():u.setIsClassMember();const f=this._isAnnotationFinal(n),y={type:1,node:e.memberName,isConstant:(0,Qi.isConstantName)(o.value),isDefinedByMemberAccess:!0,isFinal:f.isFinal,path:this._fileInfo.filePath,typeAnnotationNode:f.isFinal&&!f.finalTypeNode?void 0:n,range:(0,Ir.convertOffsetsToRange)(e.memberName.start,e.memberName.start+e.memberName.length,this._fileInfo.lines),moduleName:this._fileInfo.moduleName,isInExceptSuite:this._isInExceptSuite,docString:this._getVariableDocString(e)};u.addDeclaration(y),s=!0}break}}s||this._addError(Ln.Localizer.Diagnostic.annotationNotSupported(),n)}_isTypingAnnotation(e,n){return this._isKnownAnnotation(e,n,this._typingImportAliases,this._typingSymbolAliases)}_isDataclassesAnnotation(e,n){return this._isKnownAnnotation(e,n,this._dataclassesImportAliases,this._dataclassesSymbolAliases)}_isKnownAnnotation(e,n,i,r){if(e.nodeType===38){if(r.get(e.value)===n)return!0}else if(e.nodeType===35&&e.leftExpression.nodeType===38&&e.memberName.value===n){const a=e.leftExpression.value;return i.some(s=>s===a)}return!1}_getVariableDocString(e){var n,i,r,a;let s=e,l;for(;s&&s.nodeType!==3;)s.nodeType===54&&!l&&(l=s),s=s.parent;if((s==null?void 0:s.nodeType)!==3)if(l)s=l;else return;const o=s.parent;if((o==null?void 0:o.nodeType)!==47)return;const u=o.parent;if(!u||u.nodeType!==36&&u.nodeType!==50)return;const f=u.statements.findIndex(v=>v===o);if(f<0||f===u.statements.length-1)return;const y=u.statements[f+1];if(y.nodeType!==47||!oi.isDocString(y))return;let p=!1;if(((n=o==null?void 0:o.parent)===null||n===void 0?void 0:n.nodeType)===36)p=!0;else if(((i=o==null?void 0:o.parent)===null||i===void 0?void 0:i.nodeType)===50&&((a=(r=o==null?void 0:o.parent)===null||r===void 0?void 0:r.parent)===null||a===void 0?void 0:a.nodeType)===10)p=!0;else{const v=oi.getEnclosingFunction(o);v&&v.name.value==="__init__"&&oi.getEnclosingClass(v,!0)&&(p=!0)}if(!p)return;const b=y.statements[0].strings;return b.length===1?b[0].value:b.map(v=>v.value).join("")}_isAnnotationFinal(e){let n=!1,i;return e&&(this._isTypingAnnotation(e,"Final")?n=!0:e.nodeType===24&&e.items.length===1&&this._isAnnotationFinal(e.baseExpression).isFinal&&e.items[0].argumentCategory===0&&!e.items[0].name&&!e.trailingComma&&(n=!0,i=e.items[0].valueExpression)),{isFinal:n,finalTypeNode:i}}_isAnnotationClassVar(e){let n=!1,i;for(;e;)if(e.nodeType===24&&e.items.length>0&&this._isTypingAnnotation(e.baseExpression,"Annotated"))e=e.items[0].valueExpression;else if(this._isTypingAnnotation(e,"ClassVar")){n=!0;break}else if(e.nodeType===24&&e.items.length===1){this._isAnnotationClassVar(e.baseExpression).isClassVar&&e.items[0].argumentCategory===0&&!e.items[0].name&&!e.trailingComma&&(n=!0,i=e.items[0].valueExpression);break}else break;return{isClassVar:n,classVarTypeNode:i}}_isRequiredAnnotation(e){return!!(e&&e.nodeType===24&&e.items.length===1&&this._isTypingAnnotation(e.baseExpression,"Required"))}_isNotRequiredAnnotation(e){return!!(e&&e.nodeType===24&&e.items.length===1&&this._isTypingAnnotation(e.baseExpression,"NotRequired"))}_isAnnotationTypeAlias(e){return e?this._isTypingAnnotation(e,"TypeAlias"):!1}_getMemberAccessInfo(e){if(e.leftExpression.nodeType!==38)return;const n=e.leftExpression.value,i=oi.getEnclosingFunction(e);if(!i)return;const r=oi.getEnclosingClass(i,!0);if(!r)return;let a=!1;if(i.parameters.length<1||!i.parameters[0].name)return;const s=r.name.value,l=i.parameters[0].name.value;if(n===s)a=!1;else{if(n!==l)return;if(i.name.value==="__new__")a=!1;else{a=!0;for(const u of i.decorators)if(u.expression.nodeType===38){const f=u.expression.value;if(f==="staticmethod")return;if(f==="classmethod"){a=!1;break}}}}const o=nn.getScope(r);return(0,Eo.assert)(o!==void 0),{classNode:r,methodNode:i,classScope:o,isInstanceMember:a}}_addImplicitImportsToLoaderActions(e,n){e.filteredImplicitImports.forEach(i=>{const r=n.implicitImports?n.implicitImports.get(i.name):void 0;r?(r.path=i.path,r.loadSymbolsFromPath=!0):(n.implicitImports||(n.implicitImports=new Map),n.implicitImports.set(i.name,{path:i.path,loadSymbolsFromPath:!0,implicitImports:new Map}))})}_handleTypingStubAssignmentOrAnnotation(e){if(!this._fileInfo.isTypingStubFile)return!1;let n;if(e.nodeType===54)n=e;else{if(e.leftExpression.nodeType!==54)return!1;n=e.leftExpression}if(n.valueExpression.nodeType!==38)return!1;const i=n.valueExpression,r=new Map([["Tuple",!0],["Generic",!0],["Protocol",!0],["Callable",!0],["Type",!0],["ClassVar",!0],["Final",!0],["Literal",!0],["TypedDict",!0],["Union",!0],["Optional",!0],["Annotated",!0],["TypeAlias",!0],["OrderedDict",!0],["Concatenate",!0],["TypeGuard",!0],["StrictTypeGuard",!0],["Unpack",!0],["Self",!0],["NoReturn",!0],["Never",!0],["LiteralString",!0]]),a=i.value;if(!r.has(a))return!1;const s=this._bindNameToScope(this._currentScope,a);return s&&s.addDeclaration({type:5,node:n,path:this._fileInfo.filePath,range:(0,Ir.convertOffsetsToRange)(n.start,Ps.TextRange.getEnd(n),this._fileInfo.lines),moduleName:this._fileInfo.moduleName,isInExceptSuite:this._isInExceptSuite}),!0}_deferBinding(e){this._moduleSymbolOnly||this._deferredBindingTasks.push({scope:this._currentScope,codeFlowExpressions:this._currentScopeCodeFlowExpressions,callback:e})}_bindDeferred(){for(;this._deferredBindingTasks.length>0;){const e=this._deferredBindingTasks.shift();this._currentScope=e.scope,this._currentScopeCodeFlowExpressions=e.codeFlowExpressions,e.callback()}}_bindYield(e){const n=oi.getEnclosingFunction(e);n?n.isAsync&&e.nodeType===61&&this._addError(Ln.Localizer.Diagnostic.yieldFromOutsideAsync(),e):oi.getEnclosingLambda(e)||this._addError(Ln.Localizer.Diagnostic.yieldOutsideFunction(),e),this._targetFunctionDeclaration&&(this._targetFunctionDeclaration.yieldStatements||(this._targetFunctionDeclaration.yieldStatements=[]),this._targetFunctionDeclaration.yieldStatements.push(e),this._targetFunctionDeclaration.isGenerator=!0),e.expression&&this.walk(e.expression),nn.setFlowNode(e,this._currentFlowNode)}_getUniqueFlowNodeId(){return this._codeFlowComplexity+=Bz,(0,gn.getUniqueFlowNodeId)()}_addDiagnostic(e,n,i,r){let a;switch(e){case"error":a=this._addError(i,r);break;case"warning":a=this._addWarning(i,r);break;case"information":a=this._addInformation(i,r);break;case"none":break;default:return(0,Eo.assertNever)(e,`${e} is not expected`)}return a&&a.setRule(n),a}_addError(e,n){return this._fileInfo.diagnosticSink.addDiagnosticWithTextRange("error",e,n)}_addWarning(e,n){return this._fileInfo.diagnosticSink.addDiagnosticWithTextRange("warning",e,n)}_addInformation(e,n){return this._fileInfo.diagnosticSink.addDiagnosticWithTextRange("information",e,n)}}no.Binder=ur;ur._unreachableFlowNode={flags:gn.FlowFlags.Unreachable,id:(0,gn.getUniqueFlowNodeId)()};class pD extends Sv.ParseTreeWalker{constructor(){super(...arguments),this._containsYield=!1}checkContainsYield(e){return this.walk(e),this._containsYield}visitYield(e){return this._containsYield=!0,!1}visitYieldFrom(e){return this._containsYield=!0,!1}}no.YieldFinder=pD;class Wz extends Sv.ParseTreeWalker{constructor(){super(...arguments),this._containsReturn=!1}checkContainsReturn(e){return this.walk(e),this._containsReturn}visitReturn(e){return this._containsReturn=!0,!1}}no.ReturnFinder=Wz;var cm={},ca={},uo={},zd={};Object.defineProperty(zd,"__esModule",{value:!0});zd.maxSubtypesForInferredType=void 0;zd.maxSubtypesForInferredType=64;Object.defineProperty(uo,"__esModule",{value:!0});uo.populateTypeVarContextBasedOnExpectedType=uo.assignTypeToTypeVar=void 0;const $z=Oi,ds=ir,jz=zd,Wt=wn,ni=$n,xo=xr;function qz(t,e,n,i,r,a=0,s=0){var l;let o=!0;const u=(a&2)!==0;if(!e.scopeId)return!0;if(!r.hasSolveForScope(e.scopeId)){if((0,Wt.isAnyOrUnknown)(n)||(0,Wt.isClass)(n)&&Wt.ClassType.derivesFromAnyOrUnknown(n)||(a&512)!==0||u&&t.assignType(t.makeTopLevelTypeVarsConcrete(e),t.makeTopLevelTypeVarsConcrete(n),void 0,void 0,void 0,a,s))return!0;if(o=!1,!e.details.isSynthesized)return i==null||i.addMessage(ds.Localizer.DiagnosticAddendum.typeAssignmentMismatch().format({sourceType:t.printType(n),destType:t.printType(e)})),!1}if((a&8)!==0)return t.assignType(t.makeTopLevelTypeVarsConcrete(e),t.makeTopLevelTypeVarsConcrete(n),i,void 0,void 0,a,s);if(e.details.isParamSpec)return Gz(t,e,n,i,r,s);if(e.details.isVariadic&&!(0,Wt.isUnpacked)(n)){const P=t.getTupleClassType();P&&(0,Wt.isInstantiableClass)(P)?n=(0,ni.convertToInstance)((0,ni.specializeTupleClass)(P,[{type:n,isUnbounded:!1}],!0,!0,!0)):n=Wt.UnknownType.create()}Wt.TypeBase.isInstantiable(e)&&(0,Wt.isClassInstance)(n)&&Wt.ClassType.isBuiltIn(n,"type")&&!n.typeArguments&&(n=Wt.AnyType.create());const f=r.getTypeVar(e),y=f==null?void 0:f.narrowBound,p=(l=f==null?void 0:f.wideBound)!==null&&l!==void 0?l:e.details.boundType;if(e.details.constraints.length>0){let P;const G=t.makeTopLevelTypeVarsConcrete(n);if((0,Wt.isTypeVar)(n))t.assignType(e,G,void 0,new xo.TypeVarContext(e.scopeId),void 0,0,s)&&(P=n,Wt.TypeBase.isInstantiable(n)&&(P=(0,ni.convertToInstance)(n)));else{let te=!0,q;P=(0,ni.mapSubtypes)(G,U=>{let D;if((0,Wt.isAnyOrUnknown)(U))return U;let M;return e.details.constraints.forEach((T,N)=>{const J=Wt.TypeBase.isInstantiable(e)?(0,ni.convertToInstantiable)(T):T;t.assignType(J,U,void 0,void 0,void 0,0,s)&&(!D||t.assignType(Wt.TypeBase.isInstantiable(e)?(0,ni.convertToInstantiable)(D):D,J,void 0,void 0,void 0,0,s))&&(D=(0,ni.addConditionToType)(T,(0,ni.getTypeCondition)(U)),M=N)}),D||u||(te=!1),M!==void 0&&!(0,ni.getTypeCondition)(U)&&(q!==void 0&&q!==M&&(te=!1),q=M),D}),((0,Wt.isNever)(P)||!te)&&(P=void 0),!P&&(0,Wt.isUnion)(G)&&(P=e.details.constraints.find(U=>{const D=Wt.TypeBase.isInstantiable(e)?(0,ni.convertToInstantiable)(U):U;return t.assignType(D,G,void 0,void 0,void 0,0,s)}))}if(!P)return i==null||i.addMessage(ds.Localizer.DiagnosticAddendum.typeConstrainedTypeVar().format({type:t.printType(n),name:e.details.name})),!1;if(y&&!(0,Wt.isAnyOrUnknown)(y)){if(!t.assignType(y,P,void 0,void 0,void 0,0,s))if(t.assignType(P,y,void 0,void 0,void 0,0,s))!r.isLocked()&&o&&r.setTypeVarType(e,P);else return i==null||i.addMessage(ds.Localizer.DiagnosticAddendum.typeConstrainedTypeVar().format({type:t.printType(P),name:t.printType(y)})),!1}else!r.isLocked()&&o&&r.setTypeVarType(e,P);return!0}let b=y,v=p;const m=i?new $z.DiagnosticAddendum:void 0,V=(a&128)!==0||r.getRetainLiterals(e)||e.details.boundType&&(0,ni.containsLiteralType)(e.details.boundType)||e.details.constraints.some(P=>(0,ni.containsLiteralType)(P));let F=V?n:(0,ni.stripLiteralValue)(n);if(Wt.TypeBase.isInstantiable(e))if((0,ni.isEffectivelyInstantiable)(F))F=(0,ni.convertToInstance)(F);else return i==null||i.addMessage(ds.Localizer.DiagnosticAddendum.typeAssignmentMismatch().format({sourceType:t.printType(F),destType:t.printType(e)})),!1;if(u||(a&4)!==0){if(!p)v=F;else if(!(0,Wt.isTypeSame)(p,F,void 0,void 0,s)){if(t.assignType(p,t.makeTopLevelTypeVarsConcrete(F),m,void 0,void 0,a&512,s))v=F;else if(!t.assignType(F,p,m,void 0,void 0,a&512,s))return i&&m&&(i.addMessage(ds.Localizer.DiagnosticAddendum.typeAssignmentMismatch().format({sourceType:t.printType(F),destType:t.printType(p)})),i.addAddendum(m)),!1}if(y&&!t.assignType(v,y,void 0,void 0,void 0,a&512,s))return i&&m&&(i.addMessage(ds.Localizer.DiagnosticAddendum.typeAssignmentMismatch().format({sourceType:t.printType(F),destType:t.printType(y)})),i.addAddendum(m)),!1}else{if(!y)b=F;else if(!(0,Wt.isTypeSame)(y,F,void 0,void 0,s))if(t.assignType(y,F,m,new xo.TypeVarContext(e.scopeId),void 0,a,s))(0,ni.isPartlyUnknown)(y)&&!(0,Wt.isUnknown)(F)&&t.assignType(F,y,void 0,new xo.TypeVarContext(e.scopeId),void 0,a&512,s)?b=F:b=y;else{if(r.isLocked()||(0,Wt.isTypeVar)(F))return i==null||i.addMessage(ds.Localizer.DiagnosticAddendum.typeAssignmentMismatch().format({sourceType:t.printType(y),destType:t.printType(F)})),!1;const P=e;if((0,Wt.isVariadicTypeVar)(P))return i==null||i.addMessage(ds.Localizer.DiagnosticAddendum.typeAssignmentMismatch().format({sourceType:t.printType(y),destType:t.printType(F)})),!1;if(t.assignType(F,y,void 0,new xo.TypeVarContext(e.scopeId),void 0,a&512,s))b=F;else{const G=t.getObjectType();(0,Wt.isUnion)(y)&&y.subtypes.length>jz.maxSubtypesForInferredType&&e.details.boundType!==void 0&&G&&(0,Wt.isClassInstance)(G)?b=(0,Wt.combineTypes)([y,G]):b=(0,Wt.combineTypes)([y,F])}}if(p&&b&&!(0,Wt.isTypeSame)(p,b,void 0,void 0,s)){let P=!0;if((0,Wt.isTypeVar)(p)&&((0,Wt.isTypeSame)(b,p)||(0,Wt.isUnion)(b)&&b.subtypes.some(G=>(0,Wt.isTypeSame)(G,p)))&&(P=!1),!t.assignType(P?t.makeTopLevelTypeVarsConcrete(p):p,b,i==null?void 0:i.createAddendum(),new xo.TypeVarContext(e.scopeId),void 0,a&512,s))return i&&m&&i.addMessage(ds.Localizer.DiagnosticAddendum.typeAssignmentMismatch().format({sourceType:t.printType(F),destType:t.printType(p)})),!1}}if(e.details.boundType){const P=b||v;if(Wt.TypeBase.isInstantiable(e)&&!Wt.TypeBase.isInstantiable(n))return!1;const G=e.details.isSynthesizedSelf?r:new xo.TypeVarContext(e.scopeId);if(!t.assignType(e.details.boundType,t.makeTopLevelTypeVarsConcrete(P),i==null?void 0:i.createAddendum(),G,void 0,a&512,s))return e.details.isSynthesized||i==null||i.addMessage(ds.Localizer.DiagnosticAddendum.typeBound().format({sourceType:t.printType(P),destType:t.printType(e.details.boundType),name:Wt.TypeVarType.getReadableName(e)})),!1}return!r.isLocked()&&o&&r.setTypeVarType(e,b,v,V),!0}uo.assignTypeToTypeVar=qz;function Gz(t,e,n,i,r,a=0){if((0,Wt.isTypeVar)(n)&&n.details.isParamSpec){const s=r.getParamSpec(e);if(s){if(s.parameters.length===0&&s.paramSpec&&(0,Wt.isTypeSame)(s.paramSpec,n,void 0,void 0,a))return!0}else return!r.isLocked()&&r.hasSolveForScope(e.scopeId)&&r.setParamSpec(e,{flags:0,parameters:[],typeVarScopeId:void 0,docString:void 0,paramSpec:n}),!0}else if((0,Wt.isFunction)(n)){const s=n,l=n.details.parameters.map((u,f)=>({category:u.category,name:u.name,isNameSynthesized:u.isNameSynthesized,hasDefault:!!u.hasDefault,type:Wt.FunctionType.getEffectiveParameterType(s,f)})),o=r.getParamSpec(e);if(o){if(o.paramSpec===n.details.paramSpec){const u=(0,ni.convertParamSpecValueToType)(o,!0),f=(0,ni.convertParamSpecValueToType)({parameters:l,flags:n.details.flags,typeVarScopeId:n.details.typeVarScopeId,docString:void 0,paramSpec:void 0},!0);if(t.assignType(u,f,void 0,void 0,void 0,32,a))return!0}}else return!r.isLocked()&&r.hasSolveForScope(e.scopeId)&&r.setParamSpec(e,{parameters:l,typeVarScopeId:n.details.typeVarScopeId,flags:n.details.flags,docString:n.details.docString,paramSpec:n.details.paramSpec}),!0}else if((0,Wt.isAnyOrUnknown)(n))return!0;return i==null||i.addMessage(ds.Localizer.DiagnosticAddendum.typeParamSpec().format({type:t.printType(n),name:e.details.name})),!1}function Kz(t,e,n,i,r){if((0,Wt.isAny)(n))return e.details.typeParameters.forEach(p=>{i.setTypeVarType(p,n)}),!0;if(!(0,Wt.isClass)(n))return!1;const a=n.typeArguments;if(!a)return t.assignType(e,n,void 0,i,void 0,1024);if(Wt.ClassType.isSameGenericClass(n,e)){const p=(0,ni.buildTypeVarContextFromSpecializedClass)(n);return p.getTypeVars().forEach(b=>{const v=p.getTypeVarType(b.typeVar);v&&(!(0,Wt.isTypeVar)(v)||v.scopeId!==e.details.typeVarScopeId)&&i.setTypeVarType(b.typeVar,b.typeVar.details.variance===1?void 0:v,b.typeVar.details.variance===2?void 0:v,b.retainLiteral)}),!0}const s=(0,ni.getTypeVarScopeId)(n),l=Wt.ClassType.getTypeParameters(n).map((p,b)=>{const v=Wt.TypeVarType.createInstance(`__dest${b}`);return v.details.isSynthesized=!0,v.details.variance=0,v.scopeId=s,v}),o=Wt.ClassType.cloneForSpecialization(n,l,!0),u=Wt.ClassType.getTypeParameters(e).map((p,b)=>{const v=Wt.TypeVarType.createInstance(`__source${b}`);return v.details.isSynthesized=!0,v.details.synthesizedIndex=b,v.details.isExemptFromBoundCheck=!0,v}),f=Wt.ClassType.cloneForSpecialization(e,u,!0),y=new xo.TypeVarContext(s);if(t.assignType(o,f,void 0,y,void 0,1024)){let p=!0;return l.forEach((b,v)=>{const m=y.getTypeVarType(b);if(m&&(0,Wt.isTypeVar)(m)&&m.details.isSynthesized&&m.details.synthesizedIndex!==void 0){const V=Wt.ClassType.getTypeParameters(f)[m.details.synthesizedIndex];if(v<a.length){let F=a[v];r&&(F=(0,ni.transformExpectedTypeForConstructor)(F,i,r)),F?i.setTypeVarType(V,b.details.variance===1?void 0:F,b.details.variance===2?void 0:F):p=!1}}}),p}return!1}uo.populateTypeVarContextBasedOnExpectedType=Kz;var ol={},Hz=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Yz=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Qz=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Hz(e,t,n);return Yz(e,t),e};Object.defineProperty(ol,"__esModule",{value:!0});ol.enumerateLiteralsForType=ol.getTypeNarrowingCallback=void 0;const Jz=ws,hD=kt,Xz=uo,zn=Qz(ze),Zz=qi,eU=Li,mD=Ni,xe=wn,Ft=$n,tU=xr;function Td(t,e,n,i,r=0){if(r>xe.maxTypeRecursionCount)return;if(r++,n.nodeType===4)return iU(t,e,n,i,r);if(n.nodeType===7){const s=n.operator===39||n.operator===40,l=n.operator===12||n.operator===28;if(s||l){const o=n.operator===39||n.operator===12?i:!i;if(n.rightExpression.nodeType===11&&n.rightExpression.constType===26){let u=n.leftExpression;if(u.nodeType===4&&(u=u.name),zn.isMatchingExpression(e,u))return f=>aU(t,f,o);if(u.nodeType===24&&zn.isMatchingExpression(e,u.baseExpression)&&u.items.length===1&&!u.trailingComma&&u.items[0].argumentCategory===0&&!u.items[0].name&&u.items[0].valueExpression.nodeType===40&&u.items[0].valueExpression.isInteger&&!u.items[0].valueExpression.isImaginary){const f=u.items[0].valueExpression.value;if(typeof f=="number")return y=>sU(t,y,o,f)}}if(s&&n.leftExpression.nodeType===9){const u=t.getTypeOfExpression(n.leftExpression.leftExpression,2).type;if((0,xe.isInstantiableClass)(u)&&xe.ClassType.isBuiltIn(u,"type")&&n.leftExpression.arguments.length===1&&n.leftExpression.arguments[0].argumentCategory===0){const f=n.leftExpression.arguments[0].valueExpression;if(zn.isMatchingExpression(e,f)){const y=t.makeTopLevelTypeVarsConcrete(t.getTypeOfExpression(n.rightExpression).type);if((0,xe.isInstantiableClass)(y))return p=>hU(p,y,o)}}}if(s&&zn.isMatchingExpression(e,n.leftExpression)){const u=t.getTypeOfExpression(n.rightExpression).type;if((0,xe.isClassInstance)(u)&&(xe.ClassType.isEnumClass(u)||xe.ClassType.isBuiltIn(u,"bool"))&&u.literalValue!==void 0)return f=>Xy(t,f,u,o,!0)}if(l){const u=n.operator===12?i:!i;if(zn.isMatchingExpression(e,n.leftExpression)){const f=t.getTypeOfExpression(n.rightExpression).type;if((0,xe.isClassInstance)(f)&&f.literalValue!==void 0)return y=>Xy(t,y,f,u,!1)}if(zn.isMatchingExpression(e,n.rightExpression)){const f=t.getTypeOfExpression(n.leftExpression).type;if((0,xe.isClassInstance)(f)&&f.literalValue!==void 0)return y=>Xy(t,y,f,u,!1)}if(n.leftExpression.nodeType===24&&n.leftExpression.items.length===1&&!n.leftExpression.trailingComma&&n.leftExpression.items[0].argumentCategory===0&&zn.isMatchingExpression(e,n.leftExpression.baseExpression)){const f=t.getTypeOfExpression(n.leftExpression.items[0].valueExpression).type;if((0,xe.isClassInstance)(f)&&(0,Ft.isLiteralType)(f)){if(xe.ClassType.isBuiltIn(f,"str")){const y=t.getTypeOfExpression(n.rightExpression).type;if((0,xe.isClassInstance)(y)&&y.literalValue!==void 0)return p=>dU(t,p,f,y,u)}else if(xe.ClassType.isBuiltIn(f,"int")){const y=t.getTypeOfExpression(n.rightExpression).type;if((0,xe.isClassInstance)(y)&&y.literalValue!==void 0)return p=>fU(t,p,f,y,u)}}}}if(l&&n.leftExpression.nodeType===9&&n.leftExpression.arguments.length===1&&n.rightExpression.nodeType===40&&n.rightExpression.isInteger){const u=n.leftExpression.arguments[0].valueExpression;if(zn.isMatchingExpression(e,u)){const f=t.getTypeOfExpression(n.leftExpression.leftExpression,2).type;if((0,xe.isFunction)(f)&&f.details.fullName==="builtins.len"){const y=n.rightExpression.value;if(typeof y=="number")return p=>lU(t,p,y,o)}}}if(l&&n.leftExpression.nodeType===35&&zn.isMatchingExpression(e,n.leftExpression.leftExpression)){const u=t.getTypeOfExpression(n.rightExpression).type,f=n.leftExpression.memberName;if((0,xe.isClassInstance)(u)&&u.literalValue!==void 0)return y=>nI(t,y,f.value,u,o)}if(n.leftExpression.nodeType===35&&zn.isMatchingExpression(e,n.leftExpression.leftExpression)){const u=t.getTypeOfExpression(n.rightExpression).type,f=n.leftExpression.memberName;if((0,xe.isClassInstance)(u)&&(xe.ClassType.isEnumClass(u)||xe.ClassType.isBuiltIn(u,"bool"))&&u.literalValue!==void 0)return y=>nI(t,y,f.value,u,o)}if(n.leftExpression.nodeType===35&&zn.isMatchingExpression(e,n.leftExpression.leftExpression)&&n.rightExpression.nodeType===11&&n.rightExpression.constType===26){const u=n.leftExpression.memberName;return f=>pU(t,f,u.value,o)}}if(n.operator===41||n.operator===42){if(zn.isMatchingExpression(e,n.leftExpression)){const o=t.getTypeOfExpression(n.rightExpression).type;if(n.operator===41?i:!i)return f=>cU(t,f,o)}if(zn.isMatchingExpression(e,n.rightExpression)){const o=t.getTypeOfExpression(n.leftExpression).type;if((0,xe.isClassInstance)(o)&&xe.ClassType.isBuiltIn(o,"str")&&(0,Ft.isLiteralType)(o)){const u=n.operator===41?i:!i;return f=>uU(t,f,xe.ClassType.cloneAsInstantiable(o),u)}}}}if(n.nodeType===9){const s=t.getTypeOfExpression(n.leftExpression,2).type;if((0,xe.isFunction)(s)&&(s.details.builtInName==="isinstance"||s.details.builtInName==="issubclass")&&n.arguments.length===2){const l=s.details.builtInName==="isinstance",o=n.arguments[0].valueExpression,u=n.arguments[1].valueExpression;if(zn.isMatchingExpression(e,o)){const f=t.getTypeOfExpression(u,168).type,y=oU(f);if(y)return p=>{const b=tI(t,p,y,l,i,!1,n);return(0,xe.isNever)(b)?tI(t,p,y,l,i,!0,n):b}}}if((0,xe.isFunction)(s)&&s.details.builtInName==="callable"&&n.arguments.length===1){const l=n.arguments[0].valueExpression;if(zn.isMatchingExpression(e,l))return o=>{let u=iI(t,o,i,n,!1);return i&&(0,xe.isNever)(u)&&(u=iI(t,o,i,n,!0)),u}}if((0,xe.isInstantiableClass)(s)&&xe.ClassType.isBuiltIn(s,"bool")&&n.arguments.length===1&&!n.arguments[0].name&&zn.isMatchingExpression(e,n.arguments[0].valueExpression))return l=>eI(t,l,i);if(n.arguments.length>=1){const l=n.arguments[0].valueExpression;if(zn.isMatchingExpression(e,l)&&(0,xe.isFunction)(s)&&s.details.declaredReturnType&&(0,xe.isClassInstance)(s.details.declaredReturnType)&&xe.ClassType.isBuiltIn(s.details.declaredReturnType,["TypeGuard","StrictTypeGuard"])){const o=t.getTypeOfExpression(n).type;if((0,xe.isClassInstance)(o)&&xe.ClassType.isBuiltIn(o,"bool")&&o.typeGuardType){const u=xe.ClassType.isBuiltIn(s.details.declaredReturnType,"StrictTypeGuard"),f=o.typeGuardType;return y=>rU(t,y,f,i,u)}}}}if(zn.isMatchingExpression(e,n))return s=>eI(t,s,i);const a=nU(t,e,n,i,r);if(a)return a;if(e.nodeType===38&&n.nodeType===55&&n.operator===38)return Td(t,e,n.expression,!i,r)}ol.getTypeNarrowingCallback=Td;function nU(t,e,n,i,r){if(n.nodeType!==38||e.nodeType!==38||n===e)return;const a=ZS(t,n,n);if(!a||a.length!==1||a[0].type!==1)return;const s=ZS(t,e,n);if(!s)return;let l=[];if(s.length>1&&(l=s.filter(u=>t.isNodeReachable(n,u.node)&&t.isNodeReachable(u.node,a[0].node))),l.length!==0)return;const o=a[0].inferredTypeSource;if(!(!o||zn.isNodeContainedWithin(n,o)||!(0,Jz.isExpressionNode)(o)))return Td(t,e,o,i,r)}function ZS(t,e,n){const i=(0,Zz.getScopeForNode)(e);if((i==null?void 0:i.type)!==1&&(i==null?void 0:i.type)!==3)return;const r=i.lookUpSymbol(e.value);if(!r)return;const a=r.getDeclarations();if(a.length===0||a.some(o=>o.type!==1&&o.type!==2))return;let s;if(a.some(o=>{const u=o.type===2?o.node.name:o.node,f=zn.getExecutionScopeNode(u);return s&&f!==s?!0:(s=f,!1)}))return;const l=a.filter(o=>t.isNodeReachable(n,o.node));return l.length>0?l:void 0}function iU(t,e,n,i,r){var a;return(a=Td(t,e,n.rightExpression,i,r))!==null&&a!==void 0?a:Td(t,e,n.name,i,r)}function rU(t,e,n,i,r){return r?(0,Ft.mapSubtypes)(e,a=>(0,Ft.mapSubtypes)(n,s=>{const l=t.assignType(n,a),o=t.assignType(a,s);if(i){if(l)return a;if(o)return s}else if(!l&&!l)return a})):i?n:e}function eI(t,e,n){return(0,Ft.mapSubtypes)(e,i=>{if(n){if(t.canBeTruthy(i))return t.removeFalsinessFromType(i)}else if(t.canBeFalsy(i))return t.removeTruthinessFromType(i)})}function sU(t,e,n,i){return t.mapSubtypesExpandTypeVars(e,void 0,r=>{const a=(0,Ft.getSpecializedTupleType)(r);if(!a||(0,Ft.isUnboundedTupleClass)(a)||!a.tupleTypeArguments)return r;const s=a.tupleTypeArguments.length;if(i<0||i>=s)return r;const l=t.makeTopLevelTypeVarsConcrete(a.tupleTypeArguments[i].type);if(n){if(!t.assignType(l,xe.NoneType.createInstance()))return}else if((0,xe.isNoneInstance)(l))return;return r})}function aU(t,e,n){const i=(0,Ft.mapSubtypes)(e,r=>(0,Ft.transformPossibleRecursiveTypeAlias)(r));return t.mapSubtypesExpandTypeVars(i,void 0,(r,a)=>{if((0,xe.isAnyOrUnknown)(r))return r;const s=(0,xe.isTypeVar)(a)&&a.details.constraints.length===0?a:r;if((0,xe.isClassInstance)(r)&&xe.ClassType.isBuiltIn(r,"object"))return n?(0,Ft.addConditionToType)(xe.NoneType.createInstance(),r.condition):s;if((0,xe.isNoneInstance)(r)===n)return r})}function oU(t){let e=!1;const n=[],i=a=>{a.forEach(s=>{(0,xe.isInstantiableClass)(s)||(0,xe.isTypeVar)(s)&&xe.TypeBase.isInstantiable(s)||(0,xe.isNoneTypeClass)(s)||(0,xe.isFunction)(s)&&s.details.parameters.length===2&&s.details.parameters[0].category===1&&s.details.parameters[1].category===2?n.push(s):e=!0})},r=(a,s=0)=>{s>xe.maxTypeRecursionCount||((0,xe.isClass)(a)&&xe.TypeBase.isInstance(a)&&(0,Ft.isTupleClass)(a)?a.tupleTypeArguments&&a.tupleTypeArguments.forEach(l=>{r(l.type,s+1)}):i([a]))};return(0,Ft.doForEachSubtype)(t,a=>{r(a)}),e?void 0:n}function tI(t,e,n,i,r,a,s){const l=(0,Ft.mapSubtypes)(e,b=>(0,Ft.transformPossibleRecursiveTypeAlias)(b)),o=(b,v,m,V)=>{const F=[];let P=!1,G=!1;for(const te of n){const q=t.makeTopLevelTypeVarsConcrete(te);if((0,xe.isInstantiableClass)(q)){const U=!(0,xe.isTypeVar)(te)&&(xe.ClassType.isDerivedFrom(b,q)||i&&xe.ClassType.isProtocolClass(q)&&t.assignType(q,b)||xe.ClassType.isBuiltIn(q,"dict")&&xe.ClassType.isTypedDictClass(b)),D=xe.ClassType.isDerivedFrom(q,b)||i&&xe.ClassType.isProtocolClass(b)&&t.assignType(b,q);if(U&&(P=!0),D&&U&&!xe.ClassType.isSameGenericClass(b,q)&&(G=!0),r){if(U)F.push((0,Ft.addConditionToType)(b,m));else if(D){let M=te;if((0,xe.isClass)(te)&&(xe.ClassType.isSpecialBuiltIn(te)||te.details.typeParameters.length>0)){const T=new tU.TypeVarContext((0,Ft.getTypeVarScopeId)(te)),N=xe.ClassType.cloneForSpecialization(te,void 0,!1);(0,Xz.populateTypeVarContextBasedOnExpectedType)(t,N,b,T,void 0)&&(M=(0,Ft.applySolvedTypeVars)(N,T,!0))}F.push((0,Ft.addConditionToType)(M,m))}else if(a){const M=`<subclass of ${b.details.name} and ${q.details.name}>`,T=(0,hD.getFileInfo)(s);let N=xe.ClassType.createInstantiable(M,zn.getClassFullName(s,T.moduleName,M),T.moduleName,T.filePath,0,zn.getTypeSourceId(s),void 0,b.details.effectiveMetaclass,b.details.docString);N.details.baseClasses=[xe.ClassType.cloneAsInstantiable(b),q],(0,Ft.computeMroLinearization)(N),N=(0,Ft.addConditionToType)(N,q.condition),(0,xe.isTypeVar)(v)&&!v.details.isParamSpec&&v.details.constraints.length===0&&(N=(0,Ft.addConditionToType)(N,[{typeVarName:xe.TypeVarType.getNameWithScope(v),constraintIndex:0,isConstrainedTypeVar:!1}]));const J=xe.ClassType.cloneAsInstance(N);F.push(i?J:xe.ClassType.cloneAsInstantiable(J))}}}else if((0,xe.isTypeVar)(te)&&xe.TypeBase.isInstantiable(te))i&&xe.TypeBase.isInstance(v)?(0,xe.isTypeVar)(v)&&(0,xe.isTypeSame)((0,Ft.convertToInstance)(te),v)?r&&F.push(v):r?F.push((0,Ft.convertToInstance)(te)):(F.push(v),G=!0):!i&&xe.TypeBase.isInstantiable(v)&&((0,xe.isTypeVar)(v)&&(0,xe.isTypeSame)(te,v)?r&&F.push(v):r?F.push(te):(F.push(v),G=!0));else if((0,xe.isFunction)(te)&&i){let U=!1;(0,xe.isClass)(b)&&(xe.TypeBase.isInstantiable(v)?U=!0:U=!!(0,Ft.lookUpClassMember)(b,"__call__")),U&&(r?F.push(v):P=!0)}}return r||(!P||G)&&F.push(V),i?F.map(te=>(0,Ft.convertToInstance)(te)):F},u=(b,v)=>{const m=[];if(r)for(const V of n){const F=t.makeTopLevelTypeVarsConcrete(V);t.assignType(b,(0,Ft.convertToInstance)(F))&&((0,xe.isFunction)(V)?m.push(v):m.push((0,Ft.convertToInstance)(V)))}else n.some(V=>{const F=t.makeTopLevelTypeVarsConcrete(V);return(0,xe.isClass)(F)&&!xe.ClassType.isProtocolClass(F)?!1:t.assignType(b,(0,Ft.convertToInstance)(F))})||m.push(v);return m},f=[],y=[],p=t.mapSubtypesExpandTypeVars(l,void 0,(b,v)=>{const m=(0,Ft.getTypeCondition)(b)?b:v,V=(0,xe.isClassInstance)(b)&&xe.ClassType.isBuiltIn(b,"type");if(r&&(0,xe.isAnyOrUnknown)(b)){i?f.push((0,xe.combineTypes)(n.map(F=>(0,Ft.convertToInstance)(F)))):f.push((0,xe.combineTypes)(n.map(F=>(0,Ft.convertToInstantiable)((0,Ft.convertToInstance)(F))))),y.push(b);return}if(i){if((0,xe.isNoneInstance)(b)){const F=n.some(P=>(0,xe.isNoneTypeClass)(P));return r?F?b:void 0:F?void 0:b}if(((0,xe.isModule)(b)||(0,xe.isClassInstance)(b)&&xe.ClassType.isBuiltIn(b,"ModuleType"))&&r){const F=n.filter(P=>{const G=t.makeTopLevelTypeVarsConcrete(P);return(0,xe.isInstantiableClass)(G)&&xe.ClassType.isProtocolClass(G)});if(F.length>0)return(0,Ft.convertToInstance)((0,xe.combineTypes)(F))}if((0,xe.isClassInstance)(b)&&!V)return(0,xe.combineTypes)(o(xe.ClassType.cloneAsInstantiable(b),(0,Ft.convertToInstance)(v),(0,Ft.getTypeCondition)(b),m));if(((0,xe.isFunction)(b)||(0,xe.isOverloadedFunction)(b))&&i)return(0,xe.combineTypes)(u(b,(0,Ft.convertToInstance)(v)));if((0,xe.isInstantiableClass)(b)||V){const F=n.some(P=>(0,xe.isInstantiableClass)(P)&&xe.ClassType.isBuiltIn(P,"type"));return r?F?m:void 0:F?void 0:m}}else{if((0,xe.isInstantiableClass)(b))return(0,xe.combineTypes)(o(b,v,(0,Ft.getTypeCondition)(b),m));if(V){const F=t.getBuiltInObject(s,"object");if(F&&(0,xe.isClassInstance)(F))return(0,xe.combineTypes)(o(xe.ClassType.cloneAsInstantiable(F),(0,Ft.convertToInstantiable)(v),(0,Ft.getTypeCondition)(b),m))}}return r?void 0:m});return(0,xe.isNever)(p)&&f.length>0?(0,xe.combineTypes)(f):y.length>0?(0,xe.combineTypes)([p,...y]):p}function lU(t,e,n,i){return(0,Ft.mapSubtypes)(e,r=>{const a=t.makeTopLevelTypeVarsConcrete(r);return!(0,xe.isClassInstance)(a)||!(0,Ft.isTupleClass)(a)||(0,Ft.isUnboundedTupleClass)(a)||!a.tupleTypeArguments||a.tupleTypeArguments.length===n===i?r:void 0})}function cU(t,e,n){if(!(0,xe.isClassInstance)(n)||!xe.ClassType.isBuiltIn(n))return e;const i=n.details.name;if(!["list","set","frozenset","deque","tuple","dict","defaultdict","OrderedDict"].some(o=>o===i)||!n.typeArguments||n.typeArguments.length<1)return e;let r=n.typeArguments[0];(0,Ft.isTupleClass)(n)&&n.tupleTypeArguments&&(r=(0,xe.combineTypes)(n.tupleTypeArguments.map(o=>o.type)));let a=!0;const s=(0,Ft.stripLiteralValue)(r),l=(0,Ft.mapSubtypes)(e,o=>{const u=t.makeTopLevelTypeVarsConcrete(o);if((0,xe.isAnyOrUnknown)(u))return a=!1,o;if(t.assignType(r,u))return o;if(t.assignType(s,u))return(0,Ft.mapSubtypes)(r,f=>{if((0,xe.isClassInstance)(f)&&(0,xe.isSameWithoutLiteralValue)(o,f))return f})});return a?l:e}function uU(t,e,n,i){return(0,Ft.mapSubtypes)(e,a=>{if((0,xe.isClassInstance)(a)&&xe.ClassType.isTypedDictClass(a)){const l=(0,mD.getTypedDictMembersForClass)(t,a,!0).get(n.literalValue);if(i){if(!l)return xe.ClassType.isFinal(a)?void 0:a;if(l.isRequired||l.isProvided)return a;const o=a.typedDictNarrowedEntries,u=new Map;return o&&o.forEach((f,y)=>{u.set(y,f)}),u.set(n.literalValue,{valueType:l.valueType,isRequired:!1,isProvided:!0}),xe.ClassType.cloneAsInstance(xe.ClassType.cloneForNarrowedTypedDictEntries(xe.ClassType.cloneAsInstantiable(a),u))}else return l!==void 0&&(l.isRequired||l.isProvided)?void 0:a}return a})}function dU(t,e,n,i,r){let a=!0;const s=(0,Ft.mapSubtypes)(e,l=>{if((0,xe.isClassInstance)(l)&&xe.ClassType.isTypedDictClass(l)){const u=(0,mD.getTypedDictMembersForClass)(t,l).get(n.literalValue);if(u&&(0,Ft.isLiteralTypeOrUnion)(u.valueType))return r?t.assignType(u.valueType,i)?l:void 0:t.assignType(i,u.valueType)?void 0:l}return a=!1,l});return a?s:e}function fU(t,e,n,i,r){let a=!0;const s=(0,Ft.mapSubtypes)(e,l=>{var o;if((0,xe.isClassInstance)(l)&&xe.ClassType.isTupleClass(l)&&!(0,Ft.isUnboundedTupleClass)(l)&&typeof n.literalValue=="number"){const u=n.literalValue;if(l.tupleTypeArguments&&u>=0&&u<l.tupleTypeArguments.length){const f=(o=l.tupleTypeArguments[u])===null||o===void 0?void 0:o.type;if(f&&(0,Ft.isLiteralTypeOrUnion)(f))return r?t.assignType(f,i)?l:void 0:t.assignType(i,f)?void 0:l}}return a=!1,l});return a?s:e}function nI(t,e,n,i,r){return(0,Ft.mapSubtypes)(e,s=>{let l;if((0,xe.isClassInstance)(s)?l=(0,Ft.lookUpObjectMember)(s,n):(0,xe.isInstantiableClass)(s)&&(l=(0,Ft.lookUpClassMember)(s,n)),l&&l.isTypeDeclared){let o=t.getTypeOfMember(l);if((0,xe.isClassInstance)(s)&&(0,Ft.isProperty)(o)){const u=(0,Ft.lookUpObjectMember)(o,"fget");if(u&&u.isTypeDeclared){const f=t.getTypeOfMember(u);if((0,xe.isFunction)(f)&&f.details.declaredReturnType){const y=xe.FunctionType.getSpecializedReturnType(f);y&&(o=y)}}}if((0,Ft.isLiteralTypeOrUnion)(o))return r?t.assignType(o,i)?s:void 0:t.assignType(i,o)?void 0:s}return s})}function pU(t,e,n,i){return(0,Ft.mapSubtypes)(e,r=>{let a;if((0,xe.isClassInstance)(r)?a=(0,Ft.lookUpObjectMember)(r,n):(0,xe.isInstantiableClass)(r)&&(a=(0,Ft.lookUpClassMember)(r,n)),a&&a.isTypeDeclared){const s=t.makeTopLevelTypeVarsConcrete(t.getTypeOfMember(a));let l=!0;if(i?(0,Ft.doForEachSubtype)(s,o=>{o=t.makeTopLevelTypeVarsConcrete(o),((0,Ft.isProperty)(o)||(0,Ft.isMaybeDescriptorInstance)(o))&&(l=!1),((0,xe.isAnyOrUnknown)(o)||(0,xe.isNoneInstance)(o)||(0,xe.isNever)(o))&&(l=!1)}):l=(0,xe.isNoneInstance)(s),l)return}return r})}function hU(t,e,n){return(0,Ft.mapSubtypes)(t,i=>{if((0,xe.isClassInstance)(i)){const r=xe.ClassType.isDerivedFrom(e,xe.ClassType.cloneAsInstantiable(i));return n?r?xe.ClassType.isSameGenericClass(i,e)?i:xe.ClassType.cloneAsInstance(e):void 0:r&&xe.ClassType.isFinal(i)?void 0:i}else{if((0,xe.isNoneInstance)(i))return n?void 0:i;if((0,xe.isAnyOrUnknown)(i))return n?xe.ClassType.cloneAsInstance(e):i}return i})}function Xy(t,e,n,i,r){return(0,Ft.mapSubtypes)(e,a=>{if(a=t.makeTopLevelTypeVarsConcrete(a),(0,xe.isClassInstance)(a)&&xe.ClassType.isSameGenericClass(n,a))if(a.literalValue!==void 0){const s=xe.ClassType.isLiteralValueSame(a,n);return s&&!i||!s&&i?void 0:a}else{if(i)return n;{const s=yD(t,a);if(s&&s.length>0)return(0,xe.combineTypes)(s.filter(l=>!xe.ClassType.isLiteralValueSame(l,n)))}}else if(i&&(r||(0,xe.isNoneInstance)(a)))return;return a})}function yD(t,e){if(xe.ClassType.isBuiltIn(e,"bool"))return[xe.ClassType.cloneWithLiteral(e,!0),xe.ClassType.cloneWithLiteral(e,!1)];if(xe.ClassType.isEnumClass(e)){const n=[];return e.details.fields.forEach(r=>{if(!r.isIgnoredForProtocolMatch()){const a=t.getEffectiveTypeOfSymbol(r);(0,xe.isClassInstance)(a)&&xe.ClassType.isSameGenericClass(e,a)&&a.literalValue!==void 0&&n.push(a)}}),n}}ol.enumerateLiteralsForType=yD;function iI(t,e,n,i,r){return t.mapSubtypesExpandTypeVars(e,void 0,a=>{switch(a.category){case 5:case 6:return n?a:void 0;case 3:case 8:return n?void 0:a;case 7:{if(xe.TypeBase.isInstantiable(a)||(0,Ft.lookUpClassMember)(a,"__call__"))return n?a:void 0;if(!n)return a;if(r){const l=`<callable subtype of ${a.details.name}>`,o=(0,hD.getFileInfo)(i);let u=xe.ClassType.createInstantiable(l,zn.getClassFullName(i,o.moduleName,l),o.moduleName,o.filePath,0,zn.getTypeSourceId(i),void 0,a.details.effectiveMetaclass,a.details.docString);u.details.baseClasses=[xe.ClassType.cloneAsInstantiable(a)],(0,Ft.computeMroLinearization)(u),u=(0,Ft.addConditionToType)(u,a.condition);const f=xe.FunctionType.createSynthesizedInstance("__call__"),y={category:0,name:"self",type:xe.ClassType.cloneAsInstance(u),hasDeclaredType:!0};return xe.FunctionType.addParameter(f,y),xe.FunctionType.addDefaultParameters(f),f.details.declaredReturnType=xe.UnknownType.create(),u.details.fields.set("__call__",eU.Symbol.createWithType(4,f)),xe.ClassType.cloneAsInstance(u)}return}default:return a}})}Object.defineProperty(ca,"__esModule",{value:!0});ca.validateClassPattern=ca.assignTypeToPatternTargets=ca.narrowTypeBasedOnPattern=void 0;const mU=Dt,yU=qt,Su=Is,Iu=ir,Cu=kt,gU=uo,gD=Ni,TU=ol,Qe=wn,cn=$n,_U=xr,TD=["builtins.bool","builtins.bytearray","builtins.bytes","builtins.dict","builtins.float","builtins.frozenset","builtins.int","builtins.list","builtins.set","builtins.str","builtins.tuple"];function Zi(t,e,n,i){switch(n.nodeType){case 65:return vU(t,e,n,i);case 67:return IU(t,e,n,i);case 68:return CU(t,e,n,i);case 66:return bU(t,e,n,i);case 70:return SU(t,e,n,i);case 73:return wU(t,e,n,i);case 69:return i?e:Qe.NeverType.createNever();case 0:return e}}ca.narrowTypeBasedOnPattern=Zi;function vU(t,e,n,i){let r=vD(t,e,n.entries.length,n.starEntryIndex);return r=r.filter(a=>{if(a.definiteNoMatch)return!i;let s=!0,l=!0;const o=[];let u=a.isTuple;if(a.isIndeterminateLength&&(n.entries.length!==1||n.starEntryIndex!==0)&&(l=!1),n.entries.forEach((f,y)=>{const p=bD(t,n,a,y,n.entries.length,n.starEntryIndex,!0,!1),b=Zi(t,p,f,i);i?y===n.starEntryIndex?(0,Qe.isClassInstance)(b)&&b.tupleTypeArguments&&!(0,cn.isUnboundedTupleClass)(b)&&b.tupleTypeArguments?(0,mU.appendArray)(o,b.tupleTypeArguments.map(v=>v.type)):(o.push(b),u=!1):(o.push(b),(0,Qe.isNever)(b)&&(s=!1)):(!(0,Qe.isNever)(b)||(0,Qe.isAnyOrUnknown)(p))&&(l=!1)}),!i)return!l;if(s){if(u){const f=t.getBuiltInType(n,"tuple");f&&(0,Qe.isInstantiableClass)(f)&&(a.subtype=Qe.ClassType.cloneAsInstance((0,cn.specializeTupleClass)(f,o.map(y=>({type:y,isUnbounded:!1})))))}if(a.isObject){const f=t.getTypingType(n,"Sequence");f&&(0,Qe.isInstantiableClass)(f)&&(a.subtype=Qe.ClassType.cloneAsInstance(Qe.ClassType.cloneForSpecialization(f,[(0,cn.stripLiteralValue)((0,Qe.combineTypes)(o))],!0)))}}return s}),(0,Qe.combineTypes)(r.map(a=>a.subtype))}function bU(t,e,n,i){let r=e;if(!i)return n.orPatterns.forEach(s=>{r=Zi(t,r,s,!1)}),r;const a=n.orPatterns.map(s=>{const l=Zi(t,r,s,!0);return r=Zi(t,r,s,!1),l});return(0,Qe.combineTypes)(a)}function SU(t,e,n,i){if(!i)return e;let r=_D(t,e);return r=r.filter(a=>{let s=!0;return n.entries.forEach(l=>{if(a.typedDict){if(l.nodeType===71){const o=Zi(t,t.getBuiltInObject(n,"str"),l.keyPattern,i);(0,Qe.isNever)(o)&&(s=!1);const u=(0,cn.mapSubtypes)(o,f=>{if((0,Qe.isAnyOrUnknown)(f))return f;if((0,Qe.isClassInstance)(f)&&Qe.ClassType.isBuiltIn(f,"str")){if(!(0,cn.isLiteralType)(f))return Qe.UnknownType.create();const p=(0,gD.getTypedDictMembersForClass)(t,a.typedDict).get(f.literalValue);if(p){const b=Zi(t,p.valueType,l.valuePattern,!0);if(!(0,Qe.isNever)(b))return b}}});(0,Qe.isNever)(u)&&(s=!1)}}else if(a.dictTypeArgs&&l.nodeType===71){const o=Zi(t,a.dictTypeArgs.key,l.keyPattern,i),u=Zi(t,a.dictTypeArgs.value,l.valuePattern,i);((0,Qe.isNever)(o)||(0,Qe.isNever)(u))&&(s=!1)}}),s}),(0,Qe.combineTypes)(r.map(a=>a.subtype))}function DT(t,e){const n=(0,cn.lookUpClassMember)(e,"__match_args__");if(n){const i=t.getTypeOfMember(n);if((0,Qe.isClassInstance)(i)&&(0,cn.isTupleClass)(i)&&!(0,cn.isUnboundedTupleClass)(i)&&i.tupleTypeArguments){const r=i.tupleTypeArguments;if(r.every(a=>(0,Qe.isClassInstance)(a.type)&&Qe.ClassType.isBuiltIn(a.type,"str")&&(0,cn.isLiteralType)(a.type)))return r.map(a=>a.type.literalValue)}}return[]}function IU(t,e,n,i){const r=t.getTypeOfExpression(n.expression).type;return i?(0,cn.mapSubtypes)(e,a=>{if(t.assignType(a,r))return r}):(0,cn.mapSubtypes)(e,a=>{if(!((0,Qe.isClassInstance)(r)&&(0,cn.isLiteralType)(r)&&(0,Qe.isClassInstance)(a)&&(0,cn.isLiteralType)(a)&&t.assignType(r,a))&&!((0,Qe.isNoneInstance)(a)&&(0,Qe.isNoneInstance)(r)))return(0,Qe.isClassInstance)(a)&&Qe.ClassType.isBuiltIn(a,"bool")&&a.literalValue===void 0&&(0,Qe.isClassInstance)(r)&&Qe.ClassType.isBuiltIn(r,"bool")&&r.literalValue!==void 0?Qe.ClassType.cloneWithLiteral(r,!r.literalValue):a})}function CU(t,e,n,i){let r=t.getTypeOfExpression(n.className,2).type;if((0,Qe.isClass)(r)&&!r.typeAliasInfo&&(r=(0,cn.specializeClassType)(r)),!i){if(!(0,Qe.isInstantiableClass)(r))return e;let a=r;a.details.typeParameters.length>0&&(a=Qe.ClassType.cloneForSpecialization(a,void 0,!1));const s=(0,cn.convertToInstance)(a);return t.mapSubtypesExpandTypeVars(e,void 0,(l,o)=>{if(!(0,Qe.isClassInstance)(l))return o;if(!t.assignType(s,l))return l;if(n.arguments.length===0)return;if(!t.assignType(l,s)&&!Qe.ClassType.isFinal(l))return l;let u=[];n.arguments.some(f=>!f.name)&&(0,Qe.isClass)(l)&&(u=DT(t,l));for(let f=0;f<n.arguments.length;f++){const y=PT(t,n.arguments[f],f,u,l,i);if(!(0,Qe.isNever)(y))return o}})}return!Qe.TypeBase.isInstantiable(r)&&!(0,Qe.isNever)(r)?(t.addDiagnostic((0,Cu.getFileInfo)(n).diagnosticRuleSet.reportGeneralTypeIssues,Su.DiagnosticRule.reportGeneralTypeIssues,Iu.Localizer.DiagnosticAddendum.typeNotClass().format({type:t.printType(r)}),n.className),Qe.NeverType.createNever()):t.mapSubtypesExpandTypeVars(r,void 0,(a,s)=>{if((0,Qe.isAnyOrUnknown)(a))return s;if((0,Qe.isInstantiableClass)(a))return t.mapSubtypesExpandTypeVars(e,void 0,l=>{if((0,Qe.isAnyOrUnknown)(l))return(0,cn.convertToInstance)(s);if((0,Qe.isClassInstance)(l)){let o;if(t.assignType(a,Qe.ClassType.cloneAsInstantiable(l)))o=l;else if(t.assignType(Qe.ClassType.cloneAsInstantiable(l),a)){if(o=(0,cn.addConditionToType)((0,cn.convertToInstance)(s),(0,cn.getTypeCondition)(l)),(0,Qe.isInstantiableClass)(s)&&(0,Qe.isClassInstance)(l)&&(Qe.ClassType.isSpecialBuiltIn(s)||s.details.typeParameters.length>0)){const y=new _U.TypeVarContext((0,cn.getTypeVarScopeId)(s)),p=Qe.ClassType.cloneForSpecialization(s,void 0,!1),b=Qe.ClassType.cloneAsInstance(p);(0,gU.populateTypeVarContextBasedOnExpectedType)(t,b,l,y,[])&&(o=(0,cn.applySolvedTypeVars)(b,y,!0))}}else return;let u=[];n.arguments.some(y=>!y.name)&&(u=DT(t,a));let f=!0;if(n.arguments.forEach((y,p)=>{const b=PT(t,y,p,u,o,i);(0,Qe.isNever)(b)&&(f=!1)}),f)return o}})})}function PT(t,e,n,i,r,a){var s;let l;if(e.name?l=e.name.value:n<i.length&&(l=i[n]),(0,Qe.isAnyOrUnknown)(r))return r;if(!(0,Qe.isClass)(r))return Qe.UnknownType.create();const o=(0,Qe.isClass)(r)&&TD.some(f=>r.details.fullName===f)&&n===0&&!e.name;let u;if(o)u=Qe.ClassType.cloneAsInstance(r);else if(l&&(u=(s=t.useSpeculativeMode(e,()=>t.getTypeOfObjectMember(e,Qe.ClassType.cloneAsInstance(r),l)))===null||s===void 0?void 0:s.type),!u){if(!a)return r;if(Qe.ClassType.isFinal(r))return Qe.NeverType.createNever();u=Qe.UnknownType.create()}return Zi(t,u,e.pattern,a)}function wU(t,e,n,i){const r=t.getTypeOfExpression(n.expression).type,a=[];return t.mapSubtypesExpandTypeVars(r,void 0,(s,l)=>{a.push(t.mapSubtypesExpandTypeVars(e,(0,cn.getTypeCondition)(s),o=>{if(!i){if((0,Qe.isClassInstance)(o)&&Qe.ClassType.isEnumClass(o)&&!(0,cn.isLiteralType)(o)&&(0,Qe.isClassInstance)(s)&&(0,Qe.isSameWithoutLiteralValue)(o,s)&&(0,cn.isLiteralType)(s)){const f=(0,TU.enumerateLiteralsForType)(t,o);if(f)return(0,Qe.combineTypes)(f.filter(y=>!Qe.ClassType.isLiteralValueSame(s,y)))}else if((0,Qe.isClassInstance)(o)&&(0,Qe.isClassInstance)(s)&&Qe.ClassType.isLiteralValueSame(s,o))return;return o}return(0,Qe.isNever)(s)||(0,Qe.isNever)(o)?Qe.NeverType.createNever():(0,Qe.isAnyOrUnknown)(s)||(0,Qe.isAnyOrUnknown)(o)?(0,Qe.isUnknown)(s)||(0,Qe.isUnknown)(o)?Qe.UnknownType.create():Qe.AnyType.create():t.useSpeculativeMode(n.expression,()=>t.getTypeOfMagicMethodReturn(s,[o],"__eq__",n.expression,void 0))?l:void 0}))}),(0,Qe.combineTypes)(a)}function _D(t,e){const n=[];return(0,cn.doForEachSubtype)(e,i=>{const r=t.makeTopLevelTypeVarsConcrete(i);if((0,Qe.isAnyOrUnknown)(r))n.push({subtype:i,dictTypeArgs:{key:r,value:r}});else if((0,Qe.isClassInstance)(r))if(Qe.ClassType.isTypedDictClass(r))n.push({subtype:i,typedDict:r});else{let a;for(const s of r.details.mro)if((0,Qe.isInstantiableClass)(s)&&Qe.ClassType.isBuiltIn(s,"Mapping")){a=s;break}if(a){const s=(0,cn.partiallySpecializeType)(a,r);s.typeArguments&&s.typeArguments.length>=2&&n.push({subtype:i,dictTypeArgs:{key:s.typeArguments[0],value:s.typeArguments[1]}})}}}),n}function vD(t,e,n,i){const r=[],a=i===void 0?n:n-1;return(0,cn.doForEachSubtype)(e,s=>{const l=t.makeTopLevelTypeVarsConcrete(s);let o,u=!1;if((0,Qe.isAnyOrUnknown)(l)){r.push({subtype:s,entryTypes:[l],isIndeterminateLength:!0,definiteNoMatch:!1});return}if((0,Qe.isClassInstance)(l)){if(Qe.ClassType.isBuiltIn(l,"object")){r.push({subtype:s,entryTypes:[(0,cn.convertToInstance)(l)],isIndeterminateLength:!0,isObject:!0,definiteNoMatch:!1});return}for(const f of l.details.mro){if(!(0,Qe.isInstantiableClass)(f)||Qe.ClassType.isBuiltIn(f,"str")||Qe.ClassType.isBuiltIn(f,"bytes")||Qe.ClassType.isBuiltIn(f,"bytearray"))break;if(Qe.ClassType.isBuiltIn(f,"Sequence")){o=f;break}if((0,cn.isTupleClass)(f)){o=f;break}}if(o){const f=(0,cn.partiallySpecializeType)(o,l);(0,cn.isTupleClass)(f)?f.tupleTypeArguments&&((0,cn.isUnboundedTupleClass)(f)?(r.push({subtype:s,entryTypes:[(0,Qe.combineTypes)(f.tupleTypeArguments.map(y=>y.type))],isIndeterminateLength:!0,isTuple:!0,definiteNoMatch:!1}),u=!0):f.tupleTypeArguments.length>=a&&(i!==void 0||f.tupleTypeArguments.length===a)&&(r.push({subtype:s,entryTypes:f.tupleTypeArguments.map(y=>y.type),isIndeterminateLength:!1,isTuple:!0,definiteNoMatch:!1}),u=!0)):(r.push({subtype:s,entryTypes:[f.typeArguments&&f.typeArguments.length>0?f.typeArguments[0]:Qe.UnknownType.create()],isIndeterminateLength:!0,definiteNoMatch:!1}),u=!0)}}u||r.push({subtype:s,entryTypes:[],isIndeterminateLength:!0,definiteNoMatch:!0})}),r}function bD(t,e,n,i,r,a,s,l){if(n.isIndeterminateLength){let u=n.entryTypes[0];if(l){const f=t.getBuiltInObject(e,"object");f&&(0,Qe.isClassInstance)(f)&&(u=f)}return!s&&i===a&&!(0,Qe.isNever)(u)&&(u=rI(t,e,u)),u}if(a===void 0||i<a)return n.entryTypes[i];if(i===a){const u=n.entryTypes.slice(a,a+n.entryTypes.length-r+1).map(y=>(0,cn.stripLiteralValue)(y));let f=(0,Qe.combineTypes)(u);return s||(f=rI(t,e,f)),f}const o=n.entryTypes.length-(r-i);return(0,yU.assert)(o>=0&&o<n.entryTypes.length),n.entryTypes[o]}function Vl(t,e,n,i,r){switch(e=Zi(t,e,r,!0),r.nodeType){case 65:{const a=vD(t,e,r.entries.length,r.starEntryIndex).filter(s=>!s.definiteNoMatch);r.entries.forEach((s,l)=>{const o=(0,Qe.combineTypes)(a.map(u=>bD(t,r,u,l,r.entries.length,r.starEntryIndex,!1,i)));Vl(t,o,n,!1,s)});break}case 66:{r.target&&t.assignTypeToExpression(r.target,e,n,r.target),r.orPatterns.forEach(a=>{Vl(t,e,n,i,a),e=Zi(t,e,a,!1)});break}case 69:{t.assignTypeToExpression(r.target,r.isWildcard?Qe.AnyType.create():e,n,r.target);break}case 70:{const a=_D(t,e);r.entries.forEach(s=>{const l=[],o=[];a.forEach(y=>{if(y.typedDict)if(s.nodeType===71){const p=Zi(t,t.getBuiltInObject(r,"str"),s.keyPattern,!0);l.push(p),(0,cn.doForEachSubtype)(p,b=>{if((0,Qe.isClassInstance)(b)&&Qe.ClassType.isBuiltIn(b,"str")&&(0,cn.isLiteralType)(b)){const m=(0,gD.getTypedDictMembersForClass)(t,y.typedDict).get(b.literalValue);o.push(m?m.valueType:Qe.UnknownType.create())}else o.push(Qe.UnknownType.create())})}else s.nodeType===72&&(l.push(t.getBuiltInObject(r,"str")),o.push(Qe.UnknownType.create()));else if(y.dictTypeArgs)if(s.nodeType===71){const p=Zi(t,y.dictTypeArgs.key,s.keyPattern,!0);l.push(p),o.push(Zi(t,y.dictTypeArgs.value,s.valuePattern,!0))}else s.nodeType===72&&(l.push(y.dictTypeArgs.key),o.push(y.dictTypeArgs.value))});const u=(0,Qe.combineTypes)(l),f=(0,Qe.combineTypes)(o);if(s.nodeType===71)Vl(t,u,n,!1,s.keyPattern),Vl(t,f,n,!1,s.valuePattern);else if(s.nodeType===72){const y=t.getBuiltInType(r,"dict"),p=t.getBuiltInObject(r,"str"),b=y&&(0,Qe.isInstantiableClass)(y)&&(0,Qe.isClassInstance)(p)?Qe.ClassType.cloneAsInstance(Qe.ClassType.cloneForSpecialization(y,[u,f],!0)):Qe.UnknownType.create();t.assignTypeToExpression(s.target,b,n,s.target)}});break}case 68:{const a=r.arguments.map(s=>[]);t.mapSubtypesExpandTypeVars(e,void 0,s=>{(0,Qe.isClassInstance)(s)?(0,cn.doForEachSubtype)(e,l=>{const o=t.makeTopLevelTypeVarsConcrete(l);if((0,Qe.isAnyOrUnknown)(o))r.arguments.forEach((u,f)=>{a[f].push(o)});else if((0,Qe.isClassInstance)(o)){let u=[];r.arguments.some(f=>!f.name)&&(u=DT(t,Qe.ClassType.cloneAsInstantiable(s))),r.arguments.forEach((f,y)=>{const p=PT(t,f,y,u,Qe.ClassType.cloneAsInstantiable(s),!0);a[y].push(p)})}}):r.arguments.forEach((l,o)=>{a[o].push(Qe.UnknownType.create())})}),r.arguments.forEach((s,l)=>{Vl(t,(0,Qe.combineTypes)(a[l]),n,!1,s.pattern)});break}}}ca.assignTypeToPatternTargets=Vl;function rI(t,e,n){if((0,Qe.isNever)(n))return n;const i=(0,cn.convertToInstance)(t.getBuiltInObject(e,"list"));return i&&(0,Qe.isClassInstance)(i)?Qe.ClassType.cloneForSpecialization(i,[n],!0):Qe.UnknownType.create()}function EU(t,e){const n=t.getTypeOfExpression(e.className,2).type;(0,Qe.isAnyOrUnknown)(n)||(n.typeAliasInfo&&(0,Qe.isInstantiableClass)(n)&&n.typeArguments&&n.isTypeArgumentExplicit?t.addDiagnostic((0,Cu.getFileInfo)(e).diagnosticRuleSet.reportGeneralTypeIssues,Su.DiagnosticRule.reportGeneralTypeIssues,Iu.Localizer.Diagnostic.classPatternTypeAlias().format({type:t.printType(n)}),e.className):(0,Qe.isInstantiableClass)(n)?TD.some(r=>n.details.fullName===r)&&(e.arguments.length>1?t.addDiagnostic((0,Cu.getFileInfo)(e).diagnosticRuleSet.reportGeneralTypeIssues,Su.DiagnosticRule.reportGeneralTypeIssues,Iu.Localizer.Diagnostic.classPatternBuiltInArgCount(),e.arguments[1]):e.arguments.length===1&&e.arguments[0].name&&t.addDiagnostic((0,Cu.getFileInfo)(e).diagnosticRuleSet.reportGeneralTypeIssues,Su.DiagnosticRule.reportGeneralTypeIssues,Iu.Localizer.Diagnostic.classPatternBuiltInArgPositional(),e.arguments[0].name)):(0,Qe.isNever)(n)||t.addDiagnostic((0,Cu.getFileInfo)(e).diagnosticRuleSet.reportGeneralTypeIssues,Su.DiagnosticRule.reportGeneralTypeIssues,Iu.Localizer.DiagnosticAddendum.typeNotClass().format({type:t.printType(n)}),e.className))}ca.validateClassPattern=EU;var ua={},kr={};Object.defineProperty(kr,"__esModule",{value:!0});kr.assignProperty=kr.clonePropertyWithDeleter=kr.clonePropertyWithSetter=kr.createProperty=kr.validatePropertyMethod=void 0;const FU=Oi,SD=Is,Oa=ir,_d=kt,AT=ze,yl=Li,Ct=wn,da=$n;function kU(t,e,n){Ct.FunctionType.isStaticMethod(e)&&t.addDiagnostic((0,_d.getFileInfo)(n).diagnosticRuleSet.reportGeneralTypeIssues,SD.DiagnosticRule.reportGeneralTypeIssues,Oa.Localizer.Diagnostic.propertyStaticMethod(),n)}kr.validatePropertyMethod=kU;function DU(t,e,n,i){const r=(0,_d.getFileInfo)(e),a=t.getBuiltInType(e,"type"),s=Ct.ClassType.isBuiltIn(n,"property")?(0,AT.getTypeSourceId)(e):n.details.typeSourceId,l=Ct.ClassType.createInstantiable(n.details.name,(0,AT.getClassFullName)(e,r.moduleName,`__property_${i.details.name}`),r.moduleName,r.filePath,2048,s,void 0,(0,Ct.isInstantiableClass)(a)?a:Ct.UnknownType.create());l.details.typeVarScopeId=n.details.typeVarScopeId;const o=t.getBuiltInType(e,"object");l.details.baseClasses.push((0,Ct.isInstantiableClass)(o)?o:Ct.UnknownType.create()),(0,da.computeMroLinearization)(l);const u=l.details.fields;n.details.fields.forEach((p,b)=>{const v=["__get__","__set__","__delete__","fget","fset","fdel"];p.isIgnoredForProtocolMatch()||v.some(m=>m===b)||u.set(b,p)});const f=Ct.ClassType.cloneAsInstance(l);l.isAsymmetricDescriptor=!1,Iv(f,t);const y=yl.Symbol.createWithType(4,Ct.FunctionType.cloneWithNewFlags(i,i.details.flags|4));return u.set("fget",y),Ct.FunctionType.isClassMethod(i)&&(l.details.flags|=4194304),ID(f,i),Cv(f),f}kr.createProperty=DU;function PU(t,e,n,i){if(!(0,da.isProperty)(e))return e;const r=e,a=r.details.flags;let s=!!r.isAsymmetricDescriptor;const l=(0,_d.getFileInfo)(i);if(i.parameters.length>=2){const b=(0,AT.getTypeAnnotationForParameter)(i,1);if(b){const v=t.getGetterTypeFromProperty(r,!1);if(v&&!(0,Ct.isAnyOrUnknown)(v)){const m=t.getTypeOfAnnotation(b,{associateTypeVarsWithScope:!0,disallowRecursiveTypeAlias:!0});if(l.diagnosticRuleSet.reportPropertyTypeMismatch!=="none"){const V=new FU.DiagnosticAddendum;t.assignType(v,m,V)||t.addDiagnostic(l.diagnosticRuleSet.reportPropertyTypeMismatch,SD.DiagnosticRule.reportPropertyTypeMismatch,Oa.Localizer.Diagnostic.setterGetterTypeMismatch()+V.getString(),b)}(0,Ct.isTypeSame)(v,m)||(s=!0)}}}const o=Ct.ClassType.createInstantiable(r.details.name,r.details.fullName,r.details.moduleName,(0,_d.getFileInfo)(i).filePath,a,r.details.typeSourceId,r.details.declaredMetaclass,r.details.effectiveMetaclass);o.details.typeVarScopeId=r.details.typeVarScopeId;const u=t.getBuiltInType(i,"object");o.details.baseClasses.push((0,Ct.isInstantiableClass)(u)?u:Ct.UnknownType.create()),(0,da.computeMroLinearization)(o),o.isAsymmetricDescriptor=s;const f=Ct.ClassType.cloneAsInstance(o),y=o.details.fields;r.details.fields.forEach((b,v)=>{b.isIgnoredForProtocolMatch()||y.set(v,b)}),Iv(f,t);const p=yl.Symbol.createWithType(4,Ct.FunctionType.cloneWithNewFlags(n,n.details.flags|4));return y.set("fset",p),CD(f,n,t),Cv(f),f}kr.clonePropertyWithSetter=PU;function AU(t,e,n,i){var r;if(!(0,da.isProperty)(e))return e;const a=e,s=Ct.ClassType.createInstantiable(a.details.name,a.details.fullName,a.details.moduleName,(0,_d.getFileInfo)(i).filePath,a.details.flags,a.details.typeSourceId,a.details.declaredMetaclass,a.details.effectiveMetaclass);s.details.typeVarScopeId=a.details.typeVarScopeId;const l=t.getBuiltInType(i,"object");s.details.baseClasses.push((0,Ct.isInstantiableClass)(l)?l:Ct.UnknownType.create()),(0,da.computeMroLinearization)(s);const o=Ct.ClassType.cloneAsInstance(s);s.isAsymmetricDescriptor=(r=a.isAsymmetricDescriptor)!==null&&r!==void 0?r:!1;const u=s.details.fields;a.details.fields.forEach((y,p)=>{y.isIgnoredForProtocolMatch()||u.set(p,y)}),Iv(o,t);const f=yl.Symbol.createWithType(4,Ct.FunctionType.cloneWithNewFlags(n,n.details.flags|4));return u.set("fdel",f),wD(o,n,t),Cv(o),o}kr.clonePropertyWithDeleter=AU;function ID(t,e){const n=t.details.fields,i=Ct.FunctionType.createSynthesizedInstance("__get__",256);Ct.FunctionType.addParameter(i,{category:0,name:"self",type:Ct.AnyType.create(),hasDeclaredType:!0}),Ct.FunctionType.addParameter(i,{category:0,name:"obj",type:Ct.NoneType.createInstance(),hasDeclaredType:!0}),Ct.FunctionType.addParameter(i,{category:0,name:"objtype",type:Ct.AnyType.create(),hasDeclaredType:!0,hasDefault:!0,defaultType:Ct.AnyType.create()}),i.details.declaredReturnType=Ct.FunctionType.isClassMethod(e)?Ct.FunctionType.getSpecializedReturnType(e):t,i.details.declaration=e.details.declaration;const r=Ct.FunctionType.createSynthesizedInstance("__get__",256);Ct.FunctionType.addParameter(r,{category:0,name:"self",type:Ct.AnyType.create(),hasDeclaredType:!0});const a=e.details.parameters.length>0?e.details.parameters[0].type:Ct.AnyType.create();Ct.FunctionType.addParameter(r,{category:0,name:"obj",type:a,hasDeclaredType:!0}),Ct.FunctionType.addParameter(r,{category:0,name:"objtype",type:Ct.AnyType.create(),hasDeclaredType:!0,hasDefault:!0,defaultType:Ct.AnyType.create()}),r.details.declaredReturnType=Ct.FunctionType.getSpecializedReturnType(e),r.details.declaration=e.details.declaration,r.details.typeVarScopeId=(0,da.getTypeVarScopeId)(e);const s=Ct.OverloadedFunctionType.create([i,r]),l=yl.Symbol.createWithType(4,s);n.set("__get__",l)}function CD(t,e,n){const i=t.details.fields,r=Ct.FunctionType.createSynthesizedInstance("__set__");Ct.FunctionType.addParameter(r,{category:0,name:"self",type:Ct.AnyType.create(),hasDeclaredType:!0});let a=e.details.parameters.length>0?e.details.parameters[0].type:Ct.AnyType.create();(0,Ct.isTypeVar)(a)&&a.details.isSynthesizedSelf&&(a=n.makeTopLevelTypeVarsConcrete(a)),Ct.FunctionType.addParameter(r,{category:0,name:"obj",type:(0,Ct.combineTypes)([a,Ct.NoneType.createInstance()]),hasDeclaredType:!0}),r.details.declaredReturnType=Ct.NoneType.createInstance();let s=Ct.UnknownType.create();e.details.parameters.length>=2&&e.details.parameters[1].category===0&&e.details.parameters[1].name&&(s=e.details.parameters[1].type),Ct.FunctionType.addParameter(r,{category:0,name:"value",type:s,hasDeclaredType:!0});const l=yl.Symbol.createWithType(4,r);i.set("__set__",l)}function wD(t,e,n){const i=t.details.fields,r=Ct.FunctionType.createSynthesizedInstance("__delete__");Ct.FunctionType.addParameter(r,{category:0,name:"self",type:Ct.AnyType.create(),hasDeclaredType:!0});let a=e.details.parameters.length>0?e.details.parameters[0].type:Ct.AnyType.create();(0,Ct.isTypeVar)(a)&&a.details.isSynthesizedSelf&&(a=n.makeTopLevelTypeVarsConcrete(a)),Ct.FunctionType.addParameter(r,{category:0,name:"obj",type:(0,Ct.combineTypes)([a,Ct.NoneType.createInstance()]),hasDeclaredType:!0}),r.details.declaredReturnType=Ct.NoneType.createInstance();const s=yl.Symbol.createWithType(4,r);i.set("__delete__",s)}function Iv(t,e){const n=t.details.fields,i=n.get("fget"),r=i==null?void 0:i.getSynthesizedType();r&&(0,Ct.isFunction)(r)&&ID(t,r);const a=n.get("fset"),s=a==null?void 0:a.getSynthesizedType();s&&(0,Ct.isFunction)(s)&&CD(t,s,e);const l=n.get("fdel"),o=l==null?void 0:l.getSynthesizedType();o&&(0,Ct.isFunction)(o)&&wD(t,o,e)}function Cv(t){const e=t.details.fields;["getter","setter","deleter"].forEach(n=>{const i=Ct.FunctionType.createSynthesizedInstance(n);Ct.FunctionType.addParameter(i,{category:0,name:"self",type:Ct.AnyType.create(),hasDeclaredType:!0}),Ct.FunctionType.addParameter(i,{category:0,name:"accessor",type:Ct.AnyType.create(),hasDeclaredType:!0}),i.details.declaredReturnType=t;const r=yl.Symbol.createWithType(4,i);e.set(n,r)})}function MU(t,e,n,i,r,a,s,l,o=0){const u=Ct.ClassType.cloneAsInstance(r);let f=!0;return[{name:"fget",missingDiagMsg:Oa.Localizer.DiagnosticAddendum.missingGetter,incompatibleDiagMsg:Oa.Localizer.DiagnosticAddendum.incompatibleGetter},{name:"fset",missingDiagMsg:Oa.Localizer.DiagnosticAddendum.missingSetter,incompatibleDiagMsg:Oa.Localizer.DiagnosticAddendum.incompatibleSetter},{name:"fdel",missingDiagMsg:Oa.Localizer.DiagnosticAddendum.missingDeleter,incompatibleDiagMsg:Oa.Localizer.DiagnosticAddendum.incompatibleDeleter}].forEach(p=>{const b=e.details.fields.get(p.name);let v=b?t.getDeclaredTypeOfSymbol(b):void 0;if(v&&(0,Ct.isFunction)(v)){const m=n.details.fields.get(p.name);let V=m?t.getDeclaredTypeOfSymbol(m):void 0;if(!V||!(0,Ct.isFunction)(V)){a==null||a.addMessage(p.missingDiagMsg()),f=!1;return}V=(0,da.partiallySpecializeType)(V,r),v=(0,da.partiallySpecializeType)(v,i),l&&(v=(0,da.applySolvedTypeVars)(v,l));const F=t.bindFunctionToClassOrObject(u,v,void 0,void 0,o),P=t.bindFunctionToClassOrObject(u,V,void 0,void 0,o);(!F||!P||!t.assignType(F,P,a,s,void 0,0,o))&&(f=!1)}}),f}kr.assignProperty=MU;Object.defineProperty(ua,"__esModule",{value:!0});ua.assignProtocolClassToSelf=ua.assignModuleToProtocol=ua.assignClassToProtocol=void 0;const fu=qt,NU=Oi,Rs=ir,ED=kr,jt=wn,Un=$n,Jp=xr,xf=[];function RU(t,e,n,i,r,a,s,l,o){var u;if(o>jt.maxTypeRecursionCount||(o++,xf.some(y=>(0,jt.isTypeSame)(y.srcType,n)&&(0,jt.isTypeSame)(y.destType,e)))||!l&&e.details.typeParameters.length===0&&n.details.typeParameters.length===0&&((u=n.details.compatibleProtocols)===null||u===void 0?void 0:u.has(e.details.fullName)))return!0;xf.push({srcType:n,destType:e});let f=!0;try{f=OU(t,e,n,i,r,a,s,l,o)}catch(y){throw xf.pop(),y}return xf.pop(),f&&!l&&e.details.typeParameters.length===0&&n.details.typeParameters.length===0&&(n.details.compatibleProtocols||(n.details.compatibleProtocols=new Set),n.details.compatibleProtocols.add(e.details.fullName)),f}ua.assignClassToProtocol=RU;function OU(t,e,n,i,r,a,s,l,o){if((s&1)!==0)return(0,jt.isTypeSame)(e,n);const u=jt.ClassType.cloneForSpecialization(e,void 0,!1),f=new Jp.TypeVarContext((0,Un.getTypeVarScopeId)(e)),y=new Jp.TypeVarContext((0,Un.getTypeVarScopeId)(e));if((0,Un.populateTypeVarContextForSelfType)(y,e,n),jt.ClassType.isTypedDictClass(n)){const V=t.getTypedDictClassType();V&&(0,jt.isInstantiableClass)(V)&&(n=V)}let p=!0;const b=new Set,v=(0,Un.buildTypeVarContextFromSpecializedClass)(n),m=(0,Un.containsLiteralType)(n,!0)?128:0;if(e.details.mro.forEach(V=>{!(0,jt.isInstantiableClass)(V)||!jt.ClassType.isProtocolClass(V)||!p&&!i||V.details.fields.forEach((F,P)=>{if(!(!p&&!i)&&F.isClassMember()&&!F.isIgnoredForProtocolMatch()&&!b.has(P)){let G=!1,te;if(!l&&P==="__class_getitem__"||P==="__slots__")return;if(b.add(P),l&&n.details.effectiveMetaclass&&(0,jt.isInstantiableClass)(n.details.effectiveMetaclass)&&(te=(0,Un.lookUpClassMember)(n.details.effectiveMetaclass,P),te&&(v.addSolveForScope((0,Un.getTypeVarScopeId)(n.details.effectiveMetaclass)),G=!0)),te||(te=(0,Un.lookUpClassMember)(n,P)),!te)i==null||i.addMessage(Rs.Localizer.DiagnosticAddendum.protocolMemberMissing().format({name:P})),p=!1;else{let q=t.getDeclaredTypeOfSymbol(F);if(q){jt.ClassType.isSameGenericClass(V,e)||(q=(0,Un.partiallySpecializeType)(q,V));let U;if((0,jt.isInstantiableClass)(te.classType)){const N=t.getEffectiveTypeOfSymbol(te.symbol);(0,jt.isFunction)(N)&&t.inferReturnTypeIfNecessary(N),U=(0,Un.partiallySpecializeType)(N,te.classType,n)}else U=jt.UnknownType.create();if((0,jt.isFunction)(U)||(0,jt.isOverloadedFunction)(U)){if(G){const N=t.bindFunctionToClassOrObject(n,U,void 0,void 0,o,!1,n);if(N&&(U=(0,Un.removeParamSpecVariadicsFromSignature)(N)),(0,jt.isFunction)(q)||(0,jt.isOverloadedFunction)(q)){const J=t.bindFunctionToClassOrObject(n,q,void 0,void 0,o,!1,n);J&&(q=(0,Un.removeParamSpecVariadicsFromSignature)(J))}}else if((0,jt.isInstantiableClass)(te.classType)){q=(0,Un.applySolvedTypeVars)(q,y);const N=t.bindFunctionToClassOrObject(l?n:jt.ClassType.cloneAsInstance(n),U,te.classType,void 0,o);if(N&&(U=(0,Un.removeParamSpecVariadicsFromSignature)(N)),(0,jt.isFunction)(q)||(0,jt.isOverloadedFunction)(q)){const J=t.bindFunctionToClassOrObject(jt.ClassType.cloneAsInstance(n),q,te.classType,void 0,o);J&&(q=(0,Un.removeParamSpecVariadicsFromSignature)(J))}}}else q=(0,Un.applySolvedTypeVars)(q,y);const D=i==null?void 0:i.createAddendum();if((0,jt.isClassInstance)(q)&&jt.ClassType.isPropertyClass(q))if((0,jt.isClassInstance)(U)&&jt.ClassType.isPropertyClass(U)&&!l)(0,ED.assignProperty)(t,jt.ClassType.cloneAsInstantiable(q),jt.ClassType.cloneAsInstantiable(U),V,n,D==null?void 0:D.createAddendum(),f,y,o)||(D&&D.addMessage(Rs.Localizer.DiagnosticAddendum.memberTypeMismatch().format({name:P})),p=!1);else{const N=t.getGetterTypeFromProperty(q,!0);(!N||!t.assignType(N,U,D==null?void 0:D.createAddendum(),f,void 0,m,o))&&(D&&D.addMessage(Rs.Localizer.DiagnosticAddendum.memberTypeMismatch().format({name:P})),p=!1)}else{const N=F.getDeclarations()[0],J=(N==null?void 0:N.type)===1&&!N.isFinal;t.assignType(q,U,D==null?void 0:D.createAddendum(),f,void 0,J?m|1:m,o)||(D&&(J&&D.addMessage(Rs.Localizer.DiagnosticAddendum.memberIsInvariant().format({name:P})),D.addMessage(Rs.Localizer.DiagnosticAddendum.memberTypeMismatch().format({name:P}))),p=!1)}const M=F.getTypedDeclarations().some(N=>N.type===1&&!!N.isFinal),T=te.symbol.getTypedDeclarations().some(N=>N.type===1&&!!N.isFinal);M!==T&&(M?D&&D.addMessage(Rs.Localizer.DiagnosticAddendum.memberIsFinalInProtocol().format({name:P})):D&&D.addMessage(Rs.Localizer.DiagnosticAddendum.memberIsNotFinalInProtocol().format({name:P})),p=!1)}F.isClassVar()&&!te.symbol.isClassMember()&&(i==null||i.addMessage(Rs.Localizer.DiagnosticAddendum.protocolMemberClassVar().format({name:P})),p=!1)}}})}),p&&e.details.typeParameters.length>0&&e.typeArguments){const V=(0,Un.applySolvedTypeVars)(u,f);t.verifyTypeArgumentsAssignable(e,V,i,r,a,s,o)||(p=!1)}return p}function xU(t,e,n,i,r,a,s){if(s>jt.maxTypeRecursionCount)return!0;s++;let l=!0;const o=new Set,u=jt.ClassType.cloneForSpecialization(e,void 0,!1),f=new Jp.TypeVarContext((0,Un.getTypeVarScopeId)(e));if(e.details.mro.forEach(y=>{!(0,jt.isInstantiableClass)(y)||!jt.ClassType.isProtocolClass(y)||y.details.fields.forEach((p,b)=>{if(p.isClassMember()&&!p.isIgnoredForProtocolMatch()&&!o.has(b)){o.add(b);const v=n.fields.get(b);if(!v)i==null||i.addMessage(Rs.Localizer.DiagnosticAddendum.protocolMemberMissing().format({name:b})),l=!1;else{let m=t.getDeclaredTypeOfSymbol(p);if(m){m=(0,Un.partiallySpecializeType)(m,e);const V=t.getEffectiveTypeOfSymbol(v);if(((0,jt.isFunction)(V)||(0,jt.isOverloadedFunction)(V))&&((0,jt.isFunction)(m)||(0,jt.isOverloadedFunction)(m))){const P=t.bindFunctionToClassOrObject(jt.ClassType.cloneAsInstance(e),m,e,void 0,s);P&&(m=P)}const F=i==null?void 0:i.createAddendum();t.assignType(m,V,F==null?void 0:F.createAddendum(),f,void 0,0,s)||(F&&F.addMessage(Rs.Localizer.DiagnosticAddendum.memberTypeMismatch().format({name:b})),l=!1)}}}})}),l&&e.details.typeParameters.length>0&&e.typeArguments){const y=(0,Un.applySolvedTypeVars)(u,f);t.verifyTypeArgumentsAssignable(e,y,i,r,void 0,a,s)||(l=!1)}return l}ua.assignModuleToProtocol=xU;function FD(t,e,n,i=0){(0,fu.assert)(jt.ClassType.isProtocolClass(e)),(0,fu.assert)(jt.ClassType.isProtocolClass(n)),(0,fu.assert)(jt.ClassType.isSameGenericClass(e,n)),(0,fu.assert)(e.details.typeParameters.length>0);const r=new NU.DiagnosticAddendum,a=new Jp.TypeVarContext;let s=!0;return e.details.fields.forEach((l,o)=>{if(s&&l.isClassMember()&&!l.isIgnoredForProtocolMatch()){const u=(0,Un.lookUpClassMember)(n,o);(0,fu.assert)(u!==void 0);let f=t.getDeclaredTypeOfSymbol(l);if(f){const y=t.getTypeOfMember(u);if(f=(0,Un.partiallySpecializeType)(f,e),(0,jt.isClassInstance)(f)&&jt.ClassType.isPropertyClass(f)&&(0,jt.isClassInstance)(y)&&jt.ClassType.isPropertyClass(y))(0,ED.assignProperty)(t,jt.ClassType.cloneAsInstantiable(f),jt.ClassType.cloneAsInstantiable(y),e,n,r,a,void 0,i)||(s=!1);else{const p=l.getDeclarations()[0],b=(p==null?void 0:p.type)===1&&!p.isFinal?1:0;t.assignType(f,y,r,a,void 0,b,i)||(s=!1)}}}}),e.details.baseClasses.forEach(l=>{if((0,jt.isInstantiableClass)(l)&&jt.ClassType.isProtocolClass(l)&&!jt.ClassType.isBuiltIn(l,"object")&&!jt.ClassType.isBuiltIn(l,"Protocol")&&l.details.typeParameters.length>0){const o=(0,Un.specializeForBaseClass)(e,l),u=(0,Un.specializeForBaseClass)(n,l);FD(t,o,u,i)||(s=!1)}}),s}ua.assignProtocolClassToSelf=FD;var wv={},um={},Ev={};Object.defineProperty(Ev,"__esModule",{value:!0});Ev.formatControlFlowGraph=void 0;const LU=yn,zU=kt,pn=Bc;function UU(t){const e=Object.create(null),n=[],i=u(t,new Set);for(const D of n)D.text=P(D.flowNode,D.circular),y(D);const r=p(i),a=b(r);return v(i,0),G();function s(D){return D.flags&(pn.FlowFlags.LoopLabel|pn.FlowFlags.BranchLabel)?D.antecedents:D.flags&(pn.FlowFlags.Assignment|pn.FlowFlags.VariableAnnotation|pn.FlowFlags.WildcardImport|pn.FlowFlags.TrueCondition|pn.FlowFlags.FalseCondition|pn.FlowFlags.NarrowForPattern|pn.FlowFlags.ExhaustedMatch|pn.FlowFlags.Call|pn.FlowFlags.PreFinallyGate|pn.FlowFlags.PostFinally)?[D.antecedent]:[]}function l(D){const M=[];for(const T of D.edges)T.source===D&&M.push(T.target);return M}function o(D){const M=[];for(const T of D.edges)T.target===D&&M.push(T.source);return M}function u(D,M){const T=D.id;let N=e[T];if(N&&M.has(D))return N={id:-1,flowNode:D,edges:[],text:"",lane:-1,endLane:-1,level:-1,circular:!0},n.push(N),N;if(M.add(D),!N){e[T]=N={id:T,flowNode:D,edges:[],text:"",lane:-1,endLane:-1,level:-1,circular:!1},n.push(N);const J=s(D);for(const L of J)f(N,L,M)}return M.delete(D),N}function f(D,M,T){const N=u(M,T),J={source:D,target:N};D.edges.push(J),N.edges.push(J)}function y(D){if(D.level!==-1)return D.level;let M=0;for(const T of o(D))M=Math.max(M,y(T)+1);return D.level=M}function p(D){let M=0;for(const T of l(D))M=Math.max(M,p(T));return M+1}function b(D){const M=q(Array(D),0);for(const T of n)M[T.level]=Math.max(M[T.level],T.text.length);return M}function v(D,M){if(D.lane===-1){D.lane=M,D.endLane=M;const T=l(D);for(let N=0;N<T.length;N++){N>0&&M++;const J=T[N];v(J,M),J.endLane>D.endLane&&(M=J.endLane)}D.endLane=M}}function m(D){if(D&pn.FlowFlags.Start)return"Start";if(D&pn.FlowFlags.BranchLabel)return"Branch";if(D&pn.FlowFlags.LoopLabel)return"Loop";if(D&pn.FlowFlags.Unbind)return"Unbind";if(D&pn.FlowFlags.Assignment)return"Assign";if(D&pn.FlowFlags.TrueCondition)return"True";if(D&pn.FlowFlags.FalseCondition)return"False";if(D&pn.FlowFlags.Call)return"Call";if(D&pn.FlowFlags.Unreachable)return"Unreachable";if(D&pn.FlowFlags.WildcardImport)return"Wildcard";if(D&pn.FlowFlags.PreFinallyGate)return"PreFinal";if(D&pn.FlowFlags.PostFinally)return"PostFinal";if(D&pn.FlowFlags.VariableAnnotation)return"Annotate";if(D&pn.FlowFlags.TrueNeverCondition)return"TrueNever";if(D&pn.FlowFlags.FalseNeverCondition)return"FalseNever";if(D&pn.FlowFlags.NarrowForPattern)return"Pattern";if(D&pn.FlowFlags.ExhaustedMatch)return"Exhaust";throw new Error}function V(D){if(D.flags&pn.FlowFlags.Assignment||D.flags&pn.FlowFlags.WildcardImport)return D.node;if(D.flags&(pn.FlowFlags.TrueCondition|pn.FlowFlags.FalseCondition))return D.expression;if(D.flags&pn.FlowFlags.NarrowForPattern)return D.statement;if(D.flags&pn.FlowFlags.Call)return D.node}function F(D){const M=V(D);if(!M)return;const T=(0,zU.getFileInfo)(M),N=(0,LU.convertOffsetToPosition)(M.start,T.lines);return`[${N.line+1}:${N.character+1}]`}function P(D,M){const T=`${m(D.flags)}@${D.id}${F(D)||""}`;return M?`Circular(${T})`:T}function G(){const D=a.length,M=n.reduce((ce,ue)=>Math.max(ce,ue.lane),0)+1,T=q(Array(M),""),N=a.map(()=>Array(M)),J=a.map(()=>q(Array(M),0));for(const ce of n){N[ce.level][ce.lane]=ce;const ue=l(ce);for(let Y=0;Y<ue.length;Y++){const ee=ue[Y];let H=8;ee.lane===ce.lane&&(H|=4),Y>0&&(H|=1),Y<ue.length-1&&(H|=2),J[ce.level][ee.lane]|=H}ue.length===0&&(J[ce.level][ce.lane]|=16);const W=o(ce);for(let Y=0;Y<W.length;Y++){const ee=W[Y];let H=4;Y>0&&(H|=1),Y<W.length-1&&(H|=2),J[ce.level-1][ee.lane]|=H}}for(let ce=0;ce<D;ce++)for(let ue=0;ue<M;ue++){const W=ce>0?J[ce-1][ue]:0,Y=ue>0?J[ce][ue-1]:0;let ee=J[ce][ue];ee||(W&8&&(ee|=12),Y&2&&(ee|=3),J[ce][ue]=ee)}for(let ce=0;ce<D;ce++)for(let ue=0;ue<T.length;ue++){const W=J[ce][ue],Y=W&4?"\u2500":" ",ee=N[ce][ue];ee?(L(ue,ee.text),ce<D-1&&(L(ue," "),L(ue,U(Y,a[ce]-ee.text.length)))):ce<D-1&&L(ue,U(Y,a[ce]+1)),L(ue,te(W)),L(ue,W&8&&ce<D-1&&!N[ce+1][ue]?"\u2500":" ")}return`${T.join(`
`)}
`;function L(ce,ue){T[ce]+=ue}}function te(D){switch(D){case 3:return"\u2502";case 12:return"\u2500";case 5:return"\u256F";case 9:return"\u2570";case 6:return"\u256E";case 10:return"\u256D";case 7:return"\u2524";case 11:return"\u251C";case 13:return"\u2534";case 14:return"\u252C";case 15:return"\u256B"}return" "}function q(D,M){if(D.fill)D.fill(M);else for(let T=0;T<D.length;T++)D[T]=M;return D}function U(D,M){if(D.repeat)return M>0?D.repeat(M):"";let T="";for(;T.length<M;)T+=D;return T}}Ev.formatControlFlowGraph=UU;var ll={},VU=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),BU=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),WU=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&VU(e,t,n);return BU(e,t),e};Object.defineProperty(ll,"__esModule",{value:!0});ll.SpeculativeTypeTracker=ll.isIncompleteType=void 0;const Zy=qt,sI=WU(ze),$U=wn;function jU(t){return!!t.isIncompleteType}ll.isIncompleteType=jU;class qU{constructor(){this._speculativeContextStack=[],this._speculativeTypeCache=new Map}enterSpeculativeContext(e,n){this._speculativeContextStack.push({speculativeRootNode:e,entriesToUndo:[],allowCacheRetention:n})}leaveSpeculativeContext(){(0,Zy.assert)(this._speculativeContextStack.length>0),this._speculativeContextStack.pop().entriesToUndo.forEach(n=>{n.cache.delete(n.id)})}isSpeculative(e){if(this._speculativeContextStack.length===0)return!1;if(!e)return!0;for(let n=this._speculativeContextStack.length-1;n>=0;n--)if(sI.isNodeContainedWithin(e,this._speculativeContextStack[n].speculativeRootNode))return!0;return!1}trackEntry(e,n){const i=this._speculativeContextStack.length;i>0&&this._speculativeContextStack[i-1].entriesToUndo.push({cache:e,id:n})}disableSpeculativeMode(){const e=this._speculativeContextStack;return this._speculativeContextStack=[],e}enableSpeculativeMode(e){(0,Zy.assert)(this._speculativeContextStack.length===0),this._speculativeContextStack=e}addSpeculativeType(e,n,i){if((0,Zy.assert)(this._speculativeContextStack.length>0),this._speculativeContextStack.some(a=>!a.allowCacheRetention))return;let r=this._speculativeTypeCache.get(e.id);r||(r=[],this._speculativeTypeCache.set(e.id,r)),r.push({type:n,expectedType:i})}getSpeculativeType(e,n){if(this._speculativeContextStack.some(i=>sI.isNodeContainedWithin(e,i.speculativeRootNode))){const i=this._speculativeTypeCache.get(e.id);if(i){for(const r of i)if(n){if(r.expectedType&&(0,$U.isTypeSame)(n,r.expectedType))return r.type}else if(!r.expectedType)return r.type}}}}ll.SpeculativeTypeTracker=qU;Object.defineProperty(um,"__esModule",{value:!0});um.getCodeFlowEngine=void 0;const qr=qt,GU=kt,zt=Bc,eg=ze,aI=ll,oI=ol,Qt=wn,Fo=$n,KU=!1;function HU(t,e){const n=new Map,i=new Map,r=new Map;let a=1,s=0,l=0;function o(){const F=new Map;function P(te){let q=F.get(te);return q||(q=new Map,F.set(te,q)),q}function G(te,q,U,D,M,T){const N=q!==void 0?(0,zt.createKeyForReference)(q):void 0;let J;const L=N!==void 0&&U!==void 0?N+`.${U.toString()}`:".",ce=P(L);function ue(k,oe,ye,E){if(!ye)a++;else if(oe){const B=ce.get(k.id);if(B===void 0)a++;else if(B.isIncompleteType){const X=B;X.type&&!(0,Qt.isTypeSame)(X.type,oe)&&a++}}const $=ye?{isIncompleteType:!0,type:oe,incompleteSubtypes:[],generationCount:a,isRecursionSentinel:E}:oe;return ce.set(k.id,$),e.trackEntry(ce,k.id),{type:oe,isIncomplete:ye,isRecursionSentinel:E,generationCount:a,incompleteSubtypes:ye?[]:void 0}}function W(k,oe,ye,E,$,B){const X=ce.get(k.id);(X===void 0||!(0,aI.isIncompleteType)(X))&&(0,qr.fail)("setIncompleteSubtype can be called only on a valid incomplete cache entry");const Z=X.incompleteSubtypes;if(oe<Z.length){const se=Z[oe];se.isIncomplete!==E||se.type===void 0||ye===void 0||!(0,Qt.isTypeSame)(se.type,ye)?(Z[oe]={type:ye,isIncomplete:E,isPending:$,evaluationCount:B},a++):se.isPending!==$&&(Z[oe]={type:ye,isIncomplete:E,isPending:$,evaluationCount:B})}else(0,qr.assert)(Z.length===oe),Z.push({type:ye,isIncomplete:E,isPending:$,evaluationCount:B}),a++;return Y(k)}function Y(k){if(!ce.has(k.id))return;const oe=ce.get(k.id);if(oe===void 0)return{type:oe,isIncomplete:!1};if(!(0,aI.isIncompleteType)(oe))return{type:oe,isIncomplete:!1};let ye=oe.type;if(oe.incompleteSubtypes.length>0){const E=[];oe.incompleteSubtypes.forEach($=>{$.type&&E.push($.type)}),ye=E.length>0?(0,Qt.combineTypes)(E):void 0}return{type:ye,isIncomplete:!0,incompleteSubtypes:oe.incompleteSubtypes,generationCount:oe.generationCount,isRecursionSentinel:oe.isRecursionSentinel}}function ee(k){ce.delete(k.id)}function H(k){let oe=k.node;const ye=k.node.parent;return ye&&(ye.nodeType===28||ye.nodeType===10)&&(oe=ye),t.evaluateTypeForSubnode(oe,()=>{t.evaluateTypesForStatement(k.node)})}function le(k){let oe=k;for(t.checkForCancellation();;){const ye=Y(oe);if(ye){if(!ye.isIncomplete)return ye;if(ye.generationCount===a)return{type:ye.type,isIncomplete:!0}}if(oe.flags&zt.FlowFlags.Unreachable)return ue(oe,Qt.NeverType.createNever(),!1);if(oe.flags&zt.FlowFlags.VariableAnnotation){oe=oe.antecedent;continue}if(oe.flags&zt.FlowFlags.Call){const E=oe;if(!T&&p(t,E))return ue(oe,void 0,!1);oe=E.antecedent;continue}if(oe.flags&zt.FlowFlags.Assignment){const E=oe;if(q){if(U===E.targetSymbolId&&(0,eg.isMatchingExpression)(q,E.node)){if(oe.flags&zt.FlowFlags.Unbind)return ue(oe,Qt.UnboundType.create(),!1);if(ye!=null&&ye.isRecursionSentinel)return{type:void 0,isIncomplete:!0};ue(oe,q?void 0:D,!0,!0);let $=H(E);return $&&((0,Fo.isTypeAliasPlaceholder)($.type)||q.nodeType===35&&t.isAsymmetricDescriptorAssignment(E.node))&&($=void 0),ue(oe,$==null?void 0:$.type,!!($!=null&&$.isIncomplete))}else if((0,eg.isPartialMatchingExpression)(q,E.node))return{type:D,isIncomplete:M}}oe=E.antecedent;continue}if(oe.flags&zt.FlowFlags.BranchLabel){const E=oe;if(oe.flags&zt.FlowFlags.PostContextManager){const $=oe;if($.expressions.some(X=>m(t,X,$.isAsync))===$.blockIfSwallowsExceptions)return ue(oe,void 0,!1)}if(q&&E.preBranchAntecedent&&E.affectedExpressions&&(J||(J=(0,zt.createKeysForReferenceSubexpressions)(q)),!J.some($=>E.affectedExpressions.has($))&&u(oe,E.preBranchAntecedent))){oe=E.preBranchAntecedent;continue}return R(oe)}if(oe.flags&zt.FlowFlags.LoopLabel){const E=oe;if(q&&(J||(J=(0,zt.createKeysForReferenceSubexpressions)(q)),!J.some($=>E.affectedExpressions.has($)))){oe=E.antecedents[0];continue}return ae(E)}if(oe.flags&(zt.FlowFlags.TrueCondition|zt.FlowFlags.FalseCondition)){const E=oe;if(q){if(ye!=null&&ye.isRecursionSentinel)return ye;ue(oe,void 0,!0,!0);try{const $=(0,oI.getTypeNarrowingCallback)(t,q,E.expression,!!(E.flags&(zt.FlowFlags.TrueCondition|zt.FlowFlags.TrueNeverCondition)));if($){const B=le(E.antecedent);let X=B.type;return X&&(X=$(X)),ue(oe,X,B.isIncomplete)}ee(oe)}catch($){throw ee(oe),$}}oe=E.antecedent;continue}if(oe.flags&(zt.FlowFlags.TrueNeverCondition|zt.FlowFlags.FalseNeverCondition)){const E=oe;if(E.reference&&(0,zt.createKeyForReference)(E.reference)!==N){const $=t.lookUpSymbolRecursive(E.reference,E.reference.value,!1);if($&&$.symbol.getTypedDeclarations().length>0){ue(oe,q?void 0:D,!0,!0);try{const B=(0,oI.getTypeNarrowingCallback)(t,E.reference,E.expression,!!(E.flags&(zt.FlowFlags.TrueCondition|zt.FlowFlags.TrueNeverCondition)));if(B){const X=t.getTypeOfExpression(E.reference),Z=B(X.type)||X.type;if((0,Qt.isNever)(Z))return ue(oe,void 0,!!X.isIncomplete)}ee(oe)}catch(B){throw ee(oe),B}}}oe=E.antecedent;continue}if(oe.flags&zt.FlowFlags.ExhaustedMatch){const E=oe,$=t.evaluateTypeForSubnode(E.node,()=>{t.evaluateTypesForMatchStatement(E.node)});if($&&(0,Qt.isNever)($.type))return ue(oe,void 0,!!$.isIncomplete);oe=E.antecedent;continue}if(oe.flags&zt.FlowFlags.NarrowForPattern){const E=oe;if(!q||(0,eg.isMatchingExpression)(q,E.subjectExpression)){const $=t.evaluateTypeForSubnode(E.statement,()=>{E.statement.nodeType===64?t.evaluateTypesForCaseStatement(E.statement):t.evaluateTypesForMatchStatement(E.statement)});if($){if(q)return ue(oe,$.type,!!$.isIncomplete);if((0,Qt.isNever)($.type))return ue(oe,void 0,!!$.isIncomplete)}}oe=E.antecedent;continue}if(oe.flags&zt.FlowFlags.PreFinallyGate)return re(oe);if(oe.flags&zt.FlowFlags.PostFinally)return d(oe);if(oe.flags&zt.FlowFlags.Start)return ue(oe,D,M);if(oe.flags&zt.FlowFlags.WildcardImport){const E=oe;if(q&&q.nodeType===38){const $=q.value;if(E.names.some(B=>B===$)){ue(oe,void 0,!0,!0);try{const B=V(E,$);return ue(oe,B,!1)}catch(B){throw ee(oe),B}}}oe=E.antecedent;continue}return(0,qr.fail)("Unexpected flow node flags"),ue(oe,void 0,!1)}}function R(k){const oe=[];let ye=!1,E=!1;if(ue(k,q?void 0:D,!0,!0),k.antecedents.forEach(B=>{if(q===void 0&&E)return;const X=le(B);X.isIncomplete&&(ye=!0),q===void 0&&X.type!==void 0&&(E=!0),X.type&&oe.push(X.type)}),E)return ue(k,D,!1);const $=oe.length>0?(0,Qt.combineTypes)(oe):void 0;return ue(k,$,ye)}function ae(k){var oe,ye;let E=Y(k);const $=k.antecedents.length;if(E===void 0)E=ue(k,q?void 0:D,!0,!0);else if(!((oe=E.incompleteSubtypes)===null||oe===void 0)&&oe.some(X=>X.isPending)){const X=E.incompleteSubtypes.length<k.antecedents.length||E.incompleteSubtypes.some(Z=>Z.isPending&&Z.evaluationCount<$);return{type:E.type,isIncomplete:X}}let B=0;for(;;){let X=!1,Z=q===void 0&&((ye=E.incompleteSubtypes)===null||ye===void 0?void 0:ye.some(_e=>_e.type!==void 0));if(k.antecedents.forEach((_e,be)=>{var ve;if(q===void 0&&Z)return;E=Y(k);const De=E.incompleteSubtypes!==void 0&&be<E.incompleteSubtypes.length?E.incompleteSubtypes[be]:void 0;if(De===void 0||!(De!=null&&De.isPending)&&(De==null?void 0:De.isIncomplete)){const Oe=De===void 0?0:De.evaluationCount;E=W(k,be,(ve=De==null?void 0:De.type)!==null&&ve!==void 0?ve:q?void 0:D,!0,!0,Oe);try{const Je=le(_e);Je.isIncomplete&&(X=!0),E=W(k,be,Je.type,Je.isIncomplete,!1,Oe+1)}catch(Je){throw W(k,be,void 0,!0,!1,Oe+1),Je}}q===void 0&&(E==null?void 0:E.type)!==void 0&&(Z=!0)}),Z)return ue(k,D,!1);let se=E.type;if(X&&se){const _e=(0,Qt.removeIncompleteUnknownFromUnion)(se);(0,Qt.isNever)(_e)||(se=_e)}if(!X||B>=$)return ue(k,se,!1);B++}}function re(k){if(k.isGateClosed)return{type:void 0,isIncomplete:!1};ue(k,q?void 0:D,!0,!0);try{const oe=le(k.antecedent);return ee(k),{type:oe.type,isIncomplete:oe.isIncomplete}}catch(oe){throw ee(k),oe}}function d(k){const oe=k.preFinallyGate.isGateClosed;try{k.preFinallyGate.isGateClosed=!0;let ye;return t.useSpeculativeMode(k.finallyNode,()=>{ye=le(k.antecedent)}),ye.isIncomplete?ye:ue(k,ye.type,!1)}finally{k.preFinallyGate.isGateClosed=oe}}return te?le(te):{type:D,isIncomplete:M}}return{getTypeFromCodeFlow:G}}function u(F,P,G=!1){const te=new Set;function q(U,D,M=0){if(M>64)return!0;M++;let N=U;for(;;){if(te.has(N.id)||(te.add(N.id),N.flags&zt.FlowFlags.Unreachable))return!1;if(N===D)return!0;if(N.flags&(zt.FlowFlags.VariableAnnotation|zt.FlowFlags.Assignment|zt.FlowFlags.TrueCondition|zt.FlowFlags.FalseCondition|zt.FlowFlags.WildcardImport|zt.FlowFlags.TrueNeverCondition|zt.FlowFlags.FalseNeverCondition|zt.FlowFlags.NarrowForPattern|zt.FlowFlags.ExhaustedMatch)){N=N.antecedent;continue}if(N.flags&zt.FlowFlags.Call){const J=N;if(!G&&p(t,J))return!1;N=J.antecedent;continue}if(N.flags&(zt.FlowFlags.BranchLabel|zt.FlowFlags.LoopLabel)){if(N.flags&zt.FlowFlags.PostContextManager){const L=N;if(!L.expressions.some(ce=>m(t,ce,L.isAsync)))return!1}const J=N;for(const L of J.antecedents)if(q(L,D,M))return!0;return!1}if(N.flags&zt.FlowFlags.Start)return!D;if(N.flags&zt.FlowFlags.PreFinallyGate){const J=N;if(J.isGateClosed)return!1;N=J.antecedent;continue}if(N.flags&zt.FlowFlags.PostFinally){const J=N,L=J.preFinallyGate.isGateClosed;try{return J.preFinallyGate.isGateClosed=!0,q(J.antecedent,D,M)}finally{J.preFinallyGate.isGateClosed=L}}return(0,qr.fail)("Unexpected flow node flags"),!1}}if(n.has(F.id))return!0;n.set(F.id,!0);try{return q(F,P)}finally{n.delete(F.id)}}function f(F,P){(0,qr.assert)(!P.details.isParamSpec),(0,qr.assert)(!P.details.isVariadic),(0,qr.assert)(!P.details.boundType),(0,qr.assert)(P.details.constraints.length>0);const G=new Set,te=[];for(const D of P.details.constraints)if((0,Qt.isClassInstance)(D))te.push(D);else return;function q(D,M){let T=D;for(;;){if(G.has(T.id)||T.flags&(zt.FlowFlags.Unreachable|zt.FlowFlags.Start))return te;if(T.flags&(zt.FlowFlags.VariableAnnotation|zt.FlowFlags.Assignment|zt.FlowFlags.WildcardImport|zt.FlowFlags.TrueNeverCondition|zt.FlowFlags.FalseNeverCondition|zt.FlowFlags.NarrowForPattern|zt.FlowFlags.ExhaustedMatch|zt.FlowFlags.PostFinally|zt.FlowFlags.PreFinallyGate|zt.FlowFlags.Call)){T=T.antecedent;continue}if(T.flags&(zt.FlowFlags.TrueCondition|zt.FlowFlags.FalseCondition)){const N=T,J=N.expression,L=(T.flags&zt.FlowFlags.TrueCondition)!==0;if(J.nodeType===9&&J.leftExpression.nodeType===38&&J.leftExpression.value==="isinstance"&&J.arguments.length===2){const ce=J.arguments[0].valueExpression,ue=t.getTypeOfExpression(ce).type;if(y(ue,M)){G.add(T.id);const W=q(N.antecedent,M);G.delete(T.id);const Y=J.arguments[1].valueExpression,ee=t.getTypeOfExpression(Y,168).type;if((0,Qt.isInstantiableClass)(ee))return W.filter(H=>Qt.ClassType.isSameGenericClass(H,ee)?L:!L)}}T=N.antecedent;continue}if(T.flags&(zt.FlowFlags.BranchLabel|zt.FlowFlags.LoopLabel)){const N=T,J=[];G.add(T.id);for(const L of N.antecedents){const ce=q(L,M);for(const ue of ce)J.some(W=>(0,Qt.isTypeSame)(W,ue))||J.push(ue)}return G.delete(T.id),J}return(0,qr.fail)("Unexpected flow node flags"),te}}const U=q(F,P);return U.length===1?U[0]:void 0}function y(F,P){let G=!0;return(0,Fo.doForEachSubtype)(F,te=>{(0,Qt.isTypeVar)(te)?(0,Qt.isTypeSame)(te,P)||(G=!1):te.condition&&te.condition.some(q=>q.isConstrainedTypeVar&&q.typeVarName===P.nameWithScope)||(G=!1)}),G}function p(F,P){const G=P.node;if(i.has(G.id))return i.get(G.id);if(s>Qt.maxTypeRecursionCount)return!1;i.set(G.id,!1),s++;try{let te=0,q=0;const U=F.getTypeOfExpression(G.leftExpression,2).type;(0,Fo.doForEachSubtype)(U,M=>{var T;if(q++,(0,Qt.isInstantiableClass)(M)){if(M.details.effectiveMetaclass&&(0,Qt.isClass)(M.details.effectiveMetaclass)&&!Qt.ClassType.isBuiltIn(M.details.effectiveMetaclass,"type")&&(0,Fo.lookUpClassMember)(M.details.effectiveMetaclass,"__call__",12))return;let J=(0,Fo.lookUpClassMember)(M,"__init__",12);if(J===void 0&&(J=(0,Fo.lookUpClassMember)(M,"__new__",12)),J){const L=F.getTypeOfMember(J);if(L&&((0,Qt.isFunction)(L)||(0,Qt.isOverloadedFunction)(L))){const ce=F.bindFunctionToClassOrObject(void 0,L);ce&&(M=ce)}}}else if((0,Qt.isClassInstance)(M)){const J=(0,Fo.lookUpClassMember)(M,"__call__",8);if(J){const L=F.getTypeOfMember(J);if(L&&((0,Qt.isFunction)(L)||(0,Qt.isOverloadedFunction)(L))){const ce=F.bindFunctionToClassOrObject(void 0,L);ce&&(M=ce)}}}const N=((T=G.parent)===null||T===void 0?void 0:T.nodeType)===6;if((0,Qt.isFunction)(M))b(M,N)&&te++;else if((0,Qt.isOverloadedFunction)(M)){let J=0,L=0;M.overloads.forEach(ce=>{Qt.FunctionType.isOverloaded(ce)&&(J++,b(ce,N)&&L++)}),L>0&&L===J&&te++}});const D=q>0&&te===q;return i.set(G.id,D),D}finally{s--}}function b(F,P){const G=F.details.declaredReturnType;if(Qt.FunctionType.isAsync(F)){if(G&&(0,Qt.isClassInstance)(G)&&Qt.ClassType.isBuiltIn(G,"Coroutine")&&G.typeArguments&&G.typeArguments.length>=3&&(0,Qt.isNever)(G.typeArguments[2])&&P)return!0}else{if(G)return(0,Qt.isNever)(G);if(F.details.declaration&&!F.details.declaration.yieldStatements&&!Qt.FunctionType.isAbstractMethod(F)&&!Qt.FunctionType.isStubDefinition(F)&&!Qt.FunctionType.isPyTypedDefinition(F)){const te=F.details.declaration.node.suite.statements;let q=!1;for(const U of te){if(U.nodeType!==47||U.statements.length!==1)break;const D=U.statements[0];if(D.nodeType!==48){if(D.nodeType===43&&D.typeExpression){const M=T=>(T==null?void 0:T.nodeType)===38&&T.value==="NotImplementedError";(M(D.typeExpression)||D.typeExpression.nodeType===9&&M(D.typeExpression.leftExpression))&&(q=!0)}break}}if(!q&&!v(t,F))return!0}}return!1}function v(F,P){return P.details.declaration?F.isAfterNodeReachable(P.details.declaration.node):!0}function m(F,P,G){var te;if(r.has(P.id))return r.get(P.id);if(r.set(P.id,!1),l>Qt.maxTypeRecursionCount)return!1;l++;let q=!1;try{const U=F.getTypeOfExpression(P).type;if(U&&(0,Qt.isClassInstance)(U)){const D=G?"__aexit__":"__exit__",M=(te=F.getTypeOfObjectMember(P,U,D))===null||te===void 0?void 0:te.type;if(M&&(0,Qt.isFunction)(M)&&M.details.declaredReturnType){const T=M.details.declaredReturnType;q=(0,Qt.isClassInstance)(T)&&Qt.ClassType.isBuiltIn(T,"bool")}}}finally{l--}return r.set(P.id,q),q}function V(F,P){const G=(0,GU.getImportInfo)(F.node.module);(0,qr.assert)(G!==void 0&&G.isImportFound),(0,qr.assert)(F.node.isWildcardImport);const te=t.lookUpSymbolRecursive(F.node,P,!1);(0,qr.assert)(te!==void 0);const U=te.symbol.getDeclarations().find(D=>D.node===F.node);return U&&t.getInferredTypeOfDeclaration(te.symbol,U)||Qt.UnknownType.create()}return{createCodeFlowAnalyzer:o,isFlowNodeReachable:u,narrowConstrainedTypeVar:f}}um.getCodeFlowEngine=HU;var dm={};Object.defineProperty(dm,"__esModule",{value:!0});dm.applyConstructorTransform=void 0;const Lf=Oi,ko=Is,ka=ir,Do=kt,YU=Li,Ji=wn,Po=$n,QU=xr;function JU(t,e,n,i,r){return i.details.fullName==="functools.partial"?XU(t,e,n,r):r}dm.applyConstructorTransform=JU;function XU(t,e,n,i){if(!(0,Ji.isClassInstance)(i.returnType)||i.returnType.details.fullName!=="functools.partial")return i;const r=(0,Po.lookUpObjectMember)(i.returnType,"__call__");if(!r||!(0,Ji.isTypeSame)((0,Po.convertToInstance)(r.classType),i.returnType))return i;const a=t.getTypeOfMember(r);if(!(0,Ji.isFunction)(a)||a.details.parameters.length<1||n.length<1)return i;const l=t.getTypeOfArgument(n[0]).type;if(t.inferReturnTypeIfNecessary(l),!(0,Ji.isFunction)(l)||n.some(U=>U.argumentCategory!==0))return i;const o=new Map,u=(0,Po.getParameterListDetails)(l);let f=!1,y=!1;const p=new QU.TypeVarContext((0,Po.getTypeVarScopeId)(l));n.slice(1).forEach((U,D)=>{var M,T,N,J,L,ce,ue,W;const Y=t.getTypeOfArgument(U);if(U.name){const ee=u.params.find(H=>{var le;return H.param.name===((le=U.name)===null||le===void 0?void 0:le.value)&&H.source!==Po.ParameterSource.PositionOnly});if(ee){const H=ee.param.name,le=Ji.FunctionType.getEffectiveParameterType(l,ee.index);if(o.has(H))t.addDiagnostic((0,Do.getFileInfo)(e).diagnosticRuleSet.reportGeneralTypeIssues,ko.DiagnosticRule.reportGeneralTypeIssues,ka.Localizer.Diagnostic.paramAlreadyAssigned().format({name:U.name.value}),U.name),f=!0;else{const R=new Lf.DiagnosticAddendum;t.assignType(le,Y.type,R,p)||(t.addDiagnostic((0,Do.getFileInfo)(e).diagnosticRuleSet.reportGeneralTypeIssues,ko.DiagnosticRule.reportGeneralTypeIssues,ka.Localizer.Diagnostic.argAssignmentParamFunction().format({argType:t.printType(Y.type),paramType:t.printType(le),functionName:l.details.name,paramName:H}),(W=U.valueExpression)!==null&&W!==void 0?W:e),f=!0),o.set(H,!0)}}else if(u.kwargsIndex===void 0)t.addDiagnostic((0,Do.getFileInfo)(e).diagnosticRuleSet.reportGeneralTypeIssues,ko.DiagnosticRule.reportGeneralTypeIssues,ka.Localizer.Diagnostic.paramNameMissing().format({name:U.name.value}),U.name),f=!0;else{const H=Ji.FunctionType.getEffectiveParameterType(l,u.params[u.kwargsIndex].index),le=new Lf.DiagnosticAddendum;t.assignType(H,Y.type,le,p)||(t.addDiagnostic((0,Do.getFileInfo)(e).diagnosticRuleSet.reportGeneralTypeIssues,ko.DiagnosticRule.reportGeneralTypeIssues,ka.Localizer.Diagnostic.argAssignmentParamFunction().format({argType:t.printType(Y.type),paramType:t.printType(H),functionName:l.details.name,paramName:(ce=u.params[u.kwargsIndex].param.name)!==null&&ce!==void 0?ce:""}),(ue=U.valueExpression)!==null&&ue!==void 0?ue:e),f=!0)}}else if(D>=u.params.length||u.params[D].source===Po.ParameterSource.KeywordOnly)if(u.argsIndex!==void 0){const ee=Ji.FunctionType.getEffectiveParameterType(l,u.params[u.argsIndex].index),H=new Lf.DiagnosticAddendum;t.assignType(ee,Y.type,H,p)||(t.addDiagnostic((0,Do.getFileInfo)(e).diagnosticRuleSet.reportGeneralTypeIssues,ko.DiagnosticRule.reportGeneralTypeIssues,ka.Localizer.Diagnostic.argAssignmentParamFunction().format({argType:t.printType(Y.type),paramType:t.printType(ee),functionName:l.details.name,paramName:(M=u.params[u.argsIndex].param.name)!==null&&M!==void 0?M:""}),(T=U.valueExpression)!==null&&T!==void 0?T:e),f=!0)}else y||t.addDiagnostic((0,Do.getFileInfo)(e).diagnosticRuleSet.reportGeneralTypeIssues,ko.DiagnosticRule.reportGeneralTypeIssues,u.positionParamCount===1?ka.Localizer.Diagnostic.argPositionalExpectedOne():ka.Localizer.Diagnostic.argPositionalExpectedCount().format({expected:u.positionParamCount}),(N=U.valueExpression)!==null&&N!==void 0?N:e),y=!0,f=!0;else{const ee=Ji.FunctionType.getEffectiveParameterType(l,D),H=new Lf.DiagnosticAddendum,le=(J=u.params[D].param.name)!==null&&J!==void 0?J:"";t.assignType(ee,Y.type,H,p)||(t.addDiagnostic((0,Do.getFileInfo)(e).diagnosticRuleSet.reportGeneralTypeIssues,ko.DiagnosticRule.reportGeneralTypeIssues,ka.Localizer.Diagnostic.argAssignmentParamFunction().format({argType:t.printType(Y.type),paramType:t.printType(ee),functionName:l.details.name,paramName:le}),(L=U.valueExpression)!==null&&L!==void 0?L:e),f=!0),o.set(le,!1)}});const v=(0,Po.applySolvedTypeVars)(l,p);if(!(0,Ji.isFunction)(v))return i;const m=v.details.parameters.map((U,D)=>{const M={...U};return M.type=Ji.FunctionType.getEffectiveParameterType(v,D),U.name&&o.get(U.name)&&(M.hasDefault=!0),M}),V=m.filter(U=>U.category===2?!1:U.category===1?!0:!U.name||!o.has(U.name)),F=m.filter(U=>U.name&&o.get(U.name)),P=m.filter(U=>U.category===2),G=[...V,...F,...P],te=Ji.FunctionType.createInstance(a.details.name,a.details.fullName,a.details.moduleName,a.details.flags,v.details.docString);a.details.parameters.length>0&&Ji.FunctionType.addParameter(te,a.details.parameters[0]),G.forEach(U=>{Ji.FunctionType.addParameter(te,U)}),te.details.declaredReturnType=v.details.declaredReturnType?Ji.FunctionType.getSpecializedReturnType(v):v.inferredReturnType,te.details.declaration=a.details.declaration,te.details.typeVarScopeId=v.details.typeVarScopeId;const q=Ji.ClassType.cloneForSymbolTableUpdate(i.returnType);return q.details.fields.set("__call__",YU.Symbol.createWithType(4,te)),{returnType:q,isTypeIncomplete:!1,argumentErrors:f}}var fr={},cl={},ZU=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),eV=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),tV=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&ZU(e,t,n);return eV(e,t),e};Object.defineProperty(cl,"__esModule",{value:!0});cl.updateNamedTupleBaseClass=cl.createNamedTupleType=void 0;const lI=yn,cI=Rn,Ml=ir,nV=kt,tg=tV(ze),As=Li,en=wn,ms=$n;function iV(t,e,n,i){var r,a,s;const l=(0,nV.getFileInfo)(e);let o="namedtuple";if(n.length===0)t.addError(Ml.Localizer.Diagnostic.namedTupleFirstArg(),e);else{const N=n[0];N.argumentCategory!==0?t.addError(Ml.Localizer.Diagnostic.namedTupleFirstArg(),n[0].valueExpression||e):N.valueExpression&&N.valueExpression.nodeType===48&&(o=N.valueExpression.strings.map(J=>J.value).join(""))}const u=n.find(N=>{var J;return((J=N.name)===null||J===void 0?void 0:J.value)==="defaults"});let f=0;if(u&&u.valueExpression){const N=t.getTypeOfExpression(u.valueExpression).type;(0,en.isClassInstance)(N)&&(0,ms.isTupleClass)(N)&&!(0,ms.isUnboundedTupleClass)(N)&&N.tupleTypeArguments?f=N.tupleTypeArguments.length:f=void 0}const y=t.getTypingType(e,"NamedTuple")||en.UnknownType.create(),p=en.ClassType.createInstantiable(o,tg.getClassFullName(e,l.moduleName,o),l.moduleName,l.filePath,16777216,tg.getTypeSourceId(e),void 0,(0,en.isInstantiableClass)(y)?y.details.effectiveMetaclass:en.UnknownType.create());p.details.baseClasses.push(y),p.details.typeVarScopeId=t.getScopeIdForNode(e);const b=p.details.fields;b.set("__class__",As.Symbol.createWithType(68,p));const v=(0,ms.synthesizeTypeVarForSelfCls)(p,!0),m=en.FunctionType.createSynthesizedInstance("__new__",1);m.details.declaredReturnType=(0,ms.convertToInstance)(v),tg.isAssignmentToDefaultsFollowingNamedTuple(e)&&(m.details.flags|=32),en.FunctionType.addParameter(m,{category:0,name:"cls",type:v,hasDeclaredType:!0});const V=[],F={category:0,name:"self",type:(0,ms.synthesizeTypeVarForSelfCls)(p,!1),hasDeclaredType:!0};let P=!1;const G=[];if(n.length<2)t.addError(Ml.Localizer.Diagnostic.namedTupleSecondArg(),e),P=!0;else{const N=n[1];if(N.argumentCategory!==0)P=!0;else if(!i&&N.valueExpression&&N.valueExpression.nodeType===48){const J=N.valueExpression.strings.map(ce=>ce.value).join("").split(/[,\s]+/),L=f===void 0?0:Math.max(0,J.length-f);J.forEach((ce,ue)=>{if(ce=ce.trim(),ce){const W=en.UnknownType.create(),Y={category:0,name:ce,type:W,hasDeclaredType:i,hasDefault:ue>=L};en.FunctionType.addParameter(m,Y);const ee=As.Symbol.createWithType(8,W);V.push(ce);const H=N.valueExpression,le={type:1,node:H,isRuntimeTypeExpression:!0,path:l.filePath,range:(0,lI.convertOffsetsToRange)(H.start,cI.TextRange.getEnd(H),l.lines),moduleName:l.moduleName,isInExceptSuite:!1};ee.addDeclaration(le),b.set(ce,ee),G.push(W)}})}else if(((r=N.valueExpression)===null||r===void 0?void 0:r.nodeType)===31||((a=N.valueExpression)===null||a===void 0?void 0:a.nodeType)===52){const J=N.valueExpression,L=new Map,ce=((s=N.valueExpression)===null||s===void 0?void 0:s.nodeType)===31?N.valueExpression.entries:N.valueExpression.expressions,ue=f===void 0?0:Math.max(0,ce.length-f);ce.forEach((W,Y)=>{let ee,H,le,R="";i?W.nodeType===52&&W.expressions.length===2?(le=W.expressions[0],ee=W.expressions[1],H=(0,ms.convertToInstance)(t.getTypeOfExpressionExpectingType(ee,!1).type)):t.addError(Ml.Localizer.Diagnostic.namedTupleNameType(),W):(le=W,H=en.UnknownType.create()),le&&le.nodeType===48?(R=le.strings.map(d=>d.value).join(""),R||t.addError(Ml.Localizer.Diagnostic.namedTupleEmptyName(),le)):P=!0,R||(R=`_${Y.toString()}`),L.has(R)&&t.addError(Ml.Localizer.Diagnostic.namedTupleNameUnique(),le||W),L.set(R,R),H||(H=en.UnknownType.create());const ae={category:0,name:R,type:H,hasDeclaredType:i,hasDefault:Y>=ue};en.FunctionType.addParameter(m,ae),G.push(H),V.push(R);const re=As.Symbol.createWithType(8,H);if(le&&le.nodeType===48){const d={type:1,node:le,path:l.filePath,typeAnnotationNode:ee,range:(0,lI.convertOffsetsToRange)(le.start,cI.TextRange.getEnd(le),l.lines),moduleName:l.moduleName,isInExceptSuite:!1};re.addDeclaration(d)}b.set(R,re)}),t.setTypeForNode(J)}else P=!0}P&&(m.details.parameters=[],en.FunctionType.addDefaultParameters(m),G.push(en.AnyType.create(!1)),G.push(en.AnyType.create(!0)));const te=en.FunctionType.createSynthesizedInstance("__init__",128);en.FunctionType.addParameter(te,F),en.FunctionType.addDefaultParameters(te),te.details.declaredReturnType=en.NoneType.createInstance(),b.set("__new__",As.Symbol.createWithType(4,m)),b.set("__init__",As.Symbol.createWithType(4,te));const q=en.FunctionType.createSynthesizedInstance("keys"),U=en.FunctionType.createSynthesizedInstance("items");q.details.declaredReturnType=t.getBuiltInObject(e,"list",[t.getBuiltInObject(e,"str")]),U.details.declaredReturnType=q.details.declaredReturnType,b.set("keys",As.Symbol.createWithType(8,q)),b.set("items",As.Symbol.createWithType(8,U));const D=en.FunctionType.createSynthesizedInstance("__len__");if(D.details.declaredReturnType=t.getBuiltInObject(e,"int"),en.FunctionType.addParameter(D,F),b.set("__len__",As.Symbol.createWithType(4,D)),P){const N=en.FunctionType.createSynthesizedInstance("__getattribute__");N.details.declaredReturnType=en.AnyType.create(),en.FunctionType.addParameter(N,F),en.FunctionType.addParameter(N,{category:0,name:"name",type:t.getBuiltInObject(e,"str")}),b.set("__getattribute__",As.Symbol.createWithType(4,N))}const M=t.getBuiltInType(e,"tuple"),T=t.getBuiltInType(e,"str");if(!P&&T&&(0,en.isInstantiableClass)(T)&&M&&(0,en.isInstantiableClass)(M)){const N=V.map(L=>({type:en.ClassType.cloneAsInstance(en.ClassType.cloneWithLiteral(T,L)),isUnbounded:!1})),J=en.ClassType.cloneAsInstance((0,ms.specializeTupleClass)(M,N));b.set("__match_args__",As.Symbol.createWithType(4,J))}return(0,ms.computeMroLinearization)(p),kD(p,G,!P),p}cl.createNamedTupleType=iV;function kD(t,e,n){const i=t.details.mro.findIndex(u=>(0,en.isInstantiableClass)(u)&&en.ClassType.isBuiltIn(u,"NamedTuple"));if(i<0||t.details.mro.length<i+2)return;const r=t.details.mro[i],a=t.details.mro[i+1];if(!(0,en.isInstantiableClass)(a)||!(0,ms.isTupleClass)(a))return;const s=[];n?e.forEach(u=>{s.push({type:u,isUnbounded:!1})}):s.push({type:e.length>0?(0,en.combineTypes)(e):en.UnknownType.create(),isUnbounded:!0});const l=(0,ms.specializeTupleClass)(a,s,n),o=en.ClassType.cloneForSpecialization(r,[],n);o.details={...o.details},o.details.mro=[...o.details.mro],o.details.mro[1]=l.details.mro[0],o.details.baseClasses=o.details.baseClasses.map(u=>(0,en.isInstantiableClass)(u)&&(0,ms.isTupleClass)(u)?l:u),t.details.mro[i]=o,t.details.mro[i+1]=l,t.details.baseClasses=t.details.baseClasses.map(u=>(0,en.isInstantiableClass)(u)&&en.ClassType.isBuiltIn(u,"NamedTuple")?o:u)}cl.updateNamedTupleBaseClass=kD;var rV=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),sV=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),aV=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&rV(e,t,n);return sV(e,t),e};Object.defineProperty(fr,"__esModule",{value:!0});fr.applyDataClassDecorator=fr.applyDataClassDefaultBehaviors=fr.applyDataClassClassBehaviorOverrides=fr.getDataclassDecoratorBehaviors=fr.validateDataClassTransformDecorator=fr.synthesizeDataClassMethods=void 0;const oV=qt,MT=Is,xs=ir,Vu=aV(kt),lV=cl,mc=ya,Ao=Li,cV=Ii,It=wn,wr=$n,uV=xr;function dV(t,e,n,i,r,a){(0,oV.assert)(It.ClassType.isDataClass(n));const s=(0,wr.synthesizeTypeVarForSelfCls)(n,!0),l=It.FunctionType.createSynthesizedInstance("__new__",1),o=It.FunctionType.createSynthesizedInstance("__init__");It.FunctionType.addParameter(l,{category:0,name:"cls",type:s,hasDeclaredType:!0}),It.FunctionType.addDefaultParameters(l),l.details.declaredReturnType=(0,wr.convertToInstance)(s);const u={category:0,name:"self",type:(0,wr.synthesizeTypeVarForSelfCls)(n,!1),hasDeclaredType:!0};It.FunctionType.addParameter(o,u),o.details.declaredReturnType=It.NoneType.createInstance();const f=[],y=[],p=pV(n,y);p||It.FunctionType.addDefaultParameters(o);const b=[];let v=!1;n.details.fields.forEach(D=>{var M,T,N;if(!D.isIgnoredForProtocolMatch()){const J=(0,cV.getLastTypedDeclaredForSymbol)(D);if(J&&J.type===1){let L=J.node;for(;L&&L.nodeType!==3;){if(L.nodeType===54){((M=L.parent)===null||M===void 0?void 0:M.nodeType)===3&&(L=L.parent);break}L=L.parent}if(!L)return;let ce,ue,W,Y=!1,ee=It.ClassType.isDataClassKeywordOnlyParams(n)||v,H,le=!0;if(L.nodeType===3){if(L.leftExpression.nodeType===54&&L.leftExpression.valueExpression.nodeType===38){ce=L.leftExpression.valueExpression;const R=L;W=()=>t.getTypeOfAnnotation(R.leftExpression.typeAnnotation,{isVariableAnnotation:!0,allowFinal:!0,allowClassVar:!0})}if(Y=!0,H=L.rightExpression,L.rightExpression.nodeType===9){const R=t.getTypeOfExpression(L.rightExpression.leftExpression,2).type;if(uI(R,((T=n.details.dataClassBehaviors)===null||T===void 0?void 0:T.fieldDescriptorNames)||[])){const ae=L.rightExpression.arguments.find(oe=>{var ye;return((ye=oe.name)===null||ye===void 0?void 0:ye.value)==="init"});if(ae&&ae.valueExpression){const oe=Vu.getFileInfo(e);(0,mc.evaluateStaticBoolExpression)(ae.valueExpression,oe.executionEnvironment,oe.definedConstants)===!1&&(le=!1)}else{let oe;if((0,It.isFunction)(R))oe=R;else if((0,It.isOverloadedFunction)(R))oe=t.getBestOverloadForArguments(L.rightExpression,R,L.rightExpression.arguments);else if((0,It.isInstantiableClass)(R)){const ye=t.getBoundMethod(R,"__init__");ye&&((0,It.isFunction)(ye)?oe=ye:(0,It.isOverloadedFunction)(ye)&&(oe=t.getBestOverloadForArguments(L.rightExpression,ye,L.rightExpression.arguments)))}if(oe){const ye=oe.details.parameters.find(E=>E.name==="init");ye&&ye.defaultValueExpression&&ye.hasDeclaredType&&(0,It.isClass)(ye.type)&&It.ClassType.isBuiltIn(ye.type,"bool")&&(0,wr.isLiteralType)(ye.type)&&ye.type.literalValue===!1&&(le=!1)}}const re=L.rightExpression.arguments.find(oe=>{var ye;return((ye=oe.name)===null||ye===void 0?void 0:ye.value)==="kw_only"});if(re&&re.valueExpression){const oe=Vu.getFileInfo(e),ye=(0,mc.evaluateStaticBoolExpression)(re.valueExpression,oe.executionEnvironment,oe.definedConstants);ye===!1?ee=!1:ye===!0&&(ee=!0)}const d=L.rightExpression.arguments.find(oe=>{var ye,E,$;return((ye=oe.name)===null||ye===void 0?void 0:ye.value)==="default"||((E=oe.name)===null||E===void 0?void 0:E.value)==="default_factory"||(($=oe.name)===null||$===void 0?void 0:$.value)==="factory"});Y=!!d,d!=null&&d.valueExpression&&(H=d.valueExpression);const k=L.rightExpression.arguments.find(oe=>{var ye;return((ye=oe.name)===null||ye===void 0?void 0:ye.value)==="alias"});if(k){const oe=t.getTypeOfExpression(k.valueExpression).type;(0,It.isClassInstance)(oe)&&It.ClassType.isBuiltIn(oe,"str")&&(0,wr.isLiteralType)(oe)&&(ue=oe.literalValue)}}}}else if(L.nodeType===54&&L.valueExpression.nodeType===38){ce=L.valueExpression;const R=L;if(W=()=>t.getTypeOfAnnotation(R.typeAnnotation,{isVariableAnnotation:!0,allowFinal:!0,allowClassVar:!0}),L.valueExpression.value==="_"){const ae=W();(0,It.isClassInstance)(ae)&&It.ClassType.isBuiltIn(ae,"KW_ONLY")&&(v=!0,ce=void 0,W=void 0)}}if(ce&&W){const R=ce.value,ae=n.details.fields.get(R),re=ae==null?void 0:ae.getDeclarations().some(d=>d.type===1&&d.isFinal);if((ae==null?void 0:ae.isClassVar())&&!re){const d=y.findIndex(oe=>oe.name===R);d>=0&&y.splice(d,1);const k={name:R,classType:n,alias:ue,isKeywordOnly:!1,hasDefault:Y,defaultValueExpression:H,includeInInit:le,type:It.UnknownType.create(),isClassVar:!0};f.push(k)}else{const d={name:R,classType:n,alias:ue,isKeywordOnly:ee,hasDefault:Y,defaultValueExpression:H,includeInInit:le,type:It.UnknownType.create(),isClassVar:!1};b.push({entry:d,evaluator:W});let k=f.findIndex(oe=>oe.name===R);if(k>=0?f[k]=d:f.push(d),k=y.findIndex(oe=>oe.name===R),k>=0){const oe=y[k];!d.hasDefault&&oe.hasDefault&&(d.hasDefault=!0,d.defaultValueExpression=oe.defaultValueExpression,Y=!0),y[k]=d}else y.push(d),k=y.length-1;if(!ee&&le&&!i&&!Y){const oe=y.findIndex(ye=>ye.hasDefault&&ye.includeInInit&&!ye.isKeywordOnly);oe>=0&&oe<k&&t.addError(xs.Localizer.Diagnostic.dataClassFieldWithDefault(),ce)}}}}else{const L=D.getDeclarations();if(L.length===0)return;const ce=L[L.length-1];if(ce.type!==1)return;const ue=ce.node.parent;if(!ue||ue.nodeType!==3)return;if(ue.rightExpression.nodeType===9){const W=t.getTypeOfExpression(ue.rightExpression.leftExpression,2).type;uI(W,((N=n.details.dataClassBehaviors)===null||N===void 0?void 0:N.fieldDescriptorNames)||[])&&t.addDiagnostic(Vu.getFileInfo(e).diagnosticRuleSet.reportGeneralTypeIssues,MT.DiagnosticRule.reportGeneralTypeIssues,xs.Localizer.Diagnostic.dataClassFieldWithoutAnnotation(),ue.rightExpression)}}}}),n.details.dataClassEntries=f,b.forEach(D=>{D.entry.type=D.evaluator()});const m=n.details.fields,V=[];!i&&!r&&p&&(y.forEach(D=>{if(D.includeInInit){let M=D.type;if(D.classType!==n&&(0,wr.requiresSpecialization)(M)){const N=new uV.TypeVarContext((0,wr.getTypeVarScopeId)(D.classType));(0,wr.populateTypeVarContextForSelfType)(N,D.classType,n),M=(0,wr.applySolvedTypeVars)(M,N)}M=fV(t,M);const T={category:0,name:D.alias||D.name,hasDefault:D.hasDefault,defaultValueExpression:D.defaultValueExpression,type:M,hasDeclaredType:!0};D.isKeywordOnly?V.push(T):It.FunctionType.addParameter(o,T)}}),V.length>0&&(It.FunctionType.addParameter(o,{category:1,type:It.AnyType.create()}),V.forEach(D=>{It.FunctionType.addParameter(o,D)})),m.set("__init__",Ao.Symbol.createWithType(4,o)),m.set("__new__",Ao.Symbol.createWithType(4,l)));const F=t.getBuiltInType(e,"str"),P=t.getBuiltInType(e,"tuple");if(P&&(0,It.isInstantiableClass)(P)&&F&&(0,It.isInstantiableClass)(F)&&!m.has("__match_args__")){const D=[];y.forEach(N=>{N.includeInInit&&!N.isKeywordOnly&&D.push(N.name)});const M=D.map(N=>({type:It.ClassType.cloneAsInstance(It.ClassType.cloneWithLiteral(F,N)),isUnbounded:!1})),T=It.ClassType.cloneAsInstance((0,wr.specializeTupleClass)(P,M));m.set("__match_args__",Ao.Symbol.createWithType(4,T))}const G=(D,M)=>{const T=It.FunctionType.createSynthesizedInstance(D);It.FunctionType.addParameter(T,u),It.FunctionType.addParameter(T,{category:0,name:"other",type:M,hasDeclaredType:!0}),T.details.declaredReturnType=t.getBuiltInObject(e,"bool"),m.set(D,Ao.Symbol.createWithType(4,T))};if(It.ClassType.isSkipSynthesizedDataClassEq(n)||G("__eq__",t.getBuiltInObject(e,"object")),It.ClassType.isSynthesizedDataclassOrder(n)){const D=It.ClassType.cloneAsInstance(n);["__lt__","__le__","__gt__","__ge__"].forEach(M=>{G(M,D)})}let te=!It.ClassType.isSkipSynthesizedDataClassEq(n)&&It.ClassType.isFrozenDataClass(n);const q=!It.ClassType.isSkipSynthesizedDataClassEq(n)&&!It.ClassType.isFrozenDataClass(n);if(a&&(te=!1),It.ClassType.isSynthesizeDataClassUnsafeHash(n)&&(te=!0),te){const D=It.FunctionType.createSynthesizedInstance("__hash__");It.FunctionType.addParameter(D,u),D.details.declaredReturnType=t.getBuiltInObject(e,"int"),m.set("__hash__",Ao.Symbol.createWithType(4,D))}else q&&!a&&m.set("__hash__",Ao.Symbol.createWithType(4,It.NoneType.createInstance()));let U=t.getBuiltInType(e,"dict");(0,It.isInstantiableClass)(U)&&(U=It.ClassType.cloneAsInstance(It.ClassType.cloneForSpecialization(U,[t.getBuiltInObject(e,"str"),It.AnyType.create()],!0))),m.set("__dataclass_fields__",Ao.Symbol.createWithType(4,U)),It.ClassType.isGeneratedDataClassSlots(n)&&n.details.localSlotsNames===void 0&&(n.details.localSlotsNames=f.map(D=>D.name)),(0,lV.updateNamedTupleBaseClass)(n,y.map(D=>D.type),!0)}fr.synthesizeDataClassMethods=dV;function fV(t,e){if(!(0,It.isClassInstance)(e))return e;const n=(0,wr.lookUpObjectMember)(e,"__set__");if(!n)return e;const i=t.getTypeOfMember(n);if(!(0,It.isFunction)(i))return e;const r=t.bindFunctionToClassOrObject(e,i);return!r||!(0,It.isFunction)(r)||r.details.parameters.length<2?e:It.FunctionType.getEffectiveParameterType(r,1)}function pV(t,e){let n=!0;for(let i=t.details.mro.length-1;i>=0;i--){const r=t.details.mro[i];if((0,It.isInstantiableClass)(r)){const a=(0,wr.buildTypeVarContextFromSpecializedClass)(r,!1);It.ClassType.getDataClassEntries(r).forEach(l=>{const o=e.findIndex(f=>f.name===l.name),u={...l};u.type=(0,wr.applySolvedTypeVars)(u.type,a),l.isClassVar?o>=0&&e.splice(o,1):o>=0?e[o]=u:e.push(u)})}else n=!1}return n}function uI(t,e){let n;return(0,It.isFunction)(t)?n=t.details.fullName:(0,It.isOverloadedFunction)(t)?n=t.overloads[0].details.fullName:(0,It.isInstantiableClass)(t)&&(n=t.details.fullName),n?e.some(i=>i===n):!1}function hV(t,e){const n={keywordOnlyParams:!1,generateEq:!0,generateOrder:!1,fieldDescriptorNames:[]},i=Vu.getFileInfo(e);return e.arguments.forEach(r=>{if(!r.name||r.argumentCategory!==0){t.addError(xs.Localizer.Diagnostic.dataClassTransformPositionalParam(),r);return}switch(r.name.value){case"kw_only_default":{const a=(0,mc.evaluateStaticBoolExpression)(r.valueExpression,i.executionEnvironment,i.definedConstants);if(a===void 0){t.addError(xs.Localizer.Diagnostic.dataClassTransformExpectedBoolLiteral(),r.valueExpression);return}n.keywordOnlyParams=a;break}case"eq_default":{const a=(0,mc.evaluateStaticBoolExpression)(r.valueExpression,i.executionEnvironment,i.definedConstants);if(a===void 0){t.addError(xs.Localizer.Diagnostic.dataClassTransformExpectedBoolLiteral(),r.valueExpression);return}n.generateEq=a;break}case"order_default":{const a=(0,mc.evaluateStaticBoolExpression)(r.valueExpression,i.executionEnvironment,i.definedConstants);if(a===void 0){t.addError(xs.Localizer.Diagnostic.dataClassTransformExpectedBoolLiteral(),r.valueExpression);return}n.generateOrder=a;break}case"field_descriptors":case"field_specifiers":{const a=t.getTypeOfExpression(r.valueExpression).type;if(!(0,It.isClassInstance)(a)||!It.ClassType.isBuiltIn(a,"tuple")||!a.tupleTypeArguments||a.tupleTypeArguments.some(s=>!(0,It.isInstantiableClass)(s.type)&&!(0,It.isFunction)(s.type)&&!(0,It.isOverloadedFunction)(s.type))){t.addError(xs.Localizer.Diagnostic.dataClassTransformFieldSpecifier().format({type:t.printType(a)}),r.valueExpression);return}n.fieldDescriptorNames||(n.fieldDescriptorNames=[]),a.tupleTypeArguments.forEach(s=>{(0,It.isInstantiableClass)(s.type)||(0,It.isFunction)(s.type)?n.fieldDescriptorNames.push(s.type.details.fullName):(0,It.isOverloadedFunction)(s.type)&&n.fieldDescriptorNames.push(s.type.overloads[0].details.fullName)});break}default:t.addError(xs.Localizer.Diagnostic.dataClassTransformUnknownArgument().format({name:r.name.value}),r.valueExpression);break}}),n}fr.validateDataClassTransformDecorator=hV;function mV(t){var e;let n;if((0,It.isFunction)(t)?n=t:(0,It.isOverloadedFunction)(t)&&(n=(e=t.overloads.find(i=>!!i.details.decoratorDataClassBehaviors))!==null&&e!==void 0?e:t.overloads[0]),!!n){if(n.details.decoratorDataClassBehaviors)return n.details.decoratorDataClassBehaviors;if(n.details.fullName==="dataclasses.dataclass")return{keywordOnlyParams:!1,generateEq:!0,generateOrder:!1,fieldDescriptorNames:["dataclasses.field","dataclasses.Field"]}}}fr.getDataclassDecoratorBehaviors=mV;function yV(t,e,n,i,r){const a=Vu.getFileInfo(e),s=(0,mc.evaluateStaticBoolExpression)(r,a.executionEnvironment,a.definedConstants);switch(i){case"order":s===!0?n.details.flags|=64:s===!1&&(n.details.flags&=-65);break;case"kw_only":s===!1?n.details.flags&=-2097153:s===!0&&(n.details.flags|=2097152);break;case"frozen":{let l=!1,o=!1;n.details.baseClasses.forEach(u=>{(0,It.isInstantiableClass)(u)&&It.ClassType.isDataClass(u)&&(It.ClassType.isFrozenDataClass(u)?o=!0:!u.details.classDataClassTransform&&!(u.details.declaredMetaclass&&(0,It.isInstantiableClass)(u.details.declaredMetaclass)&&!!u.details.declaredMetaclass.details.classDataClassTransform)&&(l=!0))}),(s===!0||o)&&(n.details.flags|=8,l&&t.addDiagnostic(a.diagnosticRuleSet.reportGeneralTypeIssues,MT.DiagnosticRule.reportGeneralTypeIssues,xs.Localizer.Diagnostic.dataClassBaseClassNotFrozen(),e));break}case"init":s===!1?n.details.flags|=16:s===!0&&(n.details.flags&=-17);break;case"eq":s===!1?n.details.flags|=32:s===!0&&(n.details.flags&=-33);break;case"slots":s===!0?(n.details.flags|=33554432,n.details.localSlotsNames&&t.addDiagnostic(a.diagnosticRuleSet.reportGeneralTypeIssues,MT.DiagnosticRule.reportGeneralTypeIssues,xs.Localizer.Diagnostic.dataClassSlotsOverwrite(),e)):s===!1&&(n.details.flags&=-33554433);break;case"hash":case"unsafe_hash":s===!0&&(n.details.flags|=67108864);break}}function DD(t,e,n){n.forEach(i=>{i.valueExpression&&i.name&&yV(t,i.name,e,i.name.value,i.valueExpression)})}fr.applyDataClassClassBehaviorOverrides=DD;function PD(t,e){t.details.dataClassBehaviors=e,t.details.flags|=4,e.keywordOnlyParams&&(t.details.flags|=2097152),e.generateEq||(t.details.flags|=32),e.generateOrder&&(t.details.flags|=64)}fr.applyDataClassDefaultBehaviors=PD;function gV(t,e,n,i){PD(e,n),i!=null&&i.arguments&&DD(t,e,i.arguments)}fr.applyDataClassDecorator=gV;var fm={};Object.defineProperty(fm,"__esModule",{value:!0});fm.applyFunctionTransform=void 0;const TV=Is,_V=ir,vV=kt,bV=Li,Ys=wn,dI=$n;function SV(t,e,n,i,r){return(0,Ys.isFunction)(i)&&i.details.fullName==="functools.total_ordering"?IV(t,e,n,r):r}fm.applyFunctionTransform=SV;function IV(t,e,n,i){if(n.length!==1)return i;const r=n[0].type;if(!r||!(0,Ys.isInstantiableClass)(r)||r.includeSubclasses)return i;const a=["__lt__","__le__","__gt__","__ge__"],s=Ys.ClassType.cloneAsInstance(r);let l;const o=a.filter(v=>{const m=(0,dI.lookUpObjectMember)(s,v,8);return m&&!l&&(l=m),!m});if(!l)return t.addDiagnostic((0,vV.getFileInfo)(e).diagnosticRuleSet.reportGeneralTypeIssues,TV.DiagnosticRule.reportGeneralTypeIssues,_V.Localizer.Diagnostic.totalOrderingMissingMethod(),e),i;let u;const f=t.getTypeOfMember(l);if((0,Ys.isFunction)(f)&&f.details.parameters.length>=2&&f.details.parameters[1].hasDeclaredType&&(u=f.details.parameters[1].type),!u){const v=t.getBuiltInObject(e,"object");if(!v||!(0,Ys.isClassInstance)(v))return i;u=v}const y=t.getBuiltInObject(e,"bool");if(!y||!(0,Ys.isClassInstance)(y))return i;const p={category:0,name:"self",type:(0,dI.synthesizeTypeVarForSelfCls)(r,!1),hasDeclaredType:!0},b={category:0,name:"__value",type:u,hasDeclaredType:!0};return o.forEach(v=>{const m=Ys.FunctionType.createSynthesizedInstance(v);Ys.FunctionType.addParameter(m,p),Ys.FunctionType.addParameter(m,b),m.details.declaredReturnType=y,r.details.fields.set(v,bV.Symbol.createWithType(4,m))}),i}(function(t){var e=Te&&Te.__createBinding||(Object.create?function(tt,Ue,Ye,it){it===void 0&&(it=Ye),Object.defineProperty(tt,it,{enumerable:!0,get:function(){return Ue[Ye]}})}:function(tt,Ue,Ye,it){it===void 0&&(it=Ye),tt[it]=Ue[Ye]}),n=Te&&Te.__setModuleDefault||(Object.create?function(tt,Ue){Object.defineProperty(tt,"default",{enumerable:!0,value:Ue})}:function(tt,Ue){tt.default=Ue}),i=Te&&Te.__importStar||function(tt){if(tt&&tt.__esModule)return tt;var Ue={};if(tt!=null)for(var Ye in tt)Ye!=="default"&&Object.prototype.hasOwnProperty.call(tt,Ye)&&e(Ue,tt,Ye);return n(Ue,tt),Ue};Object.defineProperty(t,"__esModule",{value:!0}),t.createTypeEvaluator=t.maxCodeComplexity=void 0;const r=In,a=Dt,s=qt,l=Oi,o=Is,u=yn,f=hl,y=Rn,p=ir,b=ws,v=al,m=i(Od),V=Ld,F=i(kt),P=um,G=Bc,te=uo,q=dm,U=fr,D=Sn,M=fm,T=cl,N=i(ze),J=ca,L=kr,ce=ua,ue=i(qi),W=ya,Y=Li,ee=Dn,H=Ii,le=ll,R=Ni,ae=zd,re=i(_s),d=wn,k=$n,oe=xr,ye={[0]:["__add__","__radd__",!1],[33]:["__sub__","__rsub__",!1],[26]:["__mul__","__rmul__",!1],[13]:["__floordiv__","__rfloordiv__",!1],[10]:["__truediv__","__rtruediv__",!1],[24]:["__mod__","__rmod__",!1],[29]:["__pow__","__rpow__",!1],[22]:["__matmul__","__rmatmul__",!1],[3]:["__and__","__rand__",!1],[6]:["__or__","__ror__",!1],[8]:["__xor__","__rxor__",!1],[17]:["__lshift__","__rlshift__",!1],[31]:["__rshift__","__rrshift__",!1],[12]:["__eq__","__ne__",!0],[28]:["__ne__","__eq__",!0],[20]:["__lt__","__ge__",!0],[21]:["__le__","__gt__",!0],[15]:["__gt__","__le__",!0],[16]:["__ge__","__lt__",!0]},E={[36]:!1,[37]:!1,[39]:!0,[40]:!0,[41]:!0,[42]:!0},$=new Map([["asyncio.futures.Future",f.PythonVersion.V3_9],["asyncio.tasks.Task",f.PythonVersion.V3_9],["builtins.dict",f.PythonVersion.V3_9],["builtins.frozenset",f.PythonVersion.V3_9],["builtins.list",f.PythonVersion.V3_9],["builtins._PathLike",f.PythonVersion.V3_9],["builtins.set",f.PythonVersion.V3_9],["builtins.tuple",f.PythonVersion.V3_9],["collections.ChainMap",f.PythonVersion.V3_9],["collections.Counter",f.PythonVersion.V3_9],["collections.defaultdict",f.PythonVersion.V3_9],["collections.DefaultDict",f.PythonVersion.V3_9],["collections.deque",f.PythonVersion.V3_9],["collections.OrderedDict",f.PythonVersion.V3_9],["queue.Queue",f.PythonVersion.V3_9]]),B=new Map([["builtins.float",["builtins.int"]],["builtins.complex",["builtins.float","builtins.int"]],["builtins.bytes",["builtins.bytearray","builtins.memoryview"]]]),X=2,Z=6,se=8,_e=64,be=64,ve=64,De=12,Oe=!1,Je=64;t.maxCodeComplexity=1024;function $e(tt,Ue){const Ye=[],it=new Map,ht=new Set,mt=new le.SpeculativeTypeTracker,Be=[];let qe=new Map,dt=new Map,Xt=new Map,En=new Map,Ti=new Map,Ki=[],Se,Me=!1,je,ct,pt,vt,Vt,Tt,hn,sn,Pn,Hi,Yn;const z=[];let Q;function fe(c,h){try{return Se=c,h()}finally{Se=void 0}}function ge(){Se&&(0,r.throwIfCancellationRequested)(Se)}function Ae(){return Xt.size}function Fe(){qe=new Map,dt=new Map,Xt=new Map,En=new Map,Ti=new Map}function de(c){let h;return Q&&Gt(c)?h=Q.get(c.id):h=Xt.get(c.id),h!==void 0}function Ce(c,h){let g;if(Q&&Gt(c)?g=Q.get(c.id):g=Xt.get(c.id),g!==void 0){if((Ue.verifyTypeCacheEvaluatorFlags||Oe)&&h!==void 0){const S=it.get(c.id);S!==void 0&&h!==S&&(0,s.fail)(`Type cache flag mismatch for node type ${c.nodeType}: cached flags = ${S}, access flags = ${h}`)}return(0,s.assert)(!(0,le.isIncompleteType)(g)),g}}function me(c,h,g,S,I,_=!1){if(S){Yn&&Yn.set(c.id,h);return}const C=Q&&Gt(c)?Q:Xt;C.set(c.id,h),(Ue.verifyTypeCacheEvaluatorFlags||Oe)&&C===Xt&&g!==void 0&&it.set(c.id,g),mt.isSpeculative(c)&&(mt.trackEntry(C,c.id),_&&mt.addSpeculativeType(c,h,I))}function we(c){(Q&&Gt(c)?Q:Xt).delete(c.id)}function He(c,h=d.UnknownType.create(),g=0){me(c,h,g,!1)}function _t(c){mt.isSpeculative(void 0)||ht.add(c.id)}function Nt(c){return ht.has(c.id)}function Gt(c){const h=z.length;if(h===0)return!1;const g=z[h-1];let S=c;for(;S;){if(S===g.functionNode)return!0;S=S.parent}return!1}function mn(){const c=z.length;return(0,s.assert)(c>0),z[c-1].codeFlowAnalyzer}function Rt(c,h){return Ye.findIndex(g=>g.symbolId===c.id&&g.declaration===h)}function ln(c,h){const g=Rt(c,h);if(g>=0){for(let S=g+1;S<Ye.length;S++)Ye[S].isResultValid=!1;return!1}return Ye.push({symbolId:c.id,declaration:h,isResultValid:!0}),!0}function Mt(c){const h=Ye.pop();return(0,s.assert)(h.symbolId===c.id),h.isResultValid}function un(c,h,g){const S=Rt(c,h);S>=0&&(Ye[S].partialType=g)}function Mn(c,h){const g=Rt(c,h);if(g>=0)return Ye[g].partialType}function Lr(c){var h;return(h=Yc(c,()=>{Hc(c)}))===null||h===void 0?void 0:h.type}function $v(c){Hc(c);let h=c;for(;h!==void 0;){const g=Ti.get(h.id);if(g)return{type:g,node:h};h=h.parent}}function jv(c){Me||(Me=!0,pt=Fn(c,"object"),vt=ai(c,"type"),Vt=Fn(c,"function"),Vr(c,"Collection"),je=Yv(c,"NoneType")||d.AnyType.create(),Tt=ai(c,"tuple"),hn=ai(c,"bool"),sn=ai(c,"str"),Pn=ai(c,"dict"),Hi=Vr(c,"_TypedDict"))}function rt(c,h=0,g){var S;const I=Ce(c,h);if(I)return{type:I,node:c};{const w=mt.getSpeculativeType(c,g);if(w)return{type:w,node:c}}ge(),g=(0,k.transformPossibleRecursiveTypeAlias)(g),jv(c);let _,C=(h&64)!==0;switch(c.nodeType){case 38:{_=ZP(c,h);break}case 35:{_=n2(c,h);break}case 24:{_=a2(c,h);break}case 9:{_=d2(c,g,h);break}case 52:{_=c2(c,g,h);break}case 11:{_=E2(c,h);break}case 48:{const w=(h&8)!==0&&!jP(c);w&&(C=!1),_=LP(c,h,w);break}case 40:{_=OP(c,_);break}case 18:{_=RP(h,_,c);break}case 55:{_=F2(c,g);break}case 7:{_=mb(c,g,h);break}case 5:{_=gb(c,g);break}case 31:case 45:{_=P2(c,g);break}case 46:{_=L2(c);break}case 6:{_=NP(c,h,g);break}case 51:{_=M2(c,h,g);break}case 32:{_=x2(c,g);break}case 15:{_=k2(c,g);break}case 30:{_=O2(c,g);break}case 3:{_=rt(c.rightExpression),as(c.leftExpression,_.type,!1,c.rightExpression,!0,!0);break}case 4:{_=rt(c.rightExpression),as(c.name,_.type,!1,c.rightExpression,!0);break}case 60:{_=N2(c);break}case 61:{_=R2(c);break}case 56:{_=xP(c,h,g);break}case 54:{_=rt(c.typeAnnotation,34024);break}case 49:case 27:{_=zP(c);break}case 0:{bo(c,()=>{c.child&&rt(c.child)}),_={type:d.UnknownType.create(),node:c};break}default:(0,s.assertNever)(c)}return _||(0,s.fail)(`Unhandled expression type '${N.printExpression(c)}'`),C&&!_.isIncomplete&&(h&128&&(0,d.isTypeVar)(_.type)&&_.type.details.isVariadic&&!_.type.isVariadicInUnion&&(st(p.Localizer.Diagnostic.typeVarTupleContext(),c),_.type=d.UnknownType.create()),d.TypeBase.isInstantiable(_.type)||(0,d.isClassInstance)(_.type)&&d.ClassType.isTupleClass(_.type)&&((S=_.type.tupleTypeArguments)===null||S===void 0?void 0:S.length)===0||(Kd(_.type,c),_.type=d.UnknownType.create())),h&65536&&(0,k.isTypeAliasPlaceholder)(_.type)&&(_.type.details.illegalRecursionDetected=!0),(0,k.isTypeAliasPlaceholder)(_.type)||(me(c,_.type,h,!!_.isIncomplete,g,!0),g&&!(0,d.isAnyOrUnknown)(g)&&!(0,d.isNever)(g)&&Ti.set(c.id,g)),_}function NP(c,h,g){const S=g?Zd(c,g,!1):void 0,I=rt(c.expression,h,S),_={type:Em(I.type,c.expression),node:c};return I.isIncomplete&&(_.isIncomplete=!0),_}function RP(c,h,g){return(c&1)!==0?h={type:d.AnyType.create(!0),node:g}:(c&256)!==0?h={type:d.UnknownType.create(),node:g}:h={type:Fn(g,"ellipsis")||d.AnyType.create(),node:g},h}function OP(c,h){return c.isImaginary?h={node:c,type:Fn(c,"complex")}:c.isInteger?h={node:c,type:zm(c,"int",c.value)}:h={node:c,type:Fn(c,"float")},h}function xP(c,h,g){var S;let I,_;if(g){const A=ai(c,"Iterable");A&&(0,d.isInstantiableClass)(A)&&(_=d.ClassType.cloneAsInstance(d.ClassType.cloneForSpecialization(A,[g],!0)))}const C=rt(c.expression,h,_),w=C.type;return(h&128)===0&&(0,d.isVariadicTypeVar)(w)&&!w.isVariadicUnpacked?I={type:d.TypeVarType.cloneForUnpacked(w),node:c}:(h&2097152)!==0&&(0,d.isInstantiableClass)(w)&&d.ClassType.isBuiltIn(w,"tuple")?I={type:d.ClassType.cloneForUnpacked(w),node:c}:I={type:(S=Es(w,!1,c))!==null&&S!==void 0?S:d.UnknownType.create(!!C.isIncomplete),unpackedType:w,node:c,isIncomplete:C.isIncomplete},I}function LP(c,h,g){let S;if(g){let I=h|4|64;if((h&4194304)===0&&(I|=524288),c.typeAnnotation)S=rt(c.typeAnnotation,I);else if(!c.typeAnnotation&&c.strings.length===1){const _=AA(c);_&&(S=rt(_,I))}if(!S){const _=F.getFileInfo(c);Xe(_.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.expectedTypeNotString(),c),S={node:c,type:d.UnknownType.create()}}}else{c.strings.forEach(_=>{_.nodeType===27&&_.expressions.forEach(C=>{rt(C)})});const I=(c.strings[0].token.flags&32)!==0;c.strings.some(_=>_.nodeType===27)?S={node:c,type:Fn(c,I?"bytes":"str")}:S={node:c,type:zm(c,I?"bytes":"str",c.strings.map(_=>_.value).join(""))}}return S}function zP(c){const h=(c.token.flags&32)!==0;let g;return c.nodeType===27?g={node:c,type:Fn(c,h?"bytes":"str")}:g={node:c,type:zm(c,h?"bytes":"str",c.value)},g}function $d(c,h){return zr(c,{associateTypeVarsWithScope:!0,allowTypeVarTuple:h===1,disallowRecursiveTypeAlias:!0,allowUnpackedTypedDict:h===2,allowUnpackedTuple:h===1})}function zr(c,h){var g,S,I;const _=F.getFileInfo(c);if(_.isTypingStubFile||_.isTypingExtensionsStubFile){const A=J2(c);if(A)return A}let C=1097;h!=null&&h.isVariableAnnotation&&(C|=32768),h!=null&&h.allowFinal||(C|=16),h!=null&&h.allowClassVar||(C|=131072),h!=null&&h.allowTypeVarTuple?C|=2097152:C|=128,h!=null&&h.allowParamSpec||(C|=32),h!=null&&h.associateTypeVarsWithScope?C|=8192:C|=4096,h!=null&&h.disallowRecursiveTypeAlias&&(C|=65536),h!=null&&h.allowUnpackedTypedDict&&(C|=8388608),h!=null&&h.allowUnpackedTuple&&(C|=2097152),h!=null&&h.notParsedByInterpreter&&(C|=524288),(0,V.isAnnotationEvaluationPostponed)(_)&&(C|=4),((g=c==null?void 0:c.parent)===null||g===void 0?void 0:g.nodeType)===3&&c.parent.typeAnnotationComment===c?C|=524292:((S=c==null?void 0:c.parent)===null||S===void 0?void 0:S.nodeType)===62?(c.parent.returnTypeAnnotation===c||c.parent.paramTypeAnnotations.some(A=>A===c))&&(C|=524292):((I=c==null?void 0:c.parent)===null||I===void 0?void 0:I.nodeType)===41&&c.parent.typeAnnotationComment===c&&(C|=524292);const w=rt(c,C).type;return(0,d.isModule)(w)&&Xe(_.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.moduleAsType(),c),(0,k.convertToInstance)(w)}function qv(c,h){let g=F.getFileInfo(c).isStubFile?4:0;c.expression.nodeType!==9&&(g|=2);const S=rt(c.expression,g);if((0,d.isInstantiableClass)(S.type)&&d.ClassType.isBuiltIn(S.type,"classmethod")&&(0,k.isProperty)(h))return h;const I=[{argumentCategory:0,type:h}],_=sr(c.expression,I,S,void 0,!0).returnType||d.UnknownType.create();return(0,d.isFunction)(_)&&!_.details.declaredReturnType&&!_.details.parameters.some((C,w)=>!C.name||C.hasDeclaredType?!0:C.category!==0?!1:w!==0||!C.isTypeInferred)||(0,k.isPartlyUnknown)(_)&&(0,d.isFunction)(S.type)&&!S.type.details.parameters.find(C=>C.typeAnnotation!==void 0)&&S.type.details.declaredReturnType===void 0?h:_}function Wc(c,h=0){if(h>d.maxTypeRecursionCount)return!0;switch(h++,c.category){case 0:case 1:case 2:case 4:case 3:return!0;case 9:return(0,d.findSubtype)(c,g=>Wc(g,h))!==void 0;case 5:case 6:case 8:case 10:return!1;case 7:{if(d.TypeBase.isInstantiable(c))return!1;if((0,k.isTupleClass)(c)&&c.tupleTypeArguments)return(0,k.isUnboundedTupleClass)(c)||c.tupleTypeArguments.length===0;if(d.ClassType.isBuiltIn(c,"bool")&&c.literalValue!==void 0)return c.literalValue===!1;if(d.ClassType.isProtocolClass(c)||(0,k.lookUpObjectMember)(c,"__len__"))return!0;const S=(0,k.lookUpObjectMember)(c,"__bool__");if(S){const I=Fi(S);if((0,d.isFunction)(I)&&I.details.declaredReturnType){const _=I.details.declaredReturnType;if((0,d.isClassInstance)(_)&&d.ClassType.isBuiltIn(_,"bool")&&_.literalValue===!0)return!1}return!0}return!1}}}function $c(c,h=0){if(h>d.maxTypeRecursionCount)return!0;switch(h++,c.category){case 1:case 5:case 6:case 8:case 10:case 4:case 2:return!0;case 9:return(0,d.findSubtype)(c,g=>$c(g,h))!==void 0;case 0:case 3:return!1;case 7:{if(d.TypeBase.isInstantiable(c))return!0;if((0,k.isTupleClass)(c)&&c.tupleTypeArguments&&c.tupleTypeArguments.length===0||c.literalValue===!1||c.literalValue===0||c.literalValue===BigInt(0)||c.literalValue==="")return!1;if(d.ClassType.isProtocolClass(c))return!0;const g=(0,k.lookUpObjectMember)(c,"__bool__");if(g){const S=Fi(g);if((0,d.isFunction)(S)&&S.details.declaredReturnType){const I=S.details.declaredReturnType;if((0,d.isClassInstance)(I)&&d.ClassType.isBuiltIn(I,"bool")&&I.literalValue===!1)return!1}}return!0}}}function Gv(c){return(0,k.mapSubtypes)(c,h=>{if((0,d.isClassInstance)(h)){if(h.literalValue!==void 0)return h.literalValue?void 0:h;if(d.ClassType.isBuiltIn(h,"bool"))return d.ClassType.cloneWithLiteral(h,!1)}if(Wc(h))return h})}function Kv(c){return(0,k.mapSubtypes)(c,h=>{if((0,d.isClassInstance)(h)){if(h.literalValue!==void 0)return h.literalValue?h:void 0;if(d.ClassType.isBuiltIn(h,"bool"))return d.ClassType.cloneWithLiteral(h,!0)}if($c(h))return h})}function Ur(c,h,g,S={method:"get"},I=void 0,_=0,C){const w=vl(c,d.ClassType.cloneAsInstantiable(h),!0,g,S,I,_|8,C);if(w)return{node:c,type:w.type,isIncomplete:!!w.isTypeIncomplete,isAsymmetricDescriptor:w.isAsymmetricDescriptor}}function Gs(c,h,g,S={method:"get"},I=void 0,_=0,C){let w;if(d.ClassType.isPartiallyEvaluated(h))return Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.classDefinitionCycle().format({name:h.details.name}),c),{node:c,type:d.UnknownType.create()};if((_&32)===0&&(w=vl(c,h,!1,g,S,I,_|1,C)),w&&w.classType&&w.symbol&&(0,d.isClass)(w.classType)&&d.ClassType.isProtocolClass(w.classType)){const A=(0,H.getLastTypedDeclaredForSymbol)(w.symbol);A&&A.type===1&&!w.isClassVar&&Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.protocolMemberNotClassVar().format({memberName:g,className:w.classType.details.name}),c)}if(!w){const A=h.details.effectiveMetaclass;A&&(0,d.isInstantiableClass)(A)&&!d.ClassType.isSameGenericClass(A,h)&&(w=vl(c,A,!0,g,S,void 0,_,h))}if(w)return{node:c,type:w.type,isIncomplete:!!w.isTypeIncomplete,isAsymmetricDescriptor:w.isAsymmetricDescriptor}}function Ta(c,h,g=0,S=!1){const I=(0,k.lookUpClassMember)(c,h,8);if(I){const _=Fi(I);if((0,d.isFunction)(_)||(0,d.isOverloadedFunction)(_)){const C=os(d.ClassType.cloneAsInstance(c),_,void 0,void 0,g,S);if(C)return C}else if((0,d.isAnyOrUnknown)(_)){const C=d.FunctionType.createSynthesizedInstance("",32768);return d.FunctionType.addDefaultParameters(C),C}}}function UP(c,h,g){const S=c.leftExpression,I=Lr(S);if(I===void 0)return;const _=[];let C=0;function w(){_.push({argumentCategory:C,type:d.UnknownType.create(),active:!0})}c.arguments.forEach((O,K)=>{let ne=!1;K===h&&(g?ne=!0:w()),C=O.argumentCategory,_.push({valueExpression:O.valueExpression,argumentCategory:O.argumentCategory,name:O.name,active:ne})}),c.arguments.length<h&&w();const A=[];function x(O){let K;Ei(c,()=>{K=db(S,_,O,new oe.TypeVarContext((0,k.getTypeVarScopeId)(O)),!0)}),A.push({type:O,activeParam:K==null?void 0:K.activeParam})}function j(O){(0,d.isFunction)(O)?x(O):O.overloads.forEach(K=>{d.FunctionType.isOverloaded(K)&&x(K)})}if((0,k.doForEachSubtype)(I,O=>{switch(O.category){case 5:case 6:{j(O);break}case 7:{if(d.TypeBase.isInstantiable(O)){let K;K=Ta(O,"__init__");const ne=!!K&&(0,d.isFunction)(K)&&K.details.fullName==="builtins.object.__init__",ie=!!K&&(0,d.isFunction)(K)&&d.FunctionType.isSkipConstructorCheck(K);if(!K||ne||ie){const pe=Ta(O,"__new__",void 0,!0);pe&&((0,d.isFunction)(pe)&&pe.details.fullName==="builtins.object.__new__"||(K=pe))}K&&j(K)}else{const K=Ta(O,"__call__");K&&j(K)}break}}}),A.length!==0)return{callNode:c,signatures:A}}function Cm(c){if(c.nodeType===54&&c.valueExpression.nodeType===38){const h=$r(c,c.valueExpression.value,!1);if(h)return h.symbol.getDeclarations().find(S=>(0,D.isExplicitTypeAliasDeclaration)(S))!==void 0}return!1}function wm(c,h){let g,S,I,_=!0;switch(c.nodeType){case 38:{const C=$r(c,c.value,!0);if(C&&(g=C.symbol,Sa(g)===void 0&&C.scope.type===2)){const w=N.getEnclosingClassOrFunction(c);if(w&&w.nodeType===10){const A=ti(w);if(A){const x=(0,k.lookUpClassMember)(A.classType,c.value,24);x&&(g=x.symbol)}}}break}case 54:return wm(c.valueExpression);case 35:{const C=Yt(rt(c.leftExpression,2).type);let w;(0,d.isClassInstance)(C)?(w=(0,k.lookUpObjectMember)(C,c.memberName.value,16),S=C,I=w==null?void 0:w.classType,w!=null&&w.isInstanceMember&&(_=!1)):(0,d.isInstantiableClass)(C)&&(w=(0,k.lookUpClassMember)(C,c.memberName.value,24),S=C,I=w==null?void 0:w.classType),w&&(g=w.symbol);break}case 24:{const C=Yt(rt(c.baseExpression,2).type);if(C&&(0,d.isClassInstance)(C)){const w=(0,k.lookUpClassMember)(C,"__setitem__");if(w){const A=Fi(w);if((0,d.isFunction)(A)){const x=os(C,A,(0,d.isInstantiableClass)(w.classType)?w.classType:void 0,c,void 0,!1);if(x&&(0,d.isFunction)(x)&&x.details.parameters.length>=2){const j=d.FunctionType.getEffectiveParameterType(x,1);if(!(0,d.isAnyOrUnknown)(j))return j}}}else if(d.ClassType.isTypedDictClass(C)){const A=(0,R.getTypeOfIndexedTypedDict)(Bt,c,C,h||{method:"get"});if(A)return A.type}}break}}if(g){let C=Sa(g);if(C){if((0,d.isClassInstance)(C)){const w=(0,k.lookUpClassMember)(C,"__set__"),A=w?Fi(w):void 0;if(A&&(0,d.isFunction)(A)&&A.details.parameters.length>=3&&(C=A.details.parameters[2].type,(0,d.isAnyOrUnknown)(C)))return}return S&&(I&&(0,d.isInstantiableClass)(I)&&(C=(0,k.partiallySpecializeType)(C,I)),((0,d.isFunction)(C)||(0,d.isOverloadedFunction)(C))&&_&&(C=os(S,C,void 0,c))),C}}}function Em(c,h){return(0,k.mapSubtypes)(c,g=>{if(g=Yt(g),(0,d.isAnyOrUnknown)(g))return g;if((0,d.isClassInstance)(g)){const S=va(g,"__await__",h);if(S){if((0,d.isAnyOrUnknown)(S))return S;if((0,d.isClassInstance)(S)&&va(S,"__iter__",h)){const _=XP(S);if(_)return _}}}if(h){const S=F.getFileInfo(h);Xe(S.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeNotAwaitable().format({type:at(g)}),h)}return d.UnknownType.create()})}function Es(c,h,g){const S=h?"__aiter__":"__iter__",I=h?"__anext__":"__next__";let _=!0;c=Yt(c),(0,k.isOptionalType)(c)&&(g&&Xe(F.getFileInfo(g).diagnosticRuleSet.reportOptionalIterable,o.DiagnosticRule.reportOptionalIterable,p.Localizer.Diagnostic.noneNotIterable(),g),c=(0,d.removeNoneFromUnion)(c));const C=(0,k.mapSubtypes)(c,w=>{if(w=Yt(w),(0,d.isAnyOrUnknown)(w))return w;const A=new l.DiagnosticAddendum;if((0,d.isClass)(w)){let x;if(d.TypeBase.isInstance(w)){if((0,k.isTupleClass)(w)&&w.tupleTypeArguments&&w.tupleTypeArguments.length===0)return d.NeverType.createNever();x=va(w,S,g)}else d.TypeBase.isInstantiable(w)&&w.details.effectiveMetaclass&&(0,d.isInstantiableClass)(w.details.effectiveMetaclass)&&(x=va(d.ClassType.cloneAsInstance(w.details.effectiveMetaclass),S,g,w));if(x){const j=new l.DiagnosticAddendum,O=rr(x,void 0,K=>{if((0,d.isAnyOrUnknown)(K))return K;if((0,d.isClassInstance)(K)){const ne=va(K,I,g);if(!ne)j.addMessage(p.Localizer.Diagnostic.methodNotDefinedOnType().format({name:I,type:at(K)}));else return h?Em(ne,g):ne}else j.addMessage(p.Localizer.Diagnostic.methodReturnsNonObject().format({name:S}))});if(j.isEmpty())return O;A.addAddendum(j)}else{if((0,d.isClassInstance)(w)){const j=va(w,"__getitem__",g);if(j)return j}A.addMessage(p.Localizer.Diagnostic.methodNotDefined().format({name:S}))}}g&&Xe(F.getFileInfo(g).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeNotIterable().format({type:at(w)})+A.getString(),g),_=!1});return _?C:void 0}function Hv(c,h,g){const S=h?"__aiter__":"__iter__";let I=!0;c=Yt(c),(0,k.isOptionalType)(c)&&(g&&Xe(F.getFileInfo(g).diagnosticRuleSet.reportOptionalIterable,o.DiagnosticRule.reportOptionalIterable,p.Localizer.Diagnostic.noneNotIterable(),g),c=(0,d.removeNoneFromUnion)(c));const _=(0,k.mapSubtypes)(c,C=>{if((0,d.isAnyOrUnknown)(C))return C;if((0,d.isClass)(C)){let w;if(d.TypeBase.isInstance(C)?w=va(C,S,g):d.TypeBase.isInstantiable(C)&&C.details.effectiveMetaclass&&(0,d.isInstantiableClass)(C.details.effectiveMetaclass)&&(w=va(d.ClassType.cloneAsInstance(C.details.effectiveMetaclass),S,g,C)),w)return Yt(w)}g&&Xe(F.getFileInfo(g).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeNotIterable().format({type:at(C)}),g),I=!1});return I?_:void 0}function VP(){return Hi}function BP(){return Tt}function WP(){return pt}function Vr(c,h){var g;return(g=jd(c,h,["typing"]))!==null&&g!==void 0?g:jd(c,h,["typing_extensions"])}function Yv(c,h){return jd(c,h,["_typeshed"])}function jd(c,h,g){const S=F.getFileInfo(c),I=tt({nameParts:g,importingFilePath:S.filePath});if(!I)return;const _=I.symbolTable.get(h);if(!!_)return Fs(_)}function gl(c){const h=c.nodeType===28?c:N.getExecutionScopeNode(c);if(F.getCodeFlowComplexity(h)>t.maxCodeComplexity){let S=h;h.nodeType===28?S=h.name:h.nodeType===36&&(S={start:0,length:0});const I=F.getFileInfo(c);return Qv(I,I.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.codeTooComplexToAnalyze(),S),!0}return!1}function _a(c,h){if(gl(c))return!0;const g=F.getFlowNode(c);if(!g)return c.parent?_a(c.parent,h):!1;const S=h?F.getFlowNode(h):void 0;return Ca.isFlowNodeReachable(g,S)}function Fm(c){const h=F.getAfterFlowNode(c);return h?gl(c)?!0:!(!Ca.isFlowNodeReachable(h)||!$P(c,h)):!1}function $P(c,h){const g=Fb(c.id);return gl(c)?!0:g.getTypeFromCodeFlow(h,void 0,void 0,d.UnboundType.create(),!1,!0).type!==void 0}function km(c,h,g=!0){if(gl(c))return!0;const S=F.getFlowNode(c),I=F.getFlowNode(h);return!S||!I?!1:S===I?g:Ca.isFlowNodeReachable(I,S,!0)}function jP(c){if(c.parent&&c.parent.nodeType===24){const h=rt(c.parent.baseExpression).type;if(h&&(0,d.isInstantiableClass)(h)&&d.ClassType.isSpecialBuiltIn(h,"Literal"))return!0}return!1}function qd(c,h,g){return Gd("information",c,h,g)}function qP(c,h,g){return Gd("warning",c,h,g)}function st(c,h,g){return Gd("error",c,h,g)}function GP(c,h){Tl(c)||F.getFileInfo(c).diagnosticSink.addUnusedCodeWithTextRange(p.Localizer.Diagnostic.unreachableCode(),h)}function KP(c,h){Tl(h)||F.getFileInfo(h).diagnosticSink.addDeprecatedWithTextRange(c,h)}function Gd(c,h,g,S){if(!Tl(g)&&_a(g))return F.getFileInfo(g).diagnosticSink.addDiagnosticWithTextRange(c,h,S||g)}function Tl(c){return Be.some(h=>N.isNodeContainedWithin(c,h))||mt.isSpeculative(c)}function Xe(c,h,g,S){if(c==="none")return;const I=Gd(c,g,S);return I&&I.setRule(h),I}function Qv(c,h,g,S,I){if(h==="none")return;const _=c.diagnosticSink.addDiagnosticWithTextRange(h,S,I);return g&&_.setRule(g),_}function Kd(c,h){const g=F.getFileInfo(h),S=new l.DiagnosticAddendum;(0,d.isUnion)(c)&&(0,k.doForEachSubtype)(c,I=>{d.TypeBase.isInstantiable(I)||S.addMessage(p.Localizer.DiagnosticAddendum.typeNotClass().format({type:at(I)}))}),Xe(g.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeExpectedClass().format({type:at(c)})+S.getString(),h)}function jc(c,h,g,S,I,_=!1,C){const w=c.value,A=$r(c,w,!1);if(!A)return;const x=A.symbol.getDeclarations();let j=Sa(A.symbol);const O=F.getFileInfo(c);if(j===void 0&&A.scope.type===2){const ie=N.getEnclosingClass(c);if(ie){const pe=ti(ie);if(pe){const Ie=(0,k.lookUpClassMember)(pe.classType,c.value,1);Ie!=null&&Ie.isTypeDeclared&&(j=Fi(Ie))}}}let K=h;if(j){let ie=new l.DiagnosticAddendum;Ot(j,h,ie)?K=Jm(j,h):(C&&(ie=C),Xe(O.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeAssignmentMismatch().format({sourceType:at(h),destType:at(j)})+ie.getString(),I!=null?I:c),K=j)}else{const ie=ue.getScopeForNode(c);(ie==null?void 0:ie.type)===2&&d.TypeBase.isInstance(K)&&!(0,ee.isConstantName)(w)&&!(0,H.isFinalVariable)(A.symbol)&&(K=(0,k.stripLiteralValue)(K))}const ne=x.find(ie=>ie.type===1);ne&&ne.type===1&&(ne.isConstant?c!==(0,D.getNameNodeForDeclaration)(x[0])&&Xe(O.diagnosticRuleSet.reportConstantRedefinition,o.DiagnosticRule.reportConstantRedefinition,p.Localizer.Diagnostic.constantRedefinition().format({name:w}),c):ne.isFinal&&!_&&Xe(O.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.finalReassigned().format({name:w}),c)),g||Lm(O.diagnosticRuleSet.reportUnknownVariableType,o.DiagnosticRule.reportUnknownVariableType,c,K,c,S),me(c,K,0,g,void 0,!1)}function HP(c,h,g,S,I){const _=rt(c.leftExpression,2),C=Yt(_.type);if(c.leftExpression.nodeType===38){const A=N.getEnclosingClass(c);if(A){const x=ti(A);if(x&&(0,d.isInstantiableClass)(x.classType)&&((0,d.isClassInstance)(C)?d.ClassType.isSameGenericClass(C,x.classType)&&Jv(c,h,g,!0,S):(0,d.isInstantiableClass)(C)&&d.ClassType.isSameGenericClass(C,x.classType)&&Jv(c,h,g,!1,S),d.ClassType.isProtocolClass(x.classType))){const j=x.classType.details.fields.get(c.memberName.value);j&&j.getDeclarations().filter(K=>!N.getEnclosingFunction(K.node)).length===0&&st(p.Localizer.Diagnostic.assignmentInProtocol(),c.memberName)}}}_l(c,_,{method:"set",setType:h,setErrorNode:S,setExpectedTypeDiag:I},0).isAsymmetricDescriptor&&_t(c),me(c.memberName,h,0,g,void 0,!1),me(c,h,0,g,void 0,!1)}function Jv(c,h,g,S,I){const _=c.memberName.value,C=F.getFileInfo(c),w=N.getEnclosingClass(c);if(!w)return;const A=ti(w);if(A&&(0,d.isInstantiableClass)(A.classType)){let x=(0,k.lookUpClassMember)(A.classType,_,S?0:8);const j=A.classType.details.fields;if(x){const O=(0,d.isInstantiableClass)(x.classType)?x.classType:void 0,K=O&&d.ClassType.isSameGenericClass(A.classType,O);if(K&&S&&(O==null?void 0:O.details.inheritedSlotsNames)&&O.details.localSlotsNames&&O.details.localSlotsNames.length>0&&!O.details.inheritedSlotsNames.some(ne=>ne===_)){const ne=(0,k.lookUpClassMember)(O,_,8);let ie=!1;if(ne){const pe=Fs(ne.symbol);((0,d.isAnyOrUnknown)(pe)||(0,d.isUnbound)(pe)||(0,k.isMaybeDescriptorInstance)(pe))&&(ie=!0)}ie||Xe(C.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.slotsAttributeError().format({name:_}),c.memberName)}if(K&&x.isInstanceMember===S){const ne=j.get(_);(0,s.assert)(ne!==void 0);const ie=ne.getDeclarations();ie.length>0&&ie[0].type===1&&I&&c.memberName!==ie[0].node&&ie[0].isConstant&&Xe(C.diagnosticRuleSet.reportConstantRedefinition,o.DiagnosticRule.reportConstantRedefinition,p.Localizer.Diagnostic.constantRedefinition().format({name:c.memberName.value}),c.memberName)}else{const ne=Sa(x.symbol);if(ne&&!(0,k.isProperty)(ne)&&!x.isInstanceMember&&S){_o(C,x.symbol,c.memberName);const ie=Fi(x);h=(0,d.combineTypes)([h,ie])}}}x=(0,k.lookUpClassMember)(A.classType,_,16),!x&&I&&!g&&Lm(C.diagnosticRuleSet.reportUnknownMemberType,o.DiagnosticRule.reportUnknownMemberType,c.memberName,h,c,!0)}}function YP(c,h,g,S){const I=c.nodeType===31?c.entries:c.expressions,_=new Array(I.length);for(let x=0;x<I.length;x++)_[x]=[];const C=I.findIndex(x=>x.nodeType===56),w=I.findIndex(x=>x.nodeType===56);h=Yt(h);const A=new l.DiagnosticAddendum;if((0,k.doForEachSubtype)(h,x=>{const j=(0,k.getSpecializedTupleType)(x);if(j&&j.tupleTypeArguments){const O=j.tupleTypeArguments.map(ne=>(0,k.addConditionToType)(ne.type,(0,k.getTypeCondition)(x))),K=j.tupleTypeArguments.findIndex(ne=>ne.isUnbounded);if(K>=0){if(O.length>_.length)O.splice(K,1);else if(O.length<_.length){const ne=O.length>0?O[K]:d.AnyType.create();for(;O.length<_.length;)O.splice(K,0,ne)}}if(C>=0)if(O.length>_.length){const ne=O.splice(C,O.length-_.length+1);let ie=(0,d.combineTypes)(ne);c.nodeType===31&&(ie=(0,k.stripLiteralValue)(ie)),O.splice(C,0,ie)}else O.length===_.length-1&&O.splice(C,0,d.NeverType.createNever());if(O.forEach((ne,ie)=>{ie<_.length&&_[ie].push(ne)}),O.length!==I.length){const ne=w>=0?I.length-1:I.length,ie=A.createAddendum();ie.addMessage((c.nodeType===31?p.Localizer.DiagnosticAddendum.listAssignmentMismatch():p.Localizer.DiagnosticAddendum.tupleAssignmentMismatch()).format({type:at(x)})),ie.createAddendum().addMessage(p.Localizer.DiagnosticAddendum.tupleSizeMismatch().format({expected:ne,received:O.length}))}}else{const O=Es(x,!1,S)||d.UnknownType.create();for(let K=0;K<I.length;K++)_[K].push((0,k.addConditionToType)(O,(0,k.getTypeCondition)(x)))}}),!A.isEmpty()){const x=F.getFileInfo(c);Xe(x.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,(c.nodeType===31?p.Localizer.Diagnostic.listAssignmentMismatch():p.Localizer.Diagnostic.tupleAssignmentMismatch()).format({type:at(h)})+A.getString(),c)}I.forEach((x,j)=>{const O=_[j],K=O.length===0?d.UnknownType.create():(0,d.combineTypes)(O);as(x,K,g,S,!0)}),me(c,h,0,g)}function Yt(c,h){return(0,k.mapSubtypes)(c,g=>{if((0,d.isParamSpec)(g)){if(g.paramSpecAccess==="args")return Tt&&(0,d.isInstantiableClass)(Tt)&&pt&&(0,d.isClassInstance)(pt)?d.ClassType.cloneAsInstance((0,k.specializeTupleClass)(Tt,[{type:pt,isUnbounded:!0}])):d.UnknownType.create();if(g.paramSpecAccess==="kwargs")return Pn&&(0,d.isInstantiableClass)(Pn)&&sn&&(0,d.isInstantiableClass)(sn)&&pt&&(0,d.isClassInstance)(pt)?d.ClassType.cloneAsInstance(d.ClassType.cloneForSpecialization(Pn,[(0,k.convertToInstance)(sn),pt],!0)):d.UnknownType.create()}if((0,d.isVariadicTypeVar)(g)&&Tt&&(0,d.isInstantiableClass)(Tt))return(0,k.convertToInstance)((0,k.specializeTupleClass)(Tt,[],!0,!0,!0));if((0,d.isTypeVar)(g)&&!g.details.recursiveTypeAliasName){if(g.details.boundType){const S=d.TypeBase.isInstantiable(g)?(0,k.convertToInstantiable)(g.details.boundType):g.details.boundType;return g.details.isSynthesized?S:(0,k.addConditionToType)(S,[{typeVarName:d.TypeVarType.getNameWithScope(g),constraintIndex:0,isConstrainedTypeVar:!1}])}if(g.details.recursiveTypeAliasName)return g;if(g.details.constraints.length>0){const S=[];return g.details.constraints.forEach((I,_)=>{if(h){const C=d.TypeVarType.getNameWithScope(g),w=h.find(A=>A.typeVarName===C);if(w&&w.constraintIndex!==_)return}d.TypeBase.isInstantiable(g)&&(I=(0,k.convertToInstantiable)(I)),S.push((0,k.addConditionToType)(I,[{typeVarName:d.TypeVarType.getNameWithScope(g),constraintIndex:_,isConstrainedTypeVar:!0}]))}),(0,d.combineTypes)(S)}if(g.details.isExemptFromBoundCheck)return d.AnyType.create();if(d.TypeBase.isInstantiable(g)){if(vt&&(0,d.isInstantiableClass)(vt))return g.details.isSynthesized?vt:(0,k.addConditionToType)(d.ClassType.cloneAsInstance(vt),[{typeVarName:d.TypeVarType.getNameWithScope(g),constraintIndex:0,isConstrainedTypeVar:!1}])}else if(pt)return g.details.isSynthesized?pt:(0,k.addConditionToType)(pt,[{typeVarName:d.TypeVarType.getNameWithScope(g),constraintIndex:0,isConstrainedTypeVar:!1}]);return d.AnyType.create()}return g})}function rr(c,h,g){const S=[];let I=!1;const _=w=>{let A=(0,d.isUnion)(w)?w:Yt(w);A=(0,k.transformPossibleRecursiveTypeAlias)(A),(0,k.doForEachSubtype)(A,x=>{var j;if(h&&!d.TypeCondition.isCompatible((0,k.getTypeCondition)(x),h))return;let O=g(x,w);if(O!==w&&(I=!0),O){const K=(j=(0,k.getTypeCondition)(x))===null||j===void 0?void 0:j.filter(ne=>ne.isConstrainedTypeVar);K&&K.length>0&&(O=(0,k.addConditionToType)(O,K)),S.push(O)}})};if((0,d.isUnion)(c)?c.subtypes.forEach(w=>{_(w)}):_(c),!I)return c;const C=(0,d.combineTypes)(S);return C.category===9&&d.UnionType.addTypeAliasSource(C,c),C}function QP(c,h){const g=F.getFileInfo(c),S=ue.getScopeForNode(c);S&&h.forEach(I=>{const _=S.lookUpSymbolRecursive(I);_&&_o(g,_.symbol,c)})}function as(c,h,g,S,I=!1,_=!1,C){if((0,d.isTypeVar)(h)&&S&&S.nodeType===9){const w=rt(S.leftExpression,2).type;(0,d.isInstantiableClass)(w)&&(d.ClassType.isBuiltIn(w,"TypeVar")||d.ClassType.isBuiltIn(w,"TypeVarTuple")||d.ClassType.isBuiltIn(w,"ParamSpec"))&&(c.nodeType!==38||c.value!==h.details.name)&&st(h.details.isParamSpec?p.Localizer.Diagnostic.paramSpecAssignedName().format({name:d.TypeVarType.getReadableName(h)}):p.Localizer.Diagnostic.typeVarAssignedName().format({name:d.TypeVarType.getReadableName(h)}),c)}switch(h=(0,d.removeUnbound)(h),c.nodeType){case 38:{jc(c,h,g,I,S,_,C);break}case 35:{HP(c,h,g,S,C);break}case 24:{const w=rt(c.baseExpression,2);Pm(c,w,{method:"set",setType:h,setErrorNode:S,setExpectedTypeDiag:C},0),me(c,h,0,g);break}case 31:case 52:{YP(c,h,g,S);break}case 54:{const w=zr(c.typeAnnotation,{isVariableAnnotation:!0,allowFinal:N.isFinalAllowedForAssignmentTarget(c.valueExpression),allowClassVar:N.isClassVarAllowedForAssignmentTarget(c.valueExpression)});(0,d.isClassInstance)(w)&&(d.ClassType.isBuiltIn(w,"Final")||d.ClassType.isBuiltIn(w,"ClassVar"))||(0,d.isClassInstance)(w)&&d.ClassType.isBuiltIn(w,"TypeAlias")||Ot(w,h)&&(!(0,d.isClassInstance)(h)||!d.ClassType.isEnumClass(h))&&(h=Jm(w,h)),as(c.valueExpression,h,!1,S,I,_,C);break}case 56:{c.expression.nodeType===38&&jc(c.expression,Fn(c.expression,"list",[h]),!1,I,S);break}case 0:{c.child&&bo(c.child,()=>{rt(c.child)});break}default:{st(p.Localizer.Diagnostic.assignmentTargetExpr(),c);break}}}function JP(c){const h=ai(c,"BaseException");if(c.typeExpression){const g=rt(c.typeExpression).type;if(g&&h&&(0,d.isInstantiableClass)(h)){const S=new l.DiagnosticAddendum;if((0,k.doForEachSubtype)(g,I=>{const _=Yt(I);if(!(0,d.isAnyOrUnknown)(_))if((0,d.isInstantiableClass)(_)&&_.literalValue===void 0)if(!(0,k.derivesFromClassRecursive)(_,h,!1))S.addMessage(p.Localizer.Diagnostic.exceptionTypeIncorrect().format({type:at(I,!1)}));else{let C;bo(c.typeExpression,()=>{C=Mm(c.typeExpression,[],_,!1,void 0)}),C&&C.argumentErrors&&S.addMessage(p.Localizer.Diagnostic.exceptionTypeNotInstantiable().format({type:at(I,!1)}))}else(0,d.isClassInstance)(_)?(0,k.derivesFromClassRecursive)(d.ClassType.cloneAsInstantiable(_),h,!1)||S.addMessage(p.Localizer.Diagnostic.exceptionTypeIncorrect().format({type:at(I,!1)})):S.addMessage(p.Localizer.Diagnostic.exceptionTypeIncorrect().format({type:at(I,!1)}))}),!S.isEmpty()){const I=F.getFileInfo(c);Xe(I.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.expectedExceptionClass()+S.getString(),c.typeExpression)}}}}function Dm(c){switch(c.nodeType){case 38:{rt(c);break}case 35:{const h=rt(c.leftExpression),g=_l(c,h,{method:"del"},0);me(c.memberName,g.type,0,!1),me(c,g.type,0,!1);break}case 24:{const h=rt(c.baseExpression,2);Pm(c,h,{method:"del"},0),me(c,d.UnboundType.create(),0,!1);break}case 52:{c.expressions.forEach(h=>{Dm(h)});break}case 0:{c.child&&bo(c.child,()=>{rt(c.child)});break}default:{const h=F.getFileInfo(c);Xe(h.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.delTargetExpr(),c);break}}}function _o(c,h,g){mt.isSpeculative(g)||c.accessedSymbolMap.set(h.id,!0)}function XP(c){if((0,d.isAnyOrUnknown)(c))return c;if((0,d.isClassInstance)(c)&&d.ClassType.isBuiltIn(c,"Generator")){const h=c.typeArguments;if(h&&h.length>=3)return h[2]}}function va(c,h,g,S){const I=(0,k.lookUpObjectMember)(c,h,8);if(!I)return;const _=Fi(I);if((0,d.isAnyOrUnknown)(_))return _;if((0,d.isFunction)(_)){const C=os(S||c,_,I&&(0,d.isInstantiableClass)(I.classType)?I.classType:void 0,g,void 0,!1,S);if(C)return di(C)}}function ZP(c,h){var g;const S=F.getFileInfo(c),I=c.value;let _,C=!1;const w=(h&4)!==0||S.isStubFile;if(!Ue.analyzeUnannotatedFunctions){const x=N.getEnclosingFunction(c);if(x&&N.isUnannotatedFunction(x))return{node:c,type:d.AnyType.create(),isIncomplete:!1}}const A=$r(c,I,!w,w&&(h&1024)!==0);if(A){let x=!w;A.scope.type===4&&(x=!1);const j=A.symbol,O=Cl(j,x?c:void 0);let K=(0,k.transformPossibleRecursiveTypeAlias)(O.type);O.isIncomplete&&((0,d.isUnbound)(K)&&(K=d.UnknownType.create(!0)),C=!0),O.isRecursiveDefinition&&_a(c)&&Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.recursiveDefinition().format({name:I}),c);const ne=!!K&&(0,d.isInstantiableClass)(K)&&d.ClassType.isSpecialBuiltIn(K);if(_=K,x&&!ne){const ie=A.isBeyondExecutionScope||!j.isInitiallyUnbound()?K:d.UnboundType.create(),pe=nf(c,j.id,ie,!1,void 0);if(pe.type&&(_=pe.type),pe.isIncomplete&&(C=!0),!pe.type&&A.isBeyondExecutionScope){const Ie=e2(c,A,K);Ie!=null&&Ie.type&&(_=Ie.type),Ie!=null&&Ie.isIncomplete&&(C=!0)}}if(_=Zv(c,_,h),_o(S,j,c),(h&1024)!==0&&O.includesVariableDecl&&!_.typeAliasInfo){let ie=(0,d.isTypeVar)(_)||(0,k.isTypeAliasPlaceholder)(_);(0,d.isClass)(_)&&!_.includeSubclasses&&(ie=!0),!ie&&!S.isTypingStubFile&&(O.includesIllegalTypeAliasDecl||!d.TypeBase.isInstantiable(_)||(h&2)!==0)&&(Xe(S.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeAnnotationVariable(),c),_=d.UnknownType.create())}}else I==="reveal_type"||I==="reveal_locals"?_=d.AnyType.create():(Xe(S.diagnosticRuleSet.reportUndefinedVariable,o.DiagnosticRule.reportUndefinedVariable,p.Localizer.Diagnostic.symbolIsUndefined().format({name:I}),c),_=d.UnknownType.create());if((0,d.isParamSpec)(_)&&h&32&&(st(p.Localizer.Diagnostic.paramSpecContext(),c),_=d.UnknownType.create()),(0,d.isTypeVar)(_)&&!_.details.isParamSpec&&(h&64)===0&&_.details.name===I&&!(((g=c.parent)===null||g===void 0?void 0:g.nodeType)===7&&c.parent.operator===6)){const j=_.details.isVariadic?Vr(c,"TypeVarTuple"):Vr(c,"TypeVar");j&&(0,d.isInstantiableClass)(j)?_=d.ClassType.cloneAsInstance(j):_=d.UnknownType.create()}return(h&64)!==0&&(h&512)===0&&(0,d.isInstantiableClass)(_)&&d.ClassType.isBuiltIn(_,"Generic")&&Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.genericNotAllowed(),c),(0,d.isTypeVar)(_)&&!_.details.isSynthesized&&(_=Xv(c,_,h)),{type:_,node:c,isIncomplete:C}}function e2(c,h,g){if(!h.symbol.getDeclarations().every(I=>I.type===1||I.type===2))return;const S=ue.getScopeHierarchy(c,h.scope);if(S&&S.length>=2&&S.every(I=>I.type===1||I.type===3)){const I=ue.findTopNodeInScope(c,S[S.length-2]);if(I&&(I.nodeType===28||I.nodeType===30)){const _=F.getFlowNode(I);if(_&&h.symbol.getDeclarations().every(C=>{if(C.type===2)return!0;const w=F.getFlowNode(C.node);return w?!Ca.isFlowNodeReachable(w,_,!0):!1}))return nf(c,h.symbol.id,g,!1,I)}}}function Xv(c,h,g){var S;if(d.TypeBase.isInstantiable(h)&&!(0,k.isTypeAliasPlaceholder)(h)){const I=t2(c,h);if(h=I.type,(g&2048)!==0&&h.scopeId!==void 0)!h.details.isSynthesized&&!h.details.isParamSpec&&Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeVarUsedByOuterScope().format({name:h.details.name}),c);else if((g&8192)!==0){if(h.scopeId===void 0)if(I.foundInterveningClass)Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeVarUsedByOuterScope().format({name:h.details.name}),c);else{let _=N.getEnclosingClassOrFunction(c);if(_&&((S=c.parent)===null||S===void 0?void 0:S.nodeType)===35&&c.parent.leftExpression===c){const C=c.parent.memberName.value;if(C==="args"||C==="kwargs"){const w=N.getEnclosingClassOrFunction(_);(w==null?void 0:w.nodeType)===28?_=w:I.type.scopeId||Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.paramSpecNotUsedByOuterScope().format({name:h.details.name}),c)}}_?h=d.TypeVarType.cloneForScopeId(h,vr(_),_.name.value,_.nodeType===28?1:0):(0,s.fail)("AssociateTypeVarsWithCurrentScope flag was set but enclosing scope not found")}}else if((g&4096)!==0&&(h.scopeId===void 0||I.foundInterveningClass)&&!h.details.isSynthesized){const _=(0,d.isParamSpec)(h)?p.Localizer.Diagnostic.paramSpecNotUsedByOuterScope():p.Localizer.Diagnostic.typeVarNotUsedByOuterScope();Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,_.format({name:h.details.name}),c)}}return h.isVariadicUnpacked&&(h=d.TypeVarType.cloneForPacked(h)),h}function Zv(c,h,g){return(g&2)===0&&((0,d.isInstantiableClass)(h)&&((g&64)!==0&&(0,k.requiresTypeArguments)(h)&&!h.typeArguments&&Xe(F.getFileInfo(c).diagnosticRuleSet.reportMissingTypeArgument,o.DiagnosticRule.reportMissingTypeArgument,p.Localizer.Diagnostic.typeArgsMissingForClass().format({name:h.aliasName||h.details.name}),c),h.typeArguments||(h=jm(h,void 0,g,c))),(g&64)!==0&&h.typeAliasInfo&&h.typeAliasInfo.typeParameters&&h.typeAliasInfo.typeParameters.length>0&&!h.typeAliasInfo.typeArguments&&(Xe(F.getFileInfo(c).diagnosticRuleSet.reportMissingTypeArgument,o.DiagnosticRule.reportMissingTypeArgument,p.Localizer.Diagnostic.typeArgsMissingForAlias().format({name:h.typeAliasInfo.name}),c),h=d.TypeBase.cloneForTypeAlias((0,k.applySolvedTypeVars)(h,new oe.TypeVarContext(h.typeAliasInfo.typeVarScopeId),!0),h.typeAliasInfo.name,h.typeAliasInfo.fullName,h.typeAliasInfo.typeVarScopeId,h.typeAliasInfo.typeParameters,h.typeAliasInfo.typeParameters.map(S=>d.UnknownType.create())))),h}function vr(c){let h="";return(c.nodeType===10||c.nodeType===28)&&(h=c.name.value),`${F.getFileInfo(c).filePath}.${c.start.toString()}-${h}`}function vo(c){const h=[];let g=c;for(;g&&(g=N.getTypeVarScopeNode(g),!!g);)h.push(vr(g)),g=g.parent;return h}function t2(c,h){var g;let S=c,I=0;for((0,s.assert)(d.TypeBase.isInstantiable(h));S&&(S=N.getTypeVarScopeNode(S,((g=c.parent)===null||g===void 0?void 0:g.nodeType)===35),!!S);){let _;if(S.nodeType===10){const C=ti(S);C&&(_=C.classType.details.typeParameters),I++}else if(S.nodeType===28){const C=br(S);C&&(_=[],C.functionType.details.parameters.forEach(w=>{w.hasDeclaredType&&(0,k.addTypeVarsToListIfUnique)(_,(0,k.getTypeVarArgumentsRecursive)(w.type))}),C.functionType.details.declaredReturnType&&(0,k.addTypeVarsToListIfUnique)(_,(0,k.getTypeVarArgumentsRecursive)(C.functionType.details.declaredReturnType)))}else if(S.nodeType===36)break;if(_){const C=_.find(w=>w.details.name===h.details.name);if(C!=null&&C.scopeId)return h=d.TypeVarType.cloneForScopeId(h,C.scopeId,C.scopeName,C.scopeType),{type:h,foundInterveningClass:I>1}}S=S.parent}for(S=c;S;){if(S.nodeType===3){const _=Ce(S.leftExpression,0);if(_&&(0,d.isTypeVar)(_)&&_.details.recursiveTypeAliasScopeId&&_.details.recursiveTypeAliasName)return{type:d.TypeVarType.cloneForScopeId(h,_.details.recursiveTypeAliasScopeId,_.details.recursiveTypeAliasName,2),foundInterveningClass:!1}}S=S.parent}return{type:h,foundInterveningClass:!1}}function n2(c,h){const g=2|h&572420,S=rt(c.leftExpression,g);if((0,k.isTypeAliasPlaceholder)(S.type))return{node:c,type:d.UnknownType.create(!0),isIncomplete:!0};const I=_l(c,S,{method:"get"},h|2);if((0,G.isCodeFlowSupportedForReference)(c)){me(c,I.type,h,!0),me(c.memberName,I.type,h,!0);let _=I.type,C=!!I.isIncomplete;if((0,d.isUnbound)(_)){const A=Yt(S.type);let x;(0,d.isInstantiableClass)(A)?x=(0,k.lookUpClassMember)(A,c.memberName.value,1):(0,d.isClassInstance)(A)&&(x=(0,k.lookUpObjectMember)(A,c.memberName.value,1)),x&&(_=Fi(x),C=!1)}const w=nf(c,Y.indeterminateSymbolId,_,C);w.type&&(I.type=w.type),w.isIncomplete&&(I.isIncomplete=!0),I.type=Zv(c,I.type,h),we(c),we(c.memberName)}return S.isIncomplete&&(I.isIncomplete=!0),me(c.memberName,I.type,h,!!I.isIncomplete),I}function _l(c,h,g,S){var I;let _=h.type;const C=c.memberName.value;let w=new l.DiagnosticAddendum;const A=F.getFileInfo(c);let x,j=!!h.isIncomplete,O;if(h.isIncomplete&&(0,d.isUnbound)(h.type))return{type:d.UnknownType.create(!0),node:c,isIncomplete:!0};(0,d.isUnion)(_)&&d.TypeBase.isSpecialForm(_)&&pt&&(_=pt);const K=ne=>{if(je&&(0,d.isInstantiableClass)(je))return d.TypeBase.isInstance(ne)?Ur(c.memberName,je,C,g,w):Gs(c.memberName,je,C,g,w)};switch((0,d.isParamSpec)(_)&&_.paramSpecAccess&&(_=Yt(_)),_.category){case 2:case 1:case 4:{x=_;break}case 10:{if(_.details.isParamSpec){if(C==="args"){const ne=N.getEnclosingParameter(c);return!ne||ne.category!==1?(st(p.Localizer.Diagnostic.paramSpecArgsUsage(),c),{type:d.UnknownType.create(j),node:c,isIncomplete:j}):{type:d.TypeVarType.cloneForParamSpecAccess(_,"args"),node:c,isIncomplete:j}}if(C==="kwargs"){const ne=N.getEnclosingParameter(c);return!ne||ne.category!==2?(st(p.Localizer.Diagnostic.paramSpecKwargsUsage(),c),{type:d.UnknownType.create(j),node:c,isIncomplete:j}):{type:d.TypeVarType.cloneForParamSpecAccess(_,"kwargs"),node:c,isIncomplete:j}}return j||Xe(A.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.paramSpecUnknownMember().format({name:C}),c),{type:d.UnknownType.create(j),node:c,isIncomplete:j}}return S&64?(j||Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeVarNoMember().format({type:at(_),name:C}),c.leftExpression),{type:d.UnknownType.create(j),node:c,isIncomplete:j}):_.details.recursiveTypeAliasName?{type:d.UnknownType.create(!0),node:c,isIncomplete:!0}:_l(c,{type:Yt(_),node:c,bindToType:_,isIncomplete:j},g,0)}case 7:{if(d.TypeBase.isInstantiable(_)){const ne=Gs(c.memberName,_,C,g,w,0,h.bindToType);x=ne==null?void 0:ne.type,ne!=null&&ne.isIncomplete&&(j=!0),ne!=null&&ne.isAsymmetricDescriptor&&(O=!0)}else{if(d.ClassType.isBuiltIn(_,"LiteralString")&&sn&&(0,d.isInstantiableClass)(sn)&&(_=d.ClassType.cloneAsInstance(sn)),d.ClassType.isEnumClass(_)){const ie=_.literalValue;if(ie instanceof d.EnumLiteral){if(C==="name"||C==="_name_"){const pe=ai(c,"str");if((0,d.isInstantiableClass)(pe))return{node:c,type:d.ClassType.cloneAsInstance(d.ClassType.cloneWithLiteral(pe,ie.itemName)),isIncomplete:j}}else if(C==="value"||C==="_value_")return{node:c,type:ie.itemType,isIncomplete:j}}}const ne=Ur(c.memberName,_,C,g,w,void 0,h.bindToType);ne&&(x=(0,k.addConditionToType)(ne.type,(0,k.getTypeCondition)(_))),ne!=null&&ne.isIncomplete&&(j=!0),ne!=null&&ne.isAsymmetricDescriptor&&(O=!0)}break}case 8:{const ne=d.ModuleType.getField(_,C);if(ne&&!ne.isExternallyHidden())g.method==="get"&&_o(F.getFileInfo(c),ne,c.memberName),x=Cl(ne,void 0,!0).type,(0,d.isTypeVar)(x)&&(x=Xv(c,x,S)),(0,d.isUnbound)(x)&&(x=d.UnknownType.create(!0)),ne.isPrivateMember()&&Xe(F.getFileInfo(c).diagnosticRuleSet.reportPrivateUsage,o.DiagnosticRule.reportPrivateUsage,p.Localizer.Diagnostic.privateUsedOutsideOfModule().format({name:C}),c.memberName),ne.isPrivatePyTypedImport()&&Xe(F.getFileInfo(c).diagnosticRuleSet.reportPrivateImportUsage,o.DiagnosticRule.reportPrivateImportUsage,p.Localizer.Diagnostic.privateImportFromPyTypedModule().format({name:C,module:_.moduleName}),c.memberName);else{if(g.method==="get"){const ie=d.ModuleType.getField(_,"__getattr__");if(ie&&(A.executionEnvironment.pythonVersion>=f.PythonVersion.V3_7||ie.getDeclarations().some(Ie=>Ie.path.toLowerCase().endsWith(".pyi")))){const Ie=Cl(ie);(0,d.isFunction)(Ie.type)&&(x=di(Ie.type),Ie.isIncomplete&&(j=!0))}}x||(j||Xe(A.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.moduleUnknownMember().format({name:C}),c.memberName),x=Ue.evaluateUnknownImportsAsAny?d.AnyType.create():d.UnknownType.create())}break}case 9:{x=(0,k.mapSubtypes)(_,ne=>{if((0,d.isNoneInstance)(ne)){const ie=K(ne);if(ie)return x=(0,k.addConditionToType)(ie.type,(0,k.getTypeCondition)(_)),ie.isIncomplete&&(j=!0),x;j||Xe(F.getFileInfo(c).diagnosticRuleSet.reportOptionalMemberAccess,o.DiagnosticRule.reportOptionalMemberAccess,p.Localizer.Diagnostic.noneUnknownMember().format({name:C}),c.memberName);return}else{if((0,d.isUnbound)(ne))return;{const ie=_l(c,{type:ne,node:c,isIncomplete:h.isIncomplete},g,0);return ie.isIncomplete&&(j=!0),ie.type}}});break}case 5:case 6:{if(C==="__defaults__")x=d.AnyType.create();else if(C==="__self__"){const ne=(0,d.isFunction)(_)?_:_.overloads[0];ne.preBoundFlags!==void 0&&(ne.preBoundFlags&4)===0&&(x=ne.boundToType)}else Vt?x=_l(c,{type:Vt,node:c},g,S).type:x=d.AnyType.create();break}case 3:{const ne=K(_);ne&&(x=(0,k.addConditionToType)(ne.type,(0,k.getTypeCondition)(_)),ne.isIncomplete&&(j=!0));break}default:w.addMessage(p.Localizer.DiagnosticAddendum.typeUnsupported().format({type:at(_)}));break}if(!x){const ne=(0,d.isFunction)(_)||(0,d.isOverloadedFunction)(_)||(0,d.isClassInstance)(_)&&d.ClassType.isBuiltIn(_,"function");if(!h.isIncomplete){let ie=p.Localizer.Diagnostic.memberAccess();g.method==="set"?ie=p.Localizer.Diagnostic.memberSet():g.method==="del"&&(ie=p.Localizer.Diagnostic.memberDelete()),g.setExpectedTypeDiag&&(w=g.setExpectedTypeDiag);const[pe,Ie]=ne?[A.diagnosticRuleSet.reportFunctionMemberAccess,o.DiagnosticRule.reportFunctionMemberAccess]:[A.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues];Xe(pe,Ie,ie.format({name:C,type:at(_)})+w.getString(),c.memberName)}x=ne?d.AnyType.create():d.UnknownType.create()}if((S&2)===0&&(0,d.isInstantiableClass)(x)&&!x.typeArguments&&(x=jm(x,void 0,S,c)),g.method==="get"){let ne=j;if((0,d.isInstantiableClass)(x)){const ie=N.getParentNodeOfType(c,1);ie&&((I=ie==null?void 0:ie.parent)===null||I===void 0?void 0:I.nodeType)===9&&(ne=!0)}ne||Lm(A.diagnosticRuleSet.reportUnknownMemberType,o.DiagnosticRule.reportUnknownMemberType,c.memberName,x,c,!1)}return{type:x,node:c,isIncomplete:j,isAsymmetricDescriptor:O}}function vl(c,h,g,S,I,_,C,w){var A,x;let j=0;C&1&&(j|=8),C&2&&(j|=2),C&4&&(j|=4),C&256&&(j|=32),C&128&&(j|=1);let O=(0,k.lookUpClassMember)(h,S,j|16);if(O||(O=(0,k.lookUpClassMember)(h,S,j)),O){let K,ne=!1;if(O.symbol.isInitVar()){_==null||_.addMessage(p.Localizer.DiagnosticAddendum.memberIsInitVar().format({name:S}));return}if(I.method!=="get"){const pe=N.getEnclosingClass(c);if(pe){const Ie=(A=ti(pe))===null||A===void 0?void 0:A.classType;Ie&&(0,d.isInstantiableClass)(Ie)&&d.ClassType.isSameGenericClass(Ie,h)&&(K=(x=Sa(O.symbol))!==null&&x!==void 0?x:d.UnknownType.create(),K&&(0,d.isInstantiableClass)(O.classType)&&(K=(0,k.partiallySpecializeType)(K,O.classType)))}}if(!K){const Ie=bA(c,O,w?void 0:h);Ie?(K=Ie.type,Ie.isIncomplete&&(ne=!0)):K=d.UnknownType.create()}if(d.ClassType.isTypedDictClass(h)){const pe=O.symbol.getTypedDeclarations();if(pe.length>0&&pe[0].type===1){_==null||_.addMessage(p.Localizer.DiagnosticAddendum.memberUnknown().format({name:S}));return}}I.method==="get"&&(0,d.isInstantiableClass)(O.classType)&&d.ClassType.isSameGenericClass(O.classType,h)&&_o(F.getFileInfo(c),O.symbol,c);const ie=i2(K,O,h,w,g,C,c,S,I,_);if(!ie)return;if(K=ie.type,I.method==="set"&&I.setType){if(!Ot(K,I.setType,_==null?void 0:_.createAddendum())){_==null||_.addMessage(p.Localizer.DiagnosticAddendum.memberAssignment().format({type:at(I.setType),name:S,classType:zb(h)}));return}if((0,d.isInstantiableClass)(O.classType)&&d.ClassType.isFrozenDataClass(O.classType)&&g){_==null||_.addMessage(p.Localizer.DiagnosticAddendum.dataClassFrozen().format({name:at(d.ClassType.cloneAsInstance(O.classType))}));return}}return{symbol:O.symbol,type:K,isTypeIncomplete:ne,isClassMember:!O.isInstanceMember,isClassVar:O.isClassVar,classType:O.classType,isAsymmetricDescriptor:ie.isAsymmetricDescriptor}}if((C&65)===0){const K=s2(h,c,I,S);if(K)return{symbol:void 0,type:K,isTypeIncomplete:!1,isClassMember:!1,isClassVar:!1,isAsymmetricDescriptor:!1}}_==null||_.addMessage(p.Localizer.DiagnosticAddendum.memberUnknown().format({name:S}))}function i2(c,h,g,S,I,_,C,w,A,x){const j=(_&16)!==0;let O=!0,K=!1;if(c=(0,k.mapSubtypes)(c,ne=>{var ie;const pe=Yt(ne),Ie=!h||h.isClassMember;if((0,d.isClass)(pe)&&Ie){let Le=pe,et=!1;if(d.TypeBase.isInstantiable(pe)&&(pe.details.effectiveMetaclass&&(0,d.isInstantiableClass)(pe.details.effectiveMetaclass)&&(I||A.method==="get")?(Le=(0,k.convertToInstance)(pe.details.effectiveMetaclass),et=!0):Le=void 0),Le){let ke;A.method==="get"?ke="__get__":A.method==="set"?ke="__set__":ke="__delete__";const Ge=(0,k.lookUpClassMember)(Le,ke,8);if(d.ClassType.isPropertyClass(Le)){if(A.method==="set"){if(!Ge){x==null||x.addMessage(p.Localizer.DiagnosticAddendum.propertyMissingSetter().format({name:w})),O=!1;return}}else if(A.method==="del"&&!Ge){x==null||x.addMessage(p.Localizer.DiagnosticAddendum.propertyMissingDeleter().format({name:w})),O=!1;return}}if(Ge){let ut=Fi(Ge);const Ve=[{argumentCategory:0,type:d.ClassType.isClassProperty(Le)?g:I?S||d.ClassType.cloneAsInstance(g):d.NoneType.createInstance()}];if(A.method==="get"?Ve.push({argumentCategory:0,type:g}):A.method==="set"&&Ve.push({argumentCategory:0,type:(ie=A.setType)!==null&&ie!==void 0?ie:d.UnknownType.create()}),d.ClassType.isPropertyClass(Le)&&h&&(0,d.isInstantiableClass)(h.classType)&&(Hm(ut),ut=(0,k.partiallySpecializeType)(ut,h.classType),(_&1)!==0&&d.ClassType.isProtocolClass(g)&&(x==null||x.addMessage(p.Localizer.DiagnosticAddendum.propertyAccessFromProtocolClass()),O=!1)),ut&&((0,d.isFunction)(ut)||(0,d.isOverloadedFunction)(ut))){const Ze=ut,yt=bo(C,()=>{var tn;let Et;d.ClassType.isPropertyClass(pe)&&!et?h&&(0,d.isInstantiableClass)(h.classType)&&(Et=h.classType):(0,d.isInstantiableClass)(Ge.classType)&&(Et=Ge.classType);let Ke=os(Le,Ze,Et,C,void 0,void 0,et?pe:void 0);if(Ke&&((0,d.isFunction)(Ke)||(0,d.isOverloadedFunction)(Ke))){const nt=new oe.TypeVarContext((0,k.getTypeVarScopeId)(Ke));if(Et){const Pt=(0,k.partiallySpecializeType)(Ke,Et,g);Pt&&((0,d.isFunction)(Pt)||(0,d.isOverloadedFunction)(Pt))&&(Ke=Pt)}const bt=sr(C,Ve,{type:Ke},nt,!0);if(bt.argumentErrors){if(A.method==="set")if(A.setType&&(0,d.isFunction)(Ke)&&Ke.details.parameters.length>=2){const Pt=d.FunctionType.getEffectiveParameterType(Ke,1);x==null||x.addMessage(p.Localizer.DiagnosticAddendum.typeIncompatible().format({destType:at(Pt),sourceType:at(A.setType)}))}else(0,d.isOverloadedFunction)(Ke)&&(x==null||x.addMessage(p.Localizer.Diagnostic.noOverload().format({name:ke})));return O=!1,d.AnyType.create()}return A.method==="get"?(tn=bt.returnType)!==null&&tn!==void 0?tn:d.UnknownType.create():d.AnyType.create()}});if(A.method==="set"&&(0,d.isClass)(Ge.classType)&&r2(Ge.classType)&&(K=!0),yt)return yt}}}}else if((0,d.isFunction)(pe)||(0,d.isOverloadedFunction)(pe)){if(A.method==="set"){let Le=!1;if((0,d.isFunction)(pe))Le=d.FunctionType.isFinal(pe);else{const et=pe.overloads.find(ke=>!d.FunctionType.isOverloaded(ke));et&&(Le=d.FunctionType.isFinal(et))}if(Le&&h&&(0,d.isClass)(h.classType)){x==null||x.addMessage(p.Localizer.Diagnostic.finalMethodOverride().format({name:w,className:h.classType.details.name})),O=!1;return}}if(!I||h&&!h.isInstanceMember)return os(I?d.ClassType.cloneAsInstance(g):g,pe,h&&(0,d.isInstantiableClass)(h.classType)?h.classType:void 0,C,void 0,j,S)}if(A.method==="set"){if(h!=null&&h.symbol.isClassVar()&&_&8){x==null||x.addMessage(p.Localizer.DiagnosticAddendum.memberSetClassVar().format({name:w})),O=!1;return}const Le=h==null?void 0:h.symbol.getDeclarations().find(ke=>(0,D.isFinalVariableDeclaration)(ke));if(Le&&!N.isNodeContainedWithin(C,Le.node)){const ke=N.getEnclosingFunction(C);if(!ke||ke.name.value!=="__init__"){x==null||x.addMessage(p.Localizer.Diagnostic.finalReassigned().format({name:w})),O=!1;return}}if((h==null?void 0:h.isInstanceMember)&&(0,d.isClass)(h.classType)&&d.ClassType.isReadOnlyInstanceVariables(h.classType)){x==null||x.addMessage(p.Localizer.DiagnosticAddendum.readOnlyAttribute().format({name:w})),O=!1;return}let et=!1;if((h&&h.symbol.hasTypedDeclarations()||h&&!h.symbol.getDeclarations().some(ke=>ke.node===C))&&(et=!0),et){let ke=pe;return I&&!h.isInstanceMember&&(0,d.isFunction)(pe)&&(d.FunctionType.isClassMethod(pe)||d.FunctionType.isInstanceMethod(pe))&&(ke=d.FunctionType.clone(pe,!0)),ke}}return ne}),!!O)return{type:c,isAsymmetricDescriptor:K}}function r2(c){var h;if(c.isAsymmetricDescriptor!==void 0)return c.isAsymmetricDescriptor;let g=!1;const S=(0,k.lookUpClassMember)(c,"__get__",2),I=(0,k.lookUpClassMember)(c,"__set__",2);if(!S||!I)g=!1;else{const _=Fs(S.symbol),C=Fs(I.symbol);if((0,d.isFunction)(_)&&(0,d.isFunction)(C)&&C.details.parameters.length>=3&&_.details.declaredReturnType){const w=d.FunctionType.getEffectiveParameterType(C,2),A=(h=d.FunctionType.getSpecializedReturnType(_))!==null&&h!==void 0?h:d.UnknownType.create();(0,d.isTypeSame)(w,A)||(g=!0)}}return c.isAsymmetricDescriptor=g,g}function s2(c,h,g,S){var I,_,C,w;if(g.method==="get"){let A=(I=Gs(h,c,"__getattribute__",{method:"get"},void 0,68))===null||I===void 0?void 0:I.type;if(A||(A=(_=Gs(h,c,"__getattr__",{method:"get"},void 0,68))===null||_===void 0?void 0:_.type),A&&(0,d.isOverloadedFunction)(A)){let x=d.AnyType.create();sn&&(0,d.isInstantiableClass)(sn)&&(x=d.ClassType.cloneWithLiteral(d.ClassType.cloneAsInstance(sn),S)),A=ab(h,A,[{argumentCategory:0,type:d.AnyType.create()},{argumentCategory:0,type:x}])}if(A&&(0,d.isFunction)(A))return di(A)}else if(g.method==="set"){if((C=Gs(h,c,"__setattr__",{method:"get"},void 0,68))===null||C===void 0?void 0:C.type)return d.AnyType.create()}else if((0,s.assert)(g.method==="del"),(w=Gs(h,c,"__detattr__",{method:"get"},void 0,68))===null||w===void 0?void 0:w.type)return d.AnyType.create()}function a2(c,h=0){const g=rt(c.baseExpression,h|2);if(h&64&&c.baseExpression.nodeType===48){const I=F.getFileInfo(c);!I.isStubFile&&I.executionEnvironment.pythonVersion<f.PythonVersion.V3_10&&st(p.Localizer.Diagnostic.stringNotSubscriptable(),c.baseExpression)}if((h&4)===0){let I=(h&32768)!==0;if(I){const _=N.getExecutionScopeNode(c);(_==null?void 0:_.nodeType)===36&&(I=!1)}if(!I){const _=F.getFileInfo(c);if((0,d.isInstantiableClass)(g.type)&&d.ClassType.isBuiltIn(g.type)&&!g.type.aliasName){const C=$.get(g.type.details.fullName);C!==void 0&&_.executionEnvironment.pythonVersion<C&&!_.isStubFile&&st(p.Localizer.Diagnostic.classNotRuntimeSubscriptable().format({name:g.type.aliasName||g.type.details.name}),c.baseExpression)}}}const S=Pm(c,g,{method:"get"},h);if((0,G.isCodeFlowSupportedForReference)(c)){let I=!0;if(rr(g.type,void 0,_=>{(!(0,d.isClassInstance)(_)||!(d.ClassType.isBuiltIn(_)||d.ClassType.isTypedDictClass(_)))&&(I=!1)}),I){me(c,S.type,h,!1);const _=nf(c,Y.indeterminateSymbolId,S.type,!!g.isIncomplete||!!S.isIncomplete);_.type&&(S.type=_.type),_.isIncomplete&&(S.isIncomplete=!0),we(c)}}return g.isIncomplete&&(S.isIncomplete=!0),(h&1048576)!==0&&(0,d.isInstantiableClass)(g.type)&&(d.ClassType.isBuiltIn(g.type,"Required")?S.isRequired=!0:d.ClassType.isBuiltIn(g.type,"NotRequired")&&(S.isNotRequired=!0)),S}function eb(c,h,g){const S=h.findIndex(I=>(0,d.isVariadicTypeVar)(I));if(S>=0&&Tt&&(0,d.isInstantiableClass)(Tt))if(S<c.length){const I=c.slice(S,S+1+c.length-h.length);if(I.length===1&&(0,d.isVariadicTypeVar)(I[0].type))qc(I[0].type,I[0].node);else{I.forEach((w,A)=>{Wr(w,{allowEmptyTuple:A===0,allowVariadicTypeVar:!0,allowUnpackedTuples:!0})});const _=[];(I.length!==1||!I[0].isEmptyTupleShorthand)&&I.forEach(w=>{(0,d.isUnpackedClass)(w.type)&&w.type.tupleTypeArguments?(0,a.appendArray)(_,w.type.tupleTypeArguments):_.push({type:(0,k.convertToInstance)(w.type),isUnbounded:!1})});const C=(0,k.convertToInstance)((0,k.specializeTupleClass)(Tt,_,!0,!0,!0));c=[...c.slice(0,S),{node:c[S].node,type:C},...c.slice(S+1+c.length-h.length,c.length)]}}else c.push({node:g,type:(0,k.convertToInstance)((0,k.specializeTupleClass)(Tt,[],!0,!0,!0))});return c}function qc(c,h){return c.isVariadicUnpacked?!0:(st(p.Localizer.Diagnostic.unpackedTypeVarTupleExpected().format({name1:c.details.name,name2:c.details.name}),h),!1)}function o2(c,h,g){var S,I;if(!(!((S=h.typeAliasInfo)===null||S===void 0)&&S.typeParameters)||h.typeAliasInfo.typeParameters.length===0&&h.typeAliasInfo.typeArguments||!d.TypeBase.isInstantiable(h)||h.typeAliasInfo.typeArguments)return;const _=h.typeAliasInfo.typeParameters;let C=eb(Gc(c,g),_,c);if(_.length===1&&_[0].details.isParamSpec&&C&&C.every(O=>!(0,k.isEllipsisType)(O.type)&&!O.typeList&&!(0,d.isParamSpec)(O.type))&&(C=[{type:d.UnknownType.create(),node:C[0].node,typeList:C}]),C.length>_.length&&!_.some(O=>O.details.isVariadic)&&st(p.Localizer.Diagnostic.typeArgsTooMany().format({name:at(h),expected:_.length,received:C.length}),C[_.length].node),(0,d.isInstantiableClass)(h)&&h.details.fullName==="mypy_extensions.FlexibleAlias"&&C.length>=1)return{node:c,type:C[0].type};const w=new oe.TypeVarContext(h.typeAliasInfo.typeVarScopeId),A=new l.DiagnosticAddendum;_.forEach((O,K)=>{if(O.details.isParamSpec&&K<C.length){const ne=C[K].type;if(C[K].typeList){const ie=d.FunctionType.createInstantiable(65536);d.TypeBase.setSpecialForm(ie),C[K].typeList.forEach((pe,Ie)=>{d.FunctionType.addParameter(ie,{category:0,name:`__p${Ie}`,isNameSynthesized:!0,type:(0,k.convertToInstance)(pe.type),hasDeclaredType:!0})}),(0,te.assignTypeToTypeVar)(Bt,O,ie,A,w,128)}else if((0,d.isParamSpec)(ne))(0,te.assignTypeToTypeVar)(Bt,O,(0,k.convertToInstance)(ne),A,w,128);else if((0,d.isInstantiableClass)(ne)&&d.ClassType.isBuiltIn(ne,"Concatenate")){const ie=ne.typeArguments,pe=d.FunctionType.createInstance("","","",0);ie&&ie.length>0&&ie.forEach((Ie,Le)=>{Le===ie.length-1?(d.FunctionType.addParameter(pe,{category:0,isNameSynthesized:!1,type:d.UnknownType.create()}),(0,d.isParamSpec)(Ie)&&(pe.details.paramSpec=Ie)):d.FunctionType.addParameter(pe,{category:0,name:`__p${Le}`,isNameSynthesized:!0,hasDeclaredType:!0,type:Ie})}),(0,te.assignTypeToTypeVar)(Bt,O,pe,A,w,128)}else if((0,k.isEllipsisType)(ne)){const ie=d.FunctionType.createInstantiable(98304);d.TypeBase.setSpecialForm(ie),d.FunctionType.addDefaultParameters(ie),(0,te.assignTypeToTypeVar)(Bt,O,ie,A,w)}else st(p.Localizer.Diagnostic.typeArgListExpected(),C[K].node)}else{K<C.length&&C[K].typeList&&st(p.Localizer.Diagnostic.typeArgListNotAllowed(),C[K].node);const ne=K<C.length?(0,k.convertToInstance)(C[K].type):d.UnknownType.create();(0,te.assignTypeToTypeVar)(Bt,O,ne,A,w,128)}}),A.isEmpty()||st(p.Localizer.Diagnostic.typeNotSpecializable().format({type:at(h)})+A.getString(),c);const x=[];return(I=h.typeAliasInfo.typeParameters)===null||I===void 0||I.forEach(O=>{let K;if((0,d.isParamSpec)(O)){const ne=w.getParamSpec(O);K=ne?(0,k.convertParamSpecValueToType)(ne):d.UnknownType.create()}else K=w.getTypeVarType(O);x.push(K||d.UnknownType.create())}),{type:d.TypeBase.cloneForTypeAlias((0,k.applySolvedTypeVars)(h,w),h.typeAliasInfo.name,h.typeAliasInfo.fullName,h.typeAliasInfo.typeVarScopeId,h.typeAliasInfo.typeParameters,x),node:c}}function Pm(c,h,g,S){const I=o2(c,h.type,S);if(I)return I;if((0,k.isTypeAliasPlaceholder)(h.type)){const w=Gc(c,S).map(x=>(0,k.convertToInstance)(x.type));return{type:d.TypeBase.cloneForTypeAlias(h.type,h.type.details.recursiveTypeAliasName,"",h.type.details.recursiveTypeAliasScopeId,void 0,w),node:c}}let _=!1;const C=rr(h.type,void 0,(w,A)=>{var x;if((0,d.isAnyOrUnknown)(w))return w;if(S&64&&(0,d.isTypeVar)(A))return Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeVarNotSubscriptable().format({type:at(A)}),c.baseExpression),Gc(c,S,!1,!1),d.UnknownType.create();if((0,d.isInstantiableClass)(w)){if(w.details.effectiveMetaclass&&(0,d.isInstantiableClass)(w.details.effectiveMetaclass)&&!d.ClassType.isBuiltIn(w.details.effectiveMetaclass,"type")&&Gs(c,w,tb(g),void 0,void 0,96))return nb(c,w,g).type;if(g.method==="set"?Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.genericClassAssigned(),c.baseExpression):g.method==="del"&&Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.genericClassDeleted(),c.baseExpression),d.ClassType.isSpecialBuiltIn(w,"Literal"))return V2(c);if(d.ClassType.isBuiltIn(w,"InitVar")){const Ie=Gc(c,S);return Ie.length===1?Ie[0].type:(st(p.Localizer.Diagnostic.typeArgsMismatchOne().format({received:Ie.length}),c.baseExpression),d.UnknownType.create())}if(d.ClassType.isEnumClass(w))return d.ClassType.cloneAsInstance(w);const j=(0,d.isInstantiableClass)(w)&&d.ClassType.isBuiltIn(w,"Annotated"),O=(0,d.isInstantiableClass)(w)&&d.ClassType.hasCustomClassGetItem(w),K=((x=w.details.typeParameters)===null||x===void 0?void 0:x.length)>0||d.ClassType.isSpecialBuiltIn(w)||d.ClassType.isBuiltIn(w,"type")||d.ClassType.isPartiallyEvaluated(w),ne=(0,d.isInstantiableClass)(w)&&d.ClassType.isBuiltIn(w,"Final"),ie=(0,d.isInstantiableClass)(w)&&d.ClassType.isBuiltIn(w,"ClassVar");let pe=Gc(c,S,j,O||!K,ne,ie);return j||(pe=eb(pe,w.details.typeParameters,c)),O?w:w.typeArguments?(Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.classAlreadySpecialized().format({type:at((0,k.convertToInstance)(w),!0)}),c.baseExpression),w):jm(w,pe,S,c)}if((0,d.isClassInstance)(w)){const j=nb(c,w,g);return j.isIncomplete&&(_=!0),j.type}if((0,d.isNever)(w))return d.UnknownType.create();if((0,d.isNoneInstance)(w))return Xe(F.getFileInfo(c).diagnosticRuleSet.reportOptionalSubscript,o.DiagnosticRule.reportOptionalSubscript,p.Localizer.Diagnostic.noneNotSubscriptable(),c.baseExpression),d.UnknownType.create();if(!(0,d.isUnbound)(w)){const j=F.getFileInfo(c);Xe(j.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeNotSubscriptable().format({type:at(w)}),c.baseExpression)}return d.UnknownType.create()});return h.isIncomplete||c.items.forEach(w=>{de(w.valueExpression)||rt(w.valueExpression,S&4)}),{type:C,node:c,isIncomplete:_}}function Am(c,h=!1){return Tt&&(0,d.isInstantiableClass)(Tt)?(0,k.convertToInstance)((0,k.specializeTupleClass)(Tt,c.map(g=>({type:g,isUnbounded:h})))):d.UnknownType.create()}function tb(c){return c.method==="get"?"__getitem__":c.method==="set"?"__setitem__":((0,s.assert)(c.method==="del"),"__delitem__")}function nb(c,h,g){var S,I,_;if((0,d.isClassInstance)(h)&&d.ClassType.isTypedDictClass(h)){const pe=(0,R.getTypeOfIndexedTypedDict)(Bt,c,h,g);if(pe)return pe}const C=tb(g),w=(0,d.isClassInstance)(h)?(S=Ur(c,h,C,void 0,void 0,64))===null||S===void 0?void 0:S.type:(I=Gs(c,h,C,void 0,void 0,96))===null||I===void 0?void 0:I.type;if(!w){const pe=F.getFileInfo(c);return Xe(pe.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.methodNotDefinedOnType().format({name:C,type:at(h)}),c.baseExpression),{node:c,type:d.UnknownType.create()}}if(c.items.length===1&&!c.trailingComma&&!c.items[0].name&&c.items[0].argumentCategory===0&&(0,d.isClassInstance)(h)){const pe=c.items[0].valueExpression,Ie=rt(pe).type;if((0,d.isClassInstance)(Ie)&&d.ClassType.isBuiltIn(Ie,"int")&&(0,k.isLiteralType)(Ie)&&typeof Ie.literalValue=="number"){const Le=Ie.literalValue,et=(0,k.getSpecializedTupleType)(h);if(et&&et.tupleTypeArguments&&!(0,k.isUnboundedTupleClass)(et)){if(Le>=0&&Le<et.tupleTypeArguments.length)return{node:c,type:et.tupleTypeArguments[Le].type};if(Le<0&&et.tupleTypeArguments.length+Le>=0)return{node:c,type:et.tupleTypeArguments[et.tupleTypeArguments.length+Le].type}}}else if((0,d.isClassInstance)(Ie)&&d.ClassType.isBuiltIn(Ie,"slice")){const Le=(0,k.getSpecializedTupleType)(h);if(Le&&Le.tupleTypeArguments&&!(0,k.isUnboundedTupleClass)(Le)&&pe.nodeType===46&&!pe.stepValue){const et=(ut,Ve)=>{let Ze=Ve;if(ut){const yt=rt(ut).type;(0,d.isClassInstance)(yt)&&d.ClassType.isBuiltIn(yt,"int")&&(0,k.isLiteralType)(yt)&&typeof yt.literalValue=="number"?(Ze=yt.literalValue,Ze<0&&(Ze=Le.tupleTypeArguments.length+Ze)):Ze=-1}return Ze},ke=et(pe.startValue,0),Ge=et(pe.endValue,Le.tupleTypeArguments.length);if(ke>=0&&Ge>0&&Ge<=Le.tupleTypeArguments.length&&Tt&&(0,d.isInstantiableClass)(Tt))return{node:c,type:d.ClassType.cloneAsInstance((0,k.specializeTupleClass)(Tt,Le.tupleTypeArguments.slice(ke,Ge)))}}}}const A=c.items.filter(pe=>pe.argumentCategory===0&&!pe.name),x=c.items.filter(pe=>pe.argumentCategory===1),j=c.items.filter(pe=>pe.argumentCategory===0&&!!pe.name),O=c.items.filter(pe=>pe.argumentCategory===2);let K;if(A.length===1&&x.length===0&&!c.trailingComma)K=rt(A[0].valueExpression).type;else if(A.length===0&&x.length===0)K=Tt&&(0,d.isInstantiableClass)(Tt)?(0,k.convertToInstance)((0,k.specializeTupleClass)(Tt,[])):d.UnknownType.create();else{const pe=[];A.forEach(Ie=>{pe.push(rt(Ie.valueExpression).type)}),x.forEach(Ie=>{const Le=rt(Ie.valueExpression).type,et=Es(Le,!1,Ie)||d.UnknownType.create();pe.push(et)}),K=Am(pe,x.length>0)}let ne=[{argumentCategory:0,type:K}];if(g.method==="set"){let pe=g.setType||d.AnyType.create();if((0,d.isTypeVar)(pe)&&pe.details.constraints.length>0){const Ie=(0,d.isClassInstance)(h)?h.condition:void 0;pe=Yt(pe,Ie)}ne.push({argumentCategory:0,type:pe})}j.forEach(pe=>{ne.push({argumentCategory:0,valueExpression:pe.valueExpression,node:pe,name:pe.name})}),O.forEach(pe=>{ne.push({argumentCategory:2,valueExpression:pe.valueExpression,node:pe})});let ie;return Ei(c,()=>{if(ie=sr(c,ne,{type:w}),ie.argumentErrors&&(0,d.isClassInstance)(K)&&j.length===0&&O.length===0){const pe=[...ne];if(pe[0]={...pe[0]},Ur(c,K,"__index__")){const Le=Fn(c,"int");(0,d.isClassInstance)(Le)&&(pe[0].type=Le)}ie=sr(c,pe,{type:w}),ie.argumentErrors||(ne=pe)}}),ie=sr(c,ne,{type:w}),{node:c,type:(_=ie.returnType)!==null&&_!==void 0?_:d.UnknownType.create(),isIncomplete:!!ie.isTypeIncomplete}}function Gc(c,h,g=!1,S=!1,I=!1,_=!1){const C=[];let w=h;I||_?w|=131088:(w&=-1048739,g||(w|=131088),w|=2097152);const A=(x,j)=>{let O;return S||g&&j>0?O=rt(x,131234):O=l2(x,w),O};return c.items.length===1&&!c.trailingComma&&!c.items[0].name&&c.items[0].valueExpression.nodeType===52&&c.items[0].valueExpression.expressions.length>0?(c.items[0].valueExpression.expressions.forEach((x,j)=>{C.push(A(x,j))}),He(c.items[0].valueExpression,d.UnknownType.create())):c.items.forEach((x,j)=>{const O=A(x.valueExpression,j);x.argumentCategory!==0&&x.argumentCategory===1&&((0,d.isVariadicTypeVar)(O.type)&&!O.type.isVariadicUnpacked?O.type=d.TypeVarType.cloneForUnpacked(O.type):(0,d.isInstantiableClass)(O.type)&&!O.type.includeSubclasses&&(0,k.isTupleClass)(O.type)&&(O.type=d.ClassType.cloneForUnpacked(O.type))),x.name&&st(p.Localizer.Diagnostic.keywordArgInTypeArgument(),x.valueExpression),C.push(O)}),C}function l2(c,h){let g,S=h|64|1024|1|8;return F.getFileInfo(c).isStubFile&&(S|=4),c.nodeType===31?(g={type:d.UnknownType.create(),typeList:c.entries.map(_=>rt(_,S)),node:c},He(c,d.UnknownType.create())):(g=rt(c,S),(0,d.isClass)(g.type)&&d.ClassType.isBuiltIn(g.type,"Protocol")&&st(p.Localizer.Diagnostic.protocolNotAllowedInTypeArgument(),c),(h&131072)!==0&&(0,d.isClass)(g.type)&&d.ClassType.isBuiltIn(g.type,"ClassVar")&&st(p.Localizer.Diagnostic.classVarNotAllowed(),c)),g}function c2(c,h,g){if((g&64)!==0&&c.expressions.length===0&&!h)return{type:Am([]),node:c,isEmptyTupleShorthand:!0};let S=h,I=h&&(0,d.isAny)(h);if(h&&(0,d.isUnion)(h)){let C;(0,k.doForEachSubtype)(h,w=>{if((0,d.isAny)(w)&&(I=!0),!C){const A=Ei(c,()=>ib(c,w));A&&Ot(w,A.type)&&(C=w)}}),S=C}if(S){const C=ib(c,S);if(C)return C}const _=u2(c);return I&&(_.type=d.AnyType.create()),_}function ib(c,h){if(h=(0,k.transformPossibleRecursiveTypeAlias)(h),!(0,d.isClassInstance)(h)||!Tt||!(0,d.isInstantiableClass)(Tt))return;let g=[];if((0,k.isTupleClass)(h)&&h.tupleTypeArguments){g=h.tupleTypeArguments.map(w=>(0,k.transformPossibleRecursiveTypeAlias)(w.type));const C=h.tupleTypeArguments.findIndex(w=>w.isUnbounded);if(C>=0)if(g.length>c.expressions.length)g.splice(C,1);else for(;g.length<c.expressions.length;)g.splice(C,0,g[C])}else{const C=new oe.TypeVarContext((0,k.getTypeVarScopeId)(Tt));if(!(0,te.populateTypeVarContextBasedOnExpectedType)(Bt,d.ClassType.cloneAsInstance(Tt),h,C,vo(c)))return;const w=(0,k.applySolvedTypeVars)(Tt,C);if(!w.typeArguments||w.typeArguments.length!==1)return;const A=(0,k.transformPossibleRecursiveTypeAlias)(w.typeArguments[0]);for(let x=0;x<c.expressions.length;x++)g.push(A)}const S=c.expressions.map((C,w)=>rt(C,void 0,w<g.length?g[w]:void 0)),I=g.some(C=>(0,k.isLiteralTypeOrUnion)(C));return{type:(0,k.convertToInstance)((0,k.specializeTupleClass)(Tt,rb(S),!0,!I)),node:c}}function u2(c){const h=c.expressions.map(I=>rt(I)),g=h.some(I=>I.isIncomplete);return!Tt||!(0,d.isInstantiableClass)(Tt)?{type:d.UnknownType.create(),node:c}:{type:(0,k.convertToInstance)((0,k.specializeTupleClass)(Tt,rb(h))),node:c,isIncomplete:g}}function rb(c){const h=[];for(const g of c){let S;if(g.unpackedType?S=g.unpackedType:(0,d.isUnpacked)(g.type)&&(S=g.type),S&&(0,d.isClassInstance)(S)&&S.tupleTypeArguments){const I=S.tupleTypeArguments;I?(0,a.appendArray)(h,I):h.push({type:d.UnknownType.create(),isUnbounded:!0})}else(0,d.isNever)(g.type)&&g.isIncomplete&&!g.unpackedType?h.push({type:d.UnknownType.create(!0),isUnbounded:!1}):h.push({type:g.type,isUnbounded:!!g.unpackedType})}if(h.filter(g=>g.isUnbounded).length>1){const g=h.findIndex(I=>I.isUnbounded),S=h.splice(g);h.push({type:(0,d.combineTypes)(S.map(I=>I.type)),isUnbounded:!0})}return h}function d2(c,h,g){var S;const I=rt(c.leftExpression,2),_=c.arguments.map(w=>({valueExpression:w.valueExpression,argumentCategory:w.argumentCategory,node:w,name:w.name}));let C={node:c,type:d.UnknownType.create()};if((0,k.isTypeAliasPlaceholder)(I.type))C.isIncomplete=!0;else{if(c.leftExpression.nodeType===38&&c.leftExpression.value==="super")C=h2(c);else if((0,d.isAnyOrUnknown)(I.type)&&c.leftExpression.nodeType===38&&c.leftExpression.value==="reveal_type")C=sb(c,h);else if((0,d.isFunction)(I.type)&&I.type.details.builtInName==="reveal_type")C=sb(c,h);else if((0,d.isFunction)(I.type)&&I.type.details.builtInName==="assert_type")C=f2(c,h);else if((0,d.isAnyOrUnknown)(I.type)&&c.leftExpression.nodeType===38&&c.leftExpression.value==="reveal_locals")c.arguments.length===0?C.type=p2(c):st(p.Localizer.Diagnostic.revealLocalsArgs(),c);else{const w=sr(c,_,I,void 0,!1,h);C.type=(S=w.returnType)!==null&&S!==void 0?S:d.UnknownType.create(),w.argumentErrors&&(C.typeErrors=!0),w.isTypeIncomplete&&(C.isIncomplete=!0)}I.isIncomplete&&(C.isIncomplete=!0)}return!mt.isSpeculative(c)&&!I.isIncomplete&&((0,d.isInstantiableClass)(I.type)&&d.ClassType.isBuiltIn(I.type,"TypeVar")&&F.getFileInfo(c).isTypingStubFile||_.forEach(A=>{A.valueExpression&&A.valueExpression.nodeType!==48&&!de(A.valueExpression)&&rt(A.valueExpression)})),(g&1024)!==0&&(Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeAnnotationCall(),c),C={node:c,type:d.UnknownType.create()}),C}function f2(c,h){if(c.arguments.length!==2||c.arguments[0].argumentCategory!==0||c.arguments[0].name!==void 0||c.arguments[0].argumentCategory!==0||c.arguments[1].name!==void 0)return st(p.Localizer.Diagnostic.assertTypeArgs(),c),{node:c,type:d.UnknownType.create()};const g=rt(c.arguments[0].valueExpression,void 0,h);if(g.isIncomplete)return{node:c,type:d.UnknownType.create(!0),isIncomplete:!0};const S=(0,k.convertToInstance)(rf(c.arguments[1]).type);return(0,d.isTypeSame)(S,g.type)||st(p.Localizer.Diagnostic.assertTypeTypeMismatch().format({expected:at(S),received:at(g.type)}),c.arguments[0].valueExpression),{node:c,type:g.type}}function sb(c,h){let g,S,I,_,C;if(c.arguments.forEach((O,K)=>{if(K===0)O.argumentCategory===0&&!O.name&&(g=O.valueExpression);else if(O.argumentCategory!==0||!O.name)g=void 0;else if(O.name.value==="expected_text"){_=O.valueExpression;const ne=rt(O.valueExpression).type;!(0,d.isClassInstance)(ne)||!d.ClassType.isBuiltIn(ne,"str")||typeof ne.literalValue!="string"?st(p.Localizer.Diagnostic.revealTypeExpectedTextArg(),O.valueExpression):C=ne.literalValue}else O.name.value==="expected_type"&&(S=O.valueExpression,I=(0,k.convertToInstance)(rf(O).type))}),!g)return st(p.Localizer.Diagnostic.revealTypeArgs(),c),{node:c,type:d.UnknownType.create()};const w=rt(g,void 0,h),A=w.type,x=N.printExpression(g),j=at(A,!0);if(C!==void 0&&C!==j&&st(p.Localizer.Diagnostic.revealTypeExpectedTextMismatch().format({expected:C,received:j}),_!=null?_:g),I&&!(0,d.isTypeSame)(I,A)){const O=at(I);st(p.Localizer.Diagnostic.revealTypeExpectedTypeMismatch().format({expected:O,received:j}),S!=null?S:g)}return qd(p.Localizer.DiagnosticAddendum.typeOfSymbol().format({name:x,type:j}),c.arguments[0]),{node:c,type:A,isIncomplete:w.isIncomplete}}function p2(c){let h=c,g;for(;h&&(g=ue.getScopeForNode(h),!(g&&g.type!==0));)h=h.parent;const S=[];return g&&g.symbolTable.forEach((I,_)=>{if(!I.isIgnoredForProtocolMatch()){const C=Fs(I);S.push(p.Localizer.DiagnosticAddendum.typeOfSymbol().format({name:_,type:at(C,!0)}))}}),S.length>0?qd(S.join(`
`),c):qd(p.Localizer.Diagnostic.revealLocalsNone(),c),d.NoneType.createInstance()}function h2(c){c.arguments.length>2&&st(p.Localizer.Diagnostic.superCallArgCount(),c.arguments[2]);let h;if(c.arguments.length>0){h=rt(c.arguments[0].valueExpression).type;const _=Yt(h);!(0,d.isAnyOrUnknown)(_)&&!(0,d.isInstantiableClass)(_)&&Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.superCallFirstArg().format({type:at(h)}),c.arguments[0].valueExpression)}else{const _=N.getEnclosingClass(c);if(_){const C=ti(_);h=C?C.classType:d.UnknownType.create()}else st(p.Localizer.Diagnostic.superCallZeroArgForm(),c.leftExpression),h=d.UnknownType.create()}let g;if(c.arguments.length>1){const _=Yt(rt(c.arguments[1].valueExpression).type);let C=!1;if((0,d.isAnyOrUnknown)(_)||((0,d.isClassInstance)(_)?((0,d.isInstantiableClass)(h)&&((0,k.derivesFromClassRecursive)(d.ClassType.cloneAsInstantiable(_),h,!0)||(C=!0)),g=_):(0,d.isInstantiableClass)(_)?((0,d.isInstantiableClass)(h)&&((0,k.derivesFromClassRecursive)(_,h,!0)||(C=!0)),g=_):C=!0),C){const w=F.getFileInfo(c);Xe(w.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.superCallSecondArg().format({type:at(h)}),c.arguments[1].valueExpression)}}else{const _=N.getEnclosingFunction(c);let C;if(_){const w=br(_);if(w){const A=w.functionType;d.FunctionType.isClassMethod(A)?A.details.parameters.length>0&&A.details.parameters[0].hasDeclaredType&&(C=Yt(A.details.parameters[0].type)):d.FunctionType.isInstanceMethod(A)&&A.details.parameters.length>0&&A.details.parameters[0].hasDeclaredType&&(C=Yt((0,k.convertToInstantiable)(A.details.parameters[0].type)))}}C&&(0,d.isInstantiableClass)(C)?g=C:(0,d.isInstantiableClass)(h)&&(g=h)}let S=!0;if(c.arguments.length<=1){const _=N.getEnclosingFunction(c);if(_){const C=br(_);C&&(d.FunctionType.isStaticMethod(C.functionType)||d.FunctionType.isConstructorMethod(C.functionType)||d.FunctionType.isClassMethod(C.functionType))&&(S=!1)}}const I=c.parent;if(I.nodeType===35){const _=I.memberName.value,C=(0,k.lookUpClassMember)(h,_,1);if(C&&(0,d.isInstantiableClass)(C.classType))return{type:S?d.ClassType.cloneAsInstance(C.classType):C.classType,node:c,bindToType:S&&g&&(0,d.isInstantiableClass)(g)?d.ClassType.cloneAsInstance(g):g,isSuperCall:!0}}if((0,d.isInstantiableClass)(h)){if(h.details.mro.some(C=>(0,d.isAnyOrUnknown)(C)))return{type:d.UnknownType.create(),isSuperCall:!0,node:c};const _=h.details.baseClasses;if(_.length>0){const C=_[0];if((0,d.isInstantiableClass)(C))return{type:S?d.ClassType.cloneAsInstance(C):C,isSuperCall:!0,node:c}}}return{type:d.UnknownType.create(),isSuperCall:!0,node:c}}function m2(c,h,g,S,I,_){const C=[],w=[];let A=!1;for(let j=0;j<h.length;j++){let O;const K=h[j],ne=K.some(ie=>ie!==void 0);for(let ie=0;ie<g.length;ie++){const pe=g[ie].overload;let Ie=g[ie];ne&&(Ie={...g[ie]},Ie.argParams=Ie.argParams.map((ke,Ge)=>{if(!K[Ge])return ke;const ut={...ke};return ut.argType=K[Ge],ut}));const Le=S?S.clone():new oe.TypeVarContext((0,k.getTypeVarScopeId)(pe));Le.addSolveForScope((0,k.getTypeVarScopeId)(pe));const et=Ei(c,()=>Kc(c,Ie,Le,!0,_));if(et.isTypeIncomplete&&(A=!0),!et.argumentErrors&&et.returnType){O=pe,w.push({overload:O,matchResults:Ie,typeVarContext:Le}),C.push(et.returnType);break}}if(!O)return{argumentErrors:!0,isTypeIncomplete:A}}if(S)for(let j=0;j<h.length;j++){const O=w[j].overload,K=w[j].matchResults;Ei(c,()=>(S.addSolveForScope((0,k.getTypeVarScopeId)(O)),S.unlock(),Kc(c,K,S,!0,_)))}w[0].typeVarContext.unlock();const x=Kc(c,w[0].matchResults,w[0].typeVarContext,I,_);return x.isTypeIncomplete&&(A=!0),{argumentErrors:!1,returnType:(0,d.combineTypes)(C),isTypeIncomplete:A,specializedInitSelfType:x.specializedInitSelfType}}function ab(c,h,g){let S=0,I=[];h.overloads.forEach(C=>{Ei(c,()=>{if(d.FunctionType.isOverloaded(C)){const w=Rm(c,g,C,S);w.argumentErrors||I.push(w),S++}})}),I=ob(I);let _;return I.forEach((C,w)=>{_===void 0&&Ei(c,()=>{const A=Hd(c,C,new oe.TypeVarContext((0,k.getTypeVarScopeId)(C.overload)),!0);A&&!A.argumentErrors&&(_=w)})}),_===void 0?void 0:I[_].overload}function ob(c){return c.sort((h,g)=>h.relevance!==g.relevance?g.relevance-h.relevance:h.overloadIndex-g.overloadIndex)}function y2(c,h,g,S,I,_){let C=[],w=[];if(Ei(c,()=>{let O=0;g.overloads.forEach(K=>{if(d.FunctionType.isOverloaded(K)){const ne=Rm(c,h,K,O);ne.argumentErrors||C.push(ne),O++}}),w=h.map(K=>{if(K.type)return K.type;if(K.valueExpression){const ne=K.valueExpression;return Ei(ne,()=>rt(ne).type)}return d.AnyType.create()})}),C=ob(C),C.length===0){if(!Tl(c)){const O=g.overloads[0].details.name||"<anonymous function>",K=new l.DiagnosticAddendum,ne=h.map(ie=>at(Sr(ie).type));K.addMessage(p.Localizer.DiagnosticAddendum.argumentTypes().format({types:ne.join(", ")})),Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.noOverload().format({name:O})+K.getString(),c)}return{argumentErrors:!0,isTypeIncomplete:!1}}const A=O=>{const K=C.reduce((ie,pe)=>pe.overloadIndex>ie.overloadIndex?pe:ie),ne=S!=null?S:new oe.TypeVarContext;return ne.addSolveForScope((0,k.getTypeVarScopeId)(K.overload)),ne.unlock(),Kc(c,K,ne,O,_)};if(C.length===1)return A(!1);let x=[h.map(O=>{})],j=!1;for(;;){const O=m2(c,x,C,S,I,_);if(O.isTypeIncomplete&&(j=!0),!O.argumentErrors)return O;if(x=g2(w,x),!x||x.length>ve)break}if(!Tl(c)&&!j){const O=A(!0);return O.returnType=d.UnknownType.create(),O}return{argumentErrors:!0,isTypeIncomplete:!1}}function g2(c,h){let g=c.length-1;for(;g>=0&&!h[0][g];)g--;if(g++,g>=c.length)return;let S;for(;g<c.length;){const _=c[g];if((0,d.isUnion)(_)){S=_;break}g++}if(!S)return;const I=[];return h.forEach(_=>{(0,k.doForEachSubtype)(S,C=>{const w=[..._];w[g]=C,I.push(w)})}),I}function Mm(c,h,g,S,I){var _;let C=!1,w,A=!1,x=!1,j=!1;const O=ie=>(0,d.isFunction)(ie)&&d.FunctionType.isSkipConstructorCheck(ie),K=(_=Ur(c,d.ClassType.cloneAsInstance(g),"__init__",{method:"get"},void 0,68))===null||_===void 0?void 0:_.type;if(K&&!O(K)){if(I){const ie=lb(c,h,g,S,I,K);ie&&(w=ie.returnType,ie.isTypeIncomplete&&(x=!0))}if(!w){const ie=g.typeArguments?(0,k.buildTypeVarContextFromSpecializedClass)(g,!1):new oe.TypeVarContext((0,k.getTypeVarScopeId)(g));ie.addSolveForScope((0,k.getTypeVarScopeId)(K));const pe=sr(c,h,{type:K},ie,S);if(pe.argumentErrors)A=!0;else{let Ie=g;pe.specializedInitSelfType&&(0,d.isClassInstance)(pe.specializedInitSelfType)&&d.ClassType.isSameGenericClass(pe.specializedInitSelfType,g)&&(Ie=d.ClassType.cloneAsInstantiable(pe.specializedInitSelfType)),w=Nm(Ie,void 0,ie),pe.isTypeIncomplete&&(x=!0)}}C=!0,S=!0}if(!A){const ie=g.details.effectiveMetaclass;let pe;if(ie&&(0,d.isInstantiableClass)(ie)&&!d.ClassType.isSameGenericClass(ie,g)&&(pe=vl(c,ie,!0,"__call__",{method:"get"},void 0,352,g),pe&&(j=!0)),pe||(pe=vl(c,g,!1,"__new__",{method:"get"},void 0,21,g)),pe&&!O(pe.type)){const Ie=pe.type;if(I&&!w){const ke=lb(c,h,g,S,I,Ie);ke&&(w=ke.returnType,ke.isTypeIncomplete&&(x=!0))}const Le=new oe.TypeVarContext((0,k.getTypeVarScopeId)(g));g.typeAliasInfo&&Le.addSolveForScope(g.typeAliasInfo.typeVarScopeId),Le.addSolveForScope((0,k.getTypeVarScopeId)(Ie));const et=sr(c,h,pe,Le,S);if(et.argumentErrors)A=!0;else{let ke=et.returnType;et.isTypeIncomplete&&(x=!0),ke&&((0,d.isClassInstance)(ke)&&d.ClassType.isSameGenericClass(ke,g)?(!(0,k.isPartlyUnknown)(ke)&&!(0,k.requiresSpecialization)(ke)||w===void 0)&&((0,d.isClassInstance)(ke)&&d.ClassType.isTupleClass(ke)&&!ke.tupleTypeArguments&&ke.typeArguments&&ke.typeArguments.length===1&&(ke=(0,k.specializeTupleClass)(ke,[{type:ke.typeArguments[0],isUnbounded:!0}])),w=ke):!w&&!(0,d.isUnknown)(ke)&&(w=ke))}w?(0,d.isClassInstance)(w)&&(0,k.isTupleClass)(w)&&!w.tupleTypeArguments&&(w=T2(w,I)):w=Nm(g,I,Le),C=!0}}if(C||h.forEach(ie=>{ie.valueExpression&&!mt.isSpeculative(ie.valueExpression)&&rt(ie.valueExpression)}),!C&&h.length>0&&!(!!g.details.effectiveMetaclass&&(0,d.isInstantiableClass)(g.details.effectiveMetaclass)&&!d.ClassType.isBuiltIn(g.details.effectiveMetaclass))&&!j){const pe=F.getFileInfo(c);Xe(pe.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.constructorNoArgs().format({type:g.aliasName||g.details.name}),c)}if(!w)if(!I&&g.typeArguments)w=(0,k.convertToInstance)(g);else{const ie=new oe.TypeVarContext((0,k.getTypeVarScopeId)(g));I&&(0,te.populateTypeVarContextBasedOnExpectedType)(Bt,d.ClassType.cloneAsInstance(g),I,ie,vo(c)),w=Nm(g,I,ie)}if(!A){const ie=(0,q.applyConstructorTransform)(Bt,c,h,g,{argumentErrors:A,returnType:w,isTypeIncomplete:x});w=ie.returnType,ie.isTypeIncomplete&&(x=!0),ie.argumentErrors&&(A=!0)}return{argumentErrors:A,returnType:w,isTypeIncomplete:x}}function lb(c,h,g,S,I,_){let C=!1,w=!1;const A=(0,k.mapSubtypes)(I,x=>{x=(0,k.transformPossibleRecursiveTypeAlias)(x);const j=new oe.TypeVarContext((0,k.getTypeVarScopeId)(g));if((0,te.populateTypeVarContextBasedOnExpectedType)(Bt,d.ClassType.cloneAsInstance(g),x,j,vo(c))){let O;if(Ei(c,()=>{O=sr(c,h,{type:_},j.clone(),S)}),!(O!=null&&O.argumentErrors)){const K=sr(c,h,{type:_},j,S);return K.isTypeIncomplete&&(C=!0),K.argumentErrors&&(w=!0),cb(g,x,j)}}});if(!(0,d.isNever)(A))return{returnType:A,isTypeIncomplete:C,argumentErrors:w}}function cb(c,h,g){const S=(0,k.applySolvedTypeVars)(d.ClassType.cloneAsInstance(c),g);if(!!Ot(h,S))return(0,d.isAny)(h)?h:S}function Nm(c,h,g){let S=!0;if(h){const _=(0,k.mapSubtypes)(h,C=>cb(c,C,g));if(!(0,d.isNever)(_))return _;c.typeArguments&&(S=!1)}const I=(0,k.applySolvedTypeVars)(c,g,S);return d.ClassType.cloneAsInstance(I)}function T2(c,h){let g=c;return h&&(0,d.isClassInstance)(h)&&(0,k.isTupleClass)(h)&&h.tupleTypeArguments&&(g=(0,k.specializeTupleClass)(c,h.tupleTypeArguments)),g}function sr(c,h,g,S,I=!1,_,C=0){let w=!1,A=!1,x;if(C>d.maxTypeRecursionCount)return{returnType:d.UnknownType.create(),argumentErrors:!0};if(C++,d.TypeBase.isSpecialForm(g.type)){const O=c.nodeType===9?c.leftExpression:c;return Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeNotCallable().format({expression:N.printExpression(O),type:at(g.type,!0)}),O),{returnType:d.UnknownType.create(),argumentErrors:!0}}const j=rr(g.type,void 0,(O,K)=>{var ne,ie,pe,Ie,Le,et;switch(O.category){case 1:case 2:return g.isIncomplete||h.forEach(ke=>{ke.valueExpression&&!mt.isSpeculative(ke.valueExpression)&&Sr(ke)}),O;case 5:{if(O.details.builtInName==="namedtuple")return Xe(F.getFileInfo(c).diagnosticRuleSet.reportUntypedNamedTuple,o.DiagnosticRule.reportUntypedNamedTuple,p.Localizer.Diagnostic.namedTupleNoTypes(),c),(0,T.createNamedTupleType)(Bt,c,h,!1);let ke=S;ke||(ke=new oe.TypeVarContext((0,k.getTypeVarScopeId)(O)),!ke.getSolveForScopes()&&d.FunctionType.isConstructorMethod(O)&&ke.addSolveForScope(d.WildcardTypeVarScopeId));const Ge=db(c,h,O,ke,I,_);if(Ge.isTypeIncomplete&&(A=!0),Ge.argumentErrors)w=!0;else{x=Ge.specializedInitSelfType;const ut=(0,M.applyFunctionTransform)(Bt,c,h,O,{argumentErrors:Ge.argumentErrors,returnType:(ne=Ge.returnType)!==null&&ne!==void 0?ne:d.UnknownType.create(A),isTypeIncomplete:A});Ge.returnType=ut.returnType,ut.isTypeIncomplete&&(A=!0),ut.argumentErrors&&(w=!0)}return!Ge.argumentErrors&&O.details.builtInName==="NewType"?pb(c,h):O.details.builtInName==="__import__"?d.AnyType.create():Ge.returnType}case 6:{if(O.overloads[0].details.builtInName==="cast"&&h.length===2){const Ge=rf(h[0]).type,ut=Sr(h[1]).type;return(0,d.isInstantiableClass)(Ge)&&(0,d.isClassInstance)(ut)&&(0,d.isTypeSame)(Ge,d.ClassType.cloneAsInstantiable(ut),!0)&&Xe(F.getFileInfo(c).diagnosticRuleSet.reportUnnecessaryCast,o.DiagnosticRule.reportUnnecessaryCast,p.Localizer.Diagnostic.unnecessaryCast().format({type:at(ut)}),c),(0,k.convertToInstance)(Ge)}const ke=y2(c,h,O,S,I,_);if(ke.isTypeIncomplete&&(A=!0),ke.argumentErrors)w=!0;else{x=ke.specializedInitSelfType;const Ge=(0,M.applyFunctionTransform)(Bt,c,h,O,{argumentErrors:ke.argumentErrors,returnType:(ie=ke.returnType)!==null&&ie!==void 0?ie:d.UnknownType.create(A),isTypeIncomplete:A});ke.returnType=Ge.returnType,Ge.isTypeIncomplete&&(A=!0),Ge.argumentErrors&&(w=!0)}return(pe=ke.returnType)!==null&&pe!==void 0?pe:d.UnknownType.create()}case 7:if(d.TypeBase.isInstantiable(O)){if(O.literalValue!==void 0)return Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.literalNotCallable(),c),w=!0,d.UnknownType.create();if(d.ClassType.isBuiltIn(O)){const ut=O.aliasName||O.details.name;if(ut==="type"){if(Mm(c,h,O,I,_),h.length===1){const Ve=Sr(h[0]).type;return(0,k.mapSubtypes)(Ve,Ze=>(0,d.isClassInstance)(Ze)||(0,d.isTypeVar)(Ze)&&d.TypeBase.isInstance(Ze)||(0,d.isNoneInstance)(Ze)?(0,k.convertToInstantiable)((0,k.stripLiteralValue)(Ze)):d.AnyType.create())}else if(h.length>=2)return w2(c,h)||d.AnyType.create();return d.AnyType.create()}if(ut==="TypeVar")return v2(c,h);if(ut==="TypeVarTuple")return b2(c,h);if(ut==="ParamSpec")return S2(c,h);if(ut==="NamedTuple")return(0,T.createNamedTupleType)(Bt,c,h,!0);if(ut==="NewType")return pb(c,h);if(ut==="Protocol"||ut==="Generic"||ut==="Callable"||ut==="Concatenate"||ut==="Type"){const Ve=F.getFileInfo(c);return Xe(Ve.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeNotIntantiable().format({type:ut}),c),d.AnyType.create()}if(ut==="Enum"||ut==="IntEnum"||ut==="StrEnum"||ut==="Flag"||ut==="IntFlag")return C2(c,O,h);if(ut==="TypedDict")return(0,R.createTypedDictType)(Bt,c,O,h);if(ut==="auto"&&h.length===0)return Fn(c,"int")}if(d.ClassType.supportsAbstractMethods(O)){const ut=Lb(O);if(ut.length>0&&!O.includeSubclasses&&!(0,d.isTypeVar)(K)){const Ve=new l.DiagnosticAddendum,Ze=2;ut.forEach((yt,tn)=>{if(tn===Ze)Ve.addMessage(p.Localizer.DiagnosticAddendum.memberIsAbstractMore().format({count:ut.length-Ze}));else if(tn<Ze&&(0,d.isInstantiableClass)(yt.classType)){const Et=yt.classType.details.name;Ve.addMessage(p.Localizer.DiagnosticAddendum.memberIsAbstract().format({type:Et,name:yt.symbolName}))}}),Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.instantiateAbstract().format({type:O.details.name})+Ve.getString(),c)}}d.ClassType.isProtocolClass(O)&&!O.includeSubclasses&&Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.instantiateProtocol().format({type:O.details.name}),c);const ke=Mm(c,h,O,I,_);ke.argumentErrors&&(w=!0),ke.isTypeIncomplete&&(A=!0);let Ge=ke.returnType;if((0,d.isTypeVar)(K)&&(Ge=(0,k.convertToInstance)(K)),Ge&&(0,d.isClassInstance)(Ge)&&Ge.details.mro.some(ut=>(0,d.isInstantiableClass)(ut)&&d.ClassType.isBuiltIn(ut,"type"))){let ut="__class_"+Ge.details.name;if(h.length===3){const Ze=Sr(h[0]).type;(0,d.isClassInstance)(Ze)&&d.ClassType.isBuiltIn(Ze,"str")&&typeof Ze.literalValue=="string"&&(ut=Ze.literalValue)}const Ve=d.ClassType.createInstantiable(ut,"","",F.getFileInfo(c).filePath,0,N.getTypeSourceId(c),d.ClassType.cloneAsInstantiable(Ge),d.ClassType.cloneAsInstantiable(Ge));return Ve.details.baseClasses.push(ai(c,"object")),Ve.details.effectiveMetaclass=O,(0,k.computeMroLinearization)(Ve),Ve}return Ge}else{const ke=(Ie=Ur(c,O,"__call__"))===null||Ie===void 0?void 0:Ie.type;if(ke&&((0,d.isFunction)(ke)||(0,d.isOverloadedFunction)(ke))){const Ge=sr(c,h,{type:ke},S,I,_,C);return Ge.argumentErrors&&(w=!0),(0,d.isTypeVar)(K)&&d.TypeBase.isInstantiable(K)&&(0,d.isClass)(O)&&d.ClassType.isBuiltIn(O,"type")?(0,k.convertToInstance)(K):(Le=Ge.returnType)!==null&&Le!==void 0?Le:d.UnknownType.create()}return(!ke||!(0,d.isAnyOrUnknown)(ke))&&Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.objectNotCallable().format({type:at(O)}),c),d.UnknownType.create()}case 3:{Xe(F.getFileInfo(c).diagnosticRuleSet.reportOptionalCall,o.DiagnosticRule.reportOptionalCall,p.Localizer.Diagnostic.noneNotCallable(),c);return}case 10:{O=(0,k.transformPossibleRecursiveTypeAlias)(O);const ke=sr(c,h,{type:O},S,I,_,C);return ke.argumentErrors&&(w=!0),(et=ke.returnType)!==null&&et!==void 0?et:d.UnknownType.create()}case 8:{Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.moduleNotCallable(),c);return}}});return{argumentErrors:w,returnType:(0,d.isNever)(j)&&!j.isNoReturn?void 0:j,isTypeIncomplete:A,specializedInitSelfType:x}}function Rm(c,h,g,S){var I;const _=(0,k.getParameterListDetails)(g);let C=0,w=!1,A=!1,x=!1,j=!1;const O=new Map;_.params.forEach(Ke=>{const nt=Ke.param;nt.name&&nt.category===0&&O.set(nt.name,{argsNeeded:nt.category===0&&!nt.hasDefault?1:0,argsReceived:0,isPositionalOnly:Ke.source===k.ParameterSource.PositionOnly})});let K=_.positionOnlyParamCount,ne=(I=_.firstKeywordOnlyIndex)!==null&&I!==void 0?I:_.params.length;const ie=_.argsIndex,pe=_.kwargsIndex;let Ie,Le,et=!1;if(ie!==void 0&&pe!==void 0){(0,s.assert)(_.params[ie],"varArgListParamIndex params entry is undefined");const Ke=_.params[ie].param;(0,s.assert)(_.params[pe],"varArgDictParamIndex params entry is undefined");const nt=_.params[pe].param;(0,d.isParamSpec)(Ke.type)&&Ke.type.paramSpecAccess==="args"&&(0,d.isParamSpec)(nt.type)&&nt.type.paramSpecAccess==="kwargs"&&Ke.type.details.name===nt.type.details.name&&(et=!0,Ke.type.scopeId===g.details.typeVarScopeId||Ke.type.scopeId===g.details.constructorTypeVarScopeId?(Ie=[],Le=d.TypeVarType.cloneForParamSpecAccess(Ke.type,void 0)):K=ie)}h.some(Ke=>Ke.argumentCategory===1)&&h.forEach(Ke=>{if(Ke.name){const nt=_.params.findIndex(bt=>bt.param.name===Ke.name.value&&bt.param.category===0);nt>=0&&nt>=K&&(ne<0||nt<ne)&&(ne=nt)}}),ne<0&&(ne=_.params.length);let ke=h.findIndex(Ke=>Ke.argumentCategory===2||Ke.name!==void 0);ke<0&&(ke=h.length);let Ge=[],ut;function Ve(Ke,nt){Ke.active&&(ut=nt)}let Ze=h.find(Ke=>Ke.argumentCategory===1)!==void 0,yt=0,tn=0;for(;C<ke;){if(C<K&&h[C].name){const nt=F.getFileInfo(h[C].name);Xe(nt.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.argPositional(),h[C].name),A=!0}if(yt>=ne){(!Ze||h[C].argumentCategory!==1)&&(Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,ne===1?p.Localizer.Diagnostic.argPositionalExpectedOne():p.Localizer.Diagnostic.argPositionalExpectedCount().format({expected:ne}),h[C].valueExpression||c),A=!0);break}if(yt>=_.params.length)break;(0,s.assert)(_.params[yt],"paramIndex params entry is undefined");const Ke=_.params[yt].type;if(h[C].argumentCategory===1){if(!h[C].valueExpression)break;const nt=_.params[yt].param.category===1&&(0,d.isVariadicTypeVar)(Ke);let bt=!1;const Pt=Sr(h[C]),gt=Pt.type;let xt,fn=!1;g.details.paramSpec&&yt<ne&&(Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,ne===1?p.Localizer.Diagnostic.argPositionalExpectedOne():p.Localizer.Diagnostic.argPositionalExpectedCount().format({expected:ne}),h[C].valueExpression||c),A=!0);const Kt=(0,k.combineSameSizedTuples)(Yt(gt),Tt);!nt&&Kt&&(0,d.isClassInstance)(Kt)&&Kt.tupleTypeArguments&&Kt.tupleTypeArguments.length>0&&tn<Kt.tupleTypeArguments.length?(xt=Kt.tupleTypeArguments[tn].type,Ze=h.find((NA,RA)=>RA>C&&NA.argumentCategory===1)!==void 0,tn++,tn>=Kt.tupleTypeArguments.length&&(tn=0,fn=!0)):nt&&(0,d.isVariadicTypeVar)(gt)?(xt=gt,bt=!0,fn=!0,j=!0):(0,d.isClassInstance)(gt)&&(0,k.isTupleClass)(gt)&&gt.tupleTypeArguments&&gt.tupleTypeArguments.length===1&&(0,d.isVariadicTypeVar)(gt.tupleTypeArguments[0].type)?(xt=gt.tupleTypeArguments[0].type,bt=!0,fn=!0,j=!0):(0,d.isParamSpec)(gt)&&gt.paramSpecAccess==="args"?xt=void 0:(xt=Es(gt,!1,h[C].valueExpression)||d.UnknownType.create(),_.params[yt].param.category!==1&&(w=!0));const ls=xt?{argumentCategory:0,type:xt}:void 0;ls&&Pt.isIncomplete&&(x=!0);const wa=_.params[yt].param.name;nt&&!bt?(Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.unpackedArgWithVariadicParam(),h[C].valueExpression||c),A=!0):(Ie&&Ie.push(h[C]),ls&&Ge.push({paramCategory:_.params[yt].param.category,paramType:Ke,requiresTypeVarMatching:(0,k.requiresSpecialization)(Ke),argument:ls,errorNode:h[C].valueExpression||c,paramName:wa,isParamNameSynthesized:_.params[yt].param.isNameSynthesized})),Ve(h[C],_.params[yt].param),wa&&_.params[yt].param.category===0&&O.has(wa)&&O.get(wa).argsReceived++,(fn||_.params[yt].param.category===1)&&C++,(j||_.params[yt].param.category!==1)&&yt++}else if(_.params[yt].param.category===1)if(Ve(h[C],_.params[yt].param),Ie)Ie.push(h[C]),C++;else{let nt=_.params[yt].param.category,bt=Ke;const Pt=_.params[yt].param.name;(0,d.isUnpackedClass)(Ke)&&Ke.tupleTypeArguments&&Ke.tupleTypeArguments.length>0&&(bt=Ke.tupleTypeArguments[0].type),nt=(0,d.isVariadicTypeVar)(bt)?1:0;const gt=ke-C,xt=ne-yt-1;gt<=xt?(gt<xt&&(Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,gt===1?p.Localizer.Diagnostic.argMorePositionalExpectedOne():p.Localizer.Diagnostic.argMorePositionalExpectedCount().format({expected:gt}),h[C].valueExpression||c),A=!0),yt++):(Ge.push({paramCategory:nt,paramType:bt,requiresTypeVarMatching:(0,k.requiresSpecialization)(Ke),argument:h[C],errorNode:h[C].valueExpression||c,paramName:Pt,isParamNameSynthesized:_.params[yt].param.isNameSynthesized,mapsToVarArgList:!0}),C++)}else{const nt=_.params[yt].param.name;Ge.push({paramCategory:_.params[yt].param.category,paramType:Ke,requiresTypeVarMatching:(0,k.requiresSpecialization)(Ke),argument:h[C],errorNode:h[C].valueExpression||c,paramName:nt,isParamNameSynthesized:_.params[yt].param.isNameSynthesized}),Ve(h[C],_.params[yt].param),nt&&O.has(nt)&&O.get(nt).argsReceived++,C++,yt++}}if(K>=0&&yt<K&&(!Ze||et)){const Ke=_.params.findIndex(Pt=>Pt.param.hasDefault),bt=(Ke>=0&&Ke<K?Ke:K)-ke;bt>0&&(Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,bt===1?p.Localizer.Diagnostic.argMorePositionalExpectedOne():p.Localizer.Diagnostic.argMorePositionalExpectedCount().format({expected:bt}),h.length>ke&&h[ke].valueExpression||c),A=!0)}if(!A){let Ke;for(;C<h.length;){if(h[C].argumentCategory===2){const nt=Sr(h[C]).type;if((0,d.isAnyOrUnknown)(nt))Ke=nt;else if((0,d.isClassInstance)(nt)&&d.ClassType.isTypedDictClass(nt)){const bt=(0,R.getTypedDictMembersForClass)(Bt,nt),Pt=new l.DiagnosticAddendum;bt.forEach((gt,xt)=>{const fn=O.get(xt);if(fn&&!fn.isPositionalOnly)if(fn.argsReceived>0)Pt.addMessage(p.Localizer.Diagnostic.paramAlreadyAssigned().format({name:xt}));else{fn.argsReceived++;const Kt=_.params.findIndex(wa=>wa.param.name===xt);(0,s.assert)(Kt>=0);const ls=_.params[Kt].type;Ge.push({paramCategory:0,paramType:ls,requiresTypeVarMatching:(0,k.requiresSpecialization)(ls),argument:{argumentCategory:0,type:gt.valueType},errorNode:h[C].valueExpression||c,paramName:xt})}else if(_.kwargsIndex!==void 0){const Kt=_.params[_.kwargsIndex].type;Ge.push({paramCategory:2,paramType:Kt,requiresTypeVarMatching:(0,k.requiresSpecialization)(Kt),argument:{argumentCategory:0,type:gt.valueType},errorNode:h[C].valueExpression||c,paramName:xt}),O.set(xt,{argsNeeded:1,argsReceived:1,isPositionalOnly:!1})}else _.hasUnpackedTypedDict||Pt.addMessage(p.Localizer.Diagnostic.paramNameMissing().format({name:xt}))}),Pt.isEmpty()||(Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.unpackedTypedDictArgument()+Pt.getString(),h[C].valueExpression||c),A=!0)}else if((0,d.isParamSpec)(nt)&&nt.paramSpecAccess==="kwargs")Ke=d.AnyType.create(),g.details.paramSpec&&Ge.push({paramCategory:2,paramType:g.details.paramSpec,requiresTypeVarMatching:!1,argument:h[C],errorNode:h[C].valueExpression||c});else{const bt=Vr(c,"Mapping"),Pt=Fn(c,"str");if(bt&&(0,d.isInstantiableClass)(bt)&&Pt&&(0,d.isClassInstance)(Pt)){const gt=new oe.TypeVarContext((0,k.getTypeVarScopeId)(bt));let xt=!1;if((0,d.isTypeVar)(nt))xt=!0;else if(Ot(d.ClassType.cloneAsInstance(bt),nt,void 0,gt)){const Kt=(0,k.applySolvedTypeVars)(bt,gt).typeArguments;Kt&&Kt.length>=2?(Ot(Pt,Kt[0])&&(xt=!0),Ke=Kt[1]):(xt=!0,Ke=d.UnknownType.create())}xt||(Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.unpackedDictArgumentNotMapping(),h[C].valueExpression||c),A=!0)}}Ie&&Ie.push(h[C])}else{const nt=h[C].name;if(nt){const bt=nt.value,Pt=O.get(bt);if(Pt&&!Pt.isPositionalOnly)if(Pt.argsReceived>0)Xe(F.getFileInfo(nt).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.paramAlreadyAssigned().format({name:bt}),nt),A=!0;else{Pt.argsReceived++;const gt=_.params.findIndex(fn=>fn.param.name===bt);(0,s.assert)(gt>=0);const xt=_.params[gt].type;Ge.push({paramCategory:0,paramType:xt,requiresTypeVarMatching:(0,k.requiresSpecialization)(xt),argument:h[C],errorNode:h[C].valueExpression||c,paramName:bt}),Ve(h[C],_.params[gt].param)}else if(_.kwargsIndex!==void 0){if(Ie)Ie.push(h[C]);else{const gt=_.params[_.kwargsIndex].type;Ge.push({paramCategory:2,paramType:gt,requiresTypeVarMatching:(0,k.requiresSpecialization)(gt),argument:h[C],errorNode:h[C].valueExpression||c,paramName:bt}),O.set(bt,{argsNeeded:1,argsReceived:1,isPositionalOnly:!1})}(0,s.assert)(_.params[_.kwargsIndex],"paramDetails.kwargsIndex params entry is undefined"),Ve(h[C],_.params[_.kwargsIndex].param)}else Xe(F.getFileInfo(nt).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.paramNameMissing().format({name:nt.value}),nt),A=!0}else if(h[C].argumentCategory===0){const bt=F.getFileInfo(c);Xe(bt.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,ne===1?p.Localizer.Diagnostic.argPositionalExpectedOne():p.Localizer.Diagnostic.argPositionalExpectedCount().format({expected:ne}),h[C].valueExpression||c),A=!0}else if(h[C].argumentCategory===1&&g.details.paramSpec){const bt=Sr(h[C]),Pt=bt.type;bt.isIncomplete&&(x=!0),(0,d.isParamSpec)(Pt)&&Pt.paramSpecAccess==="args"&&Ge.push({paramCategory:1,paramType:g.details.paramSpec,requiresTypeVarMatching:!1,argument:h[C],errorNode:h[C].valueExpression||c})}}C++}if(Ke&&(!Ze||_.argsIndex!==void 0)&&_.params.forEach((nt,bt)=>{var Pt,gt;const xt=nt.param;if(bt>=_.firstPositionOrKeywordIndex&&xt.category===0&&xt.name&&!xt.hasDefault&&O.has(xt.name)&&O.get(xt.name).argsReceived===0){const fn=_.params[bt].type;Ge.push({paramCategory:0,paramType:fn,requiresTypeVarMatching:(0,k.requiresSpecialization)(fn),argument:{argumentCategory:0,type:Ke},errorNode:(gt=(Pt=h.find(Kt=>Kt.argumentCategory===2))===null||Pt===void 0?void 0:Pt.valueExpression)!==null&&gt!==void 0?gt:c,paramName:xt.name,isParamNameSynthesized:xt.isNameSynthesized}),O.get(xt.name).argsReceived=1}}),!Ke&&!d.FunctionType.isDefaultParameterCheckDisabled(g)){const nt=[...O.keys()].filter(bt=>{const Pt=O.get(bt);return!Pt||Pt.argsReceived<Pt.argsNeeded});if(nt.length>0){const bt=nt.map(Pt=>`"${Pt}"`).join(", ");Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,nt.length===1?p.Localizer.Diagnostic.argMissingForParam().format({name:bt}):p.Localizer.Diagnostic.argMissingForParams().format({names:bt}),c),A=!0}_.params.forEach(bt=>{var Pt;const gt=bt.param;if(gt.category===0&&gt.name){const xt=O.get(gt.name);if(xt.argsNeeded===0&&xt.argsReceived===0){const fn=(Pt=bt.defaultArgType)!==null&&Pt!==void 0?Pt:gt.defaultType;fn&&!(0,k.isEllipsisType)(fn)&&(0,k.requiresSpecialization)(gt.type)&&Ge.push({paramCategory:gt.category,paramType:bt.type,requiresTypeVarMatching:!0,argument:{argumentCategory:0,type:fn},errorNode:c,paramName:gt.name,isParamNameSynthesized:gt.isNameSynthesized})}}})}}if((!A||!mt.isSpeculative(void 0))&&_.argsIndex!==void 0&&_.argsIndex>=0&&_.params[_.argsIndex].param.hasDeclaredType&&!j){const Ke=_.params[_.argsIndex].type,nt=Ge.filter(bt=>bt.mapsToVarArgList);if((0,d.isTypeVar)(Ke)&&Ke.details.isVariadic&&Tt&&(0,d.isInstantiableClass)(Tt)){const bt=nt.map(xt=>{var fn;const Kt=Sr(xt.argument).type;return((0,d.isUnpackedVariadicTypeVar)(Kt)||(0,d.isClassInstance)(Kt)&&(0,k.isTupleClass)(Kt)&&Kt.tupleTypeArguments&&Kt.tupleTypeArguments.some(wa=>(0,d.isUnpackedVariadicTypeVar)(wa.type)))&&xt.argument.argumentCategory!==1&&(Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeVarTupleMustBeUnpacked(),(fn=xt.argument.valueExpression)!==null&&fn!==void 0?fn:c),A=!0),{type:(0,k.stripLiteralValue)(Kt),isUnbounded:xt.argument.argumentCategory===1}}),Pt=d.ClassType.cloneAsInstance((0,k.specializeTupleClass)(Tt,bt,!0,!0,!0)),gt={paramCategory:1,paramType:Ke,requiresTypeVarMatching:!0,argument:{argumentCategory:0,type:Pt},errorNode:c,paramName:_.params[_.argsIndex].param.name,isParamNameSynthesized:_.params[_.argsIndex].param.isNameSynthesized,mapsToVarArgList:!0};Ge=[...Ge.filter(xt=>!xt.mapsToVarArgList),gt]}}let Et=0;return w&&Et--,["isinstance","issubclass"].some(Ke=>Ke===g.details.builtInName)&&Ge.length===2&&(Ge[1].expectingType=!0),{overload:g,overloadIndex:S,argumentErrors:A,isTypeIncomplete:x,argParams:Ge,paramSpecTarget:Le,paramSpecArgList:Ie,activeParam:ut,relevance:Et}}function Kc(c,h,g,S=!1,I){const _=h.overload;if(!I||(0,d.isAnyOrUnknown)(I)||(0,d.isNever)(I)||(0,k.requiresSpecialization)(I)||!_.details.declaredReturnType)return Hd(c,h,g,S);const C=di(_);let w=I,A=4;if((0,k.containsLiteralType)(w,!0)&&(A|=128),(0,d.isUnion)(I)){let x;Ei(c,()=>{const j=g.clone();Ot(C,w,void 0,j,void 0,A|1024),x=Hd(c,h,j,S)}),x&&x.argumentErrors&&(w=void 0)}if(w){if((0,d.isClassInstance)(C)&&(0,d.isClassInstance)(w)&&!d.ClassType.isSameGenericClass(C,w)){const x=new oe.TypeVarContext((0,k.getTypeVarScopeId)(C));(0,te.populateTypeVarContextBasedOnExpectedType)(Bt,C,w,x,vo(c));const j=d.ClassType.cloneForSpecialization(C,void 0,!1);w=(0,k.applySolvedTypeVars)(j,x)}Ot(C,w,void 0,g,void 0,A|1024)}return Hd(c,h,g,S)}function Hd(c,h,g,S=!1){const I=h.overload;let _=h.isTypeIncomplete,C=!1,w;const A=(0,k.getTypeCondition)(I);if(I.boundTypeVarScopeId&&(I.preBoundFlags!==void 0&&I.boundToType&&(0,k.requiresSpecialization)(I.boundToType)&&I.preBoundFlags&6&&g.addSolveForScope(I.boundTypeVarScopeId),I.details.name==="__init__"&&d.FunctionType.isOverloaded(I)&&I.strippedFirstParamType&&I.boundToType&&(0,d.isClassInstance)(I.strippedFirstParamType)&&(0,d.isClassInstance)(I.boundToType)&&d.ClassType.isSameGenericClass(I.strippedFirstParamType,I.boundToType)&&I.strippedFirstParamType.typeArguments)){const ke=I.strippedFirstParamType.details.typeParameters;w=I.strippedFirstParamType,I.strippedFirstParamType.typeArguments.forEach((Ge,ut)=>{if(ut<ke.length){const Ve=ke[ut];(0,d.isTypeSame)(Ve,Ge,!0)||g.setTypeVarType(ke[ut],Ge)}})}["cast","isinstance","issubclass"].some(ke=>ke===I.details.builtInName)&&(S=!0);const x=h.argParams.filter(ke=>ke.requiresTypeVarMatching).length;if(x>0){let ke=Math.min(x,2);for(let Ge=0;Ge<ke;Ge++)Ei(c,()=>{h.argParams.forEach(ut=>{if(ut.requiresTypeVarMatching){const Ve=Yd(ut,g,I,S,Ge===0,ke>1&&Ge===0,A);Ve.isTypeIncomplete&&(_=!0),Ge===0&&Ve.skippedOverloadArg&&ke++}})});g.lock()}let j=!1,O=!1,K=[];h.argParams.forEach(ke=>{var Ge;const ut=Yd(ke,g,I,S,!1,!1,A);ut.isCompatible||(C=!0),ut.isTypeIncomplete&&(_=!0),ut.condition&&(K=(Ge=d.TypeCondition.combine(K,ut.condition))!==null&&Ge!==void 0?Ge:[]),I.details.paramSpec&&(ke.argument.argumentCategory===1&&(0,d.isParamSpec)(ut.argType)&&ut.argType.paramSpecAccess==="args"&&(j=!0),ke.argument.argumentCategory===2&&(0,d.isParamSpec)(ut.argType)&&ut.argType.paramSpecAccess==="kwargs"&&(O=!0))}),h.paramSpecArgList&&h.paramSpecTarget?_2(c,h.paramSpecArgList,h.paramSpecTarget,g,A)||(C=!0):I.details.paramSpec&&(!j||!O)&&(_||Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.paramSpecArgsMissing().format({type:at(I.details.paramSpec)}),c),C=!0);let ne=di(I,h.argParams);K.length>0&&(ne=d.TypeBase.cloneForCondition(ne,K));let ie=!0,pe=c;for(;;){const ke=N.getTypeVarScopeNode(pe);if(!ke)break;const Ge=vr(ke);g.hasSolveForScope(Ge)&&(ie=!1),pe=ke}((0,d.isFunction)(ne)||(0,d.isOverloadedFunction)(ne)||I.details.typeVarScopeId===d.WildcardTypeVarScopeId)&&(ie=!1);let Ie=!(0,d.isFunction)(ne);vo(c).some(ke=>g.hasSolveForScope(ke))&&(Ie=!1);let et=(0,k.addConditionToType)((0,k.applySolvedTypeVars)(ne,g,Ie,!1,ie),A);return(0,d.isUnpackedClass)(et)&&(et=d.ClassType.cloneForUnpacked(et,!1)),(0,d.isClassInstance)(et)&&d.ClassType.isBuiltIn(et,["TypeGuard","StrictTypeGuard"])&&et.typeArguments&&et.typeArguments.length>0&&hn&&(0,d.isInstantiableClass)(hn)&&(et=d.ClassType.cloneAsInstance(d.ClassType.cloneForTypeGuard(hn,et.typeArguments[0],d.ClassType.isBuiltIn(et,"StrictTypeGuard")))),et=ub(et),w&&(w=(0,k.applySolvedTypeVars)(w,g)),{argumentErrors:C,returnType:et,isTypeIncomplete:_,activeParam:h.activeParam,specializedInitSelfType:w}}function ub(c){return(0,d.isFunction)(c)&&!c.details.name&&(c.details={...c.details,typeVarScopeId:d.WildcardTypeVarScopeId}),c}function db(c,h,g,S,I=!1,_){const C=Rm(c,h,g,0);return C.argumentErrors?(h.forEach(w=>{w.valueExpression&&!mt.isSpeculative(w.valueExpression)&&rt(w.valueExpression)}),{argumentErrors:!0,activeParam:C.activeParam}):Kc(c,C,S,I,_)}function _2(c,h,g,S,I){var _;const C=S.getParamSpec(g);if(!C)return Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.paramSpecNotBound().format({type:at(g)}),((_=h[0])===null||_===void 0?void 0:_.valueExpression)||c),!1;S.addSolveForScope(C.typeVarScopeId);let w=!1;const A=new Map,x=C.parameters;x.forEach(ie=>{ie.name&&A.set(ie.name,ie)});let j=0,O=x.findIndex(ie=>ie.category!==0);O<0&&(O=x.length);const K=x.find(ie=>ie.category===1),ne=x.find(ie=>ie.category===2);if(h.forEach(ie=>{var pe;if(ie.argumentCategory===0){let Ie;if(ie.name){const Le=A.get(ie.name.value);Le?(Ie=Le.type,A.delete(ie.name.value)):ne?Ie=ne.type:(Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.paramNameMissing().format({name:ie.name.value}),ie.name||c),w=!0)}else{if(j<O){const Le=x[j];Ie=Le.type,Le.name&&A.delete(Le.name)}else K?Ie=K.type:(Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,x.length===1?p.Localizer.Diagnostic.argPositionalExpectedOne():p.Localizer.Diagnostic.argPositionalExpectedCount().format({expected:x.length}),(pe=ie.valueExpression)!==null&&pe!==void 0?pe:c),w=!0);j++}Ie&&(Yd({paramCategory:0,paramType:Ie,requiresTypeVarMatching:!1,argument:ie,errorNode:ie.valueExpression||c},S,void 0,!1,!1,!1,I)||(w=!0))}else A.clear()}),!w){let ie=[...A.keys()];if(ie=ie.filter(pe=>{const Ie=A.get(pe);return Ie.category===0&&!Ie.hasDefault}),ie.length>0&&!C.paramSpec){const pe=ie.map(Ie=>`"${Ie}"`).join(", ");Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,ie.length===1?p.Localizer.Diagnostic.argMissingForParam().format({name:pe}):p.Localizer.Diagnostic.argMissingForParams().format({names:pe}),c),w=!0}}return!w}function Yd(c,h,g,S,I,_,C){let w,A,x=!1,j=!0;const O=g==null?void 0:g.details.name;if(c.argument.valueExpression){let ie=(0,d.isTypeVar)(c.paramType)&&g!==void 0&&c.paramType.scopeId===g.details.typeVarScopeId?void 0:(0,k.applySolvedTypeVars)(c.paramType,h,!1,_);if(ie&&(0,d.isUnknown)(ie)&&(ie=void 0),c.argType)w=c.argType;else{const pe=c.expectingType?168:0,Ie=rt(c.argument.valueExpression,pe,ie);w=Ie.type,Ie.isIncomplete&&(x=!0),Ie.typeErrors&&(j=!1),A=Ie.expectedTypeDiagAddendum}c.argument&&c.argument.name&&!mt.isSpeculative(c.errorNode)&&me(c.argument.name,ie||w,0,x)}else if(c.argType)w=c.argType;else if(c.expectingType&&!c.argument.type&&c.argument.valueExpression){const ie=rt(c.argument.valueExpression,168);w=ie.type,ie.isIncomplete&&(x=!0)}else{const ie=Sr(c.argument);w=ie.type,ie.isIncomplete&&(x=!0)}c.paramCategory===2&&(0,d.isTypeVar)(c.paramType)&&(w=(0,k.stripLiteralValue)(w)),C&&(w=rr(w,C,ie=>ie));const K=w.condition;let ne=new l.DiagnosticAddendum;if((0,d.isParamSpec)(c.paramType)&&c.paramType.paramSpecAccess!==void 0)return{isCompatible:j,argType:w,isTypeIncomplete:x,condition:K};if((0,d.isParamSpec)(w)&&w.paramSpecAccess!==void 0)return{isCompatible:j,argType:w,isTypeIncomplete:x,condition:K};if(I){if((0,d.isOverloadedFunction)(w))return{isCompatible:j,argType:w,isTypeIncomplete:x,skippedOverloadArg:!0,condition:K};const ie=Yt(c.paramType);if((0,d.isFunction)(ie)||(0,d.isOverloadedFunction)(ie)){if((0,d.isInstantiableClass)(w)){const pe=Rb(w);if(pe&&(0,d.isOverloadedFunction)(pe))return{isCompatible:j,argType:w,isTypeIncomplete:x,skippedOverloadArg:!0,condition:K}}if((0,d.isClassInstance)(w)){const pe=(0,k.lookUpObjectMember)(w,"__call__");if(pe){const Ie=Fi(pe);if((0,d.isOverloadedFunction)(Ie))return{isCompatible:j,argType:w,isTypeIncomplete:x,skippedOverloadArg:!0,condition:K}}}}}if(!Ot(c.paramType,w,ne.createAddendum(),h)){if(F.getFileInfo(c.errorNode).diagnosticRuleSet.reportGeneralTypeIssues!=="none"&&!Tl(c.errorNode)&&!x){const pe=F.getFileInfo(c.errorNode),Ie=at(w),Le=at(c.paramType);let et;c.paramName&&!c.isParamNameSynthesized?O?et=p.Localizer.Diagnostic.argAssignmentParamFunction().format({argType:Ie,paramType:Le,functionName:O,paramName:c.paramName}):et=p.Localizer.Diagnostic.argAssignmentParam().format({argType:Ie,paramType:Le,paramName:c.paramName}):O?et=p.Localizer.Diagnostic.argAssignmentFunction().format({argType:Ie,paramType:Le,functionName:O}):et=p.Localizer.Diagnostic.argAssignment().format({argType:Ie,paramType:Le}),A&&(ne=A),Xe(pe.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,et+ne.getString(),c.errorNode)}return{isCompatible:!1,argType:w,isTypeIncomplete:x,condition:K}}if(!S){const ie=(0,d.removeUnbound)(w),pe=F.getFileInfo(c.errorNode),Ie=()=>{const Le=new l.DiagnosticAddendum;return c.paramName&&Le.addMessage((O?p.Localizer.DiagnosticAddendum.argParamFunction().format({paramName:c.paramName,functionName:O}):p.Localizer.DiagnosticAddendum.argParam().format({paramName:c.paramName}))+Le.getString()),Le};if(pe.diagnosticRuleSet.reportUnknownArgumentType!=="none"&&!(0,d.isAny)(c.paramType)&&!x){if((0,d.isUnknown)(ie)){const Le=Ie();Xe(pe.diagnosticRuleSet.reportUnknownArgumentType,o.DiagnosticRule.reportUnknownArgumentType,p.Localizer.Diagnostic.argTypeUnknown()+Le.getString(),c.errorNode)}else if((0,k.isPartlyUnknown)(ie,!0)){let Le=!1;if((0,d.isInstantiableClass)(ie)&&(Le=!0),(0,k.isPartlyUnknown)(c.paramType)&&(Le=!0),(0,d.isClassInstance)(ie)&&ie.isEmptyContainer&&(Le=!0),!Le){const et=Ie();et.addMessage(p.Localizer.DiagnosticAddendum.argumentType().format({type:at(ie,!0)})),Xe(pe.diagnosticRuleSet.reportUnknownArgumentType,o.DiagnosticRule.reportUnknownArgumentType,p.Localizer.Diagnostic.argTypePartiallyUnknown()+et.getString(),c.errorNode)}}}}return{isCompatible:j,argType:w,isTypeIncomplete:x,condition:K}}function v2(c,h){var g,S,I;let _="",C;if(h.length===0){st(p.Localizer.Diagnostic.typeVarFirstArg(),c);return}const w=h[0];w.valueExpression&&w.valueExpression.nodeType===48?_=w.valueExpression.strings.map(x=>x.value).join(""):st(p.Localizer.Diagnostic.typeVarFirstArg(),w.valueExpression||c);const A=d.TypeVarType.createInstantiable(_,!1);for(let x=1;x<h.length;x++){const j=h[x].name,O=j?j.value:void 0,K=new Map;if(O){if(K.get(O)&&st(p.Localizer.Diagnostic.duplicateParam().format({name:O}),h[x].valueExpression||c),O==="bound")if(A.details.constraints.length>0)st(p.Localizer.Diagnostic.typeVarBoundAndConstrained(),h[x].valueExpression||c);else{const ne=(g=h[x].type)!==null&&g!==void 0?g:Qc(h[x].valueExpression,void 0,void 0).type;(0,k.requiresSpecialization)(ne,!0)&&st(p.Localizer.Diagnostic.typeVarGeneric(),h[x].valueExpression||c),A.details.boundType=(0,k.convertToInstance)(ne)}else O==="covariant"?h[x].valueExpression&&fb(h[x].valueExpression)&&(A.details.variance===2?st(p.Localizer.Diagnostic.typeVarVariance(),h[x].valueExpression):A.details.variance=1):O==="contravariant"?h[x].valueExpression&&fb(h[x].valueExpression)&&(A.details.variance===1?st(p.Localizer.Diagnostic.typeVarVariance(),h[x].valueExpression):A.details.variance=2):st(p.Localizer.Diagnostic.typeVarUnknownParam().format({name:O}),((S=h[x].node)===null||S===void 0?void 0:S.name)||h[x].valueExpression||c);K.set(O,O)}else if(A.details.boundType)st(p.Localizer.Diagnostic.typeVarBoundAndConstrained(),h[x].valueExpression||c);else{const ne=(I=h[x].type)!==null&&I!==void 0?I:Qc(h[x].valueExpression,void 0,void 0).type;(0,k.requiresSpecialization)(ne,!0)&&st(p.Localizer.Diagnostic.typeVarGeneric(),h[x].valueExpression||c),d.TypeVarType.addConstraint(A,(0,k.convertToInstance)(ne)),C===void 0&&(C=h[x])}}return A.details.constraints.length===1&&C&&Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeVarSingleConstraint(),C.valueExpression||c),A}function b2(c,h){var g,S;let I="";if(h.length===0){st(p.Localizer.Diagnostic.typeVarFirstArg(),c);return}const _=h[0];_.valueExpression&&_.valueExpression.nodeType===48?I=_.valueExpression.strings.map(w=>w.value).join(""):st(p.Localizer.Diagnostic.typeVarFirstArg(),_.valueExpression||c);const C=d.TypeVarType.createInstantiable(I,!1);C.details.isVariadic=!0;for(let w=1;w<h.length;w++)st(p.Localizer.Diagnostic.typeVarUnknownParam().format({name:((g=h[w].name)===null||g===void 0?void 0:g.value)||"?"}),((S=h[w].node)===null||S===void 0?void 0:S.name)||h[w].valueExpression||c);return C}function S2(c,h){var g,S;if(h.length===0){st(p.Localizer.Diagnostic.paramSpecFirstArg(),c);return}const I=h[0];let _="";I.valueExpression&&I.valueExpression.nodeType===48?_=I.valueExpression.strings.map(w=>w.value).join(""):st(p.Localizer.Diagnostic.paramSpecFirstArg(),I.valueExpression||c);const C=d.TypeVarType.createInstantiable(_,!0);for(let w=1;w<h.length;w++)if(!((g=h[w].name)===null||g===void 0)&&g.value)st(p.Localizer.Diagnostic.paramSpecUnknownParam().format({name:h[w].name.value}),((S=h[w].node)===null||S===void 0?void 0:S.name)||h[w].valueExpression||c);else{st(p.Localizer.Diagnostic.paramSpecUnknownArg(),h[w].valueExpression||c);break}return C}function fb(c){if(c.nodeType===11){if(c.constType===15)return!1;if(c.constType===33)return!0}return st(p.Localizer.Diagnostic.expectedBoolLiteral(),c),!1}function I2(c,h,g){const S=[g];let I=c;for(;I;)I=N.getEnclosingClassOrFunction(I),I&&S.push(I.name.value);return S.push(h),S.reverse().join(".")}function C2(c,h,g){const S=F.getFileInfo(c);let I="enum";if(g.length===0)return;{const w=g[0];if(w.argumentCategory===0&&w.valueExpression&&w.valueExpression.nodeType===48)I=w.valueExpression.strings.map(A=>A.value).join("");else return}const _=d.ClassType.createInstantiable(I,N.getClassFullName(c,S.moduleName,I),S.moduleName,S.filePath,1048576,N.getTypeSourceId(c),void 0,h.details.effectiveMetaclass);_.details.baseClasses.push(h),(0,k.computeMroLinearization)(_);const C=_.details.fields;if(C.set("__class__",Y.Symbol.createWithType(68,_)),!(g.length<2)){{const w=g[1];if(w.argumentCategory!==0||!w.valueExpression||w.valueExpression.nodeType!==48)return;w.valueExpression.strings.map(x=>x.value).join("").split(" ").forEach(x=>{if(x=x.trim(),x){const j=d.UnknownType.create(),O=Y.Symbol.createWithType(4,j),K=w.valueExpression;(0,s.assert)(K.nodeType===48);const ne=F.getFileInfo(c),ie={type:1,node:K,isRuntimeTypeExpression:!0,path:ne.filePath,range:(0,u.convertOffsetsToRange)(K.start,y.TextRange.getEnd(K),ne.lines),moduleName:ne.moduleName,isInExceptSuite:!1};O.addDeclaration(ie),C.set(x,O)}})}return _}}function pb(c,h){const g=F.getFileInfo(c);let S="_";if(h.length>=1){const I=h[0];I.argumentCategory===0&&I.valueExpression&&I.valueExpression.nodeType===48&&(S=I.valueExpression.strings.map(_=>_.value).join(""))}if(h.length>=2){const I=rf(h[1]).type;if((0,d.isInstantiableClass)(I)){d.ClassType.isProtocolClass(I)?st(p.Localizer.Diagnostic.newTypeProtocolClass(),h[1].node||c):I.literalValue!==void 0&&st(p.Localizer.Diagnostic.newTypeLiteral(),h[1].node||c);const _=I.details.flags&-4,C=d.ClassType.createInstantiable(S,N.getClassFullName(c,g.moduleName,S),g.moduleName,g.filePath,_,N.getTypeSourceId(c),void 0,I.details.effectiveMetaclass);C.details.baseClasses.push(I),(0,k.computeMroLinearization)(C);const w=d.FunctionType.createSynthesizedInstance("__init__");d.FunctionType.addParameter(w,{category:0,name:"self",type:d.ClassType.cloneAsInstance(C),hasDeclaredType:!0}),d.FunctionType.addParameter(w,{category:0,name:"_x",type:d.ClassType.cloneAsInstance(I),hasDeclaredType:!0}),w.details.declaredReturnType=d.NoneType.createInstance(),C.details.fields.set("__init__",Y.Symbol.createWithType(4,w));const A=d.FunctionType.createSynthesizedInstance("__new__",1);return d.FunctionType.addParameter(A,{category:0,name:"cls",type:C,hasDeclaredType:!0}),d.FunctionType.addDefaultParameters(A),A.details.declaredReturnType=d.ClassType.cloneAsInstance(C),C.details.fields.set("__new__",Y.Symbol.createWithType(4,A)),C}else(0,d.isAnyOrUnknown)(I)||st(p.Localizer.Diagnostic.newTypeNotAClass(),h[1].node||c)}}function w2(c,h){const g=F.getFileInfo(c),S=Sr(h[0]).type;if(!(0,d.isClassInstance)(S)||!d.ClassType.isBuiltIn(S,"str"))return;const I=S.literalValue||"_",_=Sr(h[1]).type;if(!(0,d.isClassInstance)(_)||!(0,k.isTupleClass)(_)||_.tupleTypeArguments===void 0)return;const C=d.ClassType.createInstantiable(I,N.getClassFullName(c,g.moduleName,I),g.moduleName,g.filePath,0,N.getTypeSourceId(c),void 0,_.details.effectiveMetaclass);return _.tupleTypeArguments.forEach(w=>{const A=Yt(w.type);(0,d.isInstantiableClass)(A)||(0,d.isAnyOrUnknown)(A)?C.details.baseClasses.push(A):Kd(w.type,h[1].valueExpression||c)}),(0,k.computeMroLinearization)(C)||st(p.Localizer.Diagnostic.methodOrdering(),c),C}function E2(c,h){let g;if(c.constType===26?g=(h&64)!==0?d.NoneType.createType():d.NoneType.createInstance():(c.constType===33||c.constType===15||c.constType===9)&&(g=Fn(c,"bool"),g&&(0,d.isClassInstance)(g)&&(c.constType===33?g=d.ClassType.cloneWithLiteral(g,!0):c.constType===15&&(g=d.ClassType.cloneWithLiteral(g,!1)))),!!g)return{type:g,node:c}}function F2(c,h){const g=rt(c.expression);let S=Yt(g.type);const I=g.isIncomplete;if((0,d.isNever)(S))return{node:c,type:d.NeverType.createNever(),isIncomplete:I};const _={[0]:"__pos__",[33]:"__neg__",[5]:"__invert__"};let C;if(c.operator!==38&&(0,k.isOptionalType)(S)&&(Xe(F.getFileInfo(c).diagnosticRuleSet.reportOptionalOperand,o.DiagnosticRule.reportOptionalOperand,p.Localizer.Diagnostic.noneOperator().format({operator:N.printOperator(c.operator)}),c.expression),S=(0,d.removeNoneFromUnion)(S)),!g.isIncomplete){const w=(0,k.getLiteralTypeClassName)(S);w==="int"?c.operator===0?C=S:c.operator===33&&(C=(0,k.mapSubtypes)(S,A=>{const x=A;return d.ClassType.cloneWithLiteral(x,-x.literalValue)})):w==="bool"&&c.operator===38&&(C=(0,k.mapSubtypes)(S,A=>{const x=A;return d.ClassType.cloneWithLiteral(x,!x.literalValue)}))}if(!C)if(c.operator===38)C=Fn(c,"bool"),C||(C=d.UnknownType.create());else{if((0,d.isAnyOrUnknown)(S))C=S;else{const w=_[c.operator];C=Br(S,[],w,c,h)}if(!C){const w=F.getFileInfo(c);h?Xe(w.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeNotSupportUnaryOperatorBidirectional().format({operator:N.printOperator(c.operator),type:at(S),expectedType:at(h)}),c):Xe(w.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeNotSupportUnaryOperator().format({operator:N.printOperator(c.operator),type:at(S)}),c),C=d.UnknownType.create()}}return{type:C,node:c,isIncomplete:I}}function hb(c){return!!(ye[c]&&ye[c][2]||E[c])}function mb(c,h,g){const S=c.leftExpression;let I=c.rightExpression,_=!1;hb(c.operator)&&I.nodeType===7&&!I.parenthesized&&hb(I.operator)&&(mb(I,h,g),I=I.leftExpression);let C=c.operator===37||c.operator===36?h:void 0,w;c.operator===26&&h&&(0,d.isClassInstance)(h)&&d.ClassType.isBuiltIn(h,"list")&&h.typeArguments&&h.typeArguments.length>=1&&c.leftExpression.nodeType===31&&(w=h);const A=rt(S,g,C||w);let x=A.type;C||(c.operator===37||c.operator===36||c.operator===0&&c.rightExpression.nodeType===31||c.operator===6)&&(C=x);const j=rt(I,g,C);let O=j.type;if((A.isIncomplete||j.isIncomplete)&&(_=!0),c.operator===6&&!yb(x,"__or__")&&!yb(O,"__ror__")){let Ie=O,Le=x;if(!(0,d.isNoneInstance)(x)&&(0,d.isNoneInstance)(O)?Ie=d.NoneType.createType():!(0,d.isNoneInstance)(O)&&(0,d.isNoneInstance)(x)&&(Le=d.NoneType.createType()),(0,k.isUnionableType)([Le,Ie])){const et=F.getFileInfo(c);if(et.isStubFile||(g&4)!==0||et.executionEnvironment.pythonVersion>=f.PythonVersion.V3_10||(0,d.isAnyOrUnknown)(Le)||st(p.Localizer.Diagnostic.unionSyntaxIllegal(),c,c.operatorToken),!Wr(A,{allowVariadicTypeVar:!0,allowUnpackedTuples:!0})||!Wr(j,{allowVariadicTypeVar:!0,allowUnpackedTuples:!0}))return{type:d.UnknownType.create(),node:c};const Ge=(0,d.combineTypes)([Le,Ie]);return(0,d.isUnion)(Ge)&&d.TypeBase.setSpecialForm(Ge),{type:Ge,node:c}}}let K=!1;E[c.operator]===void 0&&(c.operator===12||c.operator===28?x=(0,d.removeNoneFromUnion)(x):K=(0,k.isOptionalType)(x),(c.operator===12||c.operator===28)&&(O=(0,d.removeNoneFromUnion)(O)));const ne=new l.DiagnosticAddendum,ie=!N.isWithinLoop(c);let pe=Tb(c.operator,x,O,c,h,ne,ie);if(!ne.isEmpty()||!pe){if(!_){const Ie=F.getFileInfo(c);K&&ne.getMessages().length===1?Xe(F.getFileInfo(c).diagnosticRuleSet.reportOptionalOperand,o.DiagnosticRule.reportOptionalOperand,p.Localizer.Diagnostic.noneOperator().format({operator:N.printOperator(c.operator)}),c.leftExpression):Xe(Ie.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeNotSupportBinaryOperator().format({operator:N.printOperator(c.operator),leftType:at(x),rightType:at(O)})+ne.getString(),c)}pe=d.UnknownType.create()}return{type:pe,node:c,isIncomplete:_}}function yb(c,h){if(!(0,d.isInstantiableClass)(c))return!1;const g=c.details.effectiveMetaclass;if(!g||!(0,d.isInstantiableClass)(g)||d.ClassType.isBuiltIn(g,"type"))return!1;const S=(0,k.lookUpClassMember)(g,h);return!(!S||(0,d.isInstantiableClass)(S.classType)&&d.ClassType.isBuiltIn(S.classType,"type"))}function gb(c,h){const g={[1]:["__iadd__",0],[34]:["__isub__",33],[27]:["__imul__",26],[14]:["__ifloordiv__",13],[11]:["__itruediv__",10],[25]:["__imod__",24],[30]:["__ipow__",29],[23]:["__imatmul__",22],[4]:["__iand__",3],[7]:["__ior__",6],[9]:["__ixor__",8],[18]:["__ilshift__",17],[32]:["__irshift__",31]};let S,I;const _=new l.DiagnosticAddendum,C=rt(c.leftExpression),w=C.type;let A;c.operator===7&&(A=w);const x=rt(c.rightExpression,void 0,A),j=x.type,O=!!x.isIncomplete||!!C.isIncomplete;if((0,d.isNever)(w)||(0,d.isNever)(j))I={node:c,type:d.NeverType.createNever(),isIncomplete:O};else{if(S=rr(w,void 0,(K,ne)=>rr(j,(0,k.getTypeCondition)(K),(ie,pe)=>{if((0,d.isAnyOrUnknown)(ne)||(0,d.isAnyOrUnknown)(pe))return(0,k.preserveUnknown)(ne,pe);const Ie=g[c.operator][0];let Le=Br(ne,[pe],Ie,c,h);if(!Le&&ne!==K&&(Le=Br(K,[pe],Ie,c,h)),!Le&&pe!==ie&&(Le=Br(K,[ie],Ie,c,h)),!Le){const et=g[c.operator][1],ke=!C.isIncomplete&&!x.isIncomplete&&(0,k.getUnionSubtypeCount)(w)*(0,k.getUnionSubtypeCount)(j)<Je;Le=Tb(et,ne,pe,c,h,_,ke)}return Le})),!_.isEmpty()||!S||(0,d.isNever)(S)){if(!O){const K=F.getFileInfo(c);Xe(K.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeNotSupportBinaryOperator().format({operator:N.printOperator(c.operator),leftType:at(w),rightType:at(j)})+_.getString(),c)}S=d.UnknownType.create()}I={node:c,type:S,isIncomplete:O}}return as(c.destExpression,I.type,!!I.isIncomplete,c.rightExpression),I}function Tb(c,h,g,S,I,_,C){let w,A=Yt(h);if(E[c]!==void 0){if(c===36){if(!$c(A))return h;if(!Wc(A))return g;if(A=Gv(A),(0,d.isNever)(g))return A}else if(c===37){if(!Wc(A))return h;if(!$c(A))return g;if(A=Kv(A),(0,d.isNever)(g))return A}if((0,d.isNever)(h)||(0,d.isNever)(g))return d.NeverType.createNever();c===41||c===42?(w=rr(g,void 0,(x,j)=>rr(A,(0,k.getTypeCondition)(x),O=>{if((0,d.isAnyOrUnknown)(O)||(0,d.isAnyOrUnknown)(j))return(0,k.preserveUnknown)(O,x);let K=Br(x,[O],"__contains__",S,void 0);if(!K){const ne=Es(x,!1,void 0);ne&&Ot(ne,O)&&(K=Fn(S,"bool"))}return K||_.addMessage(p.Localizer.Diagnostic.typeNotSupportBinaryOperator().format({operator:N.printOperator(c),leftType:at(O),rightType:at(x)})),K})),w&&!(0,d.isNever)(w)&&(w=Fn(S,"bool"))):w=rr(A,void 0,(x,j)=>rr(g,(0,k.getTypeCondition)(x),(O,K)=>c===36||c===37?(0,d.combineTypes)([j,K]):Fn(S,"bool")))}else if(ye[c]){if((0,d.isNever)(h)||(0,d.isNever)(g))return d.NeverType.createNever();if(C){const x=(0,k.getLiteralTypeClassName)(h);if(x&&!(0,k.getTypeCondition)(h)){const j=(0,k.getLiteralTypeClassName)(g);if(x===j&&!(0,k.getTypeCondition)(g)&&(0,k.getUnionSubtypeCount)(h)*(0,k.getUnionSubtypeCount)(g)<Je){if(x==="str"||x==="bytes")c===0&&(w=(0,k.mapSubtypes)(h,O=>(0,k.mapSubtypes)(g,K=>{const ne=O,ie=K;return d.ClassType.cloneWithLiteral(ne,ne.literalValue+ie.literalValue)})));else if(x==="int"&&(c===0||c===33||c===26||c===13||c===24)){let O=!0;w=(0,k.mapSubtypes)(h,K=>(0,k.mapSubtypes)(g,ne=>{try{const ie=K,pe=ne,Ie=BigInt(ie.literalValue),Le=BigInt(pe.literalValue);let et;if(c===0?et=Ie+Le:c===33?et=Ie-Le:c===26?et=Ie*Le:c===13?Le!==BigInt(0)&&(et=Ie/Le):c===24&&Le!==BigInt(0)&&(et=Ie%Le),et===void 0){O=!1;return}else if(typeof et=="number"&&isNaN(et)){O=!1;return}else return et===BigInt(Number(et))&&(et=Number(et)),d.ClassType.cloneWithLiteral(ie,et)}catch{O=!1;return}})),O||(w=void 0)}}}}w||(w=rr(h,void 0,(x,j)=>rr(g,(0,k.getTypeCondition)(x),(O,K)=>{if((0,d.isAnyOrUnknown)(j)||(0,d.isAnyOrUnknown)(K))return(0,k.preserveUnknown)(j,K);if(c===0&&(0,d.isClassInstance)(x)&&(0,k.isTupleClass)(x)&&x.tupleTypeArguments&&!(0,k.isUnboundedTupleClass)(x)&&(0,d.isClassInstance)(O)&&(0,k.isTupleClass)(O)&&O.tupleTypeArguments&&!(0,k.isUnboundedTupleClass)(O)&&Tt&&(0,d.isInstantiableClass)(Tt))return d.ClassType.cloneAsInstance((0,k.specializeTupleClass)(Tt,[...x.tupleTypeArguments,...O.tupleTypeArguments]));const ne=ye[c][0];let ie=Br(bl(j),[K],ne,S,I);if(!ie&&j!==x&&(ie=Br(bl(x),[K],ne,S,I)),!ie&&K!==O&&(ie=Br(bl(x),[O],ne,S,I)),!ie){const pe=ye[c][1];ie=Br(bl(K),[j],pe,S,I),!ie&&K!==O&&(ie=Br(bl(O),[j],pe,S,I)),!ie&&j!==x&&(ie=Br(bl(O),[x],pe,S,I))}return ie||(I?_.addMessage(p.Localizer.Diagnostic.typeNotSupportBinaryOperatorBidirectional().format({operator:N.printOperator(c),leftType:at(x),rightType:at(O),expectedType:at(I)})):_.addMessage(p.Localizer.Diagnostic.typeNotSupportBinaryOperator().format({operator:N.printOperator(c),leftType:at(x),rightType:at(O)}))),ie})))}return w&&(0,d.isNever)(w)?void 0:w}function Br(c,h,g,S,I){let _=!0;const C=A=>{var x,j;let O;const K=Yt(A);if((0,d.isClassInstance)(K)?O=(x=Ur(S,K,g,void 0,void 0,65,A))===null||x===void 0?void 0:x.type:(0,d.isInstantiableClass)(K)&&(O=(j=Gs(S,K,g,void 0,void 0,96))===null||j===void 0?void 0:j.type),O){const ne=h.map(pe=>({argumentCategory:0,type:pe}));let ie;return Ei(S,()=>{ie=sr(S,ne,{type:O},void 0,!0,I)}),ie.argumentErrors&&(_=!1),ie.returnType}_=!1},w=(0,k.mapSubtypes)(c,A=>{if((0,d.isAnyOrUnknown)(A))return A;if((0,d.isClassInstance)(A)&&d.ClassType.isBuiltIn(A,"LiteralString")&&sn&&(0,d.isInstantiableClass)(sn))return C(d.ClassType.cloneAsInstance(sn));if((0,d.isClassInstance)(A)||(0,d.isInstantiableClass)(A)||(0,d.isTypeVar)(A))return C(A);if((0,d.isNoneInstance)(A)&&pt&&(0,d.isClassInstance)(pt))return C(pt);if((0,d.isNoneTypeClass)(A)&&vt&&(0,d.isInstantiableClass)(vt))return C(d.ClassType.cloneAsInstance(vt));_=!1});if(!!_)return w}function bl(c){return((0,d.isFunction)(c)||(0,d.isOverloadedFunction)(c))&&pt?pt:c}function k2(c,h){let g=h;if(h&&(0,d.isUnion)(h)){let _;(0,k.doForEachSubtype)(h,C=>{if(!_){const w=Ei(c,()=>_b(c,C));w&&Ot(C,w.type)&&(_=C)}}),g=_}let S;if(g){S=new l.DiagnosticAddendum;const _=_b(c,g,S);if(_)return _}return{...D2(c,!!h),expectedTypeDiagAddendum:S}}function _b(c,h,g){if(h=(0,k.transformPossibleRecursiveTypeAlias)(h),!(0,d.isClassInstance)(h))return;const S=[],I=[];let _=!1;if(d.ClassType.isTypedDictClass(h)){const pe=(0,R.getTypedDictMembersForClass)(Bt,h);if(Om(c,S,I,!0,void 0,void 0,pe,g)&&(_=!0),d.ClassType.isTypedDictClass(h)){const Ie=(0,R.assignToTypedDict)(Bt,h,S,I,g);if(Ie)return{type:Ie,node:c,isIncomplete:_}}return}const C=Fn(c,"dict");if(!(0,d.isClassInstance)(C))return;const w=new oe.TypeVarContext((0,k.getTypeVarScopeId)(C));if(!(0,te.populateTypeVarContextBasedOnExpectedType)(Bt,C,h,w,vo(c)))return;const A=(0,k.applySolvedTypeVars)(d.ClassType.cloneAsInstantiable(C),w);if(!A.typeArguments||A.typeArguments.length!==2)return;const x=A.typeArguments[0],j=A.typeArguments[1];Om(c,S,I,!0,x,j,void 0,g)&&(_=!0);const O=(0,d.isClassInstance)(h)&&(d.ClassType.isBuiltIn(h,"dict")||d.ClassType.isBuiltIn(h,"MutableMapping")),K=xm(x,S,!1),ne=xm(j,I,!O);return!K||!ne?void 0:{type:Fn(c,"dict",[K,ne]),node:c,isIncomplete:_}}function D2(c,h){const g=h?d.AnyType.create():d.UnknownType.create();let S=g,I=g,_=[],C=[],w=!1,A=!1;Om(c,_,C,h)&&(A=!0),_=_.map(O=>(0,k.stripLiteralValue)(O)),C=C.map(O=>(0,k.stripLiteralValue)(O)),S=_.length>0?(0,d.combineTypes)(_):g,C.length>0?F.getFileInfo(c).diagnosticRuleSet.strictDictionaryInference||h?I=(0,d.combineTypes)(C):I=(0,k.areTypesSame)(C,!0)?C[0]:g:(I=g,w=!0);const x=ai(c,"dict");return{type:(0,d.isInstantiableClass)(x)?d.ClassType.cloneAsInstance(d.ClassType.cloneForSpecialization(x,[S,I],!0,void 0,void 0,w)):d.UnknownType.create(),node:c,isIncomplete:A}}function Om(c,h,g,S,I,_,C,w){let A=!1;return c.entries.forEach((x,j)=>{var O;let K=!0;if(x.nodeType===17){const ne=rt(x.keyExpression,void 0,I!=null?I:S?d.NeverType.createNever():void 0);ne.isIncomplete&&(A=!0);const ie=ne.type;let pe;C&&(0,d.isClassInstance)(ie)&&d.ClassType.isBuiltIn(ie,"str")&&(0,k.isLiteralType)(ie)&&C.has(ie.literalValue)?pe=rt(x.valueExpression,void 0,C.get(ie.literalValue).valueType):pe=rt(x.valueExpression,void 0,_!=null?_:S?d.NeverType.createNever():void 0),w&&pe.expectedTypeDiagAddendum&&w.addAddendum(pe.expectedTypeDiagAddendum);const Ie=pe.type;pe.isIncomplete&&(A=!0),(S||j<_e)&&(h.push(ie),g.push(Ie)),K=!1}else if(x.nodeType===16){const ne=rt(x.expandExpression);ne.isIncomplete&&(A=!0);const ie=ne.type;if((0,d.isAnyOrUnknown)(ie))K=!1;else{let pe=Yv(c,"SupportsKeysAndGetItem");if(pe||(pe=Vr(c,"Mapping")),pe&&(0,d.isInstantiableClass)(pe)){const Ie=new oe.TypeVarContext((0,k.getTypeVarScopeId)(pe));if(pe=d.ClassType.cloneForSpecialization(pe,pe.details.typeParameters,!0),Ot(d.ClassType.cloneAsInstance(pe),ie,void 0,Ie)){const et=(0,k.applySolvedTypeVars)(pe,Ie).typeArguments;et&&et.length>=2&&((S||j<_e)&&(h.push(et[0]),g.push(et[1])),K=!1)}else{const Le=F.getFileInfo(c);Xe(Le.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.dictUnpackIsNotMapping(),x)}}}}else if(x.nodeType===32){const ne=Qd(x,_,I),ie=ne.type;if(ne.isIncomplete&&(A=!0),(0,d.isClassInstance)(ie)&&(0,k.isTupleClass)(ie)){const pe=(O=ie.tupleTypeArguments)===null||O===void 0?void 0:O.map(Ie=>Ie.type);pe&&pe.length===2&&((S||j<_e)&&(h.push(pe[0]),g.push(pe[1])),K=!1)}}K&&(S||j<_e)&&(h.push(d.UnknownType.create()),g.push(d.UnknownType.create()))}),A}function P2(c,h){let g=h;if(h&&(0,d.isUnion)(h)){let S;(0,k.doForEachSubtype)(h,I=>{if(!S){const _=Ei(c,()=>vb(c,I));_&&Ot(I,_.type)&&(S=I)}}),g=S}if(g){const S=vb(c,g);if(S)return S}return A2(c,h!==void 0)}function vb(c,h){const g=c.nodeType===31?"list":"set";h=(0,k.transformPossibleRecursiveTypeAlias)(h);let S=!1;if(!(0,d.isClassInstance)(h))return;const I=Fn(c,g);if(!(0,d.isClassInstance)(I))return;const _=new oe.TypeVarContext((0,k.getTypeVarScopeId)(I));if(!(0,te.populateTypeVarContextBasedOnExpectedType)(Bt,I,h,_,vo(c)))return;const C=(0,k.applySolvedTypeVars)(d.ClassType.cloneAsInstantiable(I),_);if(!C.typeArguments||C.typeArguments.length!==1)return;const w=C.typeArguments[0],A=[];c.entries.forEach(K=>{let ne;K.nodeType===32?ne=Qd(K,w):ne=rt(K,void 0,w),A.push(ne.type),ne.isIncomplete&&(S=!0)});const x=(0,d.isClassInstance)(h)&&d.ClassType.isBuiltIn(h,g),j=xm(w,A,!x);return j?{type:Fn(c,g,[j]),node:c,isIncomplete:S}:void 0}function A2(c,h){const g=c.nodeType===31?"list":"set";let S=!1,I=!1,_=[];c.entries.forEach((x,j)=>{let O;x.nodeType===32?O=Qd(x):O=rt(x,void 0,h?d.NeverType.createNever():void 0),O.isIncomplete&&(I=!0),j<_e&&_.push(O.type)}),_=_.map(x=>(0,k.stripLiteralValue)(x));let C=h?d.AnyType.create():d.UnknownType.create();if(_.length>0){const x=F.getFileInfo(c);g==="list"&&x.diagnosticRuleSet.strictListInference||g==="set"&&x.diagnosticRuleSet.strictSetInference||h?C=(0,d.combineTypes)(_,ae.maxSubtypesForInferredType):C=(0,k.areTypesSame)(_,!0)?_[0]:C}else S=!0;const w=ai(c,g);return{type:(0,d.isInstantiableClass)(w)?d.ClassType.cloneAsInstance(d.ClassType.cloneForSpecialization(w,[C],!0,void 0,void 0,S)):d.UnknownType.create(),node:c,isIncomplete:I}}function xm(c,h,g){let S,I=!1;if((0,d.isTypeVar)(c)){if(c.details.isParamSpec||c.details.isVariadic)return;S=c}else S=d.TypeVarType.createInstance("__typeArg"),S.details.isSynthesized=!0,S.details.boundType=Yt(c),S.scopeId="__typeArgScopeId",I=!0;let _=new oe.TypeVarContext(S.scopeId);if(I&&_.setTypeVarType(S,g?void 0:c,c),h.every(C=>Ot(S,(0,k.stripLiteralValue)(C),void 0,_))||(_=new oe.TypeVarContext(S.scopeId),I&&_.setTypeVarType(S,g?void 0:c,c,!0),h.every(C=>Ot(S,C,void 0,_))))return(0,k.applySolvedTypeVars)(S,_)}function M2(c,h,g){rt(c.testExpression);const S=[];let I=!1;if(_a(c.ifExpression)){const _=rt(c.ifExpression,h,g);S.push(_.type),_.isIncomplete&&(I=!0)}if(_a(c.elseExpression)){const _=rt(c.elseExpression,h,g);S.push(_.type),_.isIncomplete&&(I=!0)}return{type:(0,d.combineTypes)(S),node:c,isIncomplete:I}}function N2(c){let h,g,S=!1;const I=N.getEnclosingFunction(c);if(I){const _=br(I);if(_){const C=d.FunctionType.getSpecializedReturnType(_.functionType);if(C){const w=(0,k.getGeneratorTypeArgs)(C);w&&(w.length>=1&&(h=w[0]),w.length>=2&&(g=w[1]))}}}return c.expression&&rt(c.expression,void 0,h).isIncomplete&&(S=!0),{type:g||d.UnknownType.create(),node:c,isIncomplete:S}}function R2(c){var h;const g=rt(c.expression).type;let S=(0,k.getGeneratorTypeArgs)(g),I;if(S)I=S.length>=2?S[2]:d.UnknownType.create();else if((0,d.isClassInstance)(g)&&d.ClassType.isBuiltIn(g,"Coroutine"))I=d.UnknownType.create();else{const _=(h=Hv(g,!1,c))!==null&&h!==void 0?h:d.UnknownType.create();S=(0,k.getGeneratorTypeArgs)(_),S&&(I=S.length>=2?S[2]:d.UnknownType.create())}return{type:I||d.UnknownType.create(),node:c}}function O2(c,h){let g=!1;const S=d.FunctionType.createInstance("","","",131072);S.details.typeVarScopeId=vr(c),me(c,S,0,!0);let I=[];if(h){(0,k.mapSubtypes)(h,O=>{if((0,d.isFunction)(O)&&I.push(O),(0,d.isClassInstance)(O)){const K=Ta(O,"__call__");K&&(0,d.isFunction)(K)&&I.push(K)}});const x=c.parameters.filter(O=>O.category===0&&O.defaultValue===void 0).length,j=c.parameters.filter(O=>O.category===0).length;I=I.filter(O=>{const K=O.details.parameters.filter(ie=>!!ie.name&&!ie.hasDefault).length;return O.details.parameters.some(ie=>!!ie.name&&ie.category!==0)||K>=x&&K<=j})}const _=I.length>0?I[0]:void 0;let C=!0;c.parameters.forEach((x,j)=>{let O=d.UnknownType.create();if(_&&j<_.details.parameters.length&&(O=d.FunctionType.getEffectiveParameterType(_,j)),x.name&&me(x.name,Il(c,x.category,O),0,!1),x.defaultValue&&rt(x.defaultValue,1),j>=0){let ne=!1;x.category===0&&x.name?(0,ee.isPrivateName)(x.name.value)&&(ne=!0):C=!1,C&&!ne&&S.details.parameters.length>0&&d.FunctionType.addParameter(S,{category:0,type:d.UnknownType.create()}),ne||(C=!1)}const K={category:x.category,name:x.name?x.name.value:void 0,hasDefault:!!x.defaultValue,defaultValueExpression:x.defaultValue,hasDeclaredType:!0,type:O};d.FunctionType.addParameter(S,K)}),C&&S.details.parameters.length>0&&d.FunctionType.addParameter(S,{category:0,type:d.UnknownType.create()});const w=_?di(_):void 0,A=()=>{const x=rt(c.expression,void 0,w);S.inferredReturnType=x.type,x.isIncomplete&&(g=!0)};return mt.isSpeculative(c)?Ei(c.expression,()=>{A()},!1):A(),S.details.flags&=-131073,{type:S,node:c,isIncomplete:g}}function x2(c,h){let g=!1;const S=Qd(c);S.isIncomplete&&(g=!0);const I=S.type;let _=c.forIfNodes.some(A=>A.nodeType===33&&A.isAsync||A.nodeType===34&&A.testExpression.nodeType===6),C=d.UnknownType.create();c.expression.nodeType===6&&(_=!0),!_&&h&&(0,d.isClassInstance)(h)&&d.ClassType.isBuiltIn(h,"AsyncGenerator")&&(_=!0);const w=Vr(c,_?"AsyncGenerator":"Generator");return w&&(0,d.isInstantiableClass)(w)&&(C=d.ClassType.cloneAsInstance(d.ClassType.cloneForSpecialization(w,_?[I,d.NoneType.createInstance()]:[I,d.NoneType.createInstance(),d.NoneType.createInstance()],!0))),{type:C,node:c,isIncomplete:g}}function Lm(c,h,g,S,I,_){if(c==="none")return;const C=g.value,w=(0,d.removeUnbound)(S);if((0,d.isUnknown)(w))Xe(c,h,p.Localizer.Diagnostic.typeUnknown().format({name:C}),I);else if((0,k.isPartlyUnknown)(w)&&(!_||!(0,d.isClassInstance)(S)||!S.isEmptyContainer)){const A=new l.DiagnosticAddendum;A.addMessage(p.Localizer.DiagnosticAddendum.typeOfSymbol().format({name:C,type:at(w,!0)})),Xe(c,h,p.Localizer.Diagnostic.typePartiallyUnknown().format({name:C})+A.getString(),I)}}function bb(c){var h;let g=!1;if(c.nodeType===33){const S=rt(c.iterableExpression);S.isIncomplete&&(g=!0);const I=(0,k.stripLiteralValue)(S.type),_=(h=Es(I,!!c.isAsync,c.iterableExpression))!==null&&h!==void 0?h:d.UnknownType.create(),C=c.targetExpression;as(C,_,!!S.isIncomplete,c.iterableExpression)}else(0,s.assert)(c.nodeType===34),mt.isSpeculative(c.testExpression)||rt(c.testExpression);return g}function Qd(c,h,g){let S=!1;for(const _ of c.forIfNodes)bb(_)&&(S=!0);let I=d.UnknownType.create();if(c.expression.nodeType===17){const _=rt(c.expression.keyExpression,void 0,g);_.isIncomplete&&(S=!0);let C=_.type;(!g||!(0,k.containsLiteralType)(g))&&(C=(0,k.stripLiteralValue)(C));const w=rt(c.expression.valueExpression,void 0,h);w.isIncomplete&&(S=!0);let A=w.type;(!h||!(0,k.containsLiteralType)(h))&&(A=(0,k.stripLiteralValue)(A)),I=Am([C,A])}else if(c.expression.nodeType===16)rt(c.expression.expandExpression,void 0,h);else if((0,b.isExpressionNode)(c)){const _=rt(c.expression,void 0,h);_.isIncomplete&&(S=!0),I=_.type}return{type:I,node:c,isIncomplete:S}}function L2(c){return c.startValue&&rt(c.startValue),c.endValue&&rt(c.endValue),c.stepValue&&rt(c.stepValue),{type:Fn(c,"slice"),node:c}}function Wr(c,h){if(c.typeList)if(h!=null&&h.allowTypeArgList)c.typeList.forEach(g=>{Wr(g)});else return st(p.Localizer.Diagnostic.typeArgListNotAllowed(),c.node),!1;if((0,k.isEllipsisType)(c.type)&&!(h!=null&&h.allowTypeArgList))return st(p.Localizer.Diagnostic.ellipsisContext(),c.node),!1;if((0,d.isModule)(c.type))return st(p.Localizer.Diagnostic.moduleAsType(),c.node),!1;if((0,d.isParamSpec)(c.type)&&!(h!=null&&h.allowParamSpec))return st(p.Localizer.Diagnostic.paramSpecContext(),c.node),!1;if((0,d.isVariadicTypeVar)(c.type)&&!c.type.isVariadicInUnion)if(h!=null&&h.allowVariadicTypeVar)qc(c.type,c.node);else return st(p.Localizer.Diagnostic.typeVarTupleContext(),c.node),!1;return!(h!=null&&h.allowEmptyTuple)&&c.isEmptyTupleShorthand?(st(p.Localizer.Diagnostic.zeroLengthTupleNotAllowed(),c.node),!1):(0,d.isUnpackedClass)(c.type)&&!(h!=null&&h.allowUnpackedTuples)?(st(p.Localizer.Diagnostic.unpackedArgInTypeArgument(),c.node),!1):!0}function z2(c,h){const g=d.FunctionType.createInstantiable(0);if(d.TypeBase.setSpecialForm(g),g.details.declaredReturnType=d.UnknownType.create(),g.details.typeVarScopeId=vr(h),c&&c.length>0){if(c[0].typeList){const S=c[0].typeList;let I=!1,_=!1;const C=w=>{I&&(_||(st(p.Localizer.Diagnostic.variadicTypeArgsTooMany(),w.node),_=!0)),I=!0};S.forEach((w,A)=>{let x=w.type,j=0;const O=`__p${A.toString()}`;(0,d.isVariadicTypeVar)(x)?(qc(x,w.node),j=1,C(w)):Wr(w,{allowUnpackedTuples:!0})?(0,d.isUnpackedClass)(x)&&(j=1,C(w)):x=d.UnknownType.create(),d.FunctionType.addParameter(g,{category:j,name:O,isNameSynthesized:!0,type:(0,k.convertToInstance)(x),hasDeclaredType:!0})}),d.FunctionType.addParameter(g,{category:0,isNameSynthesized:!1,type:d.UnknownType.create()})}else if((0,k.isEllipsisType)(c[0].type))d.FunctionType.addDefaultParameters(g),g.details.flags|=32768;else if((0,d.isParamSpec)(c[0].type))g.details.paramSpec=c[0].type;else if((0,d.isInstantiableClass)(c[0].type)&&d.ClassType.isBuiltIn(c[0].type,"Concatenate")){const S=c[0].type.typeArguments;S&&S.length>0&&S.forEach((I,_)=>{_===S.length-1?(d.FunctionType.addParameter(g,{category:0,isNameSynthesized:!1,type:d.UnknownType.create()}),(0,d.isParamSpec)(I)&&(g.details.paramSpec=I)):d.FunctionType.addParameter(g,{category:0,name:`__p${_}`,isNameSynthesized:!0,hasDeclaredType:!0,type:I})})}else st(p.Localizer.Diagnostic.callableFirstArg(),c[0].node);if(c.length>1){let S=c[1].type;Wr(c[1])||(S=d.UnknownType.create()),g.details.declaredReturnType=(0,k.convertToInstance)(S)}else{const S=F.getFileInfo(h);Xe(S.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.callableSecondArg(),h),g.details.declaredReturnType=d.UnknownType.create()}c.length>2&&st(p.Localizer.Diagnostic.callableExtraArgs(),c[2].node)}else d.FunctionType.addDefaultParameters(g,!0),g.details.flags|=32768;return g}function U2(c,h,g,S){if(!g)return(S&1024)!==0?(st(p.Localizer.Diagnostic.optionalExtraArgs(),h),d.UnknownType.create()):c;if(g.length>1)return st(p.Localizer.Diagnostic.optionalExtraArgs(),h),d.UnknownType.create();let I=g[0].type;Wr(g[0])?d.TypeBase.isInstantiable(I)||(Kd(I,g[0].node),I=d.UnknownType.create()):I=d.UnknownType.create();const _=(0,d.combineTypes)([I,d.NoneType.createType()]);return(0,d.isUnion)(_)&&d.TypeBase.setSpecialForm(_),_}function zm(c,h,g){const S=Fn(c,h);return(0,d.isClassInstance)(S)?d.ClassType.cloneWithLiteral(S,g):d.UnknownType.create()}function Sl(c,h,g){const S=ai(c,h);return(0,d.isInstantiableClass)(S)?d.ClassType.cloneWithLiteral(S,g):d.UnknownType.create()}function V2(c,h){if(c.items.length===0)return st(p.Localizer.Diagnostic.literalEmptyArgs(),c.baseExpression),d.UnknownType.create();const g=[];for(const S of c.items){let I;const _=S.valueExpression;if(S.argumentCategory!==0)st(p.Localizer.Diagnostic.unpackedArgInTypeArgument(),_),I=d.UnknownType.create();else if(S.name)st(p.Localizer.Diagnostic.keywordArgInTypeArgument(),_),I=d.UnknownType.create();else if(_.nodeType===48){const C=(_.strings[0].token.flags&32)!==0,w=_.strings.map(A=>A.value).join("");C?I=Sl(c,"bytes",w):I=Sl(c,"str",w)}else _.nodeType===40?!_.isImaginary&&_.isInteger&&(I=Sl(c,"int",_.value)):_.nodeType===11?_.constType===33?I=Sl(c,"bool",!0):_.constType===15?I=Sl(c,"bool",!1):_.constType===26&&(I=d.NoneType.createType()):_.nodeType===55&&_.operator===33&&_.expression.nodeType===40&&!_.expression.isImaginary&&_.expression.isInteger&&(I=Sl(c,"int",-_.expression.value));if(!I){const C=rt(_);if((0,d.isClassInstance)(C.type)&&d.ClassType.isEnumClass(C.type)&&C.type.literalValue!==void 0)I=d.ClassType.cloneAsInstantiable(C.type);else{let w=!0;(0,k.doForEachSubtype)(C.type,A=>{(!(0,d.isInstantiableClass)(A)||A.literalValue===void 0)&&(w=!1)}),w&&(I=C.type)}}I||(st(p.Localizer.Diagnostic.literalUnsupportedType(),S),I=d.UnknownType.create()),g.push(I)}return(0,d.combineTypes)(g)}function B2(c,h,g,S){var I;if(S&131072)return st(p.Localizer.Diagnostic.classVarNotAllowed(),h),d.AnyType.create();if(g){if(g.length===0)return st(p.Localizer.Diagnostic.classVarFirstArgMissing(),h),d.UnknownType.create();if(g.length>1)return st(p.Localizer.Diagnostic.classVarTooManyArgs(),g[1].node),d.UnknownType.create()}else return c;const _=g[0].type;if((0,k.requiresSpecialization)(_,!0,!0)){const C=F.getFileInfo(h);Xe(C.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.classVarWithTypeVar(),(I=g[0].node)!==null&&I!==void 0?I:h)}return _}function W2(c,h,g,S){if(g){if(g.length!==1)return st(p.Localizer.Diagnostic.typeGuardArgCount(),c),d.UnknownType.create()}else return(S&1024)!==0&&st(p.Localizer.Diagnostic.typeGuardArgCount(),c),h;const I=g.map(_=>(0,k.convertToInstance)(Wr(_)?_.type:d.UnknownType.create()));return d.ClassType.cloneForSpecialization(h,I,!0)}function $2(c,h,g){var S;const I=F.getFileInfo(h);g&&Xe(I.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeArgsExpectingNone().format({name:c.details.name}),(S=g[0].node)!==null&&S!==void 0?S:h);const _=N.getEnclosingClass(h),C=_?ti(_):void 0;if(!C)return Xe(I.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.selfTypeContext(),h),d.UnknownType.create();const w=N.getEnclosingFunction(h);if(w){const A=Xd(w,!0);if(!!!N.getEnclosingFunction(w)){if(A&4)return Xe(I.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.selfTypeContext(),h),d.UnknownType.create();if(w.parameters.length>0){const j=N.getTypeAnnotationForParameter(w,0);if(j&&!N.isNodeContainedWithin(h,j)){const O=zr(j,{associateTypeVarsWithScope:!0,disallowRecursiveTypeAlias:!0});(!(0,d.isTypeVar)(O)||!O.details.isSynthesizedSelf)&&Xe(I.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.selfTypeWithTypedSelfOrCls(),h)}}}}return(0,k.synthesizeTypeVarForSelfCls)(C.classType,!0)}function j2(c,h,g,S,I){var _;if(!S&&(I&1024)===0)return c;if(!S||S.length!==1)return st(g?p.Localizer.Diagnostic.requiredArgCount():p.Localizer.Diagnostic.notRequiredArgCount(),h),c;const C=S[0].type,w=N.getEnclosingClass(h,!0),A=w?ti(w):void 0;let x=!1;return A&&(0,d.isInstantiableClass)(A.classType)&&d.ClassType.isTypedDictClass(A.classType)&&((_=h.parent)===null||_===void 0?void 0:_.nodeType)===54&&h.parent.typeAnnotation===h&&(x=!0),(I&1048576)!==0&&(x=!0),x?C:(st(g?p.Localizer.Diagnostic.requiredNotInTypedDict():p.Localizer.Diagnostic.notRequiredNotInTypedDict(),h),d.ClassType.cloneForSpecialization(c,[(0,k.convertToInstance)(C)],!!S))}function q2(c,h,g,S){if(!g&&(S&1024)===0)return c;if(!g||g.length!==1)return st(p.Localizer.Diagnostic.unpackArgCount(),h),d.UnknownType.create();let I=g[0].type;(0,d.isUnion)(I)&&I.subtypes.length===1&&(I=I.subtypes[0]);const _=F.getFileInfo(h);return(S&2097152)!==0?(0,d.isInstantiableClass)(I)&&!I.includeSubclasses&&(0,k.isTupleClass)(I)?d.ClassType.cloneForUnpacked(I):(0,d.isVariadicTypeVar)(I)&&!I.isVariadicUnpacked?d.TypeVarType.cloneForUnpacked(I):(Xe(_.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.unpackExpectedTypeVarTuple(),h),d.UnknownType.create()):(S&8388608)!==0?(0,d.isInstantiableClass)(I)&&d.ClassType.isTypedDictClass(I)?d.ClassType.cloneForUnpacked(I):(Xe(_.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.unpackExpectedTypedDict(),h),d.UnknownType.create()):(Xe(_.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.unpackNotAllowed(),h),d.UnknownType.create())}function G2(c,h,g,S){return S&16?(st(p.Localizer.Diagnostic.finalContext(),h),d.AnyType.create()):!g||g.length===0?c:(g.length>1&&st(p.Localizer.Diagnostic.finalTooManyArgs(),h),g[0].type)}function K2(c,h,g){return!g||g.length===0?st(p.Localizer.Diagnostic.concatenateTypeArgsMissing(),c):g.forEach((S,I)=>{I===g.length-1?(0,d.isParamSpec)(S.type)||st(p.Localizer.Diagnostic.concatenateParamSpecMissing(),S.node):(0,d.isParamSpec)(S.type)&&st(p.Localizer.Diagnostic.paramSpecContext(),S.node)}),ba(h,g,void 0,!0)}function H2(c,h){return h&&h.length<2&&st(p.Localizer.Diagnostic.annotatedTypeArgMissing(),c),!h||h.length===0?d.AnyType.create():d.TypeBase.cloneForAnnotated(h[0].type)}function ba(c,h,g,S=!1,I=!1){const _=d.ClassType.isTupleClass(c);if(h)if(_&&h.length===1&&h[0].isEmptyTupleShorthand)h=[];else{let A=!1;const x=O=>{A&&(j||(st(p.Localizer.Diagnostic.variadicTypeArgsTooMany(),O.node),j=!0)),A=!0};let j=!1;h.forEach((O,K)=>{(0,k.isEllipsisType)(O.type)?_?h.length!==2||K!==1?st(p.Localizer.Diagnostic.ellipsisSecondArg(),O.node):(0,d.isTypeVar)(h[0].type)&&(0,d.isVariadicTypeVar)(h[0].type)&&!h[0].type.isVariadicInUnion&&st(p.Localizer.Diagnostic.typeVarTupleContext(),h[0].node):st(p.Localizer.Diagnostic.ellipsisContext(),O.node):(0,d.isParamSpec)(O.type)&&S||((0,d.isVariadicTypeVar)(O.type)&&g===void 0?(x(O),qc(O.type,O.node)):g===void 0&&(0,d.isUnpacked)(O.type)?(x(O),Wr(O,{allowUnpackedTuples:!0})):Wr(O))})}let C=h?h.map(A=>(0,k.convertToInstance)(A.type)):[];if(g!==void 0){if(h&&C.length>g)st(p.Localizer.Diagnostic.typeArgsTooMany().format({name:c.aliasName||c.details.name,expected:g,received:C.length}),h[g].node),C=C.slice(0,g);else if(C.length<g)for(;C.length<g;)C.push(d.UnknownType.create())}let w;if(_){const A=[];h?h.forEach((x,j)=>{j===1&&(0,k.isEllipsisType)(C[j])?A.length===1&&!A[0].isUnbounded?A[0]={type:A[0].type,isUnbounded:!0}:st(p.Localizer.Diagnostic.ellipsisSecondArg(),x.node):(0,d.isUnpackedClass)(x.type)&&x.type.tupleTypeArguments?(0,a.appendArray)(A,x.type.tupleTypeArguments):A.push({type:C[j],isUnbounded:!1})}):A.push({type:d.UnknownType.create(),isUnbounded:!0}),w=(0,k.specializeTupleClass)(c,A,h!==void 0,!1)}else w=d.ClassType.cloneForSpecialization(c,C,h!==void 0);return I||d.TypeBase.setSpecialForm(w),w}function Y2(c,h,g,S){const I=[];if(!g)return(S&1024)!==0?(st(p.Localizer.Diagnostic.unionTypeArgCount(),h),d.NeverType.createNever()):c;for(const C of g){let w=C.type;Wr(C,{allowVariadicTypeVar:!0,allowUnpackedTuples:!0})?d.TypeBase.isInstantiable(w)||(Kd(w,C.node),w=d.UnknownType.create()):w=d.UnknownType.create(),(0,d.isUnpackedClass)(C.type)&&C.type.tupleTypeArguments?C.type.tupleTypeArguments.forEach(A=>{I.push((0,k.convertToInstantiable)(A.type))}):((0,d.isTypeVar)(w)&&(0,d.isVariadicTypeVar)(w)&&w.isVariadicUnpacked&&(w=d.TypeVarType.cloneForUnpacked(w,!0)),I.push(w))}I.length===1&&!(0,d.isVariadicTypeVar)(I[0])&&!(0,d.isUnpacked)(I[0])&&!(0,d.isNoneInstance)(I[0])&&st(p.Localizer.Diagnostic.unionTypeArgCount(),h);const _=(0,d.combineTypes)(I);return(0,d.isUnion)(_)&&d.TypeBase.setSpecialForm(_),_}function Q2(c,h,g,S){if(!g)return(S&263168)!==0&&st(p.Localizer.Diagnostic.genericTypeArgMissing(),h),c;const I=[];return g&&(g.length===0&&st(p.Localizer.Diagnostic.genericTypeArgMissing(),h),g.forEach(_=>{(0,d.isTypeVar)(_.type)?(I.some(C=>(0,d.isTypeSame)(C,_.type))&&st(p.Localizer.Diagnostic.genericTypeArgUnique(),_.node),I.push(_.type)):st(p.Localizer.Diagnostic.genericTypeArgTypeVar(),_.node)})),ba(c,g,void 0,!0)}function Um(c,h){var g,S,I,_;const C=N.getEnclosingClass(c,!0);if(C){const w=ti(C);if(w&&d.ClassType.isEnumClass(w.classType)){let A=((g=c.parent)===null||g===void 0?void 0:g.nodeType)===3&&c.parent.leftExpression===c||((S=c.parent)===null||S===void 0?void 0:S.nodeType)===54&&c.parent.valueExpression===c&&((I=c.parent.parent)===null||I===void 0?void 0:I.nodeType)===3||F.getFileInfo(c).isStubFile&&((_=c.parent)===null||_===void 0?void 0:_.nodeType)===54&&c.parent.valueExpression===c;(0,ee.isSingleDunderName)(c.value)&&(A=!1),(c.value==="name"||c.value==="value")&&(A=!1);const x=h();if((0,d.isClassInstance)(x)&&x.details.fields.get("__get__")&&(A=!1),A)return d.ClassType.cloneAsInstance(d.ClassType.cloneWithLiteral(w.classType,new d.EnumLiteral(w.classType.details.name,c.value,x)))}}}function Vm(c,h,g){if(!d.TypeBase.isInstantiable(c)||(0,k.isTypeAliasPlaceholder)(c))return c;let S=[];(!(0,d.isTypeVar)(c)||d.TypeBase.isAnnotated(c))&&(0,k.doForEachSubtype)(c,A=>{(0,k.addTypeVarsToListIfUnique)(S,(0,k.getTypeVarArgumentsRecursive)(A))}),S=S.filter(A=>!A.details.isSynthesized),S=S.map(A=>d.TypeBase.isInstance(A)?A:(0,k.convertToInstance)(A));const I=S.filter(A=>(0,d.isVariadicTypeVar)(A));I.length>1&&st(p.Localizer.Diagnostic.variadicTypeParamTooManyAlias().format({names:I.map(A=>`"${A.details.name}"`).join(", ")}),g);const _=F.getFileInfo(h),C=vr(h),w=S.filter(A=>A.scopeId!==C&&A.scopeType===0);return w.length>0&&st(p.Localizer.Diagnostic.genericTypeAliasBoundTypeVar().format({names:w.map(A=>`${A.details.name}`).join(", ")}),g),d.TypeBase.cloneForTypeAlias(c,h.value,`${_.moduleName}.${h.value}`,C,S.length>0?S:void 0)}function Sb(c,h,g){const S=F.getFileInfo(c);let I=d.ClassType.createInstantiable(h,N.getClassFullName(c,S.moduleName,h),S.moduleName,S.filePath,3,0,void 0,void 0);S.isTypingExtensionsStubFile&&(I.details.flags|=65536);const _=g.alias||"object";let C;if(g.module==="builtins")C=ai(c,_);else if(g.module==="collections")C=jd(c,_,["collections"]);else if(g.module==="self"){const w=$r(c,_,!1);w&&(C=Fs(w.symbol),(0,d.isInstantiableClass)(C)&&d.ClassType.isBuiltIn(C,"_TypedDict")&&(C.details.flags&=-513))}return C&&(0,d.isInstantiableClass)(C)?g.alias?I=d.ClassType.cloneForTypingAlias(C,h):(I.details.baseClasses.push(C),I.details.effectiveMetaclass=C.details.effectiveMetaclass,(0,k.computeMroLinearization)(I)):(I.details.baseClasses.push(d.UnknownType.create()),I.details.effectiveMetaclass=d.UnknownType.create(),(0,k.computeMroLinearization)(I)),I}function J2(c){if(!c.parent||c.parent.nodeType!==54||c.parent.valueExpression.nodeType!==38)return;const g=c.parent.valueExpression.value,I=new Map([["Tuple",{alias:"tuple",module:"builtins"}],["Generic",{alias:"",module:"builtins"}],["Protocol",{alias:"",module:"builtins"}],["Callable",{alias:"",module:"builtins"}],["Type",{alias:"type",module:"builtins"}],["ClassVar",{alias:"",module:"builtins"}],["Final",{alias:"",module:"builtins"}],["Literal",{alias:"",module:"builtins"}],["TypedDict",{alias:"_TypedDict",module:"self"}],["Union",{alias:"",module:"builtins"}],["Optional",{alias:"",module:"builtins"}],["Annotated",{alias:"",module:"builtins"}],["TypeAlias",{alias:"",module:"builtins"}],["Concatenate",{alias:"",module:"builtins"}],["TypeGuard",{alias:"",module:"builtins"}],["StrictTypeGuard",{alias:"",module:"builtins"}],["Unpack",{alias:"",module:"builtins"}],["Required",{alias:"",module:"builtins"}],["NotRequired",{alias:"",module:"builtins"}],["Self",{alias:"",module:"builtins"}],["NoReturn",{alias:"",module:"builtins"}],["Never",{alias:"",module:"builtins"}],["LiteralString",{alias:"",module:"builtins"}]]).get(g);if(I){const _=Ce(c,0);if(_)return(0,s.assert)((0,d.isInstantiableClass)(_)),_;const C=Sb(c,g,I);return me(c,C,0,!1),C}}function X2(c){if(c.leftExpression.nodeType!==38)return;const g=c.leftExpression.value;if(g==="Any")return d.AnyType.create();const I=new Map([["overload",{alias:"",module:"builtins"}],["TypeVar",{alias:"",module:"builtins"}],["_promote",{alias:"",module:"builtins"}],["no_type_check",{alias:"",module:"builtins"}],["NoReturn",{alias:"",module:"builtins"}],["Never",{alias:"",module:"builtins"}],["Counter",{alias:"Counter",module:"collections"}],["List",{alias:"list",module:"builtins"}],["Dict",{alias:"dict",module:"builtins"}],["DefaultDict",{alias:"defaultdict",module:"collections"}],["Set",{alias:"set",module:"builtins"}],["FrozenSet",{alias:"frozenset",module:"builtins"}],["Deque",{alias:"deque",module:"collections"}],["ChainMap",{alias:"ChainMap",module:"collections"}],["OrderedDict",{alias:"OrderedDict",module:"collections"}]]).get(g);if(I)return rt(c.rightExpression),Sb(c,g,I)}function Jd(c){var h;const g=F.getFileInfo(c);if(Ce(c,0))return;let S=0;g.isStubFile&&(S|=256),(c.rightExpression.nodeType===38||c.rightExpression.nodeType===35)&&(S|=2),Cm(c.leftExpression)&&(S|=131304,S&=-3);let I=Ce(c.rightExpression,S),_=!1,C;if(!I&&((g.isTypingStubFile||g.isTypingExtensionsStubFile)&&(I=X2(c),I&&me(c.rightExpression,I,0,!1)),!I)){const w=wm(c.leftExpression,{method:"set"});let A,x=!1;if(Cm(c.leftExpression))A=c.leftExpression.valueExpression;else if(c.leftExpression.nodeType===38){const ie=$r(c.leftExpression,c.leftExpression.value,!1);if(ie){const pe=ie.symbol.getDeclarations();pe.length===1&&(0,D.isPossibleTypeAliasDeclaration)(pe[0])&&(A=c.leftExpression,x=!0)}}let j;if(A){j=d.TypeVarType.createInstantiable(`__type_alias_${A.value}`),j.details.isSynthesized=!0,j.details.recursiveTypeAliasName=A.value;const ie=vr(A);j.details.recursiveTypeAliasScopeId=ie,j.scopeId=ie,me(c,j,void 0,!1),me(c.leftExpression,j,void 0,!1),c.leftExpression.nodeType===54&&me(c.leftExpression.valueExpression,j,void 0,!1)}const O=rt(c.rightExpression,S,w);let K=O.type;C=O.expectedTypeDiagAddendum,O.isIncomplete&&(_=!0);const ne=(0,W.evaluateStaticBoolExpression)(c.rightExpression,g.executionEnvironment,g.definedConstants);if(ne!==void 0){const ie=Fn(c,"bool");(0,d.isClassInstance)(ie)&&(K=d.ClassType.cloneWithLiteral(ie,ne))}w&&Ot(w,K)&&((0,d.isAnyOrUnknown)(K)||(K=Jm(w,K))),I=K,c.leftExpression.nodeType===38&&!c.typeAnnotationComment&&(I=Um(c.leftExpression,()=>I)||I),A&&(we(c),we(c.leftExpression),c.leftExpression.nodeType===54&&we(c.leftExpression.valueExpression),(!x||d.TypeBase.isInstantiable(I)&&!(0,d.isUnknown)(I))&&(I=Vm(I,A,c.rightExpression),(0,k.isTypeAliasRecursive)(j,I)&&(Xe(g.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeAliasIsRecursiveDirect().format({name:A.value}),c.rightExpression),I=d.UnknownType.create()),j.details.boundType=I,j.details.recursiveTypeParameters=(h=I.typeAliasInfo)===null||h===void 0?void 0:h.typeParameters),j.details.illegalRecursionDetected&&Xe(g.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeAliasIsRecursiveIndirect().format({name:A.value}),c.leftExpression))}as(c.leftExpression,I,_,c.rightExpression,!0,!0,C),me(c,I,0,_)}function Ib(c){if(Ce(c,0))return;const h=gb(c,void 0);me(c,h.type,0,!!h.isIncomplete)}function ti(c){const h=Ce(c.name,0);if(h)return(0,d.isInstantiableClass)(h)?{classType:h,decoratedType:Ce(c,0)||d.UnknownType.create()}:void 0;const g=ue.getScopeForNode(c),S=F.getFileInfo(c);let I=0;((g==null?void 0:g.type)===4||S.isTypingStubFile||S.isTypingExtensionsStubFile||S.isBuiltInStubFile)&&(I|=1,S.isTypingExtensionsStubFile&&(I|=65536),c.name.value==="property"&&(I|=2048),c.name.value==="tuple"&&(I|=524288)),S.isStubFile&&(I|=8388608);const _=d.ClassType.createInstantiable(c.name.value,N.getClassFullName(c,S.moduleName,c.name.value),S.moduleName,S.filePath,I,0,void 0,void 0,N.getDocString(c.suite.statements));_.details.typeVarScopeId=vr(c);const C=g==null?void 0:g.lookUpSymbol(c.name.value);let w;const A=F.getDeclaration(c);A&&(w=A),w&&C&&un(C,w,_),_.details.flags|=131072,me(c,_,void 0,!1),me(c.name,_,void 0,!1);const x=[];let j,O;const K=[];let ne,ie=272960;if(S.isStubFile&&(ie|=4),c.arguments.forEach(Ve=>{if(Ve.argumentCategory===0)if(Ve.name)if(Ve.name.value==="metaclass")ne?st(p.Localizer.Diagnostic.metaclassDuplicate(),Ve):ne=Ve.valueExpression;else if(Ve.name.value==="total"&&d.ClassType.isTypedDictClass(_)){const Ze=(0,W.evaluateStaticBoolExpression)(Ve.valueExpression,S.executionEnvironment,S.definedConstants);Ze===void 0?st(p.Localizer.Diagnostic.typedDictTotalParam(),Ve.valueExpression):Ze||(_.details.flags|=256)}else K.push({argumentCategory:0,node:Ve,name:Ve.name,valueExpression:Ve.valueExpression});else{let Ze=rt(Ve.valueExpression,ie).type;if((0,d.isUnion)(Ze)&&(Ze=(0,d.removeUnbound)(Ze)),!(0,d.isAnyOrUnknown)(Ze)&&!(0,d.isUnbound)(Ze)&&((0,d.isInstantiableClass)(Ze)?(d.ClassType.isPartiallyEvaluated(Ze)&&Ki.push({dependency:Ze,callback:()=>nA(_,c.name)}),d.ClassType.isBuiltIn(Ze,"Protocol")&&(!S.isStubFile&&!d.ClassType.isTypingExtensionClass(Ze)&&S.executionEnvironment.pythonVersion<f.PythonVersion.V3_7&&st(p.Localizer.Diagnostic.protocolIllegal(),Ve.valueExpression),_.details.flags|=8192),d.ClassType.isBuiltIn(Ze,"property")&&(_.details.flags|=2048),S.executionEnvironment.pythonVersion>=f.PythonVersion.V3_6&&d.ClassType.isBuiltIn(Ze,"NamedTuple")&&(_.details.flags|=16777252),d.ClassType.isBuiltIn(Ze,"TypedDict")||d.ClassType.isTypedDictClass(Ze)?_.details.flags|=128:d.ClassType.isTypedDictClass(_)&&!d.ClassType.isTypedDictClass(Ze)&&(!(0,d.isInstantiableClass)(Ze)||!d.ClassType.isBuiltIn(Ze,"Generic"))&&st(p.Localizer.Diagnostic.typedDictBaseClass(),Ve),(0,k.derivesFromClassRecursive)(Ze,_,!0)&&(st(p.Localizer.Diagnostic.baseClassCircular(),Ve),Ze=d.UnknownType.create())):(Xe(S.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.baseClassInvalid(),Ve),Ze=d.UnknownType.create())),(0,d.isUnknown)(Ze)&&Xe(S.diagnosticRuleSet.reportUntypedBaseClass,o.DiagnosticRule.reportUntypedBaseClass,p.Localizer.Diagnostic.baseClassUnknown(),Ve),_.details.baseClasses.some(yt=>(0,d.isInstantiableClass)(yt)&&(0,d.isInstantiableClass)(Ze)&&d.ClassType.isSameGenericClass(Ze,yt))&&Xe(S.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.duplicateBaseClass(),Ve.name||Ve),_.details.baseClasses.push(Ze),(0,d.isInstantiableClass)(Ze)&&(d.ClassType.isEnumClass(Ze)&&(_.details.flags|=1048576),(d.ClassType.supportsAbstractMethods(Ze)||d.ClassType.isProtocolClass(Ze)&&!d.ClassType.isBuiltIn(Ze))&&(_.details.flags|=512),d.ClassType.isPropertyClass(Ze)&&(_.details.flags|=2048),d.ClassType.isFinal(Ze))){const yt=zb(Ze);st(p.Localizer.Diagnostic.baseClassFinal().format({type:yt}),Ve.valueExpression)}(0,k.addTypeVarsToListIfUnique)(x,(0,k.getTypeVarArgumentsRecursive)(Ze)),(0,d.isInstantiableClass)(Ze)&&(d.ClassType.isBuiltIn(Ze,"Generic")?j||(O&&Xe(S.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.duplicateGenericAndProtocolBase(),Ve.valueExpression),j=[],(0,k.addTypeVarsToListIfUnique)(j,(0,k.getTypeVarArgumentsRecursive)(Ze))):d.ClassType.isBuiltIn(Ze,"Protocol")&&Ze.typeArguments&&Ze.typeArguments.length>0&&(O||(j&&Xe(S.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.duplicateGenericAndProtocolBase(),Ve.valueExpression),O=[],(0,k.addTypeVarsToListIfUnique)(O,(0,k.getTypeVarArgumentsRecursive)(Ze)))))}}),_.details.baseClasses.length>1){let Ve=!1,Ze=!1;_.details.baseClasses.forEach(yt=>{(0,d.isInstantiableClass)(yt)&&(d.ClassType.isBuiltIn(yt,"NamedTuple")?Ve=!0:d.ClassType.isBuiltIn(yt,"Generic")||(Ze=!0))}),Ve&&Ze&&Xe(S.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.namedTupleMultipleInheritance(),c.name)}!d.ClassType.isBuiltIn(_,"object")&&_.details.baseClasses.filter(Ve=>(0,d.isClass)(Ve)).length===0&&_.details.baseClasses.push(ai(c,"object")),j=j!=null?j:O,j&&Z2(c.name,x,j),_.details.typeParameters=j||x;const pe=_.details.typeParameters.filter(Ve=>(0,d.isVariadicTypeVar)(Ve));pe.length>1&&st(p.Localizer.Diagnostic.variadicTypeParamTooManyClass().format({names:pe.map(Ve=>`"${Ve.details.name}"`).join(", ")}),c.name,y.TextRange.combine(c.arguments)||c.name),(0,k.computeMroLinearization)(_)||st(p.Localizer.Diagnostic.methodOrdering(),c.name);const Ie=ue.getScopeForNode(c.suite);_.details.fields=(Ie==null?void 0:Ie.symbolTable)||new Map;const Le=Ie==null?void 0:Ie.getSlotsNames();if(Le&&(_.details.localSlotsNames=Le),!S.isStubFile&&_.details.typeParameters.length===0){const Ve=_.details.fields.get("__init__");if(Ve){const Ze=Ve.getTypedDeclarations();if(Ze.length===1&&Ze[0].type===3){const yt=Ze[0].node,tn=yt.parameters;if(tn.length>1&&!tn.some((Et,Ke)=>!!N.getTypeAnnotationForParameter(yt,Ke))){const Et=tn.filter((Ke,nt)=>nt>0&&Ke.name&&Ke.category===0);Et.length>0&&(_.details.flags|=16384,_.details.typeParameters=Et.map(Ke=>{const nt=d.TypeVarType.createInstance(`__type_of_${Ke.name.value}`);return nt.details.isSynthesized=!0,nt.scopeId=vr(yt),nt.details.boundType=d.UnknownType.create(),d.TypeVarType.cloneForScopeId(nt,vr(c),c.name.value,0)}))}}}}if(_.details.typeParameters.length===0&&!d.ClassType.isBuiltIn(_,"type")&&(_.details.baseClasses.some(Ve=>(0,d.isInstantiableClass)(Ve)&&d.ClassType.hasCustomClassGetItem(Ve))||_.details.fields.has("__class_getitem__"))&&(_.details.flags|=262144),ne){const Ve=rt(ne,ie).type;((0,d.isInstantiableClass)(Ve)||(0,d.isUnknown)(Ve))&&((0,k.requiresSpecialization)(Ve)&&Xe(S.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.metaclassIsGeneric(),ne),_.details.declaredMetaclass=Ve,(0,d.isInstantiableClass)(Ve)&&(d.ClassType.isBuiltIn(Ve,"EnumMeta")?_.details.flags|=1048576:d.ClassType.isBuiltIn(Ve,"ABCMeta")&&(_.details.flags|=512)))}const et=Cb(_,c.name);let ke=_,Ge=!1;for(let Ve=c.decorators.length-1;Ve>=0;Ve--){const Ze=c.decorators[Ve],yt=eA(ke,_,Ze);(0,k.containsUnknown)(yt)?Ge||(Xe(S.diagnosticRuleSet.reportUntypedClassDecorator,o.DiagnosticRule.reportUntypedClassDecorator,p.Localizer.Diagnostic.classDecoratorTypeUnknown(),c.decorators[Ve].expression),Ge=!0):ke=yt}let ut;if((0,d.isInstantiableClass)(et)&&et.details.classDataClassTransform)ut=et.details.classDataClassTransform;else{const Ve=_.details.mro.find(Ze=>(0,d.isClass)(Ze)&&Ze.details.classDataClassTransform!==void 0);Ve&&(ut=Ve.details.classDataClassTransform)}if(ut&&((0,U.applyDataClassDefaultBehaviors)(_,ut),(0,U.applyDataClassClassBehaviorOverrides)(Bt,_,K)),_.details.flags&=-131073,tA(_),d.ClassType.isTypedDictClass(_)&&(0,R.synthesizeTypedDictClassMethods)(Bt,c,_,(0,d.isClass)(ke)&&d.ClassType.isFinal(ke)),d.ClassType.isDataClass(_)){const Ve=d.ClassType.isSkipSynthesizedDataClassInit(_);let Ze=Ve;if(!Ve){const Et=(0,k.lookUpClassMember)(_,"__init__",2);if(Et){const Ke=Fi(Et);(0,d.isFunction)(Ke)&&d.FunctionType.isSynthesizedMethod(Ke)||(Ze=!0)}}let yt=!1;const tn=(0,k.lookUpClassMember)(_,"__hash__",2);if(tn){const Et=Fi(tn);(0,d.isFunction)(Et)&&!d.FunctionType.isSynthesizedMethod(Et)&&(yt=!0)}(0,U.synthesizeDataClassMethods)(Bt,c,_,Ve,Ze,yt)}if(_.details.localSlotsNames){let Ve=!0;const Ze=[..._.details.localSlotsNames];_.details.baseClasses.forEach(yt=>{(0,d.isInstantiableClass)(yt)?!d.ClassType.isBuiltIn(yt,"object")&&!d.ClassType.isBuiltIn(yt,"type")&&!d.ClassType.isBuiltIn(yt,"Generic")&&(yt.details.inheritedSlotsNames===void 0?Ve=!1:(0,a.appendArray)(Ze,yt.details.inheritedSlotsNames)):Ve=!1}),Ve&&(_.details.inheritedSlotsNames=Ze)}return me(c.name,_,0,!1),me(c,ke,0,!1),iA(c,_,K),d.ClassType.isBuiltIn(_,"UnionType")&&(ct=d.ClassType.cloneAsInstance(_)),{classType:_,decoratedType:ke}}function Cb(c,h){let g=c.details.declaredMetaclass,S=!1;if(!g||(0,d.isInstantiableClass)(g))for(const I of c.details.baseClasses)if((0,d.isInstantiableClass)(I)){const _=I.details.effectiveMetaclass||vt;if(_&&(0,d.isInstantiableClass)(_))g?(0,k.derivesFromClassRecursive)(_,g,!1)?g=_:(0,k.derivesFromClassRecursive)(g,_,!1)||S||(Xe(F.getFileInfo(h).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.metaclassConflict(),h),S=!0):g=_;else{g=_?d.UnknownType.create():void 0;break}}else{g=d.UnknownType.create();break}if(!g){const I=ai(h,"type");g=I&&(0,d.isInstantiableClass)(I)?I:d.UnknownType.create()}return c.details.effectiveMetaclass=g,g}function Z2(c,h,g){const S=h.filter(I=>!g.some(_=>_.details.name===I.details.name));if(S.length>0){const I=new l.DiagnosticAddendum;I.addMessage(p.Localizer.DiagnosticAddendum.typeVarsMissing().format({names:S.map(_=>`"${_.details.name}"`).join(", ")})),Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeVarsNotInGenericOrProtocol()+I.getString(),c)}}function eA(c,h,g){let I=F.getFileInfo(g).isStubFile?4:0;g.expression.nodeType!==9&&(I|=2);const _=rt(g.expression,I).type;if(g.expression.nodeType===9){const C=rt(g.expression.leftExpression,I|2).type;(0,d.isFunction)(C)&&(C.details.name==="__dataclass_transform__"||C.details.builtInName==="dataclass_transform")&&(h.details.classDataClassTransform=(0,U.validateDataClassTransformDecorator)(Bt,g.expression))}if((0,d.isOverloadedFunction)(_)){const C=(0,U.getDataclassDecoratorBehaviors)(_);if(C)return(0,U.applyDataClassDecorator)(Bt,h,C,void 0),c}else if((0,d.isFunction)(_)){if(_.details.builtInName==="final")return h.details.flags|=4096,c;if(_.details.builtInName==="runtime_checkable")return h.details.flags|=32768,c;let C,w;if(g.expression.nodeType===9){w=g.expression;const A=rt(w.leftExpression,I|2).type;C=(0,U.getDataclassDecoratorBehaviors)(A)}else{const A=rt(g.expression,I).type;C=(0,U.getDataclassDecoratorBehaviors)(A)}if(C)return(0,U.applyDataClassDecorator)(Bt,h,C,w),c}return qv(g,c)}function tA(c){Ki.forEach(h=>{h.dependency===c&&h.callback()}),Ki=Ki.filter(h=>h.dependency!==c)}function nA(c,h){(0,k.computeMroLinearization)(c)||st(p.Localizer.Diagnostic.methodOrdering(),h),Cb(c,h)}function iA(c,h,g){const S=g.length>0?g[0].node.name:c.name,I=vl(S,h,!1,"__init_subclass__",{method:"get"},void 0,133,h);if(I){const _=I.type;_&&sr(S,g,{type:_},void 0,!1,d.NoneType.createInstance())}else if(h.details.effectiveMetaclass&&(0,d.isClass)(h.details.effectiveMetaclass)){const _=(0,k.lookUpClassMember)(h.details.effectiveMetaclass,"__new__",32);if(_){const C=Fi(_);if((0,d.isFunction)(C)){const w=(0,k.getParameterListDetails)(C);if(w.firstKeywordOnlyIndex!==void 0){const A=new Map;for(let j=w.firstKeywordOnlyIndex;j<w.params.length;j++){const O=w.params[j];O.param.category===0&&O.param.name&&A.set(O.param.name,j)}g.forEach(j=>{var O,K,ne;if(j.argumentCategory===0&&j.name){const ie=(O=A.get(j.name.value))!==null&&O!==void 0?O:w.kwargsIndex;if(ie!==void 0){const pe=w.params[ie],Ie={paramCategory:pe.param.category,paramType:d.FunctionType.getEffectiveParameterType(C,pe.index),requiresTypeVarMatching:!1,argument:j,errorNode:(K=j.valueExpression)!==null&&K!==void 0?K:S};Yd(Ie,new oe.TypeVarContext,C,!0,!0,!1,void 0),A.delete(j.name.value)}else Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.paramNameMissing().format({name:j.name.value}),(ne=j.name)!==null&&ne!==void 0?ne:S)}});const x=[];if(A.forEach((j,O)=>{w.params[j].param.hasDefault||x.push(O)}),x.length>0){const j=x.map(O=>`"${O}"`).join(", ");Xe(F.getFileInfo(S).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,x.length===1?p.Localizer.Diagnostic.argMissingForParam().format({name:j}):p.Localizer.Diagnostic.argMissingForParams().format({names:j}),S)}}}}}g.forEach(_=>{_.valueExpression&&rt(_.valueExpression)})}function br(c){const h=F.getFileInfo(c),g=Ce(c.name,0);if(g)return(0,d.isFunction)(g)?{functionType:g,decoratedType:Ce(c,0)||d.UnknownType.create()}:void 0;let S;const I=F.getDeclaration(c);I&&(S=I);const _=N.getEnclosingClass(c,!0);let C;if(_){const Ve=ti(_);if(!Ve)return;C=Ve.classType}let w=Xd(c,!!_);S!=null&&S.isGenerator&&(w|=16),_&&c.name.value==="__class_getitem__"&&(w|=2),h.isStubFile?w|=2048:h.isInPyTypedPackage&&(w|=4096),c.isAsync&&(w|=512);const A=d.FunctionType.createInstance(c.name.value,I2(c,h.moduleName,c.name.value),h.moduleName,w|131072,N.getDocString(c.suite.statements));A.details.typeVarScopeId=vr(c),(c.name.value==="__init__"||c.name.value==="__new__")&&_&&(A.details.constructorTypeVarScopeId=vr(_)),(h.isBuiltInStubFile||h.isTypingStubFile||h.isTypingExtensionsStubFile)&&(A.details.builtInName=c.name.value),A.details.declaration=S;const x=ue.getScopeForNode(c),j=x==null?void 0:x.lookUpSymbolRecursive(c.name.value);S&&j&&un(j.symbol,S,A),me(c,A,void 0,!1),me(c.name,A,void 0,!1);const O=C&&d.ClassType.isPseudoGenericClass(C)&&c.name.value==="__init__",K=[];let ne=0,ie=0;if(C&&(A.details.flags&4)===0&&(ie=1),c.functionAnnotationComment&&!c.functionAnnotationComment.isParamListEllipsis){const Ve=c.parameters.length-ie,Ze=c.functionAnnotationComment.paramTypeAnnotations.length;ie>0&&Ze===c.parameters.length?ie=0:Ze!==Ve&&st(p.Localizer.Diagnostic.annotatedParamCountMismatch().format({expected:Ve,received:Ze}),c.functionAnnotationComment)}const pe=Ve=>{if(Ve.name){const Ze=$r(Ve.name,Ve.name.value,!1);Ze&&_o(h,Ze.symbol,Ve.name)}};let Ie=!0;const Le=C&&(d.FunctionType.isClassMethod(A)||d.FunctionType.isInstanceMethod(A)||d.FunctionType.isConstructorMethod(A)),et=Le?1:0;if(c.parameters.forEach((Ve,Ze)=>{let yt,tn,Et=!1,Ke;if(Ve.name&&(Ze===0&&Le||d.FunctionType.isAbstractMethod(A)||C&&d.ClassType.isProtocolClass(C))&&pe(Ve),Ve.typeAnnotation)Ke=Ve.typeAnnotation;else if(Ve.typeAnnotationComment)Ke=Ve.typeAnnotationComment;else if(c.functionAnnotationComment&&!c.functionAnnotationComment.isParamListEllipsis){const gt=Ze-ie;gt>=0&&gt<c.functionAnnotationComment.paramTypeAnnotations.length&&(Ke=c.functionAnnotationComment.paramTypeAnnotations[gt])}if(Ke&&(tn=$d(Ke,Ve.category),(0,d.isVariadicTypeVar)(tn)&&!tn.isVariadicUnpacked&&(st(p.Localizer.Diagnostic.unpackedTypeVarTupleExpected().format({name1:tn.details.name,name2:tn.details.name}),Ke),tn=d.UnknownType.create())),!tn&&O&&Ze>0&&Ve.category===0&&Ve.name&&(tn=C.details.typeParameters[ne],ne++),tn){const gt=Bm(Ve,tn);gt!==tn&&(tn=gt,Et=!0)}let nt;if(Ve.defaultValue&&(nt=rt(Ve.defaultValue,1,tn).type),tn){if(Ve.defaultValue&&nt){const gt=new l.DiagnosticAddendum,xt=new oe.TypeVarContext(A.details.typeVarScopeId);if(C&&C.details.typeVarScopeId!==void 0&&(c.name.value==="__init__"||c.name.value==="__new__")&&xt.addSolveForScope(C.details.typeVarScopeId),!Ot(tn,nt,gt,xt)){const fn=Xe(h.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.paramAssignmentMismatch().format({sourceType:at(nt),paramType:at(tn)})+gt.getString(),Ve.defaultValue);if(Et&&Ke){const Kt={action:"pyright.addoptionalforparam",offsetOfTypeNode:Ke.start+1};fn==null||fn.addAction(Kt)}}}yt=tn}if(Ze>=et){let gt=!1;Ve.category===0&&Ve.name?(0,ee.isPrivateName)(Ve.name.value)&&(gt=!0):Ie=!1,Ie&&!gt&&A.details.parameters.length>et&&d.FunctionType.addParameter(A,{category:0,type:d.UnknownType.create()}),gt||(Ie=!1)}let bt=!1;yt||(bt=!0,yt=wb(c,A.details.flags,Ze,C));const Pt={category:Ve.category,name:Ve.name?Ve.name.value:void 0,hasDefault:!!Ve.defaultValue,defaultValueExpression:Ve.defaultValue,defaultType:nt,type:yt!=null?yt:d.UnknownType.create(),typeAnnotation:Ke,hasDeclaredType:!!Ke,isTypeInferred:bt};if(d.FunctionType.addParameter(A,Pt),Ve.name){const gt=Il(c,Ve.category,Pt.type);K.push(gt)}else K.push(Pt.type)}),Ie&&A.details.parameters.length>et&&d.FunctionType.addParameter(A,{category:0,type:d.UnknownType.create()}),K.forEach((Ve,Ze)=>{const yt=c.parameters[Ze].name;yt&&((0,d.isUnknown)(Ve)&&(A.details.flags|=16384),me(yt,Ve,0,!1))}),K.length>=2){const Ve=K[K.length-2],Ze=K[K.length-1];(0,d.isParamSpec)(Ve)&&Ve.paramSpecAccess==="args"&&(0,d.isParamSpec)(Ze)&&Ze.paramSpecAccess==="kwargs"&&(A.details.flags|=32768)}if(c.returnTypeAnnotation){A.details.declaredReturnType=d.UnknownType.create();const Ve=zr(c.returnTypeAnnotation,{associateTypeVarsWithScope:!0,disallowRecursiveTypeAlias:!0});A.details.declaredReturnType=Ve}else if(c.functionAnnotationComment){A.details.declaredReturnType=d.UnknownType.create();const Ve=zr(c.functionAnnotationComment.returnTypeAnnotation,{associateTypeVarsWithScope:!0,disallowRecursiveTypeAlias:!0});A.details.declaredReturnType=Ve}else h.isStubFile&&(c.name.value==="__init__"?A.details.declaredReturnType=d.NoneType.createInstance():A.details.declaredReturnType=d.UnknownType.create());(h.isStubFile||N.isSuiteEmpty(c.suite))&&A.details.declaredReturnType&&(0,d.isClassInstance)(A.details.declaredReturnType)&&d.ClassType.isBuiltIn(A.details.declaredReturnType,["Generator","AsyncGenerator","AwaitableGenerator"])&&(A.details.flags|=16),A.details.flags&=-131073;let Ge=c.isAsync?aA(c,A):A,ut=!1;for(let Ve=c.decorators.length-1;Ve>=0;Ve--){const Ze=c.decorators[Ve],yt=rA(Ge,A,Ze,c);(0,k.containsUnknown)(yt)?ut||(Xe(h.diagnosticRuleSet.reportUntypedFunctionDecorator,o.DiagnosticRule.reportUntypedFunctionDecorator,p.Localizer.Diagnostic.functionDecoratorTypeUnknown(),c.decorators[Ve].expression),ut=!0):Ge=yt}return(0,d.isFunction)(Ge)&&(d.FunctionType.isOverloaded(Ge)&&c.parameters.forEach(Ve=>{pe(Ve)}),Ge=sA(c,Ge)),me(c.name,A,0,!1),me(c,Ge,0,!1),{functionType:A,decoratedType:Ge}}function Bm(c,h){var g;if(((g=c.defaultValue)===null||g===void 0?void 0:g.nodeType)===11&&c.defaultValue.constType===26&&!(0,k.isOptionalType)(h)&&!F.getFileInfo(c).diagnosticRuleSet.strictParameterNoneValue)h=(0,d.combineTypes)([h,d.NoneType.createInstance()]);else if((0,d.isTypeVar)(h)&&c.defaultValue&&h.scopeType===1){const S=rt(c.defaultValue,1,h).type;(0,d.isAny)(S)||(h=(0,d.combineTypes)([h,S]))}return h}function wb(c,h,g,S){var I;if(S){if(g===0&&(h&4)===0){const A=(h&3)!==0;return(0,k.synthesizeTypeVarForSelfCls)(S,A)}const C=c.name.value,w=(0,k.lookUpClassMember)(S,C,1);if(w){const A=w.symbol.getDeclarations();if(A.length===1&&A[0].type===3){const x=A[0].node;if(x.parameters.length===c.parameters.length&&x.parameters.every((j,O)=>{var K,ne;const ie=c.parameters[O];return((K=ie.name)===null||K===void 0?void 0:K.value)===((ne=j.name)===null||ne===void 0?void 0:ne.value)&&ie.category===j.category})){const j=x.parameters[g],O=(I=j.typeAnnotation)!==null&&I!==void 0?I:j.typeAnnotationComment;if(O){let K=$d(O,c.parameters[g].category);const ne=F.getFileInfo(c);return ne.isInPyTypedPackage&&!ne.isStubFile&&(K=d.TypeBase.cloneForAmbiguousType(K)),K}}}}}const _=c.parameters[g].defaultValue;if(_){const C=rt(_,1).type;let w;if((0,d.isNoneInstance)(C)?w=(0,d.combineTypes)([d.NoneType.createInstance(),d.UnknownType.create()]):(!(0,d.isClassInstance)(C)||!d.ClassType.isBuiltIn(C,["tuple","list","set","dict"]))&&(w=(0,k.stripLiteralValue)(C)),w){const A=F.getFileInfo(c);A.isInPyTypedPackage&&!A.isStubFile&&(w=d.TypeBase.cloneForAmbiguousType(w))}return w}}function Il(c,h,g){switch(h){case 0:return g;case 1:return(0,d.isTypeVar)(g)&&g.paramSpecAccess?g:(0,d.isUnpackedClass)(g)?d.ClassType.cloneForUnpacked(g,!1):Tt&&(0,d.isInstantiableClass)(Tt)?d.ClassType.cloneAsInstance((0,k.specializeTupleClass)(Tt,[{type:g,isUnbounded:!(0,d.isVariadicTypeVar)(g)}],!0,!0)):d.UnknownType.create();case 2:{if((0,d.isTypeVar)(g)&&g.paramSpecAccess||(0,d.isClassInstance)(g)&&d.ClassType.isTypedDictClass(g)&&g.isUnpacked)return g;const S=ai(c,"dict"),I=Fn(c,"str");return(0,d.isInstantiableClass)(S)&&(0,d.isClassInstance)(I)?d.ClassType.cloneAsInstance(d.ClassType.cloneForSpecialization(S,[I,g],!0)):d.UnknownType.create()}}}function Xd(c,h){const g=F.getFileInfo(c);let S=0;c.name.value==="__new__"&&h&&(S|=1),c.name.value==="__init_subclass__"&&h&&(S|=2);for(const I of c.decorators){let _=g.isStubFile?4:0;I.expression.nodeType!==9&&(_|=2);const w=rt(I.expression,_).type;(0,d.isFunction)(w)?w.details.builtInName==="abstractmethod"?h&&(S|=8):w.details.builtInName==="final"&&(S|=8192):(0,d.isInstantiableClass)(w)&&(d.ClassType.isBuiltIn(w,"staticmethod")?h&&(S|=4):d.ClassType.isBuiltIn(w,"classmethod")&&h&&(S|=2))}return S}function rA(c,h,g,S){let _=F.getFileInfo(g).isStubFile?4:0;g.expression.nodeType!==9&&(_|=2);const w=rt(g.expression,_).type;if(((0,d.isInstantiableClass)(w)&&d.ClassType.isSpecialBuiltIn(w,"overload")||(0,d.isFunction)(w)&&w.details.builtInName==="overload")&&(0,d.isFunction)(c))return c.details.flags|=256,h.details.flags|=256,c;if(g.expression.nodeType===9){const x=rt(g.expression.leftExpression,_|2).type;if((0,d.isFunction)(x)&&(x.details.name==="__dataclass_transform__"||x.details.builtInName==="dataclass_transform"))return h.details.decoratorDataClassBehaviors=(0,U.validateDataClassTransformDecorator)(Bt,g.expression),c}let A=qv(g,c);if((0,d.isFunction)(w)){if(w.details.builtInName==="abstractmethod")return c;if(g.expression.nodeType===35){const x=rt(g.expression.leftExpression,_|2).type;if((0,k.isProperty)(x)){const j=g.expression.memberName.value;if(j==="setter")return(0,d.isFunction)(c)?((0,L.validatePropertyMethod)(Bt,c,g),(0,L.clonePropertyWithSetter)(Bt,x,c,S)):c;if(j==="deleter")return(0,d.isFunction)(c)?((0,L.validatePropertyMethod)(Bt,c,g),(0,L.clonePropertyWithDeleter)(Bt,x,c,S)):c}}}else if((0,d.isInstantiableClass)(w)){if(d.ClassType.isBuiltIn(w))switch(w.details.name){case"classmethod":case"staticmethod":{const x=w.details.name==="classmethod"?2:4;if((0,d.isFunction)(c)&&(c.details.flags&x)===0){const j=d.FunctionType.clone(c);return j.details.flags&=-8,j.details.flags|=x,j}return c}}if(d.ClassType.isPropertyClass(w)){if((0,d.isFunction)(c))return(0,L.validatePropertyMethod)(Bt,c,g),(0,L.createProperty)(Bt,g,w,c);if((0,d.isClassInstance)(c)){const x=Ta(c,"__call__");return x&&(0,d.isFunction)(x)?(0,L.createProperty)(Bt,g,w,x):d.UnknownType.create()}}}return(0,d.isFunction)(c)&&(0,d.isFunction)(A)&&(A=d.FunctionType.clone(A),d.FunctionType.isOverloaded(c)&&(A.details.flags|=256),A.details.docString||(A.details.docString=c.details.docString)),A}function sA(c,h){let g;const S=F.getDeclaration(c);S&&(g=S);const I=$r(c,c.name.value,!1);if(I){const _=I.symbol.getDeclarations(),C=_.findIndex(w=>w===g);if(C>0){for(let ne=0;ne<C;ne++){const ie=_[ne];ie.type===3&&br(ie.node)}const w=[],A=_[C-1];if(A.type===3){const ne=br(A.node);ne&&((0,d.isFunction)(ne.decoratedType)?d.FunctionType.isOverloaded(ne.decoratedType)&&w.push(ne.decoratedType):(0,d.isOverloadedFunction)(ne.decoratedType)&&(0,a.appendArray)(w,ne.decoratedType.overloads))}if(w.push(h),w.length===1)return w[0];const x=d.OverloadedFunctionType.create(w),j=w[w.length-2],O=d.FunctionType.isAbstractMethod(j),K=d.FunctionType.isAbstractMethod(h);return O!==K&&Xe(F.getFileInfo(c).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.overloadAbstractMismatch().format({name:c.name.value}),c.name),x}}return h}function aA(c,h){const g=d.FunctionType.clone(h);return h.details.declaredReturnType&&(g.details.declaredReturnType=Zd(c,h.details.declaredReturnType,d.FunctionType.isGenerator(h))),g.details.flags|=1024,g}function Zd(c,h,g){let S;if((0,d.isClassInstance)(h)&&d.ClassType.isBuiltIn(h))if(h.details.name==="Generator"){const I=Vr(c,"AsyncGenerator");if(I&&(0,d.isInstantiableClass)(I)){const _=[],C=h.typeArguments;C&&C.length>0&&_.push(C[0]),C&&C.length>1&&_.push(C[1]),S=d.ClassType.cloneAsInstance(d.ClassType.cloneForSpecialization(I,_,!0))}}else["AsyncGenerator","AsyncIterator","AsyncIterable"].some(I=>I===h.details.name)&&(S=h);if(!S||!g){const I=Vr(c,"Coroutine");I&&(0,d.isInstantiableClass)(I)?S=d.ClassType.cloneAsInstance(d.ClassType.cloneForSpecialization(I,[d.AnyType.create(),d.AnyType.create(),h],!0)):S=d.UnknownType.create()}return S}function Eb(c,h){var g;if(c.returnTypeAnnotation||((g=c.functionAnnotationComment)===null||g===void 0?void 0:g.returnTypeAnnotation))return;let I=Ce(c.suite,0),_=!1;if(I)return{type:I,isIncomplete:_};if(qe.has(c.id)&&qe.size<De)I=d.UnknownType.create(),_=!0;else{qe.set(c.id,!0);try{let C;const w=F.getDeclaration(c);w&&(C=w);const A=!Fm(c),x=Fm(c.suite);if(F.getFileInfo(c).isStubFile)I=d.UnknownType.create();else{if(A)h||oA(C)?I=d.UnknownType.create():I=d.NeverType.createNoReturn();else{const j=[];C!=null&&C.returnStatements&&C.returnStatements.forEach(O=>{var K;if(_a(O))if(O.returnExpression){const ne=rt(O.returnExpression);ne.isIncomplete&&(_=!0),j.push((K=ne.type)!==null&&K!==void 0?K:d.UnknownType.create())}else j.push(d.NoneType.createInstance())}),!A&&x&&j.push(d.NoneType.createInstance()),I=(0,d.combineTypes)(j),I=(0,d.removeUnbound)(I)}if(C!=null&&C.isGenerator){const j=[];let O=!1;C.yieldStatements&&C.yieldStatements.forEach(ie=>{if(_a(ie))if(ie.nodeType===61){const pe=rt(ie.expression).type;if((0,d.isClassInstance)(pe)&&d.ClassType.isBuiltIn(pe,"Coroutine"))j.push(),O=!0;else{const Ie=Es(pe,!1,ie);j.push(Ie!=null?Ie:d.UnknownType.create())}}else if(ie.expression){const pe=rt(ie.expression).type;j.push(pe!=null?pe:d.UnknownType.create())}else j.push(d.NoneType.createInstance())}),j.length===0&&j.push(d.NoneType.createInstance());const K=(0,d.combineTypes)(j),ne=Vr(c,O?"AwaitableGenerator":"Generator");if(ne&&(0,d.isInstantiableClass)(ne)){const ie=[];O&&ie.push(d.AnyType.create()),ie.push(K,d.NoneType.createInstance(),(0,d.isNever)(I)?d.NoneType.createInstance():I),I=d.ClassType.cloneAsInstance(d.ClassType.cloneForSpecialization(ne,ie,!0))}else I=d.UnknownType.create()}}me(c.suite,I,0,_)}finally{qe.delete(c.id)}}return I?{type:I,isIncomplete:_}:void 0}function oA(c){if(!c||!c.isMethod||c.returnStatements||c.yieldStatements||!c.raiseStatements)return!1;for(const h of c.raiseStatements){if(!h.typeExpression||h.valueExpression)return!1;const g=rt(h.typeExpression).type,S=(0,d.isInstantiableClass)(g)||(0,d.isClassInstance)(g)?g:void 0;if(!S||!d.ClassType.isBuiltIn(S,"NotImplementedError"))return!1}return!0}function lA(c){var h;if(Ce(c,0))return;const g=rt(c.iterableExpression),S=(h=Es(g.type,!!c.isAsync,c.iterableExpression))!==null&&h!==void 0?h:d.UnknownType.create();as(c.targetExpression,S,!!g.isIncomplete,c.targetExpression),me(c,S,0,!!g.isIncomplete)}function cA(c){if((0,s.assert)(c.typeExpression!==void 0),Ce(c,0))return;const h=rt(c.typeExpression).type;function g(I,_){var C;if(I=Yt(I),(0,d.isAnyOrUnknown)(I))return I;if((0,d.isInstantiableClass)(I))return d.ClassType.cloneAsInstance(I);if((0,d.isClassInstance)(I)){const w=(C=Es(I,!1,_))!==null&&C!==void 0?C:d.UnknownType.create();return(0,k.mapSubtypes)(w,A=>(0,d.isAnyOrUnknown)(A)?A:d.UnknownType.create())}return d.UnknownType.create()}let S=(0,k.mapSubtypes)(h,I=>{const _=(0,k.getSpecializedTupleType)(I);if(_&&_.tupleTypeArguments){const C=_.tupleTypeArguments.map(w=>g(w.type,c.typeExpression));return(0,d.combineTypes)(C)}return g(I,c.typeExpression)});c.isExceptGroup&&(S=Fn(c,"ExceptionGroup",[S])),c.name&&as(c.name,S,!1,c.name),me(c,S,0,!1)}function uA(c){if(Ce(c,0))return;const h=rt(c.expression);let g=h.type;const S=c.parent&&c.parent.nodeType===58&&!!c.parent.isAsync;if((0,k.isOptionalType)(g)){const w=F.getFileInfo(c);Xe(w.diagnosticRuleSet.reportOptionalContextManager,o.DiagnosticRule.reportOptionalContextManager,p.Localizer.Diagnostic.noneNotUsableWith(),c.expression),g=(0,d.removeNoneFromUnion)(g)}const I=S?"__aenter__":"__enter__",_=(0,k.mapSubtypes)(g,w=>{var A;if(w=Yt(w),(0,d.isAnyOrUnknown)(w))return w;const x=new l.DiagnosticAddendum,j=new l.DiagnosticAddendum;if((0,d.isClassInstance)(w)){const K=(A=Ur(c.expression,w,I,{method:"get"},x))===null||A===void 0?void 0:A.type;if(K){let ne;return(0,d.isFunction)(K)?ne=di(K):ne=d.UnknownType.create(),S&&(ne=Em(ne,c)),ne}S||Ur(c.expression,w,"__aenter__",{method:"get"},x)&&j.addMessage(p.Localizer.DiagnosticAddendum.asyncHelp())}const O=F.getFileInfo(c);return Xe(O.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeNotUsableWith().format({type:at(w),method:I})+j.getString(),c.expression),d.UnknownType.create()}),C=S?"__aexit__":"__exit__";(0,k.doForEachSubtype)(g,w=>{if(w=Yt(w),(0,d.isAnyOrUnknown)(w))return;const A=new l.DiagnosticAddendum;if((0,d.isClassInstance)(w)&&Ur(c.expression,w,C,{method:"get"},A))return;const x=F.getFileInfo(c);Xe(x.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeNotUsableWith().format({type:at(w),method:C}),c.expression)}),c.target&&as(c.target,_,!!h.isIncomplete,c.target),me(c,_,0,!!h.isIncomplete)}function dA(c){var h;if(Ce(c,0))return;let g;if(c.alias?g=c.alias:g=c.module.nameParts[0],!g)return;let S=(h=$m(c,g.value))!==null&&h!==void 0?h:d.UnknownType.create();const I=Ce(c,0);I&&(0,d.isModule)(I)&&S&&(0,d.isTypeSame)(S,I)&&(S=I),jc(g,S,!1,!1),me(c,S,0,!1)}function fA(c){var h;if(Ce(c,0))return;const g=c.alias||c.name,S=F.getFileInfo(c);if(((h=c.alias)===null||h===void 0?void 0:h.value)===c.name.value){const _=$r(c,c.name.value,!0);_&&_o(S,_.symbol,c)}let I=$m(c,g.value);if(!I){const _=c.parent;(0,s.assert)(_&&_.nodeType===22),(0,s.assert)(!_.isWildcardImport);const C=F.getImportInfo(_.module);if(C&&C.isImportFound&&!C.isNativeLib){const w=C.resolvedPaths[C.resolvedPaths.length-1],A=tt(w);let x=!1;if(A){if(x=!0,S.executionEnvironment.pythonVersion>=f.PythonVersion.V3_7||S.isStubFile){const j=A.symbolTable.get("__getattr__");if(j){const O=Fs(j);(0,d.isFunction)(O)&&(I=di(O),x=!1)}}}else w||(x=!0);x&&Xe(S.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.importSymbolUnknown().format({name:c.name.value}),c.name)}I||(I=d.UnknownType.create())}jc(g,I,!1,!1),me(c,I,0,!1)}function pA(c){if(Ce(c,0))return;const h=rt(c.subjectExpression);let g=h.type;for(const S of c.cases)S.guardExpression||(g=(0,J.narrowTypeBasedOnPattern)(Bt,g,S.pattern,!1));me(c,g,0,!!h.isIncomplete)}function Wm(c){if(Ce(c,0))return;if(!c.parent||c.parent.nodeType!==63){(0,s.fail)("Expected parent of case statement to be match statement");return}const h=rt(c.parent.subjectExpression);let g=h.type;for(const I of c.parent.cases){if(I===c)break;I.guardExpression||(g=(0,J.narrowTypeBasedOnPattern)(Bt,g,I.pattern,!1))}let S=!1;(0,k.doForEachSubtype)(Yt(g),I=>{(0,d.isClassInstance)(I)&&d.ClassType.isBuiltIn(I,"object")&&(S=!0)}),g=(0,J.narrowTypeBasedOnPattern)(Bt,g,c.pattern,!0),(0,J.assignTypeToPatternTargets)(Bt,g,!!h.isIncomplete,S,c.pattern),me(c,g,0,!!h.isIncomplete)}function hA(c){if(Ce(c,0))return;const h=c.module.nameParts[0];let g=$m(c,h.value);if(!g)return;const S=Ce(c,0);S&&(0,d.isModule)(S)&&g&&(0,d.isTypeSame)(g,S)&&(g=S),jc(h,g,!1,!1),me(c,g,0,!1)}function $m(c,h){const g=$r(c,h,!0);if(!g)return;const S=g.symbol.getDeclarations().filter(w=>N.isNodeContainedWithin(c,w.node)&&w.type===6);let I=S.length>0?S[S.length-1]:void 0;if(I||(I=g.symbol.getDeclarations().find(w=>w.type===6)),!I)return;(0,s.assert)(I.type===6);const _=F.getFileInfo(c),C=Db(I,!0,_.isStubFile);if(!!C){if(!C.declaration)return Ue.evaluateUnknownImportsAsAny?d.AnyType.create():d.UnknownType.create();if(c.nodeType===23&&(C.isPrivate&&Xe(_.diagnosticRuleSet.reportPrivateUsage,o.DiagnosticRule.reportPrivateUsage,p.Localizer.Diagnostic.privateUsedOutsideOfModule().format({name:c.name.value}),c.name),C.privatePyTypedImporter)){const w=new l.DiagnosticAddendum;C.privatePyTypedImported&&w.addMessage(p.Localizer.DiagnosticAddendum.privateImportFromPyTypedSource().format({module:C.privatePyTypedImported})),Xe(_.diagnosticRuleSet.reportPrivateImportUsage,o.DiagnosticRule.reportPrivateImportUsage,p.Localizer.Diagnostic.privateImportFromPyTypedModule().format({name:c.name.value,module:C.privatePyTypedImporter})+w.getString(),c.name)}return Km(g.symbol,I)}}function Hc(c){var h,g,S;let I=c,_=c;function C(j){var O,K,ne,ie,pe;return j.nodeType===41&&((O=j.parent)===null||O===void 0?void 0:O.nodeType)===30||j.nodeType===1&&(((K=j.parent)===null||K===void 0?void 0:K.nodeType)===9||((ne=j.parent)===null||ne===void 0?void 0:ne.nodeType)===24)||((ie=j.parent)===null||ie===void 0?void 0:ie.nodeType)===54||((pe=j.parent)===null||pe===void 0?void 0:pe.nodeType)===41&&(j===j.parent.typeAnnotation||j===j.parent.typeAnnotationComment)||j.nodeType===7&&j.operator===6?!0:j.nodeType===9||j.nodeType===24||j.nodeType===15||j.nodeType===27||j.nodeType===31||j.nodeType===30||j.nodeType===35||j.nodeType===45||j.nodeType===49||j.nodeType===48||j.nodeType===52||j.nodeType===56||j.nodeType===17||j.nodeType===16||j.nodeType===32||j.nodeType===33||j.nodeType===34||j.nodeType===65||j.nodeType===67||j.nodeType===68||j.nodeType===74||j.nodeType===66||j.nodeType===69||j.nodeType===70||j.nodeType===73||j.nodeType===71||j.nodeType===72}if(c.nodeType===38&&c.parent){if(c.parent.nodeType===28&&c.parent.name===c){br(c.parent);return}else if(c.parent.nodeType===10&&c.parent.name===c){ti(c.parent);return}else if(c.parent.nodeType===29||c.parent.nodeType===39){rt(c,4);return}}for(;_;){const j=C(_);if(!j&&!(0,b.isExpressionNode)(_))break;j&&(I=_),_=_.parent}const w=I.parent;if(w.nodeType===3){I===w.typeAnnotationComment?zr(I,{isVariableAnnotation:!0,allowFinal:N.isFinalAllowedForAssignmentTarget(w.leftExpression),allowClassVar:N.isClassVarAllowedForAssignmentTarget(w.leftExpression)}):Jd(w);return}else if(w.nodeType===14){Dm(I);return}if(w.nodeType===5){Ib(w);return}if(w.nodeType===13){((h=w.parent)===null||h===void 0?void 0:h.nodeType)===10?ti(w.parent):((g=w.parent)===null||g===void 0?void 0:g.nodeType)===28&&br(w.parent);return}const A=j=>{const O=j.parent;if((O==null?void 0:O.nodeType)===3&&O.leftExpression===w)Jd(O);else{const K=zr(j.typeAnnotation,{isVariableAnnotation:!0,allowFinal:N.isFinalAllowedForAssignmentTarget(j.valueExpression),allowClassVar:N.isClassVarAllowedForAssignmentTarget(j.valueExpression)});me(j.valueExpression,K,0,!1)}};if(w.nodeType===64&&I!==w.guardExpression){Wm(w);return}if(w.nodeType===54){A(w);return}if(w.nodeType===41&&I!==w.defaultValue){ef(w);return}if(w.nodeType===28&&I===w.returnTypeAnnotation){zr(I,{associateTypeVarsWithScope:!0,disallowRecursiveTypeAlias:!0});return}if(w.nodeType===37||w.nodeType===1&&I===w.name)return;if(w.nodeType===1&&((S=w.parent)===null||S===void 0?void 0:S.nodeType)===10){ti(w.parent);return}if(w.nodeType===44&&w.returnExpression){const j=N.getEnclosingFunction(c),O=j?Ab(j):void 0;rt(w.returnExpression,0,O);return}const x=(0,b.isExpressionNode)(w)&&w.nodeType!==0?w:I;if(x.nodeType===54)A(x);else{const O=F.getFileInfo(x).isStubFile?4:0;rt(x,O)}}function ef(c){if(!c.name)return;const h=c.parent;if(h.nodeType===30){Hc(h);return}(0,s.assert)(h.nodeType===28);const g=h,S=g.parameters.findIndex(C=>C===c),I=N.getTypeAnnotationForParameter(g,S);if(I){const C=g.parameters[S],w=$d(I,g.parameters[S].category),A=Il(c,c.category,Bm(C,w));me(c.name,A,0,!1);return}const _=N.getEnclosingClass(g,!0);if(_){const C=ti(_);if(C){const w=Xd(g,!0),A=wb(g,w,S,C.classType);if(A){me(c.name,Il(c,c.category,A),0,!1);return}}}me(c.name,Il(c,c.category,d.UnknownType.create()),0,!1)}function tf(c){jv(c);let h=c;for(;h;){switch(h.nodeType){case 3:{if(!(h.parent&&(h.parent.nodeType===3||h.parent.nodeType===4||h.parent.nodeType===5)&&h.parent.rightExpression===h)){Jd(h);return}break}case 4:{rt(h);return}case 5:{Ib(h);return}case 10:{ti(h);return}case 41:{ef(h);return}case 30:{Hc(h);return}case 28:{br(h);return}case 26:{lA(h);return}case 25:{cA(h);return}case 59:{uA(h);return}case 33:{const g=h.parent;if((0,s.assert)(g.nodeType===32),h===g.expression)Hc(g);else for(const S of g.forIfNodes)if(bb(S),S===h)break;return}case 21:{dA(h);return}case 23:{fA(h);return}case 22:{hA(h);return}case 64:{Wm(h);return}}h=h.parent}(0,s.fail)("Unexpected statement")}function Yc(c,h){let g=Ce(c,void 0);if(g)return{node:c,type:g};const S=Yn;try{if(Yn||(Yn=new Map),h(),g=Ce(c,void 0),g)return{node:c,type:g};if(g=Yn.get(c.id),g)return{node:c,type:g,isIncomplete:!0};Yn=S}catch(I){throw Yn=S,I}}function Fb(c){let h=dt.get(c);return h||(h=Ca.createCodeFlowAnalyzer(),dt.set(c,h)),h}function nf(c,h,g,S,I,_=!1){var C;const w=(0,G.createKeyForReference)(c),A=N.getExecutionScopeNode((C=I==null?void 0:I.parent)!==null&&C!==void 0?C:c),x=F.getCodeFlowExpressions(A);if(!x||!x.has(w))return{type:void 0,isIncomplete:!1};if(gl(c))return{type:void 0,isIncomplete:!0};let j;Gt(A)?j=mn():j=Fb(A.id);const O=F.getFlowNode(I!=null?I:c);return O===void 0?{type:void 0,isIncomplete:!1}:j.getTypeFromCodeFlow(O,c,h,g,S,_)}function jm(c,h,g,S){if(d.ClassType.isSpecialBuiltIn(c)){const O=c.aliasName||c.details.name;switch(O){case"Callable":return z2(h,S);case"Never":return h&&h.length>0&&st(p.Localizer.Diagnostic.typeArgsExpectingNone().format({name:"Never"}),h[0].node),d.NeverType.createNever();case"NoReturn":return h&&h.length>0&&st(p.Localizer.Diagnostic.typeArgsExpectingNone().format({name:"NoReturn"}),h[0].node),d.NeverType.createNoReturn();case"Optional":return U2(c,S,h,g);case"Type":{if((h==null?void 0:h.length)===1&&(0,d.isAnyOrUnknown)(h[0].type)&&vt&&(0,d.isInstantiableClass)(vt))return vt;let K=ba(c,h,1);return(0,d.isInstantiableClass)(K)&&(K=(0,k.explodeGenericClass)(K)),K}case"ClassVar":return B2(c,S,h,g);case"Protocol":return ba(c,h,void 0,!0);case"Tuple":return ba(c,h,void 0);case"Union":return Y2(c,S,h,g);case"Generic":return Q2(c,S,h,g);case"Final":return G2(c,S,h,g);case"Annotated":return H2(S,h);case"Concatenate":return K2(S,c,h);case"TypeGuard":case"StrictTypeGuard":return W2(S,c,h,g);case"Unpack":return q2(c,S,h,g);case"Required":case"NotRequired":return j2(c,S,O==="Required",h,g);case"Self":return $2(c,S,h);case"LiteralString":return ba(c,h,0)}}const I=F.getFileInfo(S);if(I.isStubFile||I.executionEnvironment.pythonVersion>=f.PythonVersion.V3_9||(0,V.isAnnotationEvaluationPostponed)(F.getFileInfo(S))||(g&4)!==0){if(d.ClassType.isBuiltIn(c,"type")&&h){if(h.length===1&&(0,d.isAnyOrUnknown)(h[0].type))return c;const O=Vr(S,"Type");if(O&&(0,d.isInstantiableClass)(O)){let K=ba(O,h,1,void 0,!0);return(0,d.isInstantiableClass)(K)&&(K=(0,k.explodeGenericClass)(K)),K}}if((0,k.isTupleClass)(c))return ba(c,h,void 0,void 0,!0)}let _=h?h.length:0;const C=d.ClassType.isPseudoGenericClass(c)?[]:d.ClassType.getTypeParameters(c);if(C.length===0&&_===0)return c;const w=C.findIndex(O=>(0,d.isVariadicTypeVar)(O));if(h){if(_>C.length){if(!d.ClassType.isPartiallyEvaluated(c)&&!d.ClassType.isTupleClass(c)){const O=F.getFileInfo(S);C.length===0?Xe(O.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeArgsExpectingNone().format({name:c.aliasName||c.details.name}),h[C.length].node):(C.length!==1||!(0,d.isParamSpec)(C[0]))&&Xe(O.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeArgsTooMany().format({name:c.aliasName||c.details.name,expected:C.length,received:_}),h[C.length].node)}_=C.length}else if(_<C.length){const O=F.getFileInfo(S);Xe(O.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeArgsTooFew().format({name:c.aliasName||c.details.name,expected:C.length,received:_}),h.length>0?h[0].node.parent:S)}h.forEach((O,K)=>{if(K===w){if((0,d.isClassInstance)(O.type)&&(0,k.isTupleClass)(O.type))return;if((0,d.isVariadicTypeVar)(O.type)){qc(O.type,O.node);return}}const ne=K<C.length?C[K]:void 0,ie=ne==null?void 0:ne.details.isParamSpec;Wr(O,{allowParamSpec:!0,allowTypeArgList:ie})})}let A=[];const x=d.ClassType.getTypeParameters(c);if(x.length===1&&x[0].details.isParamSpec&&h){if(h.every(O=>!(0,k.isEllipsisType)(O.type)&&!O.typeList&&!(0,d.isParamSpec)(O.type)))(h.length!==1||!(0,d.isInstantiableClass)(h[0].type)||!d.ClassType.isBuiltIn(h[0].type,"Concatenate"))&&(h=[{type:d.UnknownType.create(),node:h[0].node,typeList:h}]);else if(h.length>1){const O=h.find(ne=>(0,d.isParamSpec)(ne.type));O&&st(p.Localizer.Diagnostic.paramSpecContext(),O.node);const K=h.find(ne=>!!ne.typeList);K&&st(p.Localizer.Diagnostic.typeArgListNotAllowed(),K.node)}}return x.forEach((O,K)=>{if(h&&K<h.length){if(O.details.isParamSpec){const ne=h[K],ie=d.FunctionType.createInstantiable(65536);if(d.TypeBase.setSpecialForm(ie),(0,k.isEllipsisType)(ne.type)){d.FunctionType.addDefaultParameters(ie),ie.details.flags|=32768,A.push(ie);return}if(ne.typeList){ne.typeList.forEach((pe,Ie)=>{d.FunctionType.addParameter(ie,{category:0,name:`__p${Ie}`,isNameSynthesized:!0,type:(0,k.convertToInstance)(pe.type),hasDeclaredType:!0})}),A.push(ie);return}if((0,d.isInstantiableClass)(ne.type)&&d.ClassType.isBuiltIn(ne.type,"Concatenate")){const pe=ne.type.typeArguments;pe&&pe.length>0&&pe.forEach((Ie,Le)=>{Le===pe.length-1?(0,d.isParamSpec)(Ie)&&(ie.details.paramSpec=Ie):d.FunctionType.addParameter(ie,{category:0,name:`__p${Le}`,isNameSynthesized:!0,hasDeclaredType:!0,type:Ie})}),A.push(ie);return}}A.push((0,k.convertToInstance)(h[K].type));return}A.push(d.UnknownType.create())}),A=A.map((O,K)=>{if(K<_){const ne=new l.DiagnosticAddendum,ie=DA(C[K],O,ne);if(ie)O=ie;else if(!(0,d.isClassInstance)(O)||!d.ClassType.isPartiallyEvaluated(O)){const pe=F.getFileInfo(h[K].node);Xe(pe.diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.typeVarAssignmentMismatch().format({type:at(O),name:d.TypeVarType.getReadableName(C[K])})+ne.getString(),h[K].node)}}return O}),d.ClassType.cloneForSpecialization(c,A,h!==void 0)}function Sr(c){return c.type?{type:c.type}:c.valueExpression?rt(c.valueExpression):{type:d.UnknownType.create()}}function rf(c){return c.type?{type:c.type}:Qc(c.valueExpression)}function Qc(c,h=!1,g=!1){let S=131304;return F.getFileInfo(c).isStubFile?S|=4:S|=4194304,h||(S|=16),g&&(S|=1048576),rt(c,S)}function ai(c,h){const g=ue.getScopeForNode(c);if(g){const I=ue.getBuiltInScope(g).lookUpSymbol(h);if(I)return Fs(I)}return d.UnknownType.create()}function Fn(c,h,g){const S=ai(c,h);if((0,d.isInstantiableClass)(S)){let I=S;return g&&(I=d.ClassType.cloneForSpecialization(I,g,g!==void 0)),d.ClassType.cloneAsInstance(I)}return S}function $r(c,h,g,S=!1){var I;const _=ue.getScopeForNode(c);let C=_==null?void 0:_.lookUpSymbolRecursive(h);const w=(I=_==null?void 0:_.type)!==null&&I!==void 0?I:3;if(C&&g&&(w!==1&&w!==0)&&C.symbol.getDeclarations().filter(j=>{if(j.type!==6&&j.type!==0){const O=N.getExecutionScopeNode(c),K=j.type===4||j.type===3?j.node.name:j.node,ne=N.getExecutionScopeNode(K);if(O===ne&&!km(K,c)){const ie=F.getFlowNode(c);return!(ie&&Ca.isFlowNodeReachable(ie,void 0,!0))}}return!0}).length===0)if(C.scope.type!==1){let j=C.scope.parent;const O=C.isOutsideCallerModule||C.scope.type===3;let K=C.isBeyondExecutionScope||C.scope.isIndependentlyExecutable();if(C.scope.type===2){const ne=C.scope.getGlobalScope();j=ne.scope,ne.isBeyondExecutionScope&&(K=!0)}j?C=j.lookUpSymbolRecursive(h,O,K):C=void 0}else C=void 0;if(C&&S){let x=C;for(;x.scope.type!==3&&x.scope.type!==4&&x.scope.parent&&(x=x.scope.parent.lookUpSymbolRecursive(h,x.isOutsideCallerModule,x.isBeyondExecutionScope||x.scope.isIndependentlyExecutable()),!!x););((x==null?void 0:x.scope.type)===3||(x==null?void 0:x.scope.type)===4)&&(C=x)}return C}function bo(c,h){Be.push(c);try{const g=h();return Be.pop(),g}catch(g){throw Be.pop(),g}}function Ei(c,h,g=!0){mt.enterSpeculativeContext(c,g);try{const S=h();return mt.leaveSpeculativeContext(),S}catch(S){throw mt.leaveSpeculativeContext(),S}}function mA(c){const h=mt.disableSpeculativeMode();try{c(),mt.enableSpeculativeMode(h)}catch(g){throw mt.enableSpeculativeMode(h),g}}function qm(c,h){if((0,d.isFunction)(c)&&c.details.declaration){const g=c.details.declaration;if(g.type===3){const S=g.node,I=F.getScope(S);if(I){const _=I.lookUpSymbol(h);if(_)return _.getDeclarations().find(C=>C.type===2)}}}}function yA(c){var h;const g=[],S=(h=$v(c))===null||h===void 0?void 0:h.type;return S&&(0,k.doForEachSubtype)(S,I=>{var _,C;if((0,d.isClassInstance)(I)&&d.ClassType.isTypedDictClass(I)&&((_=I.details.typedDictEntries)===null||_===void 0?void 0:_.get(c.value))){const A=(C=(0,k.lookUpObjectMember)(I,c.value))===null||C===void 0?void 0:C.symbol;A&&(0,a.appendArray)(g,A.getDeclarations())}}),g.length===0?void 0:g}function gA(c,h=!0){var g;if(h&&F.isCodeUnreachable(c))return;const S=[];if(c.parent&&c.parent.nodeType===23&&c.parent.alias&&c===c.parent.name){const I=ue.getScopeForNode(c);if(I){const _=I.lookUpSymbolRecursive(c.parent.alias.value);if(_){const C=_.symbol.getDeclarations().filter(w=>w.type===6&&w.node===c.parent);(0,a.appendArray)(S,(0,D.getDeclarationsWithUsesLocalNameRemoved)(C))}}}else if(c.parent&&c.parent.nodeType===35&&c===c.parent.memberName){let I=Lr(c.parent.leftExpression);if(I){I=Yt(I);const _=c.parent.memberName.value;(0,k.doForEachSubtype)(I,C=>{let w;if(C=Yt(C),(0,d.isInstantiableClass)(C)){let A=(0,k.lookUpClassMember)(C,_,16);if(A||(A=(0,k.lookUpClassMember)(C,_)),!A){const x=C.details.effectiveMetaclass;x&&(0,d.isInstantiableClass)(x)&&(A=(0,k.lookUpClassMember)(x,_))}A&&(w=A.symbol)}else if((0,d.isClassInstance)(C)){let A=(0,k.lookUpObjectMember)(C,_,16);A||(A=(0,k.lookUpObjectMember)(C,_)),A&&(w=A.symbol)}else(0,d.isModule)(C)&&(w=d.ModuleType.getField(C,_));if(w){const A=w.getTypedDeclarations();A.length>0?(0,a.appendArray)(S,A):(0,a.appendArray)(S,w.getDeclarations())}})}}else if(c.parent&&c.parent.nodeType===37){const I=c.parent.nameParts.findIndex(C=>C===c),_=F.getImportInfo(c.parent);I>=0&&_&&!_.isNativeLib&&I<_.resolvedPaths.length&&_.resolvedPaths[I]&&(tf(c),S.push((0,D.createSynthesizedAliasDeclaration)(_.resolvedPaths[I])))}else if(c.parent&&c.parent.nodeType===1&&c===c.parent.name){const I=c.parent,_=c.value;if(I.parent&&I.parent.nodeType===9){const C=rt(I.parent.leftExpression,2).type;if(C){if((0,d.isFunction)(C)&&C.details.declaration){const w=qm(C,_);w&&S.push(w)}else if((0,d.isOverloadedFunction)(C))C.overloads.forEach(w=>{const A=qm(w,_);A&&S.push(A)});else if((0,d.isInstantiableClass)(C)){const w=(g=Ur(I.parent.leftExpression,d.ClassType.cloneAsInstance(C),"__init__",{method:"get"},void 0,4))===null||g===void 0?void 0:g.type;if(w&&(0,d.isFunction)(w)){const A=qm(w,_);if(A)S.push(A);else if(d.ClassType.isDataClass(C)){const x=(0,k.lookUpClassMember)(C,_);x&&(0,a.appendArray)(S,x.symbol.getDeclarations())}}}}}}else{const I=F.getFileInfo(c),_=N.isWithinTypeAnnotation(c,!(0,V.isAnnotationEvaluationPostponed)(F.getFileInfo(c))),C=_||I.isStubFile,w=$r(c,c.value,!C,_);w&&(0,a.appendArray)(S,w.symbol.getDeclarations())}return S}function Gm(c){var h,g;switch(c.type){case 0:{if(c.intrinsicType==="Any")return d.AnyType.create();if(c.intrinsicType==="class"){const _=N.getEnclosingClass(c.node),C=ti(_);return C==null?void 0:C.classType}const S=Fn(c.node,"str"),I=Fn(c.node,"int");if((0,d.isClassInstance)(I)&&(0,d.isClassInstance)(S)){if(c.intrinsicType==="str")return S;if(c.intrinsicType==="str | None")return(0,d.combineTypes)([S,d.NoneType.createInstance()]);if(c.intrinsicType==="int")return I;if(c.intrinsicType==="Iterable[str]"){const _=ai(c.node,"Iterable");if((0,d.isInstantiableClass)(_))return d.ClassType.cloneAsInstance(d.ClassType.cloneForSpecialization(_,[S],!0))}if(c.intrinsicType==="Dict[str, Any]"){const _=ai(c.node,"dict");if((0,d.isInstantiableClass)(_))return d.ClassType.cloneAsInstance(d.ClassType.cloneForSpecialization(_,[S,d.AnyType.create()],!0))}}return d.UnknownType.create()}case 4:{const S=ti(c.node);return S==null?void 0:S.decoratedType}case 5:return zr(c.node.typeAnnotation);case 3:{const S=br(c.node);return S==null?void 0:S.decoratedType}case 2:{let S=c.node.typeAnnotation||c.node.typeAnnotationComment;if(!S&&((h=c.node.parent)===null||h===void 0?void 0:h.nodeType)===28){const I=c.node.parent;if(I.functionAnnotationComment&&!I.functionAnnotationComment.isParamListEllipsis){const _=I.parameters.findIndex(C=>C===c.node);S=N.getTypeAnnotationForParameter(I,_)}}if(S){const I=$d(S,c.node.category);return Il(c.node,c.node.category,Bm(c.node,I))}return}case 1:{const S=c.typeAnnotationNode;if(S){const I=Cm(S)?N.getTypeAnnotationNode(S):void 0;let _;if(c.isRuntimeTypeExpression)_=(0,k.convertToInstance)(Qc(S,!0,!0).type);else{const C=c.isDefinedByMemberAccess&&((g=c.node.parent)===null||g===void 0?void 0:g.nodeType)===35?c.node.parent:c.node;_=zr(S,{isVariableAnnotation:!0,allowClassVar:N.isClassVarAllowedForAssignmentTarget(C),allowFinal:N.isFinalAllowedForAssignmentTarget(C)})}if(_)return c.node.nodeType===38&&(_=Um(c.node,()=>_)||_),I&&I.valueExpression.nodeType===38&&(_=Vm(_,I.valueExpression,c.node)),_}return}case 6:return}}function Km(c,h){var g,S;const I=kb(h,!0,F.getFileInfo(h.node).isStubFile);if(!I)return Ue.evaluateUnknownImportsAsAny?d.AnyType.create():d.UnknownType.create();function _(x,j,O){if(j.path&&j.loadSymbolsFromPath){const K=O(j.path);if(K)x.fields=K.symbolTable,x.docString=K.docString;else return Ue.evaluateUnknownImportsAsAny?d.AnyType.create():d.UnknownType.create()}return j.implicitImports&&j.implicitImports.forEach((K,ne)=>{let ie;if(K.isUnresolved)ie=d.UnknownType.create();else{const Ie=x.moduleName?x.moduleName+"."+ne:"",Le=d.ModuleType.create(Ie,K.path);ie=_(Le,K,O)}const pe=Y.Symbol.createWithType(0,ie);x.loaderFields.set(ne,pe)}),x}if(I.type===6){let x=I.moduleName;if(h.type===6&&(h.symbolName&&(x+="."+h.symbolName),x.startsWith("."))){const K=F.getFileInfo(h.node).moduleName.split(".");for(x=x.substr(1);x.startsWith(".")&&K.length>0;)x=x.substr(1),K.pop();x=K.join(".")+"."+x}const j=d.ModuleType.create(x,I.path);return I.symbolName&&I.submoduleFallback?_(j,I.submoduleFallback,tt):_(j,I,tt)}const C=Gm(I);if(C)return C;const w=F.getFileInfo(I.node);let A=!w.isInPyTypedPackage||w.isStubFile;if(!A&&I.type===1){const x=N.getEnclosingClass(I.node,!0);if(x){const j=ti(x);j&&d.ClassType.isEnumClass(j.classType)&&(A=!0)}(I.isFinal||I.isConstant)&&(A=!0)}if(I.type===2)return(g=Yc(I.node.name,()=>{ef(I.node)}))===null||g===void 0?void 0:g.type;if(I.type===1&&I.inferredTypeSource){const x=I.typeAliasName&&I.inferredTypeSource.parent?I.inferredTypeSource.parent:I.inferredTypeSource;let j=(S=Yc(I.node,()=>{tf(x)}))===null||S===void 0?void 0:S.type;if(j&&I.node.nodeType===38){const O=Um(I.node,()=>{var K,ne;return(ne=(K=Yc(I.inferredTypeSource,()=>{tf(I.inferredTypeSource)}))===null||K===void 0?void 0:K.type)!==null&&ne!==void 0?ne:d.UnknownType.create()});O&&(j=O)}return j&&I.typeAliasName&&d.TypeBase.isInstantiable(j)&&!(0,d.isUnknown)(j)&&!(0,k.isEllipsisType)(j)&&(j=Vm(j,I.typeAliasName,I.node),A=!0),j&&w.isInPyTypedPackage&&!w.isStubFile&&(A||TA(c,h,j)&&(A=!0),A||(j=d.TypeBase.cloneForAmbiguousType(j))),j}}function TA(c,h,g){var S;const I=c.getDeclarations().filter(A=>A.type!==1||!A.isInferenceAllowedInPyTyped);if(I.length>1||h.type!==1)return!1;if(I.length===0||(0,d.isTypeVar)(g))return!0;let _;const C=h.node.parent;if(C&&(C.nodeType===3?_=C:C.nodeType===35&&((S=C.parent)===null||S===void 0?void 0:S.nodeType)===3&&(_=C.parent)),!_)return!1;const w=rt(_.rightExpression).type;return!!((0,d.isClassInstance)(w)&&(0,k.isLiteralType)(w)||_.rightExpression.nodeType===38&&!d.TypeBase.isAmbiguous(w))}function kb(c,h,g=!1){var S;return(S=m.resolveAliasDeclaration(tt,c,h,g))===null||S===void 0?void 0:S.declaration}function Db(c,h,g=!1){return m.resolveAliasDeclaration(tt,c,h,g)}function Fs(c){return Cl(c).type}function Cl(c,h,g=!1){if(c.hasTypedDeclarations()){const ie=Sa(c,h),pe=c.getTypedDeclarations();let Ie=!1;return ie&&((0,d.isFunction)(ie)&&d.FunctionType.isPartiallyEvaluated(ie)||(0,d.isClass)(ie)&&d.ClassType.isPartiallyEvaluated(ie))&&(Ie=!0),{type:ie!=null?ie:d.UnknownType.create(),isIncomplete:Ie,includesVariableDecl:pe.some(Le=>Le.type===1),includesIllegalTypeAliasDecl:!pe.every(Le=>(0,D.isPossibleTypeAliasDeclaration)(Le)),isRecursiveDefinition:!ie}}let S=En.get(c.id);const I=h?h.id:void 0,_=`${I===void 0?".":I.toString()}${g?"*":""}`;if(S){const ie=S.get(_);if(ie)return ie}const C=[],w=c.getDeclarations(),A=(0,H.isFinalVariable)(c);let x=!1,j=!1,O=!1,K;if(w.length>be)return{type:d.UnknownType.create(),isIncomplete:!1,includesVariableDecl:!1,includesIllegalTypeAliasDecl:!w.every(ie=>(0,D.isPossibleTypeAliasDeclaration)(ie)),isRecursiveDefinition:!1};g&&w.forEach((ie,pe)=>{ie.isInExceptSuite||(K=pe)});let ne=!1;if(w.forEach((ie,pe)=>{var Ie,Le;let et=K===void 0||pe===K;if(ne&&(et=!1),h!==void 0&&ie.type!==6){const ke=N.getExecutionScopeNode(h),Ge=N.getExecutionScopeNode(ie.node);ke===Ge&&(km(ie.node,h)||(et=!1))}if(et){const ke=(0,D.isExplicitTypeAliasDeclaration)(ie),Ge=ke||(0,D.isPossibleTypeAliasDeclaration)(ie);if(ke&&(ne=!0),Ge&&ie.type===1&&((Le=(Ie=ie.inferredTypeSource)===null||Ie===void 0?void 0:Ie.parent)===null||Le===void 0?void 0:Le.nodeType)===3&&(Jd(ie.inferredTypeSource.parent),ie.typeAliasAnnotation&&zr(ie.typeAliasAnnotation,{isVariableAnnotation:!0,allowFinal:N.isFinalAllowedForAssignmentTarget(ie.node),allowClassVar:N.isClassVarAllowedForAssignmentTarget(ie.node)})),ln(c,ie))try{let ut=Km(c,ie);if(Mt(c)||(x=!0),ut){if(ie.type===1){j=!0;let Ve=ie.type===1&&!!ie.isConstant;(0,d.isClassInstance)(ut)&&d.ClassType.isEnumClass(ut)&&_A(ie)&&(Ve=!0),d.TypeBase.isInstance(ut)&&!ke&&!Ve&&!A&&(ut=(0,k.stripLiteralValue)(ut))}C.push(ut),mt.isSpeculative(ie.node)&&(O=!0)}else x=!0}catch(ut){throw Mt(c),ut}else x=!0}}),C.length>0){const ie={type:(0,d.combineTypes)(C),isIncomplete:!1,includesVariableDecl:j,includesIllegalTypeAliasDecl:!w.every(pe=>(0,D.isPossibleTypeAliasDeclaration)(pe)),isRecursiveDefinition:!1};return O||(S||(S=new Map,En.set(c.id,S)),S.set(_,ie)),ie}return{type:d.UnboundType.create(),isIncomplete:x,includesVariableDecl:j,includesIllegalTypeAliasDecl:!w.every(ie=>(0,D.isPossibleTypeAliasDeclaration)(ie)),isRecursiveDefinition:!1}}function Sa(c,h){const g=c.getSynthesizedType();if(g)return g;let S=c.getTypedDeclarations();if(S.length===0)return;if(S.length>1&&h){const _=S.filter(C=>{if(C.type!==6){const w=N.getExecutionScopeNode(h),A=N.getExecutionScopeNode(C.node);if(w===A&&!km(C.node,h,!1))return!1}return!0});_.length>0&&(S=_)}let I=S.length-1;for(;I>=0;){const _=S[I],C=Mn(c,_);if(C)return C;if(Rt(c,_)<0&&ln(c,_))try{const w=Gm(_);if(Mt(c)||_.type===4)return w}catch(w){throw Mt(c),w}I--}}function _A(c){const h=N.getEnclosingClass(c.node,!0);if(!h)return!1;const g=ti(h);return g?d.ClassType.isEnumClass(g.classType):!1}function Hm(c){(0,d.isFunction)(c)?di(c):(0,d.isOverloadedFunction)(c)&&c.overloads.forEach(h=>{di(h)})}function di(c,h,g=!0){const S=d.FunctionType.getSpecializedReturnType(c);return S?ub(S):g?Pb(c,h):d.UnknownType.create()}function Pb(c,h){var g;let S,I=!1;if(d.FunctionType.isStubDefinition(c))return d.UnknownType.create();if(c.inferredReturnType)S=c.inferredReturnType;else{if(d.FunctionType.isInstanceMethod(c)&&c.details.name==="__init__")S=d.NoneType.createInstance();else if(c.details.declaration){const _=c.details.declaration.node;if(Ue.analyzeUnannotatedFunctions&&!gl(_.suite)){const C=F.getCodeFlowComplexity(_);if(c.details.parameters.length<=1||c.details.parameters.some(A=>A.hasDeclaredType)||C<se){let A;mA(()=>{A=Eb(_,d.FunctionType.isAbstractMethod(c))}),S=A==null?void 0:A.type,A!=null&&A.isIncomplete&&(I=!0),S&&d.FunctionType.isWrapReturnTypeInAwait(c)&&(S=Zd(_,S,!!(!((g=c.details.declaration)===null||g===void 0)&&g.isGenerator)))}}}S||(S=d.UnknownType.create()),I||(c.inferredReturnType=S)}if(!I&&Ue.analyzeUnannotatedFunctions&&(0,k.isPartlyUnknown)(S)&&d.FunctionType.hasUnannotatedParams(c)&&!d.FunctionType.isStubDefinition(c)&&!d.FunctionType.isPyTypedDefinition(c)&&h){const _=vA(c,h);_&&(S=_)}return S}function vA(c,h){var g;let S;if(!c.details.declaration)return;const I=c.details.declaration.node;if(F.getCodeFlowComplexity(I)>=se||h.some(w=>!w.paramName)||z.some(w=>w.functionNode===I))return;const C=br(I);if(!!C&&!(h.length>Z)&&!(z.length>=X)&&(bo(I,()=>{var w;const A=Q;z.push({functionNode:I,codeFlowAnalyzer:Ca.createCodeFlowAnalyzer()});try{Q=new Map;let x=!0;I.parameters.forEach((j,O)=>{if(j.name){let K;const ne=h.find(ie=>j.name.value===ie.paramName);ne&&ne.argument.valueExpression?(K=rt(ne.argument.valueExpression).type,(0,d.isUnknown)(K)||(x=!1)):j.defaultValue?(K=rt(j.defaultValue).type,(0,d.isUnknown)(K)||(x=!1)):O===0&&(d.FunctionType.isInstanceMethod(C.functionType)||d.FunctionType.isClassMethod(C.functionType))&&C.functionType.details.parameters.length>0&&I.parameters[0].name&&(K=C.functionType.details.parameters[0].type),K||(K=d.UnknownType.create()),me(j.name,K,0,!1)}}),x||(S=(w=Eb(I,d.FunctionType.isAbstractMethod(c)))===null||w===void 0?void 0:w.type)}finally{z.pop(),Q=A}}),S))return S=(0,d.removeUnbound)(S),d.FunctionType.isWrapReturnTypeInAwait(c)&&!(0,d.isNever)(S)&&(S=Zd(I,S,!!(!((g=c.details.declaration)===null||g===void 0)&&g.isGenerator))),S}function Ab(c){const h=br(c);return!h||d.FunctionType.isAbstractMethod(h.functionType)?d.AnyType.create():d.FunctionType.isGenerator(h.functionType)?(0,k.getDeclaredGeneratorReturnType)(h.functionType):h.functionType.details.declaredReturnType}function Fi(c){return(0,d.isInstantiableClass)(c.classType)?(0,k.partiallySpecializeType)(Fs(c.symbol),c.classType,void 0,vt!=null?vt:d.UnknownType.create()):d.UnknownType.create()}function bA(c,h,g){if((0,d.isInstantiableClass)(h.classType)){const S=Cl(h.symbol);if(S)return Hm(S.type),{node:c,type:(0,k.partiallySpecializeType)(S.type,h.classType,g),isIncomplete:!!S.isIncomplete}}}function Ym(c,h,g,S,I,_,C,w){if(d.ClassType.isHierarchyPartiallyEvaluated(c)||d.ClassType.isHierarchyPartiallyEvaluated(h))return!0;if(d.ClassType.isTypedDictClass(c)&&d.ClassType.isTypedDictClass(h)&&!d.ClassType.isSameGenericClass(c,h))return(0,R.assignTypedDictToTypedDict)(Bt,c,h,g,S,_,C)?d.ClassType.isFinal(c)!==d.ClassType.isFinal(h)?(g==null||g.addMessage(p.Localizer.DiagnosticAddendum.typedDictFinalMismatch().format({sourceType:at((0,k.convertToInstance)(h)),destType:at((0,k.convertToInstance)(c))})),!1):(_&1)!==0?(0,R.assignTypedDictToTypedDict)(Bt,h,c,void 0,void 0,_,C):!0:!1;const A=B.get(c.details.fullName);if(A&&A.some(pe=>h.details.mro.some(Ie=>(0,d.isClass)(Ie)&&pe===Ie.details.fullName))&&(_&1)===0)return!0;const x=[],j=d.ClassType.isDerivedFrom(h,c,x);if(d.ClassType.isProtocolClass(c)&&!j)return(0,ce.assignClassToProtocol)(Bt,c,h,g==null?void 0:g.createAddendum(),S,I,_,!1,C)?!0:(g==null||g.addMessage(p.Localizer.DiagnosticAddendum.protocolIncompatible().format({sourceType:at((0,k.convertToInstance)(h)),destType:at((0,k.convertToInstance)(c))})),!1);if(((_&1)===0||d.ClassType.isSameGenericClass(h,c))&&j)return(0,s.assert)(x.length>0),IA(c,h,x,g,S,I,_,C);if(d.ClassType.isBuiltIn(c,"object")&&(_&1)===0)return!0;const O=w?d.ClassType.cloneAsInstance(c):c,K=w?d.ClassType.cloneAsInstance(h):h;let ne=at(O),ie=at(K);return ne===ie&&c.details.fullName&&h.details.fullName&&(ne=c.details.fullName,ie=h.details.fullName),g==null||g.addMessage(p.Localizer.DiagnosticAddendum.typeIncompatible().format({sourceType:ie,destType:ne})),!1}function SA(c,h,g,S,I,_){var C,w;const A=[...(C=c.tupleTypeArguments)!==null&&C!==void 0?C:[]],x=[...(w=h.tupleTypeArguments)!==null&&w!==void 0?w:[]],j=A.findIndex(ne=>(0,d.isVariadicTypeVar)(ne.type)),O=A.findIndex(ne=>ne.isUnbounded),K=x.findIndex(ne=>ne.isUnbounded);if(K>=0){const ne=j>=0||O>=0?A.length-1:A.length,ie=x.length>0?x[K].type:d.AnyType.create();for(;x.length<ne;)x.splice(K,0,{type:ie,isUnbounded:!1})}if(j>=0&&K>=0)return g==null||g.addMessage(p.Localizer.DiagnosticAddendum.typeVarTupleRequiresKnownLength()),!1;if(O>=0||j>=0){const ne=x.length-A.length+1;if(ne>=0)if(j>=0){if(Tt&&(0,d.isInstantiableClass)(Tt)){const ie=x.splice(j,ne),pe=(0,k.convertToInstance)((0,k.specializeTupleClass)(Tt,ie.map(Ie=>({type:(0,k.stripLiteralValue)(Ie.type),isUnbounded:!1})),!0,!0,!0));x.splice(j,0,{type:pe,isUnbounded:!1})}}else{const ie=x.splice(O,ne);x.splice(O,0,{type:ie.length>0?(0,d.combineTypes)(ie.map(pe=>pe.type)):d.AnyType.create(),isUnbounded:!1})}}if(x.length===A.length)for(let ne=0;ne<x.length;ne++){const ie=g==null?void 0:g.createAddendum();if(!Ot(A[ne].type,x[ne].type,ie==null?void 0:ie.createAddendum(),S,void 0,I|128,_))return ie&&ie.addMessage(p.Localizer.DiagnosticAddendum.tupleEntryTypeMismatch().format({entry:ne+1})),!1}else if(K>=0){if(!c.isUnpacked)return g==null||g.addMessage(p.Localizer.DiagnosticAddendum.tupleSizeMismatchIndeterminate().format({expected:A.length})),!1}else return g==null||g.addMessage(p.Localizer.DiagnosticAddendum.tupleSizeMismatch().format({expected:A.length,received:x.length})),!1;return!0}function IA(c,h,g,S,I,_,C,w){let A=h,x=I!=null?I:new oe.TypeVarContext((0,k.getTypeVarScopeId)(c)),j=C;I||(j&=-9);for(let O=g.length-1;O>=0;O--){const K=g[O];if((0,d.isUnknown)(K)||d.ClassType.isBuiltIn(K,"object"))return!0;if(O<g.length-1&&(A=(0,k.specializeForBaseClass)(A,K)),O===0&&c.tupleTypeArguments&&A.tupleTypeArguments)return SA(c,A,S,x,C,w);if(d.ClassType.getTypeParameters(K).length!==0){if(!K.typeArguments)return!0;if(!Qm(K,A,S,x,void 0,j,w))return!1;x=new oe.TypeVarContext((0,k.getTypeVarScopeId)(K)),j&=-9}}if(c.typeArguments){if(!Qm(c,A,S,I,_,C,w))return!1}else if(I&&c.details.typeParameters.length>0&&A.typeArguments&&!I.isLocked()){const O=A.typeArguments;for(let K=0;K<c.details.typeParameters.length;K++){const ne=K<O.length?O[K]:d.UnknownType.create();I.setTypeVarType(c.details.typeParameters[K],void 0,ne)}}return!0}function CA(c,h){if(!d.ClassType.isPropertyClass(c))return;const g=c.details.fields.get("fget");if(g){const S=Sa(g);if(S&&(0,d.isFunction)(S))return di(S,void 0,h)}}function Qm(c,h,g,S,I,_,C){var w,A,x;(0,s.assert)(d.ClassType.isSameGenericClass(c,h));const j=d.ClassType.getTypeParameters(c);let O,K;if(!c.typeArguments||!h.typeArguments)return!0;if(d.ClassType.isTupleClass(c)?(O=(A=(w=c.tupleTypeArguments)===null||w===void 0?void 0:w.map(ne=>ne.type))!==null&&A!==void 0?A:[],K=(x=h.tupleTypeArguments)===null||x===void 0?void 0:x.map(ne=>ne.type)):(O=c.typeArguments,K=h.typeArguments),K)for(let ne=0;ne<K.length;ne++){const ie=K[ne],pe=ne>=O.length?O.length-1:ne,Ie=pe>=0?O[pe]:d.UnknownType.create(),Le=pe<j.length?j[pe]:void 0,et=new l.DiagnosticAddendum;if(!Le||Le.details.variance===1){if(!Ot(Ie,ie,et,S,I,_|128,C)){if(Le&&g){const ke=g.createAddendum();ke.addMessage(p.Localizer.DiagnosticAddendum.typeVarIsCovariant().format({name:d.TypeVarType.getReadableName(Le)})),ke.addAddendum(et)}return!1}}else if(Le.details.variance===2){if(!Ot(ie,Ie,et,I,S,_^2|128,C)){if(g){const ke=g.createAddendum();ke.addMessage(p.Localizer.DiagnosticAddendum.typeVarIsContravariant().format({name:d.TypeVarType.getReadableName(Le)})),ke.addAddendum(et)}return!1}}else if(!Ot(Ie,ie,et,S,I,_|1,C)&&!d.ClassType.isPseudoGenericClass(c)){if(g){const ke=g.createAddendum();ke.addMessage(p.Localizer.DiagnosticAddendum.typeVarIsInvariant().format({name:d.TypeVarType.getReadableName(Le)})),ke.addAddendum(et)}return!1}}return!0}function Ot(c,h,g,S,I,_=0,C=0){var w,A;if((0,d.isUnion)(c)&&c.subtypes.length===1&&(0,d.isVariadicTypeVar)(c.subtypes[0])&&(c=c.subtypes[0]),(0,d.isUnion)(h)&&h.subtypes.length===1&&(0,d.isVariadicTypeVar)(h.subtypes[0])&&(h=h.subtypes[0]),c===h)return(0,d.isTypeVar)(c)&&!c.details.isParamSpec&&!c.details.isVariadic&&c.scopeType===0&&S&&!S.isLocked()&&S.hasSolveForScope(c.scopeId)&&!S.getTypeVar(c)&&(_&10)===0&&S.setTypeVarType(c,h),!0;if(C>d.maxTypeRecursionCount)return!0;if(C++,(0,d.isTypeVar)(c)&&c.details.recursiveTypeAliasScopeId&&(0,d.isTypeVar)(h)&&h.details.recursiveTypeAliasScopeId)if(((w=c.typeAliasInfo)===null||w===void 0?void 0:w.typeArguments)&&((A=h.typeAliasInfo)===null||A===void 0?void 0:A.typeArguments)&&c.details.recursiveTypeAliasScopeId===h.details.recursiveTypeAliasScopeId){let O=!0;const K=h.typeAliasInfo.typeArguments;return c.typeAliasInfo.typeArguments.forEach((ne,ie)=>{const pe=ie<K.length?K[ie]:d.UnknownType.create();Ot(ne,pe,g,S,I,_,C)||(O=!1)}),O}else{if((_&2048)!==0)return!0;_|=2048}if(c=(0,k.transformPossibleRecursiveTypeAlias)(c),h=(0,k.transformPossibleRecursiveTypeAlias)(h),(0,d.isUnbound)(c)||(0,d.isUnbound)(h))return!0;(_&16)!==0&&(h=Yt(h));const x=_;if(_&=-69,(0,d.isTypeVar)(c)){if(wA(c,h,C)||(0,d.isTypeSame)(c,h))return!0;if((0,d.isUnion)(h)){const O=(0,d.removeFromUnion)(h,K=>(0,d.isAnyOrUnknown)(K));if((0,d.isTypeSame)(c,O))return!0}if((0,d.isTypeVar)(h)&&h.details.isSynthesizedSelf&&h.details.boundType&&c.details.isSynthesizedSelf&&c.details.boundType)return(_&2)===0&&S&&(0,te.assignTypeToTypeVar)(Bt,c,h,g,S,x,C),!0;if((0,d.isVariadicTypeVar)(c)&&(0,d.isClassInstance)(h)&&(0,k.isTupleClass)(h)&&h.tupleTypeArguments&&h.tupleTypeArguments.length===1&&(0,d.isTypeSame)(c,h.tupleTypeArguments[0].type,void 0,void 0,C))return!0;if((_&2)===0||!(0,d.isTypeVar)(h)){const O=(_&2)===0?S:I;return!(!(0,te.assignTypeToTypeVar)(Bt,c,h,g,O!=null?O:new oe.TypeVarContext,x,C)||(0,d.isAnyOrUnknown)(h)&&(_&16)!==0)}}if((0,d.isTypeVar)(h)){if((_&2)!==0){if(!I||!I.hasSolveForScope((0,k.getTypeVarScopeId)(h)))return Ot(Yt(c),Yt(h),g,void 0,void 0,x,C);{let O=x;if((x&1024)!==0?O&=-7:O|=4,(0,te.assignTypeToTypeVar)(Bt,h,c,g,I,O,C))return!0;let K=!1;return(0,d.isUnion)(c)&&(0,k.doForEachSubtype)(c,ne=>{(0,te.assignTypeToTypeVar)(Bt,h,ne,g,I,x|4,C)&&(K=!0)}),K}}if((_&1)!==0)return(0,d.isAnyOrUnknown)(c)||(0,d.isParamSpec)(h)&&(0,d.isFunction)(c)&&d.FunctionType.shouldSkipArgsKwargsCompatibilityCheck(c)&&c.details.parameters.length<=2?!0:(g==null||g.addMessage(p.Localizer.DiagnosticAddendum.typeAssignmentMismatch().format({sourceType:at(h),destType:at(c)})),!1)}if((0,d.isAnyOrUnknown)(c))return!0;if((0,d.isAnyOrUnknown)(h)){const O=(_&2)===0?S:I;if(O){const K=(0,k.isEllipsisType)(h)?d.AnyType.create():h;(0,k.setTypeArgumentsRecursive)(c,K,O,C)}if((_&16)===0)return!0}if((0,d.isNever)(h)){const O=(_&2)===0?S:I;return O&&(0,k.setTypeArgumentsRecursive)(c,d.UnknownType.create(),O,C),!0}if((0,d.isUnion)(h)&&d.TypeBase.isSpecialForm(h)&&(h=ct||pt||d.AnyType.create()),(0,d.isUnion)(c))if((0,d.isUnion)(h)){if(Mb(c,h,void 0,S,I,x,C))return!0}else{const O=S==null?void 0:S.clone(),K=I==null?void 0:I.clone();if(Nb(c,h,void 0,O,K,x,C))return S&&O&&S.copyFromClone(O),I&&K&&I.copyFromClone(K),!0}const j=Yt(h);if((0,d.isUnion)(j))return Mb(c,j,g,S,I,x,C);if((0,d.isUnion)(c))return Nb(c,h,g,S,I,x,C);if((0,d.isNoneInstance)(c)&&(0,d.isNoneInstance)(h)||(0,d.isNoneTypeClass)(c)&&((0,d.isNoneTypeClass)(h)||(0,d.isInstantiableClass)(h)&&d.ClassType.isBuiltIn(h,"NoneType")))return!0;if((0,d.isClassInstance)(h)&&d.ClassType.isBuiltIn(h,"type")){const O=h.typeArguments;if(O&&O.length>=1){if((0,d.isAnyOrUnknown)(O[0]))return(0,d.isClassInstance)(c)&&d.ClassType.isBuiltIn(h,"type")?!0:d.TypeBase.isInstantiable(c);if((0,d.isClassInstance)(O[0])||(0,d.isTypeVar)(O[0]))return Ot(c,(0,k.convertToInstantiable)(O[0]),g==null?void 0:g.createAddendum(),S,I,_,C)?!0:(g==null||g.addMessage(p.Localizer.DiagnosticAddendum.typeAssignmentMismatch().format({sourceType:at(h),destType:at(c)})),!1)}}if((0,d.isInstantiableClass)(c)){const O=Yt(h);if((0,d.isInstantiableClass)(O))return d.ClassType.isProtocolClass(c)&&d.ClassType.isProtocolClass(O)&&(0,d.isInstantiableClass)(h)&&!h.includeSubclasses?(g==null||g.addMessage(p.Localizer.DiagnosticAddendum.protocolSourceIsNotConcrete().format({sourceType:at((0,k.convertToInstance)(h)),destType:at(c)})),!1):Ym(c,O,g,S,I,_,C,!1)?!0:(g==null||g.addMessage(p.Localizer.DiagnosticAddendum.typeAssignmentMismatch().format({sourceType:at(h),destType:at(c)})),!1)}if((0,d.isClassInstance)(c)){if(d.ClassType.isBuiltIn(c,"Type")){const K=c.typeArguments;if(K&&K.length>=1&&d.TypeBase.isInstance(K[0])&&d.TypeBase.isInstantiable(h))return Ot(K[0],(0,k.convertToInstance)(h),g,S,I,_,C)}else if(d.ClassType.isBuiltIn(c,"type")){if((0,d.isAnyOrUnknown)(h)&&(_&16)!==0)return!1;if(d.TypeBase.isInstantiable(h))return!((0,d.isClass)(h)&&h.literalValue!==void 0)}else if(d.ClassType.isBuiltIn(c,["TypeGuard","StrictTypeGuard"])&&(x&64)!==0&&(0,d.isClassInstance)(h)&&d.ClassType.isBuiltIn(h,"bool"))return!0;const O=Yt(h);if((0,d.isClass)(O)&&d.TypeBase.isInstance(O)){if(c.literalValue!==void 0&&(O.literalValue===void 0||!d.ClassType.isLiteralValueSame(O,c)))return g==null||g.addMessage(p.Localizer.DiagnosticAddendum.literalAssignmentMismatch().format({sourceType:at(h),destType:at(c)})),!1;if(d.ClassType.isBuiltIn(c,"LiteralString")&&d.ClassType.isBuiltIn(O,"str")){if(O.literalValue!==void 0)return!0}else if(d.ClassType.isBuiltIn(O,"LiteralString")&&d.ClassType.isBuiltIn(c,"str")&&c.literalValue===void 0)return!0;return!!Ym(d.ClassType.cloneAsInstantiable(c),d.ClassType.cloneAsInstantiable(O),g,S,I,_,C,!0)}else if((0,d.isFunction)(O)||(0,d.isOverloadedFunction)(O)){const K=Ob(c,C);if(K)return Ot(K,O,g,S,I,_,C);if(pt&&(0,d.isClassInstance)(pt))return Ot(c,pt,g,S,I,_,C)}else if((0,d.isModule)(O)){if(d.ClassType.isBuiltIn(c,"ModuleType"))return!0;if(d.ClassType.isProtocolClass(c))return(0,ce.assignModuleToProtocol)(Bt,d.ClassType.cloneAsInstantiable(c),O,g,S,_,C)}else if((0,d.isInstantiableClass)(O)){const K=Ob(c,C);if(K)return Ot(K,O,g,S,I,_,C);if(d.ClassType.isProtocolClass(c))return(0,ce.assignClassToProtocol)(Bt,d.ClassType.cloneAsInstantiable(c),O,g,S,I,_,!0,C);const ne=O.details.effectiveMetaclass;if(ne)return(0,d.isAnyOrUnknown)(ne)?!0:Ym(d.ClassType.cloneAsInstantiable(c),ne,g,S,I,_,C,!1)}else{if((0,d.isAnyOrUnknown)(O))return(_&16)===0;if((0,d.isUnion)(O))return Ot(c,O,g,S,I,_,C)}}if((0,d.isFunction)(c)){let O,K=Yt(h);if((0,d.isClassInstance)(K)){const ne=Ta(K,"__call__",C);ne&&(K=(0,k.removeParamSpecVariadicsFromSignature)(ne))}if((0,d.isInstantiableClass)(K)&&K.literalValue===void 0){const ne=Rb(K,C);ne&&(K=ne)}if((0,d.isOverloadedFunction)(K)){if(c.details.paramSpec)return g==null||g.addMessage(p.Localizer.DiagnosticAddendum.paramSpecOverload()),!1;const ne=K.overloads,ie=ne.findIndex(pe=>d.FunctionType.isOverloaded(pe)?Ot(c,pe,g==null?void 0:g.createAddendum(),S==null?void 0:S.clone(),I==null?void 0:I.clone(),_,C):!1);if(ie<0)return g==null||g.addMessage(p.Localizer.DiagnosticAddendum.noOverloadAssignable().format({type:at(c)})),!1;O=ne[ie]}else if((0,d.isFunction)(K))O=K;else if((0,d.isAnyOrUnknown)(K))return(_&16)===0;if(O&&FA(c,O,g==null?void 0:g.createAddendum(),S!=null?S:new oe.TypeVarContext((0,k.getTypeVarScopeId)(c)),I!=null?I:new oe.TypeVarContext((0,k.getTypeVarScopeId)(O)),_,C))return!0}if((0,d.isOverloadedFunction)(c)){const O=g==null?void 0:g.createAddendum();return c.overloads.every(ne=>d.FunctionType.isOverloaded(ne)?(S&&S.addSolveForScope((0,k.getTypeVarScopeId)(ne)),Ot(ne,h,O==null?void 0:O.createAddendum(),S!=null?S:new oe.TypeVarContext((0,k.getTypeVarScopeId)(ne)),I,_,C)):!0)?!0:(O&&O.addMessage(p.Localizer.DiagnosticAddendum.overloadNotAssignable().format({name:c.overloads[0].details.name})),!1)}return(0,d.isClassInstance)(c)&&d.ClassType.isBuiltIn(c,"object")&&(_&1)===0?!0:(0,d.isNoneInstance)(h)&&(0,d.isClassInstance)(c)&&d.ClassType.isProtocolClass(c)&&je&&(0,d.isInstantiableClass)(je)?(0,ce.assignClassToProtocol)(Bt,d.ClassType.cloneAsInstantiable(c),je,g,S,I,_,!1,C):(0,d.isNoneInstance)(c)?(g==null||g.addMessage(p.Localizer.DiagnosticAddendum.assignToNone()),!1):(g==null||g.addMessage(p.Localizer.DiagnosticAddendum.typeAssignmentMismatch().format({sourceType:at(h),destType:at(c)})),!1)}function Mb(c,h,g,S,I,_,C){if((0,d.isTypeSame)(h,c,void 0,void 0,C))return!0;if((0,d.isUnion)(c)){if((_&4)!==0){const O=c.subtypes.filter(K=>!(0,d.isAnyOrUnknown)(K));if(O.length===1&&(0,d.isTypeVar)(O[0]))return Ot(O[0],h,void 0,S,I,_,C),!0}const A=[];let x=[...h.subtypes],j=!1;if(c.subtypes.forEach(O=>{if((0,k.requiresSpecialization)(O))A.push(O);else{const K=x.findIndex(ne=>(0,d.isTypeSame)(ne,O,void 0,void 0,C));K>=0?x.splice(K,1):j=!0}}),j||[...x].forEach(O=>{const K=A.findIndex(ne=>(0,d.isClass)(O)&&(0,d.isClass)(ne)&&d.TypeBase.isInstance(O)===d.TypeBase.isInstance(ne)&&d.ClassType.isSameGenericClass(O,ne));K>=0&&(Ot(A[K],O,g==null?void 0:g.createAddendum(),S,I,_,C)||(j=!0),A.splice(K,1),x=x.filter(ne=>ne!==O))}),!j&&(A.length!==0||x.length!==0)&&(A.length===0||A.some(O=>!(0,d.isTypeVar)(O))?j=!0:A.length===x.length?A.forEach((O,K)=>{const ne=x[K];Ot(O,ne,g==null?void 0:g.createAddendum(),S,I,_,C)||(j=!0)}):Ot(A[0],(0,d.combineTypes)(x),g==null?void 0:g.createAddendum(),S,I,_,C)||(j=!0)),!j)return!0}let w=!1;return(0,k.doForEachSubtype)(h,(A,x)=>{if(!w&&!Ot(c,A,void 0,S,I,_,C)){const j=Yt(A);let O=!1;(0,k.doForEachSubtype)(h,(K,ne)=>{O||x===ne||(0,d.isAnyOrUnknown)(K)||Ot(K,j,void 0,void 0,void 0,0,C)&&(O=!0)}),!O&&!Ot(c,j,g==null?void 0:g.createAddendum(),S,I,_,C)&&(w=!0)}}),w?(g==null||g.addMessage(p.Localizer.DiagnosticAddendum.typeAssignmentMismatch().format({sourceType:at(h),destType:at(c)})),!1):!0}function Nb(c,h,g,S,I,_,C){if(_&1){let x=!1;return(0,k.doForEachSubtype)(c,(j,O)=>{if(!x&&!Ot(j,h,g==null?void 0:g.createAddendum(),S,I,_,C)){let K=!1;(0,d.isAnyOrUnknown)(j)||(0,k.doForEachSubtype)(c,(ne,ie)=>{O!==ie&&!K&&Ot(ne,j,void 0,void 0,void 0,0,C)&&(K=!0)}),K||(x=!0)}}),x?(g==null||g.addMessage(p.Localizer.DiagnosticAddendum.typeAssignmentMismatch().format({sourceType:at(h),destType:at(c)})),!1):!0}const w=g?new l.DiagnosticAddendum:void 0;let A=!1;if((0,d.isNoneInstance)(h)&&(0,k.isOptionalType)(c))A=!0;else{let x,j,O;if((0,d.isClassInstance)(h)&&(0,k.isLiteralType)(h)&&d.UnionType.containsType(c,h,C))return!0;(0,k.doForEachSubtype)(c,K=>{const ne=S==null?void 0:S.clone(),ie=I==null?void 0:I.clone();if(Ot(K,h,w==null?void 0:w.createAddendum(),ne,ie,_,C)&&(A=!0,ne)){let pe=ne.getScore();(0,d.isTypeSame)(K,(0,k.stripLiteralValue)(h))&&(pe=Number.POSITIVE_INFINITY),(O===void 0||O<=pe)&&(O=pe,x=ne,j=ie)}}),S&&x&&S.copyFromClone(x),I&&j&&I.copyFromClone(j)}return A||(0,d.isTypeVar)(h)&&h.details.constraints.length>0&&(A=Ot(c,Yt(h),w==null?void 0:w.createAddendum(),S,I,_,C)),A?!0:(g&&w&&(g.addMessage(p.Localizer.DiagnosticAddendum.typeAssignmentMismatch().format({sourceType:at(h),destType:at(c)})),g.addAddendum(w)),!1)}function wA(c,h,g){return!(0,d.findSubtype)(h,S=>{var I;if((0,d.isTypeSame)(c,S,!0,void 0,g))return!1;const _=d.TypeVarType.getNameWithScope(c),C=((I=(0,k.getTypeCondition)(S))!==null&&I!==void 0?I:[]).filter(w=>w.typeVarName===_);return C.length===0?!0:!C.some(w=>w.typeVarName===d.TypeVarType.getNameWithScope(c)?c.details.boundType?((0,s.assert)(w.constraintIndex===0,"Expected constraint for bound TypeVar to have index of 0"),Ot(c.details.boundType,S,void 0,void 0,void 0,0,g)):c.details.constraints.length>0?((0,s.assert)(w.constraintIndex<c.details.constraints.length,"Constraint for constrained TypeVar is out of bounds"),Ot(c.details.constraints[w.constraintIndex],S,void 0,void 0,void 0,0,g)):!0:!1)})}function Rb(c,h=0){const g=(0,k.lookUpClassMember)(c,"__init__",12);if(g){const _=Fi(g),C=d.ClassType.cloneAsInstance(c),w=A=>{let x=os(C,A,void 0,void 0,h);return x&&(x=d.FunctionType.clone(x),x.details.declaredReturnType=C,x.specializedTypes&&(x.specializedTypes.returnType=C)),x};if((0,d.isFunction)(_))return w(_);if((0,d.isOverloadedFunction)(_)){const A=[];return _.overloads.forEach(x=>{const j=w(x);j&&A.push(j)}),A.length===0?void 0:A.length===1?A[0]:d.OverloadedFunctionType.create(A)}}const S=(0,k.lookUpClassMember)(c,"__new__",12);if(S){const _=Fi(S),C=w=>os(c,w,void 0,void 0,h,!0);if((0,d.isFunction)(_))return C(_);if((0,d.isOverloadedFunction)(_)){const w=[];return _.overloads.forEach(A=>{const x=C(A);x&&w.push(x)}),w.length===0?void 0:w.length===1?w[0]:d.OverloadedFunctionType.create(w)}}const I=d.FunctionType.createSynthesizedInstance("__new__",1);return I.details.declaredReturnType=d.ClassType.cloneAsInstance(c),d.FunctionType.addDefaultParameters(I),I}function Ob(c,h=0){if(!(0,d.isClassInstance)(c)||!d.ClassType.isProtocolClass(c))return;for(const S of c.details.mro)if((0,d.isClass)(S)&&d.ClassType.isProtocolClass(S)){for(const I of S.details.fields)if(I[0]!=="__call__"&&!I[1].isIgnoredForProtocolMatch()){let _=!1;if(Vt&&(0,d.isClass)(Vt)&&Vt.details.fields.has(I[0])&&(_=!0),!_)return}}const g=Ta(c,"__call__",h);if(g)return(0,k.removeParamSpecVariadicsFromSignature)(g)}function Ia(c,h,g,S,I,_,C,w){if((0,d.isTypeVar)(c)&&c.details.isSynthesized&&c.details.boundType&&(0,d.isClassInstance)(c.details.boundType)&&d.ClassType.isProtocolClass(c.details.boundType))return!0;if((0,d.isVariadicTypeVar)(c)&&!(0,d.isUnpacked)(h))return!1;let A=h,x=c,j=!1;if((C&2)===0)x=(0,k.applySolvedTypeVars)(c,I),(0,k.requiresSpecialization)(x)&&(j=!Ot(A,x,void 0,_,I,C^2|512|128,w),x=(0,k.applySolvedTypeVars)(c,I));else if(A=(0,k.applySolvedTypeVars)(h,_),(0,k.requiresSpecialization)(A)&&(j=!Ot(A,x,void 0,_,I,C^2|512|128,w),A=(0,k.applySolvedTypeVars)(h,_)),j)return S&&g!==void 0&&S.addMessage(p.Localizer.DiagnosticAddendum.paramAssignment().format({index:g+1,sourceType:at(c),destType:at(h)})),!1;return(!(0,d.isTypeVar)(x)||!x.details.isSynthesizedSelf)&&(0,d.isTypeVar)(A)&&A.details.isSynthesizedSelf&&A.details.boundType&&(A=(0,k.applySolvedTypeVars)(A.details.boundType,new oe.TypeVarContext((0,k.getTypeVarScopeId)(A)),!0)),!Ot(A,x,S==null?void 0:S.createAddendum(),_,I,C,w)&&!(0,d.isTypeSame)(c,h)?(S&&g!==void 0&&S.addMessage(p.Localizer.DiagnosticAddendum.paramAssignment().format({index:g+1,sourceType:at(c),destType:at(h)})),!1):!0}function EA(c,h){var g;if(h.argsIndex===void 0||c.params.length<h.argsIndex)return;let S=c.params.findIndex((A,x)=>x>=h.argsIndex&&A.source===k.ParameterSource.KeywordOnly);S<0&&(S=c.params.length);const _=((g=h.firstKeywordOnlyIndex)!==null&&g!==void 0?g:h.params.length)-h.argsIndex-1,C=c.params.slice(h.argsIndex,S-_),w=[];if(C.forEach(A=>{A.param.category===1?(0,d.isUnpackedVariadicTypeVar)(A.type)?w.push({type:A.type,isUnbounded:!1}):(0,d.isUnpackedClass)(A.type)&&A.type.tupleTypeArguments?(0,a.appendArray)(w,A.type.tupleTypeArguments):w.push({type:A.type,isUnbounded:!0}):w.push({type:A.type,isUnbounded:!1})}),w.length!==1||!(0,d.isVariadicTypeVar)(w[0].type)){let A;Tt&&(0,d.isInstantiableClass)(Tt)?A=(0,k.convertToInstance)((0,k.specializeTupleClass)(Tt,w,!0,!0,!0)):A=d.UnknownType.create(),c.params=[...c.params.slice(0,h.argsIndex),{param:{category:1,name:"_arg_combined",isNameSynthesized:!0,hasDeclaredType:!0,type:A},type:A,index:-1,source:k.ParameterSource.PositionOnly},...c.params.slice(h.argsIndex+C.length,c.params.length)];const x=c.params.findIndex(K=>K.param.category===1);c.argsIndex=x>=0?x:void 0;const j=c.params.findIndex(K=>K.param.category===2);c.kwargsIndex=j>=0?j:void 0;const O=c.params.findIndex(K=>K.source===k.ParameterSource.KeywordOnly);c.firstKeywordOnlyIndex=O>=0?O:void 0,c.positionOnlyParamCount=Math.max(0,c.params.findIndex(K=>K.source!==k.ParameterSource.PositionOnly||K.param.category!==0||K.param.hasDefault))}}function FA(c,h,g,S,I,_,C){var w,A,x,j,O,K,ne,ie,pe,Ie;let Le=!0;const et=(_&32)===0;_&=-33,c=(0,k.removeParamSpecVariadicsFromFunction)(c),h=(0,k.removeParamSpecVariadicsFromFunction)(h);const ke=(0,k.getParameterListDetails)(c),Ge=(0,k.getParameterListDetails)(h);EA(Ge,ke);const ut=(_&2)!==0?!!h.details.paramSpec:!!c.details.paramSpec,Ve=(A=(w=ke.argsIndex)!==null&&w!==void 0?w:ke.firstKeywordOnlyIndex)!==null&&A!==void 0?A:ke.params.length,Ze=(j=(x=Ge.argsIndex)!==null&&x!==void 0?x:Ge.firstKeywordOnlyIndex)!==null&&j!==void 0?j:Ge.params.length,yt=Math.min(Ve,Ze);for(let Et=0;Et<yt;Et++){const Ke=ke.params[Et],nt=Ge.params[Et],bt=nt.type,Pt=Ke.type,gt=(O=Ke.param.name)!==null&&O!==void 0?O:"",xt=(K=nt.param.name)!==null&&K!==void 0?K:"";gt&&!(0,ee.isPrivateOrProtectedName)(gt)&&!(0,ee.isPrivateOrProtectedName)(xt)&&!(Ke.source===k.ParameterSource.PositionOnly)&&Ke.param.category!==1&&nt.param.category!==1&&gt!==xt&&(g==null||g.createAddendum().addMessage(p.Localizer.DiagnosticAddendum.functionParamName().format({srcName:xt,destName:gt})),Le=!1),!!Ke.param.hasDefault&&!nt.param.hasDefault&&(g==null||g.createAddendum().addMessage(p.Localizer.DiagnosticAddendum.functionParamDefaultMissing().format({name:xt})),Le=!1),!(Et===0&&h.details.name==="__init__"&&d.FunctionType.isInstanceMethod(h)&&c.details.name==="__init__"&&d.FunctionType.isInstanceMethod(c)&&d.FunctionType.isOverloaded(c)&&Ke.param.hasDeclaredType)&&(Ia(Pt,bt,Et,g==null?void 0:g.createAddendum(),S,I,_,C)||((_&256)===0||!(0,d.isTypeVar)(bt)||!bt.details.isSynthesized)&&(Le=!1))}if(!d.FunctionType.shouldSkipArgsKwargsCompatibilityCheck(c)&&ke.firstPositionOrKeywordIndex<Ge.positionOnlyParamCount&&!ut&&(g==null||g.createAddendum().addMessage(p.Localizer.DiagnosticAddendum.argsPositionOnly().format({expected:Ge.positionOnlyParamCount,received:ke.firstPositionOrKeywordIndex})),Le=!1),Ve<Ze){if(!ut){const Et=Ge.params.filter(Ke=>!!Ke.param.name&&!Ke.param.hasDefault&&Ke.param.category===0).length;if(ke.argsIndex===void 0)Ve<Et&&ke.firstPositionOrKeywordIndex>0&&ke.firstPositionOrKeywordIndex<Ze&&(g==null||g.createAddendum().addMessage(p.Localizer.DiagnosticAddendum.functionTooFewParams().format({expected:Et,received:Ve})),Le=!1);else{const Ke=ke.params[ke.argsIndex].type;if(!(0,d.isAnyOrUnknown)(Ke))for(let nt=Ve;nt<Ze;nt++){const bt=Ge.params[nt].type;Ia(Ke,bt,nt,g==null?void 0:g.createAddendum(),S,I,_,C)||(Le=!1)}}}}else if(Ze<Ve)if(Ge.argsIndex!==void 0){const Et=Ge.params[Ge.argsIndex].type;for(let Ke=Ze;Ke<Ve;Ke++){const nt=ke.params[Ke].type;(0,d.isVariadicTypeVar)(nt)&&!(0,d.isVariadicTypeVar)(Et)?(g==null||g.addMessage(p.Localizer.DiagnosticAddendum.typeVarTupleRequiresKnownLength()),Le=!1):(Ia(nt,Et,Ke,g==null?void 0:g.createAddendum(),S,I,_,C)||(Le=!1),ke.params[Ke].source!==k.ParameterSource.PositionOnly&&Ge.kwargsIndex===void 0&&(g==null||g.addMessage(p.Localizer.DiagnosticAddendum.namedParamMissingInSource().format({name:(ne=ke.params[Ke].param.name)!==null&&ne!==void 0?ne:""})),Le=!1))}}else g==null||g.addMessage(p.Localizer.DiagnosticAddendum.functionTooManyParams().format({expected:Ze,received:Ve})),Le=!1;if(Ge.argsIndex!==void 0&&ke.argsIndex!==void 0&&!d.FunctionType.shouldSkipArgsKwargsCompatibilityCheck(c)){let Et=ke.params[ke.argsIndex].type,Ke=Ge.params[Ge.argsIndex].type;Tt&&(0,d.isInstantiableClass)(Tt)&&((0,d.isUnpacked)(Et)||(Et=d.ClassType.cloneForUnpacked(d.ClassType.cloneAsInstance((0,k.specializeTupleClass)(Tt,[{type:Et,isUnbounded:!0}],!0,!0)))),(0,d.isUnpacked)(Ke)||(Ke=d.ClassType.cloneForUnpacked(d.ClassType.cloneAsInstance((0,k.specializeTupleClass)(Tt,[{type:Ke,isUnbounded:!0}],!0,!0))))),Ia(Et,Ke,ke.params[ke.argsIndex].index,g==null?void 0:g.createAddendum(),S,I,_,C)||(Le=!1)}if(!d.FunctionType.shouldSkipArgsKwargsCompatibilityCheck(c)&&Ge.argsIndex===void 0&&ke.argsIndex!==void 0&&!ke.hasUnpackedVariadicTypeVar&&!ut&&(g==null||g.createAddendum().addMessage(p.Localizer.DiagnosticAddendum.argsParamMissing().format({paramName:(ie=ke.params[ke.argsIndex].param.name)!==null&&ie!==void 0?ie:""})),Le=!1),!ut){const Et=new Map;ke.firstKeywordOnlyIndex!==void 0&&ke.params.forEach((nt,bt)=>{bt>=ke.firstKeywordOnlyIndex&&nt.param.name&&nt.param.category===0&&Et.set(nt.param.name,nt)});let Ke=Ge.firstKeywordOnlyIndex!==void 0?Ge.firstKeywordOnlyIndex:Ge.params.length;Ve<Ze&&ke.argsIndex===void 0&&(Ke=Ve),Ke>=0&&Ge.params.forEach((nt,bt)=>{if(bt>=Ke&&nt.param.name&&nt.param.category===0){const Pt=Et.get(nt.param.name),gt=g==null?void 0:g.createAddendum(),xt=nt.type;if(!Pt)ke.kwargsIndex===void 0&&!nt.param.hasDefault?(gt&&gt.addMessage(p.Localizer.DiagnosticAddendum.namedParamMissingInDest().format({name:nt.param.name})),Le=!1):ke.kwargsIndex!==void 0&&(Ia(ke.params[ke.kwargsIndex].type,xt,ke.params[ke.kwargsIndex].index,g==null?void 0:g.createAddendum(),S,I,_,C)||(Le=!1));else{const fn=Pt.type,Kt=S?(0,k.applySolvedTypeVars)(fn,S):fn;Ia(Pt.type,xt,void 0,gt==null?void 0:gt.createAddendum(),S,I,_,C)||(gt&&gt.addMessage(p.Localizer.DiagnosticAddendum.namedParamTypeMismatch().format({name:nt.param.name,sourceType:at(Kt),destType:at(xt)})),Le=!1),!!Pt.param.hasDefault&&!nt.param.hasDefault&&(g==null||g.createAddendum().addMessage(p.Localizer.DiagnosticAddendum.functionParamDefaultMissing().format({name:nt.param.name})),Le=!1),Et.delete(nt.param.name)}}}),Et.forEach((nt,bt)=>{Ge.kwargsIndex!==void 0&&nt.param.name?(Ia(nt.param.type,Ge.params[Ge.kwargsIndex].type,nt.index,g==null?void 0:g.createAddendum(),S,I,_,C)||(Le=!1),Et.delete(bt)):(g==null||g.createAddendum().addMessage(p.Localizer.DiagnosticAddendum.namedParamMissingInSource().format({name:bt})),Le=!1)}),Ge.kwargsIndex!==void 0&&ke.kwargsIndex!==void 0&&(Ia(ke.params[ke.kwargsIndex].type,Ge.params[Ge.kwargsIndex].type,ke.params[ke.kwargsIndex].index,g==null?void 0:g.createAddendum(),S,I,_,C)||(Le=!1)),!d.FunctionType.shouldSkipArgsKwargsCompatibilityCheck(c)&&Ge.kwargsIndex===void 0&&h.details.paramSpec===void 0&&ke.kwargsIndex!==void 0&&(g==null||g.createAddendum().addMessage(p.Localizer.DiagnosticAddendum.kwargsParamMissing().format({paramName:ke.params[ke.kwargsIndex].param.name})),Le=!1)}if(ut&&((pe=h.details.paramSpec)===null||pe===void 0?void 0:pe.nameWithScope)===((Ie=c.details.paramSpec)===null||Ie===void 0?void 0:Ie.nameWithScope)){const Et=h.details.parameters.length,Ke=c.details.parameters.length;Et!==Ke&&(Et!==Ke-1||c.details.parameters[Ke-1].category!==0||!!c.details.parameters[Ke-1].name)&&(Le=!1)}const tn=(_&2)===0?I:S;if(tn.getTypeVars().forEach(Et=>{Ot(Et.typeVar,tn.getTypeVarType(Et.typeVar),void 0,S,I,0,C)}),S.isLocked()||S.getTypeVars().forEach(Et=>{if(Et.narrowBound){const Ke=(0,k.applySolvedTypeVars)(Et.narrowBound,S);Ke!==Et.narrowBound&&S.setTypeVarType(Et.typeVar,Ke,Et.wideBound,Et.retainLiteral)}}),ut){const Et=(_&2)===0?c:h,Ke=(_&2)===0?h:c;if(Et.details.paramSpec){const nt=Et.details.parameters.filter(Kt=>!(!Kt.name||Kt.category===0&&(0,d.isParamSpec)(Kt.type))).length;let bt=0;const Pt=[];Ke.details.parameters.forEach((Kt,ls)=>{bt<nt?Kt.name&&bt++:!Kt.name&&Kt.category===0&&Pt.length===0||Pt.push({category:Kt.category,name:Kt.name,isNameSynthesized:Kt.isNameSynthesized,hasDefault:!!Kt.hasDefault,type:d.FunctionType.getEffectiveParameterType(Ke,ls)})});const gt=Ke.details.paramSpec,xt=Et.details.paramSpec,fn=(_&2)===0?S:I;if(fn.hasSolveForScope(xt.scopeId)){const Kt=d.FunctionType.createInstance("","","",Ke.details.flags|64,Ke.details.docString);Kt.details.typeVarScopeId=Ke.details.typeVarScopeId,Pt.forEach(ls=>{d.FunctionType.addParameter(Kt,ls)}),Kt.details.paramSpec=gt?(0,k.convertToInstance)(gt):void 0,(0,te.assignTypeToTypeVar)(Bt,xt,Kt,void 0,fn)||(Pt.length>0||!gt||!(0,te.assignTypeToTypeVar)(Bt,xt,(0,k.convertToInstance)(gt),void 0,fn))&&(Le=!1)}else(!gt||!(0,d.isTypeSame)(gt,xt,!1,!0)||Pt.length>0)&&(Le=!1)}}if(et){const Et=di(c);if(!(0,d.isAnyOrUnknown)(Et)){const Ke=(0,k.applySolvedTypeVars)(di(h),I),nt=g==null?void 0:g.createAddendum();let bt=!1,Pt=_;h.details.declaredReturnType&&(0,k.containsLiteralType)(h.details.declaredReturnType,!0)&&(Pt|=128),((0,d.isNever)(Ke)||Ot(Et,Ke,nt==null?void 0:nt.createAddendum(),S,I,Pt,C)||(0,d.isClassInstance)(Ke)&&d.ClassType.isBuiltIn(Ke,["TypeGuard","StrictTypeGuard"])&&hn&&(0,d.isInstantiableClass)(hn)&&Ot(Et,d.ClassType.cloneAsInstance(hn),nt==null?void 0:nt.createAddendum(),S,I,_,C))&&(bt=!0),bt||(nt&&nt.addMessage(p.Localizer.DiagnosticAddendum.functionReturnTypeMismatch().format({sourceType:at(Ke),destType:at(Et)})),Le=!1)}}return Le}function xb(c,h){if(!h.tupleTypeArguments&&h.details.typeParameters.length>0&&h.typeArguments&&h.typeArguments.length<=h.details.typeParameters.length){const g=new oe.TypeVarContext((0,k.getTypeVarScopeId)(h));(0,te.populateTypeVarContextBasedOnExpectedType)(Bt,d.ClassType.cloneForSpecialization(h,void 0,!1),c,g,[]);let S=!1;const I=h.typeArguments.map((_,C)=>{const w=h.details.typeParameters[C],A=g.getTypeVarType(w);return A&&((0,d.isAny)(A)||(0,d.isAnyOrUnknown)(_))?(S=!0,A):_});if(S)return d.ClassType.cloneForSpecialization(h,I,!0)}}function Jm(c,h){const g=new l.DiagnosticAddendum,S=(0,k.mapSubtypes)(h,I=>{const _=(0,k.mapSubtypes)(c,C=>{if((0,d.isAnyOrUnknown)(c))return c;if(Ot(C,I,g)){if((0,d.isInstantiableClass)(C)&&(0,d.isInstantiableClass)(I)){const w=xb(C,I);w&&(I=w)}else if((0,d.isClassInstance)(C)&&(0,d.isClassInstance)(I)){const w=xb(d.ClassType.cloneAsInstantiable(C),d.ClassType.cloneAsInstantiable(I));w&&(I=d.ClassType.cloneAsInstance(w))}else{if(!(0,d.isTypeVar)(C)&&(0,d.isTypeVar)(I))return C;if((0,d.isAnyOrUnknown)(I))return C}return I}});return(0,d.isNever)(_)?I:_});return(0,d.isAnyOrUnknown)(h)?c:S}function kA(c,h,g,S=!0){var I,_;if((0,d.isOverloadedFunction)(c)){const pe=c.overloads.find(Ie=>!d.FunctionType.isOverloaded(Ie));if(!pe)return!0;c=pe}if(!(0,d.isFunction)(c))return g.addMessage(p.Localizer.DiagnosticAddendum.overrideType().format({type:at(c)})),!1;const C=(0,k.getParameterListDetails)(c),w=(0,k.getParameterListDetails)(h);let A=!0;d.FunctionType.isStaticMethod(c)?d.FunctionType.isStaticMethod(h)||(g.addMessage(p.Localizer.DiagnosticAddendum.overrideNotStaticMethod()),A=!1):d.FunctionType.isClassMethod(c)&&(d.FunctionType.isClassMethod(h)||(g.addMessage(p.Localizer.DiagnosticAddendum.overrideNotClassMethod()),A=!1)),d.FunctionType.isInstanceMethod(c)&&(d.FunctionType.isInstanceMethod(h)||(g.addMessage(p.Localizer.DiagnosticAddendum.overrideNotInstanceMethod()),A=!1));let x=!1;if(w.positionParamCount<C.positionParamCount&&w.argsIndex===void 0)x=!0;else if(w.positionParamCount>C.positionParamCount)for(let pe=C.positionParamCount;pe<w.positionParamCount;pe++){const Ie=w.params[pe].param;Ie.category===0&&Ie.name&&!Ie.hasDefault&&(x=!0)}x&&(g.addMessage(p.Localizer.DiagnosticAddendum.overridePositionalParamCount().format({baseCount:C.params.length,overrideCount:w.params.length})),A=!1);const j=Math.min(C.positionParamCount,w.positionParamCount);for(let pe=0;pe<j;pe++){if(pe===0&&(d.FunctionType.isInstanceMethod(h)||d.FunctionType.isClassMethod(h)||d.FunctionType.isConstructorMethod(h)))continue;const Ie=C.params[pe].param,Le=w.params[pe].param;if(pe>=C.positionOnlyParamCount&&!(0,ee.isPrivateOrProtectedName)(Ie.name||"")&&Ie.category===0&&Ie.name!==Le.name)Le.category===0&&S&&(w.params[pe].source===k.ParameterSource.PositionOnly?g.addMessage(p.Localizer.DiagnosticAddendum.overrideParamNamePositionOnly().format({index:pe+1,baseName:Ie.name||"*"})):g.addMessage(p.Localizer.DiagnosticAddendum.overrideParamName().format({index:pe+1,baseName:Ie.name||"*",overrideName:Le.name||"*"})),A=!1);else if(pe<w.positionOnlyParamCount&&pe>=C.positionOnlyParamCount)g.addMessage(p.Localizer.DiagnosticAddendum.overrideParamNamePositionOnly().format({index:pe+1,baseName:Ie.name||"*"})),A=!1;else{const et=C.params[pe].type,ke=w.params[pe].type,Ge=(0,d.isTypeVar)(et)&&et.details.isSynthesized,ut=(0,d.isTypeVar)(ke)&&ke.details.isSynthesized;!Ge&&!ut&&(Ie.category!==Le.category||!Ot(ke,et,g.createAddendum(),new oe.TypeVarContext((0,k.getTypeVarScopeId)(h)),new oe.TypeVarContext((0,k.getTypeVarScopeId)(c)),8))&&(g.addMessage(p.Localizer.DiagnosticAddendum.overrideParamType().format({index:pe+1,baseType:at(et),overrideType:at(ke)})),A=!1),C.params[pe].param.hasDefault&&!w.params[pe].param.hasDefault&&(g.addMessage(p.Localizer.DiagnosticAddendum.overrideParamNoDefault().format({index:pe+1})),A=!1)}}if(C.argsIndex!==void 0)if(w.argsIndex===void 0)g.addMessage(p.Localizer.DiagnosticAddendum.overrideParamNameMissing().format({name:(I=C.params[C.argsIndex].param.name)!==null&&I!==void 0?I:"?"})),A=!1;else{const pe=w.params[w.argsIndex].type,Ie=C.params[C.argsIndex].type;Ot(pe,Ie,g.createAddendum(),new oe.TypeVarContext((0,k.getTypeVarScopeId)(h)),void 0,8)||(g.addMessage(p.Localizer.DiagnosticAddendum.overrideParamKeywordType().format({name:(_=w.params[w.argsIndex].param.name)!==null&&_!==void 0?_:"?",baseType:at(Ie),overrideType:at(pe)})),A=!1)}const O=C.params.filter(pe=>pe.source===k.ParameterSource.KeywordOnly&&pe.param.category===0),K=w.params.filter(pe=>pe.source===k.ParameterSource.KeywordOnly&&pe.param.category===0);O.forEach(pe=>{var Ie,Le,et;const ke=K.find(Ge=>pe.param.name===Ge.param.name);if(!ke&&w.kwargsIndex===void 0)g.addMessage(p.Localizer.DiagnosticAddendum.overrideParamNameMissing().format({name:(Ie=pe.param.name)!==null&&Ie!==void 0?Ie:"?"})),A=!1;else{let Ge=ke==null?void 0:ke.type;Ge||(Ge=w.params[w.kwargsIndex].type),Ot(Ge,pe.type,g.createAddendum(),new oe.TypeVarContext((0,k.getTypeVarScopeId)(h)),void 0,8)||(g.addMessage(p.Localizer.DiagnosticAddendum.overrideParamKeywordType().format({name:(Le=pe.param.name)!==null&&Le!==void 0?Le:"?",baseType:at(pe.type),overrideType:at(Ge)})),A=!1),ke&&pe.param.hasDefault&&!ke.param.hasDefault&&(g.addMessage(p.Localizer.DiagnosticAddendum.overrideParamKeywordNoDefault().format({name:(et=ke.param.name)!==null&&et!==void 0?et:"?"})),A=!1)}}),K.forEach(pe=>{var Ie;O.find(et=>pe.param.name===et.param.name)||C.kwargsIndex===void 0&&(pe.param.hasDefault||(g.addMessage(p.Localizer.DiagnosticAddendum.overrideParamNameExtra().format({name:(Ie=pe.param.name)!==null&&Ie!==void 0?Ie:"?"})),A=!1))});const ne=di(c),ie=di(h);return Ot(ne,ie,g.createAddendum(),new oe.TypeVarContext((0,k.getTypeVarScopeId)(c)),void 0,8)||(g.addMessage(p.Localizer.DiagnosticAddendum.overrideReturnType().format({baseType:at(ne),overrideType:at(ie)})),A=!1),A}function DA(c,h,g,S=0,I=0){if(I>d.maxTypeRecursionCount||(I++,(0,d.isAnyOrUnknown)(h)))return h;let _=h;if((0,d.isTypeVar)(h)){if((0,d.isTypeSame)(h,c,void 0,void 0,I))return h;_=Yt(h)}if(c.details.boundType&&!Ot(c.details.boundType,_,g.createAddendum(),void 0,void 0,S,I)){c.details.isSynthesized||g.addMessage(p.Localizer.DiagnosticAddendum.typeBound().format({sourceType:at(_),destType:at(c.details.boundType),name:d.TypeVarType.getReadableName(c)}));return}if(c.details.isParamSpec){if((0,d.isParamSpec)(h)||(0,d.isFunction)(h)&&d.FunctionType.isParamSpecValue(h)||(0,d.isClassInstance)(h)&&d.ClassType.isBuiltIn(h,"Concatenate"))return h;g.addMessage(p.Localizer.DiagnosticAddendum.typeParamSpec().format({type:at(h),name:d.TypeVarType.getReadableName(c)}));return}if((0,d.isTypeVar)(h)&&h.details.isParamSpec){g.addMessage(p.Localizer.Diagnostic.paramSpecContext());return}const C=c.details.constraints;if(C.length===0)return h;if((0,d.isTypeVar)(h)&&h.details.constraints.length>0){if(h.details.constraints.every(w=>C.some(A=>Ot(A,w,void 0,void 0,void 0,0,I))))return h}else{let w;for(const A of C)Ot(A,_,void 0,void 0,void 0,0,I)&&(!w||Ot(w,A,void 0,void 0,void 0,0,I))&&(w=A);if(w)return w}g.addMessage(p.Localizer.DiagnosticAddendum.typeConstrainedTypeVar().format({type:at(h),name:d.TypeVarType.getReadableName(c)}))}function Lb(c){const h=new Map;c.details.mro.forEach(S=>{(0,d.isInstantiableClass)(S)&&S.details.fields.forEach((I,_)=>{if(I.isClassMember()){let C;const w=(0,H.getLastTypedDeclaredForSymbol)(I);w&&w.type===3?C=!!(Xd(w.node,!0)&8):C=!1,h.has(_)||h.set(_,{symbol:I,symbolName:_,isAbstract:C,classType:S})}})});const g=[];return h.forEach(S=>{S.isAbstract&&g.push(S)}),g}function os(c,h,g,S,I=0,_=!1,C){if((0,d.isFunction)(h)){if(!c)return d.FunctionType.clone(h,!0);if(d.FunctionType.isInstanceMethod(h)){const w=(0,d.isClassInstance)(c)?c:d.ClassType.cloneAsInstance((0,k.specializeClassType)(c));return Xm(c,h,g||d.ClassType.cloneAsInstantiable(w),S,I,C||w,(0,d.isClassInstance)(c))}if(d.FunctionType.isClassMethod(h)||_&&d.FunctionType.isConstructorMethod(h)){const w=(0,d.isInstantiableClass)(c)?c:d.ClassType.cloneAsInstantiable(c),A=C?(0,d.isInstantiableClass)(c)?C:(0,k.convertToInstantiable)(C):w;return Xm(d.TypeBase.isInstance(c)?d.ClassType.cloneAsInstantiable(c):c,h,g||w,S,I,A,!0)}if(d.FunctionType.isStaticMethod(h)){const w=(0,d.isInstantiableClass)(c)?c:d.ClassType.cloneAsInstantiable(c);return Xm(d.TypeBase.isInstance(c)?d.ClassType.cloneAsInstantiable(c):c,h,g||w,S,I,void 0,!1)}}else if((0,d.isOverloadedFunction)(h)){const w=d.OverloadedFunctionType.create([]);if(h.overloads.forEach(A=>{const x=os(c,A,g,void 0,I,_,C);x&&d.OverloadedFunctionType.addOverload(w,x)}),w.overloads.length===1)return w.overloads[0];if(w.overloads.length===0){S&&h.overloads.forEach(A=>{os(c,A,g,S,I,_,C)});return}return w}return h}function Xm(c,h,g,S,I,_,C=!0){const w=new oe.TypeVarContext((0,k.getTypeVarScopeId)(g));if(_&&h.details.parameters.length>0){const x=h.details.parameters[0],j=d.FunctionType.getEffectiveParameterType(h,0),O=(0,k.stripLiteralValue)(_);w.addSolveForScope((0,k.getTypeVarScopeId)(h));const K=new l.DiagnosticAddendum;if((0,d.isTypeVar)(j)&&j.details.boundType&&(0,d.isClassInstance)(j.details.boundType)&&d.ClassType.isProtocolClass(j.details.boundType))w.isLocked()||w.setTypeVarType(j,d.TypeBase.isInstantiable(j)?(0,k.convertToInstance)(O):O);else if(!Ot(j,O,K,w,void 0,0,I)&&x.name&&!x.isNameSynthesized&&x.hasDeclaredType)if(S){const ne=h.details.name||"(unnamed)";Xe(F.getFileInfo(S).diagnosticRuleSet.reportGeneralTypeIssues,o.DiagnosticRule.reportGeneralTypeIssues,p.Localizer.Diagnostic.bindTypeMismatch().format({type:at(c),methodName:ne,paramName:x.name})+K.getString(),S)}else return}di(h);const A=(0,k.applySolvedTypeVars)(h,w);return d.FunctionType.clone(A,C,c,(0,k.getTypeVarScopeId)(c))}function zb(c){return re.printObjectTypeForClass(c,Ue.printTypeFlags,di)}function PA(c){return re.printFunctionParts(c,Ue.printTypeFlags,di)}function at(c,h=!1){let g=Ue.printTypeFlags;return h&&(g|=32),re.printType(c,g,di)}function AA(c){const h=F.getFileInfo(c),g=new v.Parser,S=c.strings[0].value,I=c.strings[0].start+c.strings[0].token.prefixLength+c.strings[0].token.quoteMarkLength,_=new v.ParseOptions;_.isStubFile=h.isStubFile,_.pythonVersion=h.executionEnvironment.pythonVersion,_.reportErrorsForParsedStringContents=!0;const C=g.parseTextExpression(h.fileContents,I,S.length,_,void 0,void 0,h.typingSymbolAliases);if(C.parseTree&&C.parseTree.nodeType!==62)return C.diagnostics.forEach(w=>{st(w.message,c)}),C.parseTree.parent=c,C.parseTree}function MA(c,h){const g=F.getFlowNode(c);if(!!g)return Ca.narrowConstrainedTypeVar(g,h)}const Bt={runWithCancellationToken:fe,getType:Lr,getTypeOfExpression:rt,getTypeOfAnnotation:zr,getTypeOfClass:ti,getTypeOfFunction:br,getTypeOfExpressionExpectingType:Qc,getExpectedType:$v,evaluateTypeForSubnode:Yc,evaluateTypesForStatement:tf,evaluateTypesForMatchStatement:pA,evaluateTypesForCaseStatement:Wm,evaluateTypeOfParameter:ef,canBeTruthy:$c,canBeFalsy:Wc,removeTruthinessFromType:Gv,removeFalsinessFromType:Kv,verifyRaiseExceptionType:JP,verifyDeleteExpression:Dm,isAfterNodeReachable:Fm,isNodeReachable:_a,isAsymmetricDescriptorAssignment:Nt,suppressDiagnostics:bo,getDeclarationsForStringNode:yA,getDeclarationsForNameNode:gA,getTypeForDeclaration:Gm,resolveAliasDeclaration:kb,resolveAliasDeclarationWithInfo:Db,getTypeOfIterable:Hv,getTypeOfIterator:Es,getGetterTypeFromProperty:CA,getTypeOfArgument:Sr,markNamesAccessed:QP,getScopeIdForNode:vr,makeTopLevelTypeVarsConcrete:Yt,mapSubtypesExpandTypeVars:rr,lookUpSymbolRecursive:$r,getDeclaredTypeOfSymbol:Sa,getEffectiveTypeOfSymbol:Fs,getEffectiveTypeOfSymbolForUsage:Cl,getInferredTypeOfDeclaration:Km,getDeclaredTypeForExpression:wm,getFunctionDeclaredReturnType:Ab,getFunctionInferredReturnType:Pb,getBestOverloadForArguments:ab,getBuiltInType:ai,getTypeOfMember:Fi,getTypeOfObjectMember:Ur,getBoundMethod:Ta,getTypeOfMagicMethodReturn:Br,bindFunctionToClassOrObject:os,getCallSignatureInfo:UP,getAbstractMethods:Lb,narrowConstrainedTypeVar:MA,assignType:Ot,validateOverrideMethod:kA,assignTypeToExpression:as,getTypedDictClassType:VP,getTupleClassType:BP,getObjectType:WP,getBuiltInObject:Fn,getTypingType:Vr,verifyTypeArgumentsAssignable:Qm,inferReturnTypeIfNecessary:Hm,addError:st,addWarning:qP,addInformation:qd,addUnusedCode:GP,addDeprecated:KP,addDiagnostic:Xe,addDiagnosticForTextRange:Qv,printType:at,printFunctionParts:PA,getTypeCacheEntryCount:Ae,disposeEvaluator:Fe,useSpeculativeMode:Ei,setTypeForNode:He,checkForCancellation:ge},Ca=(0,P.getCodeFlowEngine)(Bt,mt);return Bt}t.createTypeEvaluator=$e})(wv);var CV=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),wV=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Fv=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&CV(e,t,n);return wV(e,t),e};Object.defineProperty(cm,"__esModule",{value:!0});cm.Checker=void 0;const AD=qt,jn=Oi,lt=Is,EV=Hn,Wi=hl,fI=Rn,Ne=ir,MD=ws,FV=xd,ps=Fv(kt),kV=Bn,pI=Sn,DV=Ah,ND=vn,Qn=Fv(ze),RD=rs,PV=ca,hI=ua,AV=qi,MV=is,NV=ya,Cr=Fv(Dn),or=Ii,OD=wv,he=wn,wt=$n,Nl=xr,RV=new Map([["Tuple",{version:Wi.PythonVersion.V3_9,fullName:"builtins.tuple",replacementText:"tuple"}],["List",{version:Wi.PythonVersion.V3_9,fullName:"builtins.list",replacementText:"list"}],["Dict",{version:Wi.PythonVersion.V3_9,fullName:"builtins.dict",replacementText:"dict"}],["Set",{version:Wi.PythonVersion.V3_9,fullName:"builtins.set",replacementText:"set"}],["FrozenSet",{version:Wi.PythonVersion.V3_9,fullName:"builtins.frozenset",replacementText:"frozenset"}],["Type",{version:Wi.PythonVersion.V3_9,fullName:"builtins.type",replacementText:"type"}],["Deque",{version:Wi.PythonVersion.V3_9,fullName:"collections.deque",replacementText:"collections.deque"}],["DefaultDict",{version:Wi.PythonVersion.V3_9,fullName:"collections.defaultdict",replacementText:"collections.defaultdict"}],["OrderedDict",{version:Wi.PythonVersion.V3_9,fullName:"collections.OrderedDict",replacementText:"collections.OrderedDict"}],["Counter",{version:Wi.PythonVersion.V3_9,fullName:"collections.Counter",replacementText:"collections.Counter"}],["ChainMap",{version:Wi.PythonVersion.V3_9,fullName:"collections.ChainMap",replacementText:"collections.ChainMap"}]]),OV=new Map([["Optional",{version:Wi.PythonVersion.V3_10,fullName:"typing.Optional",replacementText:"| None"}],["Union",{version:Wi.PythonVersion.V3_10,fullName:"typing.Union",replacementText:"|"}]]);class xV extends RD.ParseTreeWalker{constructor(e,n,i){super(),this._importResolver=e,this._evaluator=n,this._moduleNode=i,this._isUnboundCheckSuppressed=!1,this._scopedNodes=[],this._fileInfo=ps.getFileInfo(i)}check(){this._scopedNodes.push(this._moduleNode),this._walkStatementsAndReportUnreachable(this._moduleNode.statements);const e=ps.getDunderAllInfo(this._moduleNode);e&&(this._evaluator.markNamesAccessed(this._moduleNode,e.names),this._reportUnusedDunderAllSymbols(e.stringNodes)),this._validateSymbolTables(),this._reportDuplicateImports(),kv.report(this._importResolver,this._evaluator,this._fileInfo,this._moduleNode)}walk(e){ps.isCodeUnreachable(e)?this._evaluator.suppressDiagnostics(e,()=>{super.walk(e)}):super.walk(e)}visitSuite(e){return this._walkStatementsAndReportUnreachable(e.statements),!1}visitStatementList(e){return e.statements.forEach(n=>{(0,MD.isExpressionNode)(n)&&(this._evaluator.getType(n),this._reportUnusedExpression(n))}),!0}visitClass(e){const n=this._evaluator.getTypeOfClass(e);return this.walk(e.suite),this.walkMultiple(e.decorators),this.walkMultiple(e.arguments),n&&(he.ClassType.isProtocolClass(n.classType)&&(e.arguments.forEach(i=>{if(!i.name){const r=this._evaluator.getType(i.valueExpression);r&&(0,he.isInstantiableClass)(r)&&!he.ClassType.isBuiltIn(r,"Protocol")&&!he.ClassType.isBuiltIn(r,"Generic")&&(he.ClassType.isProtocolClass(r)||this._evaluator.addError(Ne.Localizer.Diagnostic.protocolBaseClass().format({classType:this._evaluator.printType(n.classType,!1),baseType:this._evaluator.printType(r,!1)}),i.valueExpression))}}),this._validateProtocolTypeParamVariance(e,n.classType)),this._fileInfo.isStubFile||(this._validateBaseClassOverrides(n.classType),this._validateSlotsClassVarConflict(n.classType)),this._validateMultipleInheritanceCompatibility(n.classType,e.name),this._validateConstructorConsistency(n.classType),this._validateFinalMemberOverrides(n.classType),this._validateInstanceVariableInitialization(n.classType),this._validateFinalClassNotAbstract(n.classType,e),this._validateDataClassPostInit(n.classType,e),this._validateProtocolCompatibility(n.classType,e),this._reportDuplicateEnumMembers(n.classType),he.ClassType.isTypedDictClass(n.classType)&&this._validateTypedDictClassSuite(e.suite),he.ClassType.isEnumClass(n.classType)&&this._validateEnumClassOverride(e,n.classType)),this._scopedNodes.push(e),!1}visitFunction(e){var n;const i=this._evaluator.getTypeOfFunction(e),r=Qn.getEnclosingClass(e,!0);if(i){let l=!1;e.parameters.forEach((u,f)=>{if(u.name)if(u.category===1){const y=u.typeAnnotation||u.typeAnnotationComment;if(y&&y.nodeType===35&&y.memberName.value==="args"){const p=this._evaluator.getType(y.leftExpression);p&&(0,he.isTypeVar)(p)&&p.details.isParamSpec&&(l=!0)}}else u.category===2&&(l=!1);if(u.name&&u.category===0&&l&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.namedParamAfterParamSpecArgs().format({name:u.name.value}),u.name),u.name&&u.name.value!=="_"){const y=i.functionType.details.parameters.find(p=>{var b;return p.name===((b=u.name)===null||b===void 0?void 0:b.value)});if(y){const p=y.type;if((0,he.isUnknown)(p)||(0,he.isTypeVar)(p)&&p.details.isSynthesized&&!p.details.isSynthesizedSelf)this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownParameterType,lt.DiagnosticRule.reportUnknownParameterType,Ne.Localizer.Diagnostic.paramTypeUnknown().format({paramName:u.name.value}),u.name);else if((0,wt.isPartlyUnknown)(p)){const v=new jn.DiagnosticAddendum;v.addMessage(Ne.Localizer.DiagnosticAddendum.paramType().format({paramType:this._evaluator.printType(p,!0)})),this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownParameterType,lt.DiagnosticRule.reportUnknownParameterType,Ne.Localizer.Diagnostic.paramTypePartiallyUnknown().format({paramName:u.name.value})+v.getString(),u.name)}let b=!1;(y.typeAnnotation||(0,he.isTypeVar)(p)&&p.details.isSynthesizedSelf)&&(b=!0),b||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportMissingParameterType,lt.DiagnosticRule.reportMissingParameterType,Ne.Localizer.Diagnostic.paramAnnotationMissing().format({name:u.name.value}),u.name)}}if(u.defaultValue&&this._fileInfo.isStubFile){const y=this._evaluator.getType(u.defaultValue);(!y||!(0,wt.isEllipsisType)(y))&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportInvalidStubStatement,lt.DiagnosticRule.reportInvalidStubStatement,Ne.Localizer.Diagnostic.defaultValueNotEllipsis(),u.defaultValue)}});const o=i.functionType.details.parameters.filter(u=>!!(u.typeAnnotation&&(0,he.isTypeVar)(u.type)&&(0,he.isParamSpec)(u.type)&&u.category!==0&&u.name&&u.type.paramSpecAccess));o.length===1&&o[0].typeAnnotation&&this._evaluator.addError(Ne.Localizer.Diagnostic.paramSpecArgsKwargsUsage(),o[0].typeAnnotation),this._fileInfo.isStubFile&&(e.returnTypeAnnotation||((n=e.functionAnnotationComment)===null||n===void 0?void 0:n.returnTypeAnnotation)||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownParameterType,lt.DiagnosticRule.reportUnknownParameterType,Ne.Localizer.Diagnostic.returnTypeUnknown(),e.name)),r&&this._validateMethod(e,i.functionType,r)}e.parameters.forEach((l,o)=>{if(l.defaultValue&&this.walk(l.defaultValue),l.typeAnnotation&&this.walk(l.typeAnnotation),l.typeAnnotationComment&&this.walk(l.typeAnnotationComment),i){const u=l.typeAnnotation||l.typeAnnotationComment;if(u&&o<i.functionType.details.parameters.length){const f=i.functionType.details.parameters[o].type;(0,he.isTypeVar)(f)&&f.details.variance===1&&!f.details.isSynthesized&&i.functionType.details.name!=="__init__"&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.paramTypeCovariant(),u)}}}),e.returnTypeAnnotation&&this.walk(e.returnTypeAnnotation),e.functionAnnotationComment&&(this.walk(e.functionAnnotationComment),this._fileInfo.diagnosticRuleSet.reportTypeCommentUsage!=="none"&&this._fileInfo.executionEnvironment.pythonVersion>=Wi.PythonVersion.V3_5&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportTypeCommentUsage,lt.DiagnosticRule.reportTypeCommentUsage,Ne.Localizer.Diagnostic.typeCommentDeprecated(),e.functionAnnotationComment)),this.walkMultiple(e.decorators),e.parameters.forEach(l=>{l.name&&this.walk(l.name)});const s=ps.getCodeFlowComplexity(e)>OD.maxCodeComplexity;if(s?this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.codeTooComplexToAnalyze(),e.name):this.walk(e.suite),i&&(s||this._validateFunctionReturn(e,i.functionType),this._validateDunderSignatures(e,i.functionType,r!==void 0),this._validateStrictTypeGuardFunction(e,i.functionType,r!==void 0),this._validateFunctionTypeVarUsage(e,i.functionType)),this._fileInfo.isStubFile&&e.name.value==="__getattr__"){const l=(0,AV.getScopeForNode)(e);(l==null?void 0:l.type)===3&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportIncompleteStub,lt.DiagnosticRule.reportIncompleteStub,Ne.Localizer.Diagnostic.stubUsesGetAttr(),e.name)}if(this._scopedNodes.push(e),i&&(0,he.isOverloadedFunction)(i.decoratedType)){const l=i.decoratedType.overloads;l.length>1&&l.length<100&&this._validateOverloadConsistency(e,l[l.length-1],l.slice(0,l.length-1))}return!1}visitLambda(e){this._evaluator.getType(e),this.walkMultiple([...e.parameters,e.expression]),e.parameters.forEach(i=>{if(i.name){const r=this._evaluator.getType(i.name);r&&((0,he.isUnknown)(r)?this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownLambdaType,lt.DiagnosticRule.reportUnknownLambdaType,Ne.Localizer.Diagnostic.paramTypeUnknown().format({paramName:i.name.value}),i.name):(0,wt.isPartlyUnknown)(r)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownLambdaType,lt.DiagnosticRule.reportUnknownLambdaType,Ne.Localizer.Diagnostic.paramTypePartiallyUnknown().format({paramName:i.name.value}),i.name))}});const n=this._evaluator.getType(e.expression);return n&&((0,he.isUnknown)(n)?this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownLambdaType,lt.DiagnosticRule.reportUnknownLambdaType,Ne.Localizer.Diagnostic.lambdaReturnTypeUnknown(),e.expression):(0,wt.isPartlyUnknown)(n)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownLambdaType,lt.DiagnosticRule.reportUnknownLambdaType,Ne.Localizer.Diagnostic.lambdaReturnTypePartiallyUnknown().format({returnType:this._evaluator.printType(n,!0)}),e.expression)),this._scopedNodes.push(e),!1}visitCall(e){var n;if(this._validateIsInstanceCall(e),this._validateIllegalDefaultParamInitializer(e),(this._fileInfo.diagnosticRuleSet.reportUnusedCallResult!=="none"||this._fileInfo.diagnosticRuleSet.reportUnusedCoroutine!=="none")&&((n=e.parent)===null||n===void 0?void 0:n.nodeType)===47){const i=e.leftExpression.nodeType===38&&e.leftExpression.value==="reveal_type",r=this._evaluator.getType(e);!i&&r&&this._isTypeValidForUnusedValueTest(r)&&(this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnusedCallResult,lt.DiagnosticRule.reportUnusedCallResult,Ne.Localizer.Diagnostic.unusedCallResult().format({type:this._evaluator.printType(r,!1)}),e),(0,he.isClassInstance)(r)&&he.ClassType.isBuiltIn(r,"Coroutine")&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnusedCoroutine,lt.DiagnosticRule.reportUnusedCoroutine,Ne.Localizer.Diagnostic.unusedCoroutine(),e))}return!0}visitAwait(e){var n;if(this._fileInfo.diagnosticRuleSet.reportUnusedCallResult!=="none"&&((n=e.parent)===null||n===void 0?void 0:n.nodeType)===47&&e.expression.nodeType===9){const i=this._evaluator.getType(e);i&&this._isTypeValidForUnusedValueTest(i)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnusedCallResult,lt.DiagnosticRule.reportUnusedCallResult,Ne.Localizer.Diagnostic.unusedCallResult().format({type:this._evaluator.printType(i,!1)}),e)}return!0}visitFor(e){return this._evaluator.evaluateTypesForStatement(e),!0}visitList(e){return this._validateIllegalDefaultParamInitializer(e),!0}visitSet(e){return this._validateIllegalDefaultParamInitializer(e),!0}visitDictionary(e){return this._validateIllegalDefaultParamInitializer(e),!0}visitListComprehension(e){return this._scopedNodes.push(e),!0}visitListComprehensionIf(e){return this._reportUnnecessaryConditionExpression(e.testExpression),!0}visitIf(e){return this._evaluator.getType(e.testExpression),this._reportUnnecessaryConditionExpression(e.testExpression),!0}visitWhile(e){return this._evaluator.getType(e.testExpression),this._reportUnnecessaryConditionExpression(e.testExpression),!0}visitWith(e){return e.withItems.forEach(n=>{this._evaluator.evaluateTypesForStatement(n)}),!0}visitReturn(e){let n;const i=Qn.getEnclosingFunction(e),r=i?this._evaluator.getFunctionDeclaredReturnType(i):void 0;if(e.returnExpression?n=this._evaluator.getType(e.returnExpression)||he.UnknownType.create():n=he.NoneType.createInstance(),this._evaluator.isNodeReachable(e,void 0)&&i){if(r)if((0,he.isNever)(r))this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.noReturnContainsReturn(),e);else{const a=new jn.DiagnosticAddendum;let s=!1;if(this._evaluator.assignType(r,n,a,new Nl.TypeVarContext,void 0,64))s=!0;else{const l=(0,wt.getTypeVarArgumentsRecursive)(r);if(l&&l.some(o=>o.details.constraints.length>0)){const o=new Nl.TypeVarContext;for(const u of l)if(u.details.constraints.length>0){const f=this._evaluator.narrowConstrainedTypeVar(e,u);f&&(o.setTypeVarType(u,f),o.addSolveForScope((0,wt.getTypeVarScopeId)(u)))}if(!o.isEmpty()){const u=(0,wt.applySolvedTypeVars)(r,o);this._evaluator.assignType(u,n,a,void 0,void 0,64)&&(s=!0)}}}s||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.returnTypeMismatch().format({exprType:this._evaluator.printType(n,!1),returnType:this._evaluator.printType(r,!1)})+a.getString(),e.returnExpression?e.returnExpression:e)}(0,he.isUnknown)(n)?this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownVariableType,lt.DiagnosticRule.reportUnknownVariableType,Ne.Localizer.Diagnostic.returnTypeUnknown(),e.returnExpression):(0,wt.isPartlyUnknown)(n)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownVariableType,lt.DiagnosticRule.reportUnknownVariableType,Ne.Localizer.Diagnostic.returnTypePartiallyUnknown().format({returnType:this._evaluator.printType(n,!0)}),e.returnExpression)}return!0}visitYield(e){const n=e.expression?this._evaluator.getType(e.expression):he.NoneType.createInstance();return this._validateYieldType(e,n||he.UnknownType.create()),!0}visitYieldFrom(e){const n=this._evaluator.getType(e.expression)||he.UnknownType.create();let i;if((0,he.isClassInstance)(n)&&he.ClassType.isBuiltIn(n,"Coroutine"))i=he.UnknownType.create();else{i=this._evaluator.getTypeOfIterable(n,!1,e)||he.UnknownType.create();const r=(0,wt.getGeneratorTypeArgs)(i);r?i=r.length>=1?r[0]:he.UnknownType.create():i=this._evaluator.getTypeOfIterator(n,!1,e)||he.UnknownType.create()}return this._validateYieldType(e,i),!0}visitRaise(e){if(this._evaluator.verifyRaiseExceptionType(e),e.valueExpression){const n=this._evaluator.getBuiltInType(e,"BaseException"),i=this._evaluator.getType(e.valueExpression);if(i&&n&&(0,he.isInstantiableClass)(n)){const r=new jn.DiagnosticAddendum;(0,wt.doForEachSubtype)(i,a=>{a=this._evaluator.makeTopLevelTypeVarsConcrete(a),!(0,he.isAnyOrUnknown)(a)&&!(0,he.isNoneInstance)(a)&&((0,he.isClass)(a)?(0,wt.derivesFromClassRecursive)(a,n,!1)||r.addMessage(Ne.Localizer.Diagnostic.exceptionTypeIncorrect().format({type:this._evaluator.printType(a,!1)})):r.addMessage(Ne.Localizer.Diagnostic.exceptionTypeIncorrect().format({type:this._evaluator.printType(a,!1)})))}),r.isEmpty()||this._evaluator.addError(Ne.Localizer.Diagnostic.expectedExceptionObj()+r.getString(),e.valueExpression)}}return!0}visitExcept(e){if(e.typeExpression){this._evaluator.evaluateTypesForStatement(e);const n=this._evaluator.getType(e.typeExpression);n&&this._validateExceptionType(n,e.typeExpression)}return!0}visitAssert(e){e.exceptionExpression&&this._evaluator.getType(e.exceptionExpression);const n=this._evaluator.getType(e.testExpression);return n&&(0,he.isClassInstance)(n)&&(0,wt.isTupleClass)(n)&&n.tupleTypeArguments&&n.tupleTypeArguments.length>0&&((0,wt.isUnboundedTupleClass)(n)||this._evaluator.addDiagnosticForTextRange(this._fileInfo,this._fileInfo.diagnosticRuleSet.reportAssertAlwaysTrue,lt.DiagnosticRule.reportAssertAlwaysTrue,Ne.Localizer.Diagnostic.assertAlwaysTrue(),e.testExpression)),!0}visitAssignment(e){return this._evaluator.evaluateTypesForStatement(e),e.typeAnnotationComment&&(this._evaluator.getType(e.typeAnnotationComment),this._fileInfo.diagnosticRuleSet.reportTypeCommentUsage!=="none"&&this._fileInfo.executionEnvironment.pythonVersion>=Wi.PythonVersion.V3_6&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportTypeCommentUsage,lt.DiagnosticRule.reportTypeCommentUsage,Ne.Localizer.Diagnostic.typeCommentDeprecated(),e.typeAnnotationComment)),!0}visitAssignmentExpression(e){return this._evaluator.getType(e),!0}visitAugmentedAssignment(e){return this._evaluator.evaluateTypesForStatement(e),!0}visitIndex(e){this._evaluator.getType(e);const n=this._evaluator.getType(e.baseExpression);return n&&(0,wt.doForEachSubtype)(n,i=>{if((0,he.isClassInstance)(i)&&i.tupleTypeArguments&&!(0,wt.isUnboundedTupleClass)(i)){const r=i.tupleTypeArguments.length;if(e.items.length===1&&!e.trailingComma&&e.items[0].argumentCategory===0&&!e.items[0].name){const a=this._evaluator.getType(e.items[0].valueExpression);a&&(0,he.isClassInstance)(a)&&he.ClassType.isBuiltIn(a,"int")&&(0,wt.isLiteralType)(a)&&typeof a.literalValue=="number"&&(a.literalValue>=0&&a.literalValue>=r||a.literalValue<0&&a.literalValue+r<0)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.tupleIndexOutOfRange().format({index:a.literalValue,type:this._evaluator.printType(i)}),e)}}}),!0}visitBinaryOperation(e){return(e.operator===12||e.operator===28)&&(Qn.isWithinAssertExpression(e)||this._validateComparisonTypes(e)),this._evaluator.getType(e),!0}visitSlice(e){return this._evaluator.getType(e),!0}visitUnpack(e){return this._evaluator.getType(e),!0}visitTuple(e){return this._evaluator.getType(e),!0}visitUnaryOperation(e){return this._evaluator.getType(e),!0}visitTernary(e){return this._evaluator.getType(e),this._reportUnnecessaryConditionExpression(e.testExpression),!0}visitStringList(e){for(const n of e.strings)n.hasUnescapeErrors&&(0,FV.getUnescapedString)(n.token).unescapeErrors.forEach(r=>{const s={start:n.token.start+n.token.prefixLength+n.token.quoteMarkLength+r.offset,length:r.length};r.errorType===0?this._evaluator.addDiagnosticForTextRange(this._fileInfo,this._fileInfo.diagnosticRuleSet.reportInvalidStringEscapeSequence,lt.DiagnosticRule.reportInvalidStringEscapeSequence,Ne.Localizer.Diagnostic.stringUnsupportedEscape(),s):r.errorType===1?this._evaluator.addDiagnosticForTextRange(this._fileInfo,"error","",Ne.Localizer.Diagnostic.formatStringEscape(),s):r.errorType===2?this._evaluator.addDiagnosticForTextRange(this._fileInfo,"error","",Ne.Localizer.Diagnostic.formatStringBrace(),s):r.errorType===3&&this._evaluator.addDiagnosticForTextRange(this._fileInfo,"error","",Ne.Localizer.Diagnostic.formatStringUnterminated(),s)});return e.typeAnnotation&&this._evaluator.getType(e),e.strings.length>1&&!e.isParenthesized&&this._evaluator.addDiagnosticForTextRange(this._fileInfo,this._fileInfo.diagnosticRuleSet.reportImplicitStringConcatenation,lt.DiagnosticRule.reportImplicitStringConcatenation,Ne.Localizer.Diagnostic.implicitStringConcat(),e),!0}visitFormatString(e){return e.expressions.forEach(n=>{this._evaluator.getType(n)}),!0}visitGlobal(e){return this._suppressUnboundCheck(()=>{e.nameList.forEach(n=>{this._evaluator.getType(n),this.walk(n)})}),!1}visitNonlocal(e){return this._suppressUnboundCheck(()=>{e.nameList.forEach(n=>{this._evaluator.getType(n),this.walk(n)})}),!1}visitName(e){return this._conditionallyReportPrivateUsage(e),this._isUnboundCheckSuppressed||this._reportUnboundName(e),!0}visitDel(e){return this._suppressUnboundCheck(()=>{e.expressions.forEach(n=>{this._evaluator.verifyDeleteExpression(n),this.walk(n)})}),!1}visitMemberAccess(e){return this._evaluator.getType(e),this._conditionallyReportPrivateUsage(e.memberName),this.walk(e.leftExpression),!1}visitImportAs(e){return this._evaluator.evaluateTypesForStatement(e),!1}visitImportFrom(e){if(!e.isWildcardImport)e.imports.forEach(n=>{this._evaluator.evaluateTypesForStatement(n)});else{const n=ps.getImportInfo(e.module);n&&n.isImportFound&&n.importType!==2&&!this._fileInfo.isStubFile&&this._evaluator.addDiagnosticForTextRange(this._fileInfo,this._fileInfo.diagnosticRuleSet.reportWildcardImportFromLibrary,lt.DiagnosticRule.reportWildcardImportFromLibrary,Ne.Localizer.Diagnostic.wildcardLibraryImport(),e.wildcardToken||e)}return!1}visitTypeAnnotation(e){return this._evaluator.getType(e.typeAnnotation),!0}visitMatch(e){return this._evaluator.getType(e.subjectExpression),this._validateExhaustiveMatch(e),!0}visitCase(e){return e.guardExpression&&this._evaluator.getType(e.guardExpression),this._evaluator.evaluateTypesForStatement(e.pattern),!0}visitPatternClass(e){return(0,PV.validateClassPattern)(this._evaluator,e),!0}visitTry(e){return this._reportUnusedExceptStatements(e),!0}visitError(e){return e.child&&this._evaluator.getType(e.child),!1}_reportUnnecessaryConditionExpression(e){if(e.nodeType===7){(e.operator===36||e.operator===37)&&(this._reportUnnecessaryConditionExpression(e.leftExpression),this._reportUnnecessaryConditionExpression(e.rightExpression));return}else if(e.nodeType===55){e.operator===38&&this._reportUnnecessaryConditionExpression(e.expression);return}const n=this._evaluator.getTypeOfExpression(e);let i=!0;(0,wt.doForEachSubtype)(n.type,r=>{r=this._evaluator.makeTopLevelTypeVarsConcrete(r),!(0,he.isFunction)(r)&&!(0,he.isOverloadedFunction)(r)&&(i=!1)}),i&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnnecessaryComparison,lt.DiagnosticRule.reportUnnecessaryComparison,Ne.Localizer.Diagnostic.functionInConditionalExpression(),e)}_reportUnusedExpression(e){if(this._fileInfo.diagnosticRuleSet.reportUnusedExpression==="none")return;[55,7,40,11,38].some(i=>i===e.nodeType)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnusedExpression,lt.DiagnosticRule.reportUnusedExpression,Ne.Localizer.Diagnostic.unusedExpression(),e)}_validateExhaustiveMatch(e){if(this._fileInfo.diagnosticRuleSet.reportMatchNotExhaustive==="none")return;const n=this._evaluator.evaluateTypeForSubnode(e,()=>{this._evaluator.evaluateTypesForMatchStatement(e)});if(n&&!(0,he.isNever)(n.type)){const i=new jn.DiagnosticAddendum;i.addMessage(Ne.Localizer.DiagnosticAddendum.matchIsNotExhaustiveType().format({type:this._evaluator.printType(n.type)})),i.addMessage(Ne.Localizer.DiagnosticAddendum.matchIsNotExhaustiveHint()),this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportMatchNotExhaustive,lt.DiagnosticRule.reportMatchNotExhaustive,Ne.Localizer.Diagnostic.matchIsNotExhaustive()+i.getString(),e.subjectExpression)}}_suppressUnboundCheck(e){const n=this._isUnboundCheckSuppressed;this._isUnboundCheckSuppressed=!0;try{e()}finally{this._isUnboundCheckSuppressed=n}}_validateIllegalDefaultParamInitializer(e){this._fileInfo.diagnosticRuleSet.reportCallInDefaultInitializer!=="none"&&Qn.isWithinDefaultParamInitializer(e)&&!this._fileInfo.isStubFile&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportCallInDefaultInitializer,lt.DiagnosticRule.reportCallInDefaultInitializer,Ne.Localizer.Diagnostic.defaultValueContainsCall(),e)}_validateComparisonTypes(e){const n=this._evaluator.getType(e.leftExpression),i=this._evaluator.getType(e.rightExpression);if(!n||!i||(0,he.isNever)(n)||(0,he.isNever)(i))return;const r=()=>e.operator===12?Ne.Localizer.Diagnostic.comparisonAlwaysFalse():Ne.Localizer.Diagnostic.comparisonAlwaysTrue();if((0,wt.isLiteralTypeOrUnion)(i)&&(0,wt.isLiteralTypeOrUnion)(n)){if((0,NV.evaluateStaticBoolExpression)(e,this._fileInfo.executionEnvironment,this._fileInfo.definedConstants)===void 0){let a=!1;(0,wt.doForEachSubtype)(n,s=>{this._evaluator.assignType(i,s)&&(a=!0)}),a||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnnecessaryComparison,lt.DiagnosticRule.reportUnnecessaryComparison,r().format({leftType:this._evaluator.printType(n,!0),rightType:this._evaluator.printType(i,!0)}),e)}}else{let a=!1;if((0,wt.doForEachSubtype)(n,s=>{a||(s=this._evaluator.makeTopLevelTypeVarsConcrete(s),(0,wt.doForEachSubtype)(i,l=>{a||(l=this._evaluator.makeTopLevelTypeVarsConcrete(l),this._isTypeComparable(s,l)&&(a=!0))}))}),!a){const s=this._evaluator.printType(n,!0),l=this._evaluator.printType(i,!0);this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnnecessaryComparison,lt.DiagnosticRule.reportUnnecessaryComparison,r().format({leftType:s,rightType:l}),e)}}}_isTypeComparable(e,n){if((0,he.isAnyOrUnknown)(e)||(0,he.isAnyOrUnknown)(n))return!0;if((0,he.isNever)(e)||(0,he.isNever)(n))return!1;if((0,he.isModule)(e)||(0,he.isModule)(n)||(0,he.isNoneInstance)(e)||(0,he.isNoneInstance)(n))return(0,he.isTypeSame)(e,n);const i=(0,he.isFunction)(e)||(0,he.isOverloadedFunction)(e),r=(0,he.isFunction)(n)||(0,he.isOverloadedFunction)(n);if(i!==r)return!1;if((0,he.isInstantiableClass)(e)||(0,he.isClassInstance)(e)&&he.ClassType.isBuiltIn(e,"type")){if((0,he.isInstantiableClass)(n)||(0,he.isClassInstance)(n)&&he.ClassType.isBuiltIn(n,"type")){const s=he.ClassType.cloneForSpecialization(e,void 0,!1),l=he.ClassType.cloneForSpecialization(n,void 0,!1);if(this._evaluator.assignType(s,l)||this._evaluator.assignType(l,s))return!0}const a=e.details.effectiveMetaclass;return!!(a&&(0,he.isClass)(a)&&(0,wt.lookUpClassMember)(a,"__eq__",4))}if((0,he.isClassInstance)(e)){if((0,he.isClassInstance)(n)){const a=he.ClassType.cloneForSpecialization(e,void 0,!1),s=he.ClassType.cloneForSpecialization(n,void 0,!1);if(this._evaluator.assignType(a,s)||this._evaluator.assignType(s,a))return!0;if(he.ClassType.isBuiltIn(e)&&he.ClassType.isBuiltIn(n))return!1}return!!(0,wt.lookUpClassMember)(he.ClassType.cloneAsInstantiable(e),"__eq__",4)}return!0}_isTypeValidForUnusedValueTest(e){return!(0,he.isNoneInstance)(e)&&!(0,he.isNever)(e)&&!(0,he.isAnyOrUnknown)(e)}_validateFunctionTypeVarUsage(e,n){if(this._fileInfo.diagnosticRuleSet.reportInvalidTypeVarUse==="none")return;const i=new Map,r=new Map;let a=!0,s,l;if(he.FunctionType.isInstanceMethod(n)&&e.name.value==="__init__"){const u=Qn.getEnclosingClassOrFunction(e);if(u&&u.nodeType===10){const f=this._evaluator.getTypeOfClass(u);f&&(0,he.isClass)(f.classType)&&(l=f.classType)}}const o=new Qn.NameNodeWalker((u,f,y)=>{var p,b,v,m,V,F;const P=this._evaluator.getType(u);if(P&&(0,he.isTypeVar)(P)){if(P.scopeId===this._evaluator.getScopeIdForNode(e)){let G=P.details.constraints.length>0||a&&P.details.boundType!==void 0&&f!==void 0||(0,he.isParamSpec)(P);if(!G&&y&&f!==void 0){const U=this._evaluator.getType(y);(U==null?void 0:U.typeAliasInfo)&&U.typeAliasInfo.typeParameters&&f<U.typeAliasInfo.typeParameters.length&&(G=!0)}const te=i.get(P.details.name),q=((p=s==null?void 0:s.defaultValue)===null||p===void 0?void 0:p.nodeType)===18;te?(te.nodes.push(u),s!==void 0?(te.paramTypeUsageCount+=1,q&&(te.paramTypeWithEllipsisUsageCount+=1,te.paramWithEllipsis||(te.paramWithEllipsis=(v=s==null?void 0:s.name)===null||v===void 0?void 0:v.value))):te.returnTypeUsageCount+=1):i.set(P.details.name,{nodes:[u],paramTypeUsageCount:s!==void 0?1:0,paramTypeWithEllipsisUsageCount:q?1:0,returnTypeUsageCount:s===void 0?1:0,paramWithEllipsis:q?(b=s==null?void 0:s.name)===null||b===void 0?void 0:b.value:void 0,isExempt:G})}if(l&&P.scopeId===l.details.typeVarScopeId){const G=r.get(P.details.name),te=((m=s==null?void 0:s.defaultValue)===null||m===void 0?void 0:m.nodeType)===18;G?(G.nodes.push(u),s!==void 0&&(G.paramTypeUsageCount+=1,te&&(G.paramTypeWithEllipsisUsageCount+=1,G.paramWithEllipsis||(G.paramWithEllipsis=(F=s==null?void 0:s.name)===null||F===void 0?void 0:F.value)))):r.set(P.details.name,{nodes:[u],paramTypeUsageCount:s!==void 0?1:0,paramTypeWithEllipsisUsageCount:te?1:0,returnTypeUsageCount:0,paramWithEllipsis:te?(V=s==null?void 0:s.name)===null||V===void 0?void 0:V.value:void 0,isExempt:!1})}}});e.parameters.forEach(u=>{const f=u.typeAnnotation||u.typeAnnotationComment;f&&(s=u,o.walk(f))}),s=void 0,e.returnTypeAnnotation&&(a=!1,o.walk(e.returnTypeAnnotation)),i.forEach(u=>{var f;u.nodes.length===1&&!u.isExempt&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportInvalidTypeVarUse,lt.DiagnosticRule.reportInvalidTypeVarUse,Ne.Localizer.Diagnostic.typeVarUsedOnlyOnce().format({name:u.nodes[0].value}),u.nodes[0]);let y=u.returnTypeUsageCount>0;if(u.returnTypeUsageCount===1&&n.details.declaredReturnType){const p=n.details.declaredReturnType;(0,he.isUnion)(p)&&p.subtypes.some(b=>(0,he.isTypeVar)(b)&&b.details.name===u.nodes[0].value)&&(y=!1)}if(y&&u.paramTypeWithEllipsisUsageCount>0&&u.paramTypeUsageCount===u.paramTypeWithEllipsisUsageCount){const p=new jn.DiagnosticAddendum;p.addMessage(Ne.Localizer.DiagnosticAddendum.typeVarUnsolvableRemedy()),this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportInvalidTypeVarUse,lt.DiagnosticRule.reportInvalidTypeVarUse,Ne.Localizer.Diagnostic.typeVarPossiblyUnsolvable().format({name:u.nodes[0].value,param:(f=u.paramWithEllipsis)!==null&&f!==void 0?f:""})+p.getString(),u.nodes[0])}}),r.forEach(u=>{var f;if(u.paramTypeWithEllipsisUsageCount>0&&u.paramTypeUsageCount===u.paramTypeWithEllipsisUsageCount){const y=new jn.DiagnosticAddendum;y.addMessage(Ne.Localizer.DiagnosticAddendum.typeVarUnsolvableRemedy()),this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportInvalidTypeVarUse,lt.DiagnosticRule.reportInvalidTypeVarUse,Ne.Localizer.Diagnostic.typeVarPossiblyUnsolvable().format({name:u.nodes[0].value,param:(f=u.paramWithEllipsis)!==null&&f!==void 0?f:""})+y.getString(),u.nodes[0])}})}_validateOverloadConsistency(e,n,i){for(let r=0;r<i.length;r++){const a=i[r];if(he.FunctionType.isOverloaded(n)&&he.FunctionType.isOverloaded(a)&&this._isOverlappingOverload(n,a)){this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportOverlappingOverload,lt.DiagnosticRule.reportOverlappingOverload,Ne.Localizer.Diagnostic.overlappingOverload().format({name:e.name.value,obscured:i.length+1,obscuredBy:r+1}),e.name);break}}for(let r=0;r<i.length;r++){const a=i[r];if(he.FunctionType.isOverloaded(n)&&he.FunctionType.isOverloaded(a)&&this._isOverlappingOverload(a,n)){const s=he.FunctionType.getSpecializedReturnType(a),l=he.FunctionType.getSpecializedReturnType(n);if(s&&l&&!this._evaluator.assignType(l,s,void 0,new Nl.TypeVarContext,void 0,520)){const o=this._findNodeForOverload(e,a);this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportOverlappingOverload,lt.DiagnosticRule.reportOverlappingOverload,Ne.Localizer.Diagnostic.overloadReturnTypeMismatch().format({name:e.name.value,newIndex:i.length+1,prevIndex:r+1}),(o||e).name);break}}}}_findNodeForOverload(e,n){const i=this._evaluator.getDeclarationsForNameNode(e.name);if(!!i){for(const r of i)if(r.type===3){const a=this._evaluator.getTypeOfFunction(r.node);if((a==null?void 0:a.functionType)===n)return r.node}}}_isOverlappingOverload(e,n){return he.FunctionType.isInstanceMethod(e)&&e.details.name==="__get__"?!1:this._evaluator.assignType(e,n,void 0,new Nl.TypeVarContext((0,wt.getTypeVarScopeId)(e)),void 0,56)}_isLegalOverloadImplementation(e,n,i){var r;const a=new Nl.TypeVarContext((0,wt.getTypeVarScopeId)(n)),s=new Nl.TypeVarContext((0,wt.getTypeVarScopeId)(e));let l=this._evaluator.assignType(e,n,i,s,a,290);const o=(r=e.details.declaredReturnType)!==null&&r!==void 0?r:this._evaluator.getFunctionInferredReturnType(e),u=(0,wt.applySolvedTypeVars)(n.details.declaredReturnType||this._evaluator.getFunctionInferredReturnType(n),a),f=new jn.DiagnosticAddendum;return!(0,he.isNever)(o)&&!this._evaluator.assignType(u,o,f.createAddendum(),a,s,8)&&(f.addMessage(Ne.Localizer.DiagnosticAddendum.functionReturnTypeMismatch().format({sourceType:this._evaluator.printType(o,!1),destType:this._evaluator.printType(u,!1)})),i==null||i.addAddendum(f),l=!1),l}_walkStatementsAndReportUnreachable(e){let n=!1,i;for(const r of e){if(!n&&!this._evaluator.isNodeReachable(r,i)){const a=r.start,s=e[e.length-1],l=fI.TextRange.getEnd(s);this._evaluator.addUnusedCode(r,{start:a,length:l-a}),n=!0}!n&&this._fileInfo.isStubFile&&this._validateStubStatement(r),this.walk(r),i=r}}_validateStubStatement(e){switch(e.nodeType){case 19:case 28:case 10:case 0:break;case 57:case 26:case 53:case 58:{this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportInvalidStubStatement,lt.DiagnosticRule.reportInvalidStubStatement,Ne.Localizer.Diagnostic.invalidStubStatement(),e);break}case 47:for(const n of e.statements){let i=!0;switch(n.nodeType){case 2:case 4:case 6:case 7:case 11:case 14:case 15:case 24:case 26:case 27:case 29:case 30:case 31:case 35:case 38:case 39:case 40:case 43:case 44:case 45:case 46:case 51:case 52:case 53:case 55:case 56:case 57:case 58:case 59:case 60:case 61:{i=!1;break}case 5:{i=n.operator===1&&n.leftExpression.nodeType===38&&n.leftExpression.value==="__all__";break}case 9:{i=n.leftExpression.nodeType===35&&n.leftExpression.leftExpression.nodeType===38&&n.leftExpression.leftExpression.value==="__all__";break}}i||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportInvalidStubStatement,lt.DiagnosticRule.reportInvalidStubStatement,Ne.Localizer.Diagnostic.invalidStubStatement(),n)}}}_validateExceptionType(e,n){const i=this._evaluator.getBuiltInType(n,"BaseException"),r=l=>!i||!(0,he.isInstantiableClass)(i)?!0:(0,wt.derivesFromClassRecursive)(l,i,!1),a=new jn.DiagnosticAddendum;let s;if((0,he.isAnyOrUnknown)(e))s=e;else if((0,he.isInstantiableClass)(e))r(e)||a.addMessage(Ne.Localizer.Diagnostic.exceptionTypeIncorrect().format({type:this._evaluator.printType(e,!1)})),s=he.ClassType.cloneAsInstance(e);else if((0,he.isClassInstance)(e)){const l=this._evaluator.getTypeOfIterator(e,!1,n)||he.UnknownType.create();s=(0,wt.mapSubtypes)(l,o=>(0,he.isAnyOrUnknown)(o)?o:(0,he.isInstantiableClass)(o)?(r(o)||a.addMessage(Ne.Localizer.Diagnostic.exceptionTypeIncorrect().format({type:this._evaluator.printType(e,!1)})),he.ClassType.cloneAsInstance(o)):(a.addMessage(Ne.Localizer.Diagnostic.exceptionTypeIncorrect().format({type:this._evaluator.printType(e,!1)})),he.UnknownType.create()))}return a.isEmpty()||this._evaluator.addError(Ne.Localizer.Diagnostic.exceptionTypeNotClass().format({type:this._evaluator.printType(e,!1)}),n),s||he.UnknownType.create()}_reportUnusedDunderAllSymbols(e){if(this._fileInfo.diagnosticRuleSet.reportUnsupportedDunderAll==="none")return;const n=ps.getScope(this._moduleNode);!n||e.forEach(i=>{n.symbolTable.has(i.value)||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnsupportedDunderAll,lt.DiagnosticRule.reportUnsupportedDunderAll,Ne.Localizer.Diagnostic.dunderAllSymbolNotPresent().format({name:i.value}),i)})}_validateSymbolTables(){for(const e of this._scopedNodes){const n=ps.getScope(e);n&&n.symbolTable.forEach((i,r)=>{this._conditionallyReportUnusedSymbol(r,i,n.type),this._reportIncompatibleDeclarations(r,i),this._reportMultipleFinalDeclarations(r,i,n.type),this._reportMultipleTypeAliasDeclarations(r,i),this._reportInvalidOverload(r,i)})}}_reportInvalidOverload(e,n){const i=n.getTypedDeclarations();if(i.length>=1){const r=i[0];if(r.type===3){const a=this._evaluator.getEffectiveTypeOfSymbol(n),l=((0,he.isOverloadedFunction)(a)?a.overloads:(0,he.isFunction)(a)?[a]:[]).filter(o=>he.FunctionType.isOverloaded(o));if(l.length===1&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.singleOverload().format({name:e}),r.node.name),l.forEach(o=>{if(o.details.declaration&&!Qn.isFunctionSuiteEmpty(o.details.declaration.node)){const u=new jn.DiagnosticAddendum;u.addMessage(Ne.Localizer.DiagnosticAddendum.overloadWithImplementation()),this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.overloadWithImplementation().format({name:e})+u.getString(),o.details.declaration.node.name)}}),!this._fileInfo.isStubFile&&l.length>0){let o;if((0,he.isOverloadedFunction)(a)&&!he.FunctionType.isOverloaded(a.overloads[a.overloads.length-1])?o=a.overloads[a.overloads.length-1]:(0,he.isFunction)(a)&&!he.FunctionType.isOverloaded(a)&&(o=a),o)(0,he.isOverloadedFunction)(a)&&a.overloads.forEach((u,f)=>{var y,p,b,v;if(u===o||!he.FunctionType.isOverloaded(u))return;const m=new jn.DiagnosticAddendum;if(!this._isLegalOverloadImplementation(u,o,m)&&o.details.declaration){const V=this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.overloadImplementationMismatch().format({name:e,index:f+1})+m.getString(),o.details.declaration.node.name);V&&u.details.declaration&&V.addRelatedInfo(Ne.Localizer.DiagnosticAddendum.overloadSignature(),(p=(y=u.details.declaration)===null||y===void 0?void 0:y.path)!==null&&p!==void 0?p:r.path,(v=(b=u.details.declaration)===null||b===void 0?void 0:b.range)!==null&&v!==void 0?v:r.range)}});else{let u=!1;const f=Qn.getEnclosingClassOrFunction(r.node);if(f&&f.nodeType===10){const y=this._evaluator.getTypeOfClass(f);y&&he.ClassType.isProtocolClass(y.classType)&&(u=!0)}u||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.overloadWithoutImplementation().format({name:r.node.name.value}),r.node.name)}}}}}_reportMultipleFinalDeclarations(e,n,i){if(!(0,or.isFinalVariable)(n))return;const r=n.getDeclarations();let a=!1,s=!1;if(r.forEach(l=>{(0,pI.isFinalVariableDeclaration)(l)&&(a&&this._evaluator.addError(Ne.Localizer.Diagnostic.finalRedeclaration().format({name:e}),l.node),a=!0),l.type===1&&l.inferredTypeSource&&(s&&i!==2&&this._evaluator.addError(Ne.Localizer.Diagnostic.finalReassigned().format({name:e}),l.node),s=!0)}),!s&&!this._fileInfo.isStubFile){const l=r.find(o=>o.type===1&&o.isFinal);if(l){let o=!1;if(n.isClassMember()&&!n.isClassVar()){const u=Qn.getEnclosingClass(l.node,!0);if(u){const f=this._evaluator.getTypeOfClass(u);f&&(0,he.isClass)(f.decoratedType)&&he.ClassType.isDataClass(f.decoratedType)&&(o=!0)}}o||this._evaluator.addError(Ne.Localizer.Diagnostic.finalUnassigned().format({name:e}),l.node)}}}_reportMultipleTypeAliasDeclarations(e,n){const i=n.getDeclarations(),r=i.find(a=>(0,pI.isExplicitTypeAliasDeclaration)(a));r&&i.length>1&&i.forEach(a=>{a!==r&&this._evaluator.addError(Ne.Localizer.Diagnostic.typeAliasRedeclared().format({name:e}),a.node)})}_reportIncompatibleDeclarations(e,n){const i=(0,or.getLastTypedDeclaredForSymbol)(n);if(!i||e==="_")return;let r=n.getDeclarations().filter(l=>l!==i);if(i.type===3){const l=this._evaluator.getTypeOfFunction(i.node);r=r.filter(o=>{if(o.type!==3)return!0;const u=this._evaluator.getTypeOfFunction(o.node);if(!u)return!0;const f=l?this._evaluator.makeTopLevelTypeVarsConcrete(l.decoratedType):void 0;return f&&(0,he.isClassInstance)(f)&&he.ClassType.isPropertyClass(f)&&(0,he.isClassInstance)(u.decoratedType)&&he.ClassType.isPropertyClass(u.decoratedType)?u.decoratedType.details.typeSourceId!==f.details.typeSourceId:!he.FunctionType.isOverloaded(u.functionType)})}if(r.length===0)return;let a;i.type===3?i.isMethod?a=Ne.Localizer.DiagnosticAddendum.seeMethodDeclaration():a=Ne.Localizer.DiagnosticAddendum.seeFunctionDeclaration():i.type===4?a=Ne.Localizer.DiagnosticAddendum.seeClassDeclaration():i.type===2?a=Ne.Localizer.DiagnosticAddendum.seeParameterDeclaration():i.type===1?a=Ne.Localizer.DiagnosticAddendum.seeVariableDeclaration():a=Ne.Localizer.DiagnosticAddendum.seeDeclaration();const s=l=>{if(l){let o;i.type===3||i.type===4?o=i.node.name:i.type===1?i.node.nodeType===38&&(o=i.node):i.type===2&&i.node.name&&(o=i.node.name),o&&l.addRelatedInfo(a,i.path,i.range)}};for(const l of r)if(l.type===4){const o=this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.obscuredClassDeclaration().format({name:e}),l.node.name);s(o)}else if(l.type===3){const o=this._evaluator.getTypeForDeclaration(i);o&&(0,he.isFunction)(o)&&this._evaluator.getFunctionInferredReturnType(o);let u=!1;const f=this._evaluator.getTypeForDeclaration(l),y=Qn.getEnclosingSuite(i.node),p=Qn.getEnclosingSuite(l.node),b=y===p;if(f&&(0,he.isFunction)(f)&&this._evaluator.getFunctionInferredReturnType(f),o&&f&&(0,he.isTypeSame)(o,f)&&(u=!0),!u||b){const v=this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,l.isMethod?Ne.Localizer.Diagnostic.obscuredMethodDeclaration().format({name:e}):Ne.Localizer.Diagnostic.obscuredFunctionDeclaration().format({name:e}),l.node.name);s(v)}}else if(l.type===2){if(l.node.name){const o=this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.obscuredParameterDeclaration().format({name:e}),l.node.name);s(o)}}else if(l.type===1){const o=this._evaluator.getTypeForDeclaration(i);if(l.typeAnnotationNode){if(l.node.nodeType===38){let u=!1;const f=this._evaluator.getTypeForDeclaration(l);if(o&&f&&(0,he.isTypeSame)(o,f)&&(u=!0),!u){const y=this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.obscuredVariableDeclaration().format({name:e}),l.node);s(y)}}}else if(o&&!(0,wt.isProperty)(o)&&(i.type===3||i.type===4)){const u=this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.obscuredVariableDeclaration().format({name:e}),l.node);s(u)}}}_conditionallyReportUnusedSymbol(e,n,i){const r=this._fileInfo.accessedSymbolMap;if(n.isIgnoredForProtocolMatch()||r.has(n.id)||e==="_"||Cr.isDunderName(e))return;n.getDeclarations().forEach(s=>{this._conditionallyReportUnusedDeclaration(s,this._isSymbolPrivate(e,i))})}_conditionallyReportUnusedDeclaration(e,n){let i,r,a,s;switch(e.type){case 6:if(i=this._fileInfo.diagnosticRuleSet.reportUnusedImport,s=lt.DiagnosticRule.reportUnusedImport,e.node.nodeType===21)if(e.node.alias)this._fileInfo.isStubFile||(r=e.node.alias);else{const l=e.node.module.nameParts;if(l.length>0){const o=l.map(f=>f.value).join("."),u={start:l[0].start,length:l[0].length};fI.TextRange.extend(u,l[l.length-1]),this._fileInfo.diagnosticSink.addUnusedCodeWithTextRange(Ne.Localizer.Diagnostic.unaccessedSymbol().format({name:o}),u,{action:"pyright.unusedImport"}),this._evaluator.addDiagnosticForTextRange(this._fileInfo,this._fileInfo.diagnosticRuleSet.reportUnusedImport,lt.DiagnosticRule.reportUnusedImport,Ne.Localizer.Diagnostic.unaccessedImport().format({name:o}),u);return}}else if(e.node.nodeType===23){const l=e.node.parent,o=this._fileInfo.isStubFile&&e.node.alias!==void 0,u=l.module.nameParts.length===1&&l.module.nameParts[0].value==="__future__";!o&&!u&&(r=e.node.alias||e.node.name)}r&&(a=Ne.Localizer.Diagnostic.unaccessedImport().format({name:r.value}));break;case 1:case 2:if(!n||this._fileInfo.isStubFile)return;i=this._fileInfo.diagnosticRuleSet.reportUnusedVariable,e.node.nodeType===38?(r=e.node,r.value.startsWith("_")&&(i="none")):e.node.nodeType===41&&(r=e.node.name,i="none"),r&&(s=lt.DiagnosticRule.reportUnusedVariable,a=Ne.Localizer.Diagnostic.unaccessedVariable().format({name:r.value}));break;case 4:if(!n||this._fileInfo.isStubFile)return;i=this._fileInfo.diagnosticRuleSet.reportUnusedClass,r=e.node.name,s=lt.DiagnosticRule.reportUnusedClass,a=Ne.Localizer.Diagnostic.unaccessedClass().format({name:r.value});break;case 3:if(!n||this._fileInfo.isStubFile)return;i=this._fileInfo.diagnosticRuleSet.reportUnusedFunction,r=e.node.name,s=lt.DiagnosticRule.reportUnusedFunction,a=Ne.Localizer.Diagnostic.unaccessedFunction().format({name:r.value});break;default:return}if(r&&s!==void 0&&a){const l=s===lt.DiagnosticRule.reportUnusedImport?{action:"pyright.unusedImport"}:void 0;this._fileInfo.diagnosticSink.addUnusedCodeWithTextRange(Ne.Localizer.Diagnostic.unaccessedSymbol().format({name:r.value}),r,l),this._evaluator.addDiagnostic(i,s,a,r)}}_validateIsInstanceCall(e){if(e.leftExpression.nodeType!==38||e.leftExpression.value!=="isinstance"&&e.leftExpression.value!=="issubclass"||e.arguments.length!==2)return;const n=e.leftExpression.value,i=n==="isinstance";let r=this._evaluator.getType(e.arguments[0].valueExpression);if(!r)return;r=(0,wt.mapSubtypes)(r,m=>(0,wt.transformPossibleRecursiveTypeAlias)(m));const a=this._evaluator.getType(e.arguments[1].valueExpression);if(!a)return;let s=!0;if((0,wt.doForEachSubtype)(a,m=>{(0,he.isClassInstance)(m)&&he.ClassType.isTupleClass(m)&&m.tupleTypeArguments?m.tupleTypeArguments.some(V=>!this._isTypeSupportedTypeForIsInstance(V.type,i))&&(s=!1):this._isTypeSupportedTypeForIsInstance(m,i)||(s=!1)}),!s){const m=new jn.DiagnosticAddendum;m.addMessage(Ne.Localizer.DiagnosticAddendum.typeVarNotAllowed()),this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,i?Ne.Localizer.Diagnostic.isInstanceInvalidType().format({type:this._evaluator.printType(a,!1)})+m.getString():Ne.Localizer.Diagnostic.isSubclassInvalidType().format({type:this._evaluator.printType(a,!1)})+m.getString(),e.arguments[1])}let l=e;for(;l;){if(l.nodeType===2)return;l=l.parent}const o=["FunctionType","LambdaType","BuiltinFunctionType","BuiltinMethodType","type","Type"],u=[];let f=!1;if((0,wt.doForEachSubtype)(a,m=>{(0,he.isClass)(m)?he.TypeBase.isInstantiable(m)?m.literalValue===void 0&&(u.push(m),he.ClassType.isBuiltIn(m)&&o.some(V=>V===m.details.name)&&(s=!1),m.includeSubclasses&&(f=!0)):((0,wt.isTupleClass)(m)?m.tupleTypeArguments&&m.tupleTypeArguments.forEach(V=>{(0,he.isInstantiableClass)(V.type)?(u.push(V.type),V.type.includeSubclasses&&(f=!0)):s=!1}):m.includeSubclasses&&(f=!0),he.ClassType.isBuiltIn(m)&&o.some(V=>V===m.details.name)&&(s=!1)):s=!1}),!s||(u.some(m=>he.ClassType.isProtocolClass(m)&&!he.ClassType.isRuntimeCheckable(m))&&this._evaluator.addError(Ne.Localizer.Diagnostic.protocolUsedInCall().format({name:n}),e.arguments[1].valueExpression),(0,wt.derivesFromAnyOrUnknown)(r)))return;const y=m=>(0,he.combineTypes)(m),p=m=>{const V=[];for(const F of u){const P=he.ClassType.isDerivedFrom(m,F)||i&&he.ClassType.isProtocolClass(F)&&this._evaluator.assignType(F,m)||he.ClassType.isBuiltIn(F,"dict")&&he.ClassType.isTypedDictClass(m),G=he.ClassType.isDerivedFrom(F,m)||i&&he.ClassType.isProtocolClass(m)&&this._evaluator.assignType(m,F);G&&G&&!he.ClassType.isSameGenericClass(m,F)?V.push(he.UnknownType.create()):P?V.push(m):G&&V.push(F)}return i?V.map(F=>(0,he.isInstantiableClass)(F)?he.ClassType.cloneAsInstance(F):F):V};let b;if(i&&(0,he.isClassInstance)(r)){const m=p(he.ClassType.cloneAsInstantiable(r));b=y(m)}else if(!i&&(0,he.isInstantiableClass)(r)){const m=p(r);b=y(m)}else if((0,he.isUnion)(r)){let m=[],V=!1;if((0,wt.doForEachSubtype)(r,F=>{(0,he.isAnyOrUnknown)(F)&&(V=!0),i&&(0,he.isClassInstance)(F)?m=m.concat(p(he.ClassType.cloneAsInstantiable(F))):!i&&(0,he.isInstantiableClass)(F)&&(m=m.concat(p(F)))}),b=y(m),V)return}else return;const v=()=>{const m=u.map(V=>he.ClassType.cloneAsInstance(V));return(0,he.combineTypes)(m)};!f&&(0,he.isTypeSame)(b,r,!0)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnnecessaryIsInstance,lt.DiagnosticRule.reportUnnecessaryIsInstance,i?Ne.Localizer.Diagnostic.unnecessaryIsInstanceAlways().format({testType:this._evaluator.printType(r,!1),classType:this._evaluator.printType(v(),!1)}):Ne.Localizer.Diagnostic.unnecessaryIsSubclassAlways().format({testType:this._evaluator.printType(r,!1),classType:this._evaluator.printType(v(),!1)}),e)}_isTypeSupportedTypeForIsInstance(e,n){let i=!0;return(0,wt.doForEachSubtype)(e,r=>{switch(r=this._evaluator.makeTopLevelTypeVarsConcrete(r),r.category){case 2:case 1:case 0:break;case 7:r.isTypeArgumentExplicit&&!r.includeSubclasses&&(i=!1);break;case 3:n?i=he.TypeBase.isInstantiable(r):i=!1;break;case 5:i=he.TypeBase.isInstantiable(r);break;case 9:i=this._isTypeSupportedTypeForIsInstance(r,n);break;default:i=!1;break}}),i}_isSymbolPrivate(e,n){return n===1||n===0||Cr.isPrivateName(e)?!0:Cr.isProtectedName(e)?!(n===2):!1}_reportDeprecatedUse(e){var n;const i=(n=RV.get(e.value))!==null&&n!==void 0?n:OV.get(e.value);if(!i)return;const r=this._evaluator.getType(e);!r||!(0,he.isInstantiableClass)(r)||r.details.fullName!==i.fullName||this._fileInfo.executionEnvironment.pythonVersion>=i.version&&this._evaluator.addDeprecated(Ne.Localizer.Diagnostic.deprecatedType().format({version:(0,Wi.versionToString)(i.version),replacement:i.replacementText}),e)}_reportUnboundName(e){if(this._fileInfo.diagnosticRuleSet.reportUnboundVariable!=="none"&&!ps.isCodeUnreachable(e)){const n=this._evaluator.getType(e);n&&((0,he.isUnbound)(n)?this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnboundVariable,lt.DiagnosticRule.reportUnboundVariable,Ne.Localizer.Diagnostic.symbolIsUnbound().format({name:e.value}),e):(0,he.isPossiblyUnbound)(n)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnboundVariable,lt.DiagnosticRule.reportUnboundVariable,Ne.Localizer.Diagnostic.symbolIsPossiblyUnbound().format({name:e.value}),e))}}_conditionallyReportPrivateUsage(e){var n;if(this._fileInfo.diagnosticRuleSet.reportPrivateUsage==="none"||this._fileInfo.isStubFile||((n=e.parent)===null||n===void 0?void 0:n.nodeType)===1&&e.parent.name===e)return;const i=e.value,r=Cr.isPrivateName(i),a=Cr.isProtectedName(i);if(!r&&!a)return;const s=this._evaluator.getDeclarationsForNameNode(e);let l=s&&s.length>0?s[s.length-1]:void 0;if(!l||l.node===e)return;if(l.type===6){if(l.usesLocalName)return;const f=this._evaluator.resolveAliasDeclarationWithInfo(l,!0);if(!f||(l=f.declaration,!f.isPrivate))return}if(!l||l.node===e)return;let o;l.node&&(o=Qn.getEnclosingClass(l.node)),l.node&&l.node.parent&&l.node.parent===o&&(o=Qn.getEnclosingClass(o));let u=!1;if(o&&a){const f=this._evaluator.getTypeOfClass(o);if(f&&(0,he.isInstantiableClass)(f.decoratedType)){if(he.ClassType.isDefinedInStub(f.decoratedType))return;u=!0;const y=Qn.getEnclosingClass(e);if(y){const p=this._evaluator.getTypeOfClass(y);if(p&&(0,he.isInstantiableClass)(p.decoratedType)&&(0,wt.derivesFromClassRecursive)(p.decoratedType,f.decoratedType,!0))return}}}o&&!Qn.isNodeContainedWithin(e,o)&&(u?this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportPrivateUsage,lt.DiagnosticRule.reportPrivateUsage,Ne.Localizer.Diagnostic.protectedUsedOutsideOfClass().format({name:i}),e):this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportPrivateUsage,lt.DiagnosticRule.reportPrivateUsage,Ne.Localizer.Diagnostic.privateUsedOutsideOfClass().format({name:i}),e))}_validateEnumClassOverride(e,n){n.details.baseClasses.forEach((i,r)=>{if((0,he.isClass)(i)&&he.ClassType.isEnumClass(i)){let a=!1;i.details.fields.forEach(s=>{const l=this._evaluator.getEffectiveTypeOfSymbol(s);(0,he.isClassInstance)(l)&&he.ClassType.isSameGenericClass(l,i)&&(a=!0)}),a&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.enumClassOverride().format({name:i.details.name}),e.arguments[r])}})}_validateTypedDictClassSuite(e){const n=i=>{this._evaluator.addError(Ne.Localizer.Diagnostic.typedDictBadVar(),i)};e.statements.forEach(i=>{if(!ps.isCodeUnreachable(i))if(i.nodeType===47)for(const r of i.statements)r.nodeType!==54&&r.nodeType!==18&&r.nodeType!==48&&r.nodeType!==42&&n(r);else n(i)})}_validateStrictTypeGuardFunction(e,n,i){var r;if(!n.details.declaredReturnType||!(0,he.isClassInstance)(n.details.declaredReturnType)||!he.ClassType.isBuiltIn(n.details.declaredReturnType,"StrictTypeGuard")||!n.details.declaredReturnType.typeArguments||n.details.declaredReturnType.typeArguments.length<1)return;const a=n.details.declaredReturnType.typeArguments[0],s=i&&!he.FunctionType.isStaticMethod(n)?1:0;if(s>=n.details.parameters.length)return;const l=he.FunctionType.getEffectiveParameterType(n,s);if(!this._evaluator.assignType(l,a)){const o=e.returnTypeAnnotation||((r=e.functionAnnotationComment)===null||r===void 0?void 0:r.returnTypeAnnotation);o&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.strictTypeGuardReturnType().format({type:this._evaluator.printType(l),returnType:this._evaluator.printType(a)}),o)}}_validateDunderSignatures(e,n,i){var r;const a=n.details.name;if(i&&a==="__init__"){const s=e.returnTypeAnnotation||((r=e.functionAnnotationComment)===null||r===void 0?void 0:r.returnTypeAnnotation),l=n.details.declaredReturnType;if(s&&l)!(0,he.isNoneInstance)(l)&&!(0,he.isNever)(l)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.initMustReturnNone(),s);else{const o=this._evaluator.getFunctionInferredReturnType(n);!(0,he.isNever)(o)&&!(0,he.isNoneInstance)(o)&&!(0,he.isAnyOrUnknown)(o)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.initMustReturnNone(),e.name)}}}_validateFunctionReturn(e,n){var i;if(this._fileInfo.isStubFile)return;const r=e.returnTypeAnnotation||((i=e.functionAnnotationComment)===null||i===void 0?void 0:i.returnTypeAnnotation);if(r){const a=!this._evaluator.isAfterNodeReachable(e),s=this._evaluator.isAfterNodeReachable(e.suite);let l=n.details.declaredReturnType;if(l){(0,he.isUnknown)(l)?this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownVariableType,lt.DiagnosticRule.reportUnknownVariableType,Ne.Localizer.Diagnostic.declaredReturnTypeUnknown(),r):(0,wt.isPartlyUnknown)(l)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownVariableType,lt.DiagnosticRule.reportUnknownVariableType,Ne.Localizer.Diagnostic.declaredReturnTypePartiallyUnknown().format({returnType:this._evaluator.printType(l,!0)}),r);const o=new jn.DiagnosticAddendum;(0,he.isTypeVar)(l)&&l.details.variance===2&&(o.addMessage(Ne.Localizer.DiagnosticAddendum.typeVarIsContravariant().format({name:he.TypeVarType.getReadableName(l)})),this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.returnTypeContravariant()+o.getString(),r))}if(he.FunctionType.isGenerator(n)&&(l=(0,wt.getDeclaredGeneratorReturnType)(n)),l&&!a&&s){if((0,he.isNever)(l))!Qn.isSuiteEmpty(e.suite)&&!he.FunctionType.isOverloaded(n)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.noReturnReturnsNone(),r);else if(!he.FunctionType.isAbstractMethod(n)){const o=new jn.DiagnosticAddendum;this._evaluator.assignType(l,he.NoneType.createInstance(),o)||!Qn.isSuiteEmpty(e.suite)&&!he.FunctionType.isOverloaded(n)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.returnMissing().format({returnType:this._evaluator.printType(l,!1)})+o.getString(),r)}}}else{const a=this._evaluator.getFunctionInferredReturnType(n);(0,he.isUnknown)(a)?this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownParameterType,lt.DiagnosticRule.reportUnknownParameterType,Ne.Localizer.Diagnostic.returnTypeUnknown(),e.name):(0,wt.isPartlyUnknown)(a)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownParameterType,lt.DiagnosticRule.reportUnknownParameterType,Ne.Localizer.Diagnostic.returnTypePartiallyUnknown().format({returnType:this._evaluator.printType(a,!0)}),e.name)}}_validateFinalMemberOverrides(e){e.details.fields.forEach((n,i)=>{const r=(0,wt.lookUpClassMember)(e,i,1);if(r&&(0,he.isInstantiableClass)(r.classType)&&(0,or.isFinalVariable)(r.symbol)&&!Cr.isPrivateName(i)){const a=n.getDeclarations()[0];this._evaluator.addError(Ne.Localizer.Diagnostic.finalRedeclarationBySubclass().format({name:i,className:r.classType.details.name}),a.node)}})}_reportDuplicateEnumMembers(e){!he.ClassType.isEnumClass(e)||he.ClassType.isBuiltIn(e)||e.details.fields.forEach((n,i)=>{if(n.getTypedDeclarations().length>0)return;const r=n.getDeclarations();if(r.length>=2&&r[0].type===1){const a=this._evaluator.getEffectiveTypeOfSymbol(n);(0,he.isClassInstance)(a)&&he.ClassType.isSameGenericClass(a,e)&&a.literalValue!==void 0&&this._evaluator.addError(Ne.Localizer.Diagnostic.duplicateEnumMember().format({name:i}),r[1].node)}})}_validateProtocolCompatibility(e,n){if(he.ClassType.isProtocolClass(e))return;const i=new jn.DiagnosticAddendum,r=a=>e.details.mro.some(s=>(0,he.isClass)(s)&&!he.ClassType.isProtocolClass(s)&&s.details.fields.has(a));e.details.baseClasses.forEach(a=>{if(!(0,he.isClass)(a)||!he.ClassType.isProtocolClass(a))return;(0,wt.getProtocolSymbols)(a).forEach((l,o)=>{const u=l.symbol.getDeclarations();u.length===0||!(0,he.isClass)(l.classType)||(u[0].type===1?u.some(f=>f.type===1&&!!f.inferredTypeSource)||r(o)||i.addMessage(Ne.Localizer.DiagnosticAddendum.missingProtocolMember().format({name:o,classType:l.classType.details.name})):u[0].type===3&&Qn.isSuiteEmpty(u[0].node.suite)&&u[0]&&(0,EV.getFileExtension)(u[0].path).toLowerCase()!==".pyi"&&(r(o)||i.addMessage(Ne.Localizer.DiagnosticAddendum.missingProtocolMember().format({name:o,classType:l.classType.details.name}))))})}),i.isEmpty()||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.missingProtocolMembers()+i.getString(),n.name)}_validateDataClassPostInit(e,n){if(!he.ClassType.isDataClass(e))return;const i=(0,wt.lookUpClassMember)(e,"__post_init__",18);if(!i||he.ClassType.derivesFromAnyOrUnknown(e))return;const r=new Map;for(let f=e.details.mro.length-1;f>=0;f--){const y=e.details.mro[f];(0,he.isClass)(y)&&he.ClassType.isDataClass(y)&&y.details.fields.forEach((p,b)=>{p.isInitVar()&&r.set(b,p)})}const a=this._evaluator.getTypeOfMember(i);if(!(0,he.isFunction)(a)||!he.FunctionType.isInstanceMethod(a)||!a.details.declaration)return;const s=(0,wt.getParameterListDetails)(a);if(s.argsIndex!==void 0||s.kwargsIndex!==void 0||s.firstKeywordOnlyIndex!==void 0)return;const l=s.params.filter(f=>!f.param.hasDefault),o=r.size+1;(o<l.length||o>s.params.length)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.dataClassPostInitParamCount().format({expected:r.size}),a.details.declaration.node.name);let u=1;r.forEach((f,y)=>{if(u>=s.params.length)return;const p=s.params[u].param;if(p.hasDeclaredType&&p.typeAnnotation){const b=this._evaluator.getDeclaredTypeOfSymbol(f),v=he.FunctionType.getEffectiveParameterType(a,s.params[u].index),m=new jn.DiagnosticAddendum;if(b&&!this._evaluator.assignType(v,b,m)){const V=this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.dataClassPostInitType().format({fieldName:y})+m.getString(),p.typeAnnotation);if(V){const F=f.getTypedDeclarations();F.length>0&&V.addRelatedInfo(Ne.Localizer.DiagnosticAddendum.dataClassFieldLocation(),F[0].path,F[0].range)}}}u++})}_validateFinalClassNotAbstract(e,n){if(!he.ClassType.isFinal(e)||!he.ClassType.supportsAbstractMethods(e))return;const i=this._evaluator.getAbstractMethods(e);if(i.length===0)return;const r=new jn.DiagnosticAddendum,a=2;i.forEach((s,l)=>{if(l===a)r.addMessage(Ne.Localizer.DiagnosticAddendum.memberIsAbstractMore().format({count:i.length-a}));else if(l<a&&(0,he.isInstantiableClass)(s.classType)){const o=s.classType.details.name;r.addMessage(Ne.Localizer.DiagnosticAddendum.memberIsAbstract().format({type:o,name:s.symbolName}))}}),this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.finalClassIsAbstract().format({type:e.details.name})+r.getString(),n.name)}_validateInstanceVariableInitialization(e){this._fileInfo.diagnosticRuleSet.reportUninitializedInstanceVariable!=="none"&&e.details.fields.forEach((n,i)=>{if(!n.isInstanceMember())return;const r=n.getDeclarations();r.find(s=>{var l,o,u;const f=Qn.getEnclosingClassOrFunction(s.node);return!!(!f||f.nodeType===10&&(((l=s.node.parent)===null||l===void 0?void 0:l.nodeType)===3||((o=s.node.parent)===null||o===void 0?void 0:o.nodeType)===54&&((u=s.node.parent.parent)===null||u===void 0?void 0:u.nodeType)===3||he.ClassType.isDataClass(e)||he.ClassType.isTypedDictClass(e))||f.name.value==="__init__")})||(0,wt.lookUpClassMember)(e,i,1)||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUninitializedInstanceVariable,lt.DiagnosticRule.reportUninitializedInstanceVariable,Ne.Localizer.Diagnostic.uninitializedInstanceVariable().format({name:i}),r[0].node)})}_validateProtocolTypeParamVariance(e,n){const i=n.details.typeParameters.filter(u=>!(0,he.isParamSpec)(u));if(i.length===0)return;const r=this._evaluator.getBuiltInType(e,"object");if(!(0,he.isInstantiableClass)(r))return;const a=i.map(u=>(0,he.isVariadicTypeVar)(u)?u:he.TypeVarType.cloneAsInvariant(u)),s=he.ClassType.cloneWithNewTypeParameters(n,a),l=he.ClassType.cloneAsInstance(r),o=he.ClassType.createInstantiable("__protocolVarianceDummy","","","",0,0,void 0,void 0);a.forEach((u,f)=>{if(u.details.isVariadic)return;const y=a.map((F,P)=>F.details.isVariadic?F:P===f?l:o),p=a.map((F,P)=>P===f||F.details.isVariadic?F:o),b=he.ClassType.cloneForSpecialization(s,y,!0),v=he.ClassType.cloneForSpecialization(s,p,!0),m=(0,hI.assignProtocolClassToSelf)(this._evaluator,b,v);let V;if(m?V=1:(0,hI.assignProtocolClassToSelf)(this._evaluator,v,b)?V=2:V=0,V!==i[f].details.variance){let F;V===1?F=Ne.Localizer.Diagnostic.protocolVarianceCovariant().format({variable:u.details.name,class:n.details.name}):V===2?F=Ne.Localizer.Diagnostic.protocolVarianceContravariant().format({variable:u.details.name,class:n.details.name}):F=Ne.Localizer.Diagnostic.protocolVarianceInvariant().format({variable:u.details.name,class:n.details.name}),this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportInvalidTypeVarUse,lt.DiagnosticRule.reportInvalidTypeVarUse,F,e.name)}})}_validateSlotsClassVarConflict(e){!e.details.localSlotsNames||he.ClassType.isDataClass(e)||e.details.fields.forEach((n,i)=>{const r=n.getDeclarations();r.some(s=>s.type===1&&s.isDefinedBySlots)&&r.forEach(s=>{s.type===1&&!s.isDefinedBySlots&&!s.isDefinedByMemberAccess&&s.node.nodeType===38&&Qn.isWriteAccess(s.node)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.slotsClassVarConflict().format({name:i}),s.node)})})}_validateConstructorConsistency(e){const n=(0,wt.lookUpClassMember)(e,"__init__",12),i=(0,wt.lookUpClassMember)(e,"__new__",12);if(!n||!i||!(0,he.isClass)(n.classType)||!(0,he.isClass)(i.classType)||!he.ClassType.isSameGenericClass(i.classType,e)&&!he.ClassType.isSameGenericClass(n.classType,e))return;const r=i.classType.details.effectiveMetaclass;if(r&&(0,he.isClass)(r)&&!he.ClassType.isBuiltIn(r,"type")&&(0,wt.lookUpClassMember)(r,"__call__",40))return;let a=this._evaluator.getTypeOfMember(i);if(!(0,he.isFunction)(a)&&!(0,he.isOverloadedFunction)(a)||(a=this._evaluator.bindFunctionToClassOrObject(e,a,void 0,void 0,void 0,!0),!a)||(0,he.isOverloadedFunction)(a)&&(a=a.overloads.find(l=>!he.FunctionType.isOverloaded(l)),!a))return;let s=this._evaluator.getTypeOfMember(n);if(!(!(0,he.isFunction)(s)&&!(0,he.isOverloadedFunction)(s))&&(s=this._evaluator.bindFunctionToClassOrObject(he.ClassType.cloneAsInstance(e),s),!!s&&!((0,he.isOverloadedFunction)(s)&&(s=s.overloads.find(l=>!he.FunctionType.isOverloaded(l)),!s))&&!(!(0,he.isFunction)(s)||!(0,he.isFunction)(a))&&!(he.FunctionType.hasDefaultParameters(s)||he.FunctionType.hasDefaultParameters(a))&&(s=he.FunctionType.cloneWithNewFlags(s,s.details.flags|32768|65536),a=he.FunctionType.cloneWithNewFlags(a,s.details.flags|32768|65536),!this._evaluator.assignType(a,s,void 0,void 0,void 0,32)||!this._evaluator.assignType(s,a,void 0,void 0,void 0,32)))){const l=he.ClassType.isSameGenericClass(n.classType,e),o=(0,or.getLastTypedDeclaredForSymbol)(n.symbol),u=(0,or.getLastTypedDeclaredForSymbol)(i.symbol);if(o&&u){const f=l?o:u,y=f.node.nodeType===28?f.node.name:f.node,p=new jn.DiagnosticAddendum,b=this._evaluator.printType(s),v=this._evaluator.printType(a);p.addMessage(Ne.Localizer.DiagnosticAddendum.initMethodSignature().format({type:b})),p.addMessage(Ne.Localizer.DiagnosticAddendum.newMethodSignature().format({type:v}));const m=this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportInconsistentConstructor,lt.DiagnosticRule.reportInconsistentConstructor,Ne.Localizer.Diagnostic.constructorParametersMismatch().format({classType:this._evaluator.printType(he.ClassType.cloneAsInstance(l?n.classType:i.classType))})+p.getString(),y);if(m){const V=l?u:o;m.addRelatedInfo((l?Ne.Localizer.DiagnosticAddendum.newMethodLocation():Ne.Localizer.DiagnosticAddendum.initMethodLocation()).format({type:this._evaluator.printType(he.ClassType.cloneAsInstance(l?i.classType:n.classType))}),V.path,V.range)}}}}_validateMultipleInheritanceCompatibility(e,n){if(this._fileInfo.diagnosticRuleSet.reportIncompatibleMethodOverride==="none"&&this._fileInfo.diagnosticRuleSet.reportIncompatibleVariableOverride==="none")return;const i=[];if(e.details.baseClasses.forEach(a=>{(0,he.isClass)(a)&&!he.ClassType.isBuiltIn(a,"Generic")&&!he.ClassType.isBuiltIn(a,"Protocol")&&i.push(a)}),i.length<2)return;const r=i.map(a=>{const s=e.details.mro.find(l=>(0,he.isClass)(l)&&he.ClassType.isSameGenericClass(l,a));return!s||!(0,he.isClass)(s)?new Map:(0,wt.getClassFieldsRecursive)(s)});for(let a=1;a<r.length;a++){const s=r[a];for(const[l,o]of s){if(Cr.isDunderName(l)||Cr.isPrivateName(l))continue;const u=o.classType;if(!!(0,he.isClass)(u))for(let f=0;f<a;f++){const p=r[f].get(l);p&&this._validateMultipleInheritanceOverride(o,p,e,l,i[a],i[f],n)}}}}_validateMultipleInheritanceOverride(e,n,i,r,a,s,l){if(!(0,he.isClass)(e.classType)||!(0,he.isClass)(n.classType)||r==="_")return;let o=this._evaluator.getEffectiveTypeOfSymbol(e.symbol);o=(0,wt.partiallySpecializeType)(o,e.classType);const u=n.symbol;let f=this._evaluator.getEffectiveTypeOfSymbol(u);f=(0,wt.partiallySpecializeType)(f,n.classType);let y;const p=(0,or.getLastTypedDeclaredForSymbol)(n.symbol),b=(0,or.getLastTypedDeclaredForSymbol)(e.symbol);if((0,he.isFunction)(o)||(0,he.isOverloadedFunction)(o)){const v=new jn.DiagnosticAddendum;let m;if((0,he.isFunction)(f))m=f;else if((0,he.isOverloadedFunction)(f)&&(m=f.overloads[f.overloads.length-1],he.FunctionType.isOverloaded(m)))return;if(m&&!this._evaluator.validateOverrideMethod(o,m,v,!0)){const V=m.details.declaration;V&&V.type===3&&(y=this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportIncompatibleMethodOverride,lt.DiagnosticRule.reportIncompatibleMethodOverride,Ne.Localizer.Diagnostic.baseClassMethodTypeIncompatible().format({classType:i.details.name,name:r})+v.getString(),l))}}else(0,wt.isProperty)(o)?!(0,wt.isProperty)(f)&&!(0,he.isAnyOrUnknown)(f)&&u.getDeclarations().length>0&&(y=this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportIncompatibleVariableOverride,lt.DiagnosticRule.reportIncompatibleVariableOverride,Ne.Localizer.Diagnostic.baseClassVariableTypeIncompatible().format({classType:i.details.name,name:r}),l)):this._fileInfo.diagnosticRuleSet.reportIncompatibleVariableOverride!=="none"&&!(0,he.isAnyOrUnknown)(o)&&!(0,he.isAnyOrUnknown)(f)&&!(0,he.isTypeSame)(o,f)&&(y=this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportIncompatibleVariableOverride,lt.DiagnosticRule.reportIncompatibleVariableOverride,Ne.Localizer.Diagnostic.baseClassVariableTypeIncompatible().format({classType:i.details.name,name:r}),l));y&&p&&b&&(y.addRelatedInfo(Ne.Localizer.DiagnosticAddendum.baseClassProvidesType().format({baseClass:this._evaluator.printType((0,wt.convertToInstance)(a)),type:this._evaluator.printType(f)}),p.path,p.range),y.addRelatedInfo(Ne.Localizer.DiagnosticAddendum.baseClassProvidesType().format({baseClass:this._evaluator.printType((0,wt.convertToInstance)(s)),type:this._evaluator.printType(o)}),b.path,b.range))}_validateBaseClassOverrides(e){e.details.fields.forEach((n,i)=>{if(Cr.isPrivateName(i)||!n.hasTypedDeclarations())return;const r=this._evaluator.getEffectiveTypeOfSymbol(n);if(!(0,he.isAnyOrUnknown)(r))for(const a of e.details.baseClasses){if(!(0,he.isClass)(a))continue;const s=e.details.mro.find(o=>(0,he.isClass)(o)&&he.ClassType.isSameGenericClass(o,a));if(!s)continue;const l=(0,wt.lookUpClassMember)(s,i,0);!l||this._validateBaseClassOverride(l,n,r,e,i)}})}_validateBaseClassOverride(e,n,i,r,a){var s;if(!(0,he.isInstantiableClass)(e.classType)||!e.symbol.hasTypedDeclarations()||a==="_")return;const l=(0,wt.partiallySpecializeType)(this._evaluator.getEffectiveTypeOfSymbol(e.symbol),e.classType);if((0,he.isFunction)(l)||(0,he.isOverloadedFunction)(l)){const o=new jn.DiagnosticAddendum;let u;if((0,he.isFunction)(i)?u=i:(0,he.isOverloadedFunction)(i)&&(u=i.overloads[i.overloads.length-1]),u){const f=["__init__","__new__","__init_subclass__"],y=!Cr.isDunderName(a);if(!f.some(p=>p===a)&&!Cr.isPrivateName(a)&&!this._evaluator.validateOverrideMethod(l,u,o,y)){const p=(s=u.details.declaration)!==null&&s!==void 0?s:(0,or.getLastTypedDeclaredForSymbol)(n);if(p){const b=this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportIncompatibleMethodOverride,lt.DiagnosticRule.reportIncompatibleMethodOverride,Ne.Localizer.Diagnostic.incompatibleMethodOverride().format({name:a,className:e.classType.details.name})+o.getString(),p.type===3?p.node.name:p.node),v=(0,or.getLastTypedDeclaredForSymbol)(e.symbol);b&&v&&b.addRelatedInfo(Ne.Localizer.DiagnosticAddendum.overriddenMethod(),v.path,v.range)}}if((0,he.isFunction)(l)&&!Cr.isPrivateName(a)&&he.FunctionType.isFinal(l)){const p=(0,or.getLastTypedDeclaredForSymbol)(n);if(p&&p.type===3){const b=this._evaluator.addError(Ne.Localizer.Diagnostic.finalMethodOverride().format({name:a,className:e.classType.details.name}),p.node.name),v=(0,or.getLastTypedDeclaredForSymbol)(e.symbol);b&&v&&b.addRelatedInfo(Ne.Localizer.DiagnosticAddendum.finalMethod(),v.path,v.range)}}}else if(!(0,he.isAnyOrUnknown)(i)&&!he.ClassType.isBuiltIn(e.classType,"_TypedDict")){const f=n.getDeclarations();if(f.length>0){const y=f[f.length-1],p=this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportIncompatibleMethodOverride,lt.DiagnosticRule.reportIncompatibleMethodOverride,Ne.Localizer.Diagnostic.methodOverridden().format({name:a,className:e.classType.details.name,type:this._evaluator.printType(i,!1)}),y.node),b=(0,or.getLastTypedDeclaredForSymbol)(e.symbol);p&&b&&p.addRelatedInfo(Ne.Localizer.DiagnosticAddendum.overriddenMethod(),b.path,b.range)}}}else if((0,wt.isProperty)(l))if((0,wt.isProperty)(i)){const o=l.details.fields,u=i.details.fields,f=e.classType;["fget","fset","fdel"].forEach(y=>{const p=new jn.DiagnosticAddendum,b=o.get(y),v=u.get(y);if(b){const m=(0,wt.partiallySpecializeType)(this._evaluator.getEffectiveTypeOfSymbol(b),f);if((0,he.isFunction)(m))if(v){const V=(0,wt.partiallySpecializeType)(this._evaluator.getEffectiveTypeOfSymbol(v),r);if((0,he.isFunction)(V)&&!this._evaluator.validateOverrideMethod(m,V,p.createAddendum())){p.addMessage(Ne.Localizer.DiagnosticAddendum.propertyMethodIncompatible().format({name:y}));const F=V.details.declaration;if(F&&F.type===3){const P=this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportIncompatibleMethodOverride,lt.DiagnosticRule.reportIncompatibleMethodOverride,Ne.Localizer.Diagnostic.propertyOverridden().format({name:a,className:f.details.name})+p.getString(),F.node.name),G=m.details.declaration;P&&G&&P.addRelatedInfo(Ne.Localizer.DiagnosticAddendum.overriddenMethod(),G.path,G.range)}}}else{p.addMessage(Ne.Localizer.DiagnosticAddendum.propertyMethodMissing().format({name:y}));const V=n.getDeclarations();if(V.length>0){const F=this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportIncompatibleMethodOverride,lt.DiagnosticRule.reportIncompatibleMethodOverride,Ne.Localizer.Diagnostic.propertyOverridden().format({name:a,className:f.details.name})+p.getString(),V[V.length-1].node),P=m.details.declaration;F&&P&&F.addRelatedInfo(Ne.Localizer.DiagnosticAddendum.overriddenMethod(),P.path,P.range)}}}})}else{const o=n.getDeclarations();o.length>0&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportIncompatibleMethodOverride,lt.DiagnosticRule.reportIncompatibleMethodOverride,Ne.Localizer.Diagnostic.propertyOverridden().format({name:a,className:e.classType.details.name}),o[o.length-1].node)}else if(this._fileInfo.diagnosticRuleSet.reportIncompatibleVariableOverride!=="none"){const o=n.getDeclarations();if(o.length>0){const u=o[o.length-1],f=new jn.DiagnosticAddendum;if(!this._evaluator.assignType(l,i,f)){const b=this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportIncompatibleVariableOverride,lt.DiagnosticRule.reportIncompatibleVariableOverride,Ne.Localizer.Diagnostic.symbolOverridden().format({name:a,className:e.classType.details.name})+f.getString(),u.node),v=(0,or.getLastTypedDeclaredForSymbol)(e.symbol);b&&v&&b.addRelatedInfo(Ne.Localizer.DiagnosticAddendum.overriddenSymbol(),v.path,v.range)}const y=e.symbol.isClassVar();let p=n.isClassVar();if(y&&!p&&(n.hasTypedDeclarations()||(p=!0),n.getTypedDeclarations().every(b=>b.type===4)&&(p=!0)),y!==p){const b=n.isClassVar()?Ne.Localizer.Diagnostic.classVarOverridesInstanceVar():Ne.Localizer.Diagnostic.instanceVarOverridesClassVar(),v=this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportIncompatibleVariableOverride,lt.DiagnosticRule.reportIncompatibleVariableOverride,b.format({name:a,className:e.classType.details.name}),u.node),m=(0,or.getLastTypedDeclaredForSymbol)(e.symbol);v&&m&&v.addRelatedInfo(Ne.Localizer.DiagnosticAddendum.overriddenSymbol(),m.path,m.range)}}}}_validateMethod(e,n,i){const r=this._evaluator.getTypeOfClass(i),a=r==null?void 0:r.classType;if(e.name&&a&&["__init__","__init_subclass__","__enter__","__exit__"].some(l=>l===e.name.value)&&!he.FunctionType.isAbstractMethod(n)&&!he.FunctionType.isOverloaded(n)&&!this._fileInfo.isStubFile&&this._validateSuperCallForMethod(e,n,a),e.name&&e.name.value==="__new__")(e.parameters.length===0||!e.parameters[0].name||!["cls","_cls","__cls","__mcls"].some(s=>e.parameters[0].name.value===s))&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportSelfClsParameterName,lt.DiagnosticRule.reportSelfClsParameterName,Ne.Localizer.Diagnostic.newClsParam(),e.parameters.length>0?e.parameters[0]:e.name),a&&this._validateClsSelfParameterType(n,a,!0);else if(e.name&&e.name.value==="__init_subclass__")(e.parameters.length===0||!e.parameters[0].name||e.parameters[0].name.value!=="cls")&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportSelfClsParameterName,lt.DiagnosticRule.reportSelfClsParameterName,Ne.Localizer.Diagnostic.initSubclassClsParam(),e.parameters.length>0?e.parameters[0]:e.name),a&&this._validateClsSelfParameterType(n,a,!0);else if(e.name&&e.name.value==="__class_getitem__")(e.parameters.length===0||!e.parameters[0].name||e.parameters[0].name.value!=="cls")&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportSelfClsParameterName,lt.DiagnosticRule.reportSelfClsParameterName,Ne.Localizer.Diagnostic.classGetItemClsParam(),e.parameters.length>0?e.parameters[0]:e.name),a&&this._validateClsSelfParameterType(n,a,!0);else if(he.FunctionType.isStaticMethod(n)){if(e.parameters.length>0&&e.parameters[0].name){const s=e.parameters[0].name.value;(s==="self"||s==="cls")&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportSelfClsParameterName,lt.DiagnosticRule.reportSelfClsParameterName,Ne.Localizer.Diagnostic.staticClsSelfParam(),e.parameters[0].name)}}else if(he.FunctionType.isClassMethod(n)){let s="";e.parameters.length>0&&e.parameters[0].name&&(s=e.parameters[0].name.value),s!=="cls"&&(!this._fileInfo.isStubFile||!s.startsWith("_")&&s!=="metacls")&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportSelfClsParameterName,lt.DiagnosticRule.reportSelfClsParameterName,Ne.Localizer.Diagnostic.classMethodClsParam(),e.parameters.length>0?e.parameters[0]:e.name),a&&this._validateClsSelfParameterType(n,a,!0)}else{if(e.decorators.length===0){let s="",l=!0;if(e.parameters.length>0&&(e.parameters[0].name&&(s=e.parameters[0].name.value),e.parameters[0].category!==0&&(l=!1)),l&&s!=="self"){let o=!1;if(s==="cls"){const f=this._evaluator.getTypeOfClass(i),y=this._evaluator.getBuiltInType(i,"type");y&&(0,he.isInstantiableClass)(y)&&f&&(0,he.isInstantiableClass)(f.classType)&&(0,wt.derivesFromClassRecursive)(f.classType,y,!0)&&(o=!0)}const u=Cr.isPrivateOrProtectedName(s);!o&&!u&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportSelfClsParameterName,lt.DiagnosticRule.reportSelfClsParameterName,Ne.Localizer.Diagnostic.instanceMethodSelfParam(),e.parameters.length>0?e.parameters[0]:e.name)}}a&&this._validateClsSelfParameterType(n,a,!1)}}_validateSuperCallForMethod(e,n,i){if(this._fileInfo.diagnosticRuleSet.reportMissingSuperCall==="none")return;let r=9;if(he.ClassType.isFinal(i)&&(r|=4),!(0,wt.lookUpClassMember)(i,n.details.name,r))return;let s=!1;new Qn.CallNodeWalker(o=>{if(o.leftExpression.nodeType===35&&o.leftExpression.memberName.value===n.details.name){const u=o.leftExpression.leftExpression;if(u.nodeType===9&&u.leftExpression.nodeType===38&&u.leftExpression.value==="super")s=!0;else{const f=this._evaluator.getType(u);f&&(0,he.isInstantiableClass)(f)&&(s=!0)}}}).walk(e.suite),s||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportMissingSuperCall,lt.DiagnosticRule.reportMissingSuperCall,Ne.Localizer.Diagnostic.missingSuperCall().format({methodName:n.details.name}),e.name)}_validateClsSelfParameterType(e,n,i){if(e.details.parameters.length<1)return;const r=e.details.parameters[0];if(!r.typeAnnotation||!r.name||he.ClassType.isProtocolClass(n))return;const a=this._evaluator.makeTopLevelTypeVarsConcrete(r.type),s=i?n:(0,wt.convertToInstance)(n);(0,he.isInstantiableClass)(a)&&he.ClassType.isProtocolClass(a)||(0,he.isClassInstance)(a)&&he.ClassType.isProtocolClass(a)||he.FunctionType.isOverloaded(e)||this._evaluator.assignType(a,s)||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.clsSelfParamTypeMismatch().format({name:r.name,classType:this._evaluator.printType(s,!1)}),r.typeAnnotation)}_validateYieldType(e,n){let i,r;const a=Qn.getEnclosingFunction(e);if(a){const s=this._evaluator.getTypeOfFunction(a);s&&((0,AD.assert)((0,he.isFunction)(s.functionType)),i=he.FunctionType.getSpecializedReturnType(s.functionType),i&&(r=(0,wt.getGeneratorYieldType)(i,!!a.isAsync)),i&&!r&&a.returnTypeAnnotation&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,a.isAsync?Ne.Localizer.Diagnostic.generatorAsyncReturnType():Ne.Localizer.Diagnostic.generatorSyncReturnType(),a.returnTypeAnnotation))}if(this._evaluator.isNodeReachable(e,void 0)){if(i&&(0,he.isNever)(i))this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.noReturnContainsYield(),e);else if(r){const s=new jn.DiagnosticAddendum;this._evaluator.assignType(r,n,s)||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.yieldTypeMismatch().format({exprType:this._evaluator.printType(n,!1),yieldType:this._evaluator.printType(r,!1)})+s.getString(),e.expression||e)}}}_reportUnusedExceptStatements(e){let n=!1;const i=[];e.exceptClauses.forEach(r=>{if(n||r.isExceptGroup||!r.typeExpression)return;const a=this._evaluator.getType(r.typeExpression);if(!a||(0,he.isAnyOrUnknown)(a)){n=!0;return}const s=[];if((0,he.isInstantiableClass)(a))a.includeSubclasses&&(n=!0),s.push(a);else if((0,he.isClassInstance)(a)){const l=this._evaluator.getTypeOfIterator(a,!1,void 0)||he.UnknownType.create();(0,wt.doForEachSubtype)(l,o=>{(0,he.isAnyOrUnknown)(o)&&(n=!0),(0,he.isInstantiableClass)(o)&&(o.includeSubclasses&&(n=!0),s.push(o))})}else n=!0;if(i.length>0&&!n){const l=new jn.DiagnosticAddendum;let o=0;s.forEach(u=>{const f=i.find(y=>(0,wt.derivesFromClassRecursive)(u,y,!0));f&&(l.addMessage(Ne.Localizer.DiagnosticAddendum.unreachableExcept().format({exceptionType:this._evaluator.printType((0,wt.convertToInstance)(u)),parentType:this._evaluator.printType((0,wt.convertToInstance)(f))})),o++)}),s.length===o&&(this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.unreachableExcept()+l.getString(),r.typeExpression),this._evaluator.addUnusedCode(r,r.exceptSuite))}i.push(...s)})}_reportDuplicateImports(){const e=(0,ND.getTopLevelImports)(this._moduleNode),n=new Map;e.orderedImports.forEach(i=>{if(i.node.nodeType===22){const r=new Map;i.node.imports.forEach(a=>{a.alias||(r.get(a.name.value)?this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportDuplicateImport,lt.DiagnosticRule.reportDuplicateImport,Ne.Localizer.Diagnostic.duplicateImport().format({importName:a.name.value}),a.name):r.set(a.name.value,a))})}else i.subnode&&(i.subnode.alias||(n.get(i.moduleName)?this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportDuplicateImport,lt.DiagnosticRule.reportDuplicateImport,Ne.Localizer.Diagnostic.duplicateImport().format({importName:i.moduleName}),i.subnode):n.set(i.moduleName,i.subnode)))})}}cm.Checker=xV;class kv extends RD.ParseTreeWalker{constructor(e,n,i){super(),this._importResolver=e,this._evaluator=n,this._fileInfo=i}static report(e,n,i,r){i.isStubFile||new kv(e,n,i).walk(r)}visitNode(e){return(0,MD.isExpressionNode)(e)?[]:super.visitNode(e)}visitModule(e){return ps.getCodeFlowComplexity(e)>OD.maxCodeComplexity?(this._evaluator.addDiagnosticForTextRange(this._fileInfo,this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,lt.DiagnosticRule.reportGeneralTypeIssues,Ne.Localizer.Diagnostic.codeTooComplexToAnalyze(),{start:0,length:0}),!1):!0}visitModuleName(e){const n=ps.getImportInfo(e);return(0,AD.assert)(n!==void 0),this._addMissingModuleSourceDiagnosticIfNeeded(n,e),!1}visitImportFromAs(e){const n=this._evaluator.getDeclarationsForNameNode(e.name);if(!n)return!1;for(const i of n){if(!(0,kV.isAliasDeclaration)(i)||!i.submoduleFallback||i.node!==e)continue;const r=this._evaluator.resolveAliasDeclaration(i,!0);if(!(r!=null&&r.path)||!(0,MV.isStubFile)(r.path))continue;const a=this._getImportResult(e,r.path);if(!!a){this._addMissingModuleSourceDiagnosticIfNeeded(a,e.name);break}}return!1}_getImportResult(e,n){const i=this._importResolver.getConfigOption().findExecEnvironment(n),a=e.parent.module.leadingDots===0?this._importResolver.getModuleNameForImport(n,i).moduleName:(0,ND.getRelativeModuleName)(this._importResolver.fileSystem,this._fileInfo.filePath,n);if(!!a)return this._importResolver.resolveImport(this._fileInfo.filePath,i,(0,DV.createImportedModuleDescriptor)(a))}_addMissingModuleSourceDiagnosticIfNeeded(e,n){e.isNativeLib||!e.isStubFile||e.importType===0||!e.nonStubImportResult||e.nonStubImportResult.isImportFound||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportMissingModuleSource,lt.DiagnosticRule.reportMissingModuleSource,Ne.Localizer.Diagnostic.importSourceResolveFailure().format({importName:e.importName}),n)}}var pm={};Object.defineProperty(pm,"__esModule",{value:!0});pm.getFileLevelDirectives=void 0;const fo=Ad;function LV(t,e,n){let i=(0,fo.cloneDiagnosticRuleSet)(e);n&&xD(i);for(let r=0;r<t.count;r++){const a=t.getItemAt(r);if(a.comments)for(const s of a.comments){const l=s.value.trim();i=UV(l,i)}}return i}pm.getFileLevelDirectives=LV;function xD(t){LD(t,(0,fo.getStrictDiagnosticRuleSet)(),(0,fo.getStrictModeNotOverriddenRules)())}function zV(t){LD(t,(0,fo.getBasicDiagnosticRuleSet)(),[])}function LD(t,e,n){const i=(0,fo.getBooleanDiagnosticRules)(),r=(0,fo.getDiagLevelDiagnosticRules)();for(const a of i)n.find(s=>s===a)||e[a]&&(t[a]=!0);for(const a of r){if(n.find(o=>o===a))continue;const s=e[a],l=t[a];(s==="error"||s==="warning"&&l!=="error"||s==="information"&&l!=="error"&&l!=="warning")&&(t[a]=s)}}function UV(t,e){const i=["pyright:","mspython:"].find(r=>t.startsWith(r));if(i){const a=t.substr(i.length).trim().split(",").map(s=>s.trim());a.some(s=>s==="strict")?xD(e):a.some(s=>s==="basic")&&zV(e);for(const s of a)e=VV(s,e)}return e}function VV(t,e){const n=t.split("=").map(s=>s.trim());if(n.length!==2)return e;const i=n[0],r=(0,fo.getBooleanDiagnosticRules)();if((0,fo.getDiagLevelDiagnosticRules)().find(s=>s===i)){const s=BV(n[1]);s!==void 0&&(e[i]=s)}else if(r.find(s=>s===i)){const s=WV(n[1]);s!==void 0&&(e[i]=s)}return e}function BV(t){switch(t){case"false":case"none":return"none";case"true":case"error":return"error";case"warning":return"warning";case"information":return"information";default:return}}function WV(t){if(t==="false")return!1;if(t==="true")return!0}var hm={},$V=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),jV=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),qV=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&$V(e,t,n);return jV(e,t),e};Object.defineProperty(hm,"__esModule",{value:!0});hm.ParseTreeCleanerWalker=void 0;const GV=qV(kt),KV=rs;class HV extends KV.ParseTreeWalker{constructor(e){super(),this._parseTree=e}clean(){this.walk(this._parseTree)}visitNode(e){return GV.cleanNodeAnalysisInfo(e),super.visitNode(e)}}hm.ParseTreeCleanerWalker=HV;var Oc={};Object.defineProperty(Oc,"__esModule",{value:!0});Oc.NameTypeWalker=Oc.TestWalker=void 0;const zD=rs,ng=qt,ig=Rn;class YV extends zD.ParseTreeWalker{constructor(){super()}visitNode(e){const n=super.visitNode(e);return this._verifyParentChildLinks(e,n),this._verifyChildRanges(e,n),n}_verifyParentChildLinks(e,n){n.forEach(i=>{i&&i.parent!==e&&(0,ng.fail)(`Child node ${i.nodeType} does not contain a reference to its parent ${e.nodeType}`)})}_verifyChildRanges(e,n){let i;n.forEach(r=>{if(r){let a=!1;e.nodeType===3&&r===e.typeAnnotationComment&&(a=!0),e.nodeType===48&&r===e.typeAnnotation&&(a=!0),a||((r.start<e.start||ig.TextRange.getEnd(r)>ig.TextRange.getEnd(e))&&(0,ng.fail)(`Child node ${r.nodeType} is not contained within its parent ${e.nodeType}`),i&&r.start<ig.TextRange.getEnd(i)&&i.nodeType!==62&&(0,ng.fail)("Child node is not after previous child node"),i=r)}})}}Oc.TestWalker=YV;class QV extends zD.ParseTreeWalker{constructor(e){super(),this._evaluator=e}visitName(e){var n,i;return((n=e.parent)===null||n===void 0?void 0:n.nodeType)!==23&&((i=e.parent)===null||i===void 0?void 0:i.nodeType)!==21&&this._evaluator.isNodeReachable(e,void 0)&&this._evaluator.getType(e),!0}}Oc.NameTypeWalker=QV;var JV=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),XV=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mm=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&JV(e,t,n);return XV(e,t),e};Object.defineProperty(nm,"__esModule",{value:!0});nm.SourceFile=void 0;const mI=T8,ZV=mk,e9=mm(Dn),t9=In,n9=Ad,i9=Qh,Gr=qt,Da=Oi,pu=sl,r9=Nd,s9=rl,lr=Hn,zf=yn,rg=mm(bn),Rl=Rn,yI=Rd,Mo=ji,gI=Jh,TI=Zk,a9=im,sg=to,o9=Rc,l9=rm,ag=la,c9=am,Kr=ir,u9=ws,_I=al,Pa=mm(kt),d9=no,f9=cm,p9=mm(pm),h9=hm,m9=Oc,y9=4,vI=50*1024*1024;class g9{constructor(e,n,i,r,a,s,l,o=!1){this._isFileDeleted=!1,this._diagnosticVersion=0,this._fileContentsVersion=0,this._lastFileContentLength=void 0,this._lastFileContentHash=void 0,this._analyzedFileContentsVersion=-1,this._parseTreeNeedsCleaning=!1,this._isBindingInProgress=!1,this._parseDiagnostics=[],this._bindDiagnostics=[],this._checkerDiagnostics=[],this._typeIgnoreLines=new Map,this._pyrightIgnoreLines=new Map,this._diagnosticRuleSet=(0,n9.getBasicDiagnosticRuleSet)(),this._circularDependencies=[],this._noCircularDependencyConfirmed=!1,this._isBindingNeeded=!0,this._isCheckingNeeded=!0,this._indexingNeeded=!0,this._ipythonMode=!1,this.fileSystem=e,this._console=s||new i9.StandardConsole,this._filePath=n,this._moduleName=i,this._isStubFile=n.endsWith(".pyi"),this._isThirdPartyImport=r,this._isThirdPartyPyTypedPresent=a;const u=(0,lr.getFileName)(n);this._isTypingStubFile=this._isStubFile&&(this._filePath.endsWith((0,lr.normalizeSlashes)("stdlib/typing.pyi"))||u==="typing_extensions.pyi"),this._isTypingExtensionsStubFile=this._isStubFile&&u==="typing_extensions.pyi",this._isBuiltInStubFile=!1,this._isStubFile&&(this._filePath.endsWith((0,lr.normalizeSlashes)("stdlib/collections/__init__.pyi"))||this._filePath.endsWith((0,lr.normalizeSlashes)("stdlib/asyncio/futures.pyi"))||this._filePath.endsWith((0,lr.normalizeSlashes)("stdlib/asyncio/tasks.pyi"))||this._filePath.endsWith((0,lr.normalizeSlashes)("stdlib/builtins.pyi"))||this._filePath.endsWith((0,lr.normalizeSlashes)("stdlib/_importlib_modulespec.pyi"))||this._filePath.endsWith((0,lr.normalizeSlashes)("stdlib/dataclasses.pyi"))||this._filePath.endsWith((0,lr.normalizeSlashes)("stdlib/abc.pyi"))||this._filePath.endsWith((0,lr.normalizeSlashes)("stdlib/enum.pyi"))||this._filePath.endsWith((0,lr.normalizeSlashes)("stdlib/queue.pyi"))||this._filePath.endsWith((0,lr.normalizeSlashes)("stdlib/types.pyi")))&&(this._isBuiltInStubFile=!0),this._logTracker=l!=null?l:new r9.LogTracker(s,ZV.isMainThread?"FG":"BG"),this._ipythonMode=o}getFilePath(){return this._filePath}getDiagnosticVersion(){return this._diagnosticVersion}isStubFile(){return this._isStubFile}isThirdPartyPyTypedPresent(){return this._isThirdPartyPyTypedPresent}getDiagnostics(e,n){if(this._diagnosticVersion===n)return;let i=!0;this._isThirdPartyImport&&(i=!1);let r=[...this._parseDiagnostics,...this._bindDiagnostics,...this._checkerDiagnostics];const a=r,s=new Map(this._typeIgnoreLines),l=new Map(this._pyrightIgnoreLines);this._diagnosticRuleSet.enableTypeIgnoreComments&&this._typeIgnoreLines.size>0&&(r=r.filter(u=>{if(u.category!==3&&u.category!==4){for(let f=u.range.start.line;f<=u.range.end.line;f++)if(this._typeIgnoreLines.has(f))return s.delete(f),!1}return!0})),this._pyrightIgnoreLines.size>0&&(r=r.filter(u=>{if(u.category!==3&&u.category!==4)for(let f=u.range.start.line;f<=u.range.end.line;f++){const y=this._pyrightIgnoreLines.get(f);if(y){if(!y.rulesList)return l.delete(f),!1;const p=u.getRule();if(!p)return!0;if(y.rulesList.find(b=>b.text===p)){const b=l.get(f);if(b!=null&&b.rulesList){const v=b.rulesList.filter(m=>m.text!==p);v.length===0?l.delete(f):l.set(f,{range:b.range,rulesList:v})}return!1}return!0}}return!0}));const o=[];if(this._diagnosticRuleSet.reportUnnecessaryTypeIgnoreComment!=="none"){const u=(0,Da.convertLevelToCategory)(this._diagnosticRuleSet.reportUnnecessaryTypeIgnoreComment);a.filter(y=>y.category===0||y.category===1||y.category===2).length===0&&this._typeIgnoreAll!==void 0&&o.push(new Da.Diagnostic(u,Kr.Localizer.Diagnostic.unnecessaryTypeIgnore(),(0,zf.convertOffsetsToRange)(this._typeIgnoreAll.range.start,this._typeIgnoreAll.range.start+this._typeIgnoreAll.range.length,this._parseResults.tokenizerOutput.lines))),s.forEach(y=>{var p;!((p=this._parseResults)===null||p===void 0)&&p.tokenizerOutput.lines&&o.push(new Da.Diagnostic(u,Kr.Localizer.Diagnostic.unnecessaryTypeIgnore(),(0,zf.convertOffsetsToRange)(y.range.start,y.range.start+y.range.length,this._parseResults.tokenizerOutput.lines)))}),l.forEach(y=>{var p;!((p=this._parseResults)===null||p===void 0)&&p.tokenizerOutput.lines&&(y.rulesList?y.rulesList.forEach(b=>{o.push(new Da.Diagnostic(u,Kr.Localizer.Diagnostic.unnecessaryPyrightIgnoreRule().format({name:b.text}),(0,zf.convertOffsetsToRange)(b.range.start,b.range.start+b.range.length,this._parseResults.tokenizerOutput.lines)))}):o.push(new Da.Diagnostic(u,Kr.Localizer.Diagnostic.unnecessaryPyrightIgnore(),(0,zf.convertOffsetsToRange)(y.range.start,y.range.start+y.range.length,this._parseResults.tokenizerOutput.lines))))})}if(this._diagnosticRuleSet.reportImportCycles!=="none"&&this._circularDependencies.length>0){const u=(0,Da.convertLevelToCategory)(this._diagnosticRuleSet.reportImportCycles);this._circularDependencies.forEach(f=>{r.push(new Da.Diagnostic(u,Kr.Localizer.Diagnostic.importCycleDetected()+`
`+f.getPaths().map(y=>"  "+y).join(`
`),(0,Rl.getEmptyRange)()))})}return this._hitMaxImportDepth!==void 0&&r.push(new Da.Diagnostic(0,Kr.Localizer.Diagnostic.importDepthExceeded().format({depth:this._hitMaxImportDepth}),(0,Rl.getEmptyRange)())),e.ignore.find(u=>u.regExp.test(this._filePath))&&(r=[]),this._diagnosticRuleSet.enableTypeIgnoreComments&&this._typeIgnoreAll!==void 0&&(r=r.filter(u=>u.category!==0&&u.category!==1&&u.category!==2)),r=r.concat(o),i||(r=r.filter(u=>u.category===3||u.category===4)),r}getImports(){return this._imports||[]}getBuiltinsImport(){return this._builtinsImport}getIPythonDisplayImport(){return this._ipythonDisplayImport}getModuleSymbolTable(){return this._moduleSymbolTable}getCheckTime(){return this._checkTime}didContentsChangeOnDisk(){if(this._clientDocument||this._lastFileContentLength===void 0)return!1;try{const e=this.fileSystem.readFileSync(this._filePath,"utf8");if(e.length!==this._lastFileContentLength||rg.hashString(e)!==this._lastFileContentHash)return!0}catch{return!0}return!1}dropParseAndBindInfo(){this._parseResults=void 0,this._moduleSymbolTable=void 0,this._isBindingNeeded=!0}markDirty(e=!0){this._fileContentsVersion++,this._noCircularDependencyConfirmed=!1,this._isCheckingNeeded=!0,this._isBindingNeeded=!0,this._indexingNeeded=e,this._moduleSymbolTable=void 0,this._cachedIndexResults=void 0}markReanalysisRequired(e){this._isCheckingNeeded=!0,this._parseResults&&(this._parseResults.containsWildcardImport||Pa.getDunderAllInfo(this._parseResults.parseTree)!==void 0||e)&&(this._parseTreeNeedsCleaning=!0,this._isBindingNeeded=!0,this._moduleSymbolTable=void 0)}getClientVersion(){var e;return(e=this._clientDocument)===null||e===void 0?void 0:e.version}getOpenFileContents(){var e;return(e=this._clientDocument)===null||e===void 0?void 0:e.getText()}getFileContent(){const e=this.getOpenFileContents();if(e)return e;try{const n=this.fileSystem.statSync(this._filePath);if(n.size>vI)throw this._console.error(`File length of "${this._filePath}" is ${n.size} which exceeds the maximum supported file size of ${vI}`),new Error("File larger than max");return this.fileSystem.readFileSync(this._filePath,"utf8")}catch{return}}setClientVersion(e,n){if(e===null)this._clientDocument=void 0;else{this._clientDocument||(this._clientDocument=mI.TextDocument.create(this._filePath,"python",e,"")),this._clientDocument=mI.TextDocument.update(this._clientDocument,n,e);const i=this._clientDocument.getText(),r=rg.hashString(i);(i.length!==this._lastFileContentLength||r!==this._lastFileContentHash)&&this.markDirty(),this._lastFileContentLength=i.length,this._lastFileContentHash=r,this._isFileDeleted=!1}}prepareForClose(){}isFileDeleted(){return this._isFileDeleted}isParseRequired(){return!this._parseResults||this._analyzedFileContentsVersion!==this._fileContentsVersion}isBindingRequired(){return this._isBindingInProgress?!1:this.isParseRequired()?!0:this._isBindingNeeded}isIndexingRequired(){return this._indexingNeeded}isCheckingRequired(){return this._isCheckingNeeded}getParseResults(){if(!this.isParseRequired())return this._parseResults}getCachedIndexResults(){return this._cachedIndexResults}cacheIndexResults(e){this._cachedIndexResults=e}addCircularDependency(e){let n=!1;this._circularDependencies.length<y9&&(this._circularDependencies.some(i=>i.isEqual(e))||(this._circularDependencies.push(e),n=!0)),n&&this._diagnosticVersion++}setNoCircularDependencyConfirmed(){this._noCircularDependencyConfirmed=!0}isNoCircularDependencyConfirmed(){return!this.isParseRequired()&&this._noCircularDependencyConfirmed}setHitMaxImportDepth(e){this._hitMaxImportDepth=e}parse(e,n,i){return this._logTracker.log(`parsing: ${this._getPathForLogging(this._filePath)}`,r=>{var a;if(!this.isParseRequired())return r.suppress(),!1;const s=new pu.DiagnosticSink;let l=this.getOpenFileContents();if(l===void 0)try{const f=Mo.timingStats.readFileTime.totalTime;Mo.timingStats.readFileTime.timeOperation(()=>{if(l=i!=null?i:this.getFileContent(),l===void 0)throw new Error("Can't get file content");this._lastFileContentLength=l.length,this._lastFileContentHash=rg.hashString(l)}),r.add(`fs read ${Mo.timingStats.readFileTime.totalTime-f}ms`)}catch{s.addError("Source file could not be read",(0,Rl.getEmptyRange)()),l="",this.fileSystem.existsSync(this._filePath)||(this._isFileDeleted=!0)}const o=e.findExecEnvironment(this._filePath),u=new _I.ParseOptions;u.ipythonMode=this._ipythonMode,this._filePath.endsWith("pyi")&&(u.isStubFile=!0),u.pythonVersion=o.pythonVersion,u.skipFunctionAndClassBody=(a=e.indexGenerationMode)!==null&&a!==void 0?a:!1;try{const y=new _I.Parser().parseSourceFile(l,u,s);(0,Gr.assert)(y!==void 0&&y.tokenizerOutput!==void 0),this._parseResults=y,this._typeIgnoreLines=this._parseResults.tokenizerOutput.typeIgnoreLines,this._typeIgnoreAll=this._parseResults.tokenizerOutput.typeIgnoreAll,this._pyrightIgnoreLines=this._parseResults.tokenizerOutput.pyrightIgnoreLines,Mo.timingStats.resolveImportsTime.timeOperation(()=>{const b=this._resolveImports(n,y.importedModules,o);this._imports=b.imports,this._builtinsImport=b.builtinsImportResult,this._ipythonDisplayImport=b.ipythonDisplayImportResult,this._parseDiagnostics=s.fetchAndClear()});const p=e.strict.find(b=>b.regExp.test(this._filePath))!==void 0;this._diagnosticRuleSet=p9.getFileLevelDirectives(this._parseResults.tokenizerOutput.tokens,e.diagnosticRuleSet,p)}catch(f){const y=(f.stack?f.stack.toString():void 0)||(typeof f.message=="string"?f.message:void 0)||JSON.stringify(f);this._console.error(Kr.Localizer.Diagnostic.internalParseError().format({file:this.getFilePath(),message:y})),this._parseResults={text:"",parseTree:u9.ModuleNode.create({start:0,length:0}),importedModules:[],futureImports:new Map,tokenizerOutput:{tokens:new yI.TextRangeCollection([]),lines:new yI.TextRangeCollection([]),typeIgnoreAll:void 0,typeIgnoreLines:new Map,pyrightIgnoreLines:new Map,predominantEndOfLineSequence:`
`,predominantTabSequence:"    ",predominantSingleQuoteCharacter:"'"},containsWildcardImport:!1,typingSymbolAliases:new Map},this._imports=void 0,this._builtinsImport=void 0,this._ipythonDisplayImport=void 0;const p=new pu.DiagnosticSink;p.addError(Kr.Localizer.Diagnostic.internalParseError().format({file:this.getFilePath(),message:y}),(0,Rl.getEmptyRange)()),this._parseDiagnostics=p.fetchAndClear()}return this._analyzedFileContentsVersion=this._fileContentsVersion,this._indexingNeeded=!0,this._isBindingNeeded=!0,this._isCheckingNeeded=!0,this._parseTreeNeedsCleaning=!1,this._hitMaxImportDepth=void 0,this._diagnosticVersion++,!0})}index(e,n){return this._logTracker.log(`indexing: ${this._getPathForLogging(this._filePath)}`,i=>{if(!this._parseResults||!this.isIndexingRequired()){i.suppress();return}this._indexingNeeded=!1;const r=sg.DocumentSymbolProvider.indexSymbols(Pa.getFileInfo(this._parseResults.parseTree),this._parseResults,e,n);i.add(`found ${r.length}`);const a=(0,lr.stripFileExtension)((0,lr.getFileName)(this._filePath));return{privateOrProtected:e9.isPrivateOrProtectedName(a),symbols:r}})}getDefinitionsForPosition(e,n,i,r,a){if(!!this._parseResults)return TI.DefinitionProvider.getDefinitionsForPosition(e,this._parseResults,n,i,r,a)}getTypeDefinitionsForPosition(e,n,i,r,a){if(!!this._parseResults)return TI.DefinitionProvider.getTypeDefinitionsForPosition(e,this._parseResults,n,i,r,a)}getDeclarationForNode(e,n,i,r,a){if(!!this._parseResults)return ag.ReferencesProvider.getDeclarationForNode(e,this._filePath,n,i,r,a)}getDeclarationForPosition(e,n,i,r,a){if(!!this._parseResults)return ag.ReferencesProvider.getDeclarationForPosition(e,this._parseResults,this._filePath,n,i,r,a)}addReferences(e,n,i,r){!this._parseResults||ag.ReferencesProvider.addReferences(this._parseResults,this._filePath,e,n,i,r)}addHierarchicalSymbolsForDocument(e,n){!this._parseResults&&!this._cachedIndexResults||sg.DocumentSymbolProvider.addHierarchicalSymbolsForDocument(this._parseResults?Pa.getFileInfo(this._parseResults.parseTree):void 0,this.getCachedIndexResults(),this._parseResults,e,n)}getSymbolsForDocument(e,n){return!this._parseResults&&!this._cachedIndexResults?[]:sg.DocumentSymbolProvider.getSymbolsForDocument(this._parseResults?Pa.getFileInfo(this._parseResults.parseTree):void 0,this.getCachedIndexResults(),this._parseResults,this._filePath,e,n)}getHoverForPosition(e,n,i,r,a){if(!(this._isBindingNeeded||!this._parseResults))return o9.HoverProvider.getHoverForPosition(e,this._parseResults,n,i,r,a)}getDocumentHighlight(e,n,i,r){if(!(this._isBindingNeeded||!this._parseResults))return a9.DocumentHighlightProvider.getDocumentHighlight(this._parseResults,n,i,r)}getSignatureHelpForPosition(e,n,i,r,a){if(!!this._parseResults)return c9.SignatureHelpProvider.getSignatureHelpForPosition(this._parseResults,e,n,i,r,a)}getCompletionsForPosition(e,n,i,r,a,s,l,o,u,f,y,p){if(!this._parseResults)return;const b=this.getOpenFileContents();return b===void 0?void 0:new gI.CompletionProvider(n,this._parseResults,b,r,e,this._filePath,i,a,s,l,o,{nameMap:u,libraryMap:f,getModuleSymbolsMap:y},p).getCompletionsForPosition()}resolveCompletionItem(e,n,i,r,a,s,l,o,u,f,y){const p=this.getOpenFileContents();if(!this._parseResults||p===void 0)return;const b=(0,s9.fromLSPAny)(f.data);new gI.CompletionProvider(b.workspacePath,this._parseResults,p,n,b.position,this._filePath,e,i,r,a,s,{nameMap:l,libraryMap:o,getModuleSymbolsMap:u},y).resolveCompletionItem(f)}performQuickAction(e,n,i){if(!!this._parseResults&&this.getClientVersion()!==void 0)return(0,l9.performQuickAction)(e,n,this._parseResults,i)}bind(e,n,i){return(0,Gr.assert)(!this.isParseRequired(),"Bind called before parsing"),(0,Gr.assert)(this.isBindingRequired(),"Bind called unnecessarily"),(0,Gr.assert)(!this._isBindingInProgress,"Bind called while binding in progress"),(0,Gr.assert)(this._parseResults!==void 0,"Parse results not available"),this._logTracker.log(`binding: ${this._getPathForLogging(this._filePath)}`,()=>{try{Mo.timingStats.bindTime.timeOperation(()=>{this._cleanParseTreeIfRequired();const r=this._buildFileInfo(e,this._parseResults.text,n,i);Pa.setFileInfo(this._parseResults.parseTree,r);const a=new d9.Binder(r,e.indexGenerationMode);this._isBindingInProgress=!0,a.bindModule(this._parseResults.parseTree),e.internalTestMode&&new m9.TestWalker().walk(this._parseResults.parseTree),this._bindDiagnostics=r.diagnosticSink.fetchAndClear();const s=Pa.getScope(this._parseResults.parseTree);(0,Gr.assert)(s!==void 0,"Module scope not returned by binder"),this._moduleSymbolTable=s.symbolTable})}catch(r){const a=(r.stack?r.stack.toString():void 0)||(typeof r.message=="string"?r.message:void 0)||JSON.stringify(r);this._console.error(Kr.Localizer.Diagnostic.internalBindError().format({file:this.getFilePath(),message:a}));const s=new pu.DiagnosticSink;s.addError(Kr.Localizer.Diagnostic.internalBindError().format({file:this.getFilePath(),message:a}),(0,Rl.getEmptyRange)()),this._bindDiagnostics=s.fetchAndClear()}finally{this._isBindingInProgress=!1}this._diagnosticVersion++,this._isCheckingNeeded=!0,this._indexingNeeded=!0,this._isBindingNeeded=!1})}check(e,n){return(0,Gr.assert)(!this.isParseRequired(),"Check called before parsing"),(0,Gr.assert)(!this.isBindingRequired(),"Check called before binding"),(0,Gr.assert)(!this._isBindingInProgress,"Check called while binding in progress"),(0,Gr.assert)(this.isCheckingRequired(),"Check called unnecessarily"),(0,Gr.assert)(this._parseResults!==void 0,"Parse results not available"),this._logTracker.log(`checking: ${this._getPathForLogging(this._filePath)}`,()=>{try{Mo.timingStats.typeCheckerTime.timeOperation(()=>{const i=new Mo.Duration;new f9.Checker(e,n,this._parseResults.parseTree).check(),this._isCheckingNeeded=!1;const a=Pa.getFileInfo(this._parseResults.parseTree);this._checkerDiagnostics=a.diagnosticSink.fetchAndClear(),this._checkTime=i.getDurationInMilliseconds()})}catch(i){if(!t9.OperationCanceledException.is(i)){const a=(i.stack?i.stack.toString():void 0)||(typeof i.message=="string"?i.message:void 0)||JSON.stringify(i);this._console.error(Kr.Localizer.Diagnostic.internalTypeCheckingError().format({file:this.getFilePath(),message:a}));const s=new pu.DiagnosticSink;s.addError(Kr.Localizer.Diagnostic.internalTypeCheckingError().format({file:this.getFilePath(),message:a}),(0,Rl.getEmptyRange)()),this._checkerDiagnostics=s.fetchAndClear(),this._isCheckingNeeded=!1}throw i}finally{this._circularDependencies=[],this._diagnosticVersion++}})}test_enableIPythonMode(e){this._ipythonMode=e}_buildFileInfo(e,n,i,r){(0,Gr.assert)(this._parseResults!==void 0,"Parse results not available");const a=new pu.TextRangeDiagnosticSink(this._parseResults.tokenizerOutput.lines);return{importLookup:i,futureImports:this._parseResults.futureImports,builtinsScope:r,diagnosticSink:a,executionEnvironment:e.findExecEnvironment(this._filePath),diagnosticRuleSet:this._diagnosticRuleSet,fileContents:n,lines:this._parseResults.tokenizerOutput.lines,typingSymbolAliases:this._parseResults.typingSymbolAliases,definedConstants:e.defineConstant,filePath:this._filePath,moduleName:this._moduleName,isStubFile:this._isStubFile,isTypingStubFile:this._isTypingStubFile,isTypingExtensionsStubFile:this._isTypingExtensionsStubFile,isBuiltInStubFile:this._isBuiltInStubFile,isInPyTypedPackage:this._isThirdPartyPyTypedPresent,isIPythonMode:this._ipythonMode,accessedSymbolMap:new Map}}_cleanParseTreeIfRequired(){this._parseResults&&this._parseTreeNeedsCleaning&&(new h9.ParseTreeCleanerWalker(this._parseResults.parseTree).clean(),this._parseTreeNeedsCleaning=!1)}_resolveImports(e,n,i){const r=[],a=(o,u=!1)=>{const f=e.resolveImport(this._filePath,i,{leadingDots:0,nameParts:o,importedSymbols:void 0});if(!(u&&!f.isImportFound)&&(f.resolvedPaths.length===0||f.resolvedPaths[0]!==this._filePath))return r.push(f),f};let s;!this._isThirdPartyImport&&!this._isStubFile&&(s=a(["__builtins__"],!0)),s||(s=a(["builtins"]));const l=this._ipythonMode?a(["IPython","display"]):void 0;for(const o of n){const u=e.resolveImport(this._filePath,i,{leadingDots:o.leadingDots,nameParts:o.nameParts,importedSymbols:o.importedSymbols});r.push(u),Pa.setImportInfo(o.nameNode,u)}return{imports:r,builtinsImportResult:s,ipythonDisplayImportResult:l}}_getPathForLogging(e){return this.fileSystem.isMappedFilePath(e)?this.fileSystem.getOriginalFilePath(e):e}}nm.SourceFile=g9;var ym={},T9=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),_9=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),UD=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&T9(e,t,n);return _9(e,t),e};Object.defineProperty(ym,"__esModule",{value:!0});ym.createTracePrinter=void 0;const Ol=Ht,og=qt,bI=Hn,v9=yn,b9=ws,S9=UD(kt),SI=UD(ze),I9=Li,C9=wn;function w9(t){function e(v,m="'"){return v?`${m}${v}${m}`:""}t=t.map(v=>(0,bI.ensureTrailingDirectorySeparator)(v)).sort((v,m)=>v.localeCompare(m)).reverse();const n=/[\\/]/g;function i(v){if(v)if(typeof v=="string"){for(const m of t)if(v.startsWith(m)){const V=v.substring(m.length);return(0,bI.stripFileExtension)(V).replace(n,".")}return v}else return v.nameParts.join(".");return""}function r(v){var m,V,F,P,G,te;if(v)switch(v.category){case 2:return`Any ${e((m=v.typeAliasInfo)===null||m===void 0?void 0:m.fullName)}`;case 7:return C9.TypeBase.isInstantiable(v)?`Class '${v.details.name}' (${v.details.moduleName})`:`Object '${v.details.name}' (${v.details.moduleName})`;case 5:return`Function '${v.details.name}' (${v.details.moduleName})`;case 8:return`Module '${v.moduleName}' (${v.moduleName})`;case 4:return`Never ${e((V=v.typeAliasInfo)===null||V===void 0?void 0:V.fullName)}`;case 3:return`None ${e((F=v.typeAliasInfo)===null||F===void 0?void 0:F.fullName)}`;case 6:return`OverloadedFunction [${v.overloads.map(q=>e(r(q),'"')).join(",")}]`;case 10:return`TypeVar '${v.details.name}' ${e((P=v.typeAliasInfo)===null||P===void 0?void 0:P.fullName)}`;case 0:return`Unbound ${e((G=v.typeAliasInfo)===null||G===void 0?void 0:G.fullName)}`;case 9:return`Union [${v.subtypes.map(q=>e(r(q),'"')).join(",")}]`;case 1:return`Unknown ${e((te=v.typeAliasInfo)===null||te===void 0?void 0:te.fullName)}`;default:(0,og.assertNever)(v)}return""}function a(v){return v?v.hasDeclarations()?`symbol ${s(v.getDeclarations()[0])}`:"<symbol>":""}function s(v){if(v)switch(v.type){case 6:return`Alias, ${u(v.node)} (${i(v.path)})`;case 4:return`Class, ${u(v.node)} (${i(v.path)})`;case 3:return`Function, ${u(v.node)} (${i(v.path)})`;case 0:return`Intrinsic, ${u(v.node)} ${v.intrinsicType} (${i(v.path)})`;case 2:return`Parameter, ${u(v.node)} (${i(v.path)})`;case 5:return`SpecialBuiltInClass, ${u(v.node)} (${i(v.path)})`;case 1:return`Variable, ${u(v.node)} (${i(v.path)})`;default:(0,og.assertNever)(v)}return""}function l(v){for(;v.nodeType!==36&&v.parent;)v=v.parent;return v.nodeType===36?S9.getFileInfo(v):void 0}function o(v,m=30){return v.length<m?v:v.substring(0,m)+" <shortened> "}function u(v,m=!1){var V;if(!v)return"";let F=m?`(${i((V=l(v))===null||V===void 0?void 0:V.filePath)})`:"";const P=l(v);if(P!=null&&P.lines){const G=(0,v9.convertOffsetToPosition)(v.start,P.lines);F+=` [${G.line+1}:${G.character+1}]`}if((0,b9.isExpressionNode)(v))return e(o(SI.printExpression(v)),'"')+` ${F}`;switch(v.nodeType){case 21:return`importAs '${u(v.module)}' ${e(v.alias?u(v.alias):"")} ${F}`;case 22:return`importFrom [${v.imports.map(G=>e(u(G),'"')).join(",")}]`;case 23:return`ImportFromAs '${u(v.name)}' ${e(v.alias?u(v.alias):"")} ${F}`;case 36:return`module ${F}`;case 10:return`class '${u(v.name)}' ${F}`;case 28:return`function '${u(v.name)}' ${F}`;case 37:return`moduleName '${v.nameParts.map(G=>u(G)).join(".")}' ${F}`;case 1:return`argument '${v.name?u(v.name):"N/A"}' ${F}`;case 41:return`parameter '${v.name?u(v.name):"N/A"}' ${F}`;default:return`${SI.printParseNodeType(v.nodeType)} ${F}`}}function f(v){const m=v;return m&&(0,Ol.isNumber)(m.nodeType)}function y(v){const m=v;return m&&(0,Ol.isNumber)(m.type)&&(0,Ol.isString)(m.path)&&(0,Ol.isString)(m.moduleName)}function p(v){const m=v;return m&&(0,Ol.isNumber)(m.category)&&(0,Ol.isNumber)(m.flags)}function b(v){if(!v)return"";if(f(v))return u(v,!0);if(y(v))return s(v);if(v instanceof I9.Symbol)return a(v);if(p(v))return r(v);(0,og.assertNever)(v)}return{print:b,printFileOrModuleName:i}}ym.createTracePrinter=w9;var gm={};Object.defineProperty(gm,"__esModule",{value:!0});gm.createTypeEvaluatorWithTracker=void 0;const E9=Ht,II=ji,CI=wv;function F9(t,e,n,i){if(!e.logCalls&&(0,E9.isDebugMode)())return(0,CI.createTypeEvaluator)(t,e);function r(o,u,f){return e.logCalls?n.log(o,y=>(y.add(i==null?void 0:i.print(f)),II.timingStats.typeEvaluationTime.timeOperation(u)),e.minimumLoggingThreshold,!0):II.timingStats.typeEvaluationTime.timeOperation(u)}const a=e.logCalls?o=>n.log("import lookup",u=>(u.add(i==null?void 0:i.printFileOrModuleName(o)),t(o)),e.minimumLoggingThreshold,!0):t,s=(0,CI.createTypeEvaluator)(a,e);return{runWithCancellationToken:s.runWithCancellationToken,getType:o=>r("getType",()=>s.getType(o),o),getTypeOfExpression:(o,u,f)=>r("getTypeOfExpression",()=>s.getTypeOfExpression(o,u,f),o),getTypeOfAnnotation:s.getTypeOfAnnotation,getTypeOfClass:o=>r("getTypeOfClass",()=>s.getTypeOfClass(o),o),getTypeOfFunction:o=>r("getTypeOfFunction",()=>s.getTypeOfFunction(o),o),getTypeOfExpressionExpectingType:s.getTypeOfExpressionExpectingType,evaluateTypeForSubnode:s.evaluateTypeForSubnode,evaluateTypesForStatement:o=>r("evaluateTypesForStatement",()=>s.evaluateTypesForStatement(o),o),evaluateTypesForMatchStatement:s.evaluateTypesForMatchStatement,evaluateTypesForCaseStatement:s.evaluateTypesForCaseStatement,evaluateTypeOfParameter:s.evaluateTypeOfParameter,canBeTruthy:s.canBeTruthy,canBeFalsy:s.canBeFalsy,removeTruthinessFromType:s.removeTruthinessFromType,removeFalsinessFromType:s.removeFalsinessFromType,getExpectedType:o=>r("getExpectedType",()=>s.getExpectedType(o),o),verifyRaiseExceptionType:o=>r("verifyRaiseExceptionType",()=>s.verifyRaiseExceptionType(o),o),verifyDeleteExpression:o=>r("verifyDeleteExpression",()=>s.verifyDeleteExpression(o),o),isAfterNodeReachable:o=>r("isAfterNodeReachable",()=>s.isAfterNodeReachable(o),o),isNodeReachable:(o,u)=>r("isNodeReachable",()=>s.isNodeReachable(o,u),o),isAsymmetricDescriptorAssignment:s.isAsymmetricDescriptorAssignment,suppressDiagnostics:(o,u)=>r("suppressDiagnostics",()=>s.suppressDiagnostics(o,u)),getDeclarationsForStringNode:o=>r("getDeclarationsForStringNode",()=>s.getDeclarationsForStringNode(o),o),getDeclarationsForNameNode:(o,u)=>r("getDeclarationsForNameNode",()=>s.getDeclarationsForNameNode(o,u),o),getTypeForDeclaration:o=>r("getTypeForDeclaration",()=>s.getTypeForDeclaration(o),o),resolveAliasDeclaration:(o,u,f)=>r("resolveAliasDeclaration",()=>s.resolveAliasDeclaration(o,u,f),o),resolveAliasDeclarationWithInfo:(o,u,f)=>r("resolveAliasDeclarationWithInfo",()=>s.resolveAliasDeclarationWithInfo(o,u,f),o),getTypeOfIterable:(o,u,f)=>r("getTypeOfIterable",()=>s.getTypeOfIterable(o,u,f),o),getTypeOfIterator:(o,u,f)=>r("getTypeOfIterator",()=>s.getTypeOfIterator(o,u,f),o),getGetterTypeFromProperty:(o,u)=>r("getGetterTypeFromProperty",()=>s.getGetterTypeFromProperty(o,u),o),getTypeOfArgument:s.getTypeOfArgument,markNamesAccessed:(o,u)=>r("markNamesAccessed",()=>s.markNamesAccessed(o,u),o),getScopeIdForNode:s.getScopeIdForNode,makeTopLevelTypeVarsConcrete:o=>r("makeTopLevelTypeVarsConcrete",()=>s.makeTopLevelTypeVarsConcrete(o),o),mapSubtypesExpandTypeVars:s.mapSubtypesExpandTypeVars,lookUpSymbolRecursive:s.lookUpSymbolRecursive,getDeclaredTypeOfSymbol:s.getDeclaredTypeOfSymbol,getEffectiveTypeOfSymbol:o=>r("getEffectiveTypeOfSymbol",()=>s.getEffectiveTypeOfSymbol(o),o),getEffectiveTypeOfSymbolForUsage:(o,u,f)=>r("getEffectiveTypeOfSymbolForUsage",()=>s.getEffectiveTypeOfSymbolForUsage(o,u,f),o),getInferredTypeOfDeclaration:s.getInferredTypeOfDeclaration,getDeclaredTypeForExpression:s.getDeclaredTypeForExpression,getFunctionDeclaredReturnType:o=>r("getFunctionDeclaredReturnType",()=>s.getFunctionDeclaredReturnType(o),o),getFunctionInferredReturnType:(o,u)=>r("getFunctionInferredReturnType",()=>s.getFunctionInferredReturnType(o,u),o),getBestOverloadForArguments:(o,u,f)=>s.getBestOverloadForArguments(o,u,f),getBuiltInType:(o,u)=>r("getBuiltInType",()=>s.getBuiltInType(o,u),o),getTypeOfMember:o=>r("getTypeOfMember",()=>s.getTypeOfMember(o),o.symbol),getTypeOfObjectMember:s.getTypeOfObjectMember,getBoundMethod:s.getBoundMethod,getTypeOfMagicMethodReturn:s.getTypeOfMagicMethodReturn,bindFunctionToClassOrObject:s.bindFunctionToClassOrObject,getCallSignatureInfo:(o,u,f)=>r("getCallSignatureInfo",()=>s.getCallSignatureInfo(o,u,f),o),getAbstractMethods:o=>r("getAbstractMethods",()=>s.getAbstractMethods(o),o),narrowConstrainedTypeVar:s.narrowConstrainedTypeVar,assignType:(o,u,f,y,p,b,v)=>r("assignType",()=>s.assignType(o,u,f,y,p,b,v),o),validateOverrideMethod:(o,u,f,y)=>r("validateOverrideMethod",()=>s.validateOverrideMethod(o,u,f,y),u),assignTypeToExpression:s.assignTypeToExpression,getBuiltInObject:s.getBuiltInObject,getTypedDictClassType:s.getTypedDictClassType,getTupleClassType:s.getTupleClassType,getObjectType:s.getObjectType,getTypingType:s.getTypingType,inferReturnTypeIfNecessary:s.inferReturnTypeIfNecessary,verifyTypeArgumentsAssignable:s.verifyTypeArgumentsAssignable,addError:(o,u)=>r("addError",()=>s.addError(o,u),u),addWarning:(o,u)=>r("addWarning",()=>s.addWarning(o,u),u),addInformation:(o,u)=>r("addInformation",()=>s.addInformation(o,u),u),addUnusedCode:(o,u)=>r("addUnusedCode",()=>s.addUnusedCode(o,u),o),addDeprecated:(o,u)=>r("addDeprecated",()=>s.addDeprecated(o,u),u),addDiagnostic:(o,u,f,y)=>r("addDiagnostic",()=>s.addDiagnostic(o,u,f,y),y),addDiagnosticForTextRange:(o,u,f,y,p)=>r("addDiagnosticForTextRange",()=>s.addDiagnosticForTextRange(o,u,f,y,p)),printType:(o,u)=>r("printType",()=>s.printType(o,u),o),printFunctionParts:o=>r("printFunctionParts",()=>s.printFunctionParts(o),o),getTypeCacheEntryCount:s.getTypeCacheEntryCount,disposeEvaluator:s.disposeEvaluator,useSpeculativeMode:s.useSpeculativeMode,setTypeForNode:s.setTypeForNode,checkForCancellation:s.checkForCancellation}}gm.createTypeEvaluatorWithTracker=F9;var Tm={},k9=Te&&Te.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),D9=Te&&Te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Dv=Te&&Te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&k9(e,t,n);return D9(e,t),e};Object.defineProperty(Tm,"__esModule",{value:!0});Tm.TypeStubWriter=void 0;const VD=Dv(kt),wI=Dv(ze),BD=rs,EI=qi,FI=Dv(Dn),xl=wn;class WD{constructor(e){this.importName=e,this.isAccessed=!1}}class P9 extends WD{constructor(e,n,i){super(e),this.alias=n,this.symbol=i}}class A9 extends WD{constructor(e,n,i){super(e),this.isWildcardImport=n,this.node=i,this.symbols=[]}addSymbol(e,n,i,r=!1){this.symbols.find(a=>a.name===n)||this.symbols.push({symbol:e,name:n,alias:i,isAccessed:r})}}class M9 extends BD.ParseTreeWalker{constructor(e,n){super(),this._accessedImportedSymbols=e,this._treatStringsAsSymbols=n}analyze(e){this.walk(e)}walk(e){VD.isCodeUnreachable(e)||super.walk(e)}visitName(e){return this._accessedImportedSymbols.set(e.value,!0),!0}visitMemberAccess(e){const n=this._getRecursiveModuleAccessExpression(e.leftExpression);return n&&this._accessedImportedSymbols.set(`${n}.${e.memberName.value}`,!0),!0}visitString(e){return this._treatStringsAsSymbols&&this._accessedImportedSymbols.set(e.value,!0),!0}_getRecursiveModuleAccessExpression(e){if(e.nodeType===38)return e.value;if(e.nodeType===35){const n=this._getRecursiveModuleAccessExpression(e.leftExpression);return n?`${n}.${e.memberName.value}`:void 0}}}class N9 extends BD.ParseTreeWalker{constructor(e,n,i){super(),this._stubPath=e,this._sourceFile=n,this._evaluator=i,this._indentAmount=0,this._includeAllImports=!1,this._typeStubText="",this._lineEnd=`
`,this._tab="    ",this._classNestCount=0,this._functionNestCount=0,this._ifNestCount=0,this._emittedSuite=!1,this._emitDocString=!0,this._trackedImportAs=new Map,this._trackedImportFrom=new Map,this._accessedImportedSymbols=new Map,this._stubPath.endsWith("__init__.pyi")&&(this._includeAllImports=!0)}write(){const e=this._sourceFile.getParseResults();this._lineEnd=e.tokenizerOutput.predominantEndOfLineSequence,this._tab=e.tokenizerOutput.predominantTabSequence,this.walk(e.parseTree),this._writeFile()}walk(e){VD.isCodeUnreachable(e)||super.walk(e)}visitClass(e){const n=e.name.value;this._emittedSuite=!0,this._emitDocString=!0,this._emitDecorators(e.decorators);let i=`class ${n}`;const r=e.arguments.filter(a=>a.name!==void 0||a.argumentCategory!==0||a.valueExpression.nodeType!==38||a.valueExpression.value!=="object");return r.length>0&&(i+=`(${r.map(a=>{let s="";return a.name&&(s=a.name.value+"="),s+=this._printExpression(a.valueExpression),s}).join(", ")})`),i+=":",this._emitLine(i),this._emitSuite(()=>{this._classNestCount++,this.walk(e.suite),this._classNestCount--}),this._emitLine(""),this._emitLine(""),!1}visitFunction(e){const n=e.name.value;if(this._functionNestCount===0&&!FI.isPrivateOrProtectedName(n)){this._emittedSuite=!0,this._emitDocString=!0,this._emitDecorators(e.decorators);let i=e.isAsync?"async ":"";i+=`def ${n}`,i+=`(${e.parameters.map((a,s)=>this._printParameter(a,e,s)).join(", ")})`;let r;if(e.returnTypeAnnotation?r=this._printExpression(e.returnTypeAnnotation,!0):e.functionAnnotationComment?r=this._printExpression(e.functionAnnotationComment.returnTypeAnnotation,!0):e.name.value==="__init__"?r="None":e.name.value==="__str__"?r="str":["__int__","__hash__"].some(a=>a===e.name.value)?r="int":["__eq__","__ne__","__gt__","__lt__","__ge__","__le__"].some(a=>a===e.name.value)&&(r="bool"),r&&(i+=" -> "+r),i+=":",!r){const a=this._evaluator.getTypeOfFunction(e);if(a&&(0,xl.isFunction)(a.functionType)){let s=this._evaluator.getFunctionInferredReturnType(a.functionType);s=(0,xl.removeUnknownFromUnion)(s),!(0,xl.isNever)(s)&&!(0,xl.isUnknown)(s)&&(i+=` # -> ${this._evaluator.printType(s,!1)}:`)}}this._emitLine(i),this._emitSuite(()=>{this._functionNestCount++,this.walk(e.suite),this._functionNestCount--}),this._emitLine("")}return!1}visitWhile(e){return this._emitDocString=!1,!1}visitFor(e){return this._emitDocString=!1,!1}visitTry(e){return this._emitDocString=!1,!1}visitWith(e){return this._emitDocString=!1,!1}visitIf(e){if(this._emitDocString=!1,this._functionNestCount===0&&this._ifNestCount===0){this._ifNestCount++,this._emittedSuite=!0,this._emitLine("if "+this._printExpression(e.testExpression)+":"),this._emitSuite(()=>{this.walkMultiple(e.ifSuite.statements)});const n=e.elseSuite;n&&(this._emitLine("else:"),this._emitSuite(()=>{n.nodeType===19?this.walkMultiple([n.testExpression,n.ifSuite,n.elseSuite]):this.walkMultiple(n.statements)})),this._ifNestCount--}return!1}visitAssignment(e){let n=!1,i="";if(e.leftExpression.nodeType===38){if(e.leftExpression.value==="__all__")return this._functionNestCount===0&&this._ifNestCount===0&&(this._emittedSuite=!0,i=this._printExpression(e.leftExpression),i+=" = ",i+=this._printExpression(e.rightExpression),this._emitLine(i)),!1;if(this._functionNestCount===0){i=this._printExpression(e.leftExpression),e.typeAnnotationComment&&(i+=": "+this._printExpression(e.typeAnnotationComment,!0));const r=this._evaluator.getType(e.leftExpression);if(r!=null&&r.typeAliasInfo)n=!0;else if(e.rightExpression.nodeType===9){const a=this._evaluator.getType(e.rightExpression.leftExpression);a&&(0,xl.isInstantiableClass)(a)&&xl.ClassType.isBuiltIn(a,["TypeVar","TypeVarTuple","ParamSpec","NewType"])&&(n=!0)}}}else if(e.leftExpression.nodeType===54){const r=e.leftExpression.valueExpression;r.nodeType===38&&this._functionNestCount===0&&(i=`${this._printExpression(r)}: ${this._printExpression(e.leftExpression.typeAnnotation,!0)}`)}return i&&(this._emittedSuite=!0,i+=" = ",n?i+=this._printExpression(e.rightExpression):i+="...",this._emitLine(i)),!1}visitAugmentedAssignment(e){if(e.leftExpression.nodeType===38&&e.leftExpression.value==="__all__"&&e.operator===1&&this._functionNestCount===0&&this._ifNestCount===0){let n=this._printExpression(e.leftExpression);n+=" += ",n+=this._printExpression(e.rightExpression),this._emitLine(n)}return!1}visitTypeAnnotation(e){if(this._functionNestCount===0){let n="";if(e.valueExpression.nodeType===38)n=this._printExpression(e.valueExpression);else if(e.valueExpression.nodeType===35){const i=e.valueExpression.leftExpression;if(i.nodeType===38&&i.value==="self"){const r=e.valueExpression.memberName.value;FI.isPrivateOrProtectedName(r)||(n=this._printExpression(e.valueExpression))}}n&&(n+=": "+this._printExpression(e.typeAnnotation,!0),this._emitLine(n))}return!1}visitImport(e){if(this._functionNestCount>0||this._classNestCount>0)return!1;const n=(0,EI.getScopeForNode)(e);return n&&e.list.forEach(i=>{const r=this._printModuleName(i.module);if(!this._trackedImportAs.has(r)){const a=i.alias?i.alias.value:i.module.nameParts.length>0?i.module.nameParts[0].value:"",s=n.lookUpSymbolRecursive(a);if(s){const l=new P9(r,i.alias?i.alias.value:void 0,s.symbol);this._trackedImportAs.set(r,l)}}}),!1}visitImportFrom(e){if(this._functionNestCount>0||this._classNestCount>0)return!1;const n=(0,EI.getScopeForNode)(e);if(n){const i=this._printModuleName(e.module);let r=this._trackedImportFrom.get(i);r||(r=new A9(i,e.isWildcardImport,e),this._trackedImportFrom.set(i,r)),e.imports.forEach(a=>{const s=a.alias?a.alias.value:a.name.value,l=n.lookUpSymbolRecursive(s);l&&r.addSymbol(l.symbol,a.name.value,a.alias?a.alias.value:void 0,!1)})}return!1}visitStatementList(e){return e.statements.length>0&&e.statements[0].nodeType===48&&!this._emittedSuite&&this._emitDocString&&this._emitLine(this._printExpression(e.statements[0])),this._emitDocString=!1,this.walkMultiple(e.statements),!1}_emitSuite(e){this._increaseIndent(()=>{const n=this._emittedSuite;this._emittedSuite=!1,e(),this._emittedSuite||this._emitLine("..."),this._emittedSuite=n})}_increaseIndent(e){this._indentAmount++,e(),this._indentAmount--}_emitDecorators(e){e.forEach(n=>{this._emitLine("@"+this._printExpression(n.expression))})}_printHeaderDocString(){return'"""'+this._lineEnd+"This type stub file was generated by pyright."+this._lineEnd+'"""'+this._lineEnd+this._lineEnd}_emitLine(e){for(let n=0;n<this._indentAmount;n++)this._typeStubText+=this._tab;this._typeStubText+=e+this._lineEnd}_printModuleName(e){let n="";for(let i=0;i<e.leadingDots;i++)n+=".";return n+=e.nameParts.map(i=>i.value).join("."),n}_printParameter(e,n,i){let r="";e.category===1?r+="*":e.category===2&&(r+="**"),e.name?r+=e.name.value:e.category===0&&(r+="/");const a=wI.getTypeAnnotationForParameter(n,i);let s="";return a&&(s=this._printExpression(a,!0)),s&&(r+=": "+s),e.defaultValue&&(s?r+=" = ...":r+="=..."),r}_printExpression(e,n=!1,i=!1){new M9(this._accessedImportedSymbols,i).analyze(e);let a=n?1:0;return a|=2,wI.printExpression(e,a)}_printTrackedImports(){let e="",n=!1;return this._trackedImportAs.forEach(i=>{this._accessedImportedSymbols.get(i.alias||i.importName)&&(i.isAccessed=!0),(i.isAccessed||this._includeAllImports)&&(e+=`import ${i.importName}`,i.alias&&(e+=` as ${i.alias}`),e+=this._lineEnd,n=!0)}),this._trackedImportFrom.forEach(i=>{i.symbols.forEach(a=>{this._accessedImportedSymbols.get(a.alias||a.name)&&(a.isAccessed=!0)}),i.isWildcardImport&&(e+=`from ${i.importName} import *`+this._lineEnd,n=!0);const r=i.symbols.filter(a=>a.isAccessed||this._includeAllImports).sort((a,s)=>a.name<s.name?-1:a.name>s.name?1:0);r.length>0&&(e+=`from ${i.importName} import `,e+=r.map(a=>{let s=a.name;return a.alias&&(s+=" as "+a.alias),s}).join(", "),e+=this._lineEnd,n=!0)}),n&&(e+=this._lineEnd),e}_writeFile(){let e=this._printHeaderDocString();e+=this._printTrackedImports(),e+=this._typeStubText,this._sourceFile.fileSystem.writeFileSync(this._stubPath,e,"utf8")}}Tm.TypeStubWriter=N9;(function(t){var e=Te&&Te.__createBinding||(Object.create?function(le,R,ae,re){re===void 0&&(re=ae),Object.defineProperty(le,re,{enumerable:!0,get:function(){return R[ae]}})}:function(le,R,ae,re){re===void 0&&(re=ae),le[re]=R[ae]}),n=Te&&Te.__setModuleDefault||(Object.create?function(le,R){Object.defineProperty(le,"default",{enumerable:!0,value:R})}:function(le,R){le.default=R}),i=Te&&Te.__importStar||function(le){if(le&&le.__esModule)return le;var R={};if(le!=null)for(var ae in le)ae!=="default"&&Object.prototype.hasOwnProperty.call(le,ae)&&e(R,le,ae);return n(R,le),R};Object.defineProperty(t,"__esModule",{value:!0}),t.Program=t.MaxWorkspaceIndexFileCount=void 0;const r=mk,a=Cs,s=xh,l=In,o=Dt,u=Qh,f=qt,y=Nd,p=Hn,b=yn,v=bn,m=Rn,V=ji,F=Ws,P=Zh,G=Jh,te=To,q=la,U=em,D=i(kt),M=tm,T=ze,N=qi,J=nm,L=is,ce=Dn,ue=ym,W=gm,Y=Tm,ee=256;t.MaxWorkspaceIndexFileCount=2e3;class H{constructor(R,ae,re,d,k,oe){this._extension=d,this._disableChecker=oe,this._sourceFileList=[],this._sourceFileMap=new Map,this._parsedFileCount=0,this._lookUpImport=ye=>{var E;let $;if(typeof ye=="string")$=this._getSourceFileInfoFromPath(ye);else{const _e=this._importResolver.resolveImport(ye.importingFilePath,this._configOptions.findExecEnvironment(ye.importingFilePath),{leadingDots:0,nameParts:ye.nameParts,importedSymbols:void 0});if(_e.isImportFound&&!_e.isNativeLib&&_e.resolvedPaths.length>0){let be=_e.resolvedPaths[_e.resolvedPaths.length-1];be&&($=this._getSourceFileInfoFromPath(be),$||(be=(0,p.normalizePathCase)(this._fs,be),this.addTrackedFile(be),$=this._getSourceFileInfoFromPath(be)))}}if(!$)return;$.sourceFile.isBindingRequired()&&V.timingStats.typeCheckerTime.subtractFromTime(()=>{this._bindFile($)});const B=$.sourceFile.getModuleSymbolTable();if(!B)return;const X=$.sourceFile.getParseResults(),Z=X.parseTree,se=D.getDunderAllInfo(X.parseTree);return{symbolTable:B,dunderAllNames:se==null?void 0:se.names,usesUnsupportedDunderAllForm:(E=se==null?void 0:se.usesUnsupportedDunderAllForm)!==null&&E!==void 0?E:!1,get docString(){return(0,T.getDocString)(Z.statements)}}},this._console=re||new u.StandardConsole,this._logTracker=k!=null?k:new y.LogTracker(re,"FG"),this._importResolver=R,this._configOptions=ae,this._createNewEvaluator()}get evaluator(){return this._evaluator}setConfigOptions(R){this._configOptions=R,this._createNewEvaluator()}setImportResolver(R){this._importResolver=R,this._createNewEvaluator()}setTrackedFiles(R){if(this._sourceFileList.length>0){const ae=new Map;R.forEach(re=>{ae.set((0,p.normalizePathCase)(this._fs,re),re)}),this._sourceFileList.forEach(re=>{const d=(0,p.normalizePathCase)(this._fs,re.sourceFile.getFilePath());ae.has(d)||(re.isTracked=!1)})}return this.addTrackedFiles(R),this._removeUnneededFiles()}setPreCheckCallback(R){this._preCheckCallback=R}setAllowedThirdPartyImports(R){this._allowedThirdPartyImports=R}addTrackedFiles(R,ae=!1,re=!1){R.forEach(d=>{this.addTrackedFile(d,ae,re)})}addTrackedFile(R,ae=!1,re=!1){let d=this._getSourceFileInfoFromPath(R);if(d)return d.isTracked=!0,d.sourceFile;const k=this._getImportNameForFile(R),oe=new J.SourceFile(this._fs,R,k,ae,re,this._console,this._logTracker);return d={sourceFile:oe,isTracked:!0,isOpenByClient:!1,isTypeshedFile:!1,isThirdPartyImport:ae,isThirdPartyPyTypedPresent:re,diagnosticsVersion:void 0,imports:[],importedBy:[],shadows:[],shadowedBy:[]},this._addToSourceFileListAndMap(d),oe}setFileOpened(R,ae,re,d){var k,oe;let ye=this._getSourceFileInfoFromPath(R);if(ye)ye.isOpenByClient=!0,ye.diagnosticsVersion=0;else{const E=this._getImportNameForFile(R),$=new J.SourceFile(this._fs,R,E,!1,!1,this._console,this._logTracker,(k=d==null?void 0:d.ipythonMode)!==null&&k!==void 0?k:!1),B=d==null?void 0:d.chainedFilePath;ye={sourceFile:$,isTracked:(oe=d==null?void 0:d.isTracked)!==null&&oe!==void 0?oe:!1,chainedSourceFile:B?this._getSourceFileInfoFromPath(B):void 0,isOpenByClient:!0,isTypeshedFile:!1,isThirdPartyImport:!1,isThirdPartyPyTypedPresent:!1,diagnosticsVersion:void 0,imports:[],importedBy:[],shadows:[],shadowedBy:[]},this._addToSourceFileListAndMap(ye)}ye.sourceFile.setClientVersion(ae,re)}updateChainedFilePath(R,ae){const re=this._getSourceFileInfoFromPath(R);re&&(re.chainedSourceFile=ae?this._getSourceFileInfoFromPath(ae):void 0,re.sourceFile.markDirty(),this._markFileDirtyRecursive(re,new Map))}setFileClosed(R){const ae=this._getSourceFileInfoFromPath(R);return ae&&(ae.isOpenByClient=!1,ae.sourceFile.setClientVersion(null,[]),ae.sourceFile.didContentsChangeOnDisk()&&(ae.sourceFile.markDirty(),this._markFileDirtyRecursive(ae,new Map))),this._removeUnneededFiles()}markAllFilesDirty(R,ae=!0){const re=new Map;this._sourceFileList.forEach(d=>{R?d.sourceFile.markDirty(ae):d.sourceFile.didContentsChangeOnDisk()&&(d.sourceFile.markDirty(ae),this._markFileDirtyRecursive(d,re))}),re.size>0&&this._createNewEvaluator()}markFilesDirty(R,ae,re=!0){const d=new Map;R.forEach(k=>{const oe=this._getSourceFileInfoFromPath(k);if(oe){const ye=(0,p.getFileName)(k);if(ye==="builtins.pyi"||ye==="__builtins__.pyi"){this.markAllFilesDirty(ae,re);return}(ae||!oe.isOpenByClient&&oe.sourceFile.didContentsChangeOnDisk())&&(oe.sourceFile.markDirty(re),this._markFileDirtyRecursive(oe,d))}}),d.size>0&&this._createNewEvaluator()}getFileCount(){return this._sourceFileList.length}getUserFileCount(){return this._sourceFileList.filter(R=>this._isUserCode(R)).length}getTracked(){return this._sourceFileList.filter(R=>R.isTracked)}getOpened(){return this._sourceFileList.filter(R=>R.isOpenByClient)}getFilesToAnalyzeCount(){let R=0;return this._disableChecker||this._sourceFileList.forEach(ae=>{ae.sourceFile.isCheckingRequired()&&this._shouldCheckFile(ae)&&R++}),R}isCheckingOnlyOpenFiles(){return this._configOptions.checkOnlyOpenFiles||!1}containsSourceFileIn(R){const ae=(0,p.normalizePathCase)(this._fs,R);return this._sourceFileList.some(re=>re.sourceFile.getFilePath().startsWith(ae))}getSourceFile(R){const ae=this._getSourceFileInfoFromPath(R);if(!!ae)return ae.sourceFile}getBoundSourceFile(R){const ae=this._getSourceFileInfoFromPath(R);if(!!ae)return this._bindFile(ae),this.getSourceFile(R)}analyze(R,ae=a.CancellationToken.None){return this._runEvaluatorWithCancellationToken(ae,()=>{const re=new V.Duration,d=this._sourceFileList.filter(k=>k.isOpenByClient&&k.sourceFile.isCheckingRequired());if(d.length>0){const k=R?R.openFilesTimeInMs:Number.MAX_VALUE;for(const oe of d)if(this._checkTypes(oe)&&re.getDurationInMilliseconds()>k)return!0;if(R!==void 0)return!0}if(!this._configOptions.checkOnlyOpenFiles){const k=R?R.noOpenFilesTimeInMs:Number.MAX_VALUE;for(const oe of this._sourceFileList)if(!!this._isUserCode(oe)&&this._checkTypes(oe)&&re.getDurationInMilliseconds()>k)return!0}return!1})}indexWorkspace(R,ae){if(!this._configOptions.indexing)return 0;return this._runEvaluatorWithCancellationToken(ae,()=>{const d=new Set;for(const oe of this._sourceFileList)oe.sourceFile.isParseRequired()||d.add(oe);let k=0;for(const oe of this._sourceFileList){if(!this._isUserCode(oe)||!oe.sourceFile.isIndexingRequired())continue;this._bindFile(oe);const ye=oe.sourceFile.index({indexingForAutoImportMode:!1},ae);if(ye){if(++k>t.MaxWorkspaceIndexFileCount)return this._console.warn("Workspace indexing has hit its upper limit: 2000 files"),re(this._sourceFileList,d),k;R(oe.sourceFile.getFilePath(),ye)}this._handleMemoryHighUsage()}return re(this._sourceFileList,d),k});function re(d,k){for(const oe of d)oe.sourceFile.isParseRequired()||k.has(oe)||oe.sourceFile.dropParseAndBindInfo()}}printDetailedAnalysisTimes(){const R=this._sourceFileList.filter(ae=>ae.sourceFile.getCheckTime()!==void 0).sort((ae,re)=>re.sourceFile.getCheckTime()-ae.sourceFile.getCheckTime());this._console.info(""),this._console.info("Analysis time by file"),R.forEach(ae=>{const re=ae.sourceFile.getCheckTime();this._console.info(`${re}ms: ${ae.sourceFile.getFilePath()}`)})}printDependencies(R,ae){const re=this._importResolver.fileSystem,d=this._sourceFileList.filter(oe=>!oe.isTypeshedFile).sort((oe,ye)=>re.getOriginalFilePath(oe.sourceFile.getFilePath())<re.getOriginalFilePath(ye.sourceFile.getFilePath())?1:-1),k=[];d.forEach(oe=>{this._console.info("");let ye=re.getOriginalFilePath(oe.sourceFile.getFilePath());const E=(0,p.getRelativePath)(ye,R);E&&(ye=E),this._console.info(`${ye}`),this._console.info(` Imports     ${oe.imports.length} file${oe.imports.length===1?"":"s"}`),ae&&oe.imports.forEach($=>{this._console.info(`    ${re.getOriginalFilePath($.sourceFile.getFilePath())}`)}),this._console.info(` Imported by ${oe.importedBy.length} file${oe.importedBy.length===1?"":"s"}`),ae&&oe.importedBy.forEach($=>{this._console.info(`    ${re.getOriginalFilePath($.sourceFile.getFilePath())}`)}),oe.importedBy.length===0&&k.push(oe.sourceFile)}),k.length>0&&(this._console.info(""),this._console.info(`${k.length} file${k.length===1?"":"s"} not explicitly imported`),k.forEach(oe=>{this._console.info(`    ${re.getOriginalFilePath(oe.getFilePath())}`)}))}writeTypeStub(R,ae,re,d){for(const k of this._sourceFileList){(0,l.throwIfCancellationRequested)(d);const oe=k.sourceFile.getFilePath(),ye=(0,p.getRelativePath)(oe,R);if(ye!==void 0){let E=(0,p.normalizePath)((0,p.combinePaths)(re,ye));ae?E=(0,p.combinePaths)((0,p.getDirectoryPath)(E),"__init__.pyi"):E=(0,p.stripFileExtension)(E)+".pyi";const $=(0,p.getDirectoryPath)(E);try{(0,p.makeDirectories)(this._fs,$,re)}catch{const X=`Could not create directory for '${$}'`;throw new Error(X)}this._bindFile(k),this._runEvaluatorWithCancellationToken(d,()=>{new Y.TypeStubWriter(E,k.sourceFile,this._evaluator).write()}),this._handleMemoryHighUsage()}}}getTypeOfSymbol(R){return this._handleMemoryHighUsage(),(this._evaluator||this._createNewEvaluator()).getEffectiveTypeOfSymbol(R)}printType(R,ae){return this._handleMemoryHighUsage(),(this._evaluator||this._createNewEvaluator()).printType(R,ae)}static _getPrintTypeFlags(R){let ae=0;return R.diagnosticRuleSet.printUnknownAsAny&&(ae|=1),R.diagnosticRuleSet.omitConditionalConstraint&&(ae|=64),R.diagnosticRuleSet.omitTypeArgsIfAny&&(ae|=2),R.diagnosticRuleSet.omitUnannotatedParamType&&(ae|=4),R.diagnosticRuleSet.pep604Printing&&(ae|=8),ae}get _fs(){return this._importResolver.fileSystem}_getImportNameForFile(R){return this._importResolver.getModuleNameForImport(R,this._configOptions.getDefaultExecEnvironment()).moduleName}_addShadowedFile(R,ae){let re=this._getSourceFileInfoFromPath(ae);if(!re){const d=this._getImportNameForFile(ae);re={sourceFile:new J.SourceFile(this._fs,ae,d,!1,!1,this._console,this._logTracker),isTracked:!1,isOpenByClient:!1,isTypeshedFile:!1,isThirdPartyImport:!1,isThirdPartyPyTypedPresent:!1,diagnosticsVersion:void 0,imports:[],importedBy:[],shadows:[],shadowedBy:[]},this._addToSourceFileListAndMap(re)}return re.shadows.includes(R)||re.shadows.push(R),R.shadowedBy.includes(re)||R.shadowedBy.push(re),re.sourceFile}_createNewEvaluator(){return this._evaluator&&this._evaluator.disposeEvaluator(),this._evaluator=(0,W.createTypeEvaluatorWithTracker)(this._lookUpImport,{printTypeFlags:H._getPrintTypeFlags(this._configOptions),logCalls:this._configOptions.logTypeEvaluationTime,minimumLoggingThreshold:this._configOptions.typeEvaluationTimeThreshold,analyzeUnannotatedFunctions:this._configOptions.analyzeUnannotatedFunctions,evaluateUnknownImportsAsAny:!!this._configOptions.evaluateUnknownImportsAsAny,verifyTypeCacheEvaluatorFlags:!!this._configOptions.internalTestMode},this._logTracker,this._configOptions.logTypeEvaluationTime?(0,ue.createTracePrinter)(this._importResolver.getImportRoots(this._configOptions.findExecEnvironment(this._configOptions.projectRoot))):void 0),this._evaluator}_parseFile(R,ae){if(!(!this._isFileNeeded(R)||!R.sourceFile.isParseRequired())&&(R.sourceFile.parse(this._configOptions,this._importResolver,ae)&&(this._parsedFileCount++,this._updateSourceFileImports(R,this._configOptions)),R.sourceFile.isFileDeleted())){R.isTracked=!1;const re=new Map;this._markFileDirtyRecursive(R,re),this._importResolver.invalidateCache()}}_bindFile(R,ae){var re,d;if(!this._isFileNeeded(R)||!R.sourceFile.isBindingRequired())return;this._parseFile(R,ae);const k=ye=>{if(!ye||ye===R||(this._bindFile(ye),ye.sourceFile.isFileDeleted()))return;const E=ye.sourceFile.getParseResults();if(!E)return;const $=D.getScope(E.parseTree);return(0,f.assert)($!==void 0),$};let oe;R.builtinsImport&&R.builtinsImport!==R&&(oe=(d=(re=k(R.chainedSourceFile))!==null&&re!==void 0?re:k(R.ipythonDisplayImport))!==null&&d!==void 0?d:k(R.builtinsImport)),R.sourceFile.bind(this._configOptions,this._lookUpImport,oe)}_buildModuleSymbolsMap(R,ae,re,d){return(0,F.buildModuleSymbolsMap)(this._sourceFileList.filter(k=>k!==R&&(ae?this._isUserCode(k):!0)),re,d)}_shouldCheckFile(R){return!!(R.isOpenByClient||!this._configOptions.checkOnlyOpenFiles&&R.isTracked)}_checkTypes(R){return this._logTracker.log(`analyzing: ${R.sourceFile.getFilePath()}`,ae=>{if(!this._isFileNeeded(R)||!R.sourceFile.isCheckingRequired()||!this._shouldCheckFile(R))return ae.suppress(),!1;if(this._bindFile(R),this._preCheckCallback){const re=R.sourceFile.getParseResults();re&&this._preCheckCallback(re,this._evaluator)}if(this._disableChecker||R.sourceFile.check(this._importResolver,this._evaluator),this._handleMemoryHighUsage(),this._configOptions.diagnosticRuleSet.reportImportCycles!=="none"&&!this._allowedThirdPartyImports){const re=new Map;this._getImportsRecursive(R,re,0),re.forEach(d=>{V.timingStats.cycleDetectionTime.timeOperation(()=>{const k=new Map;this._detectAndReportImportCycles(d,k)||k.forEach(oe=>{oe.sourceFile.setNoCircularDependencyConfirmed()})})})}return!0})}_getImportsRecursive(R,ae,re){const d=(0,p.normalizePathCase)(this._fs,R.sourceFile.getFilePath());if(!ae.has(d)){if(re>ee){R.sourceFile.setHitMaxImportDepth(ee);return}ae.set(d,R);for(const k of R.imports)this._getImportsRecursive(k,ae,re+1)}}_detectAndReportImportCycles(R,ae,re=[],d=new Map){if(R.sourceFile.isStubFile()||R.isThirdPartyImport||R.sourceFile.isNoCircularDependencyConfirmed())return!1;ae.set(R.sourceFile.getFilePath(),R);let k=!1;const oe=(0,p.normalizePathCase)(this._fs,R.sourceFile.getFilePath());if(d.has(oe))re.length>1&&R===re[0]&&(this._logImportCycle(re),k=!0);else{if(d.has(oe))return!1;d.set(oe,!0),re.push(R);for(const ye of R.imports)this._detectAndReportImportCycles(ye,ae,re,d)&&(k=!0);d.set(oe,!1),re.pop()}return k}_logImportCycle(R){const ae=new M.CircularDependency;R.forEach(k=>{ae.appendPath(k.sourceFile.getFilePath())}),ae.normalizeOrder();const re=ae.getPaths()[0],d=this._getSourceFileInfoFromPath(re);(0,f.assert)(d!==void 0),d.sourceFile.addCircularDependency(ae)}_markFileDirtyRecursive(R,ae,re=!1){const d=(0,p.normalizePathCase)(this._fs,R.sourceFile.getFilePath());ae.has(d)||(R.sourceFile.markReanalysisRequired(re),ae.set(d,!0),R.importedBy.forEach(k=>{const oe=k.chainedSourceFile===R;this._markFileDirtyRecursive(k,ae,oe)}))}getTextOnRange(R,ae,re){const d=this._getSourceFileInfoFromPath(R);if(!d)return;const k=d.sourceFile,oe=k.getOpenFileContents();if(oe!==void 0)return this._runEvaluatorWithCancellationToken(re,()=>{this._parseFile(d);const ye=k.getParseResults(),E=(0,b.convertRangeToTextRange)(ae,ye.tokenizerOutput.lines);if(!!E)return oe.substr(E.start,E.length)})}getAutoImports(R,ae,re,d,k,oe,ye,E){const $=this._getSourceFileInfoFromPath(R);if(!$)return[];const B=$.sourceFile,X=B.getOpenFileContents();return X===void 0?[]:this._runEvaluatorWithCancellationToken(E,()=>{this._bindFile($);const Z=B.getParseResults(),se=(0,b.convertRangeToTextRange)(ae,Z.tokenizerOutput.lines);if(!se)return[];const _e=(0,T.findNodeByOffset)(Z.parseTree,se.start);if(!_e)return[];const be=X.substr(se.start,se.length),ve=this._buildModuleSymbolsMap($,!!k,!0,E),De=new F.AutoImporter(this._configOptions.findExecEnvironment(R),this._importResolver,Z,ae.start,new G.CompletionMap,ve,{lazyEdit:oe,allowVariableInAll:ye,libraryMap:k,patternMatcher:($e,tt)=>(0,v.computeCompletionSimilarity)($e,tt)>re}),Oe=[],Je=(0,N.getScopeForNode)(_e);if(Je){const $e=d==null?void 0:d.get(be);$e&&(0,o.appendArray)(Oe,De.getAutoImportCandidatesForAbbr(be,$e,E)),Oe.push(...De.getAutoImportCandidates(be,re,void 0,E).filter(tt=>!Je.lookUpSymbolRecursive(tt.name)))}return Oe})}getDiagnostics(R){const ae=this._removeUnneededFiles();return this._sourceFileList.forEach(re=>{if(this._shouldCheckFile(re)){const d=re.sourceFile.getDiagnostics(R,re.diagnosticsVersion);d!==void 0&&(ae.push({filePath:re.sourceFile.getFilePath(),version:re.sourceFile.getClientVersion(),diagnostics:d}),re.diagnosticsVersion=re.sourceFile.getDiagnosticVersion())}else!re.isOpenByClient&&R.checkOnlyOpenFiles&&re.diagnosticsVersion!==void 0&&(ae.push({filePath:re.sourceFile.getFilePath(),version:re.sourceFile.getClientVersion(),diagnostics:[]}),re.diagnosticsVersion=void 0)}),ae}getDiagnosticsForRange(R,ae){const re=this.getSourceFile(R);if(!re)return[];const d=re.getDiagnostics(this._configOptions);return d?d.filter(k=>(0,m.doRangesIntersect)(k.range,ae)):[]}getDefinitionsForPosition(R,ae,re,d){return this._runEvaluatorWithCancellationToken(d,()=>{const k=this._getSourceFileInfoFromPath(R);if(!k)return;this._bindFile(k);const oe=this._configOptions.findExecEnvironment(R);return k.sourceFile.getDefinitionsForPosition(this._createSourceMapper(oe),ae,re,this._evaluator,d)})}getTypeDefinitionsForPosition(R,ae,re){return this._runEvaluatorWithCancellationToken(re,()=>{const d=this._getSourceFileInfoFromPath(R);if(!d)return;this._bindFile(d);const k=this._configOptions.findExecEnvironment(R);return d.sourceFile.getTypeDefinitionsForPosition(this._createSourceMapper(k,!1,!0),ae,this._evaluator,R,re)})}reportReferencesForPosition(R,ae,re,d,k){this._runEvaluatorWithCancellationToken(k,()=>{const oe=this._getSourceFileInfoFromPath(R);if(!oe)return;const ye=this._isUserCode(oe);this._bindFile(oe);const E=this._configOptions.findExecEnvironment(R),$=oe.sourceFile.getDeclarationForPosition(this._createSourceMapper(E),ae,this._evaluator,d,k);if(!!$)if($.requiresGlobalSearch){for(const B of this._sourceFileList)if((0,l.throwIfCancellationRequested)(k),B.isOpenByClient||!ye||this._isUserCode(B)){const X=B.sourceFile.getFileContent();(!X||X.search($.symbolName)>=0)&&(this._bindFile(B),B.sourceFile.addReferences($,re,this._evaluator,k)),this._handleMemoryHighUsage()}if(re)for(const B of $.declarations){if((0,l.throwIfCancellationRequested)(k),$.locations.some(se=>se.path===B.path))continue;const X=this._getSourceFileInfoFromPath(B.path);if(!X)continue;const Z=new q.ReferencesResult($.requiresGlobalSearch,$.nodeAtOffset,$.symbolName,$.declarations);X.sourceFile.addReferences(Z,re,this._evaluator,k);for(const se of Z.locations)se.path===B.path&&(0,m.doesRangeContain)(B.range,se.range)&&$.addLocations(se)}}else oe.sourceFile.addReferences($,re,this._evaluator,k)})}getFileIndex(R,ae,re){if(ae.indexingForAutoImportMode){const d=(0,p.stripFileExtension)((0,p.getFileName)(R));if((0,ce.isPrivateOrProtectedName)(d))return}return this._handleMemoryHighUsage(),this._runEvaluatorWithCancellationToken(re,()=>{var d;const k=this._getSourceFileInfoFromPath(R);if(!k)return;const oe=(d=k.sourceFile.getFileContent())!==null&&d!==void 0?d:"";if(!(ae.indexingForAutoImportMode&&!ae.forceIndexing&&!k.sourceFile.isStubFile()&&!k.sourceFile.isThirdPartyPyTypedPresent()&&oe.indexOf("__all__")<0))return this._bindFile(k,oe),k.sourceFile.index(ae,re)})}addSymbolsForDocument(R,ae,re){return this._runEvaluatorWithCancellationToken(re,()=>{const d=this._getSourceFileInfoFromPath(R);d&&(d.sourceFile.getCachedIndexResults()||this._bindFile(d),d.sourceFile.addHierarchicalSymbolsForDocument(ae,re))})}reportSymbolsForWorkspace(R,ae,re){this._runEvaluatorWithCancellationToken(re,()=>{if(!!R)for(const d of this._sourceFileList){if(!this._isUserCode(d))continue;d.sourceFile.getCachedIndexResults()||this._bindFile(d);const k=d.sourceFile.getSymbolsForDocument(R,re);k.length>0&&ae(k),this._handleMemoryHighUsage()}})}getHoverForPosition(R,ae,re,d){return this._runEvaluatorWithCancellationToken(d,()=>{const k=this._getSourceFileInfoFromPath(R);if(!k)return;this._bindFile(k);const oe=this._configOptions.findExecEnvironment(R);return k.sourceFile.getHoverForPosition(this._createSourceMapper(oe,!0),ae,re,this._evaluator,d)})}getDocumentHighlight(R,ae,re){return this._runEvaluatorWithCancellationToken(re,()=>{const d=this._getSourceFileInfoFromPath(R);if(!d)return;this._bindFile(d);const k=this._configOptions.findExecEnvironment(R);return d.sourceFile.getDocumentHighlight(this._createSourceMapper(k),ae,this._evaluator,re)})}getSignatureHelpForPosition(R,ae,re,d){return this._runEvaluatorWithCancellationToken(d,()=>{const k=this._getSourceFileInfoFromPath(R);if(!k)return;this._bindFile(k);const oe=this._configOptions.findExecEnvironment(R);return k.sourceFile.getSignatureHelpForPosition(ae,this._createSourceMapper(oe,!0),this._evaluator,re,d)})}async getCompletionsForPosition(R,ae,re,d,k,oe,ye){var E,$;const B=this._getSourceFileInfoFromPath(R);if(!B)return;const X=this._logTracker.log(`completion at ${R}:${ae.line}:${ae.character}`,_e=>{var be,ve;const De=this._runEvaluatorWithCancellationToken(ye,()=>{this._bindFile(B);const Oe=this._configOptions.findExecEnvironment(R);return B.sourceFile.getCompletionsForPosition(ae,re,this._configOptions,this._importResolver,this._lookUpImport,this._evaluator,d,this._createSourceMapper(Oe,!0),k,oe,()=>this._buildModuleSymbolsMap(B,!!oe,!1,ye),ye)});return _e.add(`found ${(ve=(be=De==null?void 0:De.completionMap)===null||be===void 0?void 0:be.size)!==null&&ve!==void 0?ve:"null"} items`),De}),Z={completionList:s.CompletionList.create((E=X==null?void 0:X.completionMap)===null||E===void 0?void 0:E.toArray()),memberAccessInfo:X==null?void 0:X.memberAccessInfo,autoImportInfo:X==null?void 0:X.autoImportInfo,extensionInfo:X==null?void 0:X.extensionInfo};if(!(X!=null&&X.completionMap)||!(!(($=this._extension)===null||$===void 0)&&$.completionListExtension))return Z;const se=B.sourceFile.getParseResults();if((se==null?void 0:se.parseTree)&&(se==null?void 0:se.text)){const _e=(0,b.convertPositionToOffset)(ae,se.tokenizerOutput.lines);_e!==void 0&&await this._extension.completionListExtension.updateCompletionResults(Z,se,_e,ye)}return Z}resolveCompletionItem(R,ae,re,d,k,oe){return this._runEvaluatorWithCancellationToken(oe,()=>{const ye=this._getSourceFileInfoFromPath(R);if(!ye)return;this._bindFile(ye);const E=this._configOptions.findExecEnvironment(R);ye.sourceFile.resolveCompletionItem(this._configOptions,this._importResolver,this._lookUpImport,this._evaluator,re,this._createSourceMapper(E,!0),d,k,()=>this._buildModuleSymbolsMap(ye,!!k,!1,oe),ae,oe)})}renameModule(R,ae,re){return this._runEvaluatorWithCancellationToken(re,()=>{if((0,p.isFile)(this._fs,R)&&!this._getSourceFileInfoFromPath(R))return;const d=U.RenameModuleProvider.createForModule(this._importResolver,this._configOptions,this._evaluator,R,ae,re);if(!!d)return this._processModuleReferences(d,d.lastModuleName,R),{edits:d.getEdits(),fileOperations:[]}})}moveSymbolAtPosition(R,ae,re,d){return this._runEvaluatorWithCancellationToken(d,()=>{const k=this._getSourceFileInfoFromPath(R);if(!k)return;this._bindFile(k);const oe=k.sourceFile.getParseResults();if(!oe)return;const ye=(0,b.convertPositionToOffset)(re,oe.tokenizerOutput.lines);if(ye===void 0)return;const E=(0,T.findNodeByOffset)(oe.parseTree,ye);if(E===void 0||E.nodeType!==38)return;const $=this._configOptions.findExecEnvironment(R),B=te.DocumentSymbolCollector.getDeclarationsForNode(E,this._evaluator,!1,d,this._createSourceMapper($)),X=U.RenameModuleProvider.createForSymbol(this._importResolver,this._configOptions,this._evaluator,R,ae,B,d);if(!!X)return this._processModuleReferences(X,E.value,R),{edits:X.getEdits(),fileOperations:[]}})}canRenameSymbolAtPosition(R,ae,re,d,k){return this._runEvaluatorWithCancellationToken(k,()=>{const oe=this._getSourceFileInfoFromPath(R);if(!oe)return;this._bindFile(oe);const ye=this._getReferenceResult(oe,R,ae,d,k);if(!ye||ye.containsOnlyImportDecls&&!this._supportRenameModule(ye.declarations,re)||this._getRenameSymbolMode(oe,ye,re)==="none")return;const $=oe.sourceFile.getParseResults();return(0,b.convertTextRangeToRange)(ye.nodeAtOffset,$.tokenizerOutput.lines)})}renameSymbolAtPosition(R,ae,re,d,k,oe){return this._runEvaluatorWithCancellationToken(oe,()=>{var ye;const E=this._getSourceFileInfoFromPath(R);if(!E)return;this._bindFile(E);const $=this._getReferenceResult(E,R,ae,k,oe);if(!$)return;if($.containsOnlyImportDecls){if(!this._supportRenameModule($.declarations,d))return;const Z=U.RenameModuleProvider.getRenameModulePathInfo(U.RenameModuleProvider.getRenameModulePath($.declarations),re);if(!Z)return;const se=this.renameModule(Z.filePath,Z.newFilePath,oe);if(se==null||se.fileOperations.push({kind:"rename",oldFilePath:Z.filePath,newFilePath:Z.newFilePath}),(0,L.isStubFile)(Z.filePath)){const _e=this._importResolver.getSourceFilesFromStub(Z.filePath,this._configOptions.findExecEnvironment(R),!1);for(const be of _e){const ve=U.RenameModuleProvider.getRenameModulePathInfo(be,re);ve&&(se==null||se.fileOperations.push({kind:"rename",oldFilePath:ve.filePath,newFilePath:ve.newFilePath}))}}return se}const B=this._getRenameSymbolMode(E,$,d);switch(B){case"singleFileMode":E.sourceFile.addReferences($,!0,this._evaluator,oe);break;case"multiFileMode":{for(const Z of this._sourceFileList){if(this._isUserCode(Z)){const se=(ye=Z.sourceFile.getFileContent())!==null&&ye!==void 0?ye:"";if(se.indexOf($.symbolName)<0)continue;this._bindFile(Z,se),Z.sourceFile.addReferences($,!0,this._evaluator,oe)}this._handleMemoryHighUsage()}break}case"none":return;default:(0,f.assertNever)(B)}const X=[];return $.locations.forEach(Z=>{X.push({filePath:Z.path,range:Z.range,replacementText:re})}),{edits:X,fileOperations:[]}})}getCallForPosition(R,ae,re){const d=this._getSourceFileInfoFromPath(R);if(!d)return;this._bindFile(d);const k=this._configOptions.findExecEnvironment(R),oe=d.sourceFile.getDeclarationForPosition(this._createSourceMapper(k),ae,this._evaluator,void 0,re);if(!oe||oe.declarations.length===0)return;const ye=P.CallHierarchyProvider.getTargetDeclaration(oe.declarations,oe.nodeAtOffset);return P.CallHierarchyProvider.getCallForDeclaration(oe.symbolName,ye,this._evaluator,re)}getIncomingCallsForPosition(R,ae,re){const d=this._getSourceFileInfoFromPath(R);if(!d)return;this._bindFile(d);const k=this._configOptions.findExecEnvironment(R),oe=d.sourceFile.getDeclarationForPosition(this._createSourceMapper(k),ae,this._evaluator,void 0,re);if(!oe||oe.declarations.length===0)return;const ye=P.CallHierarchyProvider.getTargetDeclaration(oe.declarations,oe.nodeAtOffset);let E=[];for(const $ of this._sourceFileList)if(this._isUserCode($)||$.isOpenByClient){this._bindFile($);const B=P.CallHierarchyProvider.getIncomingCallsForDeclaration($.sourceFile.getFilePath(),oe.symbolName,ye,$.sourceFile.getParseResults(),this._evaluator,re);B&&(E=E.concat(...B)),this._handleMemoryHighUsage()}return E}getOutgoingCallsForPosition(R,ae,re){const d=this._getSourceFileInfoFromPath(R);if(!d)return;this._bindFile(d);const k=this._configOptions.findExecEnvironment(R),oe=d.sourceFile.getDeclarationForPosition(this._createSourceMapper(k),ae,this._evaluator,void 0,re);if(!oe||oe.declarations.length===0)return;const ye=P.CallHierarchyProvider.getTargetDeclaration(oe.declarations,oe.nodeAtOffset);return P.CallHierarchyProvider.getOutgoingCallsForDeclaration(ye,d.sourceFile.getParseResults(),this._evaluator,re)}performQuickAction(R,ae,re,d){const k=this._getSourceFileInfoFromPath(R);if(!!k)return this._bindFile(k),k.sourceFile.performQuickAction(ae,re,d)}test_createSourceMapper(R){return this._createSourceMapper(R,!1)}_getRenameSymbolMode(R,ae,re){const d=this._isUserCode(R);return re||d&&!ae.requiresGlobalSearch||!d&&R.isOpenByClient&&ae.declarations.every(k=>this._getSourceFileInfoFromPath(k.path)===R)?"singleFileMode":ae.declarations.every(k=>this._isUserCode(this._getSourceFileInfoFromPath(k.path)))?"multiFileMode":"none"}_supportRenameModule(R,ae){return!ae&&R.every(re=>this._isUserCode(this._getSourceFileInfoFromPath(re.path)))}_getReferenceResult(R,ae,re,d,k){const oe=this._configOptions.findExecEnvironment(ae),ye=R.sourceFile.getDeclarationForPosition(this._createSourceMapper(oe),re,this._evaluator,void 0,k);if(!!ye){if(d&&ye.containsOnlyImportDecls)return ye;if(ye.nonImportDeclarations.length!==0)return new q.ReferencesResult(ye.requiresGlobalSearch,ye.nodeAtOffset,ye.symbolName,ye.nonImportDeclarations)}}_processModuleReferences(R,ae,re){var d;for(const k of this._sourceFileList){if(!this._isUserCode(k))continue;const oe=k.sourceFile.getFilePath(),ye=(d=k.sourceFile.getFileContent())!==null&&d!==void 0?d:"";if(oe!==re&&ye.indexOf(ae)<0)continue;this._bindFile(k,ye);const E=k.sourceFile.getParseResults();!E||(R.renameReferences(oe,E),this._handleMemoryHighUsage())}}_handleMemoryHighUsage(){const R=this._evaluator.getTypeCacheEntryCount(),ae=re=>`${Math.round(re/(1024*1024))}MB`;if(R>75e4||this._parsedFileCount>1e3){const re=(0,r.getHeapStatistics)();this._configOptions.verboseOutput&&this._console.info(`Heap stats: total_heap_size=${ae(re.total_heap_size)}, used_heap_size=${ae(re.used_heap_size)}, total_physical_size=${ae(re.total_physical_size)}, total_available_size=${ae(re.total_available_size)}, heap_size_limit=${ae(re.heap_size_limit)}`);const d=(1<<24)*.9;(R>d||re.used_heap_size>re.heap_size_limit*.9)&&(this._console.info(`Emptying type cache to avoid heap overflow. Used ${ae(re.used_heap_size)} out of ${ae(re.heap_size_limit)} (${R} cache entries).`),this._createNewEvaluator(),this._discardCachedParseResults(),this._parsedFileCount=0)}}_discardCachedParseResults(){for(const R of this._sourceFileList)R.sourceFile.dropParseAndBindInfo()}_isUserCode(R){return R&&R.isTracked&&!R.isThirdPartyImport&&!R.isTypeshedFile}_runEvaluatorWithCancellationToken(R,ae){try{return R?this._evaluator.runWithCancellationToken(R,ae):ae()}catch(re){throw re instanceof l.OperationCanceledException||this._createNewEvaluator(),re}}_removeUnneededFiles(){const R=[];for(let ae=0;ae<this._sourceFileList.length;){const re=this._sourceFileList[ae];this._isFileNeeded(re)?(!this._shouldCheckFile(re)&&re.diagnosticsVersion!==void 0&&(R.push({filePath:re.sourceFile.getFilePath(),version:re.sourceFile.getClientVersion(),diagnostics:[]}),re.diagnosticsVersion=void 0),ae++):(R.push({filePath:re.sourceFile.getFilePath(),version:re.sourceFile.getClientVersion(),diagnostics:[]}),re.sourceFile.prepareForClose(),this._removeSourceFileFromListAndMap(re.sourceFile.getFilePath(),ae),re.imports.forEach(d=>{const k=d.importedBy.findIndex(oe=>oe===re);if(!(k<0)&&(d.importedBy.splice(k,1),!this._isFileNeeded(d))){const oe=this._sourceFileList.findIndex(ye=>ye===d);oe>=0&&oe<ae&&(R.push({filePath:d.sourceFile.getFilePath(),version:d.sourceFile.getClientVersion(),diagnostics:[]}),d.sourceFile.prepareForClose(),this._removeSourceFileFromListAndMap(d.sourceFile.getFilePath(),oe),ae--)}}),re.shadowedBy.forEach(d=>{d.shadows=d.shadows.filter(k=>k!==re)}),re.shadowedBy=[])}return R}_isFileNeeded(R){return R.sourceFile.isFileDeleted()?!1:R.isTracked||R.isOpenByClient||R.shadows.length>0?!0:R.importedBy.length===0?!1:this._isImportNeededRecursive(R,new Map)}_isImportNeededRecursive(R,ae){if(R.isTracked||R.isOpenByClient||R.shadows.length>0)return!0;const re=(0,p.normalizePathCase)(this._fs,R.sourceFile.getFilePath());if(ae.has(re))return!1;ae.set(re,!0);for(const d of R.importedBy)if(this._isImportNeededRecursive(d,ae))return!0;return!1}_createSourceMapper(R,ae,re){return new L.SourceMapper(this._importResolver,R,this._evaluator,(k,oe)=>{const ye=this._getSourceFileInfoFromPath(k);if(!!ye)return this._addShadowedFile(ye,oe),this.getBoundSourceFile(oe)},k=>this.getBoundSourceFile(k),ae!=null?ae:!1,re!=null?re:!1)}_isImportAllowed(R,ae,re){if(ae.isNativeLib)return!1;let d=this._configOptions.useLibraryCodeForTypes||ae.importType===1&&!!ae.pyTypedInfo||ae.importType===2&&R.isThirdPartyPyTypedPresent;return(ae.importType===1||R.isThirdPartyImport&&ae.importType===2)&&(this._allowedThirdPartyImports&&(ae.isRelative||this._allowedThirdPartyImports.some(k=>!!(ae.importName===k||ae.importName.startsWith(k+"."))))&&(d=!0),!re)?d:!0}_updateSourceFileImports(R,ae){const re=[],d=R.sourceFile.getImports(),k=B=>{let X=!1,Z=!1;return B.importType===1?(X=!0,B.pyTypedInfo&&(Z=!0)):R.isThirdPartyImport&&B.importType===2&&(X=!0,R.isThirdPartyPyTypedPresent&&(Z=!0)),{isThirdPartyImport:X,isPyTypedPresent:Z}},oe=new Map;if(R.chainedSourceFile)if(R.chainedSourceFile.sourceFile.isFileDeleted())R.chainedSourceFile=void 0;else{const B=R.chainedSourceFile.sourceFile.getFilePath();oe.set((0,p.normalizePathCase)(this._fs,B),{path:B,isTypeshedFile:!1,isThirdPartyImport:!1,isPyTypedPresent:!1})}d.forEach(B=>{if(B.isImportFound){if(this._isImportAllowed(R,B,B.isStubFile)&&B.resolvedPaths.length>0){const X=B.resolvedPaths[B.resolvedPaths.length-1];if(X){const Z=k(B);oe.set((0,p.normalizePathCase)(this._fs,X),{path:X,isTypeshedFile:!!B.isTypeshedFile,isThirdPartyImport:Z.isThirdPartyImport,isPyTypedPresent:Z.isPyTypedPresent})}}B.filteredImplicitImports.forEach(X=>{if(this._isImportAllowed(R,B,X.isStubFile)&&!X.isNativeLib){const Z=k(B);oe.set((0,p.normalizePathCase)(this._fs,X.path),{path:X.path,isTypeshedFile:!!B.isTypeshedFile,isThirdPartyImport:Z.isThirdPartyImport,isPyTypedPresent:Z.isPyTypedPresent})}})}else ae.verboseOutput&&(this._console.info(`Could not import '${B.importName}' in file '${R.sourceFile.getFilePath()}'`),B.importFailureInfo&&B.importFailureInfo.forEach(X=>{this._console.info(`  ${X}`)}))});const ye=new Map;R.imports.forEach(B=>{const X=(0,p.normalizePathCase)(this._fs,B.sourceFile.getFilePath());oe.has(X)?ye.set(X,B):B.importedBy=B.importedBy.filter(Z=>(0,p.normalizePathCase)(this._fs,Z.sourceFile.getFilePath())!==(0,p.normalizePathCase)(this._fs,R.sourceFile.getFilePath()))}),oe.forEach((B,X)=>{if(!ye.has(X)){let Z;if(this._getSourceFileInfoFromPath(B.path))Z=this._getSourceFileInfoFromPath(B.path);else{const se=this._getImportNameForFile(B.path);Z={sourceFile:new J.SourceFile(this._fs,B.path,se,B.isThirdPartyImport,B.isPyTypedPresent,this._console,this._logTracker),isTracked:!1,isOpenByClient:!1,isTypeshedFile:B.isTypeshedFile,isThirdPartyImport:B.isThirdPartyImport,isThirdPartyPyTypedPresent:B.isPyTypedPresent,diagnosticsVersion:void 0,imports:[],importedBy:[],shadows:[],shadowedBy:[]},this._addToSourceFileListAndMap(Z),re.push(Z)}Z.importedBy.push(R),ye.set(X,Z)}}),R.imports=[],oe.forEach((B,X)=>{this._getSourceFileInfoFromPath(X)&&R.imports.push(this._getSourceFileInfoFromPath(X))}),R.builtinsImport=void 0;const E=R.sourceFile.getBuiltinsImport();if(E&&E.isImportFound){const B=E.resolvedPaths[E.resolvedPaths.length-1];R.builtinsImport=this._getSourceFileInfoFromPath(B)}R.ipythonDisplayImport=void 0;const $=R.sourceFile.getIPythonDisplayImport();if($&&$.isImportFound){const B=$.resolvedPaths[$.resolvedPaths.length-1];R.ipythonDisplayImport=this._getSourceFileInfoFromPath(B)}return re}_getSourceFileInfoFromPath(R){return this._sourceFileMap.get((0,p.normalizePathCase)(this._fs,R))}_removeSourceFileFromListAndMap(R,ae){this._sourceFileMap.delete((0,p.normalizePathCase)(this._fs,R)),this._sourceFileList.splice(ae,1)}_addToSourceFileListAndMap(R){const ae=(0,p.normalizePathCase)(this._fs,R.sourceFile.getFilePath());(0,f.assert)(!this._sourceFileMap.has(ae)),this._sourceFileList.push(R),this._sourceFileMap.set(ae,R)}}t.Program=H})(hk);var Xp=(t=>(t[t.Error=0]="Error",t[t.Argument=1]="Argument",t[t.Assert=2]="Assert",t[t.Assignment=3]="Assignment",t[t.AssignmentExpression=4]="AssignmentExpression",t[t.AugmentedAssignment=5]="AugmentedAssignment",t[t.Await=6]="Await",t[t.BinaryOperation=7]="BinaryOperation",t[t.Break=8]="Break",t[t.Call=9]="Call",t[t.Class=10]="Class",t[t.Constant=11]="Constant",t[t.Continue=12]="Continue",t[t.Decorator=13]="Decorator",t[t.Del=14]="Del",t[t.Dictionary=15]="Dictionary",t[t.DictionaryExpandEntry=16]="DictionaryExpandEntry",t[t.DictionaryKeyEntry=17]="DictionaryKeyEntry",t[t.Ellipsis=18]="Ellipsis",t[t.If=19]="If",t[t.Import=20]="Import",t[t.ImportAs=21]="ImportAs",t[t.ImportFrom=22]="ImportFrom",t[t.ImportFromAs=23]="ImportFromAs",t[t.Index=24]="Index",t[t.Except=25]="Except",t[t.For=26]="For",t[t.FormatString=27]="FormatString",t[t.Function=28]="Function",t[t.Global=29]="Global",t[t.Lambda=30]="Lambda",t[t.List=31]="List",t[t.ListComprehension=32]="ListComprehension",t[t.ListComprehensionFor=33]="ListComprehensionFor",t[t.ListComprehensionIf=34]="ListComprehensionIf",t[t.MemberAccess=35]="MemberAccess",t[t.Module=36]="Module",t[t.ModuleName=37]="ModuleName",t[t.Name=38]="Name",t[t.Nonlocal=39]="Nonlocal",t[t.Number=40]="Number",t[t.Parameter=41]="Parameter",t[t.Pass=42]="Pass",t[t.Raise=43]="Raise",t[t.Return=44]="Return",t[t.Set=45]="Set",t[t.Slice=46]="Slice",t[t.StatementList=47]="StatementList",t[t.StringList=48]="StringList",t[t.String=49]="String",t[t.Suite=50]="Suite",t[t.Ternary=51]="Ternary",t[t.Tuple=52]="Tuple",t[t.Try=53]="Try",t[t.TypeAnnotation=54]="TypeAnnotation",t[t.UnaryOperation=55]="UnaryOperation",t[t.Unpack=56]="Unpack",t[t.While=57]="While",t[t.With=58]="With",t[t.WithItem=59]="WithItem",t[t.Yield=60]="Yield",t[t.YieldFrom=61]="YieldFrom",t[t.FunctionAnnotation=62]="FunctionAnnotation",t[t.Match=63]="Match",t[t.Case=64]="Case",t[t.PatternSequence=65]="PatternSequence",t[t.PatternAs=66]="PatternAs",t[t.PatternLiteral=67]="PatternLiteral",t[t.PatternClass=68]="PatternClass",t[t.PatternCapture=69]="PatternCapture",t[t.PatternMapping=70]="PatternMapping",t[t.PatternMappingKeyEntry=71]="PatternMappingKeyEntry",t[t.PatternMappingExpandEntry=72]="PatternMappingExpandEntry",t[t.PatternValue=73]="PatternValue",t[t.PatternClassArgument=74]="PatternClassArgument",t))(Xp||{}),$D=(t=>(t[t.Unbound=0]="Unbound",t[t.Unknown=1]="Unknown",t[t.Any=2]="Any",t[t.None=3]="None",t[t.Never=4]="Never",t[t.Function=5]="Function",t[t.OverloadedFunction=6]="OverloadedFunction",t[t.Class=7]="Class",t[t.Module=8]="Module",t[t.Union=9]="Union",t[t.TypeVar=10]="TypeVar",t))($D||{}),jD=(t=>(t[t.None=0]="None",t[t.Instantiable=1]="Instantiable",t[t.Instance=2]="Instance",t[t.Annotated=4]="Annotated",t[t.SpecialForm=8]="SpecialForm",t))(jD||{});function R9(t){var e=Ut.createContext(null);function n(r){var a=t(r.initialState);return Ut.createElement(e.Provider,{value:a},r.children)}function i(){var r=Ut.useContext(e);if(r===null)throw new Error("Component must be wrapped with <Container.Provider>");return r}return{Provider:n,useContainer:i}}const O9=`
def f(a):
  return a
f(1)
`,qD=Hn.combinePaths(Hn.normalizeSlashes("/"),oF,lF);console.log(qD);const GD=new OE.TestFileSystem(!1,{files:{"/t.py":`
def f(a):
  return a
f(1)
`}}),kI=new cF(GD),KD=new Ad.ConfigOptions(Hn.normalizeSlashes("/")),x9=new Ah.ImportResolver(kI,KD,new aF(kI.getModulePath(),[qD])),Ua=new hk.Program(x9,KD);Ua.setTrackedFiles(["/t.py"]);for(;Ua.analyze(););let Uf=Ua.getSourceFile("/t.py");function L9(){const[t,e]=rn.exports.useState(()=>({code:O9,ast:Uf.getParseResults().parseTree,selectedNode:Uf.getParseResults().parseTree,program:Ua}));return{state:t,handleCodeChange(n){for(GD.apply({"t.py":n}),Ua.markAllFilesDirty(!1);Ua.analyze(););Uf=Ua.getSourceFile("/t.py");const i=Uf.getParseResults().parseTree;e({code:n,ast:i,selectedNode:i,program:Ua})},selectNode(n){e(i=>({...i,selectedNode:n}))},handleCursorChange(n){e(i=>{const r=i.ast,a=Tk(r,n);return{...i,selectedNode:a||r}})}}}const _m=R9(L9);var Pv={exports:{}},vm={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z9=rn.exports,U9=Symbol.for("react.element"),V9=Symbol.for("react.fragment"),B9=Object.prototype.hasOwnProperty,W9=z9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$9={key:!0,ref:!0,__self:!0,__source:!0};function HD(t,e,n){var i,r={},a=null,s=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(i in e)B9.call(e,i)&&!$9.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:U9,type:t,key:a,ref:s,props:r,_owner:W9.current}}vm.Fragment=V9;vm.jsx=HD;vm.jsxs=HD;Pv.exports=vm;const mi=Pv.exports.jsx,ip=Pv.exports.jsxs;function j9(){const{state:t,selectNode:e}=_m.useContainer();return mi("div",{className:"verticalContainer",children:n(t.ast)});function n(i){const r=new gk().visitNode(i);return mi(cR,{nodeLabel:mi("div",{className:i===t.selectedNode?"selectedNode":"",onClick:()=>e(i),children:Xp[i.nodeType]}),children:r.map(a=>a&&n(a))},i.id)}}function q9(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function PI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DI(Object(n),!0).forEach(function(i){q9(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function G9(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function K9(t,e){if(t==null)return{};var n=G9(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,i)||(n[i]=t[i]))}return n}function H9(t,e){return Y9(t)||Q9(t,e)||J9(t,e)||X9()}function Y9(t){if(Array.isArray(t))return t}function Q9(t,e){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(t)))){var n=[],i=!0,r=!1,a=void 0;try{for(var s=t[Symbol.iterator](),l;!(i=(l=s.next()).done)&&(n.push(l.value),!(e&&n.length===e));i=!0);}catch(o){r=!0,a=o}finally{try{!i&&s.return!=null&&s.return()}finally{if(r)throw a}}return n}}function J9(t,e){if(!!t){if(typeof t=="string")return AI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AI(t,e)}}function AI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function X9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z9(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function NI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MI(Object(n),!0).forEach(function(i){Z9(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function eB(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(i){return e.reduceRight(function(r,a){return a(r)},i)}}function wu(t){return function e(){for(var n=this,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return r.length>=t.length?t.apply(this,r):function(){for(var s=arguments.length,l=new Array(s),o=0;o<s;o++)l[o]=arguments[o];return e.apply(n,[].concat(r,l))}}}function Zp(t){return{}.toString.call(t).includes("Object")}function tB(t){return!Object.keys(t).length}function vd(t){return typeof t=="function"}function nB(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function iB(t,e){return Zp(e)||io("changeType"),Object.keys(e).some(function(n){return!nB(t,n)})&&io("changeField"),e}function rB(t){vd(t)||io("selectorType")}function sB(t){vd(t)||Zp(t)||io("handlerType"),Zp(t)&&Object.values(t).some(function(e){return!vd(e)})&&io("handlersType")}function aB(t){t||io("initialIsRequired"),Zp(t)||io("initialType"),tB(t)&&io("initialContent")}function oB(t,e){throw new Error(t[e]||t.default)}var lB={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},io=wu(oB)(lB),Vf={changes:iB,selector:rB,handler:sB,initial:aB};function cB(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Vf.initial(t),Vf.handler(e);var n={current:t},i=wu(fB)(n,e),r=wu(dB)(n),a=wu(Vf.changes)(t),s=wu(uB)(n);function l(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(f){return f};return Vf.selector(u),u(n.current)}function o(u){eB(i,r,a,s)(u)}return[l,o]}function uB(t,e){return vd(e)?e(t.current):e}function dB(t,e){return t.current=NI(NI({},t.current),e),e}function fB(t,e,n){return vd(e)?e(t.current):Object.keys(n).forEach(function(i){var r;return(r=e[i])===null||r===void 0?void 0:r.call(e,t.current[i])}),n}var pB={create:cB},hB={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.33.0/min/vs"}};function mB(t){return function e(){for(var n=this,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return r.length>=t.length?t.apply(this,r):function(){for(var s=arguments.length,l=new Array(s),o=0;o<s;o++)l[o]=arguments[o];return e.apply(n,[].concat(r,l))}}}function yB(t){return{}.toString.call(t).includes("Object")}function gB(t){return t||RI("configIsRequired"),yB(t)||RI("configType"),t.urls?(TB(),{paths:{vs:t.urls.monacoBase}}):t}function TB(){console.warn(YD.deprecation)}function _B(t,e){throw new Error(t[e]||t.default)}var YD={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},RI=mB(_B)(YD),vB={config:gB},bB=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return function(r){return n.reduceRight(function(a,s){return s(a)},r)}};function QD(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],QD(t[n],e[n]))}),PI(PI({},t),e)}var SB={type:"cancelation",msg:"operation is manually canceled"};function lg(t){var e=!1,n=new Promise(function(i,r){t.then(function(a){return e?r(SB):i(a)}),t.catch(r)});return n.cancel=function(){return e=!0},n}var IB=pB.create({config:hB,isInitialized:!1,resolve:null,reject:null,monaco:null}),JD=H9(IB,2),Ud=JD[0],bm=JD[1];function CB(t){var e=vB.config(t),n=e.monaco,i=K9(e,["monaco"]);bm(function(r){return{config:QD(r.config,i),monaco:n}})}function wB(){var t=Ud(function(e){var n=e.monaco,i=e.isInitialized,r=e.resolve;return{monaco:n,isInitialized:i,resolve:r}});if(!t.isInitialized){if(bm({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),lg(cg);if(window.monaco&&window.monaco.editor)return XD(window.monaco),t.resolve(window.monaco),lg(cg);bB(EB,kB)(DB)}return lg(cg)}function EB(t){return document.body.appendChild(t)}function FB(t){var e=document.createElement("script");return t&&(e.src=t),e}function kB(t){var e=Ud(function(i){var r=i.config,a=i.reject;return{config:r,reject:a}}),n=FB("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function DB(){var t=Ud(function(n){var i=n.config,r=n.resolve,a=n.reject;return{config:i,resolve:r,reject:a}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){XD(n),t.resolve(n)},function(n){t.reject(n)})}function XD(t){Ud().monaco||bm({monaco:t})}function PB(){return Ud(function(t){var e=t.monaco;return e})}var cg=new Promise(function(t,e){return bm({resolve:t,reject:e})}),ZD={config:CB,init:wB,__getMonacoInstance:PB};function NT(){return NT=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},NT.apply(this,arguments)}const AB={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};function MB({content:t}){return Ut.createElement("div",{style:AB},t)}const ug={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}};function eP({width:t,height:e,isEditorReady:n,loading:i,_ref:r,className:a,wrapperProps:s}){return Ut.createElement("section",NT({style:{...ug.wrapper,width:t,height:e}},s),!n&&Ut.createElement(MB,{content:i}),Ut.createElement("div",{ref:r,style:{...ug.fullWidth,...!n&&ug.hide},className:a}))}eP.propTypes={width:Re.oneOfType([Re.number,Re.string]).isRequired,height:Re.oneOfType([Re.number,Re.string]).isRequired,loading:Re.oneOfType([Re.element,Re.string]).isRequired,isEditorReady:Re.bool.isRequired,className:Re.string,wrapperProps:Re.object};var tP=rn.exports.memo(eP);function nP(t){rn.exports.useEffect(t,[])}function Ts(t,e,n=!0){const i=rn.exports.useRef(!0);rn.exports.useEffect(i.current||!n?()=>{i.current=!1}:t,e)}function Bu(){}function eh(t,e,n,i){return NB(t,i)||RB(t,e,n,i)}function NB(t,e){return t.editor.getModel(iP(t,e))}function RB(t,e,n,i){return t.editor.createModel(e,n,i&&iP(t,i))}function iP(t,e){return t.Uri.parse(e)}function OB(t){return t===void 0}function rP({original:t,modified:e,language:n,originalLanguage:i,modifiedLanguage:r,originalModelPath:a,modifiedModelPath:s,keepCurrentOriginalModel:l,keepCurrentModifiedModel:o,theme:u,loading:f,options:y,height:p,width:b,className:v,wrapperProps:m,beforeMount:V,onMount:F}){const[P,G]=rn.exports.useState(!1),[te,q]=rn.exports.useState(!0),U=rn.exports.useRef(null),D=rn.exports.useRef(null),M=rn.exports.useRef(null),T=rn.exports.useRef(F),N=rn.exports.useRef(V);nP(()=>{const ue=ZD.init();return ue.then(W=>(D.current=W)&&q(!1)).catch(W=>(W==null?void 0:W.type)!=="cancelation"&&console.error("Monaco initialization: error:",W)),()=>U.current?ce():ue.cancel()}),Ts(()=>{const ue=U.current.getModifiedEditor();ue.getOption(D.current.editor.EditorOption.readOnly)?ue.setValue(e):e!==ue.getValue()&&(ue.executeEdits("",[{range:ue.getModel().getFullModelRange(),text:e,forceMoveMarkers:!0}]),ue.pushUndoStop())},[e],P),Ts(()=>{U.current.getModel().original.setValue(t)},[t],P),Ts(()=>{const{original:ue,modified:W}=U.current.getModel();D.current.editor.setModelLanguage(ue,i||n),D.current.editor.setModelLanguage(W,r||n)},[n,i,r],P),Ts(()=>{D.current.editor.setTheme(u)},[u],P),Ts(()=>{U.current.updateOptions(y)},[y],P);const J=rn.exports.useCallback(()=>{N.current(D.current);const ue=eh(D.current,t,i||n,a),W=eh(D.current,e,r||n,s);U.current.setModel({original:ue,modified:W})},[n,e,r,t,i,a,s]),L=rn.exports.useCallback(()=>{U.current=D.current.editor.createDiffEditor(M.current,{automaticLayout:!0,...y}),J(),D.current.editor.setTheme(u),G(!0)},[y,u,J]);rn.exports.useEffect(()=>{P&&T.current(U.current,D.current)},[P]),rn.exports.useEffect(()=>{!te&&!P&&L()},[te,P,L]);function ce(){const ue=U.current.getModel();if(!l){var W;(W=ue.original)===null||W===void 0||W.dispose()}if(!o){var Y;(Y=ue.modified)===null||Y===void 0||Y.dispose()}U.current.dispose()}return mi(tP,{width:b,height:p,isEditorReady:P,loading:f,_ref:M,className:v,wrapperProps:m})}rP.propTypes={original:Re.string,modified:Re.string,language:Re.string,originalLanguage:Re.string,modifiedLanguage:Re.string,originalModelPath:Re.string,modifiedModelPath:Re.string,keepCurrentOriginalModel:Re.bool,keepCurrentModifiedModel:Re.bool,theme:Re.string,loading:Re.oneOfType([Re.element,Re.string]),options:Re.object,width:Re.oneOfType([Re.number,Re.string]),height:Re.oneOfType([Re.number,Re.string]),className:Re.string,wrapperProps:Re.object,beforeMount:Re.func,onMount:Re.func};rP.defaultProps={theme:"light",loading:"Loading...",options:{},keepCurrentOriginalModel:!1,keepCurrentModifiedModel:!1,width:"100%",height:"100%",wrapperProps:{},beforeMount:Bu,onMount:Bu};function xB(t){const e=rn.exports.useRef();return rn.exports.useEffect(()=>{e.current=t},[t]),e.current}const Bf=new Map;function Av({defaultValue:t,defaultLanguage:e,defaultPath:n,value:i,language:r,path:a,theme:s,line:l,loading:o,options:u,overrideServices:f,saveViewState:y,keepCurrentModel:p,width:b,height:v,className:m,wrapperProps:V,beforeMount:F,onMount:P,onChange:G,onValidate:te}){const[q,U]=rn.exports.useState(!1),[D,M]=rn.exports.useState(!0),T=rn.exports.useRef(null),N=rn.exports.useRef(null),J=rn.exports.useRef(null),L=rn.exports.useRef(P),ce=rn.exports.useRef(F),ue=rn.exports.useRef(null),W=rn.exports.useRef(i),Y=xB(a);nP(()=>{const le=ZD.init();return le.then(R=>(T.current=R)&&M(!1)).catch(R=>(R==null?void 0:R.type)!=="cancelation"&&console.error("Monaco initialization: error:",R)),()=>N.current?H():le.cancel()}),Ts(()=>{const le=eh(T.current,t||i,e||r,a);le!==N.current.getModel()&&(y&&Bf.set(Y,N.current.saveViewState()),N.current.setModel(le),y&&N.current.restoreViewState(Bf.get(a)))},[a],q),Ts(()=>{N.current.updateOptions(u)},[u],q),Ts(()=>{N.current.getOption(T.current.editor.EditorOption.readOnly)?N.current.setValue(i):i!==N.current.getValue()&&(N.current.executeEdits("",[{range:N.current.getModel().getFullModelRange(),text:i,forceMoveMarkers:!0}]),N.current.pushUndoStop())},[i],q),Ts(()=>{T.current.editor.setModelLanguage(N.current.getModel(),r)},[r],q),Ts(()=>{OB(l)||N.current.revealLine(l)},[l],q),Ts(()=>{T.current.editor.setTheme(s)},[s],q);const ee=rn.exports.useCallback(()=>{ce.current(T.current);const le=a||n,R=eh(T.current,i||t,e||r,le);N.current=T.current.editor.create(J.current,{model:R,automaticLayout:!0,...u},f),y&&N.current.restoreViewState(Bf.get(le)),T.current.editor.setTheme(s),U(!0)},[t,e,n,i,r,a,u,f,y,s]);rn.exports.useEffect(()=>{q&&L.current(N.current,T.current)},[q]),rn.exports.useEffect(()=>{!D&&!q&&ee()},[D,q,ee]),W.current=i,rn.exports.useEffect(()=>{if(q&&G){var le,R;(le=ue.current)===null||le===void 0||le.dispose(),ue.current=(R=N.current)===null||R===void 0?void 0:R.onDidChangeModelContent(ae=>{const re=N.current.getValue();W.current!==re&&G(re,ae)})}},[q,G]),rn.exports.useEffect(()=>{if(q){const le=T.current.editor.onDidChangeMarkers(R=>{var ae;const re=(ae=N.current.getModel())===null||ae===void 0?void 0:ae.uri;if(re&&R.find(k=>k.path===re.path)){const k=T.current.editor.getModelMarkers({resource:re});te==null||te(k)}});return()=>{le==null||le.dispose()}}},[q,te]);function H(){var le;if((le=ue.current)===null||le===void 0||le.dispose(),p)y&&Bf.set(a,N.current.saveViewState());else{var R;(R=N.current.getModel())===null||R===void 0||R.dispose()}N.current.dispose()}return mi(tP,{width:b,height:v,isEditorReady:q,loading:o,_ref:J,className:m,wrapperProps:V})}Av.propTypes={defaultValue:Re.string,defaultPath:Re.string,defaultLanguage:Re.string,value:Re.string,language:Re.string,path:Re.string,theme:Re.string,line:Re.number,loading:Re.oneOfType([Re.element,Re.string]),options:Re.object,overrideServices:Re.object,saveViewState:Re.bool,keepCurrentModel:Re.bool,width:Re.oneOfType([Re.number,Re.string]),height:Re.oneOfType([Re.number,Re.string]),className:Re.string,wrapperProps:Re.object,beforeMount:Re.func,onMount:Re.func,onChange:Re.func,onValidate:Re.func};Av.defaultProps={theme:"light",loading:"Loading...",options:{},overrideServices:{},saveViewState:!0,keepCurrentModel:!1,width:"100%",height:"100%",wrapperProps:{},beforeMount:Bu,onMount:Bu,onValidate:Bu};var LB=rn.exports.memo(Av);function zB(){const{state:t,handleCodeChange:e,handleCursorChange:n}=_m.useContainer(),i=rn.exports.useRef(null);function r(a){i.current=a,a.onMouseDown(s=>{if(!s.target.range)return;const l=a.getModel();if(!l)return;const o=a.getPosition();if(o!=null){const u=l.getOffsetAt(o);n(u)}})}return mi(LB,{height:"90vh",value:t.code,onChange:a=>{e(a||"")},defaultLanguage:"python",options:{minimap:{enabled:!1}},onMount:r})}function ci(){return ci=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ci.apply(this,arguments)}function UB(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function Sm(t,e){if(t==null)return{};var n=UB(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,i)||(n[i]=t[i]))}return n}function Mv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OI(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Nv(t,e,n){return e&&OI(t.prototype,e),n&&OI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function RT(t,e){return RT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},RT(t,e)}function Rv(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RT(t,e)}function xc(t){return xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xc(t)}function Ov(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xv(t,e){if(e&&(xc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ov(t)}function po(t){return po=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},po(t)}function ss(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VB(t){if(Array.isArray(t))return t}function BB(t,e){var n=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i=[],r=!0,a=!1,s,l;try{for(n=n.call(t);!(r=(s=n.next()).done)&&(i.push(s.value),!(e&&i.length===e));r=!0);}catch(o){a=!0,l=o}finally{try{!r&&n.return!=null&&n.return()}finally{if(a)throw l}}return i}}function OT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function sP(t,e){if(!!t){if(typeof t=="string")return OT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OT(t,e)}}function WB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lv(t,e){return VB(t)||BB(t,e)||sP(t,e)||WB()}function $B(t){var e=Object.prototype.toString.call(t).slice(8,-1);return e==="Object"&&typeof t[Symbol.iterator]=="function"?"Iterable":e==="Custom"&&t.constructor!==Object&&t instanceof Object?"Object":e}function jB(t){if(Array.isArray(t))return OT(t)}function qB(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function GB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Va(t){return jB(t)||qB(t)||sP(t)||GB()}var zv=function(e){var n=e.styling,i=e.arrowStyle,r=e.expanded,a=e.nodeType,s=e.onClick;return Ut.createElement("div",ci({},n("arrowContainer",i),{onClick:s}),Ut.createElement("div",n(["arrow","arrowSign"],a,r,i),"\u25B6",i==="double"&&Ut.createElement("div",n(["arrowSign","arrowSignInner"]),"\u25B6")))};zv.propTypes={styling:Re.func.isRequired,arrowStyle:Re.oneOf(["single","double"]),expanded:Re.bool.isRequired,nodeType:Re.string.isRequired,onClick:Re.func.isRequired};zv.defaultProps={arrowStyle:"single"};var aP=zv;function KB(t,e){var n=typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=HB(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,s=!1,l;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return a=u.done,u},e:function(u){s=!0,l=u},f:function(){try{!a&&n.return!=null&&n.return()}finally{if(s)throw l}}}}function HB(t,e){if(!!t){if(typeof t=="string")return xI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xI(t,e)}}function xI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function YB(t,e){return t==="Object"?Object.keys(e).length:t==="Array"?e.length:1/0}function QB(t){return typeof t.set=="function"}function JB(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1/0,a;if(t==="Object"){var s=Object.getOwnPropertyNames(e);n&&s.sort(n===!0?void 0:n),s=s.slice(i,r+1),a={entries:s.map(function(v){return{key:v,value:e[v]}})}}else if(t==="Array")a={entries:e.slice(i,r+1).map(function(v,m){return{key:m+i,value:v}})};else{var l=0,o=[],u=!0,f=QB(e),y=KB(e),p;try{for(y.s();!(p=y.n()).done;){var b=p.value;if(l>r){u=!1;break}i<=l&&(f&&Array.isArray(b)?typeof b[0]=="string"||typeof b[0]=="number"?o.push({key:b[0],value:b[1]}):o.push({key:"[entry ".concat(l,"]"),value:{"[key]":b[0],"[value]":b[1]}}):o.push({key:l,value:b})),l++}}catch(v){y.e(v)}finally{y.f()}a={hasMore:!u,entries:o}}return a}function dg(t,e,n){for(var i=[];e-t>n*n;)n=n*n;for(var r=t;r<=e;r+=n)i.push({from:r,to:Math.min(e,r+n-1)});return i}function XB(t,e,n,i){var r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,s=JB.bind(null,t,e,n);if(!i)return s().entries;var l=a<1/0,o=Math.min(a-r,YB(t,e));if(t!=="Iterable"){if(o<=i||i<7)return s(r,a).entries}else if(o<=i&&!l)return s(r,a).entries;var u;if(t==="Iterable"){var f=s(r,r+i-1),y=f.hasMore,p=f.entries;u=y?[].concat(Va(p),Va(dg(r+i,r+2*i-1,i))):p}else u=l?dg(r,a,i):[].concat(Va(s(0,i-5).entries),Va(dg(i-4,o-5,i)),Va(s(o-4,o-1).entries));return u}function ZB(t){var e=eW();return function(){var i=po(t),r;if(e){var a=po(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return xv(this,r)}}function eW(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var oP=function(t){Rv(n,t);var e=ZB(n);function n(i){var r;return Mv(this,n),r=e.call(this,i),ss(Ov(r),"handleClick",function(){r.setState({expanded:!r.state.expanded})}),r.state={expanded:!1},r}return Nv(n,[{key:"render",value:function(){var r=this.props,a=r.styling,s=r.from,l=r.to,o=r.renderChildNodes,u=r.nodeType;return this.state.expanded?Ut.createElement("div",a("itemRange",this.state.expanded),o(this.props,s,l)):Ut.createElement("div",ci({},a("itemRange",this.state.expanded),{onClick:this.handleClick}),Ut.createElement(aP,{nodeType:u,styling:a,expanded:!1,onClick:this.handleClick,arrowStyle:"double"}),"".concat(s," ... ").concat(l))}}]),n}(Ut.Component);ss(oP,"propTypes",{styling:Re.func.isRequired,from:Re.number.isRequired,to:Re.number.isRequired,renderChildNodes:Re.func.isRequired,nodeType:Re.string.isRequired});function LI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function zI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LI(Object(n),!0).forEach(function(i){ss(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function tW(t){var e=nW();return function(){var i=po(t),r;if(e){var a=po(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return xv(this,r)}}function nW(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function iW(t){return t.to!==void 0}function lP(t,e,n){var i=t.nodeType,r=t.data,a=t.collectionLimit,s=t.circularCache,l=t.keyPath,o=t.postprocessValue,u=t.sortObjectKeys,f=[];return XB(i,r,u,a,e,n).forEach(function(y){if(iW(y))f.push(Ut.createElement(oP,ci({},t,{key:"ItemRange--".concat(y.from,"-").concat(y.to),from:y.from,to:y.to,renderChildNodes:lP})));else{var p=y.key,b=y.value,v=s.indexOf(b)!==-1;f.push(Ut.createElement(pP,ci({},t,{postprocessValue:o,collectionLimit:a,key:"Node--".concat(p),keyPath:[p].concat(Va(l)),value:o(b),circularCache:[].concat(Va(s),[b]),isCircular:v,hideRoot:!1})))}}),f}function fg(t){var e=t.isCircular?!1:t.shouldExpandNode(t.keyPath,t.data,t.level);return{expanded:e}}var Vd=function(t){Rv(n,t);var e=tW(n);function n(i){var r;return Mv(this,n),r=e.call(this,i),ss(Ov(r),"handleClick",function(){r.props.expandable&&r.setState({expanded:!r.state.expanded})}),r.state=fg(i),r}return Nv(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(r){var a=fg(r);fg(this.props).expanded!==a.expanded&&this.setState(a)}},{key:"shouldComponentUpdate",value:function(r,a){var s=this;return!!Object.keys(r).find(function(l){return l!=="circularCache"&&(l==="keyPath"?r[l].join("/")!==s.props[l].join("/"):r[l]!==s.props[l])})||a.expanded!==this.state.expanded}},{key:"render",value:function(){var r=this.props,a=r.getItemString,s=r.nodeTypeIndicator,l=r.nodeType,o=r.data,u=r.hideRoot,f=r.createItemString,y=r.styling,p=r.collectionLimit,b=r.keyPath,v=r.labelRenderer,m=r.expandable,V=this.state.expanded,F=V||u&&this.props.level===0?lP(zI(zI({},this.props),{},{level:this.props.level+1})):null,P=Ut.createElement("span",y("nestedNodeItemType",V),s),G=a(l,o,P,f(o,p),b),te=[b,l,V,m];return u?Ut.createElement("li",y.apply(void 0,["rootNode"].concat(te)),Ut.createElement("ul",y.apply(void 0,["rootNodeChildren"].concat(te)),F)):Ut.createElement("li",y.apply(void 0,["nestedNode"].concat(te)),m&&Ut.createElement(aP,{styling:y,nodeType:l,expanded:V,onClick:this.handleClick}),Ut.createElement("label",ci({},y.apply(void 0,[["label","nestedNodeLabel"]].concat(te)),{onClick:this.handleClick}),v.apply(void 0,te)),Ut.createElement("span",ci({},y.apply(void 0,["nestedNodeItemString"].concat(te)),{onClick:this.handleClick}),G),Ut.createElement("ul",y.apply(void 0,["nestedNodeChildren"].concat(te)),F))}}]),n}(Ut.Component);ss(Vd,"propTypes",{getItemString:Re.func.isRequired,nodeTypeIndicator:Re.any,nodeType:Re.string.isRequired,data:Re.any,hideRoot:Re.bool.isRequired,createItemString:Re.func.isRequired,styling:Re.func.isRequired,collectionLimit:Re.number,keyPath:Re.arrayOf(Re.oneOfType([Re.string,Re.number])).isRequired,labelRenderer:Re.func.isRequired,shouldExpandNode:Re.func,level:Re.number.isRequired,sortObjectKeys:Re.oneOfType([Re.func,Re.bool]),isCircular:Re.bool,expandable:Re.bool});ss(Vd,"defaultProps",{data:[],circularCache:[],level:0,expandable:!0});var rW=["data"];function sW(t){var e=Object.getOwnPropertyNames(t).length;return"".concat(e," ").concat(e!==1?"keys":"key")}var cP=function(e){var n=e.data,i=Sm(e,rW);return Ut.createElement(Vd,ci({},i,{data:n,nodeType:"Object",nodeTypeIndicator:i.nodeType==="Error"?"Error()":"{}",createItemString:sW,expandable:Object.getOwnPropertyNames(n).length>0}))};cP.propTypes={data:Re.object,nodeType:Re.string.isRequired};var aW=cP,oW=["data"];function lW(t){return"".concat(t.length," ").concat(t.length!==1?"items":"item")}var uP=function(e){var n=e.data,i=Sm(e,oW);return Ut.createElement(Vd,ci({},i,{data:n,nodeType:"Array",nodeTypeIndicator:"[]",createItemString:lW,expandable:n.length>0}))};uP.propTypes={data:Re.array};var cW=uP;function uW(t,e){var n=typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=dW(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,s=!1,l;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return a=u.done,u},e:function(u){s=!0,l=u},f:function(){try{!a&&n.return!=null&&n.return()}finally{if(s)throw l}}}}function dW(t,e){if(!!t){if(typeof t=="string")return UI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UI(t,e)}}function UI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function fW(t,e){var n=0,i=!1;if(Number.isSafeInteger(t.size))n=t.size;else{var r=uW(t),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;if(e&&n+1>e){i=!0;break}n+=1}}catch(l){r.e(l)}finally{r.f()}}return"".concat(i?">":"").concat(n," ").concat(n!==1?"entries":"entry")}var pW=function(e){var n=ci({},e);return Ut.createElement(Vd,ci({},n,{nodeType:"Iterable",nodeTypeIndicator:"()",createItemString:fW}))},hW=pW,dP=function(e){var n=e.nodeType,i=e.styling,r=e.labelRenderer,a=e.keyPath,s=e.valueRenderer,l=e.value,o=e.valueGetter,u=o===void 0?function(f){return f}:o;return Ut.createElement("li",i("value",n,a),Ut.createElement("label",i(["label","valueLabel"],n,a),r(a,n,!1,!1)),Ut.createElement("span",i("valueText",n,a),s.apply(void 0,[u(l),l].concat(Va(a)))))};dP.propTypes={nodeType:Re.string.isRequired,styling:Re.func.isRequired,labelRenderer:Re.func.isRequired,keyPath:Re.arrayOf(Re.oneOfType([Re.string,Re.number]).isRequired).isRequired,valueRenderer:Re.func.isRequired,value:Re.any,valueGetter:Re.func};var Ks=dP,mW=["getItemString","keyPath","labelRenderer","styling","value","valueRenderer","isCustomNode"];function VI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function pg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VI(Object(n),!0).forEach(function(i){ss(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var fP=function(e){var n=e.getItemString,i=e.keyPath,r=e.labelRenderer,a=e.styling,s=e.value,l=e.valueRenderer,o=e.isCustomNode,u=Sm(e,mW),f=o(s)?"Custom":$B(s),y={getItemString:n,key:i[0],keyPath:i,labelRenderer:r,nodeType:f,styling:a,value:s,valueRenderer:l},p=pg(pg(pg({},u),y),{},{data:s,isCustomNode:o});switch(f){case"Object":case"Error":case"WeakMap":case"WeakSet":return Ut.createElement(aW,p);case"Array":return Ut.createElement(cW,p);case"Iterable":case"Map":case"Set":return Ut.createElement(hW,p);case"String":return Ut.createElement(Ks,ci({},y,{valueGetter:function(v){return'"'.concat(v,'"')}}));case"Number":return Ut.createElement(Ks,y);case"Boolean":return Ut.createElement(Ks,ci({},y,{valueGetter:function(v){return v?"true":"false"}}));case"Date":return Ut.createElement(Ks,ci({},y,{valueGetter:function(v){return v.toISOString()}}));case"Null":return Ut.createElement(Ks,ci({},y,{valueGetter:function(){return"null"}}));case"Undefined":return Ut.createElement(Ks,ci({},y,{valueGetter:function(){return"undefined"}}));case"Function":case"Symbol":return Ut.createElement(Ks,ci({},y,{valueGetter:function(v){return v.toString()}}));case"Custom":return Ut.createElement(Ks,y);default:return Ut.createElement(Ks,ci({},y,{valueGetter:function(){return"<".concat(f,">")}}))}};fP.propTypes={getItemString:Re.func.isRequired,keyPath:Re.arrayOf(Re.oneOfType([Re.string,Re.number]).isRequired).isRequired,labelRenderer:Re.func.isRequired,styling:Re.func.isRequired,value:Re.any,valueRenderer:Re.func.isRequired,isCustomNode:Re.func.isRequired};var pP=fP,yW={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"},gW={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"},TW={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"},_W={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"},vW={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"},bW={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"},SW={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"},IW={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"},CW={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"},wW={scheme:"brewer",author:"timoth\xE9e poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"},EW={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"},FW={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"},kW={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"},DW={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"},hP={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"},PW={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"},AW={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"},MW={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"},NW={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"},RW={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"},OW={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"},xW={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"},LW={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"},zW={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"},UW={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"},VW={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"},BW={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},WW={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"},$W={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"},jW={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"},qW={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"},GW={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"},KW={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"},HW={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"},YW={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"},QW={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"},JW={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"},XW=Object.freeze(Object.defineProperty({__proto__:null,threezerotwofour:yW,apathy:gW,ashes:TW,atelierDune:_W,atelierForest:vW,atelierHeath:bW,atelierLakeside:SW,atelierSeaside:IW,bespin:CW,brewer:wW,bright:EW,chalk:FW,codeschool:kW,colors:DW,default:hP,eighties:PW,embers:AW,flat:MW,google:NW,grayscale:RW,greenscreen:OW,harmonic:xW,hopscotch:LW,isotope:zW,marrakesh:UW,mocha:VW,monokai:BW,ocean:WW,paraiso:$W,pop:jW,railscasts:qW,shapeshifter:GW,solarized:KW,summerfruit:HW,tomorrow:YW,tube:QW,twilight:JW},Symbol.toStringTag,{value:"Module"})),mP={exports:{}},ZW={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},yP={exports:{}},e$=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")},t$=e$,n$=Array.prototype.concat,i$=Array.prototype.slice,BI=yP.exports=function(e){for(var n=[],i=0,r=e.length;i<r;i++){var a=e[i];t$(a)?n=n$.call(n,i$.call(a)):n.push(a)}return n};BI.wrap=function(t){return function(){return t(BI(arguments))}};var Wu=ZW,Bd=yP.exports,gP=Object.hasOwnProperty,TP=Object.create(null);for(var hg in Wu)gP.call(Wu,hg)&&(TP[Wu[hg]]=hg);var Ar=mP.exports={to:{},get:{}};Ar.get=function(t){var e=t.substring(0,3).toLowerCase(),n,i;switch(e){case"hsl":n=Ar.get.hsl(t),i="hsl";break;case"hwb":n=Ar.get.hwb(t),i="hwb";break;default:n=Ar.get.rgb(t),i="rgb";break}return n?{model:i,value:n}:null};Ar.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,n=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,i=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,r=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,a=/^(\w+)$/,s=[0,0,0,1],l,o,u;if(l=t.match(n)){for(u=l[2],l=l[1],o=0;o<3;o++){var f=o*2;s[o]=parseInt(l.slice(f,f+2),16)}u&&(s[3]=parseInt(u,16)/255)}else if(l=t.match(e)){for(l=l[1],u=l[3],o=0;o<3;o++)s[o]=parseInt(l[o]+l[o],16);u&&(s[3]=parseInt(u+u,16)/255)}else if(l=t.match(i)){for(o=0;o<3;o++)s[o]=parseInt(l[o+1],0);l[4]&&(l[5]?s[3]=parseFloat(l[4])*.01:s[3]=parseFloat(l[4]))}else if(l=t.match(r)){for(o=0;o<3;o++)s[o]=Math.round(parseFloat(l[o+1])*2.55);l[4]&&(l[5]?s[3]=parseFloat(l[4])*.01:s[3]=parseFloat(l[4]))}else return(l=t.match(a))?l[1]==="transparent"?[0,0,0,0]:gP.call(Wu,l[1])?(s=Wu[l[1]],s[3]=1,s):null:null;for(o=0;o<3;o++)s[o]=ro(s[o],0,255);return s[3]=ro(s[3],0,1),s};Ar.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){var i=parseFloat(n[4]),r=(parseFloat(n[1])%360+360)%360,a=ro(parseFloat(n[2]),0,100),s=ro(parseFloat(n[3]),0,100),l=ro(isNaN(i)?1:i,0,1);return[r,a,s,l]}return null};Ar.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){var i=parseFloat(n[4]),r=(parseFloat(n[1])%360+360)%360,a=ro(parseFloat(n[2]),0,100),s=ro(parseFloat(n[3]),0,100),l=ro(isNaN(i)?1:i,0,1);return[r,a,s,l]}return null};Ar.to.hex=function(){var t=Bd(arguments);return"#"+Wf(t[0])+Wf(t[1])+Wf(t[2])+(t[3]<1?Wf(Math.round(t[3]*255)):"")};Ar.to.rgb=function(){var t=Bd(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};Ar.to.rgb.percent=function(){var t=Bd(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),i=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+n+"%, "+i+"%)":"rgba("+e+"%, "+n+"%, "+i+"%, "+t[3]+")"};Ar.to.hsl=function(){var t=Bd(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};Ar.to.hwb=function(){var t=Bd(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};Ar.to.keyword=function(t){return TP[t.slice(0,3)]};function ro(t,e,n){return Math.min(Math.max(e,t),n)}function Wf(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}var Uv={exports:{}},r$={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Yo=r$,_P={};for(var mg in Yo)Yo.hasOwnProperty(mg)&&(_P[Yo[mg]]=mg);var Lt=Uv.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var cr in Lt)if(Lt.hasOwnProperty(cr)){if(!("channels"in Lt[cr]))throw new Error("missing channels property: "+cr);if(!("labels"in Lt[cr]))throw new Error("missing channel labels property: "+cr);if(Lt[cr].labels.length!==Lt[cr].channels)throw new Error("channel and label counts mismatch: "+cr);var s$=Lt[cr].channels,a$=Lt[cr].labels;delete Lt[cr].channels,delete Lt[cr].labels,Object.defineProperty(Lt[cr],"channels",{value:s$}),Object.defineProperty(Lt[cr],"labels",{value:a$})}Lt.rgb.hsl=function(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255,r=Math.min(e,n,i),a=Math.max(e,n,i),s=a-r,l,o,u;return a===r?l=0:e===a?l=(n-i)/s:n===a?l=2+(i-e)/s:i===a&&(l=4+(e-n)/s),l=Math.min(l*60,360),l<0&&(l+=360),u=(r+a)/2,a===r?o=0:u<=.5?o=s/(a+r):o=s/(2-a-r),[l,o*100,u*100]};Lt.rgb.hsv=function(t){var e,n,i,r,a,s=t[0]/255,l=t[1]/255,o=t[2]/255,u=Math.max(s,l,o),f=u-Math.min(s,l,o),y=function(p){return(u-p)/6/f+1/2};return f===0?r=a=0:(a=f/u,e=y(s),n=y(l),i=y(o),s===u?r=i-n:l===u?r=1/3+e-i:o===u&&(r=2/3+n-e),r<0?r+=1:r>1&&(r-=1)),[r*360,a*100,u*100]};Lt.rgb.hwb=function(t){var e=t[0],n=t[1],i=t[2],r=Lt.rgb.hsl(t)[0],a=1/255*Math.min(e,Math.min(n,i));return i=1-1/255*Math.max(e,Math.max(n,i)),[r,a*100,i*100]};Lt.rgb.cmyk=function(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255,r,a,s,l;return l=Math.min(1-e,1-n,1-i),r=(1-e-l)/(1-l)||0,a=(1-n-l)/(1-l)||0,s=(1-i-l)/(1-l)||0,[r*100,a*100,s*100,l*100]};function o$(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)}Lt.rgb.keyword=function(t){var e=_P[t];if(e)return e;var n=1/0,i;for(var r in Yo)if(Yo.hasOwnProperty(r)){var a=Yo[r],s=o$(t,a);s<n&&(n=s,i=r)}return i};Lt.keyword.rgb=function(t){return Yo[t]};Lt.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var r=e*.4124+n*.3576+i*.1805,a=e*.2126+n*.7152+i*.0722,s=e*.0193+n*.1192+i*.9505;return[r*100,a*100,s*100]};Lt.rgb.lab=function(t){var e=Lt.rgb.xyz(t),n=e[0],i=e[1],r=e[2],a,s,l;return n/=95.047,i/=100,r/=108.883,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,a=116*i-16,s=500*(n-i),l=200*(i-r),[a,s,l]};Lt.hsl.rgb=function(t){var e=t[0]/360,n=t[1]/100,i=t[2]/100,r,a,s,l,o;if(n===0)return o=i*255,[o,o,o];i<.5?a=i*(1+n):a=i+n-i*n,r=2*i-a,l=[0,0,0];for(var u=0;u<3;u++)s=e+1/3*-(u-1),s<0&&s++,s>1&&s--,6*s<1?o=r+(a-r)*6*s:2*s<1?o=a:3*s<2?o=r+(a-r)*(2/3-s)*6:o=r,l[u]=o*255;return l};Lt.hsl.hsv=function(t){var e=t[0],n=t[1]/100,i=t[2]/100,r=n,a=Math.max(i,.01),s,l;return i*=2,n*=i<=1?i:2-i,r*=a<=1?a:2-a,l=(i+n)/2,s=i===0?2*r/(a+r):2*n/(i+n),[e,s*100,l*100]};Lt.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,i=t[2]/100,r=Math.floor(e)%6,a=e-Math.floor(e),s=255*i*(1-n),l=255*i*(1-n*a),o=255*i*(1-n*(1-a));switch(i*=255,r){case 0:return[i,o,s];case 1:return[l,i,s];case 2:return[s,i,o];case 3:return[s,l,i];case 4:return[o,s,i];case 5:return[i,s,l]}};Lt.hsv.hsl=function(t){var e=t[0],n=t[1]/100,i=t[2]/100,r=Math.max(i,.01),a,s,l;return l=(2-n)*i,a=(2-n)*r,s=n*r,s/=a<=1?a:2-a,s=s||0,l/=2,[e,s*100,l*100]};Lt.hwb.rgb=function(t){var e=t[0]/360,n=t[1]/100,i=t[2]/100,r=n+i,a,s,l,o;r>1&&(n/=r,i/=r),a=Math.floor(6*e),s=1-i,l=6*e-a,(a&1)!==0&&(l=1-l),o=n+l*(s-n);var u,f,y;switch(a){default:case 6:case 0:u=s,f=o,y=n;break;case 1:u=o,f=s,y=n;break;case 2:u=n,f=s,y=o;break;case 3:u=n,f=o,y=s;break;case 4:u=o,f=n,y=s;break;case 5:u=s,f=n,y=o;break}return[u*255,f*255,y*255]};Lt.cmyk.rgb=function(t){var e=t[0]/100,n=t[1]/100,i=t[2]/100,r=t[3]/100,a,s,l;return a=1-Math.min(1,e*(1-r)+r),s=1-Math.min(1,n*(1-r)+r),l=1-Math.min(1,i*(1-r)+r),[a*255,s*255,l*255]};Lt.xyz.rgb=function(t){var e=t[0]/100,n=t[1]/100,i=t[2]/100,r,a,s;return r=e*3.2406+n*-1.5372+i*-.4986,a=e*-.9689+n*1.8758+i*.0415,s=e*.0557+n*-.204+i*1.057,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*12.92,r=Math.min(Math.max(0,r),1),a=Math.min(Math.max(0,a),1),s=Math.min(Math.max(0,s),1),[r*255,a*255,s*255]};Lt.xyz.lab=function(t){var e=t[0],n=t[1],i=t[2],r,a,s;return e/=95.047,n/=100,i/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,r=116*n-16,a=500*(e-n),s=200*(n-i),[r,a,s]};Lt.lab.xyz=function(t){var e=t[0],n=t[1],i=t[2],r,a,s;a=(e+16)/116,r=n/500+a,s=a-i/200;var l=Math.pow(a,3),o=Math.pow(r,3),u=Math.pow(s,3);return a=l>.008856?l:(a-16/116)/7.787,r=o>.008856?o:(r-16/116)/7.787,s=u>.008856?u:(s-16/116)/7.787,r*=95.047,a*=100,s*=108.883,[r,a,s]};Lt.lab.lch=function(t){var e=t[0],n=t[1],i=t[2],r,a,s;return r=Math.atan2(i,n),a=r*360/2/Math.PI,a<0&&(a+=360),s=Math.sqrt(n*n+i*i),[e,s,a]};Lt.lch.lab=function(t){var e=t[0],n=t[1],i=t[2],r,a,s;return s=i/360*2*Math.PI,r=n*Math.cos(s),a=n*Math.sin(s),[e,r,a]};Lt.rgb.ansi16=function(t){var e=t[0],n=t[1],i=t[2],r=1 in arguments?arguments[1]:Lt.rgb.hsv(t)[2];if(r=Math.round(r/50),r===0)return 30;var a=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(e/255));return r===2&&(a+=60),a};Lt.hsv.ansi16=function(t){return Lt.rgb.ansi16(Lt.hsv.rgb(t),t[2])};Lt.rgb.ansi256=function(t){var e=t[0],n=t[1],i=t[2];if(e===n&&n===i)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;var r=16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(i/255*5);return r};Lt.ansi16.rgb=function(t){var e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];var n=(~~(t>50)+1)*.5,i=(e&1)*n*255,r=(e>>1&1)*n*255,a=(e>>2&1)*n*255;return[i,r,a]};Lt.ansi256.rgb=function(t){if(t>=232){var e=(t-232)*10+8;return[e,e,e]}t-=16;var n,i=Math.floor(t/36)/5*255,r=Math.floor((n=t%36)/6)/5*255,a=n%6/5*255;return[i,r,a]};Lt.rgb.hex=function(t){var e=((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255),n=e.toString(16).toUpperCase();return"000000".substring(n.length)+n};Lt.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var n=e[0];e[0].length===3&&(n=n.split("").map(function(l){return l+l}).join(""));var i=parseInt(n,16),r=i>>16&255,a=i>>8&255,s=i&255;return[r,a,s]};Lt.rgb.hcg=function(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255,r=Math.max(Math.max(e,n),i),a=Math.min(Math.min(e,n),i),s=r-a,l,o;return s<1?l=a/(1-s):l=0,s<=0?o=0:r===e?o=(n-i)/s%6:r===n?o=2+(i-e)/s:o=4+(e-n)/s+4,o/=6,o%=1,[o*360,s*100,l*100]};Lt.hsl.hcg=function(t){var e=t[1]/100,n=t[2]/100,i=1,r=0;return n<.5?i=2*e*n:i=2*e*(1-n),i<1&&(r=(n-.5*i)/(1-i)),[t[0],i*100,r*100]};Lt.hsv.hcg=function(t){var e=t[1]/100,n=t[2]/100,i=e*n,r=0;return i<1&&(r=(n-i)/(1-i)),[t[0],i*100,r*100]};Lt.hcg.rgb=function(t){var e=t[0]/360,n=t[1]/100,i=t[2]/100;if(n===0)return[i*255,i*255,i*255];var r=[0,0,0],a=e%1*6,s=a%1,l=1-s,o=0;switch(Math.floor(a)){case 0:r[0]=1,r[1]=s,r[2]=0;break;case 1:r[0]=l,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=s;break;case 3:r[0]=0,r[1]=l,r[2]=1;break;case 4:r[0]=s,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=l}return o=(1-n)*i,[(n*r[0]+o)*255,(n*r[1]+o)*255,(n*r[2]+o)*255]};Lt.hcg.hsv=function(t){var e=t[1]/100,n=t[2]/100,i=e+n*(1-e),r=0;return i>0&&(r=e/i),[t[0],r*100,i*100]};Lt.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100,i=n*(1-e)+.5*e,r=0;return i>0&&i<.5?r=e/(2*i):i>=.5&&i<1&&(r=e/(2*(1-i))),[t[0],r*100,i*100]};Lt.hcg.hwb=function(t){var e=t[1]/100,n=t[2]/100,i=e+n*(1-e);return[t[0],(i-e)*100,(1-i)*100]};Lt.hwb.hcg=function(t){var e=t[1]/100,n=t[2]/100,i=1-n,r=i-e,a=0;return r<1&&(a=(i-r)/(1-r)),[t[0],r*100,a*100]};Lt.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};Lt.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};Lt.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};Lt.gray.hsl=Lt.gray.hsv=function(t){return[0,0,t[0]]};Lt.gray.hwb=function(t){return[0,100,t[0]]};Lt.gray.cmyk=function(t){return[0,0,0,t[0]]};Lt.gray.lab=function(t){return[t[0],0,0]};Lt.gray.hex=function(t){var e=Math.round(t[0]/100*255)&255,n=(e<<16)+(e<<8)+e,i=n.toString(16).toUpperCase();return"000000".substring(i.length)+i};Lt.rgb.gray=function(t){var e=(t[0]+t[1]+t[2])/3;return[e/255*100]};var th=Uv.exports;function l$(){for(var t={},e=Object.keys(th),n=e.length,i=0;i<n;i++)t[e[i]]={distance:-1,parent:null};return t}function c$(t){var e=l$(),n=[t];for(e[t].distance=0;n.length;)for(var i=n.pop(),r=Object.keys(th[i]),a=r.length,s=0;s<a;s++){var l=r[s],o=e[l];o.distance===-1&&(o.distance=e[i].distance+1,o.parent=i,n.unshift(l))}return e}function u$(t,e){return function(n){return e(t(n))}}function d$(t,e){for(var n=[e[t].parent,t],i=th[e[t].parent][t],r=e[t].parent;e[r].parent;)n.unshift(e[r].parent),i=u$(th[e[r].parent][r],i),r=e[r].parent;return i.conversion=n,i}var f$=function(t){for(var e=c$(t),n={},i=Object.keys(e),r=i.length,a=0;a<r;a++){var s=i[a],l=e[s];l.parent!==null&&(n[s]=d$(s,e))}return n},xT=Uv.exports,p$=f$,Bl={},h$=Object.keys(xT);function m$(t){var e=function(n){return n==null?n:(arguments.length>1&&(n=Array.prototype.slice.call(arguments)),t(n))};return"conversion"in t&&(e.conversion=t.conversion),e}function y$(t){var e=function(n){if(n==null)return n;arguments.length>1&&(n=Array.prototype.slice.call(arguments));var i=t(n);if(typeof i=="object")for(var r=i.length,a=0;a<r;a++)i[a]=Math.round(i[a]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}h$.forEach(function(t){Bl[t]={},Object.defineProperty(Bl[t],"channels",{value:xT[t].channels}),Object.defineProperty(Bl[t],"labels",{value:xT[t].labels});var e=p$(t),n=Object.keys(e);n.forEach(function(i){var r=e[i];Bl[t][i]=y$(r),Bl[t][i].raw=m$(r)})});var g$=Bl,Eu=mP.exports,Dr=g$,Vv=[].slice,vP=["keyword","gray","hex"],LT={};Object.keys(Dr).forEach(function(t){LT[Vv.call(Dr[t].labels).sort().join("")]=t});var nh={};function Ai(t,e){if(!(this instanceof Ai))return new Ai(t,e);if(e&&e in vP&&(e=null),e&&!(e in Dr))throw new Error("Unknown model: "+e);var n,i;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof Ai)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if(typeof t=="string"){var r=Eu.get(t);if(r===null)throw new Error("Unable to parse color from string: "+t);this.model=r.model,i=Dr[this.model].channels,this.color=r.value.slice(0,i),this.valpha=typeof r.value[i]=="number"?r.value[i]:1}else if(t.length){this.model=e||"rgb",i=Dr[this.model].channels;var a=Vv.call(t,0,i);this.color=zT(a,i),this.valpha=typeof t[i]=="number"?t[i]:1}else if(typeof t=="number")t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;var s=Object.keys(t);"alpha"in t&&(s.splice(s.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);var l=s.sort().join("");if(!(l in LT))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=LT[l];var o=Dr[this.model].labels,u=[];for(n=0;n<o.length;n++)u.push(t[o[n]]);this.color=zT(u)}if(nh[this.model])for(i=Dr[this.model].channels,n=0;n<i;n++){var f=nh[this.model][n];f&&(this.color[n]=f(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Ai.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in Eu.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);var n=e.valpha===1?e.color:e.color.concat(this.valpha);return Eu.to[e.model](n)},percentString:function(t){var e=this.rgb().round(typeof t=="number"?t:1),n=e.valpha===1?e.color:e.color.concat(this.valpha);return Eu.to.rgb.percent(n)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=Dr[this.model].channels,n=Dr[this.model].labels,i=0;i<e;i++)t[n[i]]=this.color[i];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new Ai(this.color.map(_$(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new Ai(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:Jn("rgb",0,pi(255)),green:Jn("rgb",1,pi(255)),blue:Jn("rgb",2,pi(255)),hue:Jn(["hsl","hsv","hsl","hwb","hcg"],0,function(t){return(t%360+360)%360}),saturationl:Jn("hsl",1,pi(100)),lightness:Jn("hsl",2,pi(100)),saturationv:Jn("hsv",1,pi(100)),value:Jn("hsv",2,pi(100)),chroma:Jn("hcg",1,pi(100)),gray:Jn("hcg",2,pi(100)),white:Jn("hwb",1,pi(100)),wblack:Jn("hwb",2,pi(100)),cyan:Jn("cmyk",0,pi(100)),magenta:Jn("cmyk",1,pi(100)),yellow:Jn("cmyk",2,pi(100)),black:Jn("cmyk",3,pi(100)),x:Jn("xyz",0,pi(100)),y:Jn("xyz",1,pi(100)),z:Jn("xyz",2,pi(100)),l:Jn("lab",0,pi(100)),a:Jn("lab",1),b:Jn("lab",2),keyword:function(t){return arguments.length?new Ai(t):Dr[this.model].keyword(this.color)},hex:function(t){return arguments.length?new Ai(t):Eu.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity:function(){for(var t=this.rgb().color,e=[],n=0;n<t.length;n++){var i=t[n]/255;e[n]=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color,e=(t[0]*299+t[1]*587+t[2]*114)/1e3;return e<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return Ai.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),n=e.color[0];return n=(n+t)%360,n=n<0?360+n:n,e.color[0]=n,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var n=t.rgb(),i=this.rgb(),r=e===void 0?.5:e,a=2*r-1,s=n.alpha()-i.alpha(),l=((a*s===-1?a:(a+s)/(1+a*s))+1)/2,o=1-l;return Ai.rgb(l*n.red()+o*i.red(),l*n.green()+o*i.green(),l*n.blue()+o*i.blue(),n.alpha()*r+i.alpha()*(1-r))}};Object.keys(Dr).forEach(function(t){if(vP.indexOf(t)===-1){var e=Dr[t].channels;Ai.prototype[t]=function(){if(this.model===t)return new Ai(this);if(arguments.length)return new Ai(arguments,t);var n=typeof arguments[e]=="number"?e:this.valpha;return new Ai(v$(Dr[this.model][t].raw(this.color)).concat(n),t)},Ai[t]=function(n){return typeof n=="number"&&(n=zT(Vv.call(arguments),e)),new Ai(n,t)}}});function T$(t,e){return Number(t.toFixed(e))}function _$(t){return function(e){return T$(e,t)}}function Jn(t,e,n){return t=Array.isArray(t)?t:[t],t.forEach(function(i){(nh[i]||(nh[i]=[]))[e]=n}),t=t[0],function(i){var r;return arguments.length?(n&&(i=n(i)),r=this[t](),r.color[e]=i,r):(r=this[t]().color[e],n&&(r=n(r)),r)}}function pi(t){return function(e){return Math.max(0,Math.min(t,e))}}function v$(t){return Array.isArray(t)?t:[t]}function zT(t,e){for(var n=0;n<e;n++)typeof t[n]!="number"&&(t[n]=0);return t}var WI=Ai,b$="Expected a function",$I="__lodash_placeholder__",ul=1,Im=2,S$=4,Qo=8,$u=16,yc=32,bd=64,bP=128,I$=256,SP=512,jI=1/0,C$=9007199254740991,w$=17976931348623157e292,qI=0/0,E$=[["ary",bP],["bind",ul],["bindKey",Im],["curry",Qo],["curryRight",$u],["flip",SP],["partial",yc],["partialRight",bd],["rearg",I$]],F$="[object Function]",k$="[object GeneratorFunction]",D$="[object Symbol]",P$=/[\\^$.*+?()[\]{}|]/g,A$=/^\s+|\s+$/g,M$=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,N$=/\{\n\/\* \[wrapped with (.+)\] \*/,R$=/,? & /,O$=/^[-+]0x[0-9a-f]+$/i,x$=/^0b[01]+$/i,L$=/^\[object .+?Constructor\]$/,z$=/^0o[0-7]+$/i,U$=/^(?:0|[1-9]\d*)$/,V$=parseInt,B$=typeof Te=="object"&&Te&&Te.Object===Object&&Te,W$=typeof self=="object"&&self&&self.Object===Object&&self,Wd=B$||W$||Function("return this")();function IP(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function $$(t,e){for(var n=-1,i=t?t.length:0;++n<i&&e(t[n],n,t)!==!1;);return t}function j$(t,e){var n=t?t.length:0;return!!n&&G$(t,e,0)>-1}function q$(t,e,n,i){for(var r=t.length,a=n+(i?1:-1);i?a--:++a<r;)if(e(t[a],a,t))return a;return-1}function G$(t,e,n){if(e!==e)return q$(t,K$,n);for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function K$(t){return t!==t}function H$(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&i++;return i}function Y$(t,e){return t==null?void 0:t[e]}function Q$(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}function CP(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var s=t[n];(s===e||s===$I)&&(t[n]=$I,a[r++]=n)}return a}var J$=Function.prototype,wP=Object.prototype,yg=Wd["__core-js_shared__"],GI=function(){var t=/[^.]+$/.exec(yg&&yg.keys&&yg.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),EP=J$.toString,X$=wP.hasOwnProperty,FP=wP.toString,Z$=RegExp("^"+EP.call(X$).replace(P$,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ej=Object.create,ih=Math.max,tj=Math.min,KI=function(){var t=HI(Object,"defineProperty"),e=HI.name;return e&&e.length>2?t:void 0}();function nj(t){return Lc(t)?ej(t):{}}function ij(t){if(!Lc(t)||hj(t))return!1;var e=Tj(t)||Q$(t)?Z$:L$;return e.test(yj(t))}function rj(t,e,n,i){for(var r=-1,a=t.length,s=n.length,l=-1,o=e.length,u=ih(a-s,0),f=Array(o+u),y=!i;++l<o;)f[l]=e[l];for(;++r<s;)(y||r<a)&&(f[n[r]]=t[r]);for(;u--;)f[l++]=t[r++];return f}function sj(t,e,n,i){for(var r=-1,a=t.length,s=-1,l=n.length,o=-1,u=e.length,f=ih(a-l,0),y=Array(f+u),p=!i;++r<f;)y[r]=t[r];for(var b=r;++o<u;)y[b+o]=e[o];for(;++s<l;)(p||r<a)&&(y[b+n[s]]=t[r++]);return y}function aj(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}function oj(t,e,n){var i=e&ul,r=Sd(t);function a(){var s=this&&this!==Wd&&this instanceof a?r:t;return s.apply(i?n:this,arguments)}return a}function Sd(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=nj(t.prototype),i=t.apply(n,e);return Lc(i)?i:n}}function lj(t,e,n){var i=Sd(t);function r(){for(var a=arguments.length,s=Array(a),l=a,o=DP(r);l--;)s[l]=arguments[l];var u=a<3&&s[0]!==o&&s[a-1]!==o?[]:CP(s,o);if(a-=u.length,a<n)return kP(t,e,Bv,r.placeholder,void 0,s,u,void 0,void 0,n-a);var f=this&&this!==Wd&&this instanceof r?i:t;return IP(f,this,s)}return r}function Bv(t,e,n,i,r,a,s,l,o,u){var f=e&bP,y=e&ul,p=e&Im,b=e&(Qo|$u),v=e&SP,m=p?void 0:Sd(t);function V(){for(var F=arguments.length,P=Array(F),G=F;G--;)P[G]=arguments[G];if(b)var te=DP(V),q=H$(P,te);if(i&&(P=rj(P,i,r,b)),a&&(P=sj(P,a,s,b)),F-=q,b&&F<u){var U=CP(P,te);return kP(t,e,Bv,V.placeholder,n,P,U,l,o,u-F)}var D=y?n:this,M=p?D[t]:t;return F=P.length,l?P=mj(P,l):v&&F>1&&P.reverse(),f&&o<F&&(P.length=o),this&&this!==Wd&&this instanceof V&&(M=m||Sd(M)),M.apply(D,P)}return V}function cj(t,e,n,i){var r=e&ul,a=Sd(t);function s(){for(var l=-1,o=arguments.length,u=-1,f=i.length,y=Array(f+o),p=this&&this!==Wd&&this instanceof s?a:t;++u<f;)y[u]=i[u];for(;o--;)y[u++]=arguments[++l];return IP(p,r?n:this,y)}return s}function kP(t,e,n,i,r,a,s,l,o,u){var f=e&Qo,y=f?s:void 0,p=f?void 0:s,b=f?a:void 0,v=f?void 0:a;e|=f?yc:bd,e&=~(f?bd:yc),e&S$||(e&=~(ul|Im));var m=n(t,e,r,b,y,v,p,l,o,u);return m.placeholder=i,PP(m,t,e)}function uj(t,e,n,i,r,a,s,l){var o=e&Im;if(!o&&typeof t!="function")throw new TypeError(b$);var u=i?i.length:0;if(u||(e&=~(yc|bd),i=r=void 0),s=s===void 0?s:ih(YI(s),0),l=l===void 0?l:YI(l),u-=r?r.length:0,e&bd){var f=i,y=r;i=r=void 0}var p=[t,e,n,i,r,f,y,a,s,l];if(t=p[0],e=p[1],n=p[2],i=p[3],r=p[4],l=p[9]=p[9]==null?o?0:t.length:ih(p[9]-u,0),!l&&e&(Qo|$u)&&(e&=~(Qo|$u)),!e||e==ul)var b=oj(t,e,n);else e==Qo||e==$u?b=lj(t,e,l):(e==yc||e==(ul|yc))&&!r.length?b=cj(t,e,n,i):b=Bv.apply(void 0,p);return PP(b,t,e)}function DP(t){var e=t;return e.placeholder}function HI(t,e){var n=Y$(t,e);return ij(n)?n:void 0}function dj(t){var e=t.match(N$);return e?e[1].split(R$):[]}function fj(t,e){var n=e.length,i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(M$,`{
/* [wrapped with `+e+`] */
`)}function pj(t,e){return e=e==null?C$:e,!!e&&(typeof t=="number"||U$.test(t))&&t>-1&&t%1==0&&t<e}function hj(t){return!!GI&&GI in t}function mj(t,e){for(var n=t.length,i=tj(e.length,n),r=aj(t);i--;){var a=e[i];t[i]=pj(a,n)?r[a]:void 0}return t}var PP=KI?function(t,e,n){var i=e+"";return KI(t,"toString",{configurable:!0,enumerable:!1,value:Ij(fj(i,gj(dj(i),n)))})}:Cj;function yj(t){if(t!=null){try{return EP.call(t)}catch{}try{return t+""}catch{}}return""}function gj(t,e){return $$(E$,function(n){var i="_."+n[0];e&n[1]&&!j$(t,i)&&t.push(i)}),t.sort()}function Wv(t,e,n){e=n?void 0:e;var i=uj(t,Qo,void 0,void 0,void 0,void 0,void 0,e);return i.placeholder=Wv.placeholder,i}function Tj(t){var e=Lc(t)?FP.call(t):"";return e==F$||e==k$}function Lc(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function _j(t){return!!t&&typeof t=="object"}function vj(t){return typeof t=="symbol"||_j(t)&&FP.call(t)==D$}function bj(t){if(!t)return t===0?t:0;if(t=Sj(t),t===jI||t===-jI){var e=t<0?-1:1;return e*w$}return t===t?t:0}function YI(t){var e=bj(t),n=e%1;return e===e?n?e-n:e:0}function Sj(t){if(typeof t=="number")return t;if(vj(t))return qI;if(Lc(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Lc(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(A$,"");var n=x$.test(t);return n||z$.test(t)?V$(t.slice(2),n?2:8):O$.test(t)?qI:+t}function Ij(t){return function(){return t}}function Cj(t){return t}Wv.placeholder={};var QI=Wv;function wj(t){var e=t[0],n=t[1],i=t[2],r,a,s;return r=e*1+n*0+i*1.13983,a=e*1+n*-.39465+i*-.5806,s=e*1+n*2.02311+i*0,r=Math.min(Math.max(0,r),1),a=Math.min(Math.max(0,a),1),s=Math.min(Math.max(0,s),1),[r*255,a*255,s*255]}function Ej(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255,r=e*.299+n*.587+i*.114,a=e*-.14713+n*-.28886+i*.436,s=e*.615+n*-.51499+i*-.10001;return[r,a,s]}function JI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function mr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JI(Object(n),!0).forEach(function(i){ss(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var AP=hP,XI=Object.keys(AP),Fj=function(e){return e<.25?1:e<.5?.9-e:1.1-e},kj=function(e){var n=WI(e),i=Ej(n.array()),r=Lv(i,3),a=r[0],s=r[1],l=r[2],o=[Fj(a),s,l],u=wj(o);return WI.rgb(u).hex()},Ll=function(e){return function(n){return{className:[n.className,e.className].filter(Boolean).join(" "),style:mr(mr({},n.style||{}),e.style||{})}}},Dj=function(e,n){if(e===void 0)return n;if(n===void 0)return e;var i=xc(e),r=xc(n);switch(i){case"string":switch(r){case"string":return[n,e].filter(Boolean).join(" ");case"object":return Ll({className:e,style:n});case"function":return function(a){for(var s=arguments.length,l=new Array(s>1?s-1:0),o=1;o<s;o++)l[o-1]=arguments[o];return Ll({className:e})(n.apply(void 0,[a].concat(l)))}}break;case"object":switch(r){case"string":return Ll({className:n,style:e});case"object":return mr(mr({},n),e);case"function":return function(a){for(var s=arguments.length,l=new Array(s>1?s-1:0),o=1;o<s;o++)l[o-1]=arguments[o];return Ll({style:e})(n.apply(void 0,[a].concat(l)))}}break;case"function":switch(r){case"string":return function(a){for(var s=arguments.length,l=new Array(s>1?s-1:0),o=1;o<s;o++)l[o-1]=arguments[o];return e.apply(void 0,[Ll(a)({className:n})].concat(l))};case"object":return function(a){for(var s=arguments.length,l=new Array(s>1?s-1:0),o=1;o<s;o++)l[o-1]=arguments[o];return e.apply(void 0,[Ll(a)({style:n})].concat(l))};case"function":return function(a){for(var s=arguments.length,l=new Array(s>1?s-1:0),o=1;o<s;o++)l[o-1]=arguments[o];return e.apply(void 0,[n.apply(void 0,[a].concat(l))].concat(l))}}}},Pj=function(e,n){var i=Object.keys(n);for(var r in e)i.indexOf(r)===-1&&i.push(r);return i.reduce(function(a,s){return a[s]=Dj(e[s],n[s]),a},{})},Aj=function(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];if(n===null)return e;Array.isArray(n)||(n=[n]);var s=n.map(function(o){return e[o]}).filter(Boolean),l=s.reduce(function(o,u){return typeof u=="string"?o.className=[o.className,u].filter(Boolean).join(" "):xc(u)==="object"?o.style=mr(mr({},o.style),u):typeof u=="function"&&(o=mr(mr({},o),u.apply(void 0,[o].concat(r)))),o},{className:"",style:{}});return l.className||delete l.className,Object.keys(l.style).length===0&&delete l.style,l},UT=function(e){return Object.keys(e).reduce(function(n,i){return n[i]=/^base/.test(i)?kj(e[i]):i==="scheme"?e[i]+":inverted":e[i],n},{})},Mj=QI(function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=e.defaultBase16,r=i===void 0?AP:i,a=e.base16Themes,s=a===void 0?null:a,l=Nj(n,s);l&&(n=mr(mr({},l),n));for(var o=XI.reduce(function(m,V){return m[V]=n[V]||r[V],m},{}),u=Object.keys(n).reduce(function(m,V){return XI.indexOf(V)===-1&&(m[V]=n[V]),m},{}),f=t(o),y=Pj(u,f),p=arguments.length,b=new Array(p>3?p-3:0),v=3;v<p;v++)b[v-3]=arguments[v];return QI(Aj,2).apply(void 0,[y].concat(b))},3),MP=function(e){return!!e.extend},Nj=function(e,n){if(e&&MP(e)&&e.extend&&(e=e.extend),typeof e=="string"){var i=e.split(":"),r=Lv(i,2),a=r[0],s=r[1];n?e=n[a]:e=XW[a],s==="inverted"&&(e=UT(e))}return e&&Object.prototype.hasOwnProperty.call(e,"base00")?e:void 0},Rj=function(e){return typeof e=="string"?"".concat(e,":inverted"):e&&MP(e)&&e.extend?typeof e.extend=="string"?mr(mr({},e),{},{extend:"".concat(e.extend,":inverted")}):mr(mr({},e),{},{extend:UT(e.extend)}):e&&UT(e)},Oj={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"};function ZI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Vi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZI(Object(n),!0).forEach(function(i){ss(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var xj=function(e){return{BACKGROUND_COLOR:e.base00,TEXT_COLOR:e.base07,STRING_COLOR:e.base0B,DATE_COLOR:e.base0B,NUMBER_COLOR:e.base09,BOOLEAN_COLOR:e.base09,NULL_COLOR:e.base08,UNDEFINED_COLOR:e.base08,FUNCTION_COLOR:e.base08,SYMBOL_COLOR:e.base08,LABEL_COLOR:e.base0D,ARROW_COLOR:e.base0D,ITEM_STRING_COLOR:e.base0B,ITEM_STRING_EXPANDED_COLOR:e.base03}},Lj=function(e){return{String:e.STRING_COLOR,Date:e.DATE_COLOR,Number:e.NUMBER_COLOR,Boolean:e.BOOLEAN_COLOR,Null:e.NULL_COLOR,Undefined:e.UNDEFINED_COLOR,Function:e.FUNCTION_COLOR,Symbol:e.SYMBOL_COLOR}},zj=function(e){var n=xj(e);return{tree:{border:0,padding:0,marginTop:"0.5em",marginBottom:"0.5em",marginLeft:"0.125em",marginRight:0,listStyle:"none",MozUserSelect:"none",WebkitUserSelect:"none",backgroundColor:n.BACKGROUND_COLOR},value:function(r,a,s){var l=r.style;return{style:Vi(Vi({},l),{},{paddingTop:"0.25em",paddingRight:0,marginLeft:"0.875em",WebkitUserSelect:"text",MozUserSelect:"text",wordWrap:"break-word",paddingLeft:s.length>1?"2.125em":"1.25em",textIndent:"-0.5em",wordBreak:"break-all"})}},label:{display:"inline-block",color:n.LABEL_COLOR},valueLabel:{margin:"0 0.5em 0 0"},valueText:function(r,a){var s=r.style;return{style:Vi(Vi({},s),{},{color:Lj(n)[a]})}},itemRange:function(r,a){return{style:{paddingTop:a?0:"0.25em",cursor:"pointer",color:n.LABEL_COLOR}}},arrow:function(r,a,s){var l=r.style;return{style:Vi(Vi({},l),{},{marginLeft:0,transition:"150ms",WebkitTransition:"150ms",MozTransition:"150ms",WebkitTransform:s?"rotateZ(90deg)":"rotateZ(0deg)",MozTransform:s?"rotateZ(90deg)":"rotateZ(0deg)",transform:s?"rotateZ(90deg)":"rotateZ(0deg)",transformOrigin:"45% 50%",WebkitTransformOrigin:"45% 50%",MozTransformOrigin:"45% 50%",position:"relative",lineHeight:"1.1em",fontSize:"0.75em"})}},arrowContainer:function(r,a){var s=r.style;return{style:Vi(Vi({},s),{},{display:"inline-block",paddingRight:"0.5em",paddingLeft:a==="double"?"1em":0,cursor:"pointer"})}},arrowSign:{color:n.ARROW_COLOR},arrowSignInner:{position:"absolute",top:0,left:"-0.4em"},nestedNode:function(r,a,s,l,o){var u=r.style;return{style:Vi(Vi({},u),{},{position:"relative",paddingTop:"0.25em",marginLeft:a.length>1?"0.875em":0,paddingLeft:o?0:"1.125em"})}},rootNode:{padding:0,margin:0},nestedNodeLabel:function(r,a,s,l,o){var u=r.style;return{style:Vi(Vi({},u),{},{margin:0,padding:0,WebkitUserSelect:o?"inherit":"text",MozUserSelect:o?"inherit":"text",cursor:o?"pointer":"default"})}},nestedNodeItemString:function(r,a,s,l){var o=r.style;return{style:Vi(Vi({},o),{},{paddingLeft:"0.5em",cursor:"default",color:l?n.ITEM_STRING_EXPANDED_COLOR:n.ITEM_STRING_COLOR})}},nestedNodeItemType:{marginLeft:"0.3em",marginRight:"0.3em"},nestedNodeChildren:function(r,a,s){var l=r.style;return{style:Vi(Vi({},l),{},{padding:0,margin:0,listStyle:"none",display:s?"block":"none"})}},rootNodeChildren:{padding:0,margin:0,listStyle:"none"}}},Uj=Mj(zj,{defaultBase16:Oj}),Vj=Uj,Bj=["data","keyPath","postprocessValue","hideRoot","theme","invertTheme"];function Wj(t){var e=$j();return function(){var i=po(t),r;if(e){var a=po(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return xv(this,r)}}function $j(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function eC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function rp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eC(Object(n),!0).forEach(function(i){ss(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var tC=function(e){return e},jj=function(e,n,i){return i===0},qj=function(e,n,i,r){return Ut.createElement("span",null,i," ",r)},Gj=function(e){var n=Lv(e,1),i=n[0];return Ut.createElement("span",null,i,":")},Kj=function(){return!1};function Hj(t,e){var n={getArrowStyle:"arrow",getListStyle:"nestedNodeChildren",getItemStringStyle:"nestedNodeItemString",getLabelStyle:"label",getValueStyle:"valueText"},i=Object.keys(n).filter(function(r){return e[r]});return i.length>0&&(typeof t=="string"?t={extend:t}:t=rp({},t),i.forEach(function(r){console.error('Styling method "'.concat(r,'" is deprecated, use "theme" property instead')),t[n[r]]=function(a){for(var s=a.style,l=arguments.length,o=new Array(l>1?l-1:0),u=1;u<l;u++)o[u-1]=arguments[u];return{style:rp(rp({},s),e[r].apply(e,o))}}})),t}function nC(t){var e=Hj(t.theme,t);return t.invertTheme&&(e=Rj(e)),{styling:Vj(e)}}var rh=function(t){Rv(n,t);var e=Wj(n);function n(i){var r;return Mv(this,n),r=e.call(this,i),r.state=nC(i),r}return Nv(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(r){var a=this;["theme","invertTheme"].find(function(s){return r[s]!==a.props[s]})&&this.setState(nC(r))}},{key:"shouldComponentUpdate",value:function(r){var a=this;return!!Object.keys(r).find(function(s){return s==="keyPath"?r[s].join("/")!==a.props[s].join("/"):r[s]!==a.props[s]})}},{key:"render",value:function(){var r=this.props,a=r.data,s=r.keyPath,l=r.postprocessValue,o=r.hideRoot;r.theme,r.invertTheme;var u=Sm(r,Bj),f=this.state.styling;return Ut.createElement("ul",f("tree"),Ut.createElement(pP,ci({},rp({postprocessValue:l,hideRoot:o,styling:f},u),{keyPath:o?[]:s,value:l(a)})))}}]),n}(Ut.Component);ss(rh,"propTypes",{data:Re.any,hideRoot:Re.bool,theme:Re.oneOfType([Re.object,Re.string]),invertTheme:Re.bool,keyPath:Re.arrayOf(Re.oneOfType([Re.string,Re.number])),postprocessValue:Re.func,sortObjectKeys:Re.oneOfType([Re.func,Re.bool])});ss(rh,"defaultProps",{shouldExpandNode:jj,hideRoot:!1,keyPath:["root"],getItemString:qj,labelRenderer:Gj,valueRenderer:tC,postprocessValue:tC,isCustomNode:Kj,collectionLimit:50,invertTheme:!0});function Yj(){var r;const{state:t}=_m.useContainer(),e=t.selectedNode,i=ws.isExpressionNode(e)&&((r=t.program.evaluator)==null?void 0:r.getTypeOfExpression(e));return ip("div",{className:"verticalContainer",children:[mi("h2",{children:"Node"}),mi(rh,{data:t.selectedNode||"[None]",hideRoot:!0,valueRenderer:(a,s,...l)=>l[0]==="nodeType"?Xp[s]:a}),mi("h2",{children:"Type"}),mi(rh,{data:i||"[None]",hideRoot:!0,valueRenderer:(a,s,...l)=>{if(l[0]==="nodeType")return Xp[s];if(l[0]==="category")return $D[s];if(l[0]==="flags"&&typeof s=="number"){if(s===0)return"None";const u=s.toString(2).split("").map((f,y)=>f==="0"?"":jD[1<<y]).filter(Boolean).join("|");return s+"("+u+")"}return a},shouldExpandNode:(a,s,l)=>l===1&&a[0]==="type"})]})}function Qj(){return mi(_m.Provider,{children:mi("div",{className:"App",children:ip(lc,{split:"horizontal",defaultSize:50,allowResize:!1,children:[mi("header",{className:"AppHeader clearfix",children:mi("h2",{id:"title",children:"TEST"})}),ip(lc,{split:"vertical",minSize:50,defaultSize:"33%",children:[mi(zB,{}),ip(lc,{split:"vertical",minSize:50,defaultSize:"50%",children:[mi(j9,{}),mi(Yj,{})]})]})]})})})}gg.createRoot(document.getElementById("root")).render(mi(Ut.StrictMode,{children:mi(Qj,{})}));
